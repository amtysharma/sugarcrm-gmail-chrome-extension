(function(){var h,aa=aa||{},r=this;function ba(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ca(){}function da(a){a.X=function(){return a.dg?a.dg:a.dg=new a}}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return void 0!==a}function u(a){return"array"==ea(a)}function w(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ga(a){return"function"==ea(a)}function A(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ia(a){return a[ja]||(a[ja]=++ka)}
var ja="closure_uid_"+(1E9*Math.random()>>>0),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return B.apply(null,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var C=Date.now||function(){return+new Date};
function oa(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d[e]?d=d[e]:d=d[e]={}:d[e]=b}function E(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Rh=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}E(pa,Error);pa.prototype.name="CustomError";var qa;function ra(a,b){return 0==a.lastIndexOf(b,0)}function sa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ta(a){return/^[\s\xa0]*$/.test(a)}function ua(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function va(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function wa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}
function xa(a){if(!ya.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(za,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Aa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));return a}var za=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,ya=/[&<>"']/;function Ea(a){return wa(a.replace(/  /g," &#160;"),void 0)}
function Fa(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ga={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ha={"'":"\\'"};
function Ia(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,k;if(!(k=Ga[d])){if(!(31<e&&127>e))if(d in Ha)d=Ha[d];else if(d in Ga)d=Ha[d]=Ga[d];else{e=d;k=d.charCodeAt(0);if(31<k&&127>k)e=d;else{if(256>k){if(e="\\x",16>k||256<k)e+="0"}else e="\\u",4096>k&&(e+="0");e+=k.toString(16).toUpperCase()}d=Ha[d]=e}k=d}f[g]=k}b.push('"');return b.join("")}function Ja(a,b){return a<b?-1:a>b?1:0};function Ka(a,b){b.unshift(a);pa.call(this,sa.apply(null,b));b.shift()}E(Ka,pa);Ka.prototype.name="AssertionError";function La(a,b){throw new Ka("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Ma=Array.prototype,Na=Ma.indexOf?function(a,b,c){return Ma.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Oa=Ma.forEach?function(a,b,c){Ma.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Pa=Ma.filter?function(a,b,c){return Ma.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=
0,g=x(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Qa=Ma.map?function(a,b,c){return Ma.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Ra=Ma.some?function(a,b,c){return Ma.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Sa=Ma.every?function(a,b,c){return Ma.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Ta(a,b){var c=Ua(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Ua(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Va(a,b){return 0<=Na(a,b)}function Wa(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Xa(a,b){var c=Na(a,b),d;(d=0<=c)&&Ya(a,c);return d}
function Ya(a,b){Ma.splice.call(a,b,1)}function Za(a){return Ma.concat.apply(Ma,arguments)}function $a(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function ab(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=w(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}}function bb(a,b,c,d){Ma.splice.apply(a,cb(arguments,1))}
function cb(a,b,c){return 2>=arguments.length?Ma.slice.call(a,b):Ma.slice.call(a,b,c)}function db(a,b,c){for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,k;k=b(c,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}function eb(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=fb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function gb(a,b){return a>b?1:a<b?-1:0}function fb(a,b){return a===b}function hb(a,b){var c=db(a,ib||gb,b);0>c&&bb(a,-(c+1),0,b)};function jb(){return null}function kb(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function F(a,b){this.l=[];this.L=a;this.I=b||null}h=F.prototype;h.pb=!1;h.Ib=!1;h.Gc=!1;h.Nf=!1;h.sf=!1;h.nd=0;function lb(a,b){if(a.pb)a.i instanceof F&&lb(a.i);else{if(a.h){var c=a.h;delete a.h;b?lb(c,b):(c.nd--,0>=c.nd&&lb(c))}a.L?a.L.call(a.I,a):a.sf=!0;a.pb||a.A(new mb)}}h.sd=function(a,b){this.Gc=!1;nb(this,a,b)};function nb(a,b,c){a.pb=!0;a.i=c;a.Ib=!b;a.ze()}function ob(a){if(a.pb){if(!a.sf)throw new pb;a.sf=!1}}h.w=function(a){ob(this);nb(this,!0,a)};h.A=function(a){ob(this);nb(this,!1,a)};
h.B=function(a,b){return this.u(a,null,b)};h.Fc=function(a,b){return this.u(null,a,b)};h.da=function(a,b){return this.u(a,a,b)};h.u=function(a,b,c){this.l.push([a,b,c]);this.pb&&this.ze();return this};function qb(a,b){a.u(b.w,b.A,b)}function rb(a){return Ra(a.l,function(a){return ga(a[1])})}
h.ze=function(){this.n&&this.pb&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.h&&(this.h.nd--,delete this.h);for(var a=this.i,b=!1,c=!1;this.l.length&&!this.Gc;){var d=this.l.shift(),e=d[0],f=d[1],d=d[2];if(e=this.Ib?f:e)try{var g=e.call(d||this.I,a);t(g)&&(this.Ib=this.Ib&&(g==a||g instanceof Error),this.i=a=g);a instanceof F&&(this.Gc=c=!0)}catch(k){a=k,this.Ib=!0,rb(this)||(b=!0)}}this.i=a;c&&(a.u(B(this.sd,this,!0),B(this.sd,this,!1)),a.Nf=!0);b&&(this.n=r.setTimeout(kb(a),0))};
function sb(a){var b=new F;b.w(a);return b}function tb(a){var b=new F;b.A(a);return b}function ub(a){Error.captureStackTrace?Error.captureStackTrace(this,ub):this.stack=Error().stack||"";a&&(this.message=String(a))}E(ub,Error);function pb(){ub.call(this)}E(pb,ub);pb.prototype.message="Deferred has already fired";pb.prototype.name="AlreadyCalledError";function mb(){ub.call(this)}E(mb,ub);mb.prototype.message="Deferred was canceled";mb.prototype.name="CanceledError";function vb(){0!=wb&&(xb[ia(this)]=this)}var wb=0,xb={};vb.prototype.I=!1;vb.prototype.qa=function(){if(!this.I&&(this.I=!0,this.H(),0!=wb)){var a=ia(this);delete xb[a]}};vb.prototype.H=function(){if(this.Sb)for(;this.Sb.length;)this.Sb.shift()()};var yb,zb,Ab,Bb,Cb;function Db(){return r.navigator?r.navigator.userAgent:null}function Eb(){return r.navigator}Bb=Ab=zb=yb=!1;var Fb;if(Fb=Db()){var Gb=Eb();yb=ra(Fb,"Opera");zb=!yb&&(-1!=Fb.indexOf("MSIE")||-1!=Fb.indexOf("Trident"));Ab=!yb&&-1!=Fb.indexOf("WebKit");Bb=!yb&&!Ab&&!zb&&"Gecko"==Gb.product}var Hb=yb,H=zb,Ib=Bb,Jb=Ab,Kb=Eb();Cb=-1!=(Kb&&Kb.platform||"").indexOf("Mac");var Lb=!!Eb()&&-1!=(Eb().appVersion||"").indexOf("X11");
function Mb(){var a=r.document;return a?a.documentMode:void 0}var Nb;a:{var Ob="",Pb;if(Hb&&r.opera)var Qb=r.opera.version,Ob="function"==typeof Qb?Qb():Qb;else if(Ib?Pb=/rv\:([^\);]+)(\)|;)/:H?Pb=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Jb&&(Pb=/WebKit\/(\S+)/),Pb)var Rb=Pb.exec(Db()),Ob=Rb?Rb[1]:"";if(H){var Sb=Mb();if(Sb>parseFloat(Ob)){Nb=String(Sb);break a}}Nb=Ob}var Tb={};
function Ub(a){var b;if(!(b=Tb[a])){b=0;for(var c=va(String(Nb)).split("."),d=va(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=l.exec(g)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=Ja(0==n[1].length?0:parseInt(n[1],10),0==p[1].length?0:parseInt(p[1],10))||Ja(0==n[2].length,0==p[2].length)||Ja(n[2],p[2])}while(0==b)}b=Tb[a]=0<=b}return b}
var Vb=r.document,Wb=Vb&&H?Mb()||("CSS1Compat"==Vb.compatMode?parseInt(Nb,10):5):void 0;var Xb=!H||H&&9<=Wb,Yb=!H||H&&9<=Wb,Zb=H&&!Ub("9");!Jb||Ub("528");Ib&&Ub("1.9b")||H&&Ub("8")||Hb&&Ub("9.5")||Jb&&Ub("528");Ib&&!Ub("8")||H&&Ub("9");function K(a,b){this.type=a;this.i=this.target=b}h=K.prototype;h.qa=function(){};h.Ob=!1;h.lg=!0;h.Pc=function(){this.Ob=!0};h.preventDefault=function(){this.lg=!1};function $b(a){$b[" "](a);return a}$b[" "]=ca;function ac(a,b){K.call(this,a?a.type:"");this.j=this.i=this.target=null;this.g=this.clientY=this.clientX=0;this.l=this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.h=null;a&&this.init(a,b)}E(ac,K);var bc=[1,4,2];
ac.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.i=b;var d=a.relatedTarget;if(d){if(Ib){var e;a:{try{$b(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.j=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.g=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.l=Cb?a.metaKey:
a.ctrlKey;this.h=a;a.defaultPrevented&&this.preventDefault();delete this.Ob};function cc(a){return Xb?0==a.h.button:"click"==a.type?!0:!!(a.h.button&bc[0])}ac.prototype.Pc=function(){ac.m.Pc.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};ac.prototype.preventDefault=function(){ac.m.preventDefault.call(this);var a=this.h;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Zb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var dc="closure_listenable_"+(1E6*Math.random()|0);function ec(a){try{return!(!a||!a[dc])}catch(b){return!1}}var fc=0;function gc(a,b,c,d,e){this.cc=a;this.proxy=null;this.src=b;this.type=c;this.pd=!!d;this.Sa=e;this.key=++fc;this.removed=this.od=!1}function hc(a){a.removed=!0;a.cc=null;a.proxy=null;a.src=null;a.Sa=null};function ic(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function jc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function kc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function lc(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function mc(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function nc(a,b){return b in a?a[b]:void 0}function pc(a){var b={},c;for(c in a)b[c]=a[c];return b}
function qc(a){var b={},c;for(c in a)b[a[c]]=c;return b}var rc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<rc.length;f++)c=rc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}
function tc(a){var b=arguments.length;if(1==b&&u(arguments[0]))return tc.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};function uc(a){this.src=a;this.g={};this.h=0}uc.prototype.add=function(a,b,c,d,e){var f=this.g[a];f||(f=this.g[a]=[],this.h++);var g=vc(f,b,d,e);-1<g?(a=f[g],c||(a.od=!1)):(a=new gc(b,this.src,a,!!d,e),a.od=c,f.push(a));return a};uc.prototype.remove=function(a,b,c,d){if(!(a in this.g))return!1;var e=this.g[a];b=vc(e,b,c,d);return-1<b?(hc(e[b]),Ya(e,b),0==e.length&&(delete this.g[a],this.h--),!0):!1};
function wc(a,b){var c=b.type;if(!(c in a.g))return!1;var d=Xa(a.g[c],b);d&&(hc(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d}uc.prototype.removeAll=function(a){var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,hc(d[e]);delete this.g[c];this.h--}return b};function xc(a,b,c,d,e){a=a.g[b];b=-1;a&&(b=vc(a,c,d,e));return-1<b?a[b]:null}function vc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.cc==b&&f.pd==!!c&&f.Sa==d)return e}return-1};var yc="closure_lm_"+(1E6*Math.random()|0),zc={},Ac=0;function Bc(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)Bc(a,b[f],c,d,e);return null}c=Cc(c);return ec(a)?a.listen(b,c,d,e):Dc(a,b,c,!1,d,e)}function Dc(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,k=Ec(a);k||(a[yc]=k=new uc(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=Fc();c.proxy=d;d.src=a;d.cc=c;a.addEventListener?a.addEventListener(b,d,g):a.attachEvent(b in zc?zc[b]:zc[b]="on"+b,d);Ac++;return c}
function Fc(){var a=Gc,b=Yb?function(c){return a.call(b.src,b.cc,c)}:function(c){c=a.call(b.src,b.cc,c);if(!c)return c};return b}function Hc(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Hc(a,b[f],c,d,e);else c=Cc(c),ec(a)?a.nb.add(String(b),c,!0,d,e):Dc(a,b,c,!0,d,e)}function Ic(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Ic(a,b[f],c,d,e);else c=Cc(c),ec(a)?a.Ea(b,c,d,e):a&&(a=Ec(a))&&(b=xc(a,b,c,!!d,e))&&Jc(b)}
function Jc(a){if(y(a)||!a||a.removed)return!1;var b=a.src;if(ec(b))return wc(b.nb,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.pd):b.detachEvent&&b.detachEvent(c in zc?zc[c]:zc[c]="on"+c,d);Ac--;(c=Ec(b))?(wc(c,a),0==c.h&&(c.src=null,b[yc]=null)):hc(a);return!0}function Kc(a,b,c,d){var e=1;if(a=Ec(a))if(b=a.g[b])for(b=$a(b),a=0;a<b.length;a++){var f=b[a];f&&f.pd==c&&!f.removed&&(e&=!1!==Lc(f,d))}return Boolean(e)}
function Lc(a,b){var c=a.cc,d=a.Sa||a.src;a.od&&Jc(a);return c.call(d,b)}
function Gc(a,b){if(a.removed)return!0;if(!Yb){var c=b||ba("window.event"),d=new ac(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.i;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.Ob&&0<=k;k--)d.i=c[k],e&=Kc(c[k],f,!0,d);for(k=0;!d.Ob&&k<c.length;k++)d.i=c[k],e&=Kc(c[k],f,!1,d)}return e}return Lc(a,new ac(b,this))}
function Ec(a){a=a[yc];return a instanceof uc?a:null}var Mc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Cc(a){return ga(a)?a:a[Mc]||(a[Mc]=function(b){return a.handleEvent(b)})};function L(){vb.call(this);this.nb=new uc(this);this.Ec=this}E(L,vb);L.prototype[dc]=!0;h=L.prototype;h.Rd=null;h.qf=function(a){this.Rd=a};h.removeEventListener=function(a,b,c,d){Ic(this,a,b,c,d)};
h.dispatchEvent=function(a){var b,c=this.Rd;if(c)for(b=[];c;c=c.Rd)b.push(c);var c=this.Ec,d=a.type||a;if(x(a))a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);sc(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.Ob&&0<=g;g--)f=a.i=b[g],e=Nc(f,d,!0,a)&&e;a.Ob||(f=a.i=c,e=Nc(f,d,!0,a)&&e,a.Ob||(e=Nc(f,d,!1,a)&&e));if(b)for(g=0;!a.Ob&&g<b.length;g++)f=a.i=b[g],e=Nc(f,d,!1,a)&&e;return e};h.H=function(){L.m.H.call(this);this.nb&&this.nb.removeAll(void 0);this.Rd=null};
h.listen=function(a,b,c,d){return this.nb.add(String(a),b,!1,c,d)};h.Ea=function(a,b,c,d){return this.nb.remove(String(a),b,c,d)};function Nc(a,b,c,d){b=a.nb.g[String(b)];if(!b)return!0;b=$a(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.pd==c){var k=g.cc,l=g.Sa||g.src;g.od&&wc(a.nb,g);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.lg};function M(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}E(M,pa);function Oc(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}E(Oc,pa);function Pc(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}E(Pc,pa);function Qc(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}E(Qc,pa);
function Rc(a){Error.captureStackTrace?Error.captureStackTrace(this,Rc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Rc,Error);Rc.prototype.name="ydn.error.InternalError";function Sc(a,b){F.call(this,a,b);this.j=[]}E(Sc,F);function Tc(a,b){for(var c=0;c<a.j.length;c++)a.j[c][0].call(a.j[c][1],b)}Sc.prototype.w=function(a){this.j.length=0;Sc.m.w.call(this,a)};Sc.prototype.A=function(a){this.j.length=0;Sc.m.A.call(this,a)};function Uc(a){this.id="i"+this.count();this.req=a;this.i=!0;this.g=this.h=null;this.j=new Sc;this.l=NaN}Uc.prototype.D=function(){return this.id};var Vc=0;Uc.prototype.count=function(){Vc++;return Vc};
Uc.prototype.listen=function(a){if(a&&a.id==this.id){this.h=a.data;var b=a.error;b&&(b instanceof Error?this.g=b:A(b)?(this.g=Error(b.message),this.g.name=b.name,this.g.source=b,this.g.result=this.h):(this.g=Error(b),this.g.name="UnknownError"));a.done?(this.i=!1,this.g?this.j.A(this.g):this.j.w(this.h),window.clearTimeout(this.l)):Tc(this.j,a.data);return!0}return!1};Uc.prototype.toString=function(){return"Message:"+this.id+(this.i?"*":"")};
Uc.prototype.toJSON=function(){var a=this;this.l=window.setTimeout(function(){if(a.i){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},5E3);return{id:this.id,req:this.req,group:this.n,name:this.p,data:this.h}};function Wc(a){L.call(this);var b=x(a)?null:a;this.name=x(a)?a:a.name;this.g=[];this.n=b;this.h=null;this.i={}}E(Wc,L);Wc.prototype.H=function(){if(this.h){var a=this;this.h.disconnect(function(){a.h=null;a.g.length=0})}else this.g.length=0};function Yc(a){K.call(this,"post");this.message=a}E(Yc,K);Yc.prototype.getMessage=function(){return this.message};
Wc.prototype.l=function(a){if(a)if(a.id)for(var b=this.g.length-1;0<=b;b--){if(this.g[b].D()==a.id&&this.g[b].listen(a)){this.g[b].i?25<b&&(a=this.g.splice(b,1),this.g.unshift(a[0])):this.g.splice(b,1);break}}else"info"==a.req?(a.data=this.n,this.h.postMessage(a)):this.dispatchEvent(new Yc(a))};Wc.prototype.toString=function(){return"Pipe:"+this.name};Wc.prototype.j=function(a,b){var c=a||Zc,d=c+(b?"-"+b:"");this.i[d]||(this.i[d]=new $c(this,c,b||""));return this.i[d]};
function ad(a){if(!a.h){a.h=chrome.runtime.connect({name:a.name});var b=B(a.l,a);a.h.onMessage.addListener(b);a.h.onDisconnect.addListener(function(){a.h.onMessage.removeListener(b);a.h=null;a.g.length=0})}return a.h}var bd=null;function cd(){if(!bd){var a=Zc+"-"+C();bd=new Wc(a)}return bd}function dd(a){var b=a;x(a)&&(b={group:a,name:a+"-"+C()});bd=new Wc(b)}var Zc="default",ed=["gmail","host-permission","popup","options"];function fd(a,b){return cd().j(a,b)}
function $c(a,b,c){this.g=a;this.h=b;this.i=c}$c.prototype.send=function(a,b){var c=new Uc(a),d=this.i;c.n=this.h;c.p=d;b&&(c.h=b);var d=c.j,e=this.g,f=c.toJSON();ad(e).postMessage(f);e.g.push(c);50<e.g.length&&(e.g.length-=1);return d};function gd(a){if("function"==typeof a.ya)return a.ya();if(x(a))return a.split("");if(w(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return jc(a)}function hd(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(w(a)||x(a))Oa(a,b,c);else{var d;if("function"==typeof a.La)d=a.La();else if("function"!=typeof a.ya)if(w(a)||x(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=kc(a);else d=void 0;for(var e=gd(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var id="StopIteration"in r?r.StopIteration:Error("StopIteration");function jd(){}jd.prototype.g=function(){throw id;};jd.prototype.Db=function(){return this};function kd(a){if(a instanceof jd)return a;if("function"==typeof a.Db)return a.Db(!1);if(w(a)){var b=0,c=new jd;c.g=function(){for(;;){if(b>=a.length)throw id;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function ld(a,b){if(w(a))try{Oa(a,b,void 0)}catch(c){if(c!==id)throw c;}else{a=kd(a);try{for(;;)b.call(void 0,a.g(),void 0,a)}catch(d){if(d!==id)throw d;}}}function md(a){if(w(a))return $a(a);a=kd(a);var b=[];ld(a,function(a){b.push(a)});return b};function nd(a,b){this.h={};this.g=[];this.j=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof nd?(c=a.La(),d=a.ya()):(c=kc(a),d=jc(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=nd.prototype;h.fa=function(){return this.i};h.ya=function(){od(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};h.La=function(){od(this);return this.g.concat()};
h.Ta=function(){return 0==this.i};h.clear=function(){this.h={};this.j=this.i=this.g.length=0};h.remove=function(a){return pd(this.h,a)?(delete this.h[a],this.i--,this.j++,this.g.length>2*this.i&&od(this),!0):!1};function od(a){if(a.i!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];pd(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.i!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],pd(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}h.get=function(a,b){return pd(this.h,a)?this.h[a]:b};
h.set=function(a,b){pd(this.h,a)||(this.i++,this.g.push(a),this.j++);this.h[a]=b};h.ea=function(){return new nd(this)};h.Db=function(a){od(this);var b=0,c=this.g,d=this.h,e=this.j,f=this,g=new jd;g.g=function(){for(;;){if(e!=f.j)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw id;var g=c[b++];return a?g:d[g]}};return g};function pd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var qd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function rd(a){if(sd){sd=!1;var b=r.location;if(b){var c=b.href;if(c&&(c=(c=rd(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw sd=!0,Error();}}return a.match(qd)}var sd=Jb;function td(a,b){var c;if(a instanceof td)this.Yb=t(b)?b:a.Yb,ud(this,a.ic),this.$d=a.$d,vd(this,a.M()),wd(this,a.Ad),xd(this,a.xc),yd(this,a.g.ea()),zd(this,a.Ae);else if(a&&(c=rd(String(a)))){this.Yb=!!b;ud(this,c[1]||"",!0);var d=c[2]||"";this.$d=d?decodeURIComponent(d):"";vd(this,c[3]||"",!0);wd(this,c[4]);xd(this,c[5]||"",!0);yd(this,c[6]||"",!0);zd(this,c[7]||"",!0)}else this.Yb=!!b,this.g=new Ad(null,0,this.Yb)}h=td.prototype;h.ic="";h.$d="";h.xe="";h.Ad=null;h.xc="";h.Ae="";h.Yb=!1;
h.toString=function(){var a=[],b=this.ic;b&&a.push(Bd(b,Cd),":");if(b=this.M()){a.push("//");var c=this.$d;c&&a.push(Bd(c,Cd),"@");a.push(encodeURIComponent(String(b)));b=this.Ad;null!=b&&a.push(":",String(b))}if(b=this.xc)this.xe&&"/"!=b.charAt(0)&&a.push("/"),a.push(Bd(b,"/"==b.charAt(0)?Dd:Ed));(b=this.g.toString())&&a.push("?",b);(b=this.Ae)&&a.push("#",Bd(b,Fd));return a.join("")};h.ea=function(){return new td(this)};
function ud(a,b,c){a.ic=c?b?decodeURIComponent(b):"":b;a.ic&&(a.ic=a.ic.replace(/:$/,""));return a}h.M=function(){return this.xe};function vd(a,b,c){a.xe=c?b?decodeURIComponent(b):"":b;return a}function wd(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ad=b}else a.Ad=null}function Gd(a){return a.xc}function xd(a,b,c){a.xc=c?b?decodeURIComponent(b):"":b}function yd(a,b,c){b instanceof Ad?(a.g=b,Hd(a.g,a.Yb)):(c||(b=Bd(b,Id)),a.g=new Ad(b,0,a.Yb))}
function zd(a,b,c){a.Ae=c?b?decodeURIComponent(b):"":b}function Bd(a,b){return x(a)?encodeURI(a).replace(b,Jd):null}function Jd(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Cd=/[#\/\?@]/g,Ed=/[\#\?:]/g,Dd=/[\#\?]/g,Id=/[\#\?@]/g,Fd=/#/g;function Ad(a,b,c){this.g=a||null;this.h=!!c}
function Ld(a){if(!a.ja&&(a.ja=new nd,a.Ia=0,a.g))for(var b=a.g.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Md(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}h=Ad.prototype;h.ja=null;h.Ia=null;h.fa=function(){Ld(this);return this.Ia};h.add=function(a,b){Ld(this);this.g=null;a=Md(this,a);var c=this.ja.get(a);c||this.ja.set(a,c=[]);c.push(b);this.Ia++;return this};
h.remove=function(a){Ld(this);a=Md(this,a);return pd(this.ja.h,a)?(this.g=null,this.Ia-=this.ja.get(a).length,this.ja.remove(a)):!1};h.clear=function(){this.ja=this.g=null;this.Ia=0};h.Ta=function(){Ld(this);return 0==this.Ia};function Nd(a,b){Ld(a);b=Md(a,b);return pd(a.ja.h,b)}h.La=function(){Ld(this);for(var a=this.ja.ya(),b=this.ja.La(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.ya=function(a){Ld(this);var b=[];if(x(a))Nd(this,a)&&(b=Za(b,this.ja.get(Md(this,a))));else{a=this.ja.ya();for(var c=0;c<a.length;c++)b=Za(b,a[c])}return b};h.set=function(a,b){Ld(this);this.g=null;a=Md(this,a);Nd(this,a)&&(this.Ia-=this.ja.get(a).length);this.ja.set(a,[b]);this.Ia++;return this};h.get=function(a,b){var c=a?this.ya(a):[];return 0<c.length?String(c[0]):b};
h.toString=function(){if(this.g)return this.g;if(!this.ja)return"";for(var a=[],b=this.ja.La(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ya(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.g=a.join("&")};h.ea=function(){var a=new Ad;a.g=this.g;this.ja&&(a.ja=this.ja.ea(),a.Ia=this.Ia);return a};function Md(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}
function Hd(a,b){b&&!a.h&&(Ld(a),a.g=null,hd(a.ja,function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.g=null,this.ja.set(Md(this,e),$a(a)),this.Ia+=a.length))},a));a.h=b};var Od;
Od={i:["BC","AD"],h:["Before Christ","Anno Domini"],p:"JFMAMJJASOND".split(""),$:"JFMAMJJASOND".split(""),n:"January February March April May June July August September October November December".split(" "),V:"January February March April May June July August September October November December".split(" "),F:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),xa:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ec:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Sb:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
P:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Pa:"Sun Mon Tue Wed Thu Fri Sat".split(" "),s:"SMTWTFS".split(""),na:"SMTWTFS".split(""),L:["Q1","Q2","Q3","Q4"],I:["1st quarter","2nd quarter","3rd quarter","4th quarter"],g:["AM","PM"],Af:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Hf:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],Ag:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],j:6,hd:[5,6],l:5};function Pd(a){this.h=[];this.g=Od;"number"==typeof a?Qd(this,a):Rd(this,a)}var Sd=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|w+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvwzZ]+/];function Rd(a,b){for(;b;)for(var c=0;c<Sd.length;++c){var d=b.match(Sd[c]);if(d){d=d[0];b=b.substring(d.length);0==c&&("''"==d?d="'":(d=d.substring(1,d.length-1),d=d.replace(/\'\'/,"'")));a.h.push({text:d,type:c});break}}}
function Qd(a,b){var c;if(4>b)c=a.g.Af[b];else if(8>b)c=a.g.Hf[b-4];else if(12>b)c=a.g.Ag[b-8],c=c.replace("{1}",a.g.Af[b-8]),c=c.replace("{0}",a.g.Hf[b-8]);else{Qd(a,10);return}Rd(a,c)}function Td(a){var b=Pd.prototype;if(void 0===b.g||void 0===b.g.Hg)return a;for(var c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(b.g.Hg+e-48):a.charAt(d))}return c.join("")};var Ud={yg:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},xg:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},Vd=Ud,Vd=Ud;var Wd={Cf:".",Ef:",",Ff:"%",le:"0",Fg:"+",Cg:"-",Df:"E",Gf:"\u2030",ke:"\u221e",Dg:"NaN",Bf:"#,##0.###",Gg:"#E0",Eg:"#,##0%",zg:"\u00a4#,##0.00;(\u00a4#,##0.00)",Bg:"USD"},Xd=Wd,Xd=Wd;var Yd={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[0,"Ft",
"Ft"],IDR:[0,"Rp","Rp"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u0440\u0443\u0431.",
"\u0440\u0443\u0431."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u20b4","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function Zd(a,b,c){this.s=b||Xd.Bg;this.Sb=c||$d;this.L=40;this.g=1;this.na=0;this.j=3;this.P=this.h=0;this.Pa=!1;this.F=this.l="";this.i="-";this.n="";this.I=1;this.$=3;this.V=this.xa=!1;this.p=ae;if("number"==typeof a)switch(a){case 1:be(this,Xd.Bf);break;case 2:be(this,Xd.Gg);break;case 3:be(this,Xd.Eg);break;case 4:a=Xd.zg;b=["0"];c=Yd[this.s][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));be(this,a);break;case 5:ce(this,1);break;case 6:ce(this,2);break;
default:throw Error("Unsupported pattern type.");}else be(this,a)}var $d=0,ae=0;
function be(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.l=de(a,b,c);for(var d=c[0],e=-1,f=0,g=0,k=0,l=-1,m=b.length,n=!0;c[0]<m&&n;c[0]++)switch(b.charAt(c[0])){case "#":0<g?k++:f++;0<=l&&0>e&&l++;break;case "0":if(0<k)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+k;break;case "E":if(a.V)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.V=!0;a.P=0;c[0]+1<
m&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.Pa=!0);for(;c[0]+1<m&&"0"==b.charAt(c[0]+1);)c[0]++,a.P++;if(1>f+g||1>a.P)throw Error('Malformed exponential pattern "'+b+'"');n=!1;break;default:c[0]--,n=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,k=f-g,f=g-1,g=1);if(0>e&&0<k||0<=e&&(e<f||e>f+g)||0==l)throw Error('Malformed pattern "'+b+'"');k=f+g+k;a.j=0<=e?k-e:0;0<=e&&(a.h=f+g-e,0>a.h&&(a.h=0));a.g=(0<=e?e:k)-f;a.V&&(a.L=f+a.g,0==a.j&&0==a.g&&(a.g=1));a.$=Math.max(0,l);a.xa=0==e||e==k;d=c[0]-d;a.F=de(a,b,c);c[0]<b.length&&
b.charAt(c[0])==ee?(c[0]++,a.i=de(a,b,c),c[0]+=d,a.n=de(a,b,c)):(a.i=a.l+a.i,a.n+=a.F)}function ce(a,b){a.p=b;be(a,Xd.Bf);a.h=0;a.j=2;if(0<a.h)throw Error("Can't combine significant digits and minimum fraction digits");a.na=2}
Zd.prototype.parse=function(a,b){var c=b||[0];if(this.p!=ae)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.l,c[0])==c[0],f=a.indexOf(this.i,c[0])==c[0];e&&f&&(this.l.length>this.i.length?f=!1:this.l.length<this.i.length&&(e=!1));e?c[0]+=this.l.length:f&&(c[0]+=this.i.length);if(a.indexOf(Xd.ke,c[0])==c[0])c[0]+=Xd.ke.length,d=Infinity;else{var d=a,g=!1,k=!1,l=!1,m=1,n=Xd.Cf,p=Xd.Ef,q=Xd.Df;if(this.p!=ae)throw Error("Parsing of compact style numbers is not implemented");
for(var s="";c[0]<d.length;c[0]++){var v=d.charAt(c[0]),z=fe(v);if(0<=z&&9>=z)s+=z,l=!0;else if(v==n.charAt(0)){if(g||k)break;s+=".";g=!0}else if(v==p.charAt(0)&&("\u00a0"!=p.charAt(0)||c[0]+1<d.length&&0<=fe(d.charAt(c[0]+1)))){if(g||k)break}else if(v==q.charAt(0)){if(k)break;s+="E";k=!0}else if("+"==v||"-"==v)s+=v;else if(v==Xd.Ff.charAt(0)){if(1!=m)break;m=100;if(l){c[0]++;break}}else if(v==Xd.Gf.charAt(0)){if(1!=m)break;m=1E3;if(l){c[0]++;break}}else break}d=parseFloat(s)/m}if(e){if(a.indexOf(this.F,
c[0])!=c[0])return NaN;c[0]+=this.F.length}else if(f){if(a.indexOf(this.n,c[0])!=c[0])return NaN;c[0]+=this.n.length}return f?-d:d};function ge(a,b){var c=Math.pow(10,a.j),d=0>=a.na?Math.round(b*c):Math.floor(he(b*c,a.na,a.j)),e;isFinite(d)?(e=Math.floor(d/c),c=Math.floor(d-e*c)):(e=b,c=0);return{eg:e,Lg:c}}
function ie(a,b,c,d){if(a.h>a.j)throw Error("Min value must be less than max value");b=ge(a,b);var e=Math.pow(10,a.j),f=b.eg,g=b.Lg,k=0<a.h||0<g||!1;b=a.h;k&&(b=a.h);for(var l="",m=f;1E20<m;)l="0"+l,m=Math.round(m/10);var l=m+l,n=Xd.Cf,p=Xd.Ef,m=Xd.le.charCodeAt(0),q=l.length;if(0<f||0<c){for(f=q;f<c;f++)d.push(String.fromCharCode(m));for(f=0;f<q;f++)d.push(String.fromCharCode(m+1*l.charAt(f))),1<q-f&&0<a.$&&1==(q-f)%a.$&&d.push(p)}else k||d.push(String.fromCharCode(m));(a.xa||k)&&d.push(n);a=""+
(g+e);for(c=a.length;"0"==a.charAt(c-1)&&c>b+1;)c--;for(f=1;f<c;f++)d.push(String.fromCharCode(m+1*a.charAt(f)))}function je(a,b,c){c.push(Xd.Df);0>b?(b=-b,c.push(Xd.Cg)):a.Pa&&c.push(Xd.Fg);b=""+b;for(var d=Xd.le,e=b.length;e<a.P;e++)c.push(d);c.push(b)}function fe(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=Xd.le.charCodeAt(0);return b<=a&&a<b+10?a-b:-1}var ee=";";
function de(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case ee:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.s;else switch(a.Sb){case $d:d+=Yd[a.s][1];break;case 2:var g=a.s,k=Yd[g],d=d+(g==k[1]?g:g+" "+k[1]);break;case 1:d+=Yd[a.s][2]}break;case "%":if(1!=a.I)throw Error("Too many percent/permill");a.I=100;d+=Xd.Ff;
break;case "\u2030":if(1!=a.I)throw Error("Too many percent/permill");a.I=1E3;d+=Xd.Gf;break;default:d+=g}}return d}var ke={prefix:"",og:"",we:0};function le(a,b){var c=1==a.p?Vd.yg:Vd.xg;if(3>b)return ke;b=Math.min(14,b);c=c[Math.pow(10,b)];if(!c)return ke;c=c.other;return c&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],og:c[3],we:b-(c[2].length-1)}:ke:ke}function me(a){for(var b=0;1<=(a/=10);)b++;return b}
function he(a,b,c){if(!a)return a;b=b-me(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};function ne(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"}var oe=ne,oe=ne;function pe(a){return 1==a?"one":"other"}var qe=pe,qe=pe;function re(a){this.g=[];this.i=[];this.j=new Zd(1);a&&(a=se(this,a),this.i=te(this,a))}var ue=/'([{}#].*?)'/g,ve=/''/g;
function we(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,k=a,l=e,m=c[g];t(m)?(k.g.push(m),l.push(k.h(k.g))):l.push("Undefined parameter - "+g);break;case 2:g=b[f].value;k=e;l=g.ld;t(c[l])?(l=g[c[l]],t(l)||(l=g.other),we(a,l,c,d,k)):k.push("Undefined parameter - "+l);break;case 0:g=b[f].value;xe(a,g,c,qe,d,e);break;case 1:g=b[f].value;xe(a,g,c,oe,d,e);break;default:La("Unrecognized block type.")}}
function xe(a,b,c,d,e,f){var g=b.ld,k=b.Lf,l=+c[g];if(isNaN(l))f.push("Undefined or invalid parameter - "+g);else if(k=l-k,g=b[c[g]],t(g)||(d=d(k),g=b[d],t(g)||(g=b.other)),b=[],we(a,g,c,e,b),c=b.join(""),e)f.push(c);else{a=a.j;if(isNaN(k))a=Xd.Dg;else{e=[];g=d=k;a.p==ae?b=ke:(d=Math.abs(d),g=Math.abs(g),b=le(a,1>=d?0:me(d)).we,ge(a,g/Math.pow(10,b)),d=ge(a,d/Math.pow(10,b)),b=le(a,b+me(d.eg)));k/=Math.pow(10,b.we);e.push(b.prefix);d=0>k||0==k&&0>1/k;e.push(d?a.i:a.l);if(isFinite(k))if(k=k*(d?-1:
1)*a.I,a.V)if(0==k)ie(a,k,a.g,e),je(a,0,e);else{g=Math.log(k)/Math.log(10);g=Math.floor(g+2E-15);k/=Math.pow(10,g);l=a.g;if(1<a.L&&a.L>a.g){for(;0!=g%a.L;)k*=10,g--;l=1}else 1>a.g?(g++,k/=10):(g-=a.g-1,k*=Math.pow(10,a.g-1));ie(a,k,l,e);je(a,g,e)}else ie(a,k,a.g,e);else e.push(Xd.ke);e.push(d?a.n:a.F);e.push(b.og);a=e.join("")}f.push(c.replace(/#/g,a))}}
function se(a,b){var c=a.g,d=B(a.h,a);b=b.replace(ve,function(){c.push("'");return d(c)});return b=b.replace(ue,function(a,b){c.push(b);return d(c)})}function ye(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d}
var ze=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Ae=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Be=/^\s*(\w+)\s*,\s*select\s*,/;
function te(a,b){for(var c=[],d=ye(b),e=0;e<d.length;e++){var f={};if(0==d[e].type)f.type=4,f.value=d[e].value;else if(1==d[e].type){var g=d[e].value;switch(ze.test(g)?0:Ae.test(g)?1:Be.test(g)?2:/^\s*\w+\s*/.test(g)?3:5){case 2:f.type=2;f.value=Ce(a,d[e].value);break;case 0:f.type=0;f.value=De(a,d[e].value);break;case 1:f.type=1;f.value=Ee(a,d[e].value);break;case 3:f.type=3;f.value=d[e].value;break;default:La("Unknown block type.")}}else La("Unknown part of the pattern.");c.push(f)}return c}
function Ce(a,b){var c="";b=b.replace(Be,function(a,b){c=b;return""});var d={};d.ld=c;for(var e=ye(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=te(a,e[f].value);else La("Expected block type.");d[g.replace(/\s/g,"")]=k;f++}return d}
function De(a,b){var c="",d=0;b=b.replace(ze,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.ld=c;e.Lf=d;for(var f=ye(b),g=0;g<f.length;){var k=f[g].value;g++;if(1==f[g].type)var l=te(a,f[g].value);else La("Expected block type.");e[k.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=l;g++}return e}
function Ee(a,b){var c="";b=b.replace(Ae,function(a,b){c=b;return""});var d={};d.ld=c;d.Lf=0;for(var e=ye(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=te(a,e[f].value);else La("Expected block type.");d[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return d}re.prototype.h=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};function Fe(a,b,c){a=new re(a);b={COUNT:b,TEXT:c};if(0==a.i.length)a="";else{c=[];we(a,a.i,b,!1,c);for(b=c.join("");0<a.g.length;)b=b.replace(a.h(a.g),a.g.pop());a=b}return a};function Ge(a){this.g=new nd;if(a){a=gd(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function He(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ia(a):b.substr(0,1)+a}h=Ge.prototype;h.fa=function(){return this.g.fa()};h.add=function(a){this.g.set(He(a),a)};h.removeAll=function(a){a=gd(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};h.remove=function(a){return this.g.remove(He(a))};h.clear=function(){this.g.clear()};h.Ta=function(){return this.g.Ta()};
h.contains=function(a){a=He(a);return pd(this.g.h,a)};h.ya=function(){return this.g.ya()};h.ea=function(){return new Ge(this)};h.Db=function(){return this.g.Db(!1)};function Ie(a){return Je(a||arguments.callee.caller,[])}
function Je(a,b){var c=[];if(Va(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Ke(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Ke(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Je(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Ke(a){if(Le[a])return Le[a];a=String(a);if(!Le[a]){var b=/function ([^\(]+)/.exec(a);Le[a]=b?b[1]:"[Anonymous]"}return Le[a]}var Le={};function Me(a,b,c,d,e){this.n="number"==typeof e?e:Ne++;this.l=d||C();this.j=a;this.p=b;this.h=c;delete this.i;delete this.g}Me.prototype.n=0;Me.prototype.i=null;Me.prototype.g=null;var Ne=0;Me.prototype.getMessage=function(){return this.p};function Oe(a){this.l=a}Oe.prototype.i=null;Oe.prototype.h=null;Oe.prototype.j=null;Oe.prototype.g=null;function Pe(a,b){this.name=a;this.value=b}Pe.prototype.toString=function(){return this.name};var Qe=new Pe("SHOUT",1200),Re=new Pe("SEVERE",1E3),Se=new Pe("WARNING",900),Te=new Pe("INFO",800),Ue=new Pe("CONFIG",700),Ve=new Pe("FINE",500),We=new Pe("FINER",400),Xe=new Pe("FINEST",300),Ye=[new Pe("OFF",Infinity),Qe,Re,Se,Te,Ue,Ve,We,Xe,new Pe("ALL",0)],Ze=null;h=Oe.prototype;h.getName=function(){return this.l};
function $e(a,b){a.g||(a.g=[]);a.g.push(b)}h.getParent=function(){return this.i};h.getChildren=function(){this.j||(this.j={});return this.j};function af(a){if(a.h)return a.h;if(a.i)return af(a.i);La("Root logger has no level set.");return null}
h.log=function(a,b,c){if(a.value>=af(this).value)for(ga(b)&&(b=b()),a=this.Ng(a,b,c),b="log:"+a.getMessage(),r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.g)for(var e=0,f=void 0;f=c.g[e];e++)f(d);b=b.getParent()}};
h.Ng=function(a,b,c){var d=new Me(a,String(b),this.l);if(c){d.i=c;var e;var f=arguments.callee.caller;try{var g;var k=ba("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,m,n=!1;try{l=c.lineNumber||c.Th||"Not available"}catch(p){l="Not available",n=!0}try{m=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||k}catch(q){m="Not available",n=!0}g=!n&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:m,stack:c.stack||"Not available"}}e="Message: "+xa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+xa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+xa(Ie(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.g=e}return d};function N(a,b,c){a.log(Se,b,c)}h.info=function(a,b){this.log(Te,a,b)};
function bf(a,b,c){a.log(Ve,b,c)}function P(a,b){a.log(We,b,void 0)}function Q(a,b){a.log(Xe,b,void 0)}var cf={},df=null;function ef(){df||(df=new Oe(""),cf[""]=df,df.h=Ue)}function ff(){ef();return df}function R(a){ef();var b;if(!(b=cf[a])){b=new Oe(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=R(a.substr(0,c));c.getChildren()[d]=b;b.i=c;cf[a]=b}return b};function gf(a){vb.call(this);this.h=a;this.g={}}E(gf,vb);var hf=[];h=gf.prototype;h.listen=function(a,b,c,d){u(b)||(hf[0]=b,b=hf);for(var e=0;e<b.length;e++){var f=Bc(a,b[e],c||this.handleEvent,d||!1,this.h||this);if(!f)break;this.g[f.key]=f}return this};h.Ea=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.Ea(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.h||this,c=Cc(c),d=!!d,b=ec(a)?xc(a.nb,String(b),c,d,e):a?(a=Ec(a))?xc(a,b,c,d,e):null:null,b&&(Jc(b),delete this.g[b.key]);return this};
h.removeAll=function(){ic(this.g,Jc);this.g={}};h.H=function(){gf.m.H.call(this);this.removeAll()};h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function jf(a,b){L.call(this);this.h=a||1;this.g=b||r;this.i=B(this.yh,this);this.j=C()}E(jf,L);h=jf.prototype;h.Oc=!1;h.ca=null;h.setInterval=function(a){this.h=a;this.ca&&this.Oc?(this.stop(),kf(this)):this.ca&&this.stop()};h.yh=function(){if(this.Oc){var a=C()-this.j;0<a&&a<0.8*this.h?this.ca=this.g.setTimeout(this.i,this.h-a):(this.ca&&(this.g.clearTimeout(this.ca),this.ca=null),this.dispatchEvent(lf),this.Oc&&(this.ca=this.g.setTimeout(this.i,this.h),this.j=C()))}};
function kf(a){a.Oc=!0;a.ca||(a.ca=a.g.setTimeout(a.i,a.h),a.j=C())}h.stop=function(){this.Oc=!1;this.ca&&(this.g.clearTimeout(this.ca),this.ca=null)};h.H=function(){jf.m.H.call(this);this.stop();delete this.g};var lf="tick";function mf(a,b,c){if(ga(a))c&&(a=B(a,c));else if(a&&"function"==typeof a.handleEvent)a=B(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:r.setTimeout(a,b||0)};function nf(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return JSON.parse(a)}catch(b){}throw Error("Invalid JSON string: "+a);}function of(){}function pf(a,b){var c=[];qf(a,b,c);return c.join("")}
function qf(a,b,c){switch(typeof b){case "string":rf(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),qf(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),rf(e,c),c.push(":"),qf(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var sf={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},tf=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function rf(a,b){b.push('"',a.replace(tf,function(a){if(a in sf)return sf[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return sf[a]=e+b.toString(16)}),'"')};function uf(a,b){a&&bf(a,b,void 0)};function vf(){}vf.prototype.g=null;function wf(a){var b;(b=a.g)||(b={},xf(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var yf;function zf(){}E(zf,vf);function Af(a){return(a=xf(a))?new ActiveXObject(a):new XMLHttpRequest}function xf(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h}yf=new zf;function Bf(a){L.call(this);this.headers=new nd;this.$=a||null;this.h=!1;this.V=this.Q=null;this.Pa=this.s="";this.n=0;this.p="";this.i=this.xa=this.F=this.na=!1;this.l=0;this.L=null;this.j=Cf;this.P=this.hd=!1}E(Bf,L);var Cf="";Bf.prototype.g=R("goog.net.XhrIo");var Df=/^https?$/i,Ef=["POST","PUT"];h=Bf.prototype;h.Wf=function(){return this.j};
h.send=function(a,b,c,d){if(this.Q)throw Error("[goog.net.XhrIo] Object is active with another request="+this.s+"; newUri="+a);b=b?b.toUpperCase():"GET";this.s=a;this.p="";this.n=0;this.Pa=b;this.na=!1;this.h=!0;this.Q=this.$?Af(this.$):Af(yf);this.V=this.$?wf(this.$):wf(yf);this.Q.onreadystatechange=B(this.jg,this);try{uf(this.g,Ff(this,"Opening Xhr")),this.xa=!0,this.Q.open(b,a,!0),this.xa=!1}catch(e){uf(this.g,Ff(this,"Error opening Xhr: "+e.message));Gf(this,e);return}a=c||"";var f=this.headers.ea();
d&&hd(d,function(a,b){f.set(b,a)});d=Ta(f.La(),Hf);c=r.FormData&&a instanceof r.FormData;!Va(Ef,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");hd(f,function(a,b){this.Q.setRequestHeader(b,a)},this);this.j&&(this.Q.responseType=this.j);"withCredentials"in this.Q&&(this.Q.withCredentials=this.hd);try{If(this),0<this.l&&(this.P=Jf(this.Q),uf(this.g,Ff(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.P)),this.P?(this.Q.timeout=this.l,this.Q.ontimeout=B(this.pg,
this)):this.L=mf(this.pg,this.l,this)),uf(this.g,Ff(this,"Sending request")),this.F=!0,this.Q.send(a),this.F=!1}catch(g){uf(this.g,Ff(this,"Send error: "+g.message)),Gf(this,g)}};function Jf(a){return H&&Ub(9)&&y(a.timeout)&&t(a.ontimeout)}function Hf(a){return"content-type"==a.toLowerCase()}h.pg=function(){"undefined"!=typeof aa&&this.Q&&(this.p="Timed out after "+this.l+"ms, aborting",this.n=8,uf(this.g,Ff(this,this.p)),this.dispatchEvent("timeout"),this.abort(8))};
function Gf(a,b){a.h=!1;a.Q&&(a.i=!0,a.Q.abort(),a.i=!1);a.p=b;a.n=5;Kf(a);Lf(a)}function Kf(a){a.na||(a.na=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}h.abort=function(a){this.Q&&this.h&&(uf(this.g,Ff(this,"Aborting")),this.h=!1,this.i=!0,this.Q.abort(),this.i=!1,this.n=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Lf(this))};h.H=function(){this.Q&&(this.h&&(this.h=!1,this.i=!0,this.Q.abort(),this.i=!1),Lf(this,!0));Bf.m.H.call(this)};
h.jg=function(){this.I||(this.xa||this.F||this.i?Mf(this):this.uh())};h.uh=function(){Mf(this)};function Mf(a){if(a.h&&"undefined"!=typeof aa)if(a.V[1]&&4==Nf(a)&&2==a.N())uf(a.g,Ff(a,"Local request error detected and ignored"));else if(a.F&&4==Nf(a))mf(a.jg,0,a);else if(a.dispatchEvent("readystatechange"),4==Nf(a)){uf(a.g,Ff(a,"Request complete"));a.h=!1;try{a.Ca()?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.n=6,a.p=a.Ha()+" ["+a.N()+"]",Kf(a))}finally{Lf(a)}}}
function Lf(a,b){if(a.Q){If(a);var c=a.Q,d=a.V[0]?ca:null;a.Q=null;a.V=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.g)&&c.log(Re,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function If(a){a.Q&&a.P&&(a.Q.ontimeout=null);y(a.L)&&(r.clearTimeout(a.L),a.L=null)}
h.Ca=function(){var a=this.N(),b;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:b=!0;break a;default:b=!1}if(!b){if(a=0===a)a=rd(String(this.s))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),a=!Df.test(a?a.toLowerCase():"");b=a}return b};function Nf(a){return a.Q?a.Q.readyState:0}h.N=function(){try{return 2<Nf(this)?this.Q.status:-1}catch(a){var b=this.g;b&&N(b,"Can not get status: "+a.message,void 0);return-1}};
h.Ha=function(){try{return 2<Nf(this)?this.Q.statusText:""}catch(a){return uf(this.g,"Can not get status: "+a.message),""}};
function Of(a){try{if(!a.Q)return null;if("response"in a.Q)return a.Q.response;switch(a.j){case Cf:case "text":return a.Q.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.Q)return a.Q.mozResponseArrayBuffer}var b=a.g;b&&b.log(Re,"Response type "+a.j+" is not supported on this browser",void 0);return null}catch(c){return uf(a.g,"Can not get response: "+c.message),null}}function Ff(a,b){return b+" ["+a.Pa+" "+a.s+" "+a.N()+"]"};function Pf(){this.i=this.h=0;this.g=[]}function Qf(a){if(a.h!=a.i){var b=a.g[a.h];delete a.g[a.h];a.h++;return b}}h=Pf.prototype;h.fa=function(){return this.i-this.h};h.Ta=function(){return 0==this.i-this.h};h.clear=function(){this.i=this.h=this.g.length=0};h.contains=function(a){return Va(this.g,a)};h.remove=function(a){a=Na(this.g,a);if(0>a)return!1;a==this.h?Qf(this):(Ya(this.g,a),this.i--);return!0};h.ya=function(){return this.g.slice(this.h,this.i)};function Rf(a,b){vb.call(this);this.n=a||0;this.i=b||10;if(this.n>this.i)throw Error(Sf);this.g=new Pf;this.h=new Ge;this.l=null;this.jd()}E(Rf,vb);var Sf="[goog.structs.Pool] Min can not be greater than max";h=Rf.prototype;h.Bd=function(){var a=C();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.g.fa()&&(b=Qf(this.g),!this.lf(b));)this.jd();!b&&this.fa()<this.i&&(b=this.Je());b&&(this.l=a,this.h.add(b));return b}};h.Td=function(a){return this.h.remove(a)?(this.ne(a),!0):!1};
h.ne=function(a){this.h.remove(a);if(this.lf(a)&&this.fa()<this.i){var b=this.g;b.g[b.i++]=a}else Tf(a)};h.jd=function(){for(var a=this.g;this.fa()<this.n;){var b=this.Je();a.g[a.i++]=b}for(;this.fa()>this.i&&0<this.g.fa();)Tf(Qf(a))};h.Je=function(){return{}};function Tf(a){if("function"==typeof a.qa)a.qa();else for(var b in a)a[b]=null}h.lf=function(a){return"function"==typeof a.Jg?a.Jg():!0};h.contains=function(a){return this.g.contains(a)||this.h.contains(a)};
h.fa=function(){return this.g.fa()+this.h.fa()};h.Ta=function(){return this.g.Ta()&&this.h.Ta()};h.H=function(){Rf.m.H.call(this);if(0<this.h.fa())throw Error("[goog.structs.Pool] Objects not released");delete this.h;for(var a=this.g;!a.Ta();)Tf(Qf(a));delete this.g};function Uf(a,b){this.g=a;this.h=b}Uf.prototype.T=function(){return this.h};Uf.prototype.ea=function(){return new Uf(this.g,this.h)};function Vf(a){this.g=[];if(a)a:{var b,c;if(a instanceof Vf){if(b=a.La(),c=a.ya(),0>=a.fa()){a=this.g;for(var d=0;d<b.length;d++)a.push(new Uf(b[d],c[d]));break a}}else b=kc(a),c=jc(a);for(d=0;d<b.length;d++)Wf(this,b[d],c[d])}}function Wf(a,b,c){var d=a.g;d.push(new Uf(b,c));b=d.length-1;a=a.g;for(c=a[b];0<b;)if(d=b-1>>1,a[d].g>c.g)a[b]=a[d],b=d;else break;a[b]=c}h=Vf.prototype;
h.remove=function(){var a=this.g,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Wa(a);else{a[0]=a.pop();for(var a=0,b=this.g,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].g<b[f].g?g:f;if(b[f].g>e.g)break;b[a]=b[f];a=f}b[a]=e}return c.T()}};h.ya=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].T());return b};h.La=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].g);return b};h.ea=function(){return new Vf(this)};h.fa=function(){return this.g.length};
h.Ta=function(){return 0==this.g.length};h.clear=function(){Wa(this.g)};function Xf(){Vf.call(this)}E(Xf,Vf);function Yf(a,b){this.j=new Xf;Rf.call(this,a,b)}E(Yf,Rf);h=Yf.prototype;h.Bd=function(a,b){if(!a)return Yf.m.Bd.call(this);Wf(this.j,t(b)?b:100,a);this.af()};h.af=function(){for(var a=this.j;0<a.fa();){var b=this.Bd();if(b)a.remove().apply(this,[b]);else break}};h.ne=function(a){Yf.m.ne.call(this,a);this.af()};h.jd=function(){Yf.m.jd.call(this);this.af()};h.H=function(){Yf.m.H.call(this);r.clearTimeout(void 0);this.j.clear();this.j=null};function Zf(a,b,c){Yf.call(this,b,c);this.p=a}E(Zf,Yf);Zf.prototype.Je=function(){var a=new Bf,b=this.p;b&&hd(b,function(b,d){a.headers.set(d,b)});return a};Zf.prototype.lf=function(a){return!a.I&&!a.Q};function $f(a,b,c,d,e){L.call(this);this.i=t(a)?a:1;this.j=t(e)?Math.max(0,e):0;this.Cc=new Zf(b,c,d);this.g=new nd;this.h=new gf(this)}E($f,L);var ag="ready complete success error abort timeout".split(" ");h=$f.prototype;h.send=function(a,b,c,d,e,f,g,k,l){if(this.g.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new bg(b,B(this.ah,this,a),c,d,e,g,t(k)?k:this.i,l);this.g.set(a,b);a=B(this.Vg,this,a);this.Cc.Bd(a,f);return b};
h.abort=function(a,b){var c=this.g.get(a);if(c){var d=c.be;c.If=!0;b&&(d&&(this.h.Ea(d,ag,c.ae),Hc(d,"ready",function(){this.Cc.Td(d)},!1,this)),this.g.remove(a));d&&d.abort()}};h.Vg=function(a,b){var c=this.g.get(a);c&&!c.be?(this.h.listen(b,ag,c.ae),b.l=Math.max(0,this.j),b.j=c.Wf(),c.be=b,this.dispatchEvent(new cg("ready",this,a,b)),dg(this,a,b),c.If&&b.abort()):this.Cc.Td(b)};
h.ah=function(a,b){var c=b.target;switch(b.type){case "ready":dg(this,a,c);break;case "complete":a:{var d=this.g.get(a);if(7==c.n||c.Ca()||d.md>d.He)if(this.dispatchEvent(new cg("complete",this,a,c)),d&&(d.Rf=!0,d.te)){c=d.te.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new cg("success",this,a,c));break;case "timeout":case "error":d=this.g.get(a);d.md>d.He&&this.dispatchEvent(new cg("error",this,a,c));break;case "abort":this.dispatchEvent(new cg("abort",this,a,c))}return null};
function dg(a,b,c){var d=a.g.get(b);!d||d.Rf||d.md>d.He?(d&&(a.h.Ea(c,ag,d.ae),a.g.remove(b)),a.Cc.Td(c)):(d.md++,c.send(d.zh,d.zd(),d.ra(),d.Mc()))}h.H=function(){$f.m.H.call(this);this.Cc.qa();this.Cc=null;this.h.qa();this.h=null;var a=this.g;hd(a,function(a){a.qa()});a.clear();this.g=null};function cg(a,b,c,d){K.call(this,a,b);this.id=c;this.be=d}E(cg,K);
function bg(a,b,c,d,e,f,g,k){vb.call(this);this.zh=a;this.i=c||"GET";this.g=d;this.h=e||null;this.He=t(g)?g:1;this.md=0;this.If=this.Rf=!1;this.ae=b;this.te=f;this.j=k||Cf;this.be=null}E(bg,vb);h=bg.prototype;h.zd=function(){return this.i};h.ra=function(){return this.g};h.Mc=function(){return this.h};h.Wf=function(){return this.j};h.H=function(){bg.m.H.call(this);delete this.ae;delete this.te};function eg(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b};function fg(){this.i=[];this.h=this.g=0};function gg(){};function hg(){this.g=[];this.j=[];this.n=[];this.i=[];this.i[0]=128;for(var a=1;64>a;++a)this.i[a]=0;this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.l=this.h=0}E(hg,gg);
function ig(a,b,c){c||(c=0);var d=a.n;if(x(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.g[0];c=a.g[1];for(var g=a.g[2],k=a.g[3],l=a.g[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.g[0]=a.g[0]+b&4294967295;a.g[1]=a.g[1]+c&4294967295;a.g[2]=a.g[2]+g&4294967295;a.g[3]=a.g[3]+k&4294967295;a.g[4]=a.g[4]+l&4294967295}
hg.prototype.update=function(a,b){t(b)||(b=a.length);for(var c=b-64,d=0,e=this.j,f=this.h;d<b;){if(0==f)for(;d<=c;)ig(this,a,d),d+=64;if(x(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,64==f){ig(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,64==f){ig(this,e);f=0;break}}this.h=f;this.l+=b};
function jg(a){var b=[],c=8*a.l;56>a.h?a.update(a.i,56-a.h):a.update(a.i,64-(a.h-56));for(var d=63;56<=d;d--)a.j[d]=c&255,c/=256;ig(a,a.j);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.g[d]>>e&255,++c;return b};var kg=null,lg=null;function mg(a){this.g=a;this.h=new of}mg.prototype.set=function(a,b){t(b)?this.g.set(a,pf(this.h,b)):this.g.remove(a)};mg.prototype.get=function(a){var b;try{b=this.g.get(a)}catch(c){return}if(null!==b)try{return nf(b)}catch(d){throw"Storage: Invalid value was encountered";}};mg.prototype.remove=function(a){this.g.remove(a)};function ng(){};function og(a){mg.call(this,a)}E(og,mg);function pg(a){this.data=a}function qg(a){return!t(a)||a instanceof pg?a:new pg(a)}function rg(a){a=a.data;if(!t(a))throw"Storage: Invalid value was encountered";return a}og.prototype.set=function(a,b){og.m.set.call(this,a,qg(b))};og.prototype.Nc=function(a){a=og.m.get.call(this,a);if(!t(a)||a instanceof Object)return a;throw"Storage: Invalid value was encountered";};og.prototype.get=function(a){return(a=this.Nc(a))?rg(a):void 0};function sg(a){mg.call(this,a)}E(sg,og);sg.prototype.set=function(a,b,c){if(b=qg(b)){if(c){if(c<C()){sg.prototype.remove.call(this,a);return}b.expiration=c}b.creation=C()}sg.m.set.call(this,a,b)};sg.prototype.Nc=function(a,b){var c=sg.m.Nc.call(this,a);if(c){var d;if(d=!b){d=c.creation;var e=c.expiration;d=!!e&&e<C()||!!d&&d>C()}if(d)sg.prototype.remove.call(this,a);else return c}};function tg(a){mg.call(this,a)}E(tg,sg);function ug(){}E(ug,ng);ug.prototype.fa=function(){var a=0;ld(this.Db(!0),function(){a++});return a};ug.prototype.clear=function(){var a=md(this.Db(!0)),b=this;Oa(a,function(a){b.remove(a)})};function vg(a,b){mg.call(this,a);this.Ie=eg(b);this.Pf=new of}E(vg,tg);h=vg.prototype;h.Ie=null;h.Pf=null;
function wg(a,b){var c=new hg;c.update(eg(b));c.update(a.Ie);c=jg(c);if(!w(c))throw Error("encodeByteArray takes an array as a parameter");if(!kg){kg={};lg={};for(var d=0;65>d;d++)kg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d),lg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(d)}for(var d=lg,e=[],f=0;f<c.length;f+=3){var g=c[f],k=f+1<c.length,l=k?c[f+1]:0,m=f+2<c.length,n=m?c[f+2]:0,p=g>>2,g=(g&3)<<4|l>>4,l=(l&15)<<2|n>>6,n=n&63;
m||(n=64,k||(l=64));e.push(d[p],d[g],d[l],d[n])}return e.join("")}
function xg(a,b,c,d){if(!(0<b.length))throw Error("Non-empty salt must be provided");var e=new hg;e.update(eg(c));e.update(b);e.update(a.Ie);a=new fg;var e=jg(e),f;f||(f=e.length);b=a.i;for(c=0;256>c;++c)b[c]=c;var g=0;for(c=0;256>c;++c){var g=g+b[c]+e[c%f]&255,k=b[c];b[c]=b[g];b[g]=k}a.g=0;a.h=0;f=a.g;e=a.h;b=a.i;for(c=0;1536>c;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=g;a.g=f;a.h=e;d=eg(d);var l;l||(l=d.length);f=a.g;e=a.h;b=a.i;for(c=0;c<l;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=
g,d[c]^=b[b[f]+b[e]&255];a.g=f;a.h=e;return String.fromCharCode.apply(null,d)}h.set=function(a,b,c){if(t(b)){for(var d=[],e=0;8>e;++e)d[e]=Math.floor(256*Math.random());b=new pg(xg(this,d,a,pf(this.Pf,b)));b.salt=d;vg.m.set.call(this,wg(this,a),b,c)}else vg.prototype.remove.call(this,a)};
h.Nc=function(a,b){var c=vg.m.Nc.call(this,wg(this,a),b);if(c){var d=rg(c),e=c.salt;if(!x(d)||!u(e)||!e.length)throw"Storage: Invalid value was encountered";d=xg(this,e,a,d);try{c.data=nf(d)}catch(f){throw"Storage: The value could not be decrypted";}return c}};h.remove=function(a){vg.m.remove.call(this,wg(this,a))};function yg(a){this.g=a}E(yg,ug);h=yg.prototype;h.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};h.get=function(a){a=this.g.getItem(a);if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};h.remove=function(a){this.g.removeItem(a)};h.fa=function(){return this.g.length};
h.Db=function(a){var b=0,c=this.g,d=new jd;d.g=function(){if(b>=c.length)throw id;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){this.g.clear()};h.key=function(a){return this.g.key(a)};function zg(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}E(zg,yg);var Ag=!H||H&&9<=Wb,Bg=!Ib&&!H||H&&H&&9<=Wb||Ib&&Ub("1.9.1"),Cg=H&&!Ub("9");function Dg(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]}function Eg(a,b){for(var c=Dg(a),d=cb(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)Va(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e}function Fg(a,b){var c=Dg(a),d=cb(arguments,1),e=Gg(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Gg(a,b){return Pa(a,function(a){return!Va(b,a)})};function Hg(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}Hg.prototype.ea=function(){return new Hg(this.x,this.y)};Hg.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Ig(a,b){return new Hg(a.x-b.x,a.y-b.y)}Hg.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};Hg.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function Jg(a,b){this.width=a;this.height=b}h=Jg.prototype;h.ea=function(){return new Jg(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.Ta=function(){return!(this.width*this.height)};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Kg(a){return a?new Lg(Mg(a)):qa||(qa=new Lg)}function Ng(a,b){var c=b||document,d=null;c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):(c=b||document,d=(c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Og(document,"*",a,b))[0]);return d||null}
function Og(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&Va(b.split(/\s+/),c)&&(d[e++]=g);d.length=e;return d}return a}
function Pg(a,b){ic(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Qg?a.setAttribute(Qg[d],b):ra(d,"aria-")||ra(d,"data-")?a.setAttribute(d,b):a[d]=b})}var Qg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Rg(a){return Jb||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Sg(a){return a.parentWindow||a.defaultView}function Tg(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||A(f)&&0<f.nodeType?d(f):Oa(Ug(f)?$a(f):f,d)}}function Vg(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Wg(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function Xg(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Yg(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Zg(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Mg(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function $g(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Vg(a),a.appendChild(Mg(a).createTextNode(String(b)))}var ah={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},bh={IMG:" ",BR:"\n"};function ch(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}function dh(a){a=a.tabIndex;return y(a)&&0<=a&&32768>a}
function eh(a){var b=[];fh(a,b,!1);return b.join("")}function fh(a,b,c){if(!(a.nodeName in ah))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in bh)b.push(bh[a.nodeName]);else for(a=a.firstChild;a;)fh(a,b,c),a=a.nextSibling}function Ug(a){if(a&&"number"==typeof a.length){if(A(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}
function gh(a){return hh(a,function(a){return Va(Dg(a),"sidebar")})}function hh(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Lg(a){this.g=a||r.document||document}h=Lg.prototype;h.o=function(a){return x(a)?this.g.getElementById(a):a};
h.t=function(a,b,c){var d=this.g,e=arguments,f=e[0],g=e[1];if(!Ag&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',xa(g.name),'"');if(g.type){f.push(' type="',xa(g.type),'"');var k={};sc(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:u(g)?Eg.apply(null,[f].concat(g)):Pg(f,g));2<e.length&&Tg(d,f,e);return f};h.createElement=function(a){return this.g.createElement(a)};function ih(a){return"CSS1Compat"==a.g.compatMode}
function jh(a){var b=a.g;a=Rg(b);b=Sg(b);return H&&Ub("10")&&b.pageYOffset!=a.scrollTop?new Hg(a.scrollLeft,a.scrollTop):new Hg(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}h.appendChild=function(a,b){a.appendChild(b)};h.rh=Wg;h.getChildren=function(a){return Bg&&void 0!=a.children?a.children:Pa(a.childNodes,function(a){return 1==a.nodeType})};h.Vf=Yg;h.contains=Zg;H&&Ub(8);function kh(a,b,c){vb.call(this);this.h=a;this.n=b||0;this.i=c;this.l=B(this.j,this)}E(kh,vb);kh.prototype.g=0;kh.prototype.H=function(){kh.m.H.call(this);this.stop();delete this.h;delete this.i};function lh(a){a.stop();a.g=mf(a.l,t(void 0)?void 0:a.n)}kh.prototype.stop=function(){0!=this.g&&r.clearTimeout(this.g);this.g=0};function mh(a){a.stop();a.j()}kh.prototype.j=function(){this.g=0;this.h&&this.h.call(this.i)};function nh(a,b,c){vb.call(this);this.j=a;this.i=b;this.h=c;this.g=B(this.wh,this)}E(nh,vb);h=nh.prototype;h.Yd=!1;h.ca=null;function oh(a){a.ca?a.Yd=!0:ph(a)}h.stop=function(){this.ca&&(r.clearTimeout(this.ca),this.ca=null,this.Yd=!1)};h.H=function(){nh.m.H.call(this);this.stop()};h.wh=function(){this.ca=null;this.Yd&&(this.Yd=!1,ph(this))};function ph(a){a.ca=mf(a.g,a.i);a.j.call(a.h)};R("ydn");var qh=Math.pow(2,3),rh=Math.pow(2,6);function sh(){L.call(this);this.key=this.g=void 0}E(sh,L);sh.prototype.R=function(a,b){if("boolean"!=typeof b)throw Error("Invalid value");if("number"!=typeof a||0>a)throw Error("Invalid state");"undefined"==typeof this.g&&(this.g=0);this.g=b?this.g|a:this.g&~a};function th(a){a.R(qh,!0);mf(function(){this.dispatchEvent(uh)},0,a)}var uh="a";function vh(a,b,c){K.call(this,a,b);this.url=c}E(vh,K);R("ydn");function wh(a){return!x(a)||ta(a)?{}:JSON.parse(a)}function xh(a){var b;try{b=S(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function S(a){return JSON.stringify(a,void 0,void 0)};R("ydn.Store");function yh(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=zh();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function Ah(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=zh();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function Bh(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");}
function zh(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}}return a};function Ch(a){Error.captureStackTrace?Error.captureStackTrace(this,Ch):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}E(Ch,Error);function Dh(a){Error.captureStackTrace?Error.captureStackTrace(this,Dh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}E(Ch,Error);Dh.prototype.name="ydn.error.NotSupportedException";
function Eh(a){Error.captureStackTrace?Error.captureStackTrace(this,Eh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}E(Eh,Error);function Fh(a){Error.captureStackTrace?Error.captureStackTrace(this,Fh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Fh,Error);Fh.prototype.name="ydn.InternalError";
function Gh(a){Error.captureStackTrace?Error.captureStackTrace(this,Gh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}E(Gh,Error);Gh.prototype.name="ydn.error.ConstraintError";function Hh(a){Error.captureStackTrace?Error.captureStackTrace(this,Hh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}E(Ch,Error);
function Ih(a){Error.captureStackTrace?Error.captureStackTrace(this,Ih):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}E(Ih,Error);var Jh,Kh,Lh,Mh;Mh=Lh=Kh=Jh=!1;var Nh=Db();Nh&&(-1!=Nh.indexOf("Firefox")?Jh=!0:-1!=Nh.indexOf("Camino")||(-1!=Nh.indexOf("iPhone")||-1!=Nh.indexOf("iPod")?Kh=!0:-1!=Nh.indexOf("iPad")?Lh=!0:-1!=Nh.indexOf("Chrome")&&(Mh=!0)));var Oh=Jh,Ph=Kh,Qh=Lh,Rh=Mh;function Sh(a){if(!u(a))throw new Ch("Array required.");if(t(void 0))return a=Qa(a,function(a){return a[void 0]}),Sh(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};function Th(){sh.call(this);this.h=null;Bc(this,"user-login",this.kg,!1,this);Bc(this,"user-logout",this.kg,!1,this);this.p=window.top.location.href.replace(/[?#]\S+/,"")}E(Th,sh);h=Th.prototype;h.logger=R("ydn.api.AbstractUser");h.kg=function(){this.display?(this.display.i(this.l||""),this.isLogin()?this.j&&this.display.h(this.j):this.i&&this.display.g(this.i),Q(this.logger,"Refreshed.")):Q(this.logger,"No UI refreshed.")};
h.toJSON=function(){return{nickname:this.n,email:this.l,is_login:this.h,login_url:this.i,logout_url:this.j,user_id:this.user_id}};h.isLogin=function(){return!0===this.h};h.toString=function(){return"User:"+(!0===this.h?this.l:!1===this.h?"logout":"?")};h.Xc=0;
function Uh(a,b){!b&&a.isLogin()?Q(a.logger,"Already login"):(a.wc||(a.wc=new nh(function(){this.isLogin()?this.wc.stop():1<this.Xc?(N(this.logger,"Cannot login to the API server, tried "+this.Xc+" times."),this.wc.stop(),this.Xc=0):(this.Xc++,this.Uc())},5E3,a)),a.Xc=0,oh(a.wc))}h.refresh=function(a){Uh(this,a)};function Vh(a,b,c){vh.call(this,a,b,c)}E(Vh,vh);function Wh(){Th.call(this)}E(Wh,Th);Wh.prototype.logger=R("ydn.api.User");
Wh.prototype.load=function(a){bf(this.logger,"getting user info");if(a.logout_url)return this.n=a.nickname,this.l=a.email,this.user_id=a.user_id,this.h=a.is_login,this.j=a.logout_url,this.i=a.login_url,bf(this.logger,a.email+" login"),this.j=a.logout_url,this.user_id=a.Id?a.Id.$t:void 0,this.h=!0,this.i=void 0,this.R(rh,!0),th(this),!0;a.login_url&&(bf(this.logger,"NO user"),this.i=a.login_url,this.h=!1,this.l=this.user_id=this.j=this.n=void 0,this.R(rh,!0),th(this));return!1};
Wh.prototype.s=function(a,b){Q(this.logger,"Receiving "+(b.Ca()?"":"fail")+" login info from server.");if(b.Ca()){var c=a.User;if(c){var d;d=this.load(c)?new Vh("user-login",this,this.j):new Vh("user-logout",this,this.i);mf(function(){this.dispatchEvent(d)},0,this)}}else N(this.logger,"Server return error with: "+b.Ha());this.wc&&this.wc.stop()};
function Xh(a,b){var c=new F,d=Yh(Zh);if(!d)return tb("login server not available.");var e={pm:a.p,state:Math.random().toString().substr(2,6)};if(b)for(var f in b)e[f]=b[f];d.request(new $h("/rpc_login","GET",e)).execute(function(a,b){a?c.w(a.User):c.A(b)},a);return c}Wh.prototype.Uc=function(){bf(this.logger,"Sending login request.");var a=Yh(Zh),b=window.top.location.href.replace(/[?#]\S+/,"");a.request(new $h("/rpc_login","GET",{url:b})).execute(B(this.s,this));return!1};function ai(){this.g=C()}var bi=new ai;ai.prototype.set=function(a){this.g=a};ai.prototype.get=function(){return this.g};function ci(a){this.j=a||"";this.l=bi}ci.prototype.g=!0;ci.prototype.h=!1;function di(a){a=new Date(a.l);return ei(a.getFullYear()-2E3)+ei(a.getMonth()+1)+ei(a.getDate())+" "+ei(a.getHours())+":"+ei(a.getMinutes())+":"+ei(a.getSeconds())+"."+ei(Math.floor(a.getMilliseconds()/10))}function ei(a){return 10>a?"0"+a:String(a)}function fi(a,b){var c=(a.l-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function gi(a){ci.call(this,a)}E(gi,ci);gi.prototype.h=!0;
gi.prototype.i=function(a){var b;switch(a.j.value){case Qe.value:b="dbg-sh";break;case Re.value:b="dbg-sev";break;case Se.value:b="dbg-w";break;case Te.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.j," ");this.g&&c.push("[",di(a),"] ");c.push("[",Ea(fi(a,this.l.get())),"s] ");c.push("[",xa(a.h),"] ");c.push('<span class="',b,'">',wa(Ea(xa(a.getMessage()))));this.h&&a.i&&c.push("<br>",wa(Ea(a.g||"")));c.push("</span>");c.push("<br>");return c.join("")};
function hi(a){ci.call(this,a)}E(hi,ci);hi.prototype.i=function(a){var b=[];b.push(this.j," ");this.g&&b.push("[",di(a),"] ");b.push("[",fi(a,this.l.get()),"s] ");b.push("[",a.h,"] ");b.push(a.getMessage());this.h&&a.i&&b.push("\n",a.g);b.push("\n");return b.join("")};function ii(){this.j=B(this.n,this);this.g=new hi;this.g.g=!1;this.h=this.g.h=!1;this.i="";this.l={}}function ji(a){var b=ki;if(a!=b.h){var c=ff();a?$e(c,b.j):(c=c.g)&&Xa(c,b.j);b.h=a}}ii.prototype.n=function(a){if(!this.l[a.h]){var b=this.g.i(a),c=li;if(c)switch(a.j){case Qe:mi(c,"info",b);break;case Re:mi(c,"error",b);break;case Se:mi(c,"warn",b);break;default:mi(c,"debug",b)}else window.opera?window.opera.postError(b):this.i+=b}};var li=window.console;
function mi(a,b,c){if(a[b])a[b](c);else a.log(c)};function ni(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}h=ni.prototype;h.ea=function(){return new ni(this.top,this.right,this.bottom,this.left)};h.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};h.contains=function(a){return this&&a?a instanceof ni?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
h.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};h.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function oi(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}h=oi.prototype;h.ea=function(){return new oi(this.left,this.top,this.width,this.height)};h.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};h.contains=function(a){return a instanceof oi?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
h.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function pi(a,b){var c=Mg(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function qi(a,b){return pi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function ri(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}H&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function si(a){if(H&&!(H&&8<=Wb))return a.offsetParent;var b=Mg(a),c=qi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=qi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function ti(a){for(var b=new ni(0,Infinity,Infinity,0),c=Kg(a),d=c.g.body,e=c.g.documentElement,f=Rg(c.g);a=si(a);)if(!(H&&0==a.clientWidth||Jb&&0==a.clientHeight&&a==d||a==d||a==e||"visible"==qi(a,"overflow"))){var g=ui(a),k;k=a;if(Ib&&!Ub("1.9")){var l=parseFloat(pi(k,"borderLeftWidth"));if(vi(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(pi(k,"borderRightWidth")),l=l+m;k=new Hg(l,parseFloat(pi(k,"borderTopWidth")))}else k=new Hg(k.clientLeft,k.clientTop);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(Sg(c.g)||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new Jg(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function ui(a){var b,c=Mg(a),d=qi(a,"position"),e=Ib&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Hg(0,0),g;b=c?Mg(c):document;g=!H||H&&9<=Wb||ih(Kg(b))?b.documentElement:b.body;if(a==g)return f;if(a.getBoundingClientRect)b=ri(a),a=jh(Kg(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(Jb&&"fixed"==qi(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Hb||Jb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=si(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,Hb&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function xi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function yi(a){var b=zi;if("none"!=qi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function zi(a){var b=a.offsetWidth,c=a.offsetHeight,d=Jb&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new Jg(b,c):(a=ri(a),new Jg(a.right-a.left,a.bottom-a.top))}function Ai(a){var b=ui(a);a=yi(a);return new oi(b.x,b.y,a.width,a.height)}
function T(a,b){a.style.display=b?"":"none"}function vi(a){return"rtl"==qi(a,"direction")}var Bi=Ib?"MozUserSelect":Jb?"WebkitUserSelect":null;function Ci(a,b,c){c=c?null:a.getElementsByTagName("*");if(Bi){if(b=b?"none":"",a.style[Bi]=b,c){a=0;for(var d;d=c[a];a++)d.style[Bi]=b}}else if(H||Hb)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function Di(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function Ei(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Di(a,c):0}var Fi={thin:2,medium:4,thick:6};
function Gi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Fi?Fi[c]:Di(a,c)}function Hi(a){if(H&&!(H&&9<=Wb)){var b=Gi(a,"borderLeft"),c=Gi(a,"borderRight"),d=Gi(a,"borderTop");a=Gi(a,"borderBottom");return new ni(d,c,a,b)}b=pi(a,"borderLeftWidth");c=pi(a,"borderRightWidth");d=pi(a,"borderTopWidth");a=pi(a,"borderBottomWidth");return new ni(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ii=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ji(a){this.l=B(this.n,this);this.h=new gi;this.i=this.h.g=!1;this.g=a;this.j=this.g.ownerDocument||this.g.document;a=Kg(this.g);var b=null,c=a.g;if(H&&c.createStyleSheet)a=b=c.createStyleSheet(),H&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=Og(a.g,"head",void 0,void 0)[0];c||(b=Og(a.g,"body",void 0,void 0)[0],c=a.t("head"),b.parentNode.insertBefore(c,b));var d=b=a.t("style");H&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.g.className+=" logdiv"}
Ji.prototype.n=function(a){var b=100>=this.g.scrollHeight-this.g.scrollTop-this.g.clientHeight,c=this.j.createElement("div");c.className="logmsg";c.innerHTML=this.h.i(a);this.g.appendChild(c);b&&(this.g.scrollTop=this.g.scrollHeight)};Ji.prototype.clear=function(){this.g.innerHTML=""};var ki=null,Ki=null;R("ydn.debug");function Li(a,b,c){if(y(b))b=new Pe("log",b);else if(x(b)){b=b.toUpperCase();if(!Ze){Ze={};for(var d=0,e;e=Ye[d];d++)Ze[e.value]=e,Ze[e.name]=e}b=Ze[b]||null}else b=Ve;R(a||"ydn").h=b;t(c)?Ki||(a=Ki=new Ji(c),!0!=a.i&&(c=ff(),$e(c,a.l),a.i=!0),ff().h=Se):ki||Ki||(ki=new ii,ji(!0),ff().h=Se)}var Mi=null;function Ni(a){Mi&&setTimeout(function(){Mi.log(a)},10)};var Zh="login",Oi=R("ydn.http"),Pi={},Qi=[];var Ri,Si={},Ti=[];function Ui(a,b){Si[b||"default"]=a}function Yh(a){if(!t(a))return Si["default"];for(var b=a,c=0;c<Ti.length;c++){var d=(0,Ti[c])(a);if(d){b=d;break}}return Si[b]||null}function Vi(){Ri||(Ri=new $f);return Ri}function Wi(a,b,c,d){x(a)?this.yc=a:(this.yc=null,this.status=a,this.body=b,this.headers=c||{},this.g=d)}function Xi(a){if(a.yc){var b=wh(a.yc);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.g=b.statusText;a.headers=b.headers;a.body=b.body;a.yc=null}}
Wi.prototype.N=function(){Xi(this);return this.status};Wi.prototype.Ca=function(){Xi(this);return 200<=this.status&&400>this.status};Wi.prototype.Ha=function(){Xi(this);return this.g||""};function Yi(a){Xi(a);return a.body}function Zi(a,b){Xi(a);return a.headers[b]}Wi.prototype.Mc=function(){Xi(this);return this.headers};
function $i(a){var b;Xi(a);"application/json"==Zi(a,"content-type")?b=!0:(b=a.body,b=x(b)&&!ta(b)?/^[\],:{}\s]*$/.test(b.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")):!1);return b&&x(a.body)?JSON.parse(a.body):a.body}function aj(a){return a instanceof Wi?a:x(a)?new Wi(a):new Wi(a.status,a.body,a.headers,a.statusText)}
function $h(a,b,c,d,e){this.path=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=e}var bj=null;function cj(a,b,c,d){this.l=t(b)?b:Vi();this.j="sr"+dj++;this.n=c||0;this.p=!!d;this.g=a}var dj=0;cj.prototype.D=function(){return this.j};
cj.prototype.execute=function(a,b){var c=this.g,d=new td(c.path),e;for(e in c.params)d.g.set(e,c.params[e]);this.l.send(this.j,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.Q&&4==Nf(d)?d.Q.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=Of(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(A(l))e=l;else if(x(l))try{e=wh(l)}catch(n){e=l}k=new Wi(d.N(),
l,k,d.Ha());bj&&!k.Ca()&&bj.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.path,uri:String(d.s),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:k.N(),statusText:k.Ha(),body:Yi(k),headers:k.Mc()}});a&&(a.call(b,e,k),a=null)},this.n,void 0,this.p);this.l=null};cj.prototype.toString=function(){return"HTTPRequest:"+this.j};function ej(a,b,c){this.h=a;this.i=b;this.g=null;this.Ah=t(c)?c:!0}ej.prototype.request=function(a){return new fj(a,this)};function fj(a,b){cj.call(this,a,b.i);this.parent=b}E(fj,cj);var gj=new Wi(0,null,null,"No access token");
fj.prototype.execute=function(a,b){function c(){this.Ah?d.g.headers.Authorization="Bearer "+d.parent.g.access_token:d.g.params.access_token=d.parent.g.access_token}var d=this;d.parent.g&&d.parent.g.expires>C()?(c(),fj.m.execute.call(this,function(e,f){401==f.N()?hj(d.parent.h).u(function(e){d.parent.g=e;c();fj.m.execute.call(d,a,b)},function(){d.parent.g=null;a.call(b,null,gj)},d):a.call(b,e,f)},this)):hj(this.parent.h).u(function(e){d.parent.g=e;c();fj.m.execute.call(this,a,b)},function(){d.parent.g=
null;a.call(b,null,gj)},this)};function U(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}U.prototype.lower=void 0;U.prototype.upper=void 0;U.prototype.toJSON=function(){return ij(this)};function jj(a){return kj(a)}U.only=function(a){return new U(a,a,!1,!1)};U.bound=function(a,b,c,d){return new U(a,b,c,d)};U.upperBound=function(a,b){return new U(void 0,a,void 0,!!b)};U.lowerBound=function(a,b){return new U(a,void 0,!!b,void 0)};
function lj(a){var b;if(u(a))b=$a(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return U.only(a);return U.bound(a,b,!1,!0)}function ij(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function mj(a){if(null==a)return null;if(a instanceof U)return a;if(A(a))return new U(a.lower,a.upper,a.lowerOpen,a.upperOpen);throw new M("Invalid key range: "+a+" of type "+typeof a);}
function kj(a){return null!=a?null!=a.upper&&null!=a.lower?nj.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?nj.upperBound(a.upper,a.upperOpen):null!=a.lower?nj.lowerBound(a.lower,a.lowerOpen):null:null}function oj(a){if(a instanceof U)return"";if(null!=a){if(A(a)){for(var b in a)if(a.hasOwnProperty(b)&&!Va(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
U.prototype.qe=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return U.bound(b,c,d,e)};function pj(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function qj(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==rj(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(sj(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(sj(c.upper,b)))}else d.push(a+" = ?"),e.push(sj(c.lower,b))}var nj=r.IDBKeyRange||r.webkitIDBKeyRange||U;function tj(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function uj(a,b,c){if(a)if(-1==b.indexOf("."))a[b]=c;else{b=b.split(".");for(var d=b.pop(),e;e=b.shift();)A(a[e])||(a[e]={}),a=a[e];a[d]=c}}var vj={};
function wj(a){a=[a];for(var b=new xj,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(vj);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),yj(b,e);else if(e instanceof Date)c+=2,b.write(c),yj(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===vj)b.write(0);else return"";c=0}return b.trim().toString()}function zj(a){for(var b=[],c=b,d=[],e,f,g=new Aj(a);null!=g.read();)if(0===g.current)c=d.pop();else{if(null===g.current)break;do{e=g.current/4|0;a=g.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.current+4)g.read();else break}while(1);1===a?c.push(Bj(g)):2===a?c.push(new Date(Bj(g))):3===a?c.push(Cj(g)):0===a&&(c=d.pop())}return b[0]}
function yj(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Bj(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Cj(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.read();if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Aj(a){this.current=null;this.g=a;this.h=this.g.length-1;this.index=-1}
Aj.prototype.read=function(){return this.current=this.index<this.h?parseInt(this.g[++this.index]+this.g[++this.index],16):null};function xj(){this.g=[];this.h=void 0}xj.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.h=arguments[b].toString(16),this.g.push(2===this.h.length?this.h:this.h="0"+this.h)};xj.prototype.trim=function(){for(var a=this.g.length;"00"===this.g[--a];);this.g.length=++a;return this};xj.prototype.toString=function(){return this.g.length?this.g.join(""):""};
function Dj(a,b){var c=wj(a),d=wj(b);return c>d?1:c==d?0:-1};function Ej(a,b,c,d,e){if(!(b instanceof U))if(x(b)&&t(c)){var f,g,k,l;if("starts"==b||"^"==b)b=lj(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)g=c,l=">"==b;else if("="==b||"=="==b)f=g=c;else throw new M("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)g=e,l=">"==d;else if(t(d))throw new M("invalid op2: "+d);b=U.bound(g,f,l,k)}}else b=mj(b);this.g=b;this.h=a}Ej.prototype.h="";Ej.prototype.Lc=function(){return this.h};
Ej.prototype.qe=function(a){if(this.h!=a.h)return null;a=null!=this.g&&null!=a.g?this.g.qe(a.g):this.g||a.g;return new Ej(this.h,a)};var Fj={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Gj=r.IDBRequest&&"LOADING"in r.IDBRequest?r.IDBTransaction:r.webkitIDBRequest&&"LOADING"in r.webkitIDBRequest&&1===r.webkitIDBTransaction.READ_WRITE?r.webkitIDBTransaction:Fj,Hj=Gj.READ_ONLY,Ij=Gj.READ_WRITE,Jj=Gj.VERSION_CHANGE,Kj=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;function Lj(a,b,c,d){vb.call(this);this.i=c;this.O=c.getName();this.wb=void 0;this.j=!1;this.ba=null;this.n=a;this.hd=b;this.Pa=0;this.xa=this.F=!1;this.na=d||4;this.p=this.h=this.g=void 0;this.P=function(){throw new Rc;};this.V=function(){throw new Rc;};this.Ec=function(){}}E(Lj,vb);h=Lj.prototype;
h.init=function(a,b,c,d,e){if(t(b)){a=this.i;var f,g=b;u(b)?(f=Mj(a,b),g=b.join(", ")):f=Nj(a,b);if(!f)throw new M('require index "'+g+'" not found in store "'+a.getName()+'"');this.wb=f.getName()}this.j=x(this.wb);this.ba=c||null;this.Pa=0;this.xa=this.F=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.Bb=d;this.Tc=e;this.p=this.h=this.g=void 0};h.Bb="";h.ba=null;h.unique=!1;h.reverse=!1;h.Tc=!0;h.logger=R("ydn.db.core.req.AbstractCursor");
h.fc=function(a,b,c){null==a&&(P(this.logger,this+" finished."),this.F=!0);this.g=a;this.h=b;this.p=c;this.Pa++;this.F?(Q(this.logger,this+" DONE."),this.P(),Oj(this)):(Q(this.logger,this+" new cursor position {"+(this.j?this.g+", "+this.h:this.g)+"}"),this.P(this.g))};h.H=function(){this.n=null};h.toString=function(){return"Cursor:"+this.O+(t(this.wb)?":"+this.wb:"")+"["+(this.n?"":"~")+this.hd+"]"};
function Oj(a){null!=a.h?a.h=Pj(a.h):a.h=void 0;null!=a.g?a.g=Pj(a.g):a.g=void 0;a.Ec(a.xa,a.g,a.h)}function Qj(a){a.xa=!0;Q(a.logger,a+": exit");Oj(a)}h.fa=function(){return this.Pa};h.ga=function(){return this.j?this.h:this.g};h.T=function(){return this.Tc?this.ga():this.p};h.rd=function(){};function Rj(){};function Sj(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.i=a;this.h=b;this.n=g;this.p=!!this.h;if(t(d)&&!fa(d))throw new M("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!fa(e))throw new M("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!fa(f))throw new M("key_only value must be a boolean, but "+typeof f+" found");this.g=t(f)?f:!!x(this.h);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.l=
a;if(d=oj(c))throw new M("Invalid key range: "+d);this.j=kj(c);this.s=Tj;this.L=NaN}E(Sj,Rj);Sj.prototype.g=!0;function Uj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Sj.call(this,a,b,c,d,e,!0)}E(Uj,Sj);function Vj(a,b,c){if(3<arguments.length)throw new M("too many argument");Sj.call(this,a,void 0,b,c,void 0,!1)}E(Vj,Sj);function Wj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Sj.call(this,a,b,c,d,e,!1)}E(Wj,Sj);var Tj="init";h=Sj.prototype;h.logger=R("ydn.db.Iterator");
h.G=function(){return this.i};h.ea=function(){var a=new Sj(this.i,this.h,this.j,Xj(this),Yj(this),this.g,this.n);a.L=this.L;return a};h.unique=function(a){return new Sj(this.i,this.h,this.j,Xj(this),a,this.g,this.n)};h.toJSON=function(){return{store:this.i,index:this.h,keyRange:this.j?ij(this.j):null,direction:this.l}};
h.toString=function(){var a=t(this.n)?":"+this.n.join(","):t(this.h)?":"+this.h:"",a=a+pj(this.j);this.s!=Tj&&(a+=this.s+"{"+this.F,this.p&&(a+=", "+this.I),a+="}");var b=this.p?"Index":"",b=b+(this.g?"Key":"Value");return b+"Iterator:"+this.i+a};h.reverse=function(){return new Sj(this.i,this.h,this.j,!Xj(this),Yj(this),this.g,this.n)};function Xj(a){return"prev"===a.l||"prevunique"===a.l}function Yj(a){return"nextunique"===a.l||"prevunique"===a.l}
h.load=function(a){a=a[0];a.init(this.i,this.n||this.h,this.j,this.l,this.g);this.s="busy";var b=this;a.Ec=function(a,d,e){b.F=d;b.I=e;b.s=a?"rest":"done"};a.openCursor(this.F,this.I);return a};h.ga=function(){return this.I};h.stores=function(){return[this.i]};function Zj(a,b,c){Sc.call(this,b,c);this.s=a;this.j=[];this.p=[];this.P=[];this.g=null;this.kb="";this.F=0}E(Zj,Sc);h=Zj.prototype;h.kb="";h.logger=R("ydn.db.Request");function ak(a,b,c){a.g=b;a.kb=c;P(a.logger,a+" BEGIN");if(b){for(c=0;c<a.p.length;c++)a.p[c][0].call(a.p[c][1],b);a.p.length=0}P(a.logger,a+" END")}function bk(a){var b=new Zj(a.s);a.F++;ak(b,a.g,a.kb+"C"+a.F);return b}h.zd=function(){return this.s};
h.abort=function(){if(this.g)if(P(this.logger,this+" aborting"),ga(this.g.abort))this.g.abort();else if(ga(this.g.executeSql))this.g.executeSql("ABORT",[],function(){},function(){return!0});else throw new Oc;else throw new ck("No active transaction");};function V(a,b,c){var d=a.P.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){V(a,b,c)}):c?a.A(b):a.w(b)}function dk(a,b,c){a.P.push([b,c])}function W(a,b,c){a.g?b.call(c,a.g):a.p.push([b,c])}
h.w=function(a){P(this.logger,this+" SUCCESS");Zj.m.w.call(this,a);this.g=null;this.kb=this.kb};h.A=function(a){P(this.logger,this+" ERROR");Zj.m.A.call(this,a);this.g=null;this.kb=this.kb};function X(a){var b="";a.kb&&(b=a.g?"*":"",b="["+a.kb+b+"]");return a.s+b}function ek(a,b){var c=new Zj(a);V(c,b);return c}h.toString=function(){return"Request:"+X(this)};
h.ze=function(){this.n&&this.pb&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.h&&(this.h.nd--,delete this.h);for(var a=this.i,b=!1;this.l.length&&!this.Gc;){var c=this.l.shift(),d=c[0],e=c[1],c=c[2];if(d=this.Ib?e:d)d=d.call(c||this.I,a),t(d)&&(this.Ib=this.Ib&&(d==a||d instanceof Error),this.i=a=d),a instanceof F&&(this.Gc=b=!0)}this.i=a;b&&(a.u(B(this.sd,this,!0),B(this.sd,this,!1)),a.Nf=!0)};
h.toJSON=function(){var a=(this.kb||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.s?this.s.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var rj=Kj&&Kj.cmp?B(Kj.cmp,Kj):Dj,fk=[];(function(a){if(null!=a&&!("push"in a))throw new Ch('output receiver object must have "push" method.');}).prototype.logger=R("ydn.db.algo.AbstractSolver");function gk(a){Error.captureStackTrace?Error.captureStackTrace(this,gk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}E(gk,Error);gk.prototype.name="ConstraintError";gk.prototype.toString=function(){return this.name+": "+this.message};function hk(a){Error.captureStackTrace?Error.captureStackTrace(this,hk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}E(hk,Error);
hk.prototype.toString=function(){return this.name+": "+this.message};function ik(a){Error.captureStackTrace?Error.captureStackTrace(this,ik):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}E(ik,Error);ik.prototype.name="ydn.db.VersionError";ik.prototype.toString=function(){return this.name+": "+this.message};function jk(a){Error.captureStackTrace?Error.captureStackTrace(this,jk):this.stack=Error().stack||"";a&&(this.message=String(a))}E(jk,Error);
jk.prototype.name="ydn.db.InternalError";function ck(a){Error.captureStackTrace?Error.captureStackTrace(this,ck):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}E(ck,Error);function kk(a){Error.captureStackTrace?Error.captureStackTrace(this,kk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}E(kk,Error);
function lk(a){Error.captureStackTrace?Error.captureStackTrace(this,lk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}E(lk,Error);lk.prototype.name="NotFoundError";lk.prototype.toString=function(){return this.name+": "+this.message};function mk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,mk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}E(mk,Error);
mk.prototype.toString=function(){return this.name+": "+this.message};function nk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,nk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}E(nk,Error);nk.prototype.toString=function(){return this.name+": "+this.message};function ok(a){Error.captureStackTrace?Error.captureStackTrace(this,ok):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
E(ok,Error);function pk(a){Error.captureStackTrace?Error.captureStackTrace(this,pk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}E(pk,Error);function qk(a,b,c){var d;if(A(a))d=a.store,b=a.id,null!=a.parent&&(c=new qk(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new qk(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.O=d;this.id=b;this.parent=c||null}h=qk.prototype;h.toJSON=function(){var a={store:this.O,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.O+"^:"+this.id};h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.G=function(){return this.O};h.D=function(){return this.id};function rk(a){return u(a.id)?a.id.join("^|"):a.id instanceof Date?+a.id:a.id}h.getParent=function(){return this.parent};function sk(a){return y(a)||x(a)||u(a)&&Sa(a,sk)||a instanceof Date}
function Pj(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function tk(a,b){this.g=b}tk.prototype.logger=R("ydn.db.crud.req.RequestExecuto");tk.prototype.toString=function(){return"RequestExecutor"};function uk(a,b,c,d,e,f){this.xa=a;this.Pa=b;this.g=this.i=0;this.$=d;this.V=e;this.l=c||vk;this.L=f||0;this.s=!1;this.I=0}h=uk.prototype;h.logger=R("ydn.db.tr.Thread");h.th=function(a){if("complete"==a||"abort"==a)this.s?(Q(this.logger,"tx "+this.i+" committed"),this.s=!1):(Q(this.logger,"Generator done "+this.s),V(null,this.i,"complete"!=a))};
h.nc=function(){if(t(this.F))if(this.F)Q(this.logger,"Receive to commit tx "+this.i+" on yield "+this.I),this.s=!0;else throw new Qc("Coroutine transaction thread has been ended");else throw new Qc("Transaction thread not running in a generator");};
function wk(a,b){a.s?(Q(a.logger,"waiting tx to be committed for yielding "+a.I),setTimeout(function(){a.Nb(function(){Q(a.logger,"sending result to yield "+a.I);a.F.next(b)},a.$,a.V,B(a.th,a))},4)):(Q(a.logger,"sending result to yield "+a.I),a.F.next(b));a.I++}h.request=function(a){a=new Zj(a);this.F&&a.u(function(a){wk(this,a)},function(a){var c=a;a instanceof Error||(c=Error(),c.error=a);wk(this,c)},this);return a};h.type=function(){return xk(this.xa)};h.J=function(){return this.xa};
h.Ka=function(){return"B"+this.Pa+"T"+this.i};var vk="single";function yk(a){if(a)if(ga(a.abort))a.abort();else if(ga(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Oc;else throw new ck("No active transaction");};function zk(a){this.i=a;this.g=null;this.h=0}zk.prototype.logger=R("ydn.db.tr.Mutex");zk.prototype.eb=null;function Ak(a){return!!a.g&&!a.j}zk.prototype.Va=null;zk.prototype.toString=function(){return"Mutex:"+("B"+this.i+"T"+this.h)+(this.g?"*":"")};function Bk(a,b,c,d,e,f){uk.call(this,a,b,c,d,e,f);this.j=[];this.n=[];this.p=null;this.h=new zk(b);this.P=f||0;this.na=!1}E(Bk,uk);h=Bk.prototype;h.logger=R("ydn.db.tr.Serial");
function Ck(a,b,c){if("multi"==a.l)a:if(a=a.h,!a.eb||!a.mode||c!=a.mode&&(a.mode!=Ij||c!=Hj)||b.length>a.eb.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.eb.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.l)a:if(a=a.h,a.eb&&a.mode&&c==a.mode&&a.eb.length==b.length){for(c=0;c<b.length;c++)if(-1==a.eb.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.l?!0:!1;return b}
function Dk(a){var b=0<a.j.length?a.j[0].eb:null,c=0<a.j.length?a.j[0].mode:null;return null!=b&&null!=c?Ck(a,b,c):!1}function Ek(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({wd:b,eb:c,mode:d,Va:e})}h.abort=function(){P(this.logger,this+": aborting");yk(this.p)};
h.Nb=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new M("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new M("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.Sb&&!Va(this.Sb,e[f]))throw new M('store name "'+f+e[f]+'" in scope of '+this);}}else throw new M("store names must be an array");var g=t(c)?c:Hj,k=this;if(this.h.g||!Fk(this.J())&&this.na)Ek(this,a,b,g,d);else{var l=this.Ka();d&&this.n.push(d);
if(this.P&&this.i>=this.P)throw new Qc("Exceed maximum number of transactions of "+this.P);this.na=!0;Gk(this.J(),function(c){var d=k.h;d.g=c;d.j=!1;d.eb=b;d.mode=g;d.h++;d.Va=null;l=k.Ka();bf(k.logger,l+" BEGIN "+S(b)+" "+g);a(k);for(a=null;Dk(k);)c=k.j.shift(),c.Va&&k.n.push(c.Va),Q(k.logger,"pop tx queue"+(k.j.length+1)+" reusing T"+k.i),c.wd()},e,g,function(a,b){bf(k.logger,l+" "+a);var c=k.h;c.g?(c.g=null,c.eb=null,c.mode=null,ga(c.Va)&&c.Va(a,b),c.Va=null):N(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.n.length;c++)(0,k.n[c])(a,b);k.n.length=0;(c=k.j.shift())&&k.Nb(c.wd,c.eb,c.mode,c.Va);k.g=0})}};h.Ka=function(){var a=this.h;return"B"+a.i+"T"+a.h};h.request=function(a,b,c,d){var e=Bk.m.request.call(this,a,b,c,d);a=c||Hj;var f=this;Ak(this.h)&&Ck(this,b,a)?(b=this.h.g,this.g++,ak(e,b,this.Ka()+"R"+this.g),d&&this.n.push(d)):f.Nb(function(){var a=f.h.g;f.g++;ak(e,a,f.Ka()+"R"+f.g)},b,a,d);return e};
h.lc=function(a,b,c,d,e){d=d||Hj;var f=this,g;if(Ak(f.h)&&Ck(this,c,d)){var k=f.h.g;f.g++;g=f.Ka()+"R"+f.g;P(f.logger,g+" BEGIN");b(k,g,function(b,c){f.p=k;c?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.p=null});P(f.logger,g+" END");b=null}else f.Nb(function(){var c=f.h.g;f.g++;g=f.Ka()+"R"+f.g;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.p=c;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.p=null});P(f.logger,g+" END");b=null},c,d,e)};h.getName=function(){return this.J().getName()};
h.toString=function(){return"Serial:"+this.Ka()+(this.p?"*":"")};function Hk(a,b){Bk.call(this,a,b)}E(Hk,Bk);Hk.prototype.logger=R("ydn.db.tr.AtomicSerial");Hk.prototype.request=function(a,b,c){var d,e,f,g=Hk.m.request.call(this,a,b,c,function(a,b){g.g=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new pk;V(g,c,!0)}});dk(g,function(a,b,c){f=b;e=a;d=c});return g};
Hk.prototype.lc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});Hk.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new pk;a.A(d)}e&&(e(b,c),e=void 0)})};Hk.prototype.toString=function(){return"Atomic"+Hk.m.toString.call(this)};function Ik(a,b,c,d){this.j=a;this.h=b;this.g=c;this.Xa=d;this.i=null}h=Ik.prototype;h.logger=R("ydn.db.tr.DbOperator");h.abort=function(){this.g.abort()};function Y(a){a.i||(a.i=a.j.I());return a.i}h.J=function(){return this.j};h.nc=function(){this.g.nc()};
function Jk(a,b){var c=a.J(),d=b instanceof Kk?b:Lk(b),e=b.name,f=Z(c.h,e);if(0==Mk(d,f).length)sb(!1);else if(f=f?"update":"add",c.h instanceof Nk)Ok(c.h,d),c.i?(c.i.de(),c.i=null,Pk(c)):sb(!1);else throw new Gh("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}h.toString=function(){return"TxStorage:"+this.J().getName()};function Qk(a,b,c,d){Ik.call(this,a,b,c,d)}E(Qk,Ik);h=Qk.prototype;h.logger=R("ydn.db.crud.DbOperator");
h.count=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(t(c)||t(b))throw new M("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!Rk(this.h,f[l]))throw new M('store name "'+f[l]+'" at '+l+" not found.");P(this.logger,"countStores: "+S(f));e=this.g.request("count",f);W(e,function(){Y(this).td(e,f)},this)}else if(x(a)){l=Z(this.h,a);if(!l)throw new M('store name "'+a+'" not found.');if(t(d)&&!fa(d))throw new M('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,A(c)){var m=oj(c);if(m)throw new M("invalid key range: "+xh(c)+" "+m);k=kj(c)}else{if(null!=c)throw new M("invalid key range: "+xh(c)+" of type "+typeof c);k=null}else if(A(b)||null==b)if(A(b)){if(m=oj(b))throw new M("invalid key range: "+xh(b)+" "+m);k=kj(b)}else{if(null!=b)throw new M("key range must be  an object but found "+xh(b)+" of type "+typeof b);k=null}else throw new M('invalid second argument for count "'+xh(c)+'" of type '+typeof b);P(this.logger,"countKeyRange: "+a+" "+(g?g:"")+S(k));
e=this.g.request("count",f);Sk(l,e,arguments);W(e,function(){Y(this).Hc(e,f[0],k,g,!!d)},this)}else throw new M("Invalid store name or store names.");else N(this.logger,"count method requires store name(s)"),l=Tk(this.h),e=this.g.request("count",l),dk(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),W(e,function(){Y(this).td(e,f)},this);return e};
h.get=function(a,b){var c=this,d;if(a instanceof qk){var e=a,f=e.G(),g=Z(this.h,f);if(!g){if(this.h.g()){if(Fk(this.J()))return ek("get",void 0);d=new Zj("get");this.J().jb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M("Store: "+f+" not found.");}var k=e.D();P(this.logger,"getByKey: "+f+":"+k);d=this.g.request("get:key",[f]);Sk(g,d,arguments,void 0,this);W(d,function(){Y(this).xd(d,f,k)},this)}else if(x(a)&&t(b)){var l=a,g=Z(this.h,l);if(!g){if(this.h.g()){if(Fk(this.J()))return ek("get",
void 0);d=new Zj("get");this.J().jb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M('Store name "'+l+'" not found.');}var m=b;P(this.logger,"getById: "+l+":"+m);d=this.g.request("get",[l]);Sk(g,d,arguments,void 0,this);W(d,function(){Y(this).xd(d,l,m)},this)}else throw new M("get require valid input arguments.");return d};
h.keys=function(a,b,c,d,e,f,g){var k,l,m=null,n=!1,p=!1,q=a,s=Z(this.h,q);if(!x(q))throw new M("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.h.g()){if(!s)throw new M('store name "'+q+'" not found.');if(x(b)&&!Nj(s,b))throw new M('index "'+b+'" not found in store "'+q+'".');}if(this.h.g()&&!s)return ek("keys",[]);var v;if(x(b)){var z=b,D=oj(c);if(D)throw new M("invalid key range: "+c+" "+D);m=kj(c);if(y(d))k=d;else{if(t(d))throw new M("limit must be a number");k=100}if(y(e))l=
e;else{if(t(e))throw new M("offset must be a number");l=0}if(t(f))if(fa(f))n=f;else throw new M("reverse must be a boolean");if(t(g))if(fa(g))p=g;else throw new M("unique must be a boolean");P(this.logger,"keysByIndexKeyRange: "+q);v=this.g.request("keys:iter:index",[q]);Sk(s,v,arguments);W(v,function(){Y(this).list(v,2,q,z,m,k,l,n,p)},this)}else{if(A(b)){if(D=oj(b))throw new M("invalid key range: "+xh(b)+" "+D);m=kj(b)}else{if(null!=b)throw new M("invalid key range: "+xh(b)+" of type "+typeof b);
m=null}if(y(c))k=c;else{if(t(c))throw new M("limit must be a number");k=100}if(y(d))l=d;else{if(t(d))throw new M("offset must be a number");l=0}if(t(e))if(fa(e))n=e;else throw new M("reverse must be a boolean");P(this.logger,"keysByKeyRange: "+q);v=this.g.request("keys",[q]);Sk(s,v,arguments);W(v,function(){Y(this).list(v,2,q,null,m,k,l,n,!1)},this)}return v};
h.values=function(a,b,c,d,e,f,g){var k=this,l,m,n,p=!1,q=!1;if(x(a)){var s=a,v=Z(this.h,s);if(!v){if(this.h.g()){if(Fk(this.J()))return ek("values",[]);l=new Zj("values");this.J().jb(function(){k.values(a,b,c,d,e,f).u(function(a){l.w(a)},function(a){l.A(a)})});return l}throw new lk(s);}if(u(b)){if(t(c)||t(d))throw new M("too many input arguments");var z=b;P(this.logger,"listByIds: "+s+" "+z.length+" ids");l=this.g.request("values:array",[s]);Sk(v,l,arguments,void 0,this);W(l,function(){Y(this).gf(l,
s,z)},this)}else if(x(b)){var D=b;if(!Uk(v,D))throw new M('index "'+D+'" not found in store "'+s+'"');var G=oj(c);if(G)throw new M("invalid key range: "+c+" "+G);var J=kj(c);if(t(d))if(y(d))m=d;else throw new M("limit must be a number.");else m=100;if(t(e))if(y(e))n=e;else throw new M("offset must be a number.");else n=0;if(fa(f))p=f;else if(t(f))throw new M("reverse must be a boolean, but "+f);if(t(g))if(fa(g))q=g;else throw new M("unique must be a boolean");P(this.logger,"listByIndexKeyRange: "+
s+":"+D);l=this.g.request("values:iter:index",[s]);Sk(v,l,arguments);W(l,function(){Y(this).list(l,4,s,D,J,m,n,p,q)},this)}else{J=null;if(A(b)){if(G=oj(b))throw new M("invalid key range: "+b+" "+G);J=kj(b)}else if(null!=b)throw new M('expect key range object, but found "'+xh(b)+'" of type '+typeof b);if(t(c))if(y(c))m=c;else throw new M("limit must be a number, but "+c+" is "+typeof c);else m=100;if(t(d))if(y(d))n=d;else throw new M("offset must be a number, but "+d+" is "+typeof d);else n=0;if(t(e))if(fa(e))p=
e;else throw new M("reverse must be a boolean, but "+e+" is "+typeof e);P(this.logger,(J?"listByKeyRange: ":"listByStore: ")+s);l=this.g.request("values",[s]);Sk(v,l,arguments);W(l,function(){Y(this).list(l,4,s,null,J,m,n,p,!1)},this)}}else if(u(a))if(a[0]instanceof qk){for(var v=[],O=a,G=0;G<O.length;G++){var ha=O[G].G();if(!Rk(this.h,ha)){if(this.h.g())return v=[],v[O.length-1]=void 0,ek("get",v);throw new M("Store: "+ha+" not found.");}Va(v,ha)||v.push(ha)}P(this.logger,"listByKeys: "+S(v)+" "+
O.length+" keys");l=this.g.request("values:keys",v);W(l,function(){Y(this).Md(l,O)},this)}else throw new M("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new M("first argument "+a+" is invalid.");return l};
h.list=function(a,b,c,d,e,f,g,k,l){var m=Z(this.h,b);if(!m){if(this.h.g())return ek("get",[]);throw new lk(b);}var n;if(c&&!Uk(m,c))throw new M('index "'+c+'" not found in store "'+b+'"');if(m=oj(d))throw new M("invalid key range: "+d+" "+m);var p=kj(d),q=100;if(y(e))q=e;else if(null!=e)throw new M('limit must be a number but "'+e+'" of type '+typeof e+" found.");var s=0;if(y(f))s=f;else if(null!=f)throw new M('offset must be a number but "'+f+'" of type '+typeof f+" found.");var v=!1;if(fa(g))v=
g;else if(null!=g)throw new M('reverse must be a boolean but "'+g+'" of type '+typeof g+" found.");var z=!1;if(fa(k))z=k;else if(null!=k)throw new M('unique must be a boolean but "'+k+'" of type '+typeof k+" found.");if(s&&l&&t(l[0]))throw new M("offset must not given when initial cursor position is defined");P(this.logger,a+": "+b+":"+c);n=this.g.request("values:iter:index",[b]);W(n,function(){Y(this).list(n,a,b,c||null,p,q,s,v,z,l)},this);return n};
h.add=function(a,b,c){var d=x(a)?a:A(a)?a.name:void 0;if(!x(d))throw new M("store name "+d+" must be a string, but "+typeof d);var e=Z(this.h,d);if(!e){if(!this.h.g())throw new M('store name "'+d+'" not found.');e=Lk(A(a)?a:{name:d});P(this.logger,"Adding object store: "+d);Jk(this,e)}else if(this.h.g()&&A(a)&&(a=Lk(a),a=Mk(e,a)))throw new Oc(a);var f;if(!e)throw new M('store name "'+d+'" not found.');if(x(e.keyPath)&&t(c))throw new M("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){P(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Vk(e,b[a]);f=this.g.request("add:array",[d],Ij);W(f,function(){Y(this).ib(f,!1,!1,d,b,c)},this);e.Wb&&f.B(function(a){a=new Wk(Xk,this.J(),e.getName(),a,b);this.J().Ra(a)},this)}else if(A(b))a="store: "+d+" key: "+Yk(e,b,c),P(this.logger,"addObject: "+a),Vk(e,b),f=this.g.request("add",[d],Ij),W(f,function(){Y(this).ib(f,!1,!0,d,[b],[c])},
this),e.Wb&&f.B(function(a){a=new Zk(Xk,this.J(),e.getName(),a,b);this.J().Ra(a)},this);else throw new M("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function $k(a,b){var c=x(b)?b:A(b)?b.name:void 0;if(!x(c))throw new M("store name must be a string");var d=Z(a.h,c);if(!d){if(!a.h.g())throw new lk(c);d=Lk(A(b)?b:{name:c});P(a.logger,"Adding object store: "+c);Jk(a,d)}else if(a.h.g()&&A(b)){var e=Lk(b);if(e=Mk(d,e))throw new Oc(e);}if(!d)throw new lk(c);return d}h.load=function(a,b,c){var d=c||",",e=$k(this,a).getName();a=this.g.request("load",[e]);var f=this;this.g.lc(a,function(a,c,l){Y(f).nf(a,c,l,e,b,d)},[e],Ij);return a};
h.search=function(a){var b=al(a);Q(this.logger,"query "+a);var c=this.g.request("search",b,Hj);W(c,function(){var b=Y(this);bl(a,function(e,f,g,k){var l=bk(c);b.list(l,4,e,f,kj(g),100,0,!1,!1);l.da(function(b){var d=null;b instanceof Array||(d=b,b=[]);for(var e=0;e<b.length;e++){var f;f=b[e];var g=f.id,g=x(g)?zj(g):g,k=g[3];(f=1==this.type&&k!=this.value?null:new cl(this,g[0],g[2],g[1],k,f.k,f.loc))&&a.j.push(f)}a.i--;b=0==a.i?!1:a.h[a.h.length-1].l===this.l?!0:null;!0===b?Tc(c,a):!1===b&&c.w(dl(a));
if(d)throw d;},k)})},this);return c};
h.put=function(a,b,c){var d,e=this;if(a instanceof qk){var f=a,g=f.G(),k=Z(this.h,g);if(!k)throw new M('store "'+g+'" not found.');if(k.keyPath){var l=Yk(k,b);if(null!=l){if(0!=rj(l,f.D()))throw new M("Inline key must be "+f+" but "+l+" found.");}else el(k,b,f.D());return this.put(g,b)}return this.put(g,b,f.D())}if(u(a)){if(t(c))throw new M("too many arguments");var m=a;if(!t(b))throw new M("record values required");for(var n=b,f=[],g=0,k=m.length;g<k;g++){l=m[g].G();-1==Na(f,l)&&f.push(l);var p=
Z(this.h,l);if(!p)throw new M('store "'+l+'" not found.');p.keyPath&&el(p,n[g],m[g].D())}P(this.logger,"putByKeys: to "+S(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)Vk(p,n[g]);d=this.g.request("put:keys",f,Ij);Sk(p,d,arguments);W(d,function(){Y(e).Sd(d,n,m)},this)}else if(x(a)||A(a)){var p=$k(this,a),q=p.getName();if(p.keyPath&&t(c))throw new M("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){var s=
b,v=c;P(this.logger,"putObjects: "+q+" "+s.length+" objects");for(g=0;g<s.length;g++)Vk(p,s[g]);d=this.g.request("put:array",[q],Ij);Sk(p,d,arguments);W(d,function(){Y(this).ib(d,!0,!1,q,s,v)},this);p.Wb&&d.B(function(a){a=new Wk(fl,this.J(),q,a,s);this.J().Ra(a)},this)}else if(A(b)){var z=b,D=c;P(this.logger,"putObject: "+q+" "+D);if(t(r.Blob)&&z instanceof Blob&&p.kc&&!p.keyPath&&0==p.indexes.length&&Jb)d=new Zj("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.g.request("put",
[q],Ij);Sk(p,c,[q,z,D]);W(c,function(){Y(e).ib(c,!0,!0,q,[b],[D])},this);c.u(function(a){d.w(a)},function(a){d.A(a)})},f.onerror=function(a){d.A(a)},f.onabort=function(a){d.A(a)},f.readAsDataURL(z);else{Vk(p,z);d=this.g.request("put",[q],Ij);var G=[q,z,D];Sk(p,d,G);W(d,function(){var a=t(D)?[G[2]]:void 0;Y(e).ib(d,!0,!0,q,[G[1]],a)},this)}p.Wb&&d.B(function(a){a=new Zk(fl,this.J(),q,a,z);this.J().Ra(a)},this)}else throw new M("put record value must be Object or array of Objects");}else throw new M("the first argument of put must be store name, store schema or array of keys.");
return d};
function gl(a,b,c,d){var e=a.Xa,f,g;if(x(b)){var k=Z(a.h,b);if(k){if(!k.keyPath&&!k.h&&null==d)throw new M('key required for store "'+b+'"');}else throw new lk(b);for(var l=0;l<c.length;l++)Vk(k,c[l]);f=[b]}else{g=b;f=[];for(var l=0,m=g.length;l<m;l++){var n=g[l].G(),k=Z(a.h,n);-1==Na(f,n)&&f.push(n);if(!k)throw new lk(n);Vk(k,c[l])}}var p;x(b)?(k=Z(a.h,b),p=e.request("put:array",f,Ij),W(p,function(){Y(this).ib(p,!0,!1,b,c,d)},a)):(p=e.request("put:keys",f,Ij),W(p,function(){Y(this).Sd(p,c,g)},a));
return p}function hl(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].G();-1==Na(c,f)&&c.push(f);if(!Rk(a.h,f))throw new lk(f);}var g=a.Xa.request("rm:keys",c,Ij);W(g,function(){Y(this).Vd(g,b)},a);return g}function il(a,b,c){var d=a.Xa.request("rm:iter",[b],Ij);W(d,function(){Y(this).Zc(d,b,c||null)},a);return d}
function jl(a,b,c,d,e,f,g){f=f||100;var k,l=g||0;if(g=Z(a.h,b)){if(c&&!Uk(g,c))throw new lk('index "'+c+'" in store "'+b+'"');}else throw new lk(b);var m=kj(d);x(c)?(k=a.Xa.request("values:iter:index",[b]),W(k,function(){Y(this).list(k,4,b,c,m,f,l,e,!1)},a)):(k=a.Xa.request("values",[b]),W(k,function(){Y(this).list(k,4,b,null,m,f,l,e,!1)},a));return k}
function kl(a,b){var c=[],d=b.length;if(0==d)return ek("keys",[]);for(var e=0;e<d;e++){var f=b[e].G();-1==Na(c,f)&&c.push(f);if(!Rk(a.h,f))throw new lk(f);}var g=a.Xa.request("keys",c);W(g,function(){Y(a).Md(g,b)},a);return g}
function ll(a,b,c,d,e,f,g,k){var l;e=e||100;var m=Z(a.h,b);if(m){if(c&&!Uk(m,c))throw new lk('index "'+c+'" in store "'+b+'"');}else throw new lk(b);x(c)?(l=a.Xa.request("keys:iter:index",[b]),W(l,function(){Y(this).list(l,2,b,c,d,e,f,g,k)},a)):(l=a.Xa.request("keys",[b]),W(l,function(){Y(this).list(l,2,b,null,d,e,f,g,k)},a));return l}
h.clear=function(a,b,c){if(t(c))throw new M("too many input arguments");var d;if(x(a)){c=Z(this.h,a);if(!c)throw new M('store name "'+a+'" not found.');if(A(b)){var e=kj(b);if(null===e)throw new M("clear method requires a valid non-null KeyRange object.");P(this.logger,"clearByKeyRange: "+a+":"+S(e));d=this.g.request("clear",[a],Ij);Sk(c,d,[a,e]);W(d,function(){Y(this).se(d,a,e)},this)}else{if(t(b))throw new M("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);P(this.logger,"clearByStore: "+a);d=this.g.request("clear",[a],Ij);W(d,function(){Y(this).qd(d,[a])},this)}}else if(!t(a)||u(a)&&x(a[0])){var f=a||Tk(this.h);P(this.logger,"clearByStores: "+S(f));d=this.g.request("clear",f,Ij);W(d,function(){Y(this).qd(d,f)},this)}else throw new M('first argument "'+a+'" is invalid.');return d};
h.remove=function(a,b,c){var d;if(x(a)){var e=Z(this.h,a);if(!e)throw new M('store name "'+a+'" not found.');if(t(c))if(x(b)){var f=Nj(e,b);if(!f)throw new M("index: "+b+" not found in "+a);if(A(c)||null===c){var g=kj(c);P(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.g.request("rm:iter:index",[a],Ij);W(d,function(){Y(this).of(d,a,f.getName(),g)},this)}else throw new M("key range "+c+' is invalid type "'+typeof c+'".');}else throw new M('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){P(this.logger,"removeById: "+a+":"+b);d=this.g.request("rm",[a],Ij);var k=[a,b];Sk(e,d,k);W(d,function(){Y(this).Ud(d,a,k[1])},this);e.Wb&&d.B(function(b){b=new Zk(ml,this.J(),a,b,void 0);this.J().Ra(b)},this)}else if(A(b))g=kj(b),P(this.logger,"removeByKeyRange: "+a+":"+S(g)),d=this.g.request("rm:iter",[a],Ij),Sk(e,d,[a,g]),W(d,function(){Y(this).Zc(d,a,g)},this),e.Wb&&d.B(function(b){b=new Wk(ml,this.J(),a,b,void 0);this.J().Ra(b)},
this);else throw new M('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof qk){var l=a.G(),e=Z(this.h,l);d=this.g.request("rm",[l],Ij);var m=[l,a.D()];Sk(e,d,m);W(d,function(){Y(this).Ud(d,l,m[1])},this)}else if(u(a)){b=[];c=0;for(e=a.length;c<e;c++){if(!(a[c]instanceof qk))throw new M("key list element at "+c+" of "+e+' must be yn.db.Key, but "'+xh(a[c])+'" ('+ea(a[c])+") is not ydn.db.Key.");var n=a[c].G();-1==Na(b,n)&&b.push(n)}if(1>b.length)throw new M('at least one valid key required in key list "'+
xh(a)+'"');d=this.g.request("rm:keys",b,Ij);W(d,function(){Y(this).Vd(d,a)},this)}else throw new M('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+xh(a)+'" ('+ea(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.J().getName()};function nl(a,b,c,d){Ik.call(this,a,b,c,d)}E(nl,Qk);h=nl.prototype;h.logger=R("ydn.db.core.DbOperator");h.get=function(a,b){if(a instanceof Sj){var c=a.G(),d=Z(this.h,c);if(!d)throw new M('store "'+c+'" not found.');var e=a.h;if(t(e)&&!Uk(d,e))throw new M('index "'+e+'" not found in store "'+c+'".');P(this.logger,"getByIterator:"+a);var f=this.g.request("get:iter",[c]);W(f,function(){ol(this,5,f,a,1)},this);return f}return nl.m.get.call(this,a,b)};
h.keys=function(a,b,c,d,e,f,g){if(a instanceof Sj){var k=100;if(y(b)){if(k=b,1>k)throw new M("limit must be a positive value, but "+b);}else if(t(b))throw new M("limit must be a number,  but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"keysByIterator:"+a);var l=this.g.request("keys:iter",[a.G()]);W(l,function(){a.p?ol(this,1,l,a,k):ol(this,2,l,a,k)},this);return l}return nl.m.keys.call(this,a,b,c,d,e,f,g)};
h.count=function(a,b,c,d){if(a instanceof Sj){if(t(b)||t(c))throw new M("too many arguments.");P(this.logger,"countIterator:"+a);var e=this.g.request("count",[a.G()]);W(e,function(){ol(this,6,e,a)},this);return e}return nl.m.count.call(this,a,b,c,d)};
h.values=function(a,b,c,d,e,f){if(a instanceof Sj){var g;if(y(b)){if(g=b,1>g)throw new M("limit must be a positive value, but "+g);}else if(t(b))throw new M("limit must be a number, but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"listByIterator:"+a);var k=this.g.request("values:iter",[a.G()]);W(k,function(){a.g?ol(this,2,k,a,g):ol(this,4,k,a,g)},this);return k}return nl.m.values.call(this,a,b,c,d,e,f)};
h.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new M('Store "'+e+'" not found.');e=this.g.request("map",d);Q(this.logger,"map:"+a);this.g.lc(e,function(d,e,f){Q(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=Y(c).h(d,e,m[p]);var q=a.load(n);q.V=function(a){f(a,!1)};q.P=function(c){if(null!=c){var d;a.p?a.g?d=c:d=q.ga():a.g?d=c:d=q.T();b(d);q.advance(1)}else f(void 0),b=null}},d,Hj);return e};
function ol(a,b,c,d,e){var f=[],g=c.g,k=X(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);P(a.logger,l);for(var m=Y(a),n=[],p=d.stores(),q=0;q<p.length;q++)n[q]=m.h(g,k,p[q]);var s=d.load(n);s.V=function(a){Qj(s);V(c,a,!0)};var v=0,z=!1;s.P=function(d){z||(Q(a.logger,l+" starting"),z=!0);null!=d?(s.ga(),v++,1==b?f.push(d):2==b?f.push(s.ga()):3==b?f.push([d,s.ga()]):6!=b&&f.push(s.T()),5==b?(Qj(s),V(c,f[0])):6==b||!t(e)||v<e?s.rd():(P(a.logger,"success:"+l+" yields "+f.length+" records"),Qj(s),
V(c,f))):(P(a.logger,"success:"+l+" yields "+f.length+" records"),Qj(s),V(c,5==b?f[0]:6==b?v:f))}};var Xk="created",ml="deleted",fl="updated";function pl(a,b){K.call(this,a,b)}E(pl,K);pl.prototype.G=function(){return this.O};function ql(a,b,c){K.call(this,a,b);this.version=c}E(ql,pl);ql.prototype.name="ReadyEvent";ql.prototype.version=NaN;function rl(a,b,c){K.call(this,c||"error",a);this.error=b}E(rl,pl);rl.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};rl.prototype.name="ErrorEvent";rl.prototype.error=null;function sl(a,b){rl.call(this,a,b,"fail")}E(sl,rl);
sl.prototype.name="FailEvent";function Zk(a,b,c,d,e){K.call(this,a,b);this.O=c;this.key=d;this.value=e}E(Zk,pl);Zk.prototype.name="RecordEvent";Zk.prototype.T=function(){return this.value};function Wk(a,b,c,d,e){K.call(this,a,b);this.O=c;this.keys=d;this.values=e}E(Wk,pl);Wk.prototype.name="StoreEvent";Wk.prototype.La=function(){return this.keys};Wk.prototype.ya=function(){return this.values};function tl(a,b,c,d,e,f){t(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new M("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.n=w(this.keyPath);this.h=e;this.type=ul(b);if(t(b)){if(!t(this.type))throw new M("type invalid in index: "+this.h);if(u(this.keyPath))throw new M('composite key for store "'+this.h+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.p=x(this.type)?
this.type:vl;this.j=x(e)?e:u(a)?this.keyPath.join(","):a;this.i=Ia(this.j);this.g=this.n?null:this.keyPath.split(".");this.l=f||null}function wl(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=tj(b,a.keyPath[d]);c[d]=f}return c}return tj(b,a.keyPath)}}function xl(a,b,c){for(var d=0;d<a.g.length;d++)d==a.g.length-1?b[a.g[d]]=c:A(b[a.g[d]])||(b[a.g[d]]={})}var vl="TEXT";function sj(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:wj(a)}
function yl(a,b){return"DATE"==b?new Date(a):t(b)?a:zj(a)}var zl=["BLOB","DATE","INTEGER","NUMERIC",vl];function ul(a){if(x(a))return a=Na(zl,a),zl[a]}h=tl.prototype;h.getName=function(){return this.h};h.toJSON=function(){return{name:this.h,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};h.ea=function(){var a=u(this.keyPath)?$a(this.keyPath):this.keyPath;return new tl(a,this.type,this.unique,this.multiEntry,this.h,this.l)};
function Al(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?eb(a,b)?null:"expect: "+a+", but: "+b:Bl(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?$a(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new tl(b,c,this.unique,this.multiEntry,a.h)};function Cl(a,b){a.l=b}
h.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.g&&1<this.g.length&&(a+="Compound");return a+"Index:"+this.h};function Kk(a,b,c,d,e,f,g,k){this.i=a;if(!x(this.i))throw new M("store name must be a string");this.keyPath=t(b)?b:null;this.s=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.s)throw new M("keyPath must be a string or array");this.h=c;var l;if(null!=d){l=ul(d);if(!t(l))throw new M('type "'+d+'" for primary key in store "'+this.i+'" is invalid.');if(this.s)throw new M('composite key for store "'+this.i+'" must not specified type');}this.type=null!=l?l:this.h?"INTEGER":void 0;this.n=
x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.Wb=!!f;this.kc=!!g;this.F=x(this.type)?this.type:vl;this.l=u(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.j=Ia(this.l);if(this.I=!!k){if(this.keyPath)throw new M('encrypted store "'+this.i+'" must not use inline key');if(this.h)throw new M('encrypted store "'+this.i+'" must not use key generator');}this.p=[]}h=Kk.prototype;h.Wb=!1;h.kc=!1;
h.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.i,keyPath:this.keyPath,autoIncrement:this.h,type:this.type,indexes:a}};
function Lk(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Na(b,c))throw new M('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Na(f,g))throw new M("Unknown field: "+g+" in "+S(e));e=new tl(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Kk(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Dl(a,b,c,d,e,f,g){a=El(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Ic;a.va&&(b+=" WHERE "+a.va);a.group&&(b+=" GROUP BY "+a.group);a.gc&&(b+=" ORDER BY "+a.gc);return b}
function El(a,b,c,d,e,f,g){var k={select:"",Ic:"",va:"",group:"",gc:""},l=a.l,m=a.j,n=null;d!==l&&x(d)&&(n=Nj(a,d));var p=!!n,q=d||l,s=Ia(q),v=p?n.type:a.type,z=p&&n.multiEntry;k.Ic=Fl(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=g?"DISTINCT ":"";l=[];z?(z=Ia("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+z+"."+s+")":3===c||1===c||2===c?"DISTINCT "+Fl(a)+"."+m+", "+z+"."+s+" AS "+q:"DISTINCT "+Fl(a)+".*, "+
z+"."+s+" AS "+q,k.Ic=z+" INNER JOIN "+Fl(a)+" USING ("+m+")",null!=e&&(qj(z+"."+s,v,e,l,b),0<l.length&&(k.va=k.va?k.va+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(qj(s,v,e,l,b),0<l.length&&(k.va=k.va?k.va+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&g&&(k.group=s);a=f?"DESC":"ASC";k.gc=s+" "+a;p&&(k.gc+=", "+m+" "+a);return k}
function Gl(a,b,c,d,e,f,g,k,l){var m,n,p,q;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=n?(e=rj(k,n),-1==e?(n=k,q=l):0==e&&(q=l||q)):(n=k,q=l):null!=m?(e=rj(k,m),1==e?(m=k,p=l):0==e&&(p=l||p)):(m=k,p=l)):f?(n=k,q=l):(m=k,p=l);e=new U(m,n,!!p,!!q);d=d?Nj(a,d):null;b=El(a,c,b,d?d.j:a.l,e,f,g);b="SELECT "+b.select+" FROM "+b.Ic+(b.va?" WHERE "+b.va:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.gc;d&&(b+=", "+a.j+(f?"DESC":"ASC"));return b}
function Hl(a,b,c,d,e,f,g,k,l,m){var n=Nj(a,d),p=n.j;d=n.i;var q=a.j,s=l?" <":" >",s=g?s+" ":s+"= ";g=sj(f,n.type);k=sj(k,a.type);n="";e?(a=El(a,c,b,p,e,l,m),a.va+=" AND ",n=d+s+"?",c.push(g)):(e=l?U.upperBound(f,!0):U.lowerBound(f,!0),a=El(a,c,b,p,e,l,m),n=a.va,a.va="");a.va+="("+n+" OR ("+d+" = ? AND "+q+s+"?))";c.push(g);c.push(k);return"SELECT "+a.select+" FROM "+a.Ic+" WHERE "+a.va+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.gc}h.ea=function(){return Lk(this.toJSON())};
h.index=function(a){return this.indexes[a]||null};function Nj(a,b){return Ta(a.indexes,function(a){return a.getName()==b})}function Mj(a,b){for(var c=0;c<a.indexes.length;c++)if(!Al(a.indexes[c].keyPath,b))return a.indexes[c];return null}function Uk(a,b){return b===a.keyPath?!0:Ra(a.indexes,function(a){return a.getName()==b})}function Fl(a){return Ia(a.i)}
function Il(a,b){if(!b)return a;var c=a.h,d=u(a.keyPath)?$a(a.keyPath):a.keyPath,e=a.type,f=Qa(a.indexes,function(a){return a.ea()});t(b.type)||"TEXT"!=e||(e=void 0);u(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=$a(b.keyPath));for(var g=0,k=b.indexes.length;g<k;g++)if(b.indexes[g].n)for(var l=b.indexes[g].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.indexes[g].ea();break}for(g=0;g<f.length;g++)(k=Nj(b,f[g].getName()))&&(f[g]=f[g].hint(k));return new Kk(b.i,d,c,e,f)}
h.getName=function(){return this.i};function Jl(a){return!!a.keyPath}function Yk(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.s){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(tj(b,a.keyPath[d]));return c}if(a.keyPath)return lc(b,a.n)}}function el(a,b,c){for(var d=0;d<a.n.length;d++){var e=a.n[d];if(d==a.n.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Kl(a,b,c){var d=[],e=[];c=t(c)?c:Yk(a,b);t(c)&&(e.push(a.j),d.push(sj(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var k=wl(g,b);null!=k&&(d.push(sj(k,g.type)),e.push(g.i))}}a.kc?a.kc&&!a.keyPath&&0==a.indexes.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(S(b)),e.push("_default_")):(d.push(S(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Qf:e,mg:a,values:d,key:c}}
function Mk(a,b){if(!b)return"missing store: "+a.i;if(a.i!=b.i)return"store name, expect: "+a.i+", but: "+b.i;var c=Al(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.h)&&t(b.h)&&a.h!=b.h)return"autoIncrement, expect:  "+a.h+", but: "+b.h;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(w(a.type)?!eb(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=
Nj(b,a.indexes[c].getName()),e;e=a.indexes[c];if(d)if(e.h!=d.h)e="name, expect: "+e.h+", but: "+d.h;else{var f=Al(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(w(e.type)?!eb(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e=
"no index for "+e.h;if(0<e.length)return'index "'+a.indexes[c].getName()+'" '+e}return""}function Vk(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.l){var f=d.l(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.g.length-1;g++)A(e[d.g[g]])||(e[d.g[g]]={});e[d.g[d.g.length-1]]=f}}}}function Ll(a,b){a.p.push(b)}function Sk(a,b,c,d,e){for(var f=0;f<a.p.length;f++)d!==f&&a.p[f].call(e,b,c)}
h.toString=function(){return"Store:"+this.i+"["+this.indexes.length+"index]"};function Nl(a,b,c){if(!a||ta(a))throw new M("store_name must be provided for primary full text index");if(!b||ta(b))throw new M("index_name must be provided for primary full text index");this.O=a;this.g=b;this.h=c||1}Nl.prototype.G=function(){return this.O};function Ol(a,b,c,d){this.name=a;this.indexes=b;this.lang=c||"";if(-1==["","en","fr"].indexOf(this.lang))throw new M('Unsupported lang "'+c+" for full text search index "+a);this.h=d||null;this.g=null}Ol.prototype.getName=function(){return this.name};Ol.prototype.count=function(){return this.indexes.length};Ol.prototype.index=function(a){return this.indexes[a]};function Pl(a,b,c){return Ta(a.indexes,function(a){return a.G()==b&&a.g==c})}
function Ql(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Na(b,c))throw new M("Unknown field: "+c+" in "+S(a));if(!u(a.sources))throw new M("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Na(b,c))throw new M("Unknown field: "+c+" in "+xh(a));return new Nl(a.storeName,a.keyPath,a.weight)});return new Ol(a.name,
b,a.lang)};function Rl(a,b){var c,d,e=b;if(A(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Na(c,f))throw new M("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new M("stores must be array");for(f=0;f<g.length;f++){var k=Lk(g[f]);if(-1!=Ua(e,function(a){return a.name==k.getName()}))throw new M('duplicate store name "'+k.getName()+'".');e.push(k)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(t(c)){if(!y(c)||0>c)throw new M("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!u(b)||0<b.length&&!(b[0]instanceof Kk)))throw new M("stores");this.version=c;this.h=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Ql(d.fullTextCatalogs[f]),c[f]=e,Z(this,e.getName())||(g=[new tl("k",vl),new tl("v",vl)],e=new Kk(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.i=c}
Rl.prototype.toJSON=function(){var a=Qa(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};Rl.prototype.h=!1;Rl.prototype.g=function(){return!1};function Tk(a){return Qa(a.stores,function(a){return a.getName()})}Rl.prototype.count=function(){return this.stores.length};function Z(a,b){return Ta(a.stores,function(a){return a.getName()==b})}function Rk(a,b){return Ra(a.stores,function(a){return a.getName()==b})}
function Sl(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=Z(b,a.stores[e].getName());if(f){c&&(f=Il(f,a.stores[e]));if(d)for(var g=f,k=a.stores[e],l=0;l<k.indexes.length;l++){var m=k.indexes[l];Uk(g,m.getName())||"BLOB"!=m.type||(m=new tl(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),g.indexes.push(m))}f=Mk(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""}function Tl(a,b){return Ta(a.i,function(a){return a.getName()==b})};function Nk(a,b){Rl.call(this,a,b)}E(Nk,Rl);Nk.prototype.g=function(){return!0};function Ok(a,b){a.stores.push(b)};function Ul(a){return wh(S(a))}function Bl(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Ta(b,function(b){return Bl(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&Bl(a[0],b);if(w(b))return 1==b.length&&Bl(b[0],a);if(A(a)&&A(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Bl(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Bl(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function Vl(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Wl(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Na(d,e))throw new M('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new M("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!Va(Xl,c.mechanisms[e]))throw new M('Invalid mechanism "'+c.mechanisms[e]+'"');}this.L=c.mechanisms||Xl;this.F=c.size;this.P=
t(c.connectionTimeout)?c.connectionTimeout:3E4;this.i=null;this.j=[];this.Hd=!1;var f;if(b instanceof Rl)f=b;else if(A(b))for(c.autoSchema||!t(b.stores)?f=new Nk(b):f=new Rl(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=Z(f,b.stores[e].name),b.stores[e].Sync&&this.Kf(d,b.stores[e].Sync);else f=new Nk;this.h=f;for(e=0;e<this.h.count();e++)if((this.h.stores[e]||null).I)throw Error("encryption option must be defined");if(t(a)){if(this.i)throw new Qc("Already connected with "+this.s);this.s=a;Pk(this)}this.p=
null;this.n=new F}Wl.prototype.logger=R("ydn.db.con.Storage");function Yl(a,b,c){return(a=Z(a.h,b))?Uk(a,c):!1}function Zl(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.i?a.i.fb(c):Gk(a,function(b){a.i.fb(c,b)},null,Hj)}return a.h?a.h.toJSON():null}Wl.prototype.getName=function(){return this.s};var Xl="indexeddb websql localstorage sessionstorage userdata memory".split(" ");h=Wl.prototype;h.ve=function(){return null};
function Pk(a){function b(b,e){b?(Q(a.logger,a+": ready."),a.fg=NaN,d.ed=function(b){a.Ra(new rl(a,b))},d.ge=function(b){a.Ra(new sl(a,b));a.i=null},d.Qd=function(b){a.Ra(b)},setTimeout(function(){$l(a,e);am(a)},10),c.w(e)):(N(a.logger,a+": database connection fail "+e.name),setTimeout(function(){$l(a,new sl(a,e));if(a.j){a.logger.info("Purging "+a.j.length+" transactions request.");for(var b;b=a.j.shift();)b.Va&&b.Va("error",e)}},10),c.A(e))}for(var c=new F,d=null,e=a.L,f=0;f<e.length;f++){var g=
e[f].toLowerCase();if(d=a.ve(g)){d=a.ve(g);break}}null===d?(e=new Gh("No storage mechanism found."),b(!1,new sl(a,e))):(a.init(),d.connect(a.s,a.h).u(function(){this.i=d;b(!0,new ql("ready",this,parseFloat(d.ee())))},function(a){N(this.logger,this+": opening fail");b(!1,a)},a))}function xk(a){if(a.i)return a.i.Dc()}h.jb=function(a,b){this.n.da(a,b)};function $l(a,b){setTimeout(function(){b instanceof rl?a.n.A(b.error):a.n.w();a.Ra(b)},4)}function Fk(a){return!!a.i&&a.i.fe()}h.init=function(){};
function bm(a){a.i&&(a.i.de(),a.i=null,Q(a.logger,a+" closed"))}h.fg=NaN;function am(a){var b=a.j.shift();b&&(Q(a.logger,"pop tx queue["+(a.j.length+1)+"]"),Gk(a,b.wd,b.scopes,b.mode,b.Va));a.fg=C()}function cm(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({wd:b,scopes:c,mode:d,Va:e});100<a.j.length&&0==a.j.length%100&&N(a.logger,"Transaction queue stack size is "+a.j.length+". It is too large, possibility due to incorrect usage.")}h.Hd=!1;
function Gk(a,b,c,d,e){var f=c;if(x(c))f=[c];else if(null!=c)if(w(c)){if(0==c.length)throw new M("number of store names must more than 0");for(var g=0;g<c.length;g++)if(!x(c[g]))throw new M("store name at "+g+" must be string but found "+typeof c[g]);}else throw new M("store names must be an array");else f=null;if(a.i&&a.i.fe()&&!a.Hd){var k=t(d)?d:Hj;k==Jj&&(a.Hd=!0);a.i.vd(function(a){b(a);b=null},f,k,function(b,c){ga(e)&&(e(b,c),e=void 0);k==Jj&&(a.Hd=!1);am(a)})}else cm(a,b,f,d,e)}
h.Kf=function(a){N(this.logger,"Synchronization option for "+a.getName()+" ignored.")};h.Jf=function(a){N(this.logger,"Full text indexer option for "+a.getName()+" ignored.")};h.Ra=function(){};h.toString=function(){return"Storage:"+this.i};function dm(a,b,c,d){this.j=a;this.l=b;this.g=$a(c);this.h=d;this.i=[]}dm.prototype.j=null;dm.prototype.onCompleted=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c](a,b);this.i.length=0;this.i=this.g=this.j=null};function em(a,b,c){if(a.j)c&&a.i.push(c),b(a.j);else throw new Rc("tx committed on ParallelTxExecutor");}dm.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.l+" mode:"+this.h+" scopes:"+S(this.g)};function fm(a,b,c,d,e,f){uk.call(this,a,b,c,d,e,f);this.j=this.h=null}E(fm,uk);h=fm.prototype;h.logger=R("ydn.db.tr.Parallel");h.abort=function(){P(this.logger,this+": aborting");yk(this.j)};
h.ug=function(a,b){var c;if("multi"==this.l)a:if(c=this.h,!c.g||!c.h||b!=c.h&&(c.h!=Ij||b!=Hj)||a.length>c.g.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.l)a:if(c=this.h,c.g&&c.h&&b==c.h&&c.g.length==a.length){for(d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.l?!0:!1;return c};
h.Nb=function(a,b,c,d){function e(c){l.i++;m=new dm(c,l.i,b,k);g=l.Ka();bf(l.logger,g+" BEGIN "+S(b)+" "+k);l.h=m;em(l.h,a,d)}function f(a,b){bf(l.logger,g+" "+a);if(m)m.onCompleted(a,b);l.g=0}var g;this.$&&(b=this.$);this.V&&(c=this.V);var k=t(c)?c:Hj,l=this,m;if(this.h&&this.h.j&&this.ug(b,k))em(this.h,a,d);else{if(this.L&&this.i>=this.L)throw new Qc("Exceed maximum number of transactions of "+this.L);Gk(this.J(),e,b,k,f)}};
h.request=function(a,b,c,d){var e=fm.m.request.call(this,a,b,c,d),f=this;this.Nb(function(a){f.g++;ak(e,a,f.Ka()+"R"+f.g)},b,c||Hj,d);return e};h.lc=function(a,b,c,d,e){var f=this,g;this.Nb(function(c){f.g++;g=f.Ka()+"R"+f.g;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.j=c;g=f.Ka()+"R"+f.g;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.j=null});b=null;P(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.l+":"+this.Ka()+(this.j?"*":"")};function gm(a,b){fm.call(this,a,b,vk)}E(gm,fm);h=gm.prototype;h.logger=R("ydn.db.tr.AtomicParallel");h.ug=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=gm.m.request.call(this,a,b,c,function(a,b){k.g=null;P(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new pk;V(k,c,!0)}});dk(k,function(a,b,c){f=b;e=a;d=c});return k};
h.lc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});gm.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new pk;a.A(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+gm.m.toString.call(this)};function hm(a,b,c){Wl.call(this,a,b,c);this.l=0;a=!0;b=vk;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=im(this,b,a);this.Xa=im(this,"atomic",!1);this.g=this.Vc(c,this.Xa)}E(hm,Wl);hm.prototype.l=0;hm.prototype.Vc=function(a,b){return new Ik(this,this.h,a,b)};
function im(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==vk)return new Bk(a,a.l++,b,d,e,f);if("atomic"==b)return new Hk(a,a.l++);throw new M('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==vk)return new fm(a,a.l++,b,d,e,f);if("atomic"==b)return new gm(a,a.l++);throw new M('Invalid requestType "'+b+'"');}
hm.prototype.V=function(a,b,c){if(3<arguments.length)throw new M("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.l++;var d=b||Tk(this.h),e=Hj;if(c)if("readwrite"==c)e=Ij;else if("readonly"!=c)throw new M('Invalid transaction mode "'+c+'"');var f=im(this,"all",!1,d,e,1),g=this.Vc(f,this.Xa),k=new Zj("run"),l=this;f.Nb(function(b){Q(l.logger,"executing run in transaction on "+f);ak(k,b,f.Ka()+"R0");a(g)},d,e,function(a){k.g=null;V(k,f.i,
"complete"!==a)});return k};function jm(a,b,c){hm.call(this,a,b,c);a=this.h;for(b=0;b<a.i.length;b++){c=a.i[b];var d=Z(a,c.getName());if(d){if(!Uk(d,"k"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if(!Uk(d,"v"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new M('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new M('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Z(a,e.G());if(f)this.Jf(f,c);else throw new M('full text source store "'+e.G()+'" does not exist for full text index "'+c.getName()+'"');}}}E(jm,hm);h=jm.prototype;h.init=function(){jm.m.init.call(this)};h.Vc=function(a,b){return new Qk(this,this.h,a,b)};h.add=function(a,b,c){return this.g.add(a,b,c)};h.count=function(a,b,c,d){return this.g.count(a,b,c,d)};h.get=function(a,b){return this.g.get(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.g.keys(a,b,c,d,e,f,g)};
h.values=function(a,b,c,d,e,f){return this.g.values(a,b,c,d,e,f)};h.list=function(a,b,c,d,e,f,g,k,l){return this.g.list(a,b,c,d,e,f,g,k,l)};h.load=function(a,b,c){return this.g.load(a,b,c)};h.put=function(a,b,c){return this.g.put(a,b,c)};h.clear=function(a,b,c){return this.g.clear(a,b,c)};h.remove=function(a,b,c){return this.g.remove(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Fk(this)&&(a+=" ["+xk(this)+"]");return a};function km(a,b,c){jm.call(this,a,b,c)}E(km,jm);km.prototype.Vc=function(a,b){return new nl(this,this.h,a,b)};km.prototype.map=function(a,b){return this.g.map(a,b)};function lm(a,b,c,d){Lj.call(this,a,b,c,d);this.l=null}E(lm,Lj);h=lm.prototype;h.logger=R("ydn.db.core.req.IDBCursor");h.Sf=function(a){(a=a.target.result)?this.fc(a.key,a.primaryKey,a.value):this.fc()};
h.openCursor=function(a,b){function c(a,b,c){p.l=n;p.l.onsuccess=B(p.Sf,p);p.fc(a,p.j?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");Q(this.logger,d);var e=this.ba,d=this.n.objectStore(this.O),f=x(this.wb)?d.index(this.wb):null;if(t(a))var g=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=jj(this.reverse?new U(k,a,m,g):new U(a,l,g,e));var n;this.Tc?f?n=null!=this.Bb?f.openKeyCursor(e,this.Bb):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.Bb?d.openCursor(e,this.Bb):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.Bb?f.openCursor(e,this.Bb):null!=e?f.openCursor(e):f.openCursor():n=null!=this.Bb?d.openCursor(e,this.Bb):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();p.V(b);Oj(p);p.F=!0};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Kj.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);
else if(null!=b)if(Kj.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.l=n,p.l.onsuccess=B(p.Sf,p))};h.Gd=function(){return!!this.l};h.update=function(a){var b=this.l.result;if(b){var c=new F;a=b.update(a);a.onsuccess=function(a){c.w(a.target.result)};a.onerror=function(a){a.preventDefault();c.A(a)};return c}throw new kk("cursor gone");};
h.clear=function(){var a=this.l.result;if(a){var b=new F,a=a["delete"]();a.onsuccess=function(){b.w(1)};a.onerror=function(a){a.preventDefault();b.A(a)};return b}throw new kk("cursor gone");};h.advance=function(a){var b=this.l.result;if(1==a)b["continue"]();else b.advance(a)};h.rd=function(a){var b=this.l.result;if(null!=a)b["continue"](a);else b["continue"]()};h.H=function(){lm.m.H.call(this);this.l=null};h.toString=function(){return"IDB"+lm.m.toString.call(this)};function mm(a,b,c,d,e,f){F.call(this,e,f);this.j=a;this.g=[];this.p=!!b;this.V=!!c;this.P=!!d;for(b=this.F=0;b<a.length;b++)a[b].u(B(this.s,this,b,!0),B(this.s,this,b,!1));0!=a.length||this.p||this.w(this.g)}E(mm,F);mm.prototype.s=function(a,b,c){this.F++;this.g[a]=[b,c];this.pb||(this.p&&b?this.w([a,c]):this.V&&!b?this.A(c):this.F==this.j.length&&this.w(this.g));this.P&&!b&&(c=null);return c};mm.prototype.A=function(a){mm.m.A.call(this,a);for(a=0;a<this.j.length;a++)lb(this.j[a])};
function nm(a){return(new mm(a,!1,!0)).B(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function om(a,b){this.g=b}E(om,tk);h=om.prototype;h.logger=R("ydn.db.crud.req.IndexedDb");h.td=function(a,b){function c(e){var f=a.g.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?V(a,d):c(e)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}}var d=[];0==b.length?V(a,[]):c(0)};
h.ib=function(a,b,c,d,e,f){function g(s){if(null==e[s])if(Q(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)V(a,k,m);else{var z=s+10;z<e.length&&g(z)}var D,z=e[s];D=null!=f?b?q.put(z,f[s]):q.add(z,f[s]):b?q.put(z):q.add(z);D.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?V(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))};D.onerror=function(b){l++;var f=D.error;Q(n.logger,X(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+xh(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?V(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))}}var k=[],l=0,m=!1,n=this,p=b?"put":"add",q=a.g.objectStore(d);Q(this.logger,X(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)g(s);else V(a,[])};
h.Sd=function(a,b,c){function d(l){var n=c[l],p=n.G(),q=a.g.objectStore(p),s;s=null===q.keyPath?q.put(b[l],n.D()):q.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?V(a,e,g):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;N(k.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+xh(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;g=!0;c.preventDefault();f==b.length?V(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,k=this;Q(this.logger,
X(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else V(a,e,g)};
h.nf=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),J=0;J<p.length;J++){var O=b[J];q[J]&&(q[J]==vl?O=Fa(O,'"'):"INTEGER"==q[J]?O=parseInt(O,10):"NUMERIC"==q[J]&&(O=parseFloat(O)));a[p[J]]=O}var ha=l.put(a);ha.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};ha.onerror=function(a){"DataError"==a.name&&(a=new hk(k+": "+s.substring(0,70)));a.preventDefault();c(ha.error,!0)}}var k=Z(this.g,d),
l=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),q=[];for(a=0;a<p.length;a++){var s=Nj(k,p[a]);s?q[a]=s.type:p[a]==k.keyPath&&(q[a]=k.type)}n++;Q(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
h.Ud=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,X(a)+" clearById: "+b+" "+c);var e=d.openCursor(nj.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){V(a,1)};c.onerror=function(){V(a,c.error,!0)}}else V(a,0)};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};
h.Vd=function(a,b){function c(k){k++;if(k>=b.length)0<g.length?V(a,g,!0):V(a,d);else{b[k].G()!=e&&(e=b[k].G(),f=a.g.objectStore(e));var l=f["delete"](b[k].D());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();g[k]=l.error;c(k)}}}var d=0,e,f;Q(this.logger,X(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
h.Zc=function(a,b,c){var d=a.g.objectStore(b),e=d.count(c);Q(this.logger,X(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){V(a,e)};k.onerror=function(){V(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};h.se=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,X(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){V(a,void 0)};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};
h.of=function(a,b,c,d){var e=a.g.objectStore(b).index(c);Q(this.logger,X(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),k=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?V(a,f,!0):V(a,k)};g.onerror=function(b){b.preventDefault();V(a,g.error,!0)}};
h.qd=function(a,b){var c=b.length,d=0;Q(this.logger,X(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.g.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&V(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&V(a,f.error,!0)}}};
h.xd=function(a,b,c){var d=this;Q(this.logger,X(a)+b+":"+c);var e=a.g.objectStore(b),f=e.get(c);f.onsuccess=function(b){Q(d.logger,X(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&Jb&&x(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
V(a,new Blob([m.buffer],{type:b}))}else V(a,b.target.result)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}};
h.gf=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)V(a,e);else{var m=b+10;m<k&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?V(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();V(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.g.objectStore(b),k=c.length;Q(this.logger,X(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else V(a,[])};
h.Md=function(a,b){function c(f){var k=b[f],l=a.g.objectStore(k.G()).get(k.D());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?V(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();V(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;Q(this.logger,X(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else V(a,[])};
h.Hc=function(a,b,c,d,e){if(d&&e)throw new Qc("unique count not available in IndexedDB");e=a.g.objectStore(b);b=X(a)+" "+b+(d?":"+d:"")+(c?":"+S(c):"");Q(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){V(a,b.target.result)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=[],p=a.g.objectStore(c),q=k?l?"prevunique":"prev":l?"nextunique":"next";c=X(a)+" "+b+" "+c+(d?":"+d:"")+(e?S(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],v=e?e.lower:void 0,z=e?e.upper:void 0,D=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=jj(k?new U(v,s,D,l):new U(s,z,l,e));c+=" starting from "+S(m[0]);t(m[1])&&(c+=", "+S(m[1]))}Q(this.logger,c);var G;G=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,
q):d?p.index(d).openCursor(e,q):p.openCursor(e,q);var J=!1;G.onsuccess=function(c){if(c=c.target.result){if(!J){if(0<g){J=!0;c.advance(g);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=Kj.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=Kj.cmp(c.primaryKey,m[1]);if(0==e){J=!0;c["continue"]();return}if(e==l)J=!0;else{c["continue"]();return}}else J=!0}else J=!0;else J=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=Pj(c.key),m[1]=Pj(c.primaryKey)),V(a,n)}else m&&(m[0]=void 0,m[1]=void 0),V(a,n)};G.onerror=function(b){b.preventDefault();V(a,G.error,!0)}};function pm(a,b){this.g=b}E(pm,om);pm.prototype.logger=R("ydn.db.core.req.IndexedDb");pm.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new lm(a,b,c,d)};function qm(){this.g=!1}qm.prototype.g=!1;function rm(a,b,c,d){Lj.call(this,a,b,c,d);this.p=this.h=this.g=void 0;this.s=this.l=null;this.L=new qm;this.Zd=this.Tb=null}E(rm,Lj);h=rm.prototype;h.logger=R("ydn.db.core.req.SimpleCursor");h.Gd=function(){return!!this.n};h.update=function(a){sm(this.Zd,this.ga(),a);return sb()};h.advance=function(a){function b(b){d++;if(!b||d>=a)return tm(c,b)}var c=this,d=this.l?-1:0;this.reverse?um(this.Tb,b,this.l):vm(this.Tb,b,this.l)};
h.rd=function(a){if(null!=a){var b=this,c=new wm(a),d=function(c){b.l=c;if(!c)return tm(b,c);var d=rj(c.value.key,a);if(b.reverse){if(1!=d)return tm(b,c)}else if(-1!=d)return tm(b,c)};this.reverse?um(this.Tb,d,c):vm(this.Tb,d,c)}else this.advance(1)};function xm(a){setTimeout(function(){a.L.g?(a.L.g=!1,a.fc(a.g,a.h,a.p),xm(a)):(a.s(),a.s=null)},4)}
function tm(a,b){if(a.l=b){var c=b.value;if(a.ba)if(a.reverse||null==a.ba.upper)a.reverse&&null!=a.ba.lower&&(d=rj(c.key,a.ba.lower),-1==d||0==d&&a.ba.lowerOpen)&&(a.l=null);else{var d=rj(c.key,a.ba.upper);if(1==d||0==d&&a.ba.upperOpen)a.l=null}if(a.l){if(a.unique&&null!=a.g&&null!=c.key&&0==rj(a.g,c.key))return;a.g=c.key;a.h=a.j?c.ga():a.g;4==a.na&&(a.Tc?a.p=a.h:a.p=a.Zd.ha(null,a.h))}}a.l||(a.g=void 0,a.h=void 0,a.p=void 0);return a.L.g=!0}
h.openCursor=function(a,b){var c=null;if(this.ba)if(this.reverse){var d=this.j?"\uffff":void 0;null!=this.ba.upper&&(c=new wm(this.ba.upper,d))}else null!=this.ba.lower&&(c=new wm(this.ba.lower));null!=a&&(c=this.j?new wm(a,b):new wm(a));this.s=this.n.J(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==ym(c,e))return}else if(this.ba&&(!this.reverse&&this.ba.lowerOpen&&null!=this.ba.lower&&(e=rj(f,this.ba.lower),0==e)||this.reverse&&this.ba.upperOpen&&null!=this.ba.upper&&
(e=rj(f,this.ba.upper),0==e)))return;return tm(this,b)}this.Zd=zm(b,this.O);this.Tb=Am(this.Zd,this.wb);this.reverse?um(this.Tb,B(d,this),c):vm(this.Tb,B(d,this),c);xm(this)},this)};h.clear=function(){throw new Pc;};h.toString=function(){return"Simple"+rm.m.toString.call(this)};function Bm(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(wj(void 0))));return a.join("^|")};function wm(a,b){this.key=a;this.g=b}wm.prototype.ga=function(){return this.g};wm.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.g?", "+this.g+")":")")};function ym(a,b){var c=rj(a.key,b.key);return 0===c?null!=a.g?null!=b.g?rj(a.g,b.g):1:null!=b.g?-1:0:c};function Cm(a){this.Qa=a||Dm}function Dm(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=Cm.prototype;h.Da=null;h.Qa=null;h.zb=null;h.xb=null;
h.add=function(a){if(null==this.Da)return this.xb=this.zb=this.Da=new Em(a),!0;var b=null;Fm(this,function(c){var d=null;0<this.Qa(c.value,a)?(d=c.left,null==c.left&&(b=new Em(a,c),c.left=b,c==this.zb&&(this.zb=b))):0>this.Qa(c.value,a)&&(d=c.right,null==c.right&&(b=new Em(a,c),c.right=b,c==this.xb&&(this.xb=b)));return d});b&&(Fm(this,function(a){a.count++;return a.parent},b.parent),Gm(this,b.parent));return!!b};
h.remove=function(a){var b=null;Fm(this,function(c){var d=null;0<this.Qa(c.value,a)?d=c.left:0>this.Qa(c.value,a)?d=c.right:(b=c.value,Hm(this,c));return d});return b};h.clear=function(){this.xb=this.zb=this.Da=null};h.contains=function(a){var b=!1;Fm(this,function(c){var d=null;0<this.Qa(c.value,a)?d=c.left:0>this.Qa(c.value,a)?d=c.right:b=!0;return d});return b};h.fa=function(){return this.Da?this.Da.count:0};h.ya=function(){var a=[];Im(this,function(b){a.push(b)});return a};
function Im(a,b){if(a.Da){var c,d=c=Jm(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Fm(a,b,c){for(c=c?c:a.Da;c&&null!=c;)c=b.call(a,c)}
function Gm(a,b){Fm(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Km(this,a.left),Lm(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Lm(this,a.right),Km(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Km(a,b){Mm(b)?(b.parent.left=b.right,b.right.parent=b.parent):Nm(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.Da=b.right,a.Da.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Lm(a,b){Mm(b)?(b.parent.left=b.left,b.left.parent=b.parent):Nm(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.Da=b.left,a.Da.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Hm(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Om(a,b.left);Fm(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.xb&&(a.xb=d)}else{d=Jm(a,b.right);Fm(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.zb&&(a.zb=d)}d.count=b.count;Mm(b)?b.parent.left=d:Nm(b)?b.parent.right=d:a.Da=d;Gm(a,c?c:d)}else Fm(a,function(a){a.count--;return a.parent},b.parent),Mm(b)?(b.parent.left=null,b==a.zb&&(a.zb=b.parent),Gm(a,b.parent)):Nm(b)?(b.parent.right=null,b==a.xb&&(a.xb=b.parent),Gm(a,b.parent)):a.clear()}function Jm(a,b){if(!b)return a.zb;var c=b;Fm(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Om(a,b){if(!b)return a.xb;var c=b;Fm(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Em(a,b){this.value=a;this.parent=b?b:null;this.count=1}Em.prototype.left=null;Em.prototype.right=null;Em.prototype.height=1;function Nm(a){return!!a.parent&&a.parent.right==a}function Mm(a){return!!a.parent&&a.parent.left==a};function Pm(a){this.Qa=a||Dm}E(Pm,Cm);function vm(a,b,c){if(a.Da){var d;if(c instanceof Em)d=c;else if(c){if(Fm(a,function(a){var b=null;0<this.Qa(a.value,c)?(b=a.left,d=a):0>this.Qa(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Jm(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function um(a,b,c){if(a.Da){var d;if(c instanceof Em)d=c;else if(c){if(Fm(a,B(function(a){var b=null;0<this.Qa(a.value,c)?b=a.left:(0>this.Qa(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Om(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function Qm(a,b,c){this.l=a;this.storage=b;this.h=c;this.g={};a=this.h.keyPath;this.i=u(a)?a.join(","):a||"_ROWID_";this.g[this.i]=null;this.j=Bm(this.l,this.h.getName(),this.i)+"^|"}
function Am(a,b){var c=b||a.i;if(!a.g[c]){a.g[c]=new Pm(ym);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&ra(f,a.j)){var g=zj(f.substr(a.j.length));if(c==a.i)a.g[c].add(new wm(g));else{var k=a.storage.getItem(f);if(null!==k)if(f=Nj(a.h,c),k=wh(k),k=wl(f,k),f.multiEntry){if(u(k))for(f=0;f<k.length;f++)a.g[c].add(new wm(k[f],g))}else a.g[c].add(new wm(k,g))}}}}return a.g[c]}
function Rm(a,b,c){for(var d in a.g){var e=a.g[d];if(e)if(d==a.i)e.remove(new wm(b));else{var f=Nj(a.h,d),f=tj(c,f.keyPath);e.remove(new wm(b,f))}}}function Sm(a){for(var b in a.g){var c=a.g[b];c&&c.clear()}a.g={}}
function sm(a,b,c,d){if(null==b&&(a.h.keyPath&&(b=Yk(a.h,c)),a.h.h&&null==b)){b=a.j+wj(void 0);var e=wh(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,S(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.j+wj(b)));if(d)return null;a.storage.setItem(a.j+wj(b),S(c));d=b;for(var f in a.g)if(e=a.g[f])if(f==a.i)e.add(new wm(d));else{var g=Nj(a.h,f),g=tj(c,g.keyPath);null!=g&&e.add(new wm(d,g))}return b}
function Tm(a,b){var c=a.j+wj(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=wh(d);Rm(a,b,c);return 1}h=Qm.prototype;h.clear=function(){Sm(this);Um(this)};h.ha=function(a,b){if(a&&a!=this.i)throw"impl";var c=this.storage.getItem(this.j+wj(b)),d=void 0;if(null!==c)for(var d=wh(c),c=0,e=this.h.indexes.length;c<e;c++){var f=this.h.index(c);if("DATE"==f.type){var g=wl(f,d);g&&xl(f,d,new Date(g))}}return d};h.getName=function(){return this.h.getName()};
function Vm(a,b,c){b=b||a.i;a=Am(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new wm(c.lower)),null!=c.upper&&(e=new wm(c.upper)),g=c.lowerOpen,k=c.upperOpen);vm(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=rj(a.key,d.key))){if(null!=e&&(a=rj(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Um(a,b){var c=Am(a,a.i),d=null,e=null,f=0,g=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new wm(b.lower)),null!=b.upper&&(e=new wm(b.upper)),l=b.lowerOpen,m=b.upperOpen);vm(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=ym(b,d))){if(null!=e){var c=ym(b,e);if(1===c||0===c&&m)return!0}var c=a.j+wj(b.key),q=a.storage.getItem(c);null!==q&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(wh(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Rm(a,g[c],k[c]);else Sm(a);return f}
h.yd=function(a,b,c,d,e,f,g,k){function l(b){if(b&&(z++,!(z<f))){var c=b.value;if(d){if(G&&null!=v&&(b=p?ym(c,v):rj(c.key,v.key),0==b))return;if(null!=s&&(b=p?ym(c,s):rj(c.key,s.key),-1==b||0==b&&D))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(D&&null!=s&&(b=p?ym(c,s):rj(c.key,s.key),0==b))return;if(null!=v&&(b=p?ym(c,v):rj(c.key,v.key),1==b||0==b&&G))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!g||!q||null==n||0!=rj(n,b)){c=q?c.ga():b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=O.ha(null,c);m.push(l)}else m.push([b,c,O.ha(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,p=!!k&&null!=k[0];b=b||this.i;var q=b!=this.i;b=Am(this,b);var s=null,v=null;t(f)||(f=0);var z=-1,D=!1,G=!1;null!=c&&(null!=c.lower&&(s=q&&d?new wm(c.lower,"\uffff"):new wm(c.lower)),null!=c.upper&&(v=q&&!d?new wm(c.upper,"\uffff"):new wm(c.upper)),D=!!c.lowerOpen,G=!!c.upperOpen);if(p){d?G=!0:D=!0;c=k[0];var J=t(k[1])?k[1]:"\uffff";d?v=q?new wm(c,J):new wm(c):
s=q?new wm(c,J):new wm(c)}var O=this;d?um(b,l,v):vm(b,l,s);return m};h.La=function(a,b,c,d,e){return this.yd(2,a,b,c,d,e)};h.toString=function(){return"ydn.db.con.simple.Store:"+this.l+":"+this.h.getName()};function Wm(){this.clear()}h=Wm.prototype;h.ue=function(){return this};h.setItem=function(a,b){t(this.g[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.g[a]=b};h.getItem=function(a){return t(this.g[a])?this.g[a]:null};h.removeItem=function(a){delete this.g[a];Xa(this.keys,a.toString());this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return t(a)?this.g[a]:null};h.clear=function(){this.g={};this.keys=[];this.length=0};function Xm(a){this.n=a||new Wm;this.l={}}function zm(a,b){var c=Z(a.g,b);if(c)a.l[b]||(a.l[b]=new Qm(a.i,a.j,c));else throw new Rc('store name "'+b+'" not found.');return a.l[b]}Xm.prototype.fb=function(a){var b=this;setTimeout(function(){var c=Bm(b.i),c=b.j.getItem(c),c=new Rl(c);a(c)},10)};function Ym(a,b){this.h=a;this.g=b}Ym.prototype.J=function(a,b){var c=this.h;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.g("complete",null);d.g=null;d.h=null}};function Zm(a,b){this.g=b}E(Zm,tk);h=Zm.prototype;h.logger=R("ydn.db.crud.req.SimpleStore");h.Sd=function(a,b,c){this.ib(a,!0,!1,null,b,c)};
h.ib=function(a,b,c,d,e,f){Q(this.logger,X(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var g=a.g.J(function(k){var l;if(c)l=zm(k,d),k=f?f[0]:void 0,k=sm(l,k,e[0],!b),null!=k?V(a,k):(l=xh(k),l=new gk(l),V(a,l,!0));else{for(var m=d,n=[],p=!1,q=f||{},s=0;s<e.length;s++){var v;d?v=q[s]:(m=f[s],v=m.D(),m=m.G());l&&l.getName()==m||(l=zm(k,m));v=sm(l,v,e[s],!b);null!=v?n.push(v):(p=!0,n.push(new gk))}V(a,n,p)}g();g=null},this)};h.nf=function(){throw new Pc("putData");};
h.xd=function(a,b,c){var d=a.g.J(function(e){e=zm(e,b).ha(null,c);V(a,e);d();d=null},this)};function $m(a,b,c,d){var e=b.g.J(function(a){for(var g=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof qk&&(k=n,n=k.D(),k=k.G());l&&l.getName()==k||(l=zm(a,k));n=l.ha(null,n);g[m]=n}V(b,g,!1);e();e=null},a)}h.gf=function(a,b,c){$m(this,a,b,c)};h.Md=function(a,b){$m(this,a,null,b)};
h.Ud=function(a,b,c){var d=X(a)+" removeById "+b+" "+c;Q(this.logger,d);var e=this,f=a.g.J(function(g){g=Tm(zm(g,b),c);P(e.logger,"success "+d+(0==g?" [not found]":""));V(a,g);f();f=null},this)};h.Vd=function(a,b){Q(this.logger,X(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.g.J(function(f){for(var g=0;g<b.length;g++){var k=b[g].G(),l=b[g].D();c&&c.getName()==k||(c=zm(f,k));d+=Tm(c,l)}V(a,d);e();e=null},this)};h.se=function(a,b,c){this.Zc(a,b,c)};
h.Zc=function(a,b,c){var d=X(a)+" removeByKeyRange "+(c?S(c):"");Q(this.logger,d);var e=this,f=a.g.J(function(g){g=Um(zm(g,b),c);P(e.logger,d+" deleted "+g+" records.");V(a,g);f();f=null},this)};h.of=function(a,b,c,d){var e=X(a)+" removeByIndexKeyRange "+(d?S(d):"");Q(this.logger,e);var f=a.g.J(function(e){e=zm(e,b);for(var k=e.La(c,d),l=k.length,m=0;m<l;m++)Tm(e,k[m]);V(a,l);f();f=null},this)};
h.qd=function(a,b){var c=X(a)+" clearByStores";Q(this.logger,c);var d=a.g.J(function(e){for(var f=0;f<b.length;f++)zm(e,b[f]).clear();P(this.logger,"success "+c);V(a,b.length);d();d=null},this)};h.td=function(a,b){var c=a.g.J(function(d){for(var e=[],f=0;f<b.length;f++){var g=zm(d,b[f]);e.push(Vm(g))}V(a,e);c();c=null},this)};
h.Hc=function(a,b,c,d){var e=X(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");Q(this.logger,e);var f=a.g.J(function(g){g=Vm(zm(g,b),d,c);P(this.logger,"success "+e);V(a,g);f();f=null},this)};h.list=function(a,b,c,d,e,f,g,k,l,m){var n=X(a)+" "+c+" "+(e?xh(e):"");Q(this.logger,n);var p=a.g.J(function(q){q=zm(q,c).yd(b,d,e,k,f,g,l,m);P(this.logger,n+" "+q.length+" records found.");V(a,q);p();p=null},this)};function an(a,b){this.g=b}E(an,Zm);an.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new rm(a,b,c,d)};function bn(a,b,c,d){Lj.call(this,a,b,c,d);this.L=null;this.s=this.l=void 0}E(bn,Lj);h=bn.prototype;h.logger=R("ydn.db.core.req.WebsqlCursor");h.ga=function(){return this.s};h.init=function(a,b,c,d,e){bn.m.init.call(this,a,b,c,d,e);this.L=x(b)?Nj(this.i,b):null};h.T=function(){return this.$};function cn(a,b){a.l=void 0;a.s=void 0;a.$=void 0;if(t(b))if(A(b)){var c=yl(b[a.i.l],a.i.type);a.s=c;if(a.j){var d=Nj(a.i,a.wb);a.l=yl(b[a.wb],d.type)}else a.l=c;a.$=a.Tc?c:dn(b,a.i)}else a.$=b}
function en(a,b,c,d,e,f){var g=!d;d=[];a.j&&null!=f&&null!=c?c=Hl(a.i,a.na,d,a.L.getName(),a.ba,c,g,f,a.reverse,a.unique):null!=c?(f=a.L?a.L.getName():null,c=Gl(a.i,a.na,d,f,a.ba,a.reverse,a.unique,c,g)):(c=Dl(a.i,d,a.na,a.j?a.L.j:a.i.l,a.ba,a.reverse,a.unique),a.j&&(c+=", "+a.i.j+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);Q(a.logger,a+": continue:  SQL: "+c+" : "+S(d));a.n.executeSql(c,d,function(c,d){0<d.rows.length?cn(a,d.rows.item(0)):cn(a);b.call(a,a.l,a.s,a.$);b=null},function(c,d){N(a.logger,
"get error: "+d.message);a.V(d);Oj(a);a.F=!0;cn(a);b.call(a,a.s,a.l,a.$);b=null;return!1})}h.Gd=function(){return!!this.n};h.update=function(a){if(!this.Gd())throw new kk;var b=new F,c=this.ga();a=Kl(this.i,a,c);var d="REPLACE INTO "+Fl(this.i)+" ("+a.Qf.join(", ")+") VALUES ("+a.mg.join(", ")+")";Q(this.logger,this+': update "'+d+'" : '+S(a.values));this.n.executeSql(d,a.values,function(){b.w(c)},function(a,c){b.A(c);return!1});return b};
h.advance=function(a){var b=this.l,c=this.s,d=!0;null==this.l||this.j&&null==this.s||(a-=1,d=!1);en(this,function(a,d,g){var k=null!=b&&null!=a&&0==rj(b,a);if(this.j){var l=null!=d&&null!=c&&0==rj(d,c);if(k&&l)throw new Rc("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new Rc("current: "+b+" next: "+a);this.fc(a,d,g)},this.l,d,a,this.s)};h.rd=function(a){null!=a?en(this,this.fc,a,!0):this.advance(1)};h.openCursor=function(a,b){en(this,this.fc,a,!1,0,b)};
h.clear=function(){if(!this.Gd())throw new kk;var a=new F,b=this.i.l,b="DELETE FROM "+Fl(this.i)+" WHERE "+b+" = ?",c=[this.ga()];Q(this.logger,this+': clear "'+b+'" : '+S(c));this.n.executeSql(b,c,function(b,c){a.w(c.rowsAffected)},function(b,c){a.A(c);return!1});return a};h.toString=function(){return"WebSql"+bn.m.toString.call(this)};function fn(a,b){this.g=b}E(fn,tk);h=fn.prototype;h.logger=R("ydn.db.crud.req.WebSql");
function dn(a,b){if(b.kc&&!b.keyPath&&0==b.indexes.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return wh(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?wh(a._default_):{};null!=b.keyPath&&(d=yl(a[b.keyPath],b.type),null!=d&&el(b,c,d));for(d=0;d<b.indexes.length;d++)e=
b.index(d),f=e.j,"_default_"==f||e.n||e.multiEntry||"DATE"!=e.type&&!b.kc||(f=yl(a[f],e.type),t(f)&&xl(e,c,f));return c}h.nf=function(){throw new Pc("putData");};
h.ib=function(a,b,c,d,e,f){function g(b,d){if(null==e[b])if(Q(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)P(m.logger,q+" success "+q),V(a,n,s);else{var D=b+2;D<e.length&&g(D,d)}var G;G=t(f)?Kl(k,e[b],f[b]):Kl(k,e[b]);D=l+Fl(k)+" ("+G.Qf.join(", ")+") VALUES ("+G.mg.join(", ")+");";Q(m.logger,X(a)+" SQL: "+D+" PARAMS: "+G.values+" REQ: "+b+" of "+e.length);d.executeSql(D,G.values,function(f,q){function D(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Ia(e)+" ("+k.j+", "+
b.i+") VALUES (?, ?)",f=[sj(I,k.type),sj(c,b.type)];Q(m.logger,X(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){N(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var I=t(G.key)?G.key:q.insertId;1>q.rowsAffected&&(s=!0,I=new gk(I+" no-op"));for(var oc=0,wi=k.indexes.length;oc<wi;oc++){var Xc=k.index(oc);if(Xc.multiEntry)for(var Kd=tj(e[b],Xc.keyPath),Ru=(Kd?Kd.length:0)||0,Ml=0;Ml<Ru;Ml++)D(Xc,Kd[Ml])}c?V(a,I):(n[b]=I,p==e.length?V(a,n,s):(oc=b+2,oc<e.length&&
g(oc,f)))},function(d,f){p++;s=!0;6==f.code?f.name="ConstraintError":N(m.logger,"error: "+f.message+" "+q);if(c)V(a,f,!0);else if(n[b]=f,p==e.length)Q(m.logger,"success "+q),V(a,n,s);else{var k=b+2;k<e.length&&g(k,d)}return!1})}b=!b;var k=Z(this.g,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.g;var m=this,n=[],p=0,q=X(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)g(b,d);else P(this.logger,"success"),V(a,[])};
h.Sd=function(a,b,c){if(0==c.length)V(a,[]);else{for(var d=[],e=0,f=0,g=this,k=function(k,l){var m=[];Q(g.logger,"put "+l.length+" objects to "+k);for(var n=Jl(Z(g.g,k)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].D());n=bk(a);n.u(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&V(a,d)},function(){e++;e==f&&V(a,d,!0)});g.ib(n,!1,!1,k,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var q=c[p].G(),s=c[p].D();q!=l?(f++,0<m.length&&k(l,m),m=[p],n=[s],l=q):(m.push(p),n.push(s))}0<
m.length&&k(l,m)}};h.xd=function(a,b,c){var d=a.g,e=Z(this.g,b),f=this;b=e.j;c=[sj(c,e.type)];b="SELECT * FROM "+Fl(e)+" WHERE "+b+" = ?";var g=X(a)+" SQL: "+b+" PARAMS: "+c;Q(this.logger,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=dn(d,e),V(a,d)):(P(f.logger,"success no result: "+g),V(a,void 0))}else P(f.logger,"success no result: "+g),V(a,void 0)},function(b,c){N(f.logger,"error: "+g+" "+c.message);V(a,c,!0);return!1})};
h.gf=function(a,b,c){function d(b,e){var p=l.j,q=[sj(c[b],l.type)],s="SELECT * FROM "+Fl(l)+" WHERE "+p+" = ?";Q(f.logger,"SQL: "+s+" PARAMS: "+q);e.executeSql(s,q,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=dn(n,l))}else g[b]=void 0;k==c.length?V(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;N(f.logger,"error: "+s+" "+l.message);if(k==c.length)V(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.g,f=this,g=[],k=0,l=Z(this.g,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else P(f.logger,"success"),V(a,[])};
h.Md=function(a,b){function c(d,k){var n=b[d],p=Z(e.g,n.G()),q=rk(n),n=p.j,q=[sj(q,p.type)],s="SELECT * FROM "+Fl(p)+" WHERE "+n+" = ?";Q(e.logger,"SQL: "+s+" PARAMS: "+q);k.executeSql(s,q,function(k,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=dn(n,p))}else f[d]=void 0;g==b.length?(Q(e.logger,"success "+s),V(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){V(a,c,!0);return!1})}var d=a.g,e=this,f=[],g=0;if(0<b.length)for(var k=0;10>k&&k<b.length;k++)c(k,d);else Q(this.logger,"success"),
V(a,[])};
h.qd=function(a,b){function c(d,g){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Ia(a);Q(e.logger,"SQL: "+a);g.executeSql(a,[])}var l=Z(e.g,b[d]),m="DELETE FROM  "+Fl(l);Q(e.logger,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(Q(e.logger,"success "+m),V(a,b.length)):c(d+1,g)},function(b,c){V(a,c,!0);return!1});for(var n=0,p=l.indexes.length;n<p;n++){var q=l.index(n);q.multiEntry&&k(q)}}var d=a.g,e=this;0<b.length?c(0,d):(Q(this.logger,"success"),
V(a,0))};
h.Vd=function(a,b){function c(k){if(k>=b.length)V(a,f,g);else{var l=Z(e.g,b[k].G()),m=sj(b[k].D(),l.type),n=" WHERE "+l.j+" = ?",p="DELETE FROM "+Fl(l)+n,q=X(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(k)},function(a,b){N(e.logger,"error: "+q+b.message);g=!0;c(k);return!1});k++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+n;Q(e.logger,X(a)+NaN+b);d.executeSql(b,[m])},s=0,v=l.indexes.length;s<v;s++){var z=l.index(s);z.multiEntry&&p(z)}}}
var d=a.g,e=this,f=0,g=!1;Q(this.logger,X(a)+" removeByKeys: "+b.length+" keys");c(0)};
h.Ud=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+l;Q(k.logger,X(a)+NaN+b);e.executeSql(b,[g])}var e=a.g,f=Z(this.g,b),g=sj(c,f.type),k=this,l=" WHERE "+f.j+" = ?";b="DELETE FROM "+Fl(f)+l;Q(this.logger,X(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){V(a,c.rowsAffected)},function(b,c){V(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};h.se=function(a,b,c){gn(this,a,b,void 0,c)};
h.Zc=function(a,b,c){gn(this,a,b,void 0,c)};h.of=function(a,b,c,d){gn(this,a,b,c,d)};
function gn(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Ia(c)+n;Q(a.logger,X(b)+NaN+c);g.executeSql(c,m)}var g=b.g,k=Z(a.g,c);c="DELETE FROM "+Fl(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=Nj(k,d),qj(d.i,d.type,e,m,l)):qj(k.j,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=X(b)+" SQL: "+c+" PARAMS: "+l;Q(a.logger,p);g.executeSql(c,l,function(c,d){Q(a.logger,"success "+p);V(b,d.rowsAffected)},function(c,d){N(a.logger,"error: "+p+d.message);V(b,d,!0);return!1});
e=0;for(d=k.indexes.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}h.td=function(a,b){function c(g){var k="SELECT COUNT(*) FROM "+Ia(b[g]);Q(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[g]=parseInt(k["COUNT(*)"],10);g++;g==b.length?V(a,f):c(g)},function(b,c){V(a,c,!0);return!1})}var d=a.g,e=this,f=[];0==b.length?(Q(this.logger,"success"),V(a,0)):c(0)};
h.Hc=function(a,b,c,d,e){var f=[];b=Dl(Z(this.g,b),f,6,d,c,!1,e);Q(this.logger,X(a)+" SQL: "+b+" PARAMS: "+f);a.g.executeSql(b,f,function(b,c){var d=c.rows.item(0);V(a,Vl(d))},function(b,c){V(a,c,!0);return!1})};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=this,p=[],q=Z(this.g,c),s=q.l,v=q.type,z=v,D=null!=d&&d!==s?Nj(q,d):null,G=d||s;D&&(z=D.type);c=[];if(m&&t(m[0])){var J=m[0];D&&t(m[1])?(d=m[1],e=Hl(q,b,c,D.getName(),e,J,!0,d,k,l)):e=Gl(q,b,c,d,e,k,l,J,!0)}else e=Dl(q,c,b,G,e,k,l);y(f)&&(e+=" LIMIT "+f);y(g)&&(e+=" OFFSET "+g);var O=a+" SQL: "+e+" ;params= "+S(c);Q(this.logger,O);a.g.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=yl(f[s],v):1==b?p[g]=yl(f[G],
z):3==b?p[g]=[yl(f[G],z),yl(f[s],v)]:null!=f&&(p[g]=dn(f,q));P(n.logger,"success "+a);m&&f&&(m[0]=yl(f[G],z),m[1]=yl(f[s],v));V(a,p)},function(b,c){N(n.logger,"error: "+O+c.message);V(a,c,!0);return!1})};function hn(a,b){this.g=b}E(hn,fn);hn.prototype.logger=R("ydn.db.core.req.WebSql");hn.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new bn(a,b,c,d)};km.prototype.I=function(){var a=xk(this);if("indexeddb"==a)return new pm(0,this.h);if("websql"==a)return new hn(0,this.h);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new an(0,this.h);throw new Rc("No executor for "+a);};function jn(a){return x(a)?a.replace(/\D/g,"").replace(/^0+/,""):null}function kn(a){if(!x(a)||!/[\w\+]+@\w+\.\w+/.test(a))return null;a=a.toLowerCase();return a=a.replace(/\+\w*?@/,"@")};function ln(a){if(!x(a))throw new Ch;this.Wa=a;this.j=Ij;this.g=[];mn(this,a);this.dd=""}h=ln.prototype;h.Wa="";h.gg=NaN;h.ig=NaN;h.uf=!1;h.dd="";
function mn(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.l=c[1].toUpperCase();if("SELECT"==a.l)a.j=Hj;else if("INSERT"==a.l)a.j=Ij;else if("UPDATE"==a.l)a.j=Ij;else if("DELETE"==a.l)a.j=Ij;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.i=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.i=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new ok("missing closing parentheses"));a.I=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.h=d.substring(c),d=d.substring(0,c)):a.h="";c=d.search(/WHERE/i);0<c?(a.n=d.substring(c+6).trim(),d=d.substring(0,c)):a.n="";a.g=d.trim().split(",").map(function(a){a=Fa(a,'"');a=Fa(a,"'");return a.trim()})}}}
h.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Wa=this.Wa.replace("?",a[b]);mn(this,this.Wa)}this.p=nn(this);if(!this.p)return this.dd;a=this.h.length;if(b=/OFFSET\s+(\d+)/i.exec(this.h))this.ig=parseInt(b[1],10),a=this.h.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.h))this.gg=parseInt(b[1],10),b=this.h.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.h.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.uf="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.uf=!1,this.s=Fa(Fa(a,'"'),"'")):this.s=void 0;return""};function on(a){if("*"==a.I)return null;a=a.I.split(",");return a=a.map(function(a){return Fa(a.trim(),'"')})}h.toJSON=function(){return{sql:this.Wa}};
function nn(a){function b(a){return Ua(c,function(b){return b.Lc()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.n.length)for(var e=a.n.split("AND"),f=0;f<e.length;f++){var g=e[f],k=d.exec(g);if(k){var l=k[1].trim(),l=Fa(l,'"'),l=Fa(l,"'");if(0<l.length){var m=k[3].trim();ra(m,'"')?m=Fa(m,'"'):ra(m,"'")?m=Fa(m,"'"):m=parseFloat(m);k=new Ej(l,k[2],m);l=b(l);if(0<=l){if(c[l]=c[l].qe(k),!c[l])return a.dd='where clause "'+g+'" conflict',null}else c.push(k)}else return a.dd='Invalid clause "'+g+'"',
null}else return a.dd='Invalid clause "'+g+'"',null}return c}h.toString=function(){return"query:"+this.Wa};function pn(a,b){this.g=b;this.h=a}pn.prototype.logger=R("ydn.db.sql.req.nosql.Node");pn.prototype.toJSON=function(){return{sql:this.g}};pn.prototype.toString=function(){return"idb.Node:"};
pn.prototype.execute=function(a,b){var c=$a(this.g.g)[0],d=this.g.p,e=this.g.gg,e=isNaN(e)?100:e,f=this.g.ig,f=isNaN(f)?0:f,g=this.g.s,k=on(this.g),l=null,m=this.g.uf;if(0==d.length)l=null;else if(1==d.length)l=kj(d[0].g);else throw new Oc("too many conditions.");null===k||dk(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return tj(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=tj(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].Lc():void 0,n=X(a)+" executing on"+c;d&&(n+=":"+
d);n+=" "+pj(l);P(this.logger,n);g&&g!=this.h.keyPath?b.list(a,4,c,g,l,e,f,m,!1):t(d)&&d!=this.h.keyPath?b.list(a,4,c,d,l,e,f,m,!1):b.list(a,4,c,null,l,e,f,m,!1)};function qn(a,b){pn.call(this,a,b)}E(qn,pn);
qn.prototype.execute=function(a,b){var c,d=$a(this.g.g)[0],e=this.g.p,f=null;if(0==e.length)f=null;else if(1==e.length)f=kj(e[0].g);else throw new Oc("too many conditions.");var g=this.g.i,e=0<e.length?e[0].Lc():void 0,k=X(a)+" executing "+g+" on "+d;e&&(k+=":"+e);k+=" "+pj(f);P(this.logger,k);if("COUNT"==g)f?b.Hc(a,d,f,e,!1):b.Hc(a,d,null,void 0,!1);else{var l,k=on(this.g);if(!k||0==k.length)throw new Ih("field name require for reduce operation: "+g);k=k[0];if("MIN"==g)l=rn(k);else if("MAX"==g)l=
sn(k);else if("AVG"==g)c=0,l=tn(k);else if("SUM"==g)c=0,l=un(k);else throw new Dh(g);var m;t(e)?m=new Wj(d,e,f):m=new Vj(d,f);var d=b.h(a.g,X(a),d,4),n=m.load([d]);n.V=function(b){V(a,b,!0)};var p=0;n.P=function(b){null!=b?(b=m.g?n.ga():n.T(),c=l(b,c,p),n.advance(1),p++):V(a,c)}}};function tn(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function un(a){return function(b,c){return c+b[a]}}function rn(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function sn(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function vn(a,b){this.g=b}E(vn,pm);vn.prototype.logger=R("ydn.db.sql.req.IndexedDb");vn.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new ok(c);c=$a(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new lk(c[0]);var e=on(b);if(e)for(var f=0;f<e.length;f++)if(!Uk(d,e[f]))throw new lk('Index "'+e[f]+'" not found in '+c[0]);var g;b.i?g=new qn(d,b):g=new pn(d,b);g.execute(a,this)}else throw new Dh(b.Wa);};function wn(a,b){this.h=b;this.i=a;this.g=on(b)}wn.prototype.logger=R("ydn.db.sql.req.websql.Node");wn.prototype.toJSON=function(){return{sql:this.h.Wa}};wn.prototype.toString=function(){return"websql.Node:"};function xn(a,b){if(a.g){if(1==a.g.length){if(A(b))return lc(b,a.g[0]);return}for(var c={},d=0;d<a.g.length;d++)c[a.g[d]]=lc(b,a.g[d]);return c}return dn(b,a.i)}
wn.prototype.execute=function(a,b,c){var d=this,e=[];b.executeSql(this.h.Wa,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(A(m))var n=xn(d,m);e.push(n)}a(e)},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function yn(a,b){wn.call(this,a,b)}E(yn,wn);yn.prototype.execute=function(a,b,c){var d=this;b.executeSql(this.h.Wa,c,function(b,c){var d=c.rows.length;if(1==d)d=Vl(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new jk;},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function zn(a,b){this.g=b}E(zn,hn);zn.prototype.logger=R("ydn.db.sql.req.WebSql");zn.prototype.executeSql=function(a,b,c){var d=$a(b.g);if(1==d.length){var e=Z(this.g,d[0]);if(!e)throw new lk(d[0]);var f=on(b);if(f)for(var g=0;g<f.length;g++)if(!Uk(e,f[g]))throw new lk('Index "'+f[g]+'" not found in '+d[0]);var k;b.i?k=new yn(e,b):k=new wn(e,b);k.execute(function(b,c){V(a,b,c)},a.g,c)}else throw new Dh(b.Wa);};function An(a,b){this.g=b}E(An,an);An.prototype.logger=R("ydn.db.sql.req.SimpleStore");An.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new ok(c);c=$a(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new lk(c[0]);var e=on(b);if(e)for(var f=0;f<e.length;f++)if(!Uk(d,e[f]))throw new M('Index "'+e[f]+'" not found in '+c[0]);var g;b.i?g=new qn(d,b):g=new pn(d,b);g.execute(a,this)}else throw new Oc(b.Wa);};function Bn(a,b,c,d){Ik.call(this,a,b,c,d)}E(Bn,nl);Bn.prototype.executeSql=function(a,b){for(var c=new ln(a),d=$a(c.g),e=0;e<d.length;e++){var f=Z(this.h,d[e]);if(!f)throw new M("store: "+f+" not exists.");}P(this.logger,"executeSql: "+a+" params: "+b);var g=this.g.request("sql",$a(c.g),c.j);W(g,function(){Y(this).executeSql(g,c,b||[])},this);return g};function Cn(a,b,c){jm.call(this,a,b,c)}E(Cn,km);Cn.prototype.Vc=function(a,b){return new Bn(this,this.h,a,b)};Cn.prototype.executeSql=function(a,b){return this.g.executeSql(a,b)};Cn.prototype.I=function(){var a=xk(this);if("indexeddb"==a)return new vn(0,this.h);if("websql"==a)return new zn(0,this.h);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new An(0,this.h);throw new Rc("No executor for "+a);};function Dn(a,b){t(a)&&5242880<a&&N(this.logger,"storage size request ignored, use Quota Management API instead");this.ia=null;this.ad=b||NaN}h=Dn.prototype;
h.connect=function(a,b){function c(a,c,d){P(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)En(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)Rk(b,c[d])||(a.deleteObjectStore(c[d]),P(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.pb?N(e.logger,"database already set."):t(b)?(N(e.logger,b?b.message:"Error received."),e.ia=null,f.A(b)):(e.ia=a,e.ia.onabort=function(a){Q(e.logger,e+": abort");e.ed(a.target.error)},
e.ia.onerror=function(a){Q(e.logger,e+": error");e.ed(a.target.error)},e.ia.onversionchange=function(a){Q(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.ia&&(e.ia.onabort=null,e.ia.onblocked=null,e.ia.onerror=null,e.ia.onversionchange=null,e.Qd(a),!a.defaultPrevented)){e.ia.close();e.ia=null;var b=Error();b.name=a.type;e.ge(b)}},f.w(parseFloat(g)))}var e=this,f=new F,g=void 0,k=b.version;P(e.logger,"Opening database: "+a+" ver: "+(b.h?"auto":k));var l;l=t(k)?Kj.open(a,k):
Kj.open(a);l.onsuccess=function(f){var k=f.target.result;t(g)||(g=k.version);P(e.logger,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.h)e.fb(function(f){if(b instanceof Nk)for(var g=0;g<f.stores.length;g++)Rk(b,f.stores[g].getName())||Ok(b,f.stores[g].ea());f=Sl(b,f,!1,!0);if(0<f.length){P(e.logger,"Schema change require for difference in "+f);var l=y(k.version)?k.version+1:1;if("IDBOpenDBRequest"in r){k.close();var m=Kj.open(a,l);m.onupgradeneeded=function(a){a=a.target.result;P(e.logger,
"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){P(e.logger,e+": fail.");d(null)}}else{var p=k.setVersion(l+"");p.g=function(a){N(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=G;c(k,p.transaction,!0)};var G=function(){var b=Kj.open(a);b.onsuccess=function(a){a=a.target.result;P(e.logger,e+": OK.");d(a)};b.onerror=function(){P(e.logger,e+": fail.");d(null)}};
null!=p.transaction&&(p.transaction.oncomplete=G)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.g=function(a){N(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?P(e.logger,"database version "+k.version+" ready to go"):N(e.logger,"connected database version "+k.version+" is higher than requested version."),e.fb(function(a){a=Sl(b,a,!1,!0);0<a.length?(P(e.logger,a),
d(null,new Gh("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;P(e.logger,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){e.logger.log(Re,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name,void 0);d(null,c)};l.onblocked=function(c){e.logger.log(Re,"database "+a+" "+b.version+" block, close other connections.",void 0);d(null,c)};y(this.ad)&&!isNaN(this.ad)&&
setTimeout(function(){"done"!=l.readyState&&(e.logger.log(Re,e+": database state is still "+l.readyState,void 0),d(null,new pk("connection timeout after "+e.ad)))},this.ad);return f};h.ad=18E4;h.ge=function(){};h.ed=function(){};h.Qd=function(){};h.Dc=function(){return"indexeddb"};h.fe=function(){return!!this.ia};h.logger=R("ydn.db.con.IndexedDb");h.ia=null;h.ee=function(){return this.ia?parseFloat(this.ia.version):void 0};
h.fb=function(a,b,c){c=c||this.ia;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Rl(c.version));return}throw new Fh;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Rl(c.version));return}b=c.transaction(b,Hj)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var p=k.index(k.indexNames[m]);l[m]=new tl(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Kk(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new Rl(c.version,f);a(b)};
function En(a,b,c,d){function e(){var a={autoIncrement:!!d.h};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}Q(a.logger,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());Al(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),N(a.logger,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):fa(c.autoIncrement)&&fa(d.h)&&c.autoIncrement!=d.h&&(b.deleteObjectStore(d.getName()),
N(a.logger,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0;g<d.indexes.length;g++){var k=d.index(g);!f.contains(k.getName())&&k.l&&(c.clear(),N(a.logger,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,g=0;g<d.indexes.length;g++){var k=d.index(g),p=!1;if(f.contains(k.getName())){var q=c.index(k.getName()),s=null!=q.unique&&null!=k.unique&&q.unique!=k.unique,v=null!=q.multiEntry&&null!=k.multiEntry&&q.multiEntry!=
k.multiEntry,q=null!=q.keyPath&&null!=k.keyPath&&!!Al(q.keyPath,k.keyPath);if(s||v||q)c.deleteIndex(k.getName()),p=!0,l--,n++}else"BLOB"!=k.type&&(p=!0);p&&(k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath),l++)}for(g=0;g<f.length;g++)Uk(d,f[g])||(c.deleteIndex(f[g]),m++);Q(a.logger,"Updated store: "+c.name+", "+l+" index created, "+m+" index deleted, "+n+" modified.")}else{c=e();for(g=0;g<d.indexes.length;g++)k=
d.index(g),"BLOB"==k.type?a.logger.info("Index "+k+" of blob data type ignored."):(Q(a.logger,"Creating index: "+k),k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath));Q(a.logger,"Created store: "+c)}}
h.vd=function(a,b,c,d){var e=this.ia;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};h.de=function(){Q(this.logger,this+" closing connection");this.ia.close()};h.toString=function(){return"IndexedDB:"+(this.ia?this.ia.name+":"+this.ia.version:"")};
fk.push(function(a,b){if(!Kj||b&&"indexeddb"!=b)return null;var c=Kj.deleteDatabase(a),d=new Zj("IDBVersionChangeEvent ");c.onblocked=function(a){Tc(d,a)};c.onerror=function(a){d.A(a)};c.onsuccess=function(a){d.w(a)};return d});function Fn(a){Xm.call(this,a);this.h=NaN}E(Fn,Xm);h=Fn.prototype;h.logger=R("ydn.db.con.SimpleStorage");h.ee=function(){return this.h};
h.connect=function(a,b){function c(a,b){setTimeout(function(){b?(P(d.logger,d+" opening fail"),e.A(b)):(P(d.logger,d+" version "+d.ee()+" open"),e.w(a))},10)}var d=this,e=new F;this.j=this.n.ue(a);this.i=a;this.g=b;var f=Bm(this.i);this.h=NaN;var g=wh(this.j.getItem(f));t(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new Rl(g),Sl(this.g,g,!1,!1))if(!this.g.h&&!isNaN(g.version)&&this.g.version>g.version)c(NaN,new ik("existing version "+g.version+" is larger than "+this.g.version));else{var k=
this.g.version;this.h=t(k)?k:g.version+1;for(k=0;k<this.g.count();k++)var l=this.g.stores[k]||null;if(this.g instanceof Nk)for(k=0;k<g.count();k++)l=g.stores[k]||null,Ok(this.g,l);k=this.g.toJSON();k.version=this.h||NaN;this.j.setItem(f,S(k));c(g.version||NaN)}else{for(k=0;k<this.g.count();k++)l=this.g.stores[k]||null;this.h=g.version||NaN;c(this.h)}else g=b.toJSON(),this.h=1,g.version=this.h,this.j.setItem(f,S(g)),c(NaN);return e};h.fe=function(){return!!this.i};h.ge=function(){};h.ed=function(){};
h.Qd=function(){};h.Dc=function(){return"memory"};h.de=function(){};h.vd=function(a,b,c,d){a(new Ym(this,function(a,b){d(a,b)}))};h.toString=function(){return"SimpleStorage:"+this.Dc()+":"+(this.i+":"+this.h)};function Gn(){Fn.call(this,this)}E(Gn,Fn);Gn.prototype.ue=function(){return window.localStorage};Gn.prototype.Dc=function(){return"localstorage"};fk.push(function(a,b){if(!b||"localstorage"==b){var c=new Gn,d=new Nk;c.connect(a,d);c.fb(function(a){for(var b=0;b<a.stores.length;b++)zm(c,a.stores[b].getName()).clear()})}});function Hn(){Fn.call(this,this)}E(Hn,Fn);Hn.prototype.ue=function(){return window.sessionStorage};Hn.prototype.Dc=function(){return"sessionstorage"};
fk.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Hn,d=new Nk;c.connect(a,d);c.fb(function(a){for(var b=0;b<a.stores.length;b++)zm(c,a.stores[b].getName()).clear()})}});function In(a){this.g=t(a)?a:4194304}h=In.prototype;
h.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.h?isNaN(f)?1:f+1:c.version;bf(e.logger,a+": changing version from "+b.version+" to "+g);var k=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.fb(function(b){k=!0;for(var d=0;d<c.count();d++){var f=Z(b,(c.stores[d]||null).getName()),f=f?Il(f,c.stores[d]||null):null;Jn(e,a,c.stores[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,Rk(c,f.getName())||(c instanceof Nk?Ok(c,f):(f="DROP TABLE "+
Fl(f),P(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){e.logger.log(Re,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a,void 0);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");Q(e.logger,a+":"+b.version+" ready"+f);d(b)}else N(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.Ga=null,g.A(b)):(e.Ga=a,g.w(parseFloat(f)))}var e=this,f=NaN,g=new F,
k=null;try{k=r.openDatabase(a,"",a,this.g)}catch(l){if("SECURITY_ERR"==l.name)N(this.logger,"SECURITY_ERR for opening "+a),k=null,this.vf=new nk(l);else throw l;}if(k){var f=k.version,m="database "+a+(0==k.version.length?"":" version "+k.version);null!=b.version&&b.version==k.version?(bf(e.logger,"Existing "+m+" opened as requested."),d(k)):this.fb(function(a){(a=Sl(b,a,!0,!1))?(0==k.version.length?bf(e.logger,"New "+m+" created."):b.h?bf(e.logger,"Existing "+m+" opened and schema change for "+a):
bf(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(bf(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.vf);return g};h.Dc=function(){return"websql"};h.vf=null;h.Ga=null;h.logger=R("ydn.db.con.WebSql");h.ge=function(){};h.ed=function(){};
function Kn(a){var b=a.F,c="CREATE TABLE IF NOT EXISTS "+Fl(a)+" (",d=a.j,c=c+(d+" "+b+" PRIMARY KEY ");a.h&&(c+=" AUTOINCREMENT ");if(!a.kc||!a.keyPath&&0==a.indexes.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,k=a.indexes.length;g<k;g++){var l=a.index(g),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Ia(m)+" ("+d+" "+b+", "+l.i+" "+l.p+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=l.type&&x(n)&&
(n="CREATE "+m+" INDEX IF NOT EXISTS "+Ia(a.getName()+"-"+l.getName())+" ON "+Fl(a)+" ("+l.i+")",e.push(n)),n=l.i,-1==f.indexOf(n)&&(c+=", "+n+" "+l.p+m,f.push(n))}e.unshift(c+")");return e}h.ee=function(){return this.Ga?parseFloat(this.Ga.version):void 0};
h.fb=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q=nc(e,"sql");Q(f.logger,"Parsing table schema from SQL: "+q);for(var s=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),v=void 0,z,q=[],D=!1,G=!1,J=0;J<s.length;J++){var O=s[J].match(/\w+|"[^"]+"/g),ha=Qa(O,function(a){return a.toUpperCase()}),I=Fa(O[0],'"'),
O=ul(ha[1]);if(-1!=ha.indexOf("PRIMARY")&&-1!=ha.indexOf("KEY")){z=O;if(x(I)&&!ta(I)&&"_ROWID_"!=I){var oc=I.split(","),v=I;1<oc.length&&(v=oc,z=void 0)}-1!=ha.indexOf("AUTOINCREMENT")&&(D=!0)}else if("_ROWID_"!=I)if("_default_"==I)G=!0;else{var wi="UNIQUE"==ha[2];ra(I,e.tbl_name+"-")&&(I=I.substr(e.tbl_name.length+1));ha=new tl(I,O,wi);q.push(ha)}}if(ra(e.name,"ydn.db.me:")){var Xc=e.name.split(":");if(3<=Xc.length){var Kd=Xc[1],v=new tl(Xc[2],O,wi,!0),s=Ua(q,function(a){return a.getName()==Xc[2]});
0<=s?q[s]=v:q.push(v);s=Ua(k,function(a){return a.getName()===Kd});0<=s?(J=k[s],k[s]=new Kk(J.getName(),J.keyPath,D,z,q,void 0,!G)):k.push(new Kk(Kd,void 0,!1,void 0,[v]));Q(f.logger,'multi entry index "'+v.getName()+'" found in '+Kd+(-1==s?"*":""))}else N(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else J=Ua(k,function(a){return a.getName()===e.name}),0<=J?(s=k[J].index(0),q.push(s),k[J]=new Kk(e.name,v,D,z,q,void 0,!G)):(q=new Kk(e.name,v,D,z,q,void 0,!G),k.push(q))}}d=new Rl(g,k);a(d)}}
var f=this,g=(c=c||this.Ga)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.fb(a,b,c)},function(a){f.logger.log(Re,"opening tx: "+a.message,void 0);throw a;},e)};
function Jn(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==k.length&&(d(!0),d=null)},function(b,e){g++;g==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new mk(e,f);})}var g=0,k=Kn(c),l="Create";if(e){e=Mk(c,e);if(0==e.length){Q(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";N(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Ia(c.getName()))}Q(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}h.fe=function(){return!!this.Ga};h.de=function(){this.Ga=null};
h.vd=function(a,b,c,d){function e(a){Q(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var k=this;null===this.Ga&&(a(null),d("abort",this.vf));c==Hj?this.Ga.readTransaction(g,e,f):c==Jj?this.Ga.changeVersion(this.Ga.version,this.Ga.version+1+"",g,e,f):this.Ga.transaction(g,e,f)};
fk.push(function(a,b){if(ga(r.openDatabase)&&(!b||"websql"==b)){var c=new In,d=new Nk;P(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){c.logger.info("all tables in "+a+" deleted.")};d.B(function(){c.vd(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,Q(c.logger,"deleting table: "+p.name),
b.executeSql("DROP TABLE "+p.name))}P(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],Ij,e)});d.Fc(function(){N(c.logger,"Connecting "+a+" failed.")})}});In.prototype.Qd=function(){};In.prototype.toString=function(){return"WebSql:"+(this.Ga?":"+this.Ga.version:"")};hm.prototype.ve=function(a){return"indexeddb"==a&&Kj?new Dn(this.F,this.P):"websql"==a&&ga(r.openDatabase)?new In(this.F):"localstorage"==a&&window.localStorage?new Gn:"sessionstorage"==a&&window.sessionStorage?new Hn:"memory"==a?new Fn:null};function Ln(a,b){vb.call(this);this.j=b;this.g=[];if(a>this.j)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.g.push(this.h())}E(Ln,vb);Ln.prototype.Td=function(a){this.g.length<this.j?this.g.push(a):this.i(a)};Ln.prototype.h=function(){return{}};Ln.prototype.i=function(a){if(A(a))if(ga(a.qa))a.qa();else for(var b in a)delete a[b]};Ln.prototype.H=function(){Ln.m.H.call(this);for(var a=this.g;a.length;)this.i(a.pop());delete this.g};function Mn(){this.g=[];this.i=new nd;this.j=new nd;this.n=1;this.l=new Ln(0,4E3);this.l.h=function(){return new Nn};this.p=new Ln(0,50);this.p.h=function(){return new On};var a=this;this.h=new Ln(0,2E3);this.h.h=function(){return String(a.n++)};this.h.i=function(){}}R("goog.debug.Trace");function On(){this.time=this.count=0}On.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Nn(){}
function Pn(a,b,c){var d=[];-1==b?d.push("    "):d.push(Qn(a.h-b));d.push(" ",Rn(a.h-0));0==a.g?d.push(" Start        "):1==a.g?(d.push(" Done "),d.push(Qn(a.l-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.j&&d.push("[VarAlloc ",a.j,"] ");return d.join("")}Nn.prototype.toString=function(){return null==this.type?this.i:"["+this.type+"] "+this.i};
Mn.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.g.length;d++){var e=this.g[d];1==e.g&&c.pop();a.push(" ",Pn(e,b,c.join("")));b=e.h;a.push("\n");0==e.g&&c.push("|  ")}if(0!=this.i.fa()){var f=C();a.push(" Unstopped timers:\n");ld(this.i,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Rn(b.startTime),")\n")})}b=this.j.La();for(d=0;d<b.length;d++)c=this.j.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function Qn(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Rn(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Mn;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Sn(a){a.p||(a.p=new L);return a.p}hm.prototype.removeEventListener=function(a,b,c,d){Ic(Sn(this),a,b,c,d)};hm.prototype.Ra=function(a){Sn(this).dispatchEvent(a)};function Tn(a,b,c){jm.call(this,a,b,c)}E(Tn,Cn);R("ydn.gdata.base");function Un(a){this.i=a||null;this.g=this.h=null;a&&Vn(this,a)}Un.prototype.logger=R("ydn.crm.UserSetting");
var Wn={stores:[{name:"general"},{name:"sugar"}]},Xn={stores:[{name:"contact",keyPath:"id.$t",type:"TEXT",indexes:[{name:"updated.$t",type:"TEXT"},{name:"ydn$emails",multiEntry:!0,generator:function(a){var b=[];a=u(a.gd$email)?a.gd$email:A(a.gd$email)?[a.gd$email]:[];for(var c=0;c<a.length;c++){var d=kn(a[c].address);d&&b.push(d)}return b}},{name:"ydn$externalIds",multiEntry:!0,generator:function(a){return(u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:
[]).map(function(a){return a.value})}}]}]};function Vn(a,b){if(!a.i||a.i!=b){r.sessionStorage.setItem("last-user-id",b);var c=b+"-setting",d=b+"-gdata";a.h&&a.h.getName()!=c&&(bm(a.h),a.h=null);a.g&&a.g.getName()!=d&&(bm(a.g),a.g=null);a.h||(a.h=new Tn(c,Wn));a.g||(a.g=new Tn(d,Xn))}}function Yn(a){return a.i?a.i+"-sd":r.sessionStorage.getItem("last-user-id")+"-sd"}function Zn(a){var b=Yn(a),c=new F;chrome.storage.local.get(b,function(a){c.w(a[b])});return c}
function $n(a,b){var c=Yn(a),d=new F,e={};e[c]=b;chrome.storage.local.set(e,function(){d.w(!0)})};function ao(){var a=new F;chrome.storage.sync.get("user-setting",function(b){a.w(b["user-setting"])});return a};function bo(){}bo.prototype.logger=R("ydn.crm.Client");function co(a,b,c){this.client=a;this.g=b;this.h=c}co.prototype.request=function(a){a=this.g.call(this.h,a);return this.client.request(a)};function eo(a,b,c){this.h=a;this.i=b;this.g=c}eo.prototype.request=function(a){return this.h(a)?this.i.request(a):this.g.request(a)};function fo(a,b){this.client=a;this.h=b;this.Wc=NaN;this.i=[];this.g=!1}fo.prototype.request=function(a){return new go(a,this)};function go(a,b){a.path=b.h+a.path;this.req=b.client.request(a);this.parent=b;this.i=null;this.h=void 0}E(go,cj);
go.prototype.execute=function(a,b){if(this.parent.g)this.i=a,this.h=b,this.parent.i.push(this);else{this.parent.g=!0;var c=function(c,d){var g=Zi(d,"retry-after");g?(this.parent.Wc=/[^0-9|\.]/.test(g)?(new Date(g)).getTime():1E3*parseFloat(g)+C(),r.console.info("Next retry "+this.parent.Wc+", now "+C())):this.parent.Wc=NaN;a&&a.call(b,c,d);this.parent.g=!1;if(g=this.parent.i.pop())g.execute(g.i,g.h),g.i=null,g.h=null},d=this.parent.Wc-C();0<d?(r.console.info("Proxy will call after "+d+" ms"),mf(function(){this.parent.Wc=
NaN;this.req.execute(c,this)},d,this)):this.req.execute(c,this)}};function ho(a,b,c,d,e){this.l=t(a)?a:Vi();this.g=b;this.h=c;this.i=d||0;this.j=!!e}ho.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new cj(a,this.l,this.i,this.j)};function jo(a,b,c){this.i=t(a)?a:Vi();this.g=b;this.h=c}jo.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new cj(a,this.i)};function ko(a){for(var b=Zl(a),c=0;c<b.stores.length;c++);this.g=a;this.g.jb(this.s,this);this.h=1E4;this.j=Xe.value;this.i=0;this.p=B(this.I,this);this.n=!1;this.l={}}function lo(a){if(a.h&&a.i>=a.h){var b=a.h/100;100<b&&(b=100);a.g.keys("db-logger",null,b).B(function(a){a=a.map(function(a){return new qk("db-logger",a)});this.g.remove("db-logger",a).B(function(){this.g.count("db-logger").B(function(a){this.i=a},this)},this)},a)}}function mo(){var a=no;a.h=1E4;lo(a)}
ko.prototype.s=function(){this.h&&this.g.count("db-logger").B(function(a){this.i=a;lo(this)},this)};function oo(a){var b=no;if(a!=b.n){var c=ff();a?$e(c,b.p):(c=c.g)&&Xa(c,b.p);b.n=a}}ko.prototype.I=function(a){if(!this.l[a.h]){var b=a.j;!b||b.value<=this.j||(a={exception:a.g,level:b.value,logger:a.h,name:b.name,time:a.l,message:a.getMessage(),seq:a.n},this.g.put("db-logger",a),this.i++,lo(this))}};
function po(a,b){var c=no,d=a||100,e=b||0,f=lj(["INFO"]);return c.g.values("db-logger","name, time",f,d,e,!0)}var no=null;var qo,ro,so,to,uo=R("ydn.crm");function vo(){qo||(qo=new $f(0));return qo}var wo=null;function xo(a,b){b&&"local"!=b||(t(a["logging-captureConsole"])&&ji(!!a["logging-captureConsole"]),t(a["logging-bugReport"])&&oo(!!a["logging-bugReport"]))}
function yo(){r.console.log("ydn.crm version 0.7.3 (dev)");r.console.log("API documentation: http://dev.yathit.com/\nFeedback and suggestion: https://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");Li("ydn.crm","finer");Li("ydn.ds","finer");wo=new Tn("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,indexes:[{name:"level"},{name:"time"},{name:"name"},{name:"name, time",keyPath:["name","time"]}]}]});no=new ko(wo);mo();no.j=
300;no.l["ydn.db.tr.DbOperator"]=!0;oo(!0);uo.info("Starting ydn.crm.App:0.7.3");chrome.storage.local.get(["logging-captureConsole","logging-bugReport"],xo);chrome.storage.onChanged.addListener(xo);var a=C();bj=Mi=new zo(wo,function(b){if(!b||b.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==b.HttpRequestData.path)return null;b.uptime=a;return b})}function Ao(){ro||(ro=new jo(vo()),Ui(ro,"default"));return ro}
function Bo(a){var b=Ao();a=new ej(a,qo,!1);Ui(a,"gc");var c=new co(a,function(a){a.path="https://yathit-app.appspot.com/proxy/"+a.path;return a});Ui(new fo(b,"https://yathit-app.appspot.com/proxy/"),"proxy");Ui(new eo(function(a){return"GET"==a.method},a,c),"gse")}function Co(){to||(to=new ho(vo(),void 0,"https://yathit-app.appspot.com/a/cm",1,!0),Ui(to,"auth"));return to};function Do(a,b){this.j=b||C();this.type=a;this.i=this.g=this.h=void 0}function Eo(a,b){A(b)?a.h=Ul(b):a.h=b}Do.prototype.toJSON=function(){return{type:this.type,timestamp:this.j,newValue:this.g,oldValue:this.h,meta:this.i}};function Fo(a){this.g=a}Fo.prototype.add=function(a){this.g.add("history",a.toJSON())};function Go(a,b){if(a.link){if(u(a.link)){for(var c=0;c<a.link.length;c++)if(a.link[c].rel==b)return a.link[c];return null}return a.link.rel==b?a.link:null}return null};function Ho(a,b){this.entry=a;this.data=b;this.g=!1}Ho.prototype.data=null;Ho.prototype.preventDefault=function(){this.g=!0};function Io(a,b,c,d){K.call(this,a,b);this.status=c;this.entry=d}E(Io,K);Io.prototype.status=NaN;Io.prototype.N=function(){return this.status};Io.prototype.tb=function(){return this.entry.tb()};function Jo(a,b,c){Io.call(this,"conflict",a,b,c.entry)}E(Jo,Io);function Ko(a,b){this.g=a;if(b)throw new Oc("optional key paths");}var Lo={Nh:"key",Kh:"date",Oh:"modified",Mh:"expires",Lh:"etag",Ph:"updated",Qh:"uri",NEXT:"next"};Ko.prototype.T=function(a,b){return b&&this.g[a]?tj(b,this.g[a]):void 0};function Mo(a,b,c,d){a.g[b]&&uj(c,a.g[b],d)};function No(a,b,c,d){this.key=a;this.h=(this.h=d?b[d]:b)||{};this.g=c}function Oo(a){return null!=a.key?a.key:a.g.T("key",a.h)}No.prototype.getDate=function(){return this.g.T("date",this.h)};function Po(a){return a.g.T("updated",a.h)}function Qo(a){return a.g.T("etag",a.h)}function Ro(a){var b={},c=Qo(a);c&&1<c.length?b["if-none-match"]=c:(a=Po(a))&&(b["if-modified-since"]=a);return b}
No.prototype.toJSON=function(){var a={};Mo(this.g,"key",a,Oo(this));var b=this.getDate();b&&Mo(this.g,"date",a,b);(b=this.g.T("expires",this.h))&&Mo(this.g,"expires",a,b);(b=Po(this))&&Mo(this.g,"updated",a,b);(b=Qo(this))&&Mo(this.g,"etag",a,b);return a};function So(a,b,c){b.expires&&Mo(c,"expires",b,(new Date(b.expires)).getTime());b["last-updated"]&&Mo(c,"updated",b,(new Date(b["last-updated"])).getTime());b.etag&&Mo(c,"etag",b,(new Date(b.etag)).getTime());Mo(c,"date",b,NaN);No.call(this,a,b,c)}E(So,No);function To(a,b,c){this.g=a;this.n=c||null;this.i=this.h=null;this.key=b}h=To.prototype;h.logger=R("ydn.db.sync.entry.Rest");h.tb=function(){if(this.i&&this.g.s&&this.j){var a=this.g.I;this.g.V||delete this.i[a]}return this.i||null};h.T=function(){return this.n};h.D=function(){return this.key};h.he=function(){return this.g.bf(this.D())};function Uo(a,b){var c=a.D();return new So(c,b.Mc(),a.g.p)}
h.Ee=function(a,b){if(a)return a;if(b.Ca())return $i(b);try{return $i(b)}catch(c){var d=Yi(b);return A(d)?d:{body:d}}};h.save=function(a){var b=this.D();if(a&&!this.g.s)return C(),Vo(this.g,[this.j.toJSON()]);var c=this.i;if(a&&!c)return sb();a=void 0;null!=this.j&&(C(),a=[this.j.toJSON()]);return Wo(this.g,[c],a,[b])};
h.hc=function(a,b){if(this.g.L&&A(this.h))a.call(b,304),a=null;else{var c=this;Xo(this,function(d){if(d){var e=d.g.T("expires",d.h);if(e&&e>C()){Q(this.logger,this+" not expired");a.call(b,304);a=null;return}}e=c.he();d=c.ec(e,"GET",d);this.g.ta().request(d).execute(function(d,e){c.j=Uo(c,e);c.i=c.Ee(d,e);a.call(b,e.N());a=null})},this)}};
h.ec=function(a,b,c,d){a=new $h(a,b);if(c){var e;"POST"==a.method||"PUT"==a.method||"DELETE"==a.method?(e={},(b=Po(c))&&(e["if-unmodified-since"]=b),(c=Qo(c))&&1<c.length&&(e["if-match"]=c),c=e):c=Ro(c);e=c;a.headers?sc(a.headers,e):a.headers=e}a.body=A(d)?JSON.stringify(d):d;Q(this.logger,this+" "+a.method+" "+a.path+" "+xh(e));return a};
function Yo(a,b,c){Xo(a,function(a){var e=this.T();a=this.ec(this.he(),"PUT",a,e);this.g.ta().request(a).execute(function(a,d){this.j=Uo(this,d);this.i=a;b&&(b.call(c,d.N()),b=null)},this)},a)}function Xo(a,b,c){a.l?b.call(c,a.l):Zo(a.g,a.D(),function(d){a.l=d;b.call(c,d)})}
h.load=function(a,b){if(this.h&&this.l)a&&(a.call(b,this.h,this.l),a=void 0);else{var c=this.D();this.g.load(c,function(c,e){this.h=c;var f=this.g.I;this.h&&f&&this.h[f]&&(this.l=new No(this.key,this.h,this.g.p,f),this.g.V||delete this.h[f]);this.h=c;this.l=e;a&&(a.call(b,c),a=void 0)},this)}};function $o(a,b){var c=a.he(),d=a.g.ta();Xo(a,function(a){a=this.ec(c,"DELETE",a);d.request(a).execute(function(a,d){Q(this.logger,"deleted "+c+" "+d.N());b.call(this,d.N())},this)},a)}
h.toString=function(){return"sync.entry{"+this.g.G()+":"+this.key+"}"};function ap(a,b,c){this.storage=a;this.i=b;this.O=b.getName();a="format readRequestTimeout writeRequestTimeout transport Options fetchStrategies baseUri immutable keepMeta metaStoreName metaDataName prefetch prefetchRefractoryPeriod".split(" ");for(var d in c)if(-1==Na(a,d))throw new M('Unknown Sync attribute "'+d+'"  in Sync.');this.L=!!c.immutable;this.h=c.baseUri;this.yb=c.metaStoreName||this.O;this.I=c.metaDataName;this.s=this.yb==this.O;a=c.Options||{};if(!this.yb)throw new M("metadata store name required.");
b=this.rb();for(d in a)if(-1==Na(b,d))throw new M('Unknown Sync.Options attribute "'+d+'" in Sync.Options');this.xa=a.delimiter||"";this.l=a.prefix||"";this.V=!!c.keepMeta;this.P=c.prefetch||y(c.prefetchRefractoryPeriod)?"full":null;this.na=y(c.prefetchRefractoryPeriod)?c.prefetchRefractoryPeriod:5E3;this.g=bp(c.transport);this.p=new Ko(this.qb(),c.metaData);this.n=null;this.F=NaN}h=ap.prototype;h.qb=function(){var a={},b;for(b in Lo)a[b]=b;return a};h.rb=function(){return[]};h.G=function(){return this.O};
h.logger=R("ydn.db.sync.Rest");h.Cb=function(){return this.h};h.ta=function(){this.g||(this.g=new jo);return this.g};h.toString=function(){return"sync:"+this.O};function Vo(a,b){return gl(a.storage.g,a.yb,b).Fc(function(a){throw a;})}function cp(a,b,c){a.i.keyPath&&null==Yk(a.i,b)&&null!=c&&uj(b,a.i.keyPath,c)}
function Wo(a,b,c,d){d=a.i.keyPath?void 0:d;if(c){if(a.s){for(g=0;g<b.length;g++)null!=c[g]&&sc(b[g],c[g]);return gl(a.storage.g,a.O,b,d)}if(b){for(var e=[],f=b.concat(c),g=0;g<b.length;g++){var k=a.i.keyPath?NaN:d[g];e.push(new qk(a.O,k))}for(g=0;g<c.length;g++)e.push(new qk(a.yb,NaN));return gl(a.storage.g,e,f)}return gl(a.storage.g,a.yb,c)}for(g=0;g<b.length;g++)k=d?d[g]:void 0,cp(a,b[g],k);return gl(a.storage.g,a.O,b,d)}
function dp(a,b){var c=[new qk(a.O,b)];a.s||c.push(new qk(a.yb,b));return hl(a.storage.g,c)}h.bf=function(a){return this.Cb()+a};h.add=function(a,b,c){null!=c?cp(this,b,c):this.i.keyPath&&(c=Yk(this.i,b));var d=this.wa(c,b),e=this;Yo(d,function(a){201==a||200==a?(Q(e.logger,d+" created"),d.save(!0)):N(e.logger,"Unexpected respond "+a+" for add "+d)})};
function Zo(a,b,c){var d=new qk(a.yb,b);ep(a,[d]).u(function(a){c.call(void 0,new No(b,a[0],this.p,this.I))},function(a){N(this.logger,this+" error loading meta data "+a);c.call(void 0,null)},a)}h.Nd=function(a,b){var c=a.map(function(a){return new qk(this.yb,a)});ep(this,c).u(function(c){for(var e=[],f=0;f<a.length;f++)e[f]=new No(a[f],c[f],this.p,this.I);b(e)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)};
h.load=function(a,b,c){var d=this.yb,e=[new qk(this.G(),a)];this.s||e.push(new qk(d,a));ep(this,e).u(function(d){var e=d[0];b.call(c,e,new No(a,this.s?e:d[1],this.p,this.I))},function(a){N(this.logger,this+" error loading meta data "+a);b.call(c,null,null)},this)};function ep(a,b){return kl(a.storage.g,b)}
h.get=function(a,b){this.F||this.Xb();dk(a,function(c,d,e){if(d)e(c,d);else{Tc(a,c);var f=t(c);if(f&&this.L)e(c);else{var g=this.wa(b,c);g.hc(function(a){if(304==a){if(e(c),!f)throw new Rc(g+" not modified, but not exist in server");}else if(200==a)g.save().da(function(){e(g.tb())});else if(404==a)dp(g.g,g.D()).da(function(){e(g.tb())});else throw e(g.tb()),new Qc("Invalid HTTP respond "+a+" for GET "+b);},this)}}},this)};
function fp(a,b,c,d,e,f){var g=[],k=a.logger;P(a.logger,d.length+", "+e.length+", "+f.length+", "+g.length+" records to fetch, update, delete, save");var l=d.length+e.length+f.length+g.length;if(0==l)b(c);else{for(var m=!1,n=function(){l--;0==l&&(b(c,m),b=null)},g=0;g<d.length;g++){var p=a.wa(d[g]);p.index=g;p.hc(function(a){200==a?(Q(k,"A new "+this+" received from server"),this.save().u(function(){c[this.index]=this.tb();n()},function(){m=!0;n()},this)):304==a?this.save(!0).u(function(){Q(k,this+
" expires date updated");n()},function(){m=!0;n()},this):(N(k,"Invalid status "+a+" for fetching "+this),n())},p)}for(g=0;g<e.length;g++)p=a.wa(e[g]),p.index=g,p.load(function(){this.hc(function(a){200==a?(Q(k,this+" updated from server"),this.save().u(function(){c[this.index]=this.tb();n()},function(){m=!0;n()},this)):(N(k,"Invalid status "+a+" for fetching "+this),n())})});for(g=0;g<f.length;g++)p=a.wa(f[g]),p.index=g,dp(p.g,p.D()).u(function(){c[this.index]=new Ho(p,null);n()},function(){m=!0;
n()},p)}}function gp(a,b,c){dk(b,function(a,e,f){if(e)f(a,e);else if(Sa(a,function(a){return t(a)})&&this.L)f(a);else{Tc(b,a);var g=a.length;for(e=0;e<c.length;e++)if(this.L&&t(a[e]))g--,0==g&&f(a);else{var k=this.wa(c[e],a[e]);k.index=e;k.hc(function(b){200==b?(a[this.index]=this.tb(),this.save()):404==b&&(a[this.index]=void 0);g--;0==g&&f(a)},k)}}},a)}h.wa=function(a,b){return new To(this,a,b)};h.count=function(a){return a};h.hf=function(){throw new Oc;};
h.values=function(a,b,c){hp(this)?(Q(this.logger,"prefetch queued"),dk(a,function(d,e,f){Tc(a,d);e?f(d,e):ip(this,function(a){a?jl(this.storage.g,this.O,null,null,!1,b,c).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(){N(this.logger,this+" prefetch fail");f(d)},this)},this)):this.hf(a,b,c)};
h.keys=function(a,b,c,d,e,f,g){dk(a,function(k,l,m){Tc(a,k);l?m(k,l):ip(this,function(a){a?ll(this.storage.g,this.O,b,c,d,e,f,g).u(function(a){m(a)},function(a){m(a,!0)},this):m(k)},function(){N(this.logger,this+" prefetch fail");m(k)},this)},this)};h.Ce=function(){};
h.put=function(a,b,c){c=t(c)?c:this.i.keyPath?Yk(this.i,b):null;var d=this.wa(c,b);W(a,function(){d.load()},this);dk(a,function(c,f,g){Tc(a,c);Yo(d,function(c){409==c?d.hc(function(){var c=new Ho(d,b);Tc(a,c);c.g?g(null,f):g(void 0,f)}):200==c||201==c?(d.save(!0),g(b,f)):(N(this.logger,"Unexpected response for PUT: "+c),g(null,f))},this)},this)};
h.remove=function(a,b){var c=this,d=this.wa(b);d.load(function(){dk(a,function(e,f,g){$o(d,function(f){if(409==f){f=new Ho(d,null);Tc(a,f);var l=new Jo(c.storage,409,f);c.storage.Ra(l)}else 200==f?Q(c.logger,"Successfully deleted object "+b):(N(c.logger,"Unexpected response for DELETE: "+f+" "+b),Tc(a,l));g(e)})})})};
h.Xb=function(){Q(this.logger,this+" starting prefetch");var a=new F;jl(this.storage.g,this.O,"updated.$t",null,!0,1).u(function(b){var c={};if(b=b[0])b=lc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new $h(this.Cb(),"GET",c);d.ta().request(c).execute(function(b,c){if(200==c.N()){if(!b){var g=Yi(c);x(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?u(g)?g:[g]:[];0<g.length?Wo(d,g).da(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+
c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},function(b){a.A(b)},this);return a};function hp(a){return a.P?a.F?C()-a.F>a.na:!0:!1}function ip(a,b,c,d){hp(a)?a.n?a.n.u(b,c,d):(a.n=a.Xb(),a.F=C(),a.n.u(b,c,d),a.n.u(function(a){Q(this.logger,"prefetch "+(a?"updated":"no update"));this.n=null},function(a){this.n=null;throw a;},a)):b.call(d,!1)};function jp(a,b,c){ap.call(this,a,b,c)}E(jp,ap);jp.prototype.logger=R("ydn.db.sync.Atom");jp.prototype.rb=function(){return jp.m.rb.call(this)};jp.prototype.D=function(a){return a.key};function kp(a){this.data=a}h=kp.prototype;h.D=function(){return this.data.id.$t};h.cd=function(){return this.data.title?this.data.title.$t:void 0};h.ce=function(a){return Go(this.data,a)};h.Ch=function(){var a=this.ce("self");return a?a.href:void 0};h.Bh=function(){var a=this.ce("http://schemas.google.com/g/2005#batch");return a?a.href:""};h.ra=function(){return this.data.content||null};function lp(a,b,c){To.call(this,a,b,c)}E(lp,To);lp.prototype.logger=R("ydn.db.sync.entry.S3");lp.prototype.getName=function(){return this.g.l+this.key};lp.prototype.ec=function(a,b,c,d){b=lp.m.ec.call(this,a,b,c,d);if("PUT"==b.method||"POST"==b.method){c=Gd(new td(a)).substr(1);if(1>c.length)throw new Qc("invalid url "+a);b.headers.Key=c;a=b.headers["Content-Type"]||"application/json";d instanceof File?a=d.type:x(d)&&(a=/<*DOCTYPE html/i.test(d)?"text/html":"text/plain");b.headers.ContentType=a}return b};function mp(a){this.data=a}E(mp,kp);var np={atom:"http://www.w3.org/2005/Atom",ydn:"http://www.yathit.com/2012/ydn",app:"http://www.w3.org/2007/app",openSearch:"http://a9.com/-/spec/opensearch/1.1/",gAcl:"http://schemas.google.com/acl/2007",sites:"http://schemas.google.com/sites/2008",gs:"http://schemas.google.com/spreadsheets/2006",dc:"http://purl.org/dc/terms",batch:"http://schemas.google.com/gdata/batch",gd:"http://schemas.google.com/g/2005",gContact:"http://schemas.google.com/contact/2008",thr:"http://purl.org/syndication/thread/1.0",
xhtml:"http://www.w3.org/1999/xhtml"};function op(a,b){for(var c=a.indexOf(" "),d=0;d<b.length;d++){var e=b[d],e=(0==d?"xmlns":"xmlns:"+e)+'="'+np[e]+'"';-1==a.indexOf(e)&&(a=a.substring(0,c+1)+e+" "+a.substr(c+1))}return a}R("ydn.xml");function pp(a){return np[a]||np.xhtml};function qp(a,b,c){c=!!c;if(a.getName()!=b.getName())return!1;var d=rp(a),e=rp(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;for(d=0;d<e.length;d++)if(a.getAttribute(e[d])!=b.getAttribute(e[d]))return!1;d=sp(a);e=sp(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;if(0==d.length||0==d.length)return a.data.$t===b.data.$t;for(d=0;d<e.length;d++){var f=tp(a,e[d]),g=tp(b,e[d]);if(!c&&f.length!=g.length||c&&g.length>f.length)return!1;for(var k=0;k<g.length;k++)if(-1==Ua(f,function(a){return qp(a,
g[k],c)}))return!1}return!0};function up(a,b,c){if(t(b))vp(this,b),t(c)||(c=a[b]);else for(var d in a)if(a.hasOwnProperty(d)&&A(a[d])&&x(a[d].xmlns)){this.fd=[d].xmlns;vp(this,d);c=a[d];break}this.data=c;this.parent=a}h=up.prototype;h.fd="http://www.w3.org/2005/Atom";function vp(a,b){var c=b.split(":");1<c.length&&(a.fd=pp(c[0])||up.prototype.fd,b=c[1]);a.tagName=b}
h.o=function(a,b){var c;c=a;var d=b,e=c;if(t(d))"atom"!=d&&(e=d+"$"+c);else{var f=c.split(":"),e=c.replace(/:/,"$");2==f.length&&(d=f[0],c=f[1])}d=t(d)?pp(d):void 0;c=t(this.data[c])&&t(d)&&this.data[c].xmlns==d?c:e;return u(this.data[c])?new up(this.data,c,this.data[c][0]):A(this.data[c])?new up(this.data,c,this.data[c]):null};h.toString=function(){return"JsonElement:"+this.tagName};h.getName=function(){return this.tagName};
function wp(a,b){for(var c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&delete a.data[c];a.data.$t=b}h.getAttribute=function(a){a=a.replace(/:/,"$");return this.data[a]};h.setAttribute=function(a,b){a=a.replace(/:/,"$");this.data[a]=b};h.removeAttribute=function(a){a=a.replace(/:/,"$");delete this.data[a]};function rp(a){var b=[],c;for(c in a.data)a.data.hasOwnProperty(c)&&x(a.data[c])&&"$t"!=c&&b.push(c);return b}
function tp(a,b){t(void 0)?b="undefined$"+b:t(b)&&(b=b.replace(/:/,"$"));var c=[];if(t(b)){var d=a.data[b];if(u(d))for(var e=0;e<d.length;e++)c.push(new up(a.data,b,d[e]));else A(d)&&c.push(new up(a.data,b,d))}else for(d in a.data)if(u(a.data[d]))for(e=0;e<a.data[d].length;e++)c.push(new up(a.data,d,a.data[d][e]));else A(a.data[d])&&c.push(new up(a.data,d,a.data[d]));return c}function sp(a){var b=[],c;for(c in a.data)A(a.data[c])&&b.push(c.replace("$",":"));return b}
h.appendChild=function(a){var b=a.getName();this.data[b]?(u(this.data[b])||(this.data[b]=[this.data[b]]),this.data[b].push(Ul(a.data))):this.data[b]=Ul(a.data)};
h.update=function(a,b,c,d,e){var f=!1;c=c||{};var g=t(b),k=!0===b||!g,l=!1===b,m=rp(this),n=rp(a);if(!g)for(var p=0;p<m.length;p++)t(e)&&!e[m[p].replace("$",":")]||Va(n,m[p])||(this.removeAttribute(m[p]),f=!0);for(p=0;p<n.length;p++){var q=a.getAttribute(n[p]);if(!t(e)||e[n[p].replace("$",":")])Va(m,n[p])?l||q==this.getAttribute(n[p])||(this.setAttribute(n[p],q),f=!0):(this.setAttribute(n[p],q),f=!0)}if(0==xp(a)&&k&&(e=this.data.$t,l=a.data.$t,t(l)&&e!=l))return wp(this,l),!0;if(!g)for(var s in this.data)d&&
!d[s.replace("$",":")]||!A(this.data[s])||A(a.data[s])||(delete this.data[s],f=!0);s=sp(a);for(e=0;e<s.length;e++)if(l=s[e],!d||!0==d[l]){var v=tp(a,l),m=tp(this,l),z=l.replace(":","$");if(1==v.length)0==m.length?(this.data[z]=Ul(v[0].data),f=!0):1==m.length?c[l]?k&&!qp(m[0],v[0],!0)&&(u(this.data[z])||(this.data[z]=[this.data[z]]),this.data[z].push(Ul(v[0].data)),f=!0):f=m[0].update(v[0],b)||f:g?(l=Ua(m,function(a){return qp(a,v[0],!0)}),-1==l&&k&&(this.data[z].push(Ul(v[0].data)),f=!0)):(this.data[z]=
Ul(v[0].data),f=!0);else if(!u(this.data[z]))if(k)this.data[z]=Ul(a.data[z]),f=!0;else{if(g){var m=Ul(a.data[z]),D=this,l=Ua(m,function(a){return Bl(D.data[z],a)});-1==l&&(m.push(this.data[z]),this.data[z]=m,f=!0)}}else if(k)for(m.length>v.length&&(this.data[z].splice(v.length,m.length-v.length),f=!0),p=0;p<v.length;p++)t(m[p])?Bl(m[p].data,v[p].data)||(this.data[z][p]=Ul(v[p].data),f=!0):(this.data[z][p]=Ul(v[p].data),f=!0);else if(g)for(p=0;p<a.data[z].length;p++)l=Ua(this.data[z],function(b){return Bl(a.data[z][p],
b)}),-1==l&&(this.data[z].push(Ul(a.data[z][p])),f=!0)}return f};h.jf=function(a,b,c,d,e){t(b)||(b=!1);return this.update(a,b,c,d,e)};h.toJSON=function(){return{data:this.data,tagName:this.tagName}};
function yp(a){function b(a,g){d(g,a);var k,l;for(l in a)if(a.hasOwnProperty(l)&&!x(a[l]))if(x(a[l].$t)&&"xhtml"==a[l].type){k=c(l);d(k,a[l]);var m=Ah(a[l].$t);e.importNode(m.documentElement,!0);k.appendChild(m.documentElement);g.appendChild(k)}else if(x(a[l].$t))k=c(l),k.textContent=a[l].$t,d(k,a[l]),g.appendChild(k);else if(u(a[l])&&a[l][0]&&x(a[l][0].$t))for(m=0;m<a[l].length;m++)k=c(l),k.textContent=a[l][m].$t,d(k,a[l][m]),g.appendChild(k);else if(u(a[l]))for(m=0;m<a[l].length;m++)k=c(l),g.appendChild(k),
b(a[l][m],k);else A(a[l])&&(k=c(l),g.appendChild(k),b(a[l],k))}function c(a){return e.createElement(a.replace("$",":"))}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&"$t"!=c&&x(b[c])&&a.setAttribute(c.replace("$",":"),b[c])}var e=yh(a.getName(),a.fd);b(a.data,e.documentElement);return Bh(e.documentElement)}
function xp(a){function b(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&(u(a[c])?b+=a[c].length:A(a[c])&&b++);return b}var c;t(void 0)?c="undefined$"+c:t(c)&&(c=c.replace(/:/,"$"));return t(c)?u(a.data[c])?a.data[c].length:A(a.data[c])?b(a.data[c]):0:b(a.data)}h.ea=function(a){var b={};if(t(a))for(var c in this.data){var d=c.replace("$",":");x(this.data[c])?b[c]=this.data[c]:!0==a[d]&&(b[c]=Ul(this.data[c]))}else b=Ul(this.data);return new up(null,this.tagName,b)};
function zp(a,b){var c=b.ownerDocument.createElementNS(a.fd,a.getName()),d;for(d in a.data)if(a.data.hasOwnProperty(d)){var e=d.replace("$",":");if(x(a.data[d]))"$t"==d?c.textContent=a.data[d]:(e=c.ownerDocument.createAttribute(e),e.nodeValue=a.data[d],c.setAttributeNode(e));else if(u(a.data[d]))for(var f=0;f<a.data[d].length;f++){var g=new up(a.data[d],e,a.data[d][f]);zp(g,c)}else A(a.data[d])&&(g=new up(a.data,e,a.data[d]),zp(g,c))}return b.appendChild(c)};function Ap(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.g))b=a.g.$t;else throw new Ch("id or batch:id required.");this.id=b;this.h=void 0;this.data=a}E(Ap,mp);h=Ap.prototype;h.logger=R("ydn.gdata.Entry");h.wf=function(){return this.kind};h.cd=kp.prototype.cd;h.D=function(){return this.id};h.mc=["link","category"];h.ag=["id","batch$id","link","category"];h.ra=kp.prototype.ra;
function Bp(a,b){if(b)a.data.status=""==b?void 0:b;else{var c=a.data;c.status&&(c.status=b)}}function Cp(a){return t(a.gd$deleted)?"gd:deleted":(a=a.status)?a:""}function Dp(a){return"gd:deleted"==Cp(a.data)}h.setTitle=function(){throw new Eh;};
h.nc=function(){if(!Ep(this.data))throw Error("nothing to commit");var a=new F;Fp(this,function(b,c){if(c.Ca())a.w(b);else{var d=Yi(c);if(x(d)&&/html/.test(Zi(c,"content-type")))try{var e=(new DOMParser).parseFromString(d,"text/html");e.body&&(d=e.body.innerHTML)}catch(f){}a.A(c.N()+" "+c.Ha()+" "+d)}},this);return a};
function Fp(a,b,c){var d=Yh("gse");if(Ep(a.data)){var e={"Content-Type":"application/atom+xml"};a.g&&(e["GData-Version"]=a.g);var f={},g="POST",k,l,m;m="full";t(l)||(l="base"!=m);var n=a.kind||"contact";k=k?"/"+k:"";k=(l?"https":"http")+"://www.google.com/m8/feeds/"+n+"s/"+a.user_id.replace("@","%40")+"/"+m+k;k=k.replace("%40","@");if(l=(l=a.ce("edit"))?l.href:void 0)g="delete"==Cp(a.data)?"DELETE":"PUT",k=l;try{var p=Gp(a)}catch(q){Ni({"class":"ydn.gdata.Entry",method:"ydn.gdata.Entry.commit","entry.data":a.data,
context:"toXmlString",error:{name:q.name,message:q.message,stack:q.stack}})}l=a.type;m=["atom","app","gd","batch","ydn"];if("sites"==l||"site"==l||"content"==l||"webpage"==l)m=m.concat("xhtml","sites");else if("m8"==l||"contact"==l)m=m.concat("gContact");p=op(p,m);Ap.g&&(a.h=[k,f,g,e,p]);d.request(new $h(k,g,f,e,p)).execute(b,c)}else P(a.logger,a+" commit ignore since not modified."),b&&b.call(c,null,null)}function Ep(a){if(null==a.id)return!0;a=Cp(a);return"modified"===a||"delete"===a}h.De=function(){return this.data};
function Gp(a){var b=new up(null,"entry",a.De()),c=!1;b.xmlns||(b.xmlns="http://www.w3.org/2005/Atom",c=!0);var d=["atom"],e;for(e in a.data)if(a=e.match(/^(\w+)\$\w+/))a=a[1],a in np&&(Va(d,a)||d.push(a));e=yp(b);c&&delete b.xmlns;return op(e,d)}h.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Va(b,c)&&!Va(this.ag,c)&&(this.data[c]=a.data[c])};h.kf=function(a,b){if(Bl(this.data[a],b))return!1;this.data[a]=Ul(b);return!0};
h.jf=function(a){if(a.data.updated.$t>=this.data.updated.$t&&Dp(a)){if(Dp(this)||"delete"==Cp(this.data))return!1;Bp(this,"delete");return!0}var b=!1,c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Va(this.ag,c)&&this.kf(c,a.data[c])&&(b=!0);b&&(a=Cp(this.data),"delete"==a?N(this.logger,this+" marked for deletion. Cannot mark modify flag."):"committed"==a?this.logger.log(Re,this+" already committed. All changes must wait until updated from the server.",void 0):Bp(this,"modified"));return b};function Hp(a,b,c){To.call(this,a,b,c)}E(Hp,To);Hp.prototype.he=function(){return this.key};Hp.prototype.ec=function(a,b,c,d){a=Hp.m.ec.call(this,a,b,c,d);this.g.rg(a.method)&&r.gapi&&r.gapi.auth&&(b=gapi.auth.getToken())&&b.access_token&&(a.headers.Authorization=b.token_type+" "+b.access_token);if("GET"==a.method)a.params.alt="json";else if("PUT"==a.method||"POST"==a.method)d=new Ap(d),a.body=Gp(d),a.headers["Content-Type"]="application/atom+xml";return a};
Hp.prototype.Ee=function(a,b){a=Hp.m.Ee.call(this,a,b);a.feed&&(a=a.feed);a.entry&&(a=a.entry);return a};function Ip(a,b,c){ap.call(this,a,b,c);a=c.Options;this.kind=a.kind;this.version=a.version;this.projection=a.projection;this.j=a.maxResults}E(Ip,jp);h=Ip.prototype;h.projection=null;h.version=null;h.logger=R("ydn.db.sync.GData");h.wa=function(a,b){return new Hp(this,a,b)};h.qb=function(){var a=Ip.m.qb.call(this);a.key=["id","$t"];a.etag="gd$etag";a.updated=["updated","$t"];return a};h.rb=function(){var a=Ip.m.rb.call(this);return a=a.concat(["version","projection","kind","maxResults"])};
h.Cb=function(){return"https://www.googleapis.com/"+this.kind+"/"};h.rg=function(){return!1};h.D=function(a){return a?a.id?a.id.$t:"":""};
function Jp(a,b,c){var d=c||a.Cb();c&&Q(a.logger,"continuing "+c);b=new $h(d,"GET",b);var e=new F;a.ta().request(b).execute(function(b,d){if(200==d.N()){if(!b){var k=Yi(d);x(k)&&(b=JSON.parse(k))}var k=b.feed||b,l=k.entry,l=l?u(l)?l:[l]:[];0<l.length&&Wo(a,l);for(var l=null,k=k.link,k=u(k)?k:[k],m=0;m<k.length;m++)"next"==k[m].rel&&(l=k[m].href);l?qb(Jp(a,{},l),e):(Q(a.logger,"prefetch "+a.O+" done"),e.w(!!c))}else 302==d.N()?e.w():(k=a+": Invalid response status "+d.N()+" on prefetching",N(a.logger,
k),e.A(Error(k)))});return e}h.Xb=function(){Q(this.logger,"starting prefetch");var a=new F;jl(this.storage.g,this.O,"updated.$t",null,!0,1).B(function(b){var c={alt:"json",kind:this.kind};this.j&&(c["max-results"]=this.j);(b=b[0])?(b=lc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b,Q(this.logger,this.O+" fetching entries later then "+b)):Q(this.logger,this.O+" fetching entries from beginning");qb(Jp(this,c),a)},this);return a};
h.count=function(a){var b=Mj(this.i,"updated.$t");if(!b)return a;var c=bk(a);a.u(function(a){Tc(c,a);jl(this.storage.g,this.O,b.getName(),null,!1,1).u(function(b){var f={alt:"json"};if(b=u(b)?b[0]:b)b=lc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),f["updated-min"]=b;var g=this,f=new $h(this.Cb(),"GET",f);this.ta().request(f).execute(function(b,e){if(200==e.N()){if(!b){var f=Yi(e);x(f)&&(b=JSON.parse(f))}f=lc(b.feed,"openSearch$totalResults");c.w(a+parseFloat(f||0))}else N(g.logger,
g+":Unexpected respond status "+e.N())})},function(a){c.A(a)},this)},function(a){c.A(a)},this);return c};function Kp(a,b,c){To.call(this,a,b,c)}E(Kp,Hp);function Lp(a,b,c){Ip.call(this,a,b,c);this.h=this.h.substr(27);this.Lb=c.Options.prefix}E(Lp,Ip);Lp.prototype.ta=function(){this.g||(this.g=new Mp(gapi.client));return this.g};Lp.prototype.wa=function(a,b){return new Kp(this,a,b)};Lp.prototype.Cb=function(){return this.h+this.Lb};
Lp.prototype.Xb=function(){Q(this.logger,"starting prefetch");var a=new F;jl(this.storage.g,this.O,"updated",null,!0,1).u(function(b){var c={alt:"json"};if(b=b[0])b=lc(b,"updated"),b=(new Date(1+ +new Date(b))).toISOString(),c.updatedMin=b;var d=this,c=new $h(this.Cb(),"GET",c);d.ta().request(c).execute(function(b,c){if(b){var g=b.items||[];0<g.length?Wo(d,g).da(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},
function(b){a.A(b)},this);return a};function Np(a,b){if(!t(r.AWS))throw new Qc("AWS JS SDK not loaded");this.h=a;this.i=b;this.g=null}Np.prototype.request=function(a){return new Op(this,a)};function Pp(a){var b={params:{Bucket:a.h,region:a.i}};if(!a.h)throw new M("bucket name required");a.g||(a.g=new AWS.S3(b));return a.g}function Op(a,b){this.parent=a;this.g=b}
function Qp(a,b,c,d,e){var f=NaN,g="",k={};a=Pp(a.parent)[b](c);a.on("complete",function(a){a.httpResponse&&(f=a.httpResponse.statusCode,x(f)&&(f=parseInt(f,10)),k=a.httpResponse.headers);a.error&&(g=a.error.message,f||(f=400))});a.send(function(a,b){var c=new Wi(f,b,k,g);a?d.call(e,null,c):d.call(e,b,c)})}
Op.prototype.execute=function(a,b){var c=Gd(new td(this.g.path)),c="/"==c.charAt(0)?c.substr(1):c,d=this.g.headers||{};c&&(d.Key=c);if(c)if("GET"==this.g.method)Qp(this,"getObject",d,a,b);else if("PUT"==this.g.method)Qp(this,"putObject",d,a,b);else throw new Oc("HTTP method "+this.g.method);};function Rp(a,b){this.g=a;this.prefix=Sp(this,"Prefix")[0];this.h=b.type}Rp.prototype.fa=function(){return this.g.documentElement.getElementsByTagName("Contents").length};Rp.prototype.keys=function(){var a=Sp(this,"Key");if(this.prefix){var b=this.prefix.length,a=a.map(function(a){return a.substr(b)});"INTEGER"==this.h?a=a.map(function(a){return parseInt(a,10)}):"NUMERIC"==this.h&&(a=a.map(function(a){return parseFloat(a)}))}return a};
function Sp(a,b){for(var c=[],d=a.g.documentElement.getElementsByTagName(b),e=d.length,f=0;f<e;f++)c[f]=d[f].textContent;return c}function Tp(a){return Sp(a,"LastModified").map(function(a){return(new Date(Date.parse(a))).toGMTString()})}
function Up(a){var b=a.g.documentElement.getElementsByTagName("NextMarker");return 1==b.length?b[0].textContent:"true"==a.g.documentElement.getElementsByTagName("IsTruncated")[0].textContent&&(a=a.g.documentElement.firstElementChild.lastElementChild)&&"Contents"==a.tagName?a.getElementsByTagName("Key")[0]:null};function Vp(a,b,c){ap.call(this,a,b,c);this.j=c.Options.bucket;if(!x(this.j)||ta(this.j))throw new M("bucket name required.");this.h||(this.h="https://"+this.j+".s3.amazonaws.com/");if(!0===b.h)throw new M('S3 object store "'+b.getName()+'" must not set autoIncrement to true.');}E(Vp,ap);h=Vp.prototype;h.logger=R("ydn.db.sync.S3");h.rb=function(){var a=Vp.m.rb.call(this);return a=a.concat(["bucket","maxKeys","prefix","delimiter"])};h.ta=function(){this.g||(this.g=new Np(this.j));return this.g};
h.bf=function(a){return this.h+this.l+a};h.wa=function(a,b){return new lp(this,a,b)};
h.hf=function(a,b){var c=this;dk(a,function(d,e,f){Tc(a,d);c.Nd(d,function(a){var e={},l=a[0]?Oo(a[0]):null;null!=l&&(e.marker=l);0<c.l.length&&(e.prefix=c.l);0<b&&(e["max-keys"]=b);Q(c.logger,c+" querying for newer entries starting from "+l);e=new $h(c.h,"GET",e);c.ta().request(e).execute(function(b,e){if(200==e.N()){for(var k=Yi(e),k=k instanceof Document?k:Ah(k),l=new Rp(k,c.i),k=l.keys(),l=Tp(l),s=[],v=[],z=[],D=0,G=0;D<=a.length&&G<k.length;){var J=a[D]?Oo(a[D]):null,O=k[G];if(D==a.length)v.push(O),
G++;else{var ha=J?rj(J,O):-1;0==ha?((O=Po(a[D]))&&l[G]&&O!=l[G]&&(l[G]>O?z.push(J):N(c.logger,'record "'+J+'" in database is more recent than server '+O+" vs "+l[G])),D++,G++):1==ha?(s.push(J),D++):(v.push(O),G++)}}fp(c,f,d,v,z,s)}else N(c.logger,"Invalid response status "+e.N())})})},this)};
function Wp(a,b){function c(f){null!=f&&(d.marker=f);Q(a.logger,a+" querying for newer entries starting from "+f);e.request(new $h(a.h,"GET",d)).execute(function(d,e){if(200==e.N()){var f=Yi(e),f=f instanceof Document?f:Ah(f),f=new Rp(f,a.i),m=Up(f),f=f.keys(),n=f.length;if(0==n)b([]),b=null;else for(var p=0,q=0;q<n;q++)a.wa(f[q]).hc(function(){p++;p==n&&(m?c(m):b&&(b([this.tb()]),b=null))})}else N(a.logger,"Invalid response status "+e.N())})}var d={};0<a.l.length&&(d.prefix=a.l);var e=a.ta();c();
a.$=!0}function Xp(a,b){a.$||dk(b,function(a,b,e){t(a[0])?e(a):Wp(this,e)},a)};function Yp(a,b,c){To.call(this,a,b,c)}E(Yp,lp);Yp.prototype.logger=R("ydn.db.sync.entry.Gcs");function Zp(a,b,c){Vp.call(this,a,b,c);this.h="https://"+this.j+".storage.googleapis.com/"}E(Zp,Vp);Zp.prototype.logger=R("ydn.db.sync.Gcs");Zp.prototype.ta=function(){this.g||(this.g=new jo);return this.g};Zp.prototype.wa=function(a,b){return new Yp(this,a,b)};function Mp(a,b){this.h=a;this.g=!!b}Mp.prototype.request=function(a){var b={path:a.path,method:a.method,headers:a.headers,params:a.params,body:a.body};this.g&&(b.callback=function(a,e){c.w(a,e);b.callback=null});a=this.h.request(b);var c=new $p(a);return c};function $p(a){this.h=a||null}$p.prototype.w=function(a,b){this.i&&(this.i(a,aj(b)),this.i=null);this.g={json:a,yc:b}};
$p.prototype.execute=function(a){this.h?(this.h.execute(function(b,c){a(b,aj(c))}),this.h=null):this.g?(a(this.g.json,aj(this.g.yc)),this.g=null):this.i=a};function bp(a){if(a){if(a instanceof jo)return a;if(ga(a))return new Mp({request:function(b){a(b)}},!0);if("request"in a)return new Mp(a);throw new M(a+" is not a valid HTTP Client");}return null};function aq(a,b,c){To.call(this,a,b,c)}E(aq,Yp);aq.prototype.logger=R("ydn.db.sync.entry.GcsJson");aq.prototype.hc=function(a){var b=this.g,c=this;Xo(this,function(d){var e={method:"GET",path:"storage/v1beta2/b/"+b.j+"/o/"+encodeURIComponent(c.getName())};d&&(e.headers=Ro(d));gapi.client.request(e).execute(function(d,e){var k=aj(e);c.j=new So(c.D(),k.Mc(),b.p);d?(Q(c.logger,c+": readServer updated"),c.i=d):(Q(c.logger,c+": readServer request fail "+e),c.j=null,c.i=null);a.call(c,200)},e)})};function bq(a,b,c){Zp.call(this,a,b,c)}E(bq,Zp);h=bq.prototype;h.logger=R("ydn.db.sync.GcsJson");h.qb=function(){var a=bq.m.qb.call(this);a.key="name";return a};h.ta=function(){if(!this.g)if(t(r.gapi))this.g=new Mp(gapi.client);else throw new Qc("gapi not loaded");return bq.m.ta.call(this)};h.wa=function(a,b){return new aq(this,a,b)};
h.Xb=function(){P(this.logger,"starting prefetch");var a=new F;ll(this.storage.g,this.O,null,null,1,0,!0,!1).u(function(b){var c={bucket:this.j};(b=b[0])&&(c.marker=b);var d=this;if(!r.Mg||r.Mg.client)throw Error("gapi lib not loaded");gapi.client.load("storage","v1beta2",function(){var b=gapi.client.storage.objects.list({bucket:d.j});this.Lb&&(c.prefix=this.Lb);b.execute(function(b,c){if(b&&!b.error){var e=b.items||[];0<e.length?Wo(d,null,e).da(function(){a.w(!0)}):a.w(!1)}else e=d+": "+c,N(d.logger,
e),a.A(Error(e))})})},function(b){a.A(b)},this);return a};function cq(a,b,c){Zp.call(this,a,b,c);this.P="full"}E(cq,Zp);h=cq.prototype;h.logger=R("ydn.db.sync.GcsMeta");h.qb=function(){var a=cq.m.qb.call(this);a.key="name";return a};h.ta=function(){!this.g&&gapi&&(this.g=new Mp(gapi.client));return cq.m.ta.call(this)};h.wa=function(a,b){return new aq(this,a,b)};
h.Xb=function(){P(this.logger,"starting prefetch");var a=new F;if(!r.gapi||!r.gapi.client)throw Error("gapi lib not loaded");var b=this;gapi.client.load("storage","v1beta2",function(){function c(e){e&&(d.pageToken=e);gapi.client.storage.objects.list(d).execute(function(e,g){if(e&&!e.error){var k=e.items||[];if(e.nextPageToken)Q(b.logger,"receiving "+k.length+" meta records, continuing next"),Wo(b,k),c(e.nextPageToken);else if(0<k.length)Wo(b,k).da(function(){Q(b.logger,"receiving "+k.length+" meta records, prefetching dane.");
a.w(!0)});else{var l=!!d.pageToken;Q(b.logger,"prefetching done");a.w(l)}}else l=b+": "+g,N(b.logger,l),a.A(Error(l))})}var d={bucket:b.j};this.Lb&&(d.prefix=this.Lb);c()});return a};h.Nd=function(a,b){if(0==a.length)b([]);else{var c=this.G(),d=Qa(a,function(a){return new qk(c,a)});ep(this,d).u(function(d){for(var f=[],g=0;g<a.length;g++)f[g]=new No(a[g],d[g],this.p,c);b(f)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)}};function dq(a,b,c){ap.call(this,a,b,c)}E(dq,ap);dq.prototype.bf=function(a){return this.h+this.l+this.O+this.xa+a};dq.prototype.logger=R("ydn.db.sync.Json");
dq.prototype.hf=function(a){function b(a,b){var c=new $h(e);d.ta().request(c).execute(function(c){if(200==c.status){var e=(c.response instanceof Object?c.response:wh(c.responseText)).items;c=Qa(e,function(a){return a.id});for(var e=Qa(e,function(a){return a.updated}),k=[],p=[],q=[],s=0,v=0;s<=a.length&&v<c.length;){var z=Oo(a[s]),D=c[v];if(s==a.length)p.push(D),v++;else{var G=rj(z,D);0==G?((D=Po(a[s]))&&e[v]&&D!=e[v]&&(new Date(e[v])>D?q.push(z):N(d.logger,'record "'+z+'" in database is more recent than server '+
D+" vs "+e[v])),s++,v++):1==G?(k.push(z),s++):(p.push(D),v++)}}fp(d,function(){},b,p,q,k)}else N(d.logger,"Invalid response status "+c.status)})}var c=new Sc,d=this,e=this.h+this.l+this.O;a.B(function(a){Tc(c,a);this.Nd(a,function(c){b(c,a)})},this)};function eq(a,b,c){ap.call(this,a,b,c)}E(eq,jp);function fq(a,b,c){To.call(this,a,b,c)}E(fq,lp);fq.prototype.logger=R("ydn.db.sync.entry.S3Meta");function gq(a,b,c){Vp.call(this,a,b,c);this.Lb=c.Options.prefix;if("Key"!=b.keyPath)throw new M('s3-meta store "'+b.getName()+'" must use inline key with keyPath "Key"');this.P="meta"}E(gq,Vp);h=gq.prototype;h.logger=R("ydn.db.sync.S3Meta");h.qb=function(){var a=gq.m.qb.call(this);a.key="Key";a.modified="LastModified";a.etag="ETag";return a};h.wa=function(a,b){return new fq(this,a,b)};
h.Xb=function(){function a(f){f&&(e.marker=f);c.listObjects(e).send(function(c,f){if(c){var l=d+": "+xh(c);N(d.logger,l);b.A(c instanceof Error?c:Error(l))}else{var m=f.Contents||[];f.IsTruncated?(Q(d.logger,"receiving "+m.length+" meta records, continuing next"),Wo(d,m),a(m[m.length-1].Key+"\uffff")):0<m.length?Wo(d,m).da(function(){Q(d.logger,"receiving "+m.length+" meta records, prefetching dane.");b.w(!0)}):(l=!!e.marker,Q(d.logger,"prefetching done"),b.w(l))}})}P(this.logger,"starting prefetch");
var b=new F,c=Pp(this.ta()),d=this,e={};this.Lb&&(e.prefix=this.Lb);a();return b};h.Nd=function(){throw new Qc("loading meta data should not be necessary");};function hq(a,b,c){To.call(this,a,b,c)}E(hq,Hp);function iq(a,b,c){Ip.call(this,a,b,c);a=c.Options;this.domain=a.domain;this.$=a.siteName;if(a=Nj(b,"sites$parent"))Cl(a,function(a){for(var b=a.link||[],c=0;c<b.length;c++)if("http://schemas.google.com/sites/2008#parent"==b[c].rel)return b[c].href;return a.id.$t.replace(/\w+$/,"0")}),bf(this.logger,"index sites$parent in "+b.getName()+" has set a generator.");if(a=Nj(b,"alternate"))Cl(a,function(a){a=a.link||[];for(var b=0;b<a.length;b++)if("alternate"==a[b].rel)return a[b].href}),bf(this.logger,
"index alternate in "+b.getName()+" has set a generator.")}E(iq,Ip);h=iq.prototype;h.wa=function(a,b){return new hq(this,a,b)};h.rb=function(){var a=iq.m.rb.call(this);return a=a.concat(["domain","siteName"])};h.Cb=function(){return"https://sites.google.com/feeds/content/"+this.domain+"/"+this.$+"/"};h.rg=function(a){return"GET"!=a};
function jq(a,b,c,d){var e={alt:"json",kind:a.kind};"sites$parent"==c?(c=d.match(/\w+$/)[0],e.parent=c):"alternate"==c&&(c=d.replace(/https:\/\/sites.google.com\/a\/[^\/]+\/[^\/]+/,""),e.path=c);var f={},g=a.Cb();dk(b,function(c,l,m){Tc(b,c);if(l=c[0])l=lc(l,"updated","$t"),l=(new Date(1+ +new Date(l))).toISOString(),e["updated-min"]=l;l=new $h(g,"GET",e,f);a.ta().request(l).execute(function(b,e){if(200==e.N()){if(!b){var f=Yi(e);x(f)&&(b=JSON.parse(f))}var g=(f=(b.feed||b).entry)?u(f)?f:[f]:[];0<
g.length?Wo(a,g).da(function(){m(g)}):m(c)}else 302==e.N()?m(c):(f=a+": Invalid response status "+e.N()+" for querying pageName: "+d,N(a.logger,f),m(Error(f),!0))})},a)}h.Ce=function(a,b,c){if(hp(this))dk(a,function(d,e,f){Tc(a,d);ip(this,function(a){!0===a?jl(this.storage.g,this.O,b,U.only(c),!1,0).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(a){f(a,!0)},this)},this);else return"alternate"==b||"alternate"==b?jq(this,a,b,c):iq.m.Ce.call(this,a,b,c)};Kk.prototype.g=null;
jm.prototype.Kf=function(a,b){var c=b.format;if("gdata-sites"==c)a.g=new iq(this,a,b);else if("gdata"==c)a.g=new Ip(this,a,b);else if("gdata-json"==c)a.g=new Lp(this,a,b);else if("odata"==c)a.g=new eq(this,a,b);else if("s3"==c)a.g=new Vp(this,a,b);else if("s3-meta"==c)a.g=new gq(this,a,b);else if("gcs"==c)a.g=new Zp(this,a,b);else if("gcs-json"==c)a.g=new bq(this,a,b);else if("gcs-meta"==c)a.g=new cq(this,a,b);else if("atom"==c)a.g=new jp(this,a,b);else if("json"==c)a.g=new dq(this,a,b);else if("rest"==
c)a.g=new ap(this,a,b);else throw new Oc("Sync format: "+c);Ll(a,function(b,c){var f=b.zd();if(!(this instanceof Ik)||this.Xa)if(!window.navigator||!t(window.navigator.onLine)||window.navigator.onLine)if("add"==f)f=c[1],a.g.add(b,f);else if("count"==f)c[1]||c[2]||a.g.count(b);else if("put"==f){var f=c[1],g=c[2];a.g.put(b,f,g)}else if("rm:iter"==f)g=c[1],a.g.remove(b,g);else if("values:iter:index"==f){var f=c[1],g=c[2],k=c[3],l=c[4],m=c[5];!k&&!m&&g&&null!=g.lower&&null!=g.upper&&0==rj(g.lower,g.upper)&&
a.g.Ce(b,f,g.lower)}else if("keys"==f)g=c[1],l=c[2],k=c[3],m=c[4],a.g.keys(b,null,g,l,k,m,!1);else if("keys:iter:index"==f)f=c[1],g=c[2],l=c[3],k=c[4],m=c[5],a.g.keys(b,f,g,l,k,m,c[6]);else if("values"==f)g=c[1],l=c[2],k=c[3],m=c[4],g||m?g&&g.lower&&x(g.lower)&&g.lower==g.upper||!g&&m&&1==l&&k&&Xp(a.g,b):a.g.values(b,l,k);else if(""!=f)if("get"==f)g=c[1],a.g.get(b,g);else if("values:array"==f)gp(a.g,b,c[1]);else throw Error(f);})};var kq="Accounts Contacts Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),lq="Accounts Contacts Leads Notes Opportunities Tasks Teams".split(" "),mq=["Contacts","Leads"];function nq(a,b,c){return"https://"+a+"/index.php?module="+b+"&action=DetailView&record="+c};function oq(a){this.h=a||[]}oq.prototype.g=function(a){return-1==this.h.indexOf(a)?a:null};function pq(){}
pq.prototype.g=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,k;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,k=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f+="e":k.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f+="e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,k=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!k.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function qq(a){this.h=a}
qq.prototype.g=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=function(a){return a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a}(a);a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,
"$1")}(a);a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.h&&(a=a.substring(0,this.h));return a=a.toUpperCase()};var rq=new qq(32),sq=new pq,tq=new oq("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function uq(a){this.data=a;this.h=0}uq.prototype.g=function(a){for(var b=this.h,c=this.data[b],c=1,d=0;0<=b&&b<this.data.length;){c=this.data[b];if(c instanceof Array)if(a<c[0])c=-1;else if(a>c[1])c=1;else return this.h=b,!0;else{if(c==a)return this.h=b,!0;c=a<c?-1:1}if(0==d)d=c;else if(d!=c)break;b+=c;if(b>this.data.length||0>b)break}return!1};
function vq(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new uq(categ_letters_numbers_data);if(y(d))d=g.g(d);else{for(var k=0,l=d.length;k<l;++k)if(!1===g.g(d[k])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};function wq(a,b){this.j=b;this.value=a}wq.prototype.T=function(){return this.value};wq.prototype.sb=function(){return 1};var xq=Rh||Oh;wq.prototype.D=function(){return this.value};wq.prototype.toString=function(){return"Entry:"+this.value};function yq(a,b,c,d,e,f){wq.call(this,d,e);this.O=a;this.h=b;this.i=c;this.Od=f||[]}E(yq,wq);h=yq.prototype;h.bd=function(){return{k:this.j,v:this.value.toLowerCase(),id:this.D(),loc:this.Od}};h.D=function(){var a=[this.O,this.i,this.h,this.value];return xq?a:wj(a)};h.G=function(){return this.O};h.ga=function(){return this.i};h.toString=function(){return["IndexEntry",this.O,this.i,this.value].join(":")};function zq(a,b,c,d,e){wq.call(this,b,c);this.l=d;this.g=e;this.type=a;this.Mf=1}E(zq,wq);zq.prototype.sb=function(){return this.g*this.type*this.Mf};zq.prototype.D=function(){return this.value+"|"+this.l};function Aq(a,b){yq.call(this,b.G(),b.h,b.ga(),b.T(),b.j,[]);this.n=a;this.g=[b]}E(Aq,yq);h=Aq.prototype;h.count=function(){return this.g.length};h.entry=function(a){return this.g[a]};h.jf=function(a){a=a.g[0];for(var b=0;b<this.g.length;b++)if(this.g[b].h==a.h&&this.g[b].value==a.value)return;this.g.push(a)};h.sb=function(){for(var a=0,b=0;b<this.g.length;b++)var c=this.g[b],d=Pl(this.n,c.G(),c.h),c=c.sb(),a=a+c*d.h;return a};function ib(a,b){var c=a.sb(),d=b.sb();return c<=d?1:-1}
h.bd=function(){for(var a={value:this.value,primaryKey:this.i,storeName:this.O,score:this.sb(),tokens:[]},b=0;b<this.g.length;b++)a.tokens[b]=this.g[b].bd();return a};h.toString=function(){return["RankEntry",this.O,this.i,this.value].join(":")+"["+this.g.length+"]"};function Bq(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function cl(a,b,c,d,e,f,g){yq.call(this,b,c,d,e,f,g);this.query=a}E(cl,yq);cl.prototype.sb=function(){var a,b=this.value;a=Bq(this.query.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=Bq(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,k;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(k=b[f],g==k){c++;delete b[f];break}a=2*c/d;b=Math.log(this.Od.length+1);c=this.query.sb();return b*a*c};cl.prototype.bd=function(){return{keyPath:this.h,value:this.value,loc:this.Od.slice()}};
cl.prototype.toString=function(){return["ResultEntry",this.O,this.i,this.value].join(":")};function Cq(a,b){this.g=a;this.h=b;this.j=[];this.i=0}function bl(a,b){for(var c,d,e=a.g.getName(),f=0;f<a.h.length;f++){var g=a.h[f],k=g.type;0.4==k||0.6==k?(d="v",c=g.T().toLowerCase(),c=lj(c)):(d="v",c=g.T().toLowerCase(),c=U.only(c));b(e,d,c,g);a.i++;0.6==k&&(d="k",c=g.j,c=U.only(c),b(e,d,c,g),a.i++)}}function al(a){for(var b=[a.g.getName()],c=0;c<a.g.count();c++){var d=a.g.index(c).G();-1==b.indexOf(d)&&b.push(d)}return b}
function dl(a){for(var b=[],c=[],d=0;d<a.j.length;d++){var e=a.j[d];if(0==e.query.type)-1==Ua(c,function(a){return a.ga()==e.ga()&&a.G()==e.G()})&&c.push(e);else{var f=new Aq(a.g,e),g=Ua(b,function(a){return a.ga()==f.ga()&&a.G()==f.G()});if(0<=g){var k=b[g];Ya(b,g);k.jf(f);f=k}hb(b,f)}}for(a=0;a<c.length;a++)for(g=c[a],d=b.length-1;0<=d;--d)if(k=b[d],g.ga()==k.ga()&&g.G()==k.G()){b.splice(a,1);break}return b.map(function(a){return a.bd()})};function Dq(a){this.g=a;if("en"==a.lang){a=a.h||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(rq);else if("stemmer"==a[c])b.push(sq);else if("stop"==a[c])b.push(tq);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.h=a}function Eq(a,b){for(var c=0;c<a.h.length;c++){var d=a.h[c].g(b);if(d)b=d;else return null}return b}Dq.prototype.parse=function(a){var b=[];vq(a,function(c,d){b.push(a.substr(c,d))});return b};
Dq.prototype.query=function(a,b){var c=Fq(this,b);return 0==c.length?null:new Cq(this.g,c)};
function Fq(a,b){var c=[],d=[];vq(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=Eq(a,c[f]);for(var g=[],k=0,f=0;f<c.length;f++){var l=c[f],m=e[f],n="*"==b.charAt(d[f]+l.length),p=n?d[f]+l.length+1:d[f]+l.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),q="-"==b.charAt(p?d[f]-2:d[f]-1),s=0.8;n?s=0.4:p?s=1:q?s=0:null!=m&&(s=0.6);l=new zq(s,l,m,d[f],1/(f+2));g.push(l);k+=l.sb()}for(f=0;f<g.length;++f)g[f].Mf=1/k;return g}
function Gq(a,b,c,d){var e=[],f=[];vq(b,function(a,c){e.push(b.substr(a,c));f.push(a)});for(var g=[],k=0;k<e.length;k++)g[k]=Eq(a,e[k]);a=c.G();c=c.g;for(var l=[],k=0;k<e.length;k++){var m=e[k],n=g[k];if(null!=n){var p=Ta(l,function(a){return a.T()==m});p||(p=new yq(a,c,d,m,n),l.push(p));p.Od.push(f[k])}}return l}function Hq(a,b,c,d){for(var e=[],f=0;f<a.g.count();f++){var g=a.g.index(f);if(g.G()==b){var k=tj(d,g.g);x(k)&&(e=e.concat(Gq(a,k,g,c)))}}return e};jm.prototype.Jf=function(a,b){var c=this;b.g=new Dq(b);Ll(a,function(d,e){function f(b){var e=a.getName();dk(d,function(a,f,g){if(f)g(a,f);else{Tc(d,a);var k=new qk(e,b);hl(c.g,[k]).da(function(){g(a,f)})}})}function g(b){var e=a.getName();dk(d,function(a,f,g){f?g(a,f):(Tc(d,a),b&&(b=jj(U.bound([e,b.lower],[e,b.upper,"\uffff"]))),il(c.g,e,b).da(function(){g(a,f)}))})}function k(e){var f=a.getName();dk(d,function(a,g,k){Tc(d,a);if(g)k(a,g);else{var l=b.getName();u(a)||(a=[a]);for(var z=0;z<a.length;z++){var D=
a[z];sk(D)&&(D=Hq(b.g,f,D,e[z]).map(function(a){return a.bd()}),D=gl(c.g,l,D),z==a.length-1&&D.da(function(){k(a,g)}))}}})}var l=d.zd();"put"==l?k([e[1]]):"put:array"==l?k(e[1]):"add"==l?k([e[1]]):"add:array"==l?k(e[1]):"rm:iter"==l||"clear"==l?g(e[1]):"rm"==l&&f(e[1])})};
jm.prototype.search=function(a,b,c,d){var e=Tl(this.h,a);if(!e)throw new M('full text index catalog "'+a+'" not found.');a=e.g.query(a,b,c,d);return a?this.g.search(a):(P(this.logger,'query "'+b+'" contains only noise and search is ignored'),ek("search",null))};function Iq(a){this.name=a;this.info=null;this.h={};this.g=null}
var Jq={Accounts:{GeneratorIndex:{ydn$emails:["email","email1","email_addresses_non_primary"],ydn$phones:["phone_office","phone_alternate","phone_fax"]}},Contacts:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home","phone_mobile","phone_work","phone_other","phone_fax"]}},Leads:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home",
"phone_mobile","phone_work","phone_other","phone_fax"]}},Notes:{FullTextIndex:{content:["name","description"]},indexes:[{name:"contact_id"},{name:"parent",keyPath:["parent_type","parent_id"]}]}};
function Kq(a,b){return"ydn$emails"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e))if(x(b[e])){var f=kn(b[e]);f&&d.push(f)}else if(w(b[e])&&b[e][0]&&b[e][0].email_address)for(var g=b[e],k=0;k<g.length;k++)g[k]&&x(g[k].email_address)&&(f=kn(g[k].email_address))&&d.push(f);return d}}:"ydn$phones"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e)){var f=jn(b[e]);f&&d.push(f)}return d}}:null}
function Lq(a,b){if(a.g)for(var c=0;c<a.g.stores.length;c++)if(a.g.stores[c].name==b)return a.g.stores[c];var d={name:b,keyPath:"id",indexes:[{name:"account_id"},{name:"name"},{name:"date_modified"}]},e=["ydn$emails","ydn$phones","ydn$names"],c=a.h[b]||Jq[b]||{};c.indexes&&(d.indexes=d.indexes.concat(c.indexes));for(var f=c.GeneratorIndex||{},c=0;c<e.length;c++){var g=e[c],k=f[g];!k||u(k)&&0==k.length||d.indexes.push(Kq(k,g))}return d}
function Mq(a){if(a.g)return a.g;for(var b={fullTextCatalogs:[],stores:[{name:"history",indexes:[{keyPath:"type"},{keyPath:"timestamp"}]},{name:"Meta"}]},c=0;c<lq.length;c++){var d=lq[c];b.stores.push(Lq(a,d));var e=a.h[d]||Jq[d]||{};if(e.FullTextIndex)for(var f in e.FullTextIndex){var g=e.FullTextIndex[f];if(0<g.length){for(var k={name:"ft-"+d+"-"+f,lang:"en",sources:[]},l=0;l<g.length;l++)k.sources.push({storeName:d,keyPath:g[l]});b.fullTextCatalogs.push(k)}}}a.g=b;Object.freeze(a.g);return a.g}
;function Nq(a,b,c){this.domain=a;this.Y=b;this.g=c||null}Nq.prototype.M=function(){return this.domain};Nq.prototype.D=function(){return this.g.id};function Oq(a){if(!a.g)return"";var b=a.g.full_name||a.g.name;if(b)return b;b=(a.g.first_name||"").trim();a=(a.g.last_name||"").trim();return b+" "+a}Nq.prototype.value=function(a){return this.g?this.g[a]:null};Nq.prototype.toString=function(){return"Record:"+this.Y+":"+(this.g?this.g.id:void 0)};function Pq(a,b,c){var d=0;if(!b)return d;b.gd$city&&a[c+"_address_city"]!=b.gd$city.$t&&(a[c+"_address_city"]=b.gd$city.$t,d++);b.gd$country&&a[c+"_address_country"]!=b.gd$country.$t&&(a[c+"_address_country"]=b.gd$country.$t,d++);b.gd$postcode&&a[c+"_address_postalcode"]!=b.gd$postcode.$t&&(a[c+"_address_postalcode"]=b.gd$postcode.$t,d++);b.gd$region&&a[c+"_address_state"]!=b.gd$region.$t&&(a[c+"_address_state"]=b.gd$region.$t,d++);b.gd$street&&a[c+"_address_street"]!=b.gd$street.$t&&(a[c+"_address_street"]=
b.gd$street.$t,d++);b.gd$housename&&a[c+"_address_street_2"]!=b.gd$neighborhood.$t&&(a[c+"_address_street_2"]=b.gd$neighborhood.$t,d++);b.gd$neighborhood&&a[c+"_address_street_3"]!=b.gd$city.$t&&(a[c+"_address_street_3"]=b.gd$city.$t,d++);return d}
function Qq(a,b,c){function d(d,g){!a[c+g]||b[d]&&b[d].$t==a[c+g]||(e++,b[d]={$t:a[c+g]})}var e=0;if(!a)return 0;b||(b={});d("gd$city","_address_city");d("gd$country","_address_country");d("gd$postcode","_address_postalcode");d("gd$region","_address_state");d("gd$street","_address_street");d("gd$neighborhood","_address_street_2");d("gd$city","_address_street_3");return e}
function Rq(a,b){var c=0;!a.title||b.name&&b.name==a.title.$t||(b.name=a.title.$t,c++);for(var d=0;a.gd$email&&d<a.gd$email.length;d++){var e=a.gd$email[d];"http://schemas.google.com/g/2005#work"==e.rel?b.email1!=e.address&&(c++,b.email1=e.address):"http://schemas.google.com/g/2005#home"==e.rel?b.email2!=e.address&&(c++,b.email2=e.address):"http://schemas.google.com/g/2005#other"==e.rel&&b.email!=e.address&&(c++,b.email=e.address)}a.gd$name?(a.gd$name.gd$namePrefix&&b.salutation!=a.gd$name.gd$namePrefix.$t&&
(c++,b.salutation=a.gd$name.gd$namePrefix.$t),a.gd$name.gd$givenName&&b.first_name!=a.gd$name.gd$givenName.$t&&(b.first_name=a.gd$name.gd$givenName.$t,c++),a.gd$name.gd$familyName&&b.last_name!=a.gd$name.gd$familyName.$t&&(b.last_name=a.gd$name.gd$familyName.$t,c++),a.gd$name.gd$fullName&&b.full_name!=a.gd$name.gd$fullName.$t&&(b.full_name=a.gd$name.gd$fullName.$t,c++)):b.full_name=a.title.$t;a.gd$organization&&a.gd$organization[0]&&(d=a.gd$organization[0],d.gd$orgTitle&&d.gd$orgTitle.$t!=b.title&&
(b.title=d.gd$orgTitle.$t,c++),d.gd$orgDepartment&&d.gd$orgDepartment.$t!=b.department&&(b.department=d.gd$orgDepartment.$t,c++),d.gd$orgJobDescription&&d.gd$orgJobDescription.$t!=b.description&&(b.description=d.gd$orgJobDescription.$t,c++));if(a.gd$im)for(d=0;d<a.gd$im.length;d++)"Twitter"==a.gd$im[d].label&&b.twitter!=a.gd$im[d].address?(b.twitter=a.gd$im[d].address,c++):"Facebook"==a.gd$im[d].label&&b.facebook!=a.gd$im[d].address?(b.facebook=a.gd$im[d].address,c++):"Google Plus"==a.gd$im[d].label&&
b.googleplus!=a.gd$im[d].address?(b.googleplus=a.gd$im[d].address,c++):"Linkedin"==a.gd$im[d].label&&b.linkedin!=a.gd$im[d].address&&(b.linkedin=a.gd$im[d].address,c++);a.gContact$birthday&&b.birthdate!=a.gContact$birthday.when&&(b.birthdate=a.gContact$birthday.when,c++);for(d=0;a.gd$phoneNumber&&d<a.gd$phoneNumber.length;d++)if(e=a.gd$phoneNumber[d],e.$t)if("http://schemas.google.com/g/2005#mobile"==e.rel)b.phone_mobile!=e.$t&&(b.phone_mobile=e.$t,c++);else if("http://schemas.google.com/g/2005#work"==
e.rel)b.phone_work!=e.$t&&(b.phone_work=e.$t,c++);else if("http://schemas.google.com/g/2005#home"==e.rel)b.phone_home!=e.$t&&(b.phone_home=e.$t,c++);else if("http://schemas.google.com/g/2005#fax"==e.rel||"http://schemas.google.com/g/2005#home_fax"==e.rel||"http://schemas.google.com/g/2005#work_fax"==e.rel)b.phone_fax!=e.$t&&(b.phone_fax=e.$t,c++);else if(b.phone_other=e.$t)b.phone_other=e.$t,c++;if(a.gd$structuredPostalAddress){for(var f=e=-1,d=0;d<a.gd$structuredPostalAddress.length;d++){var g=a.gd$structuredPostalAddress[d];
"http://schemas.google.com/g/2005#work"==g.rel||g.primary?e=d:f=d}-1==e&&(f=-1);c+=Pq(b,a.gd$structuredPostalAddress[e],"primary");c+=Pq(b,a.gd$structuredPostalAddress[f],"alt")}return c}
function Sq(a,b){function c(a,c){if(g[a]){b.gd$phoneNumber||(b.gd$phoneNumber=[]);var d;a:{for(d=0;b.gd$phoneNumber&&d<b.gd$phoneNumber.length;d++)if(b.gd$phoneNumber[d].rel==c){d=b.gd$phoneNumber[d];break a}d=null}d?d.$t!=g[a]&&(d.$t=g[a],k++):(b.gd$phoneNumber.push({rel:c,$t:g[a]}),k++)}}function d(a){b.gd$im||(b.gd$im=[]);for(var c=0;c<b.gd$im.length;c++)if(b.gd$im[c].label==a)return b.gd$im[c];return null}function e(){b.gd$name||(b.gd$name={},k++)}function f(a,c){if(g[a]){b.gd$email||(b.gd$email=
[]);var d;a:{for(d=0;b.gd$email&&d<b.gd$email.length;d++)if(!(0<=l.indexOf(d))&&b.gd$email[d].address==g[a])break a;d=-1}if(0<=d){var e=b.gd$email[d];e.rel!=c&&(k++,e.rel=c);l.push(d)}else b.gd$email.push({rel:c,address:g[a]}),l.push(b.gd$email.length-1),k++}}var g=a.g,k=0;!g.name||b.title&&b.title.$t==g.name||(b.title={$t:g.name},k++);var l=[];f("email1","http://schemas.google.com/g/2005#work");f("email2","http://schemas.google.com/g/2005#home");f("email","http://schemas.google.com/g/2005#other");
g.salutation&&(e(),b.gd$name.gd$namePrefix&&b.gd$name.gd$namePrefix.$t==g.salutation||(b.gd$name.gd$namePrefix={$t:g.salutation},k++));g.first_name&&(e(),b.gd$name.gd$givenName&&b.gd$name.gd$givenName.$t==g.first_name||(b.gd$name.gd$givenName={$t:g.first_name},k++));g.last_name&&(e(),b.gd$name.gd$familyName&&b.gd$name.gd$familyName.$t==g.last_name||(b.gd$name.gd$familyName={$t:g.last_name},k++));g.full_name&&(e(),b.gd$name.gd$fullName&&b.gd$name.gd$fullName.$t==g.full_name||(b.gd$name.gd$fullName=
{$t:g.full_name},k++));if(g.twitter){var m=d("Twitter");m?m.address!=g.twitter&&(m.address=g.twitter,k++):(b.gd$im.push({label:"Twitter",address:g.twitter}),k++)}g.facebook&&((m=d("Facebook"),m)?m.address!=g.facebook&&(m.address=g.facebook,k++):(b.gd$im.push({label:"Facebook",address:g.facebook}),k++));g.googleplus&&((m=d("Google Plus"),m)?m.address!=g.googleplus&&(m.address=g.googleplus,k++):(b.gd$im.push({label:"Google Plus",address:g.googleplus}),k++));g.linkedin&&((m=d("Linkedin"),m)?m.address!=
g.linkedin&&(m.address=g.linkedin,k++):(b.gd$im.push({label:"Linkedin",address:g.linkedin}),k++));!g.birthdate||b.gContact$birthday&&b.gContact$birthday.when==g.birthdate||(b.gContact$birthday={when:g.birthdate},k++);c("phone_mobile","http://schemas.google.com/g/2005#mobile");c("phone_work","http://schemas.google.com/g/2005#work");c("phone_home","http://schemas.google.com/g/2005#home");c("phone_fax","http://schemas.google.com/g/2005#work_fax");c("phone_other","http://schemas.google.com/g/2005#other");
for(var n=-1,m=-1,p=0;b.gd$structuredPostalAddress&&p<b.gd$structuredPostalAddress.length;p++)-1==n&&"true"==b.gd$structuredPostalAddress[p].primary||"http://schemas.google.com/g/2005#work"==b.gd$structuredPostalAddress[p].rel?n=p:-1==m&&(m=p);-1==n&&0<=m&&(n=m,b.gd$structuredPostalAddress[n].primary="true",m=-1);0<=n?k+=Qq(g,b.gd$structuredPostalAddress[n],"primary"):(n={primary:"true",rel:"http://schemas.google.com/g/2005#work"},p=Qq(g,n,"primary"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=
[]),b.gd$structuredPostalAddress.push(n),k+=p));0<=m?k+=Qq(g,b.gd$structuredPostalAddress[m],"alt"):(n={},p=Qq(g,n,"alt"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=[]),b.gd$structuredPostalAddress.push(n),k+=p));return k};function Tq(a){if(u(a))return a.map(function(a){return Tq(a)});if(A(a)){var b={},c;for(c in a.name_value_list)b[c]=a.name_value_list[c].value;return b}throw Error("Invalid name_value_entries");};function Uq(a,b,c,d,e){c=ra(c,"http")?new td(c):ud(vd(new td,c),"https");zd(c,"");yd(c,null);this.n=c.M();this.L=b;this.I=c.toString().replace(/\/$/,"");this.P=this.I+"/service/v4/rest.php";this.i=d;this.l=e;this.g=null;this.j=a;this.V=new Iq(this.n);this.db=new Tn(this.n,Mq(this.V));this.h=null;this.p=this.s=NaN;this.F=!1;this.history=new Fo(this.db)}E(Uq,bo);h=Uq.prototype;h.M=function(){return this.n};
h.request=function(a,b,c,d,e,f){function g(){m.execute(function(g,k){this.s=C();var l=g;if(x(l))try{g=JSON.parse(l)}catch(m){}f||!g||11!=g.number&&10!=g.number?d.call(e,g,k):this.Uc().u(function(){this.request(a,b,c,d,e,!0)},function(){d.call(e,null,new Wi(0,null,{},"Login fail"))},this)},this)}for(var k="{",l=0;l<b.length;l++)k+=(0==l?"":",")+'"'+b[l]+'":'+JSON.stringify(c[l]);k+="}";l=new Ad;l.add("method",a);l.add("input_type","json");l.add("response_type","json");l.add("rest_data",k);var m=this.j.request(new $h(this.P,
"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},l.toString())),k=C()-this.s;0<k&&100>k?(this.s=100+this.s,Q(this.logger,"request will call after "+k+" ms."),mf(g,k,this)):g.call(this)};
function Vq(a,b,c){var d=["session","module_name"];a=[a.g?a.g.id:null,c.module_name];var e=[!1,!1];if("get_entry_list"==b)b=c.query||"",d.push("query"),a.push(b),e.push(""==b),d.push("order_by"),b=c.order_by||"",a.push(b),e.push(""==b),b=c.offset||0,d.push("offset"),a.push(b),e.push(0==b),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length),b=c.max_results||25,d.push("max_results"),
a.push(b),e.push(null!=c.max_results),b=c.deleted||0,d.push("deleted"),a.push(b),e.push(0==b),c=!!c.favorites,d.push("favorites"),a.push(c),e.push(!1==c);else if("get_available_modules"==b)c=c.filter||"",d.push("filter"),a.push(c),e.push(0==c.length);else if("get_module_fields"==b)c=c.fields||[],d.push("fields"),a.push(c),e.push(0==c.length);else if("get_entries"==b)b=c.ids||[],d.push("ids"),a.push(b),e.push(!1),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||
[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length);else for(var f in c)"module_name"!=f&&(d.push(f),a.push(c[f]),e.push(!1));for(c=e.length-1;0<=c;c--)if(e[c])d.pop(),a.pop();else break;return{keys:d,values:a}}
function Wq(a,b){var c=b.module_name;a.p=C();return Xq(a,"get_entry_list",b).B(function(a){var e=a.result_count,f=a.offset||0,g=a.entry_list,k=parseInt(a.next_offset,10);if(t(e)&&u(g)){if(0<g.length){a=Tq(g);var l=this.L,m=this.M(),n=a;if(l.h)for(var n=u(n)?n:[n],p=0;p<n.length;p++)n[p]&&Yq(l,new Nq(m,c,n[p]));this.db.put(c,a)}return 0<g.length&&e>=g.length&&k>f?(b.offset=k,Wq(this,b)):k}throw Error("Invalid REST respond on entry list query on "+c+": "+JSON.stringify(a));},a)}
function Zq(a,b){var c={module_name:b},d="module/"+b;return a.db.get("Meta",d).B(function(a){return a?a:Xq(this,"get_module_fields",c).B(function(a){a&&a.module_name&&a.module_fields?this.db.put("Meta",a,d):N(this.logger,"Invalid module for "+b+" "+xh(a));return a},this)},a)}
function $q(a,b){var c=new Uj(b,"date_modified",null,!0);return a.db.keys(c,1).B(function(a){var c={};a[0]&&(c.query=b.toLowerCase()+".date_modified>'"+a[0]+"'");c.module_name=b;c.order_by="date_modified";a=Wq(this,c);a.u(function(a){this.logger.info(this+" module "+b+" synced, "+a+" records updated.")},function(a){var c=".";a&&(c=" with "+a.name+": "+a.message);N(this.logger,this+" module "+b+" failed"+c)},this);return a},a)}
function Xq(a,b,c,d){var e=d||0,f=new F;if(!a.g||!a.g.id)return 2>e?(Q(a.logger,"Request require login, tried "+e),a.Uc().B(function(){e++;qb(Xq(a,b,c,e),f)})):(P(a.logger,"Cannot do request, not login. Give up after "+e+" retry"),f.A()),f;d=Vq(a,b,c);a.request(b,d.keys,d.values,function(d,k){k.Ca()?11==d.number&&/invalid/i.test(d.name)?(this.g=null,qb(Xq(a,b,c,e),f)):f.w(d):f.A(k.N()+" "+k.Ha())},a);return f}
h.list=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=0;c<a.length;c++){var d=a[c];if(!A(d))return tb("invalid query at "+c+"");var e=d.store;if(-1==lq.indexOf(e))return tb("invalid store name at "+c+": "+e);var f=d.index;if(!x(f)||0==f.length)return tb("index name missing in "+e);var g=null;null!=d.key?(g=d.key,"ydn$phones"==f?g=jn(g):"ydn$emails"==f&&(g=g.toLowerCase()),g=d.prefix?lj(g):U.only(g)):null!=d.keyRange&&(g=mj(d.keyRange));"id"==f?b.push(this.db.values(e,
g)):Yl(this.db,e,f)?b.push(this.db.values(e,f,g)):b.push(sb([]))}return(new mm(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};
h.search=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=Mq(this.V),d=0;d<a.length;d++){var e=a[d];if(!A(e))return tb("invalid query at "+d+"");var f=e.q;if(!x(f)||0==f.length)return tb("query term missing "+d+"");var g="ft-"+e.store+"-"+(e.index||"name");0<=Ua(c.fullTextCatalogs,function(a){return a.name==g})?(f=this.db.search(g,e.q),e.fetchFull&&(f=f.B(function(a){if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(new qk(a[c].storeName,a[c].primaryKey));return this.db.values(b)}},
this)),b.push(f)):b.push(sb([]))}return(new mm(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};function ar(a,b){var c=b.store;if(!x(c)||0==c.length)return tb("store name required.");var d=b.id;return x(d)&&0!=d.length?a.db.get(c,d):tb("id required.")}
function br(a){if(a.h&&a.h.isLogin)return sb(a.h);var b=new F;a.db.get("Meta","info/server").da(function(a){a&&a.version?(this.h=a,b.w(a)):this.request("get_server_info",[],[],function(a,c){if(0==c.N())this.h=null,b.A("service "+this.P+" not responding");else if(c.Ca()){var f=Yi(c);if((!a||!a.version)&&x(f))try{a=JSON.parse(f)}catch(g){a=Yi(c)}a&&a.version?(f=a,this.h=pc(f),b.w({info:f,about:cr(this)}),this.db.put("Meta",f,"info/server")):(this.h=null,b.A("invalid respond "+Yi(c)))}else this.h=null,
b.A("request fail "+c.N()+" "+c.Ha())},this)},a);return b}function dr(a){var b=new F;a.request("get_available_modules",["filter"],["all"],function(a){b.w(a)},a);return b}function cr(a){var b=a.j,b=b instanceof fo&&/proxy/.test(b.h);return{baseUrl:a.I,domain:a.M(),userName:a.i,isLogin:a.isLogin(),hostPermission:!b}}function er(a){return(new mm([br(a),dr(a)])).B(function(a){return{serverInfo:a[0][1],availableModules:a[1][1],about:cr(this)}},a)}
function fr(a,b,c){var d=[],e;for(e in c)d.push({name:e,value:c[e]});c={module_name:b,name_value_list:d};window.console.log("set_entry",c);return Xq(a,"set_entry",c).B(function(a){if(a&&a.id){var c={id:a.id};a=a.entry_list||{};for(var d in a)c[d]=a[d].value;window.console.log("set_entry result",c);this.db.put(b,c);return c}throw Error("creating "+b+" entry fail");},a)}
function gr(a,b,c){window.console.log(b,c);if(c){var d=hr(b,a.M(),void 0,c.id),e=d.Y,f=new Nq(a.M(),e,c);P(a.logger,"synchronizing "+b+" to "+f);if((f.g?+new Date(f.g.date_modified):NaN)==d.h){var g=new Do("update-gdata-record");Eo(g,c);b=b.data;A(b)&&Ul(b);Rq(b,c)&&fr(a,e,c).u(function(a){A(a)?g.g=Ul(a):g.g=a;this.history.add(g)},function(a){N(this.logger,"Fail to put record "+c.id+" to server "+a.message)},a)}}}
function ir(a,b){for(var c=jr(b),d=0;d<c.length;d++)0<=lq.indexOf(c[d].Y)&&a.db.get(c[d].Y,c[d].g).B(function(a){gr(this,b,a)},a)}function kr(a,b,c){var d={};Rq(c,d);return fr(a,b,d)}h.isLogin=function(){return!(!this.g||!this.g.id)};
h.update=function(){if(this.j&&this.j instanceof fo)this.logger.info(this+" updating skipped since no direct connection is not available.");else{var a;if(this.F)bf(this.logger,"Modules are already updating now at "+a+" / "+lq.length);else{this.F=!0;this.p=C();a=0;var b=this,c=function(){var d=lq[a];d?(P(b.logger,"Syncing module "+d),a++,$q(b,d).da(function(){b.p=C();r.setTimeout(function(){c()},500)})):(bf(b.logger,"Updating module done"),b.F=!1)};c();r.setTimeout(function(){2E3<b.p-C()&&c()},2E3)}}};
h.Uc=function(a,b){a&&(this.i=a);b&&(this.l=b);if(!this.i)return tb("username required.");if(!this.l)return tb("password required.");var c=new F;this.request("login",["user_auth","application_name","name_value_list"],[{user_name:this.i,password:this.l},"Yathit CRM",{language:"",notifyonsave:"false"}],function(a,b){if(a&&a.id)this.g=pc(a),c.w(a);else if(a&&a.description)c.A(a.description+" ("+a.name+")");else{var f=b.N()+" "+b.Ha()+" "+Yi(b);c.A("Login fail: "+f.substr(0,200))}},this,!0);return c};
function lr(a){var b=new F;a.request("logout",[],[],function(a,d){this.g=null;d.Ca()?(N(this.logger,"Logout request fail with "+d.N()+" "+d.Ha()),b.w(!0)):b.A(d.N()+" "+d.Ha())},a,!0);return b}
function mr(a){function b(){f.request(new $h(e.toString())).execute(function(a,b){/sugarcrm/i.test(Yi(b))?d.A("Look like SugarCRM web site, but REST V4 API is not available."):200==b.N()?d.A("Not a SugarCRM web site"):d.A("Invalid respond, "+b.N())})}function c(a,b){var c=new Ad;c.add("method","get_server_info");c.add("input_type","json");c.add("response_type","json");c.add("rest_data","{}");f.request(new $h(a,"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},c.toString())).execute(b)}
var d=new F;a=a.trim();ra(a,"http")||(a="https://"+a);var e=new td(a);zd(e,"");yd(e,null);var f=Yh("proxy"),g=e.ea();a=e.xc;/rest.php$/.test(a)||(/index.php$/.test(a)?xd(g,a.replace("/index.php","")):xd(g,""));var k=g.toString();(function(a,b){c(a+"/service/v4/rest.php",function(a,c){if(200==c.N()){if(!a||!a.version){var d=Yi(c);if(x(d))try{a=JSON.parse(d)}catch(e){b(null,c);return}else a=d}a&&a.version&&b(a,c)}else b(0,c)})})(k,function(a,f){a?(a.isLogin=!1,a.userName=null,a.domain=g.M(),a.baseUrl=
k,d.w(a)):0==a?"https"==e.ic?(ud(g,"http"),setTimeout(function(){c(g.toString(),function(a,c){c.Ca()?d.w(a):b()})},100)):d.A(f.N()+" "+f.Ha()+" "+Yi(f)):b()});return d}h.toString=function(){return"SugarClient:"+this.n};function nr(a){Error.captureStackTrace?Error.captureStackTrace(this,nr):this.stack=Error().stack||"";a&&(this.message=String(a))}E(nr,Error);nr.prototype.name="ydn.gdata.error.InvalidAtomFormatError";function or(a){Error.captureStackTrace?Error.captureStackTrace(this,or):this.stack=Error().stack||"";a&&(this.message=String(a))}E(or,Error);or.prototype.name="ydn.gdata.error.IncompatibleError";var pr="atom app gd xhtml batch openSearch".split(" ");function qr(a){if(!t(this.type))throw new Hh("Abstract class cannot be instantiated.");if(x(a))a={id:{$t:a}};else if(!t(a.id)||!x(a.id.$t))throw new Ch("Invalid GDataFeed");this.id=a.id.$t;this.data=a;t(this.data.entry)?u(this.data.entry)||(this.data.entry=[this.data.entry]):this.data.entry=[];this.j={};this.n={};a=u(this.data.entry)?this.data.entry.length:0;for(var b=0;b<a;b++){var c=this.data.entry[b],c=c.id?c.id.$t:c.Ig?c.Ig.$t:"";if(0==c.length)throw new nr("entry "+b);if(0==c.match(/\w+$/)[0].length)throw new nr("entry "+
b+" of "+c);var d=c.match(/\w+$/)[0];this.j[c]=this.data.entry[b];this.n[d]=this.data.entry[b]}this.i=!0;this.F=[];this.s=new kh(function(){this.dispatchEvent(rr)},300,this);this.qg=null;this.h=NaN;this.p=void 0}E(qr,sh);var rr="i";h=qr.prototype;h.zf=function(){return this.kind};h.logger=R("ydn.gdata.Feed");
h.jb=function(a){var b=new F;Q(this.logger,this+" receiving a task, ready: "+this.i);var c=this;this.i?(this.i=!1,b.da(function(){Q(c.logger,c+" finish the task.");c.i=!0;var a=c.F.shift();a&&a.call(this)}),a.call(this,b)):this.F.push(na(B(a,this),b));return b};h.qg=null;function sr(a){var b;if(!(b=a.qg))if(a=a.je(),t(a)){b=a;for(var c=0;c<Qi.length;c++){var d=(0,Qi[c])(a);if(d){b=d;break}}Q(Oi,"Resolving "+a+" to "+b);b=Pi[b]||null}else b=Pi["default"];return b}h.cf=function(){this.dispatchEvent("e")};
h.Tf=function(){return pr};h.Kg=function(a){a.g()||N(this.logger,"Batch submission failed. "+a.responseText)};
h.nc=function(a,b){var c=this.Tf(),d=void 0;t(c)||(c=pr);for(var e="",f=0;f<c.length;f++)var g=c[f],e=0==f?e+(' xmlns="'+np[g]+'" '):e+(" xmlns:"+g+'="'+np[g]+'" ');d=t(d)?"<id>"+d+"</id>":"";d=Ah("<feed"+e+">"+d+"</feed>");for(f=c=0;e=this.pc(f);f++)if(Dp(e))Bp(e,"");else if(Ep(e.data)){var g="delete"==Cp(e.data),k=!(!e.data.id||!e.data.id.$t);Bp(e,null);var l=zp(new up(null,"entry",e.data),d.documentElement),m=l.getElementsByTagNameNS(pp("batch"),"operation");m[0]?m=m[0]:m=l.appendChild(d.createElementNS(pp("batch"),
"operation"));l=d.createAttribute("type");l.nodeValue=g?"delete":k?"update":"insert";m.setAttributeNode(l);Bp(e,"committed");c++;a&&a.message({id:this.yf(),code:"operation: "+l.nodeValue+" "+e})}if(0==c)return bf(this.logger,this+" Nothing to commit."),0;bf(this.logger,this+" committing "+c+" entries.");d=Bh(d);b?(this.logger.info("Commit ignored for dry run."),window.console.log(d)):(e=B(this.Kg,this),this.L&&this.L.stop(),f=sr(this),g=this.Be(),f.send(g,e,{method:"POST",body:d,headers:{"Content-Type":"application/atom+xml"},
params:{}}));return c};h.ie=function(a){return new Ap(a)};h.pc=function(a){return 0<=a&&a<this.data.entry.length?this.ie(this.data.entry[a]):null};h.xf=function(a){return(a=this.j[a])?this.ie(a):null};
h.save=function(a){if(this.P){var b=this;this.l||(this.l=new kh(function(){this.jb(function(a){var d=b.toJSON(),e=b.data.entry,f,g,k;b.P.V(function(a){a.put("ydn.gdata.feed",d).Fc(function(a){throw a;}).B(function(){f=!0});a.put("ydn.gdata.entry",e).Fc(function(a){throw a;}).B(function(a){k=a.length;g=!0})},["ydn.gdata.feed","ydn.gdata.entry"],"readwrite").u(function(){f&&g?Q(this.logger,b+": saved "+k+" entries."):Q(this.logger,b+": saved failed"+e.length+" entries.");a.w(!0)},function(a){throw a;
},this)})},1E3,this));a?mh(this.l):lh(this.l)}};
function tr(a,b,c){c=c||new F;var d=sr(a);if(!d)return N(a.logger,a+": No transport available."),c.A(Error("No transport available.")),c;d.send(b,function(b){if(200==b.status){a.h=C();b=b.Q?nf(b.Q.responseText):void 0;if(!b.feed)throw new nr("feed missing.");var d=b.feed;if(!t(d))throw b=S(d),new nr(b.substr(0,50));if(d.id.$t!=a.D())throw new or(d.id.$t+" is not "+a.D());var g=b=0,k=u(d.entry)?d.entry:d.entry?[d.entry]:[];b=k.length;0==b&&Q(a.logger,a+": fetch return no result.");for(var l=0;l<b;l++){for(var m=
a,n=k[l],p=n instanceof Ap?n:m.ie(n),q=p,s=0;s<q.mc.length;s++)null!=q.data[q.mc[s]]&&!u(q.data[q.mc[s]])&&(q.data[q.mc[s]]=[q.data[q.mc[s]]]);Bp(q,null);q=q.data;q.batch$status&&(q.batch$status=void 0);q.batch$operation&&(q.batch$operation=void 0);var q=p.D(),v=m.xf(q);(s=!!v)?v.update(p):(v=p.id.match(/\w+$/)[0],m.data.entry.push(n),m.j[q]=p.data,m.n[v]=p.data);!s&&g++}bf(a.logger,a+" "+b+" ("+g+" new) entries received");a.cf();(d=Go(d,"next"))?(a.save(),lh(a.s),a.p=d.$t,tr(a,d.href,c)):(0<b&&(a.save(),
lh(a.s)),c.w(!0))}else N(a.logger,"Fetching "+b.uri+" failed: "+b.status),c.A(!1)});return c}h.toString=function(){return this.type+":"+this.id};function ur(a,b){a.wg&&b.g.set("v",a.wg);b.g.set("alt","json");b.g.set("showdeleted",!0)}
function vr(a,b){var c="lu",d=!1;if("lf"==c){if(a.h){var d=!0,e=new Date(a.h),e=e.toISOString();b.g.set("updated-min",e)}}else if("lu"==c){for(var e=0,f=-1,g,k=0;g=a.pc(k);k++)g=g.data.updated.$t,e<g&&(e=g,f=k);if(e=a.pc(f))e=new Date(e.data.updated.$t),e=new Date(1+ +e),e=e.toISOString(),b.g.set("updated-min",e)}else"lo"==c?(b.g.set("orderby","lastmodified"),a.h&&b.g.set("max-results","1")):c="no";Q(a.logger,a+" updating "+(d?"continue":"begin")+" by "+c)}h.Hh=kp.prototype.ce;h.D=kp.prototype.D;
h.Jh=kp.prototype.Ch;h.Ih=kp.prototype.Bh;h.je=function(){return this.Jh()||""};h.yf=function(){return this.id};h.Be=function(){return this.Ih()};function wr(a){return a.jb(function(a){var c=new td(this.je());ur(this,c);vr(this,c);this.R(qh,!1);tr(this,c.toString()).da(function(c){th(this);c?a.w(!0):a.A(void 0)},this)})}h.update=function(a){return a||!0!==("undefined"==typeof this.g?null:(this.g&qh)==qh)?wr(this):(Q(this.logger,this+" already loaded."),sb(!1))};
h.count=function(a){if(a){a=0;for(var b,c=0;b=this.pc(c);c++)Dp(b)||"deleted"==Cp(b.data)||a++;return a}return this.data.entry.length};h.toJSON=function(){return{id:this.id,key:this.yf(),last_fetch_next_uri:this.p,last_fetch:this.h}};function xr(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{lb:b,ab:a}}function yr(a,b){var c=xr(a),d=xr(b);if(t(c.lb)&&t(d.lb)&&0!=c.lb.length&&0!=d.lb.length&&c.lb!==d.lb)return 0;if(t(c.$a)&&0!=c.$a.length){if(t(d.$a)&&0!=d.$a.length){if(c.$a.length>=d.$a.length){for(var e=0;e<d.$a.length;e++)if(c.$a[e]!=d.$a[e])return 0;return 1}for(e=0;e<c.$a.length;e++)if(c.$a[e]!=d.$a[e])return 0}return-1}return 1}
function zr(a,b){if(!a||!b||0==a.length||0==b.length)return 0;a=a.trim();b=b.trim();var c=xr(a),d=xr(b);return c.lb&&c.ab&&c.lb==d.lb&&c.ab==d.ab?6<=c.ab.length?1:4<=c.ab.length?0.8:0.4:c.ab&&4<=c.ab.length&&c.ab==d.ab?8<=c.ab.length?0.8:4<=c.ab.length?0.6:0.4:0};function Ar(a){Ap.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{Sh:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}E(Ar,Ap);Ar.prototype.logger=R("ydn.gdata.m8.Entry");Ar.prototype.g="3.0";Ar.prototype.type="m8";function Br(a){if(!t(this.kind))throw new Hh("Abstract class cannot be instantiated.");qr.call(this,a);this.user_id=this.D()}E(Br,qr);h=Br.prototype;h.zf=function(){return this.kind};h.wg="3.0";h.type="m8";h.toString=function(){return"Feed:"+this.kind+":"+this.user_id};h.je=function(){return"https://www.google.com/m8/feeds/"+this.zf()+"s/"+this.user_id.replace("@","%40")+"/full?v=3.0"};
h.Be=function(){var a=Br.m.Be.call(this);return a?a:"https://www.google.com/m8/feeds/"+this.zf()+"s/"+this.user_id.replace("@","%40")+"/full/batch?v=3.0"};var Cr=pr.concat(["gContact"]);Br.prototype.Tf=function(){return Cr};function Dr(a,b,c,d,e,f){this.scheme=a;this.domain=b;this.Y=c;this.g=d;this.i=y(e)?e:NaN;this.h=y(f)?f:NaN}function Er(a){if(!A(a)||!x(a.value))return null;var b=Fr(a.value);if(!b)return null;var c=NaN,d=NaN;if(x(a.label)){a=a.label;var e=a.indexOf("#"),f=a.indexOf("-");0<e&&0<f&&f>e&&(c=parseInt(a.substring(e,f),10),d=parseInt(a.substring(f),10))}return new Dr(b[1],b[2],b[3],b[4],c,d)}function Fr(a){return a?a.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null}
Dr.prototype.T=function(){return this.scheme+"://"+this.domain+"/"+this.Y+"/"+this.g};function Gr(a){Ar.call(this,a)}E(Gr,Ar);h=Gr.prototype;h.kind="contact";h.logger=R("ydn.gdata.m8.ContactEntry");h.wf=function(){return"contact"};h.getName=function(a){var b=a?"":this.cd();if(a||0==b.length)a=this.data.gd$name,A(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return va(b)};function Hr(a){var b=a.data.gd$email;a=[];for(var b=u(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function Ir(a){a=a.data.gd$phoneNumber;a=u(a)?a:A(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!ta(a[c].$t)&&b.push(a[c].$t);return b}h.De=function(){var a=Gr.m.De.call(this);if(a.ydn$emails||a.ydn$xp||a.ydn$externalIds)a==this.data&&(a=Ul(this.data)),delete a.ydn$emails,delete a.ydn$xp,delete a.ydn$externalIds;return a};h.mc="link category gd$email gd$im gd$organization gd$phoneNumber gd$structuredPostalAddress gd$formattedAddress".split(" ");
function Jr(a,b){function c(a){var b=Ta(e,function(b){return b.address===a.address});b?b.rel=t(a.rel)?a.rel:b.rel:d(a)}function d(a){a=Ul(a);f&&delete a.primary;t(void 0)&&(a.rel=void 0);e.push(a)}for(var e=[Ul(a.data.gd$email[0])],f=!!a.data.gd$email[0].primary,g=1;g<a.data.gd$email.length;g++)c(a.data.gd$email[g]);for(g=0;g<b.length;g++)c(b[g]);g=Bl(e,a.data.gd$email);g||(a.data.gd$email=e);return!g}
function Kr(a,b){function c(a){var b=Qa(e,function(b){return zr(b.$t,a.$t)}),c=Sh(b);if(0.4<c.value){var b=e[c.index],f=t(a.rel)?a.rel:b.rel;1==c.value?(b.rel=f,b.$t=a.$t):t(a.rel)&&t(b.rel)&&b.rel!==a.rel?d(a,f):(b.rel=f,c=yr(b,a),-1==c?b.$t=a.$t:0==c&&(b.$t=a.$t))}else d(a)}function d(a,b){a=Ul(a);f&&delete a.primary;t(b)&&(a.rel=b);e.push(a)}for(var e=[Ul(a.data.gd$phoneNumber[0])],f=!!a.data.gd$phoneNumber[0].primary,g=1;g<a.data.gd$phoneNumber.length;g++)c(a.data.gd$phoneNumber[g]);for(g=0;g<
b.length;g++)c(b[g]);g=Bl(e,a.data.gd$phoneNumber);g||(a.data.gd$phoneNumber=e);return!g}h.kf=function(a,b){if("gd$phoneNumber"==a){if(null!=this.data.gd$phoneNumber)return Kr(this,b);this.data.gd$phoneNumber=Ul(b);return!0}if("gd$email"==a){if(null!=this.data.gd$email)return Jr(this,b);this.data.gd$email=Ul(b);return!0}return Gr.m.kf.call(this,a,b)};
function hr(a,b,c,d){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=0;e<a.length;e++){var f=Er(a[e]);if(f&&!("sugarcrm"!=f.scheme||b&&b!=f.domain||d&&d!=f.g||c&&c!=f.Y))return f}return null}function jr(a){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var b=[],c=0;c<a.length;c++){var d=Er(a[c]);d&&b.push(d)}return b};function Lr(a){Br.call(this,a)}E(Lr,Br);h=Lr.prototype;h.logger=R("ydn.gdata.m8.ContactFeed");h.kind="contact";h.cf=function(){Lr.m.cf.call(this)};h.xf=function(a){return Lr.m.xf.call(this,a)};h.ie=function(a){return new Gr(a)};h.pc=function(a){return Lr.m.pc.call(this,a)};h.je=function(){return"https://www.google.com/m8/feeds/contacts/"+this.D()+"/full"};h.yf=function(){return"http://www.google.com/m8/feeds/contacts/"+this.D().replace("@","%40")};function Mr(a){function b(a){ra(a,"atom:")&&(a=a.substring(5,a.length));return a.replace("#text","$t").replace(/:/g,"$")}x(a)&&(a=Ah(a));var c={};if(1==a.nodeType){if(0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var e=a.attributes.item(d);c[b(e.nodeName)]=e.nodeValue}}else 3==a.nodeType&&(c=a.nodeValue);if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){var e=a.childNodes.item(d),f=b(e.nodeName);if("undefined"==typeof c[f])"content"==f?(c[f]={$t:Bh(e)},e.namespaceURI&&(c[f].xmlns=
e.namespaceURI)):c[f]=Mr(e);else{if("undefined"==typeof c[f].length){var g=c[f];c[f]=[];c[f].push(g)}c[f].push(Mr(e))}}return c};function Nr(a,b){this.id=b.replace("@","%40");this.client=this.g=null;this.i=new nh(function(){bf(this.logger,"updating gdata "+this);Or(this).u(function(a){this.logger.info(this+" synced, "+a+" new entries updated.")},function(){N(this.logger,this+" update failed.")},this)},6E4,this);this.j=a;this.h=null}h=Nr.prototype;h.logger=R("ydn.ds.gdata.GData");h.update=function(){oh(this.i)};h.J=function(){return this.j};function Pr(a){var b=new F;a.execute(function(a,d){a?b.w(a):b.A(d)});return b}
function Qr(a,b){var c=(a.client?a.client:Yh("gse")).request(b);return Pr(c).u(function(a){a=a.feed;if(!a.entry)return 0;for(var b=(new Lr(a)).Hh("next"),c=a.entry.length,g=!!this.h,k=0;g&&k<c;k++){var l=a.entry[k];l.gContact$externalId&&this.h(l)}return this.J().put(this.G(),a.entry).B(function(){return b?Qr(this,new $h(b.href)).B(function(a){return c+a},this):c},this)},function(a){N(this.logger,"fetching fail "+(a?a.N()+" "+a.Ha():""))},a)}h.getParams=function(){return{alt:"json"}};
h.get=function(a){return x(a)&&0!=a.length?this.J().get(this.G(),a):tb("invalid key")};h.put=function(a){return this.J().put(this.G(),a)};h.vg=function(a){return new Ap(a)};function Rr(a,b){return a.vg(b).nc().B(function(a){a=Mr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+xh(a));this.J().put(this.G(),b);return b},a)}
function Or(a){if(!a.J().getName())return tb(Error("database not ready"));if(!a.g){var b=new Uj(a.G(),"updated.$t",null,!0);a.g=a.J().keys(b,1).B(function(a){var b=this.getParams();b.orderby="lastmodified";a[0]?(b.sortorder="descending",a=(new Date(1+ +new Date(a[0]))).toISOString(),b["updated-min"]=a):b.sortorder="ascending";return Qr(this,new $h(Sr(this)+"/full","GET",b)).da(function(){this.g=null},this)},a)}return a.g}h.toString=function(){return"GData:contact:"+this.id.replace("%40","@")};function Tr(a,b){Nr.call(this,a,b)}E(Tr,Nr);Tr.prototype.G=function(){return"contact"};Tr.prototype.getParams=function(){var a=Tr.m.getParams.call(this);a.v="3.0";return a};function Sr(a){return"https://www.google.com/m8/feeds/contacts/"+a.id}Tr.prototype.vg=function(a){var b=!!a.id;b||(a.id={$t:Sr(this)+"/base/0"});var c=new Gr(a);b||delete a.id;return c};function Ur(a,b){return b&&0!=b.length?a.J().values(a.G(),"ydn$emails",U.only(b),100,0,!1,!0):sb([])}
function Vr(a,b){var c=U.only(b.T());return a.J().values(a.G(),"ydn$externalIds",c).B(function(){},a)}
function Wr(a,b,c){return a.J().get(a.G(),b).B(function(a){if(a){if(!c||!c.label||!c.value)return tb("invalid external_id_data");var e=c.label,f=c.value;a.gContact$externalId=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var g=new Gr(a),k=!1,l=0;l<a.gContact$externalId.length;l++)if(a.gContact$externalId[l].value==f){a.gContact$externalId[l].label=e;k=!0;break}k||a.gContact$externalId.push({label:e,value:f});Bp(g,"modified");return g.nc().B(function(a){a=
Mr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+xh(a));this.J().put(this.G(),b);return b},this)}throw Error("gdata entry "+b+" not found");},a)};function Xr(a){this.g=a;this.i=0;this.j=[];this.l=[0,0,0,0];this.h=new Kinetic.Layer;a=this.g/2;var b=a/3;this.n=[a,a,b,this.g-b];this.p=[a,b,this.g-b,this.g-b]}Xr.prototype.clear=function(){this.h=new Kinetic.Layer};var Yr=Math.pow(2,2),Zr=Math.pow(2,3),$r=Math.pow(2,4),as=Math.pow(2,5);Xr.prototype.R=function(a,b){this.i=b?this.i|a:this.i&~a};
function bs(a){a.clear();for(var b=[["#C2C2C2","#6B6B6B","#525252","#3D3D3D"],["#FAFAFA","#D8D8D8","#D8D8D8","#C2C2C2"],["#FCCA03","#DD1812","#0140CA","#16A61E"]],c=["m252,324c0,-59.647 48.354,-108 108,-108c26.90799,0 51.51501,9.843 70.42401,26.121c1.03198,-8.564 1.57599,-17.27901 1.57599,-26.121c0,-119.126 -96.43701,-215.722 -215.49899,-215.994c40.89099,0.137 73.99899,33.321 73.99899,74.244c0,41.007 -33.24301,74.25 -74.25,74.25c-41.008,0 -74.25,-33.243 -74.25,-74.25c0,-40.979 33.19701,-74.203 74.16701,-74.248c-0.05602,0 -0.11201,-0.002 -0.16701,-0.002c-119.294,0 -216,96.707 -216,216c0,8.843 0.544,17.55701 1.577,26.121c18.908,-16.278 43.515,-26.121 70.423,-26.121c59.646,0 108,48.353 108,108c0,37.93399 -19.561,71.29401 -49.14301,90.56c26.127,11.21701 54.90701,17.44 85.14301,17.44s59.01599,-6.22299 85.14301,-17.44c-29.582,-19.26599 -49.14301,-52.62601 -49.14301,-90.56z",
"m142,74.25c0,41.007 33.242,74.25 74.25,74.25c41.00699,0 74.25,-33.243 74.25,-74.25c0,-40.923 -33.108,-74.107 -73.99899,-74.244c-0.112,0 -0.22301,-0.004 -0.334,-0.004c-40.97,0.045 -74.16701,33.269 -74.16701,74.248z","m180,324c0,-59.647 -48.354,-108 -108,-108c-26.908,0 -51.515,9.843 -70.424,26.121c9.366,77.69 59.967,142.67798 129.28099,172.43799c29.582,-19.26498 49.14301,-52.625 49.14301,-90.55899z","m430.42401,242.121c-18.909,-16.278 -43.51602,-26.121 -70.42401,-26.121c-59.646,0 -108,48.353 -108,108c0,37.93399 19.561,71.29401 49.142,90.56c69.315,-29.76199 119.91602,-94.74899 129.28201,-172.439z"],
d=b[0].slice(),e=[Yr,Zr,$r,as],f=0;f<e.length;f++){var g=e[f];(a.i&g)==g&&(d[f]=b[2][f])}b=new Kinetic.Group({scaleX:a.g/435,scaleY:a.g/435});e=new Kinetic.Group;for(f=0;f<c.length;f++)a.j[f]=new Kinetic.Path({data:c[f],fill:d[f]}),0<a.l[f]&&(g=a.g/19*8,g=new Kinetic.Text({x:a.n[f]-g/4,y:a.p[f]-g/2,text:String(a.l[f]),fontSize:g,fontFamily:"sans-serif",fill:"white"}),e.add(g)),b.add(a.j[f]);a.h.add(b);a.h.add(e);return a.h};function cs(a){this.g=document.createElement("div");this.h=a||19;this.i=new Xr(this.h);this.j=new kh(function(){this.render()},100,this);chrome.runtime.onSuspend&&chrome.runtime.onSuspend.addListener(function(){chrome.browserAction.setTitle({title:"suspended"});this.R(Zr,!1);this.R($r,!1);this.R(as,!1);this.R(Yr,!1);this.render()}.bind(this))}cs.prototype.o=function(){return this.g};cs.prototype.R=function(a,b){this.i.R(a,b);mh(this.j)};
cs.prototype.render=function(){this.g.parentElement||document.body.appendChild(this.g);(new Kinetic.Stage({container:this.g,width:this.h,height:this.h})).add(bs(this.i));if(chrome.browserAction){var a=this.g.querySelector("canvas"),b=a.getContext("2d");chrome.browserAction.setIcon({imageData:b.getImageData(0,0,a.width,a.height)})}};function zo(a,b){this.g=a;this.filter=b||null;var c=this;setTimeout(function(){ds(c)},6E5*Math.random())}
function ds(a){var b=a.g.getName(),c={"Content-Type":"application/json"};a.g.values("log",null,20).B(function(a){if(0!=a.length){var e=a.map(function(a){return a.key});a=JSON.stringify(a);a=new $h("https://mhardartway.s3.amazonaws.com/"+(b+"/"+e[0]),"PUT",null,c,a);var f=Yh(),e=e.map(function(a){return new qk("log",a)});f.request(a).execute(function(a,b){b.Ca()&&this.g.remove(e).B(function(a){a==e.length&&ds(this)},this)},this)}},a)}zo.prototype.log=function(){};function es(){this.V=null;this.g={};this.h=null;var a=this.L=new Wh,b=chrome.extension.getURL("option-page.html");a.p=b;this.I=new Un;this.i=this.p=this.l=this.s=null;this.F=new vg(new zg,"XMLHttpRequest"+location.host);this.n=new cs;chrome.permissions.onAdded.addListener(this.ih.bind(this))}h=es.prototype;h.logger=R("ydn.crm.app.App");
h.ih=function(a){for(var b=(a=a.origins)?a.length:0,c=0;c<b;c++){var d=a[c].match(/https:\/\/([^\/]+)/);if(d){var d=d[1],e=this.g[d];if(e&&(bf(this.logger,"host permission granted to "+e),e.j instanceof fo)){var f=Yh("default");this.g[d]=new Uq(f,e.L,e.I,e.i,e.l);this.g[d].update()}}}};h.init=function(){P(this.logger,"init "+this);this.n.R(Yr,!0);so||(Ao(),so=new ho(vo(),void 0,"https://yathit-app.appspot.com",1,!0),Ui(so,Zh))};
function fs(a,b){function c(a){return a.Uc().B(function(){var b=a.isLogin()?a.i+"@":" (not login) ";this.logger.info("connected to sugarcrm client: "+b+e);a.isLogin()&&(this.g[e]=a,this.F.set(k,l),b=Object.keys(this.g),$n(this.I,b),a.update(),gs(this));return cr(a)},this)}var d=b.baseUrl,e=b.domain||d;if(!e)return tb("domain or url required.");e=e.trim();ra(e,"http")&&(e=(new td(e)).M());/\//.test(e)&&(e=(new td("https://"+e)).M());if(d&&(d=d.trim(),!ra(d,"http"))){var d=d.replace(/:?\/\//,""),f=
new td("https://"+d);f.xc||xd(f,"/");d=f.toString()}var g=a.g[e],k="sugar-client-"+e,l=a.F.get(k)||{};if(g)return g.isLogin()?sb(cr(g)):c.call(a,g);var m=b.userName||l.userName;d||(d=l.base_url);d||(d="https://"+e+"/");if(!m)return P(a.logger,"username not found in "+JSON.stringify(b)),tb("username required");var n=b.password;n?b.hashed||(n=CryptoJS.MD5(n).toString()):n=l.password;if(!n)return P(a.logger,"password not found in "+JSON.stringify(b)),tb("password required.");l.userName=m;l.password=
n;l.base_url=d;var p=new F;chrome.permissions.contains({origins:[d+"/"]},function(b){b||N(a.logger,"host permission required for "+d);b=b?Yh("default"):Yh("proxy");g=new Uq(b,a,d,m,n);qb(c.call(a,g),p)});return p}function hs(a,b,c,d){return 0<=kq.indexOf(b)?a.h.get(c).B(function(a){if(a){var f=kq[kq.indexOf(b)];return kr(d,f,a).B(function(a){if(a&&a.id)return a;throw Error("Set Entry to "+f+" failed");},this)}throw Error("contact entry "+c+" not found");},a):tb(new Ch("invalid module name "+b))}
function Yq(a,b){var c=new Dr("sugarcrm",b.M(),b.Y,b.D());Vr(a.h,c).B(function(a){for(var c=0;c<a.length;c++){var f=a[c];0<Sq(b,f)&&this.h.put(f)}},a)}function gs(a){var b=!1,c;for(c in a.g)if(a.g[c].isLogin()){b=!0;break}a.n.R(Yr,!0);a.n.R(as,a.isLogin());a.n.R(Zr,b)}
function is(a,b){if(!b)return tb("domain required");a.F.remove("sugar-client-"+b);return Zn(a.I).B(function(a){a=a||[];var d=a.indexOf(b);0<=d&&(a.splice(d,1),$n(this.I,a));return this.g[b]?lr(this.g[b]).B(function(){delete this.g[b];this.logger.info("SugarCRM "+b+" removed.");gs(this);return!0},this):!1},a)}
h.qh=function(a){for(var b=u(a.gContact$externalId)?a.gContact$externalId:[a.gContact$externalId],c=0;c<b.length;c++)if(b[c]&&b[c].value&&b[c].label){var d=Fr(b[c].value);d&&"sugarcrm"==d[1]&&(d=d[2],this.g[d]&&ir(this.g[d],new Gr(a)))}};function js(a){a.h=new Tr(a.I.g,a.i.email);var b=Yh("gse");a.h.client=b;a.h.h=a.qh.bind(a);a.h.update()}
function ks(a,b){var c=new F,d=b.email||"";if(a.i&&a.i.email==d)return P(a.logger,"already running for "+d),c.w(a.i),c;a.i=b;a.i.updated=C();d?(a.logger.info(d+" login to YDN server"),Bo(a),Vn(a.I,b.Id.$t),js(a),Zn(a.I).B(function(a){a=a||[];for(var b=0;b<a.length;b++)a[b]&&fs(this,{domain:a[b]})},a),c.w(a.i),a.isLogin()?(a.n.R(as,!0),chrome.browserAction.setTitle({title:"Ready"})):(a.n.R(as,!1),chrome.browserAction.setTitle({title:"Login required."}))):(a.logger.info("Not login to YDN server"),c.w(a.i),
a.n.R(as,!1),chrome.browserAction.setTitle({title:"Login required."}));return c}function ls(a){var b=new F;Co().request(new $h("/token","DELETE")).execute(function(a,d){d.Ca()?(this.l=this.s=null,b.w(null)):b.A("error "+d.Ha())},a);return b}
function ms(a,b){var c=A(b)?b:{last_login:"1"},d=Co(),e=new F;d.request(new $h("/audit","GET",c)).execute(function(a,b){if(b.Ca()){if(a.LastLoginRecord){var c=a.LastLoginRecord;if(c.timestamp){var d;d=c.timestamp-C();d=Math.abs(d);if(6E4>d)d="0 minutes";else{var m=Math.floor(d/864E5);d%=864E5;var n=Math.floor(d/36E5),p=Math.floor(d%36E5/6E4),q=Td(String(m)),s=Td(String(n)),v=Td(String(p));d=m*(n+p)?" ":"";var z=n*p?" ":"",m=Fe("{COUNT, plural, =0 {}=1 {{TEXT} day}other {{TEXT} days}}",m,q),n=Fe("{COUNT, plural, =0 {}=1 {{TEXT} hour}other {{TEXT} hours}}",
n,s),p=Fe("{COUNT, plural, =0 {}=1 {{TEXT} minute}other {{TEXT} minutes}}",p,v);d=m+(d+(n+(z+p)))}c.ago=d}}e.w(a)}else e.A(b)},a);return e}
function hj(a,b){if(a.l)return a.l;if(a.s&&a.s.expires<C())return sb(a.s);a.l=new F;var c={url:b||chrome.extension.getURL("option-page.html")},c=new $h("/token","GET",c);Co().request(c).execute(function(a,b){if(b.Ca()){var c=a.Tokens[0];c.has_token?(c.expires=1E3*c.expires_in+C(),this.s=c,this.l.w(c)):this.l.A(c)}else this.s=null,this.l.A(b);this.l=null},a);return a.l}h.isLogin=function(){return!!this.i&&this.i.is_login};
function ns(a,b){if(a.p)return a.p;a.p=Xh(a.L,b).B(function(b){return ks(this,b).B(function(){a.isLogin()?setTimeout(function(){a.p=null},9E5):a.p=null},function(a){this.logger.info("Attamping to login YDN server fail: "+xh(a))})},a);return a.p}function os(a){a.p=null;a.i=null;a.n.R(as,!1)}h.toString=function(){return"SugarApp:0.7.3"};function ps(){es.call(this);this.j={};qs(this)}E(ps,es);ps.prototype.logger=R("ydn.crm.app.EventPage");
function rs(a,b,c){var d=c.req;c.done=!0;var e=null!=c.data?c.data:{};P(a.logger,"service req: "+d+":"+c.id);if("app-setting"==d)c.data=r.localStorage.getItem("app-setting"),b.postMessage(c);else if("echo"==d)P(a.logger,"resp: "+d+":"+c.id),b.postMessage(c);else if("gdata-fetch"==d)e=c.data,"contact"==e?a.h?Or(a.h).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):(c.error="gdata not ready",b.postMessage(c)):(c.error="invalid kind "+e,b.postMessage(c));
else if("gdata-list-contact-by-email"==d)Ur(a.h,c.data).B(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token"==d)hj(a,c.data).da(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("feed-log"==d){var f=e.offset||0,e=e.limit||100;no.g.values("db-logger",null,e||100,f||0,!0).da(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c)}else if("feed-log-info"==d)f=
e.offset||0,e=e.limit||100,po(e,f).da(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token-revoke"==d)ls(a).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("list-sugarcrm"==d){e=[];for(f in a.g)e.push(cr(a.g[f]));P(a.logger,"resp: "+c.req+":"+c.id);c.data=e;b.postMessage(c)}else"log-bug"==d?(Ni(c.data),
b.postMessage(c)):"login-info"==d?ns(a,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="invalid login";b.postMessage(this)},c):"logged-in"==d?(ns(a,null).B(function(b){ss(a,{req:d,info:b})}),b.postMessage(c)):"logout"==d?(os(a),ss(a,{req:d}),b.postMessage(c)):"new-entry"==d?A(c.data)?Rr(a.h,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error=
"failed to create a new entry";b.postMessage(this)},c):(c.error="Invalid gdata entry data",b.postMessage(c)):"new-sugarcrm"==d?fs(a,c.data).u(function(){P(a.logger,"resp: "+this.req+":"+this.id);this.data=!0;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"remove-sugar"==d?is(a,c.data).da(function(a){this.data=a;b.postMessage(this)},c):"server-audit-log"==d?ms(a,e).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"sugar-server-info"==
d?(e=c.data,e=/https?:/.test(e)?new td(e):vd(new td,e),(e=a.g[e.M()])?br(e).B(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c):mr(c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},c)):"user-setting"==d?ao().B(function(a){this.data=a;b.postMessage(this)},c):N(a.logger,"Main channel unknown req: "+d)}
function ts(a,b,c,d){var e=d.req;d.done=!0;bf(a.logger,"sugar service req: "+c+":"+e+":"+d.id);if(a.isLogin())if("about"==e)d.data=cr(c),b.postMessage(d);else if("details"==e)er(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("echo"==e)b.postMessage(d);else if("get"==e)ar(c,d.data).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=
a;b.postMessage(this)},d);else if("fetch-module"==e)$q(c,d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id+" "+c);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("info-module"==e)Zq(c,d.data).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d);else if("import-gdata"==e){var f=d.data,g=f?f["gdata-id"]:"";g?
(c=hs(a,f.module,g,c),c.u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d)):(N(a.logger,"resp error: "+e+":"+d.id),d.error="gdata id required",b.postMessage(d))}else"link"==e?(c=a.h,(e=d.data["gdata-id"])?Wr(c,e,d.data["external-id"]).u(function(a){this.data=a;b.postMessage(this)},function(c){N(a.logger,"error linking gdata "+this.req+":"+this.id);this.error=c.name+": "+c.message;b.postMessage(this)},d):(d.error="gdata-id not required",b.postMessage(d))):
"list"==e?c.list(d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"list-module"==e?dr(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):"login"==e?fs(a,d.data).u(function(c){this.data=c;b.postMessage(this);gs(a)},function(a){this.error=
a;b.postMessage(this)},d):"put-record"==e?(e=d.data.module)?(f=d.data.record,A(f)?fr(c,e,f).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="record object required",b.postMessage(d))):(d.error="module required",b.postMessage(d)):"search"==e?(c=c.search(d.data),c.u(function(c){this.done=!0;P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+
this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d)):"server-info"==e?br(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"sync-entry"==e?(e=d.data,a.h.get(e).u(function(c){c?new Gr(c):(c="GData entry "+this.data+" not found.",P(a.logger,c),this.error=c,b.postMessage(this))},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);
this.error=c;b.postMessage(this)},d)):"rest"==e?(g=d.data,A(g)?(f=g.method,g=g.params,x(f)&&0!=f.length?A(g)?Xq(c,f,g).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="REST parameter must be an object",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d)):(d.error="method must be valid string",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d))):(d.error="REST parameter must be an object",P(a.logger,
"resp: error "+e+":"+d.id),b.postMessage(d))):N(a.logger,c+" unknown req: "+e);else d.error="Not login",b.postMessage(d)}function us(a){var b=!1,c;for(c in a.j)"gmail"==a.j[c].group&&(b=!0);a.n.R($r,b)}function ss(a,b){for(var c in a.j){var d=a.j[c];"gmail"==d.group&&d.port.postMessage(b)}}ps.prototype.P=function(){return{sugars:this.g,gdata:this.h,ports:this.j,user_info:this.i}};
function qs(a){chrome.runtime.onMessage.addListener(function(b,c,d){c.url&&/https?:\/\/mail.google.com/.test(c.url)&&(bf(a.logger,"injecting jsc/ydn.crm-0.7.2.js to "+c.url),chrome.tabs.executeScript(null,{file:"jsc/ydn.crm-0.7.2.js"},function(){chrome.tabs.executeScript(null,{code:"app = runInjApp();"},function(){bf(a.logger,"jsc/ydn.crm-0.7.2.js injected");d("jsc/ydn.crm-0.7.2.js")})}))});chrome.runtime.onConnect.addListener(function(b){var c=b.sender.url,d=b.name.substr(0,b.name.lastIndexOf("-"));
Va(ed,d)?(bf(a.logger,"Channel "+b.name+" connected for "+c),a.j[b.name]={name:b.name,group:d,port:b},us(a),b.onMessage.addListener(function(c){if(c&&A(c)){if("close"==c.req)a.logger.info("closing "+b.name),delete a.j[b.name],b.disconnect(),us(a);else if(!c.id){N(a.logger,"Unknown group in pipe info "+b.name);return}if("sugarcrm"==c.group){var d=c.name,g=a.g[d];g?ts(a,b,g,c):N(a.logger,"SugarCRM instance "+d+" not found.")}else if("gmail"==c.group)for(d in a.j)g=a.j[d],g.group!=d||c.name&&c.name!=
g.name||g.port.postMessage(c);else rs(a,b,c)}else N(a.logger,"invalid message package: "+c)}),b.onDisconnect.addListener(function(){bf(a.logger,"disconnected "+b.name);delete a.j[b.name];us(a)})):N(a.logger,"channel "+b.name+" ignored from "+c)});bf(a.logger,"event page start listening incoming connection")};oa("ydn.debug.log",Li);function vs(a){chrome.storage.local.get("ydn-crm-track",function(b){var c=b["ydn-crm-track"];b=chrome.runtime.getURL("jsc/ydn.crm-0.7.3.js");navigator.onLine&&"Edge"==c?b="https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm-edge.js":"Beta"==c?b=chrome.runtime.getURL("jsc/ydn.crm-0.7.3.js"):"RC"==c&&(b=chrome.runtime.getURL("jsc/ydn.crm-0.7.3.js"));c=document.createElement("script");c.onload=a;c.type="text/javascript";chrome.storage.local.set({"ydn-crm-src":b});c.src=b;document.getElementsByTagName("head")[0].appendChild(c)})}
oa("loadApp",vs);function ws(a){K.call(this,"navigate");this.g=a}E(ws,K);function xs(a){L.call(this);this.g=a||window;Bc(this.g,"popstate",this.Pd,!1,this);Bc(this.g,"hashchange",this.Pd,!1,this)}E(xs,L);h=xs.prototype;h.Ge=!1;h.xh="/";h.setEnabled=function(a){a!=this.Ge&&(this.Ge=a)&&this.dispatchEvent(new ws(this.getToken()))};h.getToken=function(){var a=this.g.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};h.H=function(){Ic(this.g,"popstate",this.Pd,!1,this);Ic(this.g,"hashchange",this.Pd,!1,this)};h.Pd=function(){this.Ge&&this.dispatchEvent(new ws(this.getToken()))};function ys(){}da(ys);ys.prototype.g=0;function zs(a){L.call(this);this.g=a||Kg();this.Wd=As}E(zs,L);zs.prototype.$=ys.X();var As=null;function Bs(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}h=zs.prototype;h.sc=null;h.Z=!1;h.W=null;h.Wd=null;h.K=null;h.Ja=null;h.Ma=null;h.gb=null;
h.sg=!1;h.D=function(){return this.sc||(this.sc="ydn:"+(this.$.g++).toString(36))};function Cs(a,b){if(a.Ja&&a.Ja.gb){var c=a.Ja.gb,d=a.sc;d in c&&delete c[d];mc(a.Ja.gb,b,a)}a.sc=b}h.o=function(){return this.W};function Ds(a){return a.l||(a.l=new gf(a))}function Es(a,b){if(a==b)throw Error("Unable to set parent component");var c;if(c=b)if(c=a.Ja)if(c=a.sc){c=a.Ja;var d=a.sc;c=(c.gb&&d?nc(c.gb,d)||null:null)&&a.Ja!=b}if(c)throw Error("Unable to set parent component");a.Ja=b;zs.m.qf.call(a,b)}
h.getParent=function(){return this.Ja};h.qf=function(a){if(this.Ja&&this.Ja!=a)throw Error("Method not supported");zs.m.qf.call(this,a)};h.za=function(){this.W=this.g.createElement("div")};h.render=function(a){Fs(this,a)};function Fs(a,b,c){if(a.Z)throw Error("Component already rendered");a.W||a.za();b?b.insertBefore(a.W,c||null):a.g.g.body.appendChild(a.W);a.Ja&&!a.Ja.Z||a.S()}
function Gs(a,b){if(a.Z)throw Error("Component already rendered");if(b&&a.Le(b)){a.sg=!0;var c=Mg(b);a.g&&a.g.g==c||(a.g=Kg(b));a.Vb(b);a.S()}else throw Error("Invalid element to decorate");}h.Le=function(){return!0};h.Vb=function(a){this.W=a};h.S=function(){this.Z=!0;Hs(this,function(a){!a.Z&&a.o()&&a.S()})};h.ob=function(){Hs(this,function(a){a.Z&&a.ob()});this.l&&this.l.removeAll();this.Z=!1};
h.H=function(){this.Z&&this.ob();this.l&&(this.l.qa(),delete this.l);Hs(this,function(a){a.qa()});!this.sg&&this.W&&Xg(this.W);this.Ja=this.K=this.W=this.gb=this.Ma=null;zs.m.H.call(this)};h.oa=function(a){this.K=a};h.aa=function(a,b){this.me(a,Is(this),b)};
h.me=function(a,b,c){if(a.Z&&(c||!this.Z))throw Error("Component already rendered");if(0>b||b>Is(this))throw Error("Child component index out of bounds");this.gb&&this.Ma||(this.gb={},this.Ma=[]);if(a.getParent()==this){var d=a.D();this.gb[d]=a;Xa(this.Ma,a)}else mc(this.gb,a.D(),a);Es(a,this);bb(this.Ma,b,0,a);a.Z&&this.Z&&a.getParent()==this?(c=this.Aa(),c.insertBefore(a.o(),c.childNodes[b]||null)):c?(this.W||this.za(),b=Js(this,b+1),Fs(a,this.Aa(),b?b.W:null)):this.Z&&!a.Z&&a.W&&a.W.parentNode&&
1==a.W.parentNode.nodeType&&a.S()};h.Aa=function(){return this.W};function Ks(a){null==a.Wd&&(a.Wd=vi(a.Z?a.W:a.g.g.body));return a.Wd}function Is(a){return a.Ma?a.Ma.length:0}function Js(a,b){return a.Ma?a.Ma[b]||null:null}function Hs(a,b,c){a.Ma&&Oa(a.Ma,b,c)}function Ls(a,b){return a.Ma&&b?Na(a.Ma,b):-1};function Ms(a,b,c,d,e){if(!(H||Jb&&Ub("525")))return!0;if(Cb&&e)return Ns(a);if(e&&!d)return!1;y(b)&&(b=Os(b));if(!c&&(17==b||18==b||Cb&&91==b))return!1;if(Jb&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(H&&d&&b==a)return!1;switch(a){case 13:return!(H&&H&&9<=Wb);case 27:return!Jb}return Ns(a)}
function Ns(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||Jb&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Os(a){if(Ib)a=Ps(a);else if(Cb&&Jb)a:switch(a){case 93:a=91;break a}return a}
function Ps(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Qs(a,b){L.call(this);a&&Rs(this,a,b)}E(Qs,L);h=Qs.prototype;h.qc=null;h.Kd=null;h.df=null;h.Ld=null;h.Ua=-1;h.Jb=-1;h.pe=!1;
var Ss={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ts={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Us=H||Jb&&Ub("525"),Vs=Cb&&Ib;h=Qs.prototype;
h.eh=function(a){Jb&&(17==this.Ua&&!a.ctrlKey||18==this.Ua&&!a.altKey||Cb&&91==this.Ua&&!a.metaKey)&&(this.Jb=this.Ua=-1);-1==this.Ua&&(a.ctrlKey&&17!=a.g?this.Ua=17:a.altKey&&18!=a.g?this.Ua=18:a.metaKey&&91!=a.g&&(this.Ua=91));Us&&!Ms(a.g,this.Ua,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Jb=Os(a.g),Vs&&(this.pe=a.altKey))};h.fh=function(a){this.Jb=this.Ua=-1;this.pe=a.altKey};
h.handleEvent=function(a){var b=a.h,c,d,e=b.altKey;H&&"keypress"==a.type?c=this.Jb:Jb&&"keypress"==a.type?c=this.Jb:Hb?c=this.Jb:(c=b.keyCode||this.Jb,d=b.charCode||0,Vs&&(e=this.pe),Cb&&63==d&&224==c&&(c=191));d=c=Os(c);var f=b.keyIdentifier;c?63232<=c&&c in Ss?d=Ss[c]:25==c&&a.shiftKey&&(d=9):f&&f in Ts&&(d=Ts[f]);this.Ua=d;a=new Ws(d,0,0,b);a.altKey=e;this.dispatchEvent(a)};h.o=function(){return this.qc};
function Rs(a,b,c){a.Ld&&Xs(a);a.qc=b;a.Kd=Bc(a.qc,"keypress",a,c);a.df=Bc(a.qc,"keydown",a.eh,c,a);a.Ld=Bc(a.qc,"keyup",a.fh,c,a)}function Xs(a){a.Kd&&(Jc(a.Kd),Jc(a.df),Jc(a.Ld),a.Kd=null,a.df=null,a.Ld=null);a.qc=null;a.Ua=-1;a.Jb=-1}h.H=function(){Qs.m.H.call(this);Xs(this)};function Ws(a,b,c,d){ac.call(this,d);this.type="key";this.g=a}E(Ws,ac);var Ys;function Zs(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function $s(a,b,c){w(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Ys||(Ys={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Ys,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function at(){}var bt;da(at);h=at.prototype;h.Fb=function(){};h.U=function(a){var b=a.g.t("div",ct(this,a).join(" "),a.ra());dt(this,a,b);return b};h.Ba=function(a){return a};function et(a,b,c){if(a=a.o?a.o():a)if(H&&!Ub("7")){var d=ft(Dg(a),b);d.push(b);na(c?Eg:Fg,a).apply(null,d)}else c?Eg(a,b):Fg(a,b)}h.Dd=function(){return!0};
h.ua=function(a,b){b.id&&Cs(a,b.id);var c=this.Ba(b);c&&c.firstChild?gt(a,c.firstChild.nextSibling?$a(c.childNodes):c.firstChild):a.Gb=null;var d=0,e=this.C(),f=this.C(),g=!1,k=!1,c=!1,l=Dg(b);Oa(l,function(a){g||a!=e?k||a!=f?d|=this.Fe(a):k=!0:(g=!0,f==e&&(k=!0))},this);a.Hb=d;g||(l.push(e),f==e&&(k=!0));k||l.push(f);var m=a.ye;m&&l.push.apply(l,m);if(H&&!Ub("7")){var n=ft(l);0<n.length&&(l.push.apply(l,n),c=!0)}if(!g||!k||m||c)b.className=l.join(" ");dt(this,a,b);return b};
h.Zf=function(a){Ks(a)&&this.Te(a.o(),!0);a.isEnabled()&&this.uc(a,a.Fa)};function dt(a,b,c){b.Fa||$s(c,"hidden",!b.Fa);b.isEnabled()||a.Oa(c,1,!b.isEnabled());b.ma&8&&a.Oa(c,8,ht(b,8));b.ma&16&&a.Oa(c,16,ht(b,16));b.ma&64&&a.Oa(c,64,ht(b,64))}h.Ed=function(a,b){Ci(a,!b,!H&&!Hb)};h.Te=function(a,b){et(a,this.C()+"-rtl",b)};h.Se=function(a){var b;return a.ma&32&&(b=a.i.ac(a))?ch(b)&&dh(b):!1};
h.uc=function(a,b){var c;if(a.ma&32&&(c=a.i.ac(a))){if(!b&&ht(a,32)){try{c.blur()}catch(d){}ht(a,32)&&a.Fd(null)}(ch(c)&&dh(c))!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};h.R=function(a,b,c){var d=a.o();if(d){var e=this.Jc(b);e&&et(a,e,c);this.Oa(d,b,c)}};h.Oa=function(a,b,c){bt||(bt={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=bt[b])&&$s(a,b,c)};
h.tc=function(a,b){var c=this.Ba(a);if(c&&(Vg(c),b))if(x(b))$g(c,b);else{var d=function(a){if(a){var b=Mg(c);c.appendChild(x(a)?b.createTextNode(a):a)}};u(b)?Oa(b,d):!w(b)||"nodeType"in b?d(b):Oa($a(b),d)}};h.ac=function(a){return a.o()};h.C=function(){return"goog-control"};function ct(a,b){var c=a.C(),d=[c],e=a.C();e!=c&&d.push(e);c=b.Hb;for(e=[];c;){var f=c&-c;e.push(a.Jc(f));c&=~f}d.push.apply(d,e);(c=b.ye)&&d.push.apply(d,c);H&&!Ub("7")&&d.push.apply(d,ft(d));return d}
function ft(a,b){var c=[];b&&(a=a.concat([b]));Oa([],function(d){!Sa(d,na(Va,a))||b&&!Va(d,b)||c.push(d.join("_"))});return c}h.Jc=function(a){this.g||it(this);return this.g[a]};h.Fe=function(a){this.i||(this.g||it(this),this.i=qc(this.g));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function it(a){var b=a.C();a.g={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var jt=!!r.DOMTokenList,kt=jt?function(a){return a.classList}:function(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]},lt=jt?function(a,b){return a.classList.contains(b)}:function(a,b){return Va(kt(a),b)},mt=jt?function(a,b){a.classList.add(b)}:function(a,b){lt(a,b)||(a.className+=0<a.className.length?" "+b:b)},nt=jt?function(a,b){Oa(b,function(b){mt(a,b)})}:function(a,b){var c={};Oa(kt(a),function(a){c[a]=!0});Oa(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?
" "+d:d},ot=jt?function(a,b){a.classList.remove(b)}:function(a,b){lt(a,b)&&(a.className=Pa(kt(a),function(a){return a!=b}).join(" "))};function pt(a,b){if(!ga(a))throw Error("Invalid component class "+a);if(!ga(b))throw Error("Invalid renderer class "+b);var c=ia(a);qt[c]=b}function rt(a,b){if(!a)throw Error("Invalid class name "+a);if(!ga(b))throw Error("Invalid decorator function "+b);st[a]=b}var qt={},st={};function $(a,b,c){zs.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ia(b);if(d=qt[d])break;b=b.m?b.m.constructor:null}b=d?ga(d.X)?d.X():new d:null}this.i=b;this.Gb=t(a)?a:null}E($,zs);h=$.prototype;h.Gb=null;h.Hb=0;h.ma=39;h.re=255;h.jc=0;h.Fa=!0;h.ye=null;h.Ye=!0;h.kd=!1;h.mf=null;function tt(a){a.Z&&!1!=a.Ye&&ut(a,!1);a.Ye=!1}h.za=function(){var a=this.i.U(this);this.W=a;var b=this.mf||this.i.Fb();b&&Zs(a,b);this.kd||this.i.Ed(a,!1);this.Fa||(T(a,!1),a&&$s(a,"hidden",!0))};h.Aa=function(){return this.i.Ba(this.o())};
h.Le=function(a){return this.i.Dd(a)};h.Vb=function(a){this.W=a=this.i.ua(this,a);var b=this.mf||this.i.Fb();b&&Zs(a,b);this.kd||this.i.Ed(a,!1);this.Fa="none"!=a.style.display};h.S=function(){$.m.S.call(this);this.i.Zf(this);if(this.ma&-2&&(this.Ye&&ut(this,!0),this.ma&32)){var a=this.i.ac(this);if(a){var b=this.j||(this.j=new Qs);Rs(b,a);Ds(this).listen(b,"key",this.Za).listen(a,"focus",this.Sg).listen(a,"blur",this.Fd)}}};
function ut(a,b){var c=Ds(a),d=a.o();b?(c.listen(d,"mouseover",a.$e).listen(d,"mousedown",a.Rc).listen(d,"mouseup",a.bc).listen(d,"mouseout",a.Ze),a.Sc!=ca&&c.listen(d,"contextmenu",a.Sc),H&&c.listen(d,"dblclick",a.$f)):(c.Ea(d,"mouseover",a.$e).Ea(d,"mousedown",a.Rc).Ea(d,"mouseup",a.bc).Ea(d,"mouseout",a.Ze),a.Sc!=ca&&c.Ea(d,"contextmenu",a.Sc),H&&c.Ea(d,"dblclick",a.$f))}h.ob=function(){$.m.ob.call(this);this.j&&Xs(this.j);this.Fa&&this.isEnabled()&&this.i.uc(this,!1)};
h.H=function(){$.m.H.call(this);this.j&&(this.j.qa(),delete this.j);delete this.i;this.ye=this.Gb=null};h.ra=function(){return this.Gb};function gt(a,b){a.Gb=b}h.Eb=function(){var a=this.ra();if(!a)return"";if(!x(a))if(u(a))a=Qa(a,eh).join("");else{if(Cg&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];fh(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Cg||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""))}return ua(a)};
function vt(a){a.kd=!0;var b=a.o();b&&a.i.Ed(b,!0)}h.Ue=function(a,b){if(b||this.Fa!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.o();c&&(T(c,a),c&&$s(c,"hidden",!a));this.isEnabled()&&this.i.uc(this,a);this.Fa=a;return!0}return!1};h.isEnabled=function(){return!ht(this,1)};h.setEnabled=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!wt(this,1,!a)||(a||(xt(this,!1),this.cb(!1)),this.Fa&&this.i.uc(this,a),this.R(1,!a))};
h.cb=function(a){wt(this,2,a)&&this.R(2,a)};function xt(a,b){wt(a,4,b)&&a.R(4,b)}h.zc=function(a){wt(this,8,a)&&this.R(8,a)};h.la=function(a){wt(this,64,a)&&this.R(64,a)};function ht(a,b){return!!(a.Hb&b)}h.R=function(a,b){this.ma&a&&b!=ht(this,a)&&(this.i.R(this,a,b),this.Hb=b?this.Hb|a:this.Hb&~a)};function yt(a,b,c){if(a.Z&&ht(a,b)&&!c)throw Error("Component already rendered");!c&&ht(a,b)&&a.R(b,!1);a.ma=c?a.ma|b:a.ma&~b}function zt(a,b){return!!(a.re&b)&&!!(a.ma&b)}function At(a){a.re&=-256}
function wt(a,b,c){return!!(a.ma&b)&&ht(a,b)!=c&&(!(a.jc&b)||a.dispatchEvent(Bs(b,c)))&&!a.I}h.$e=function(a){!Bt(a,this.o())&&this.dispatchEvent("enter")&&this.isEnabled()&&zt(this,2)&&this.cb(!0)};h.Ze=function(a){!Bt(a,this.o())&&this.dispatchEvent("leave")&&(zt(this,4)&&xt(this,!1),zt(this,2)&&this.cb(!1))};h.Sc=ca;function Bt(a,b){return!!a.j&&Zg(b,a.j)}
h.Rc=function(a){this.isEnabled()&&(zt(this,2)&&this.cb(!0),!cc(a)||Jb&&Cb&&a.ctrlKey||(zt(this,4)&&xt(this,!0),this.i.Se(this)&&this.i.ac(this).focus()));this.kd||!cc(a)||Jb&&Cb&&a.ctrlKey||a.preventDefault()};h.bc=function(a){this.isEnabled()&&(zt(this,2)&&this.cb(!0),ht(this,4)&&this.Mb(a)&&zt(this,4)&&xt(this,!1))};h.$f=function(a){this.isEnabled()&&this.Mb(a)};
h.Mb=function(a){if(zt(this,16)){var b=!ht(this,16);wt(this,16,b)&&this.R(16,b)}zt(this,8)&&this.zc(!0);zt(this,64)&&this.la(!ht(this,64));b=new K("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.l=a.l);return this.dispatchEvent(b)};h.Sg=function(){zt(this,32)&&wt(this,32,!0)&&this.R(32,!0)};h.Fd=function(){zt(this,4)&&xt(this,!1);zt(this,32)&&wt(this,32,!1)&&this.R(32,!1)};
h.Za=function(a){return this.Fa&&this.isEnabled()&&this.vc(a)?(a.preventDefault(),a.Pc(),!0):!1};h.vc=function(a){return 13==a.g&&this.Mb(a)};pt($,at);rt("goog-control",function(){return new $(null)});function Ct(){}E(Ct,at);da(Ct);h=Ct.prototype;h.C=function(){return"goog-tab"};h.Fb=function(){return"tab"};h.U=function(a){var b=Ct.m.U.call(this,a);(a=a.ub())&&this.Rb(b,a);return b};h.ua=function(a,b){b=Ct.m.ua.call(this,a,b);var c=this.ub(b);c&&a.Xd(c);ht(a,8)&&(c=a.getParent())&&ga(c.Ac)&&(a.R(8,!1),c.Ac(a));return b};h.ub=function(a){return a.title||""};h.Rb=function(a,b){a&&(a.title=b||"")};function Dt(a,b,c){$.call(this,a,b||Ct.X(),c);yt(this,8,!0);this.jc|=9}E(Dt,$);Dt.prototype.ub=function(){return this.h};Dt.prototype.Rb=function(a){this.i.Rb(this.o(),a);this.Xd(a)};Dt.prototype.Xd=function(a){this.h=a};rt("goog-tab",function(){return new Dt(null)});function Et(){}da(Et);h=Et.prototype;h.Cd=function(){};function Ft(a,b){a&&(a.tabIndex=b?0:-1)}h.Ne=function(a){return a.g.t("div",this.Oe(a).join(" "))};h.Me=function(a){return"DIV"==a.tagName};function Gt(a,b,c){c.id&&Cs(b,c.id);var d=a.C(),e=!1,f=kt(c);f&&Oa(f,function(a){a==d?e=!0:a&&this.rf(b,a,d)},a);e||mt(c,d);Ht(a,b,c);return c}h.rf=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?It(a,Jt):b==c+"-vertical"&&It(a,Kt)};
function Ht(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.Kc(d);f&&(f.W=d,b.isEnabled()||f.setEnabled(!1),b.aa(f),Gs(f,d))}else d.nodeValue&&""!=va(d.nodeValue)||c.removeChild(d);d=e}}h.Kc=function(a){a:{var b;a=kt(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in st?st[b]():null){a=b;break a}a=null}return a};h.Pe=function(a){a=a.o();Ci(a,!0,Ib);H&&(a.hideFocus=!0);var b=this.Cd();b&&Zs(a,b)};h.C=function(){return"goog-container"};
h.Oe=function(a){var b=this.C(),c=[b,a.Kb==Jt?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};h.Uf=function(){return Kt};function Lt(a,b,c){zs.call(this,c);this.hb=b||Et.X();this.Kb=a||this.hb.Uf()}E(Lt,zs);var Jt="horizontal",Kt="vertical";h=Lt.prototype;h.ef=null;h.$b=null;h.hb=null;h.Kb=null;h.Na=!0;h.Zb=!0;h.oc=!0;h.vb=-1;h.sa=null;h.Ab=!1;h.Ub=null;function Mt(a){return a.ef||a.o()}h.za=function(){this.W=this.hb.Ne(this)};h.Aa=function(){return this.o()};h.Le=function(a){return this.hb.Me(a)};h.Vb=function(a){this.W=Gt(this.hb,this,a);"none"==a.style.display&&(this.Na=!1)};
h.S=function(){Lt.m.S.call(this);Hs(this,function(a){a.Z&&Nt(this,a)},this);var a=this.o();this.hb.Pe(this);this.Qc(this.Na,!0);Ds(this).listen(this,"enter",this.We).listen(this,"highlight",this.Pg).listen(this,"unhighlight",this.Rg).listen(this,"open",this.jh).listen(this,"close",this.Xg).listen(a,"mousedown",this.Qg).listen(Mg(a),"mouseup",this.$g).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Wg);this.oc&&Ot(this,!0)};
function Ot(a,b){var c=Ds(a),d=Mt(a);b?c.listen(d,"focus",a.Qe).listen(d,"blur",a.Yf).listen(a.$b||(a.$b=new Qs(Mt(a))),"key",a.Za):c.Ea(d,"focus",a.Qe).Ea(d,"blur",a.Yf).Ea(a.$b||(a.$b=new Qs(Mt(a))),"key",a.Za)}h.ob=function(){this.Pb(-1);this.sa&&this.sa.la(!1);this.Ab=!1;Lt.m.ob.call(this)};h.H=function(){Lt.m.H.call(this);this.$b&&(this.$b.qa(),this.$b=null);this.hb=this.sa=this.Ub=this.ef=null};h.We=function(){return!0};
h.Pg=function(a){var b=Ls(this,a.target);if(-1<b&&b!=this.vb){var c=Pt(this);c&&c.cb(!1);this.vb=b;c=Pt(this);this.Ab&&xt(c,!0);this.sa&&c!=this.sa&&(c.ma&64?c.la(!0):this.sa.la(!1))}b=this.o();null!=a.target.o()&&$s(b,"activedescendant",a.target.o().id)};h.Rg=function(a){a.target==Pt(this)&&(this.vb=-1);this.o().removeAttribute("aria-activedescendant")};h.jh=function(a){(a=a.target)&&a!=this.sa&&a.getParent()==this&&(this.sa&&this.sa.la(!1),this.sa=a)};
h.Xg=function(a){a.target==this.sa&&(this.sa=null)};h.Qg=function(a){this.Zb&&(this.Ab=!0);var b=Mt(this);b&&ch(b)&&dh(b)?b.focus():a.preventDefault()};h.$g=function(){this.Ab=!1};h.Wg=function(a){var b;a:{b=a.target;if(this.Ub)for(var c=this.o();b&&b!==c;){var d=b.id;if(d in this.Ub){b=this.Ub[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Rc(a);break;case "mouseup":b.bc(a);break;case "mouseover":b.$e(a);break;case "mouseout":b.Ze(a);break;case "contextmenu":b.Sc(a)}};
h.Qe=function(){};h.Yf=function(){this.Pb(-1);this.Ab=!1;this.sa&&this.sa.la(!1)};h.Za=function(a){return this.isEnabled()&&this.Na&&(0!=Is(this)||this.ef)&&this.Re(a)?(a.preventDefault(),a.Pc(),!0):!1};
h.Re=function(a){var b=Pt(this);if(b&&"function"==typeof b.Za&&b.Za(a)||this.sa&&this.sa!=b&&"function"==typeof this.sa.Za&&this.sa.Za(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.g){case 27:if(this.oc)Mt(this).blur();else return!1;break;case 36:Qt(this);break;case 35:Rt(this);break;case 38:if(this.Kb==Kt)St(this);else return!1;break;case 37:if(this.Kb==Jt)Ks(this)?Tt(this):St(this);else return!1;break;case 40:if(this.Kb==Kt)Tt(this);else return!1;break;case 39:if(this.Kb==
Jt)Ks(this)?St(this):Tt(this);else return!1;break;default:return!1}return!0};function Nt(a,b){var c=b.o(),c=c.id||(c.id=b.D());a.Ub||(a.Ub={});a.Ub[c]=b}h.aa=function(a,b){Lt.m.aa.call(this,a,b)};h.me=function(a,b,c){a.jc|=2;a.jc|=64;yt(a,32,!1);tt(a);Lt.m.me.call(this,a,b,c);a.Z&&this.Z&&Nt(this,a);b<=this.vb&&this.vb++};function It(a,b){if(a.o())throw Error("Component already rendered");a.Kb=b}
h.Qc=function(a,b){if(b||this.Na!=a&&this.dispatchEvent(a?"show":"hide")){this.Na=a;var c=this.o();c&&(T(c,a),this.oc&&Ft(Mt(this),this.Zb&&this.Na),b||this.dispatchEvent(this.Na?"aftershow":"afterhide"));return!0}return!1};h.isEnabled=function(){return this.Zb};
h.setEnabled=function(a){this.Zb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Zb=!0,Hs(this,function(a){a.tg?delete a.tg:a.setEnabled(!0)})):(Hs(this,function(a){a.isEnabled()?a.setEnabled(!1):a.tg=!0}),this.Ab=this.Zb=!1),this.oc&&Ft(Mt(this),a&&this.Na))};function Ut(a,b){b!=a.oc&&a.Z&&Ot(a,b);a.oc=b;a.Zb&&a.Na&&Ft(Mt(a),b)}h.Pb=function(a){(a=Js(this,a))?a.cb(!0):-1<this.vb&&Pt(this).cb(!1)};h.cb=function(a){this.Pb(Ls(this,a))};function Pt(a){return Js(a,a.vb)}
function Qt(a){Vt(a,function(a,c){return(a+1)%c},Is(a)-1)}function Rt(a){Vt(a,function(a,c){a--;return 0>a?c-1:a},0)}function Tt(a){Vt(a,function(a,c){return(a+1)%c},a.vb)}function St(a){Vt(a,function(a,c){a--;return 0>a?c-1:a},a.vb)}function Vt(a,b,c){c=0>c?Ls(a,a.sa):c;var d=Is(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=Js(a,c);if(f&&a.Of(f)){a.pf(c);break}e++;c=b.call(a,c,d)}}h.Of=function(a){return a.Fa&&a.isEnabled()&&!!(a.ma&2)};h.pf=function(a){this.Pb(a)};function Wt(){}E(Wt,Et);da(Wt);Wt.prototype.C=function(){return"goog-tab-bar"};Wt.prototype.Cd=function(){return"tablist"};Wt.prototype.rf=function(a,b,c){this.h||(this.g||Xt(this),this.h=qc(this.g));var d=this.h[b];d?(It(a,d==Yt||d==Zt?Kt:Jt),a.i=d):Wt.m.rf.call(this,a,b,c)};Wt.prototype.Oe=function(a){var b=Wt.m.Oe.call(this,a);this.g||Xt(this);b.push(this.g[a.i]);return b};function Xt(a){var b=a.C();a.g=tc($t,b+"-top",au,b+"-bottom",Yt,b+"-start",Zt,b+"-end")};function bu(a,b,c){a=a||$t;It(this,a==Yt||a==Zt?Kt:Jt);this.i=a;Lt.call(this,this.Kb,b||Wt.X(),c);cu(this)}E(bu,Lt);var $t="top",au="bottom",Yt="start",Zt="end";h=bu.prototype;h.bb=null;h.S=function(){bu.m.S.call(this);cu(this)};h.H=function(){bu.m.H.call(this);this.bb=null};h.pf=function(a){bu.m.pf.call(this,a);this.Ac(Js(this,a))};h.Ac=function(a){a?a.zc(!0):this.bb&&this.bb.zc(!1)};
function du(a,b){if(b&&b==a.bb){for(var c=Ls(a,b),d=c-1;b=Js(a,d);d--)if(b.Fa&&b.isEnabled()){a.Ac(b);return}for(c+=1;b=Js(a,c);c++)if(b.Fa&&b.isEnabled()){a.Ac(b);return}a.Ac(null)}}h.nh=function(a){this.bb&&this.bb!=a.target&&this.bb.zc(!1);this.bb=a.target};h.oh=function(a){a.target==this.bb&&(this.bb=null)};h.lh=function(a){du(this,a.target)};h.mh=function(a){du(this,a.target)};h.Qe=function(){Pt(this)||this.cb(this.bb||Js(this,0))};
function cu(a){Ds(a).listen(a,"select",a.nh).listen(a,"unselect",a.oh).listen(a,"disable",a.lh).listen(a,"hide",a.mh)}rt("goog-tab-bar",function(){return new bu});function eu(a,b,c){this.g=a;this.i=b;this.h=c||null}
function fu(a,b){var c=[];a.h&&c.push({$t:a.h,primary:"true"});for(var d=new Gr({id:{$t:"http://www.google.com/m8/feeds/contacts/kts%40gmail.com/base/0"},gd$email:[{address:a.g,primary:"true"}],gd$name:{gd$fullName:{$t:a.i}},gd$phoneNumber:c}),c=[],e=0;e<b.length;e++){for(var f=c,g=e,k=d,l=b[e],m=0,n=Hr(k),p=Hr(l),q=0;q<n.length;q++)for(var s=n[q],v=0;v<p.length;v++){var z=p[v];s&&s==z&&(m+=1)}n=0;s=k.data.gd$name;v=l.data.gd$name;if(s&&v)for(z=["gd$familyName","gd$givenName","gd$additionalName",
"gd$fullName"],p=[0.06,0.06,0.06,0.12],q=0;4>q;q++){var D=s[z[q]],G=v[z[q]];D&&G==D&&(n+=p[q])}q=0;p=k.cd();s=l.cd();p&&p==s&&(q+=0.2);v=0;k=Ir(k);l=Ir(l);s=k.length;for(p=[];s--;){v=k[s];z=l.length;for(p[s]=0;z--;)D=l[z],v.$t&&D.$t&&(D=0.7*zr(v,D),p[s]=Math.max(p[s],D));v=Sh(p).value}f[g]=m+n+q+v}d=[];for(e=0;e<b.length;e++)f=db(d,gb,c[e]),0>f?(bb(d,-(f+1),0,c[e]),g=b.splice(e,1),bb(b,-(f+1),0,g[0])):bb(d,f,0,c[e])}eu.prototype.toString=function(){return"ContactModel:"+this.g};function gu(){}E(gu,at);gu.prototype.logger=R("ydn.crm.inj.sugar.FeedPanelRenderer");gu.prototype.C=function(){return"feed-panel"};gu.prototype.U=function(a){var b=gu.m.U.call(this,a);a=a.g.t("div","feed","Feed panel");b.appendChild(a);return b};gu.prototype.refresh=function(){};function hu(a,b){$.call(this,null,null,a);this.oa(b)}E(hu,$);hu.prototype.refresh=function(){var a=this.K,b=this.o();this.i.refresh(b,a)};pt(hu,gu);function iu(a,b){var c=a.type;if(t(c))switch(c.toLowerCase()){case "checkbox":case "radio":a.checked=b?"checked":null;break;case "select-one":a.selectedIndex=-1;if(x(b))for(var d=0;c=a.options[d];d++)if(c.value==b){c.selected=!0;break}break;case "select-multiple":c=b;x(c)&&(c=[c]);for(var e=0;d=a.options[e];e++)if(d.selected=!1,c)for(var f,g=0;f=c[g];g++)d.value==f&&(d.selected=!0);break;default:a.value=null!=b?b:""}};function ju(){}E(ju,at);da(ju);ju.prototype.C=function(){return"field"};
ju.prototype.U=function(a){var b=ju.m.U.call(this,a);a.W=b;var c=a.K;a=a.g;var d,e,f=ku(c);d=lu(c).type||"varchar";if("bool"==d)d=a.t("input",{"class":"value",type:"checkbox",disabled:"1"}),e=a.t("span","name");else if("enum"==d){d=a.t("select",{"class":"value",disabled:"1"});var g=lu(c).options||{},k;for(k in g){var l=a.t("option",{name:g[k].name},g[k].value);d.appendChild(l)}d.setAttribute("title",f)}else d=a.t("label","value"),e=a.t("sup","name");b.classList.add(this.C());b.setAttribute("name",
c.g);b.appendChild(d);e&&(e.textContent=f,b.appendChild(e));return b};ju.prototype.refresh=function(a,b){T(a,!!b);if(b){var c=mu(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":iu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function nu(a,b,c){$.call(this,null,b,c);tt(this);vt(this);At(this);yt(this,32,!1);yt(this,8,!1);this.oa(a)}E(nu,$);pt(nu,ju);nu.prototype.refresh=function(){this.i.refresh(this.o(),this.K)};pt(nu,ju);function ou(){}E(ou,at);da(ou);ou.prototype.C=function(){return"record-group"};
ou.prototype.U=function(a){var b=ou.m.U.call(this,a),c=a.g,d=c.t("div"),e=c.t("div","content");b.appendChild(d);b.appendChild(e);a.W=b;b.setAttribute("name",a.K.Ya);for(var d=a.K,e=pu(d),f=ju.X(),g=0;g<e.length;g++){var k=qu(d,e[g]),k=new nu(k,f,c);a.aa(k,!0)}a=d.Y;c=a.parent.n||null;a=A(c)?lc(c,["modules",a.pa()]):null;(a=A(a)?lc(a,["groups",d.Ya]):null)?d=a.normallyHide:(d=d.Ya,d=/address/i.test(d)?!1:0<=["email","name","phone"].indexOf(d)?!1:!0);d&&b.classList.add("normally-hide");return b};function ru(a,b){this.parent=a;this.g=b}function lu(a){return su(a.parent.Y).module_fields[a.g]}function mu(a){var b=a.parent.ha();return b?b.value(a.g):null}ru.prototype.Lc=function(){return mu(this)};function ku(a){a=lu(a);return x(a.label)?a.label.replace(/:$/,""):a.label}ru.prototype.toString=function(){return this.parent+";Field:"+this.g};function tu(a,b){this.Y=a;this.Ya=b||"";this.g={}}tu.prototype.M=function(){return this.Y.M()};tu.prototype.ha=function(){return this.Y.ha()};function pu(a){var b=su(a.Y),c=[],d;for(d in b.module_fields){var e=b.module_fields[d];a.Ya&&e.group==a.Ya?c.push(d):a.Ya||e.group||c.push(d)}return c}function uu(a,b){var c=su(a.Y),d;for(d in c.module_fields)if(d==b)return!0;return!1}function qu(a,b){a.g[b]||(a.g[b]=new ru(a,b));return a.g[b]}
function vu(a){a=a.Ya.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};function wu(a,b,c){$.call(this,null,b,c);tt(this);vt(this);At(this);yt(this,32,!1);yt(this,8,!1);this.oa(a)}E(wu,$);wu.prototype.Aa=function(){return Ng("content",this.o())};wu.prototype.refresh=function(){for(var a=0;a<Is(this);a++)Js(this,a).refresh()};pt(wu,ou);function xu(){}E(xu,ju);da(xu);
xu.prototype.U=function(a){var b=a.g.t("span",ct(this,a).join(" "),a.ra());dt(this,a,b);a.W=b;var c=a.K;a=a.g;var d,e=ku(c);d=lu(c).type||"varchar";if("bool"==d)d=a.t("input",{"class":"value",type:"checkbox",disabled:"1"});else if("enum"==d){d=a.t("select",{"class":"value",disabled:"1"});var f=lu(c).options||{},g;for(g in f){var k=a.t("option",{name:f[g].name},f[g].value);d.appendChild(k)}}else d=a.t("label","value");d.setAttribute("title",e);b.classList.add(this.C());b.setAttribute("name",c.g);b.appendChild(d);
return b};xu.prototype.refresh=function(a,b){T(a,!!b);if(b){var c=mu(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":iu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function yu(){}E(yu,at);da(yu);yu.prototype.C=function(){return"address"};yu.prototype.U=function(a){var b=yu.m.U.call(this,a),c=a.K,d=a.g;b.setAttribute("name",c.Ya);b.classList.add("record-group");var e=d.t("details"),f=d.t("summary");f.textContent=vu(c);b.appendChild(f);var g=d.t("div","content");e.appendChild(f);e.appendChild(g);b.appendChild(e);a.W=b;e=pu(c);f=xu.X();for(g=0;g<e.length;g++){var k=qu(c,e[g]),k=new nu(k,f,d);a.aa(k,!0)}return b};function zu(a,b){var c=yu.X();wu.call(this,a,c,b)}E(zu,wu);zu.prototype.Aa=function(){return this.o().querySelector("summary").nextElementSibling};zu.prototype.refresh=function(){for(var a=0;a<Is(this);a++)Js(this,a).refresh()};pt(zu,yu);function Au(){}E(Au,at);da(Au);Au.prototype.C=function(){return"email"};Au.prototype.U=function(a){var b=Au.m.U.call(this,a),c=a.K,d=a.g;b.setAttribute("name",c.Ya);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",vu(c));b.appendChild(e);c=d.t("div","content");b.appendChild(e);b.appendChild(c);return a.W=b};
function Bu(a,b,c,d,e,f){b?(a.textContent=c||b,a.setAttribute("name",b),b="",d&&(b+=" primary"),e&&(b+=" optout"),f&&(b+=" deleted"),a.className=b):(a.textContent="",a.className="empty")}
Au.prototype.refresh=function(a){var b=a.o(),c=a.K;T(b,!!c);if(c){var b=a.g,d=qu(c,"email"),e=d?d.Lc():null,d=u(e);a=a.Aa();if(d){for(d=0;d<e.length;d++){var c=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));c&&Bu(f,c.email_address,void 0,"1"==c.primary_address?!0:!1,"1"==c.opt_out?!0:!1,"1"==c.deleted?!0:!1)}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}else{e=pu(c);for(d=0;d<e.length;d++){var g=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));(g=qu(c,
g))&&Bu(f,mu(g))}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}}};function Cu(a,b){var c=Au.X();wu.call(this,a,c,b)}E(Cu,wu);Cu.prototype.Aa=function(){return Ng("content",this.o())};Cu.prototype.refresh=function(){this.i.refresh(this)};pt(Cu,Au);function Du(){}E(Du,at);da(Du);Du.prototype.C=function(){return"list"};Du.prototype.U=function(a){var b=Du.m.U.call(this,a),c=a.K,d=a.g;b.setAttribute("name",c.Ya);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",vu(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.W=b;for(var e=pu(c),f=xu.X(),g=0;g<e.length;g++){var k=qu(c,e[g]),k=new nu(k,f,d);a.aa(k,!0)}return b};function Eu(a,b){var c=Du.X();wu.call(this,a,c,b)}E(Eu,wu);Eu.prototype.Aa=function(){return Ng("content",this.o())};Eu.prototype.refresh=function(){for(var a=0;a<Is(this);a++)Js(this,a).refresh()};pt(Eu,Du);function Fu(){}E(Fu,at);da(Fu);Fu.prototype.C=function(){return"name"};
Fu.prototype.U=function(a){var b=Fu.m.U.call(this,a),c=a.K,d=a.g;b.setAttribute("name",c.Ya);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",vu(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.W=b;pu(c);e=xu.X();uu(c,"salutation")&&(f=qu(c,"salutation"),f=new nu(f,e,d),a.aa(f,!0));uu(c,"first_name")&&a.aa(new nu(qu(c,"first_name"),e,d),!0);uu(c,"last_name")&&a.aa(new nu(qu(c,"last_name"),e,d),!0);return b};function Gu(a,b){var c=Fu.X();wu.call(this,a,c,b)}E(Gu,wu);Gu.prototype.Aa=function(){return Ng("content",this.o())};Gu.prototype.refresh=function(){for(var a=0;a<Is(this);a++)Js(this,a).refresh()};pt(Gu,Fu);function Hu(a,b){L.call(this);this.parent=a;this.g=b;this.h={}}E(Hu,L);h=Hu.prototype;h.logger=R("ydn.crm.sugar.model.Record");h.M=function(){return this.parent.M()};h.pa=function(){return this.g.Y};function su(a){return a.parent.s[a.pa()]}h.H=function(){Hu.m.H.call(this);this.h=null};h.ha=function(){return this.g};h.Qb=function(a){((a=a?a.g?a:null:null)||this.g)&&a!==this.g&&(this.g=a,this.dispatchEvent(new Iu(this.g?this.g.Y:null,0,this)))};
h.toString=function(){return"ydn.crm.sugar.model.Record:"+this.g};function Ju(a,b){Hu.call(this,a,new Nq(a.M(),b));this.module_name=b}E(Ju,Hu);Ju.prototype.pa=function(){return this.module_name};Ju.prototype.Qb=function(a){if(a&&a.Y!=this.module_name)throw Error("Module name must be "+this.module_name+" but found "+a.Y);Ju.m.Qb.call(this,a)};Ju.prototype.toString=function(){return"ydn.crm.sugar.model.Module:"+this.module_name+(this.g?":"+this.g:"")};function Ku(a,b){Ju.call(this,a,b);this.Sa=new gf(this);var c=a.i;c&&Lu(this,c);this.Sa.listen(this.getParent(),Mu,this.Yg)}E(Ku,Ju);h=Ku.prototype;h.logger=R("ydn.crm.sugar.model.GDataRecord");h.getParent=function(){return this.parent};function Nu(a){return Ou(a.getParent(),a.pa()).mb}h.Yg=function(a){Lu(this,a.mb)};
function Lu(a,b){a.Qb(null);if(b){var c=b.g;if(c){var d=[{store:a.pa(),index:"ydn$emails",key:c}];Pu(a.parent).send("list",d).B(function(a){var b=a[0],g=b.result?b.result.length:0;P(this.logger,"query "+JSON.stringify(d)+" returns "+g+" results ");window.console.log(this+" receiving sugarcrm "+g+" query result for "+c,a);b.result[0]&&this.Qb(new Nq(this.M(),this.pa(),b.result[0]))},a)}}}
function Qu(a){a.ha();var b=Ou(a.getParent(),null).mb,b={module:a.pa(),kind:b.wf(),"gdata-id":b.D()};P(a.logger,"sending import-gdata "+JSON.stringify(b));return Pu(a.parent).send("import-gdata",b).B(function(a){window.console.log(a);a=new Nq(this.M(),this.pa(),a);P(this.logger,a+" created.");this.Qb(a)},a)}
function Su(a){a.ha();var b=Tu(a.getParent()),c=b.i,d={email1:b.g,full_name:c};c&&0<c.length&&(c=c.split(/\s/),c[0]&&(d.first_name=c[0]),c[1]&&(d.last_name=c[c.length-1]));(b=b.h)&&(d.phone_work=b);d={module:a.pa(),record:d};P(a.logger,"sending put-record "+JSON.stringify(d));return Pu(a.parent).send("put-record",d).B(function(a){window.console.log(a);a=new Nq(this.M(),this.pa(),a);P(this.logger,a+" created.");this.Qb(a)},a)}
function Uu(a){var b=a.ha();if(!b)return tb("no Record to link.");b.D();window.console.log(b);var c=Nu(a),c=Ou(a.getParent(),null).mb;if(!c)return tb("Not contact data to link.");b=new Dr("sugarcrm",a.M(),a.pa(),b.D(),+new Date(c.data.updated.$t));c={kind:c.wf(),"gdata-id":c.D(),"external-id":{label:b.Y+"#"+b.i+"-"+b.h,value:b.T()}};return Pu(a.parent).send("link",c).B(function(a){window.console.log("link",a);a=new Gr(a);a:{for(var b=this.getParent(),c=this.pa(),g=0;g<b.g.length;g++)if(b.g[g].D()==
a.D()){b.g[g]=a;b.dispatchEvent(new Vu(c,0,0,b));break a}b.g.push(a);b.dispatchEvent(new Vu(c,0,0,b))}},a)}h.save=function(){var a=this.ha();window.console.log(a);var b=Pu(this.parent).send("put-record",a);b.B(function(b){window.console.log(b);a.g=b},this);return b};h.H=function(){Ku.m.H.call(this);this.Sa.qa();this.g=this.Sa=null};h.toString=function(){var a="";this.g&&(a+=":"+this.g);var b=Nu(this);b&&(a+=":"+b);return"RecordModel:"+this.pa()+a};var Mu="context-data-change";function Wu(a,b){K.call(this,a,b)}E(Wu,K);function Xu(a,b){K.call(this,Mu,b);this.mb=a}E(Xu,Wu);function Iu(a,b,c){K.call(this,"record-change",c);this.Y=a}E(Iu,Wu);function Vu(a,b,c,d){K.call(this,"gdata-change",d);this.module_name=a}E(Vu,Wu);function Yu(a,b){L.call(this);this.h=a;this.s=b;this.info={};this.n=this.l=null;this.Sa=new gf(this)}E(Yu,L);h=Yu.prototype;h.isLogin=function(){return!!this.h.isLogin};function Pu(a){return fd("sugarcrm",a.M())}h.M=function(){return this.h.domain};function Zu(a,b,c){var d={};d.domain=a.M();d.baseUrl=a.h.baseUrl||null;d.Vh=b;d.password=c;return a.send("login",d).B(function(a){this.h=a},a)}h.send=function(a,b){return fd("sugarcrm",this.M()).send(a,b)};
h.jb=function(){this.l||(this.l=this.send("server-info"),this.l.B(function(a){if(a){var b=a.info;b&&(this.info=b);if(a=a.about)this.h=a}else this.l=null},this));return this.l};function $u(a,b,c,d){b={store:b};c&&(b.index=c);d&&(d instanceof U?b.range=d.toJSON():b.key=d);b.prefix=!0;return Pu(a).send("list",[b])}function av(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return Pu(a).send("search",[c])}
h.H=function(){Yu.m.H.call(this);this.n=this.info=null;this.Sa.qa();this.Sa=null};h.toString=function(){return"ydn.crm.sugar.model.Sugar:"+this.M()};function bv(a,b){Yu.call(this,a,b);this.j={};this.g=this.i=null}E(bv,Yu);function Ou(a,b){for(var c=a.g?a.g.length:0,d=0;d<c;d++){var e=a.g[d],f=hr(e,a.M(),b);if(b&&f)return{module_name:b,mb:e};if(!b&&!f)return{module_name:null,mb:e}}return{module_name:b,mb:null}}
function cv(a,b){a.i=b;a.g=null;a.dispatchEvent(new Xu(b,a));a.i&&a.i.g&&fd().send("gdata-list-contact-by-email",a.i.g).B(function(a){this.g=a.map(function(a){return new Gr(a)});fu(this.i,this.g);0<this.g.length&&this.dispatchEvent(new Vu(null,0,0,this))},a)}function Tu(a){return a.i}bv.prototype.p=function(a){this.dispatchEvent(a)};bv.prototype.H=function(){bv.m.H.call(this);for(var a in this.j)this.j[a].qa();this.g=this.i=this.j=null};
bv.prototype.toString=function(){return"ydn.crm.sugar.model.GDataSugar:"+this.M()};function dv(){}E(dv,at);da(dv);dv.prototype.C=function(){return"record-body"};
dv.prototype.U=function(a){var b=dv.m.U.call(this,a),c=a.g,d=c.t("div","record-body-header"),e=c.t("div","record-body-content");b.appendChild(d);b.appendChild(e);a.W=b;e=c.t("a",{name:"view"},"view");e.href="#";var f=c.t("a",{name:"detail"},"detail");f.href="#";a.h?T(e,!1):T(f,!1);d.appendChild(e);d.appendChild(f);var d=a.K,e=[],f=su(d),g;for(g in f.module_fields){var k=f.module_fields[g].group;-1==e.indexOf(k)&&e.push(k)}g=ou.X();for(f=0;f<e.length;f++){var k=e[f],l,m;m=d;var n=k;m.h[n]||(m.h[n]=
new tu(m,n));m=m.h[n];/address/i.test(k)?l=new zu(m,c):"email"==k?l=new Cu(m,c):"phone"==k?l=new Eu(m,c):"name"==k?l=new Gu(m,c):l=new wu(m,g,c);a.aa(l,!0)}return b};function ev(a){return a.querySelector("a[name=view]")}function fv(a){return a.querySelector("a[name=detail]")};function gv(a,b,c){b=b||dv.X();$.call(this,null,b,c);tt(this);vt(this);At(this);this.oa(a);this.h=!1}E(gv,$);h=gv.prototype;h.logger=R("ydn.crm.inj.sugar.module.Record");h.Aa=function(){return Ng("record-body-content",this.o())};h.S=function(){gv.m.S.call(this);var a=Ds(this),b=this.K;b&&a.listen(b,"record-change",this.refresh);a.listen(ev(this.o()),"click",this.Gh,!1);a.listen(fv(this.o()),"click",this.Fh,!1)};
h.Gh=function(a){a.preventDefault();var b=this.o();a=Ng("record-body-header",b);var b=Ng("record-body-content",b),c=ev(a);a=fv(a);"hide"==c.textContent?(c.textContent="view",T(b,!1),T(a,!1)):(c.textContent="hide",T(b,!0),T(a,!0))};h.Fh=function(a){a.preventDefault();var b=this.o();a=Ng("record-body-header",b);b=Ng("record-body-content",b);a=fv(a);b.classList.contains("detail")?(a.textContent="detail",b.classList.remove("detail")):(a.textContent="less",b.classList.add("detail"))};
h.refresh=function(a){var b=this.K,c=this.o();if(b.ha())for(T(c,!0),a&&"record-change"==a.type&&(b=this.o(),a=Ng("record-body-header",b),b=Ng("record-body-content",b),c=ev(a),a=fv(a),this.h?(a.textContent="detail",T(c,!1),T(a,!0)):(c.textContent="view",T(b,!1),T(c,!0),T(a,!1))),a=0;a<Is(this);a++)b=Js(this,a),b instanceof wu&&b.refresh();else T(c,!1)};pt(gv,dv);function hv(){}E(hv,at);hv.prototype.logger=R("ydn.crm.inj.sugar.module.GDataPanelRenderer");hv.prototype.C=function(){return"record-panel"};
hv.prototype.U=function(a){var b=hv.m.U.call(this,a),c=a.K,d=c.pa(),e=a.g,f=e.t("div","record-root");b.appendChild(f);var g=e.t("div","record-header"),k=e.t("div","record-content");f.appendChild(g);f.appendChild(k);a.W=f;f.classList.add(d);f=e.t("span",{"class":"icon"},d.substr(0,2));k=e.t("a",{href:"#","class":"title"});k.target=c.M();var l=e.t("a",{href:"#link","class":"link"},"link"),m=e.t("span","synced");T(l,!1);T(m,!1);f=e.t("div","header",[f,k,l,m]);d=e.t("a",{"class":"import",href:"#import"},
"Add to "+d);d.style.zIndex=1E3;d=e.t("div",{"class":"import"},d);g.appendChild(d);g.appendChild(f);c=new gv(c,null,e);a.aa(c,!0);return b};
hv.prototype.refresh=function(a,b){var c=a.querySelector(".import"),d=a.querySelector(".header"),e=a.querySelector(".title"),f=c.nextElementSibling,c=c.querySelector("a"),g=a.querySelector("a.link"),f=f.querySelector(".synced");b.tf||b.bg?T(a,!0):T(a,!1);T(d,!!b.title);e.textContent=b.title;b.tf?e.href=b.tf:e.removeAttribute("href");c.textContent=b.bg;c.setAttribute("title",b.cg);(g.textContent=b.ff)?(g.setAttribute("title",b.cg),g.href="#"+b.ff):g.removeAttribute("href");T(f,b.sh)};function iv(){L.call(this);this.h=this.g=null}E(iv,L);iv.prototype.H=function(){this.g&&(this.g.qa(),this.h=this.g=null)};function jv(a,b){a.h=b;a.g=new gf(a);a.g.listen(b,"click",a.i,!0)}iv.prototype.o=function(){return this.h};iv.prototype.i=function(a){a.preventDefault();var b=this.o(),c=this.o();(c.classList.contains("error")?kv:c.href?"n":"v")==kv?(b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):this.dispatchEvent(a)};
var kv="e";function lv(a,b){var c=a.o();c.classList.remove("error");c.removeAttribute("href");b?(c.textContent=b,T(c,!0)):T(c,!1);c.removeAttribute("title")}function mv(a,b,c){a=a.o();a.classList.add("error");a.href="#error";a.textContent="error";a.setAttribute("title","Click to report error"+(c?" for "+c:""));b&&fd().send("log-bug",b)};function nv(a,b){$.call(this,null,null,a);this.oa(b);this.h=new iv;this.n=new iv}E(nv,$);h=nv.prototype;h.logger=R("ydn.crm.inj.sugar.module.GDataPanel");h.Aa=function(){return Ng("record-content",this.o())};
h.S=function(){nv.m.S.call(this);var a=this.o();jv(this.h,Og(document,"A","import",a)[0]);jv(this.n,Og(document,"A","link",a)[0]);Ds(this).listen(this.h,"click",this.dh,!1);Ds(this).listen(this.n,"click",this.gh,!1);a=this.K;Ds(this).listen(a,["record-change"],this.refresh);Ds(this).listen(a.parent,["gdata-change"],this.refresh)};h.refresh=function(){var a=this.K,b=Ng("record-header",this.o());this.i.refresh(b,ov(this));b=this.Aa();T(b,!!a.ha())};
function ov(a){var b=a.K,c=(a=Nu(b))?null:Ou(b.getParent(),null).mb,d=Tu(b.getParent()),e=b.ha(),f=b.pa(),g="",k=null,l=!1,m="",n="",p="",q="";d&&(m="Add to "+f,n="Add current contact "+d.g+" to SugarCRM "+f,e?(g=Oq(e),k=nq(e.domain,e.Y,e.D()),n=m="",p="export",q="Export this SugarCRM "+f+" to Gmail My Contacts address book",a&&(c=Nu(b),b.g&&c?(hr(c,b.M(),b.pa()),b=!0):b=!1,b?(l=!0,q=p=""):(p="link",q="Link Gmail contact "+a.id.match(/\w+$/)[0]+" with this SugarCRM "+f+" "+e.D()))):c&&(m+=" and sync",
n+=" and then synchronize between the two records.",q=p=""));return{title:g,tf:k,bg:m,cg:n,sh:l,ff:p,Uh:q}}h.gh=function(){var a=this.K;lv(this.n,"Linking...");Uu(a).u(function(){lv(this.n,"Done.");this.dispatchEvent(new K("record-change"))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?xh(a):a;var c;c=this.o();c=gh(c);mv(this.n,{"class":"RecordHeader",method:"handleLinkClick",context:"link",html:c?c.outerHTML:"",error:a},a)},this)};
h.dh=function(){var a=this.K;lv(this.h,"Adding... to "+a.pa());var b;Ou(a.getParent(),null).mb?b=Qu(a).B(function(){lv(this.h,"Linking GData and SugarCRM...");return Uu(a)},this):(b=Su(a),b=b.B(function(){return Uu(a)},this));b.u(function(){lv(this.h,null);this.dispatchEvent(new K("change",this))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?xh(a):a;var b;b=this.o();b=gh(b);mv(this.h,{"class":"RecordHeader",method:"handleImportClick",context:"link",html:b?b.outerHTML:"",error:a},a)},
this)};pt(nv,hv);function pv(){}E(pv,Et);da(pv);pv.prototype.logger=R("ydn.crm.inj.sugar.FeedBodyRenderer");pv.prototype.C=function(){return"feed-panel"};
pv.prototype.Ne=function(a){var b=pv.m.Ne.call(this,a),c=a.g,d=c.t("div","feed-header"),e=c.t("div","feed-body");b.appendChild(d);b.appendChild(e);a.W=b;c=c.t("div","feed-title");d.appendChild(c);for(d=0;d<mq.length;d++){a:{for(var c=a,e=mq[d],f=0;f<c.h.length;f++){var g=c.h[f];if(g.K.pa()==e){Ya(c.h,f);c=g;break a}}f=c.K;f.j[e]||(f.j[e]=new Ku(f,e),f.Sa.listen(f.j[e],"record-change",f.p));c=new nv(c.g,f.j[e])}a.aa(c,!0)}return b};pv.prototype.refresh=function(a,b){T(a,!!b.i)};function qv(a,b){var c=pv.X();Lt.call(this,Kt,c,a);this.oa(b);this.h=[]}E(qv,Lt);qv.prototype.Aa=function(){return Ng("feed-body",this.o())};qv.prototype.S=function(){qv.m.S.call(this);Ds(this).listen(this.K,Mu,this.refresh)};qv.prototype.refresh=function(a){var b=this.K,c=this.o();this.hb.refresh(c,b);if(a.type==Mu)for(b=Is(this)-1;0<=b;b--)Js(this,b).refresh(a)};pt(qv,pv);function rv(){}E(rv,at);da(rv);rv.prototype.C=function(){return"goog-menuheader"};function sv(a,b,c){$.call(this,a,c||rv.X(),b);yt(this,1,!1);yt(this,2,!1);yt(this,4,!1);yt(this,32,!1);this.Hb=1}E(sv,$);rt("goog-menuheader",function(){return new sv(null)});function tv(){this.h=[]}E(tv,at);da(tv);function uv(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.C()+"-highlight";break;case 1:c=a.C()+"-checkbox";break;case 2:c=a.C()+"-content"}a.h[b]=c}return c}h=tv.prototype;h.Fb=function(){return"menuitem"};h.U=function(a){var b=a.g.t("div",ct(this,a).join(" "),vv(this,a.ra(),a.g));wv(this,a,b,!!(a.ma&8)||!!(a.ma&16));dt(this,a,b);return b};h.Ba=function(a){return a&&a.firstChild};
h.ua=function(a,b){var c=Yg(b),d=uv(this,2);c&&lt(c,d)||b.appendChild(vv(this,b.childNodes,a.g));lt(b,"goog-option")&&(yt(a,16,!0),(c=a.o())&&xv(a.i,a,c),xv(this,a,b));return tv.m.ua.call(this,a,b)};h.tc=function(a,b){var c=this.Ba(a),d=yv(this,a)?c.firstChild:null;tv.m.tc.call(this,a,b);d&&!yv(this,a)&&c.insertBefore(d,c.firstChild||null)};function vv(a,b,c){a=uv(a,2);return c.t("div",a,b)}function xv(a,b,c){c&&(Zs(c,"menuitemcheckbox"),wv(a,b,c,!0))}
function yv(a,b){var c=a.Ba(b);if(c){var c=c.firstChild,d=uv(a,1);return!!c&&A(c)&&1==c.nodeType&&lt(c,d)}return!1}function wv(a,b,c,d){d!=yv(a,c)&&(d?mt(c,"goog-option"):ot(c,"goog-option"),c=a.Ba(c),d?(a=uv(a,1),c.insertBefore(b.g.t("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}h.Jc=function(a){switch(a){case 2:return uv(this,0);case 16:case 8:return"goog-option-selected";default:return tv.m.Jc.call(this,a)}};
h.Fe=function(a){var b=uv(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return tv.m.Fe.call(this,a)}};h.C=function(){return"goog-menuitem"};function zv(a,b,c,d){$.call(this,a,d||tv.X(),c);this.oa(b)}E(zv,$);h=zv.prototype;h.T=function(){var a=this.K;return null!=a?a:this.Eb()};h.Eb=function(){var a=this.ra();return u(a)?(a=Qa(a,function(a){return A(a)&&1==a.nodeType&&(lt(a,"goog-menuitem-accel")||lt(a,"goog-menuitem-mnemonic-separator"))?"":eh(a)}).join(""),ua(a)):zv.m.Eb.call(this)};
h.bc=function(a){var b=this.getParent();if(b){var c=b.h;b.h=null;if(b=c&&y(a.clientX))b=new Hg(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}zv.m.bc.call(this,a)};h.vc=function(a){return a.g==this.hg&&this.Mb(a)?!0:zv.m.vc.call(this,a)};h.Og=function(){return this.hg};rt("goog-menuitem",function(){return new zv(null)});function Av(){}E(Av,at);da(Av);Av.prototype.U=function(a){return a.g.t("div",this.C())};Av.prototype.ua=function(a,b){b.id&&Cs(a,b.id);if("HR"==b.tagName){var c=b;b=this.U(a);Wg(b,c);Xg(c)}else mt(b,this.C());return b};Av.prototype.tc=function(){};Av.prototype.C=function(){return"goog-menuseparator"};function Bv(a,b){$.call(this,null,a||Av.X(),b);yt(this,1,!1);yt(this,2,!1);yt(this,4,!1);yt(this,32,!1);this.Hb=1}E(Bv,$);Bv.prototype.S=function(){Bv.m.S.call(this);var a=this.o();Zs(a,"separator")};rt("goog-menuseparator",function(){return new Bv});function Cv(){}E(Cv,Et);da(Cv);h=Cv.prototype;h.Cd=function(){return"menu"};h.Me=function(a){return"UL"==a.tagName||Cv.m.Me.call(this,a)};h.Kc=function(a){return"HR"==a.tagName?new Bv:Cv.m.Kc.call(this,a)};h.C=function(){return"goog-menu"};h.Pe=function(a){Cv.m.Pe.call(this,a);a=a.o();$s(a,"haspopup","true")};rt("goog-menuseparator",function(){return new Bv});function Dv(a,b){Lt.call(this,Kt,b||Cv.X(),a);Ut(this,!1)}E(Dv,Lt);h=Dv.prototype;h.oe=!0;h.C=function(){return this.hb.C()};h.yd=function(){var a=[];Hs(this,function(b){a.push(b)});return a};h.Qc=function(a,b,c){(b=Dv.m.Qc.call(this,a,b))&&a&&this.Z&&this.oe&&Mt(this).focus();a&&c&&y(c.clientX)?this.h=new Hg(c.clientX,c.clientY):this.h=null;return b};h.We=function(a){this.oe&&Mt(this).focus();return Dv.m.We.call(this,a)};h.Of=function(a){return a.isEnabled()&&a.Fa&&!!(a.ma&2)};
h.Vb=function(a){for(var b=this.hb,c=Og(this.g.g,"div",b.C()+"-content",a),d=c.length,e=0;e<d;e++)Ht(b,this,c[e]);Dv.m.Vb.call(this,a)};h.Re=function(a){var b=Dv.m.Re.call(this,a);b||Hs(this,function(c){!b&&c.Og&&c.hg==a.g&&(this.isEnabled()&&this.cb(c),b=c.Za(a))},this);return b};
h.Pb=function(a){Dv.m.Pb.call(this,a);if(a=Js(this,a)){var b=a.o();a=this.o();var c=ui(b),d=ui(a),e=Hi(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,g=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),g=g+Math.min(c,Math.max(c-d,0)),b=new Hg(e,g);a.scrollLeft=b.x;a.scrollTop=b.y}};function Ev(){}E(Ev,Av);da(Ev);Ev.prototype.U=function(a){return a.g.t("div",this.C()+" goog-inline-block","\u00a0")};Ev.prototype.ua=function(a,b){b=Ev.m.ua.call(this,a,b);mt(b,"goog-inline-block");return b};Ev.prototype.C=function(){return"goog-toolbar-separator"};function Fv(){}E(Fv,Et);da(Fv);Fv.prototype.Cd=function(){return"toolbar"};Fv.prototype.Kc=function(a){return"HR"==a.tagName?new Bv(Ev.X()):Fv.m.Kc.call(this,a)};Fv.prototype.C=function(){return"goog-toolbar"};Fv.prototype.Uf=function(){return Jt};function Gv(a,b,c){Lt.call(this,b,a||Fv.X(),c)}E(Gv,Lt);function Hv(a,b,c,d,e,f,g,k,l){var m,n;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==qi(m,"position")||(n=ui(m),p||(p=(p=vi(m))&&Ib?-m.scrollLeft:!p||H&&Ub("8")||"visible"==qi(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=Ig(n,new Hg(p,m.scrollTop))))}m=n||new Hg;n=Ai(a);if(p=ti(a)){var q=new oi(p.left,p.top,p.right-p.left,p.bottom-p.top),p=Math.max(n.left,q.left),s=Math.min(n.left+n.width,q.left+q.width);if(p<=s){var v=Math.max(n.top,q.top),
q=Math.min(n.top+n.height,q.top+q.height);v<=q&&(n.left=p,n.top=v,n.width=s-p,n.height=q-v)}}p=Kg(a);v=Kg(c);if(p.g!=v.g){var s=p.g.body,v=Sg(v.g),q=new Hg(0,0),z;z=(z=Mg(s))?Sg(z):window;var D=s;do{var G;if(z==v)G=ui(D);else{var J=D;G=void 0;if(J.getBoundingClientRect)G=ri(J),G=new Hg(G.left,G.top);else{G=jh(Kg(J));var O=ui(J);G=new Hg(O.x-G.x,O.y-G.y)}if(Ib&&!Ub(12)){O=void 0;H?O="-ms-transform":Jb?O="-webkit-transform":Hb?O="-o-transform":Ib&&(O="-moz-transform");var ha=void 0;O&&(ha=qi(J,O));
ha||(ha=qi(J,"transform"));J=ha?(J=ha.match(Ii))?new Hg(parseFloat(J[1]),parseFloat(J[2])):new Hg(0,0):new Hg(0,0);G=new Hg(G.x+J.x,G.y+J.y)}}q.x+=G.x;q.y+=G.y}while(z&&z!=v&&(D=z.frameElement)&&(z=z.parent));s=Ig(q,ui(s));H&&!ih(p)&&(s=Ig(s,jh(p)));n.left+=s.x;n.top+=s.y}a=Iv(a,b);b=new Hg(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=Ig(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var I;if(g)if(l)I=l;else if(I=ti(c))I.top-=m.y,I.right-=m.x,I.bottom-=m.y,I.left-=m.x;a:{l=b.ea();e=0;
a=Iv(c,d);d=yi(c);k=k?k.ea():d.ea();if(f||0!=a)a&2?l.x-=k.width+(f?f.right:0):f&&(l.x+=f.left),a&1?l.y-=k.height+(f?f.bottom:0):f&&(l.y+=f.top);if(g&&(I?(f=l,e=0,65==(g&65)&&(f.x<I.left||f.x>=I.right)&&(g&=-2),132==(g&132)&&(f.y<I.top||f.y>=I.bottom)&&(g&=-5),f.x<I.left&&g&1&&(f.x=I.left,e|=1),f.x<I.left&&f.x+k.width>I.right&&g&16&&(k.width=Math.max(k.width-(f.x+k.width-I.right),0),e|=4),f.x+k.width>I.right&&g&1&&(f.x=Math.max(I.right-k.width,I.left),e|=1),g&2&&(e=e|(f.x<I.left?16:0)|(f.x+k.width>
I.right?32:0)),f.y<I.top&&g&4&&(f.y=I.top,e|=2),f.y<=I.top&&f.y+k.height<I.bottom&&g&32&&(k.height=Math.max(k.height-(I.top-f.y),0),f.y=I.top,e|=8),f.y>=I.top&&f.y+k.height>I.bottom&&g&32&&(k.height=Math.max(k.height-(f.y+k.height-I.bottom),0),e|=8),f.y+k.height>I.bottom&&g&4&&(f.y=Math.max(I.bottom-k.height,I.top),e|=2),g&8&&(e=e|(f.y<I.top?64:0)|(f.y+k.height>I.bottom?128:0)),g=e):g=256,e=g,e&496)){c=e;break a}f=Ib&&(Cb||Lb)&&Ub("1.9");l instanceof Hg?(g=l.x,l=l.y):(g=l,l=void 0);c.style.left=xi(g,
f);c.style.top=xi(l,f);d==k||d&&k&&d.width==k.width&&d.height==k.height||(f=ih(Kg(Mg(c))),!H||f&&Ub("8")?(c=c.style,Ib?c.MozBoxSizing="border-box":Jb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(k.width,0)+"px",c.height=Math.max(k.height,0)+"px"):(g=c.style,f?(H?(f=Ei(c,"paddingLeft"),d=Ei(c,"paddingRight"),l=Ei(c,"paddingTop"),I=Ei(c,"paddingBottom"),f=new ni(l,d,I,f)):(f=pi(c,"paddingLeft"),d=pi(c,"paddingRight"),l=pi(c,"paddingTop"),I=pi(c,"paddingBottom"),f=new ni(parseFloat(l),
parseFloat(d),parseFloat(I),parseFloat(f))),c=Hi(c),g.pixelWidth=k.width-c.left-f.left-f.right-c.right,g.pixelHeight=k.height-c.top-f.top-f.bottom-c.bottom):(g.pixelWidth=k.width,g.pixelHeight=k.height)));c=e}return c}function Iv(a,b){return(b&4&&vi(a)?b^2:b)&-5};function Jv(){}Jv.prototype.l=function(){};function Kv(a,b,c){this.g=a;this.h=b;this.p=c}E(Kv,Jv);Kv.prototype.l=function(a,b,c){Hv(this.g,this.h,a,b,void 0,c,this.p)};function Lv(a,b,c,d){Kv.call(this,a,b);this.i=c?5:0;this.j=d||void 0}E(Lv,Kv);Lv.prototype.n=function(){return this.i};Lv.prototype.l=function(a,b,c,d){var e=Hv(this.g,this.h,a,b,null,c,10,d,this.j);if(e&496){var f=Mv(e,this.h);b=Mv(e,b);e=Hv(this.g,f,a,b,null,c,10,d,this.j);e&496&&(f=Mv(e,f),b=Mv(e,b),Hv(this.g,f,a,b,null,c,this.i,d,this.j))}};function Mv(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Nv(a,b,c,d){Lv.call(this,a,b,c||d);if(c||d)this.i=65|(d?32:132)}E(Nv,Lv);function Ov(){}E(Ov,at);da(Ov);h=Ov.prototype;h.Fb=function(){return"button"};h.Oa=function(a,b,c){switch(b){case 8:case 16:$s(a,"pressed",c);break;default:case 64:case 1:Ov.m.Oa.call(this,a,b,c)}};h.U=function(a){var b=Ov.m.U.call(this,a);this.Rb(b,a.ub());var c=a.T();c&&this.Ke(b,c);a.ma&16&&this.Oa(b,16,ht(a,16));return b};h.ua=function(a,b){b=Ov.m.ua.call(this,a,b);var c=this.T(b);a.L=c;a.Xd(this.ub(b));a.ma&16&&this.Oa(b,16,ht(a,16));return b};h.T=ca;h.Ke=ca;h.ub=function(a){return a.title};
h.Rb=function(a,b){a&&b&&(a.title=b)};h.C=function(){return"goog-button"};function Pv(){}E(Pv,Ov);da(Pv);h=Pv.prototype;h.Fb=function(){};h.U=function(a){tt(a);At(a);yt(a,32,!1);return a.g.t("button",{"class":ct(this,a).join(" "),disabled:!a.isEnabled(),title:a.ub()||"",value:a.T()||""},a.Eb()||"")};h.Dd=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};h.ua=function(a,b){tt(a);At(a);yt(a,32,!1);if(b.disabled){var c=this.Jc(1);mt(b,c)}return Pv.m.ua.call(this,a,b)};
h.Zf=function(a){Ds(a).listen(a.o(),"click",a.Mb)};h.Ed=ca;h.Te=ca;h.Se=function(a){return a.isEnabled()};h.uc=ca;h.R=function(a,b,c){Pv.m.R.call(this,a,b,c);(a=a.o())&&1==b&&(a.disabled=c)};h.T=function(a){return a.value};h.Ke=function(a,b){a&&(a.value=b)};h.Oa=ca;function Qv(a,b,c){$.call(this,a,b||Pv.X(),c)}E(Qv,$);h=Qv.prototype;h.T=function(){return this.L};h.Xf=function(a){this.L=a;this.i.Ke(this.o(),a)};h.ub=function(){return this.F};h.Rb=function(a){this.F=a;this.i.Rb(this.o(),a)};h.Xd=function(a){this.F=a};h.H=function(){Qv.m.H.call(this);delete this.L;delete this.F};h.S=function(){Qv.m.S.call(this);if(this.ma&32){var a=this.i.ac(this);a&&Ds(this).listen(a,"keyup",this.vc)}};
h.vc=function(a){return 13==a.g&&"key"==a.type||32==a.g&&"keyup"==a.type?this.Mb(a):32==a.g};rt("goog-button",function(){return new Qv(null)});function Rv(){}E(Rv,Ov);da(Rv);h=Rv.prototype;h.U=function(a){var b=ct(this,a),b=a.g.t("div",{"class":"goog-inline-block "+b.join(" ")},this.ud(a.ra(),a.g));this.Rb(b,a.ub());dt(this,a,b);return b};h.Fb=function(){return"button"};h.Ba=function(a){return a&&a.firstChild.firstChild};h.ud=function(a,b){return b.t("div","goog-inline-block "+(this.C()+"-outer-box"),b.t("div","goog-inline-block "+(this.C()+"-inner-box"),a))};h.Dd=function(a){return"DIV"==a.tagName};
h.ua=function(a,b){Sv(b,!0);Sv(b,!1);var c;a:{c=a.g.Vf(b);var d=this.C()+"-outer-box";if(c&&lt(c,d)&&(c=a.g.Vf(c),d=this.C()+"-inner-box",c&&lt(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.ud(b.childNodes,a.g));nt(b,["goog-inline-block",this.C()]);return Rv.m.ua.call(this,a,b)};h.C=function(){return"goog-custom-button"};
function Sv(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==va(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Tv(){}E(Tv,Rv);da(Tv);Ib&&(Tv.prototype.tc=function(a,b){var c=Tv.m.Ba.call(this,a&&a.firstChild);if(c){var d;d=Kg(a).t("div","goog-inline-block "+(this.C()+"-caption"),b);var e=c.parentNode;e&&e.replaceChild(d,c)}});h=Tv.prototype;h.Ba=function(a){a=Tv.m.Ba.call(this,a&&a.firstChild);Ib&&a&&a.__goog_wrapper_div&&(a=a.firstChild);return a};h.Oa=function(a,b,c){64!=b&&Tv.m.Oa.call(this,a,b,c)};
h.ua=function(a,b){var c=Og(document,"*","goog-menu",b)[0];if(c){T(c,!1);Mg(c).body.appendChild(c);var d=new Dv;Gs(d,c);a.$c(d)}return Tv.m.ua.call(this,a,b)};h.ud=function(a,b){return Tv.m.ud.call(this,[b.t("div","goog-inline-block "+(this.C()+"-caption"),a),b.t("div","goog-inline-block "+(this.C()+"-dropdown"),"\u00a0")],b)};h.C=function(){return"goog-menu-button"};function Uv(a,b,c,d){Qv.call(this,a,c||Tv.X(),d);yt(this,64,!0);this.n=new Nv(null,5);b&&this.$c(b);this.ca=new jf(500);!Ph&&!Qh||Ub("533.17.9")||(this.Jd=!0)}E(Uv,Qv);h=Uv.prototype;h.Jd=!1;h.S=function(){Uv.m.S.call(this);this.h&&Vv(this,this.h,!0);$s(this.W,"haspopup",!!this.h)};h.ob=function(){Uv.m.ob.call(this);if(this.h){this.la(!1);this.h.ob();Vv(this,this.h,!1);var a=this.h.o();a&&Xg(a)}};h.H=function(){Uv.m.H.call(this);this.h&&(this.h.qa(),delete this.h);delete this.na;this.ca.qa()};
h.Rc=function(a){Uv.m.Rc.call(this,a);ht(this,4)&&(this.la(!ht(this,64),a),this.h&&(this.h.Ab=ht(this,64)))};h.bc=function(a){Uv.m.bc.call(this,a);this.h&&!ht(this,4)&&(this.h.Ab=!1)};h.Mb=function(){xt(this,!1);return!0};h.Zg=function(a){this.h&&this.h.Na&&!this.Ve(a.target)&&this.la(!1)};h.Ve=function(a){var b;if(!(b=a&&Zg(this.o(),a))){if(b=this.h)a:if(b=this.h,Zg(b.o(),a))b=!0;else{for(var c=0,d=Is(b);c<d;c++){var e=Js(b,c);if("function"==typeof e.Ve&&e.Ve(a)){b=!0;break a}}b=!1}b=b||!1}return b};
h.vc=function(a){if(32==a.g){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.Na){var b=this.h.Za(a);return 27==a.g?(this.la(!1),!0):b}return 40==a.g||38==a.g||32==a.g||13==a.g?(this.la(!0),!0):!1};h.Xe=function(){this.la(!1)};h.hh=function(){ht(this,4)||this.la(!1)};h.Fd=function(a){this.Jd||this.la(!1);Uv.m.Fd.call(this,a)};
h.$c=function(a){var b=this.h;if(a!=b&&(b&&(this.la(!1),this.Z&&Vv(this,b,!1),delete this.h),this.Z&&$s(this.W,"haspopup",!!a),a)){this.h=a;Es(a,this);a.Qc(!1);var c=this.Jd;(a.oe=c)&&Ut(a,!0);this.Z&&Vv(this,a,!0)}return b};h.Ue=function(a,b){var c=Uv.m.Ue.call(this,a,b);c&&!this.Fa&&this.la(!1);return c};h.setEnabled=function(a){Uv.m.setEnabled.call(this,a);this.isEnabled()||this.la(!1)};
h.la=function(a,b){Uv.m.la.call(this,a);if(this.h&&ht(this,64)==a){if(a)this.h.Z||this.h.render(),this.V=ti(this.o()),this.P=Ai(this.o()),Wv(this),this.h.Pb(-1);else{xt(this,!1);this.h.Ab=!1;var c=this.o();c&&$s(c,"activedescendant","");if(null!=this.p&&(this.p=void 0,c=this.h.o())){var d="",e;d instanceof Jg?(e=d.height,d=d.width):e="";c.style.width=xi(d,!0);c.style.height=xi(e,!0)}}this.h.Qc(a,!1,b);this.I||(c=Ds(this),d=a?c.listen:c.Ea,d.call(c,this.g.g,"mousedown",this.Zg,!0),this.Jd&&d.call(c,
this.h,"blur",this.hh),d.call(c,this.ca,lf,this.vh),a?kf(this.ca):this.ca.stop())}};function Wv(a){if(a.h.Z){var b=a.na||a.o(),c=a.n;a.n.g=b;b=a.h.o();a.h.Na||(b.style.visibility="hidden",T(b,!0));!a.p&&a.n.n&&a.n.i&32&&(a.p=yi(b));c.l(b,c.h^1,null,a.p);a.h.Na||(T(b,!1),b.style.visibility="visible")}}
h.vh=function(){var a=Ai(this.o()),b=ti(this.o()),c=this.P;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.V,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.P=a,this.V=b,Wv(this))};function Vv(a,b,c){var d=Ds(a);c=c?d.listen:d.Ea;c.call(d,b,"action",a.Xe);c.call(d,b,"highlight",a.Tg);c.call(d,b,"unhighlight",a.Ug)}h.Tg=function(a){var b=this.o();null!=a.target.o()&&$s(b,"activedescendant",a.target.o().id)};
h.Ug=function(){if(!Pt(this.h)){var a=this.o();$s(a,"activedescendant","")}};rt("goog-menu-button",function(){return new Uv(null)});function Xv(a){L.call(this);this.g=[];Yv(this,a)}E(Xv,L);Xv.prototype.h=null;function Yv(a,b){b&&(Oa(b,function(a){Zv(a,!1)},a),ab(a.g,b))}Xv.prototype.yd=function(){return $a(this.g)};function $v(a){var b=a.h;return b?Na(a.g,b):-1}Xv.prototype.clear=function(){Wa(this.g);this.h=null};Xv.prototype.H=function(){Xv.m.H.call(this);delete this.g;this.h=null};function Zv(a,b){a&&"function"==typeof a.zc&&a.zc(b)};function aw(a,b,c,d){Uv.call(this,a,b,c,d);this.s=this.ra()}E(aw,Uv);h=aw.prototype;h.ka=null;h.S=function(){aw.m.S.call(this);bw(this);cw(this)};h.Vb=function(a){aw.m.Vb.call(this,a);(a=this.Eb())?(this.s=a,bw(this)):this.ka&&dw(this,this.ka.g[0]||null)};h.H=function(){aw.m.H.call(this);this.ka&&(this.ka.qa(),this.ka=null);this.s=null};h.Xe=function(a){dw(this,a.target);aw.m.Xe.call(this,a);a.Pc();this.dispatchEvent("action")};h.kh=function(){var a=ew(this);aw.m.Xf.call(this,a&&a.T());bw(this)};
h.$c=function(a){var b=aw.m.$c.call(this,a);a!=b&&(this.ka&&this.ka.clear(),a&&(this.ka?Hs(a,function(a){fw(a);var b=this.ka,e=b.g.length;a&&(Zv(a,!1),bb(b.g,e,0,a))},this):gw(this,a)));return b};function dw(a,b){if(a.ka){var c=ew(a),d=a.ka;b!=d.h&&(Zv(d.h,!1),d.h=b,Zv(b,!0));d.dispatchEvent("select");b!=c&&a.dispatchEvent("change")}}h.Xf=function(a){if(null!=a&&this.ka)for(var b=0,c;c=this.ka.g[b]||null;b++)if(c&&"function"==typeof c.T&&c.T()==a){dw(this,c);return}dw(this,null)};
function ew(a){return a.ka?a.ka.h:null}function gw(a,b){a.ka=new Xv;b&&Hs(b,function(a){fw(a);var b=this.ka,e=b.g.length;a&&(Zv(a,!1),bb(b.g,e,0,a))},a);cw(a)}function cw(a){a.ka&&Ds(a).listen(a.ka,"select",a.kh)}function bw(a){var b=ew(a),b=b?b.Eb():a.s;a.i.tc(a.o(),b);a.Gb=b}function fw(a){a.mf=a instanceof zv?"option":"separator"}h.la=function(a,b){aw.m.la.call(this,a,b);ht(this,64)&&(this.h||this.$c(new Dv(this.g)),(this.h||null).Pb(this.ka?$v(this.ka):-1))};rt("goog-select",function(){return new aw(null)});function hw(){}E(hw,Tv);da(hw);hw.prototype.C=function(){return"goog-toolbar-menu-button"};function iw(a,b,c,d){aw.call(this,a,b,c||hw.X(),d)}E(iw,aw);rt("goog-toolbar-select",function(){return new iw(null)});function jw(){}E(jw,at);da(jw);h=jw.prototype;h.Fb=function(){};function kw(a,b,c,d){var e=d.t("div",a.C()+"-inner-box");a=d.t("div",a.C()+"-outer-box",e);d.appendChild(b,a);d.appendChild(e,c)}h.ua=function(a,b){var c=a.g,d=b;b=c.t("div","goog-inline-block");c.rh(b,d);kw(this,b,d,c);jw.m.ua.call(this,a,b);a.Gb=d.value;return b};h.U=function(a){var b=a.g,c=b.t("div","goog-inline-block "+ct(this,a).join(" "));a=b.t("input",{type:"text",value:a.ra()||"",disabled:!a.isEnabled()});kw(this,c,a,b);return c};
h.Dd=function(a){return"INPUT"==a.tagName&&(!a.type||"TEXT"==a.type.toUpperCase())};h.Ba=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};h.ac=function(a){return this.Ba(a.o())};h.Te=ca;h.Se=function(a){return a.isEnabled()};h.uc=ca;h.R=function(a,b,c){jw.m.R.call(this,a,b,c);1==b&&(a=this.Ba(a.o()))&&(a.disabled=c)};h.Oa=ca;
h.tc=function(a,b){var c=this.Ba(a);c&&(c.value=b)};h.ra=function(a){return(a=this.Ba(a))?a.value:null};h.C=function(){return"wgui-textinput"};function lw(a,b,c){$.call(this,a,b||jw.X(),c);tt(this);vt(this);At(this);yt(this,32,!1);a||(this.Gb="")}E(lw,$);lw.prototype.S=function(){lw.m.S.call(this);var a=this.i.ac(this);if(a){var b=this.j||(this.j=new Qs);Rs(b,a);Ds(this).listen(b,"key",this.Za)}};lw.prototype.ra=function(){return this.o()?this.i.ra(this.o()):null};lw.prototype.T=function(){return this.ra()};lw.prototype.Eb=function(){return this.ra()||""};function mw(a){L.call(this);this.parent=a;this.result=this.g=null}E(mw,L);h=mw.prototype;h.getParent=function(){return this.parent};h.ha=function(){return this.g};function nw(a){if(a.g)return a.g.pa();if(a.result)return a.result.storeName;throw Error("No module name");}h.M=function(){return this.parent.M()};
function ow(a,b){b.record?a.g=b.record:a.g=null;a.result=b;a.dispatchEvent(new K("change",a));a.g||a.parent.send("list",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]).B(function(a){a=a[0].result;a[0]&&(this.g=new Hu(this.parent,new Nq(this.parent.M(),kq[kq.indexOf(this.result.storeName)],a[0])),this.dispatchEvent(new K("change",this)))},a)}h.clear=function(){if(this.g||this.result)this.result=this.g=null,this.dispatchEvent(new K("change",this))};
h.toString=function(){return"ydn.crm.sugar.model.Result:"+this.g};h.Ta=function(){return!this.g&&!this.result};function pw(){}E(pw,at);da(pw);pw.prototype.C=function(){return"search-result sugar-panel"};pw.prototype.U=function(a){var b=pw.m.U.call(this,a),c=a.g,d=c.t("div","record-header"),e=c.t("div","record-body");b.appendChild(d);b.appendChild(e);a=nw(a.K);e=c.t("a","title");c=c.t("span",{"class":"icon"},a.substr(0,2));d.appendChild(c);d.appendChild(e);d.classList.add(a);return b};
pw.prototype.refresh=function(a){var b=a.K,c=a.o();if((b=b.ha())&&b.g&&b.g.g){var d=Ng("record-header",a.o()),e=b.pa();d.className="record-header "+e;a=Ng("title",d);d=Ng("icon",d);a.textContent=Oq(b.ha());d.textContent=e.substring(0,2);e=b.ha();e=nq(e.domain,e.Y,e.D());a.href=e;a.target=b.M();T(c,!0)}else T(c,!1)};function qw(a,b,c){$.call(this,null,null,a);this.oa(b);tt(this);vt(this);At(this);var d=new Nq(b.M(),nw(b)),d=new Hu(b.getParent(),d);this.h=new gv(d,null,a);this.h.h=!c;this.aa(this.h,!0);Ds(this).listen(b,"change",this.n,!0)}E(qw,$);qw.prototype.n=function(a){var b=this.h.K,c=this.K.ha();b.Qb(c?c.ha():null);this.i.refresh(this);this.h.refresh(a)};pt(qw,pw);function rw(a,b,c){zs.call(this,a);this.oa(b);this.i=new zs(a);this.h=null;this.j=[];this.n=0;this.p=!!c;this.s=!this.p}E(rw,zs);rw.prototype.za=function(){rw.m.za.call(this);var a=this.g,b=this.o(),c=a.t("div","header");b.appendChild(c);this.h=new Gv(null,null,a);for(var d=new Dv(a),e=0;e<lq.length;e++)d.aa(new zv(lq[e]),!0);d=new iw("Module",d,null,a);this.h.aa(d,!0);this.h.aa(new lw(""),!0);this.h.render(c);this.p&&d.Ue(!1);a=a.t("div","content");b.appendChild(a);this.aa(this.i,!0)};
rw.prototype.S=function(){rw.m.S.call(this);var a=Js(this.h,1);Ds(this).listen(a,"action",this.F,!0)};function sw(a,b){if(b){for(var c=Is(a.i),d=0;d<c;d++){var e=Js(a.i,d).K;if(e.Ta()){ow(e,b);return}}30<c?ow(Js(a.i,0).K,b):(c=new mw(a.K),ow(c,b),c=new qw(a.g,c,!a.s),a.i.aa(c,!0))}}
function tw(a,b,c,d){$u(a.K,b,c,d).u(function(a){var b=a[0];if(b.result[0]){a=kq[kq.indexOf(b.store)];var g=new Ju(this.K,a),b=new Nq(this.K.M(),a,b.result[0]);g.Qb(b);b=b.D();sw(this,{storeName:a,primaryKey:b,record:g,value:d,tokens:[{keyPath:c}]})}uw(this)},function(a){uw(this);throw a;},a)}
function vw(a,b){0==a.n&&(a.n=b);var c=100*(a.n-b)/a.n,d=Js(a.h,1).o(),d=Og(document,"input",null,d)[0].style,e=["rgb(255, 255, 255) 0%"];e[1]="rgb(255, 255, 255) "+c.toFixed(1)+"%";e[2]="rgb(135,224,253) "+(c+0.1).toFixed(1)+"%";e[3]="rgb(135,224,253) 100%";d.background="linear-gradient(to right, "+e.join(", ")+")"}
function uw(a){var b=a.j[0];if(b){b.Bc++;vw(a,3*(a.j.length-1)+(3-b.Bc));var c=a.K;0==b.Bc?tw(a,b.Y,"ydn$emails",b.Yc):1==b.Bc?(c=b.Yc.match(/\d/g),3>(c?c.length:0)?uw(a):tw(a,b.Y,"ydn$phones",b.Yc)):2==b.Bc?av(c,b.Y,b.Yc).u(function(a){a=a[0].result;for(var b=a.length||0,c=0;c<b;c++)sw(this,a[c]);uw(this)},function(a){throw a;},a):(a.j.shift(),0<a.j.length&&uw(a))}}
rw.prototype.F=function(){var a=Js(this.h,1).ra();if(a&&(a=a.trim(),2<=a.length)){var b;b=(b=ew(Js(this.h,0)))?b.Eb():null;this.j.length=0;if(b)this.j[0]={Y:b,Yc:a,Bc:-1};else for(b=0;b<lq.length;b++)this.j[b]={Y:lq[b],Yc:a,Bc:-1};for(a=Is(this.i)-1;0<=a;a--)Js(this.i,a).K.clear();this.n=0;uw(this)}};rw.prototype.Aa=function(){return Ng("content",this.o())};function ww(a,b){zs.call(this,a);this.oa(b)}E(ww,zs);h=ww.prototype;h.logger=R("ydn.crm.inj.sugar.Header");h.C=function(){return"sugar-header"};
h.za=function(){ww.m.za.call(this);var a=this.o(),b=this.K,c=this.g;Eg(a,this.C());var d=c.t("a");d.textContent=b.M();d.href=b.h.baseUrl?b.h.baseUrl:"https://"+b.h.domain;d=c.t("div",{"class":"main-title",title:"SugarCRM"},[d]);a.appendChild(d);var d=[],e=chrome.extension.getURL("option-page.html")+"#credentials",e=c.t("a",{href:e,target:"option-page"},"Setup host permission");e.setAttribute("title","Your permission is required to connect your server from this extension. Without permission request to server will be slow.");
d.push(e);d=c.t("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.t("input",{name:"username",type:"text"}),e=c.t("div",null,[e]),f=c.t("input",{name:"password",type:"password"}),f=c.t("div",null,[f]),g=c.t("div","message"),e=c.t("div","login-form",[e,f,g]);T(d,!1);T(e,!1);a.appendChild(e);b=new rw(c,b,!0);this.aa(b);c=c.t("div");a.appendChild(c);b.render(c)};
h.S=function(){ww.m.S.call(this);var a=this.o(),b=Ds(this);this.o().querySelector(".host-permission");a=a.querySelector(".login-form");a=new Qs(a);b.listen(a,"key",this.Eh);b.listen(cd(),"post",function(a){a=a.getMessage();if("update-host-permission"==a.req&&(a=a.data)&&a.origins){a=a.origins;for(var b=this.info.M(),e=0;e<a.length;e++)if((new td(a[e])).M()==b){P(this.logger,"has host permission on "+b);var f=this.K;f.h.hostPermission=!0;this.oa(f)}}},!1)};
h.Eh=function(a){if(13==a.g){var b=this.o().querySelector(".login-form"),c=this.K;a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";Zu(c,a,d).u(function(){c.isLogin()?(e.textContent="",T(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};h.M=function(){return this.K.M()};
h.refresh=function(){var a=this.K,b=a.M(),c=this.o(),d=c.querySelector(".main-title a"),e=c.querySelector(".login-form"),f=c.querySelector(".host-permission");d.textContent=b;d.href=a.h.baseUrl||null||"https://"+b;e.querySelector("input[name=username]").textContent=a.h.userName||null||"";T(e,!1);T(f,!1);T(c,!0);a.isLogin()||fd("sugarcrm",b).send("about").B(function(a){T(e,!a.isLogin)});a.isLogin()&&!a.h.hostPermission&&(a=chrome.extension.getURL("host-permission.html"),f.querySelector("a").href=a+
"?"+b,T(f,!0))};function xw(a,b,c){zs.call(this,a);a=new bv(b,c);this.oa(a)}E(xw,zs);xw.prototype.C=function(){return"sugar-panel"};xw.prototype.za=function(){xw.m.za.call(this);var a=this.g,b=this.o();Eg(b,this.C());b=new ww(a,this.K);this.aa(b,!0);a=new qv(a,this.K);this.aa(a,!0)};xw.prototype.S=function(){xw.m.S.call(this)};xw.prototype.logger=R("ydn.crm.inj.SugarPanel");function yw(){this.g=null}var zw;function Aw(){zw||(zw=new yw);return zw}yw.prototype.jb=function(a,b){this.g?a.call(b):fd().send("user-setting").B(function(c){this.g=c||Bw;a.call(b)},this)};
yw.prototype.h=function(a){a=fd("sugarcrm",a);for(var b=[],c=0;c<lq.length;c++){var d=a.send("info-module",lq[c]).B(function(a){var b="",c="",d;for(d in a.module_fields){var l=a.module_fields[d];if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(d))l.group="name";else if(/^email\d?$/.test(d))l.group="email";else if(/^phone?/.test(d))l.group="phone";else if(!l.group&&ra(d,b)){l.group=c;continue}b=d;c=l.group}},this);b.push(d)}return(new mm(b)).B(function(a){for(var b={},c=0;c<
lq.length;c++)b[lq[c]]=a[c][1];return b},this)};var Bw={};function Cw(a){zs.call(this,a)}E(Cw,zs);Cw.prototype.za=function(){Cw.m.za.call(this);var a=this.o(),b=this.g;Eg(a,"sugarcrm-link-panel");b=b.createElement("a");b.textContent="Setup SugarCRM";b.href=chrome.extension.getURL("option-page.html")+"#credentials";b.className="sugarcrm-setup-link";a.appendChild(b);T(a,!1)};Cw.prototype.oa=function(a){Cw.m.oa.call(this,a);a=u(a)&&0<a.length;T(this.o(),!a)};function Dw(a){zs.call(this,a);this.i=new jf(400);this.h=0;this.j="";this.n=Aw();this.n.jb(jb)}E(Dw,zs);h=Dw.prototype;h.C=function(){return"inj"};h.ph=function(){this.h++;this.j!=location.href&&(N(this.logger,"url already changed"),this.i.stop());40<this.h&&(N(this.logger,"sniff give up after "+this.h),this.i.stop());var a=this.ng(!1);a?(T(this.o(),!0),this.i.stop(),this.oa(a)):(N(this.logger,"Could not sniff contact identifier."),T(this.o(),!1))};
h.za=function(){Dw.m.za.call(this);var a=this.o();a.classList.add(this.C());var b=new Cw;this.aa(b,!0);T(a,!1)};h.S=function(){Dw.m.S.call(this);Ds(this).listen(this.i,lf,this.ph,!0)};h.logger=R("ydn.crm.inj.SidebarPanel");function Ew(a,b){var c=b.domain;return a.n.h(c).B(function(a){a=new xw(this.g,b,a);for(var e=0;e<Is(this);e++){var f=Js(this,e);if(f instanceof xw&&f.K.M()==c)return}P(this.logger,"sugar panel "+c+" created");this.aa(a,!0)},a)}
h.init=function(){return 1<Is(this)?sb():fd().send("list-sugarcrm").B(function(a){Js(this,0).oa(a);for(var b=[],c=0;c<a.length;c++){var d;a:{for(d=1;d<Is(this);d++){var e=Js(this,d);if(e instanceof xw&&e.K.M()==a[c]){d=!0;break a}}d=!1}d||b.push(Ew(this,a[c]))}return nm(b)},this)};h.update=function(){Q(this.logger,"updating sidebar");this.init();this.h=0;this.j=location.href;kf(this.i)};
h.oa=function(a){Dw.m.oa.call(this,a);var b=Is(this);1<b?P(this.logger,"setting module to "+b+" children"):N(this.logger,"no sugar instance");for(var c=1;c<b;c++){var d=Js(this,c);if(d instanceof xw){var e=a,f=d.K,d=d.o();e.g?(T(d,!0),cv(f,e)):T(d,!1)}else N(this.logger,"unknown panel at "+c)}};
h.ng=function(a){var b=this.o();a&&window.console.log("sniff contact "+this.h);var c=document.querySelector('table[role="presentation"]');if(!c)return a&&N(this.logger,"Could not find main view"),null;a&&1!=c.childElementCount&&N(this.logger,"Probably our assumption about layout is wrong");var d=c.querySelector("tr");if(a&&3!=d.childElementCount)return N(this.logger,"Probably our assumption about layout is very wrong"),null;c=d.children[2];a&&!c.style.height&&N(this.logger,"Probably our assumption about layout is wrong");
c=c.querySelector("table");if(!c)return N(this.logger,"No Contact panel found."),null;var e;a:if(e=5<this.h,d=c.querySelector("img[jid]")){for(e=d.getAttribute("jid");d&&"TD"!=d.tagName;)d=d.parentElement;d=d.nextElementSibling.querySelector("span[title]").getAttribute("title");e=new eu(e,d)}else{if(e&&(e=c.querySelector("span[title]"))&&(d=e.getAttribute("title").trim(),0<d.length&&(e=document.querySelector('span[name="'+d+'"][email]')))){e=e.getAttribute("email");e=new eu(e,d);break a}e=null}if(!e)return null;
for(var f,d=c,g=0;4>g;g++)if(d.parentElement&&(d=d.parentElement,d.nextElementSibling&&"DIV"==d.nextElementSibling.tagName)){var d=d.parentElement,g=d.lastElementChild,k=!!g.querySelector("a[href]");f=document.createElement("div");k?d.parentElement.insertBefore(f,g):d.appendChild(f);break}f||(a&&N(this.logger,"usual root position is not available, locating on second best position"),f=c.ownerDocument,a=f.createElement("td"),a.setAttribute("colspan","2"),d=f.createElement("tr"),d.className="widget-topraw",
d.appendChild(a),(c.querySelector("tbody")||c).appendChild(d),f=a);b.parentElement&&b.parentElement.removeChild(this.o());f.appendChild(b);T(this.o(),!0);return e};function Fw(){this.g=this.h=null}Fw.prototype.init=function(a){this.h=a;a=document.getElementById("user-login");Bc(a,"click",function(a){a.preventDefault();window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=400, top="+(screen.height/2-200)+", left="+(screen.width/2-300));return!0},!0,this)};
function Gw(a,b){if(!b||b instanceof Error)a.g=null;else if(a.g=b,a.h){var c=document.getElementById("user-login"),d=document.getElementById("user-name"),e=Ng("login-message",a.h);b instanceof Error?(e.textContent=b.message,T(e,!0),T(c,!1)):a.g.is_login?(c.href=a.g.logout_url,c.textContent="logout",d.textContent=a.g.email,T(e,!1),T(c,!1)):(c.href=a.g.login_url,c.textContent="login",c.style.display="",d.textContent="",T(e,!0),T(c,!0))}};function Hw(){this.j=document.createElement("div");document.body.appendChild(this.j);dd("gmail");this.i=new Dw;this.i.render(this.j);var a=this.history=new xs,b=Gd(new td(document.location.href))+"/";a.xh=b;Bc(this.history,"navigate",this.bh,!1,this);this.l=null;this.g=!1;new bu;this.h=new Fw}h=Hw.prototype;h.logger=R("ydn.crm.inj.App");h.isLogin=function(){return this.g};h.bh=function(a){a.g!=this.l&&(this.l=a.g,/^contact/.test(a.g)||/\w+\/[\w\d]{10,18}$/.test(a.g)&&this.i.update())};
h.init=function(){P(this.logger,"init "+this);Iw(this);var a=window.setInterval(function(){document.querySelector('a[href="http://mail.google.com/mail/help/terms.html"]')&&window.clearTimeout(a)},500);window.setTimeout(function(){window.clearTimeout(a)},15E3)};h.toString=function(){return"inj.Main:0.7.3"};
function Iw(a){fd().send("login-info").u(function(a){a:{if(a&&a.email){Q(this.logger,"user "+a.email+" login");this.g=!0;var c=this.h.g;if(c&&c.email==a.email)break a;this.i.init();this.history.setEnabled(!0)}else this.g&&(this.g=!1,this.history.setEnabled(!1));Gw(this.h,a)}},function(a){N(this.logger,a.name+" "+a.message);Gw(this.h,a)},a)}h.Dh=function(){return{sidebar:this.i,setting:this.h}};oa("ydn.crm.version","0.7.3");oa("runInjApp",function(){yo();var a=new Hw;a.init();return a});oa("runEventApp",function(){yo();var a=new ps;a.init();ns(a);return a});oa("loadApp",vs);ps.prototype.xp=ps.prototype.P;Hw.prototype.xp=Hw.prototype.Dh;Dw.prototype.sniff=Dw.prototype.ng;oa("goog.async.Deferred",F);F.prototype.addCallback=F.prototype.B;F.prototype.addErrback=F.prototype.Fc;F.prototype.addBoth=F.prototype.da;F.prototype.addCallbacks=F.prototype.u;function Jw(a,b,c){zv.call(this,a,b,c);yt(this,8,!0);if(a=this.o())b=this.i,a&&(Zs(a,"menuitemradio"),wv(b,this,a,!0))}E(Jw,zv);Jw.prototype.Mb=function(){return this.dispatchEvent("action")};rt("goog-option",function(){return new Jw(null)});function Kw(){}E(Kw,Rv);da(Kw);Kw.prototype.C=function(){return"goog-toolbar-button"};function Lw(a,b,c){Qv.call(this,a,b||Kw.X(),c)}E(Lw,Qv);rt("goog-toolbar-button",function(){return new Lw(null)});function Mw(a,b,c,d){Uv.call(this,a,b,c||hw.X(),d)}E(Mw,Uv);rt("goog-toolbar-menu-button",function(){return new Mw(null)});function Nw(a,b){Bv.call(this,a||Ev.X(),b)}E(Nw,Bv);rt("goog-toolbar-separator",function(){return new Nw});function Ow(a,b,c){Qv.call(this,a,b||Rv.X(),c);yt(this,16,!0)}E(Ow,Qv);rt("goog-toggle-button",function(){return new Ow(null)});function Pw(a,b,c){Ow.call(this,a,b||Kw.X(),c)}E(Pw,Ow);rt("goog-toolbar-toggle-button",function(){return new Pw(null)});function Qw(){}E(Qw,at);da(Qw);Qw.prototype.C=function(){return"record"};Qw.prototype.U=function(a){return Qw.m.U.call(this,a)};function Rw(a,b){$.call(this,null,null,a);this.oa(b)}E(Rw,$);pt(Rw,Qw);function Sw(a,b){zs.call(this,a);this.oa(b);this.i=new zs(a);this.h=new zs(a)}E(Sw,zs);Sw.prototype.Aa=function(){return Ng("content",this.o())};
Sw.prototype.za=function(){Sw.m.za.call(this);var a=this.o(),b;A('<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>')?(La('Soy template output is unsafe for use as HTML: <div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>'),
b="zSoyz"):b='<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>';
a.innerHTML=b;Gs(new Gv,Ng("goog-toolbar",a));this.aa(this.i,!0);this.aa(this.h,!0);T(this.h.o(),!1)};Sw.prototype.S=function(){Sw.m.S.call(this);this.o()};Sw.prototype.refresh=function(){};oa("ydn.crm.sugar.model.Sugar",Yu);oa("ydn.crm.ui.sugar.SyncPanel",Sw);oa("ydn.crm.ui.sugar.SearchPanel",rw);oa("ydn.crm.inj.UserSetting",yw);yw.getInstance=Aw;yw.prototype.getModuleInfo=yw.prototype.h;oa("ydn.msg.Pipe",Wc);oa("ydn.msg.initPipe",dd);oa("ydn.msg.getChannel",fd);Wc.prototype.listen=Wc.prototype.listen;Wc.prototype.getChannel=Wc.prototype.j;$c.prototype.send=$c.prototype.send;})();

            //# sourceMappingURL=https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm-0.7.3.js.map
        