(function(){var h,aa=aa||{},q=this;function t(a){return void 0!==a}function ba(a){a=a.split(".");for(var b=q,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ca(){}function da(a){a.H=function(){return a.vh?a.vh:a.vh=new a}}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function u(a){return"array"==ea(a)}function fa(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function v(a){return"string"==typeof a}function ga(a){return"boolean"==typeof a}function ha(a){return"number"==typeof a}function ia(a){return"function"==ea(a)}function y(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a){return a[ka]||(a[ka]=++la)}
var ka="closure_uid_"+(1E9*Math.random()>>>0),la=0;function ma(a,b,c){return a.call.apply(a.bind,arguments)}function na(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function oa(a,b,c){oa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ma:na;return oa.apply(null,arguments)}function pa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var z=Date.now||function(){return+new Date};
function qa(a,b){var c=a.split("."),d=q;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&t(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function A(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.fk=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function ra(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function sa(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}A(ta,Error);ta.prototype.name="CustomError";var ua;function va(a,b){return 0==a.lastIndexOf(b,0)}function wa(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function xa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ya(a){return/^[\s\xa0]*$/.test(a)}function Aa(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function Ba(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}
function Ca(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function Da(a){if(!Ea.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Fa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ga,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ha,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ia,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ja,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Ka,"&#0;"));return a}var Fa=/&/g,Ga=/</g,Ha=/>/g,Ia=/"/g,Ja=/'/g,Ka=/\x00/g,Ea=/[\x00&<>"']/;
function La(a){return Ca(a.replace(/  /g," &#160;"),void 0)}function Ma(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Na={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Oa={"'":"\\'"};
function Pa(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=Na[d])){if(!(31<e&&127>e))if(d in Oa)d=Oa[d];else if(d in Na)d=Oa[d]=Na[d];else{e=d;g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=Oa[d]=e}g=d}b[f]=g}b.push('"');return b.join("")}function Qa(a,b){return-1!=a.indexOf(b)}
function Ra(a,b){for(var c=0,d=Ba(String(a)).split("."),e=Ba(String(b)).split("."),f=Math.max(d.length,e.length),g=0;0==c&&g<f;g++){var k=d[g]||"",l=e[g]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=m.exec(k)||["","",""],r=n.exec(l)||["","",""];if(0==p[0].length&&0==r[0].length)break;c=Sa(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Sa(0==p[2].length,0==r[2].length)||Sa(p[2],r[2])}while(0==c)}return c}function Sa(a,b){return a<b?-1:a>b?1:0}
function Ta(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ua(a){var b=v(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function Va(a,b){b.unshift(a);ta.call(this,xa.apply(null,b));b.shift()}A(Va,ta);Va.prototype.name="AssertionError";function Wa(a,b){throw new Va("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};function Xa(a){q.setTimeout(function(){throw a;},0)}var Ya;
function Za(){if(q.Promise&&q.Promise.resolve){var a=q.Promise.resolve();return function(b){a.then(function(){try{b()}catch(a){Xa(a)}})}}var b=q.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d=b.location.protocol+
"//"+b.location.host,a=oa(function(a){if(a.origin==d||a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof b){var c=new b,d={},e=d;c.port1.onmessage=function(){d=d.next;var a=d.Wg;d.Wg=null;a()};return function(a){e.next={Wg:a};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){q.setTimeout(a,0)}};function $a(a,b){if(!ab){var c=bb;ia(q.setImmediate)?q.setImmediate(c):(Ya||(Ya=Za()),Ya(c));ab=!0}cb.push(new db(a,b))}var ab=!1,cb=[];[].push(function(){ab=!1;cb=[]});function bb(){for(;cb.length;){var a=cb;cb=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.g.call(c.h)}catch(d){Xa(d)}}}ab=!1}function db(a,b){this.g=a;this.h=b};function eb(a,b){this.h=fb;this.o=void 0;this.g=this.i=null;this.j=this.l=!1;try{var c=this;a.call(b,function(a){gb(c,hb,a)},function(a){gb(c,ib,a)})}catch(d){gb(this,ib,d)}}var fb=0,hb=2,ib=3;eb.prototype.then=function(a,b,c){return jb(this,ia(a)?a:null,ia(b)?b:null,c)};ra(eb);function kb(a){a.h==fb&&$a(function(){var a=new lb(void 0);mb(this,a)},a)}
function mb(a,b){if(a.h==fb)if(a.i){var c=a.i;if(c.g){for(var d=0,e=-1,f=0,g;g=c.g[f];f++)if(g=g.ae)if(d++,g==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.h==fb&&1==d?mb(c,b):(d=c.g.splice(e,1)[0],nb(c,d,ib,b)))}}else gb(a,ib,b)}function ob(a,b){a.g&&a.g.length||a.h!=hb&&a.h!=ib||pb(a);a.g||(a.g=[]);a.g.push(b)}
function jb(a,b,c,d){var e={ae:null,Ah:null,Eh:null};e.ae=new eb(function(a,g){e.Ah=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.Eh=c?function(b){try{var e=c.call(d,b);!t(e)&&b instanceof lb?g(b):a(e)}catch(m){g(m)}}:g});e.ae.i=a;ob(a,e);return e.ae}eb.prototype.p=function(a){this.h=fb;gb(this,hb,a)};eb.prototype.t=function(a){this.h=fb;gb(this,ib,a)};
function gb(a,b,c){if(a.h==fb){if(a==c)b=ib,c=new TypeError("Promise cannot resolve to itself");else{if(sa(c)){a.h=1;c.then(a.p,a.t,a);return}if(y(c))try{var d=c.then;if(ia(d)){qb(a,c,d);return}}catch(e){b=ib,c=e}}a.o=c;a.h=b;pb(a);b!=ib||c instanceof lb||rb(a,c)}}function qb(a,b,c){function d(b){f||(f=!0,a.t(b))}function e(b){f||(f=!0,a.p(b))}a.h=1;var f=!1;try{c.call(b,e,d)}catch(g){d(g)}}function pb(a){a.l||(a.l=!0,$a(a.M,a))}
eb.prototype.M=function(){for(;this.g&&this.g.length;){var a=this.g;this.g=[];for(var b=0;b<a.length;b++)nb(this,a[b],this.h,this.o)}this.l=!1};function nb(a,b,c,d){if(c==hb)b.Ah(d);else{for(;a&&a.j;a=a.i)a.j=!1;b.Eh(d)}}function rb(a,b){a.j=!0;$a(function(){a.j&&sb.call(null,b)})}var sb=Xa;function lb(a){ta.call(this,a)}A(lb,ta);lb.prototype.name="cancel";var tb=Array.prototype,ub=tb.indexOf?function(a,b,c){return tb.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(v(a))return v(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},vb=tb.lastIndexOf?function(a,b,c){return tb.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(v(a))return v(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},wb=tb.forEach?function(a,b,c){tb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},xb=tb.filter?function(a,b,c){return tb.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=v(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},yb=tb.map?function(a,b,c){return tb.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=v(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=
b.call(c,f[g],g,a));return e},zb=tb.some?function(a,b,c){return tb.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Ab=tb.every?function(a,b,c){return tb.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Bb(a,b){var c=Cb(a,b,void 0);return 0>c?null:v(a)?a.charAt(c):a[c]}
function Cb(a,b,c){for(var d=a.length,e=v(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Db(a,b){return 0<=ub(a,b)}function Eb(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Fb(a,b){var c=ub(a,b),d;(d=0<=c)&&tb.splice.call(a,c,1);return d}function Gb(a){return tb.concat.apply(tb,arguments)}function Hb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ib(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=fa(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}}function Jb(a,b,c,d){tb.splice.apply(a,Kb(arguments,1))}function Kb(a,b,c){return 2>=arguments.length?tb.slice.call(a,b):tb.slice.call(a,b,c)}function Lb(a,b,c){for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,k;k=b(c,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}
function Mb(a,b){if(!fa(a)||!fa(b)||a.length!=b.length)return!1;for(var c=a.length,d=Nb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function Ob(a,b){return a>b?1:a<b?-1:0}function Nb(a,b){return a===b}function Pb(a,b){var c=Lb(a,Qb||Ob,b);0>c&&Jb(a,-(c+1),0,b)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function B(a,b){this.t=[];this.fa=a;this.P=b||null;this.l=this.h=!1;this.j=void 0;this.N=this.Y=this.M=!1;this.o=0;this.i=null;this.K=0}function Rb(a,b){if(a.h)a.j instanceof B&&Rb(a.j);else{if(a.i){var c=a.i;delete a.i;b?Rb(c,b):(c.K--,0>=c.K&&Rb(c))}a.fa?a.fa.call(a.P,a):a.N=!0;a.h||a.D(new Sb)}}h=B.prototype;h.ce=function(a,b){this.M=!1;Tb(this,a,b)};function Tb(a,b,c){a.h=!0;a.j=c;a.l=!b;a.uf()}function Ub(a){if(a.h){if(!a.N)throw new Vb;a.N=!1}}h.callback=function(a){Ub(this);Tb(this,!0,a)};
h.D=function(a){Ub(this);Tb(this,!1,a)};h.B=function(a,b){return this.A(a,null,b)};h.Oc=function(a,b){return this.A(null,a,b)};h.ba=function(a,b){return this.A(a,a,b)};h.A=function(a,b,c){this.t.push([a,b,c]);this.h&&this.uf();return this};h.then=function(a,b,c){var d,e,f=new eb(function(a,b){d=a;e=b});this.A(d,function(a){a instanceof Sb?kb(f):e(a)});return f.then(a,b,c)};ra(B);function Wb(a,b){a.A(b.callback,b.D,b)}function Xb(a){var b=new B;Wb(a,b);return b}
function Yb(a){return zb(a.t,function(a){return ia(a[1])})}
B.prototype.uf=function(){this.o&&this.h&&Yb(this)&&(Zb(this.o),this.o=0);this.i&&(this.i.K--,delete this.i);for(var a=this.j,b=!1,c=!1;this.t.length&&!this.M;){var d=this.t.shift(),e=d[0],f=d[1],d=d[2];if(e=this.l?f:e)try{var g=e.call(d||this.P,a);t(g)&&(this.l=this.l&&(g==a||g instanceof Error),this.j=a=g);sa(a)&&(this.M=c=!0)}catch(k){a=k,this.l=!0,Yb(this)||(b=!0)}}this.j=a;c&&(c=oa(this.ce,this,!0),g=oa(this.ce,this,!1),a instanceof B?(a.A(c,g),a.Y=!0):a.then(c,g));b&&(a=new $b(a),ac[a.pe]=a,
this.o=a.pe)};function bc(a){var b=new B;b.callback(a);return b}function C(a){var b=new B;b.D(a);return b}function Vb(){ta.call(this)}A(Vb,ta);Vb.prototype.message="Deferred has already fired";Vb.prototype.name="AlreadyCalledError";function Sb(){ta.call(this)}A(Sb,ta);Sb.prototype.message="Deferred was canceled";Sb.prototype.name="CanceledError";function $b(a){this.pe=q.setTimeout(oa(this.h,this),0);this.g=a}$b.prototype.h=function(){delete ac[this.pe];throw this.g;};var ac={};
function Zb(a){var b=ac[a];b&&(q.clearTimeout(b.pe),delete ac[a])};function cc(){0!=dc&&(ec[ja(this)]=this)}var dc=0,ec={};cc.prototype.M=!1;cc.prototype.$=function(){if(!this.M&&(this.M=!0,this.I(),0!=dc)){var a=ja(this);delete ec[a]}};cc.prototype.I=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};function fc(a){a&&"function"==typeof a.$&&a.$()};var gc;a:{var hc=q.navigator;if(hc){var ic=hc.userAgent;if(ic){gc=ic;break a}}gc=""};var jc,kc;function lc(){return q.navigator||null}var mc=Qa(gc,"Opera")||Qa(gc,"OPR"),E=Qa(gc,"Trident")||Qa(gc,"MSIE"),nc=Qa(gc,"Gecko")&&!Qa(gc.toLowerCase(),"webkit")&&!(Qa(gc,"Trident")||Qa(gc,"MSIE")),oc=Qa(gc.toLowerCase(),"webkit");oc&&Qa(gc,"Mobile");var pc,qc=lc();pc=qc&&qc.platform||"";jc=Qa(pc,"Mac");Qa(pc,"Win");Qa(pc,"Linux");kc=!!lc()&&Qa(lc().appVersion||"","X11");var rc=gc;rc&&Qa(rc,"Android");rc&&Qa(rc,"iPhone");rc&&Qa(rc,"iPad");
function sc(){var a=q.document;return a?a.documentMode:void 0}var tc=function(){var a="",b;if(mc&&q.opera)return a=q.opera.version,ia(a)?a():a;nc?b=/rv\:([^\);]+)(\)|;)/:E?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:oc&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(gc))?a[1]:"");return E&&(b=sc(),b>parseFloat(a))?String(b):a}(),uc={};function vc(a){return uc[a]||(uc[a]=0<=Ra(tc,a))}var wc=q.document,xc=wc&&E?sc()||("CSS1Compat"==wc.compatMode?parseInt(tc,10):5):void 0;var yc=!E||E&&9<=xc,zc=!E||E&&9<=xc,Ac=E&&!vc("9");!oc||vc("528");nc&&vc("1.9b")||E&&vc("8")||mc&&vc("9.5")||oc&&vc("528");nc&&!vc("8")||E&&vc("9");function F(a,b){this.type=a;this.i=this.target=b;this.o=this.j=!1;this.Ih=!0}F.prototype.$=function(){};F.prototype.stopPropagation=function(){this.j=!0};F.prototype.preventDefault=function(){this.o=!0;this.Ih=!1};function Bc(a){Bc[" "](a);return a}Bc[" "]=ca;function Cc(a,b){F.call(this,a?a.type:"");this.l=this.i=this.target=null;this.g=this.clientY=this.clientX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.t=!1;this.h=null;a&&this.init(a,b)}A(Cc,F);var Dc=[1,4,2];
Cc.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.i=b;var d=a.relatedTarget;if(d){if(nc){var e;a:{try{Bc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.l=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.g=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.t=jc?a.metaKey:
a.ctrlKey;this.state=a.state;this.h=a;a.defaultPrevented&&this.preventDefault()};function Ec(a){return(yc?0==a.h.button:"click"==a.type?!0:!!(a.h.button&Dc[0]))&&!(oc&&jc&&a.ctrlKey)}Cc.prototype.stopPropagation=function(){Cc.m.stopPropagation.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};
Cc.prototype.preventDefault=function(){Cc.m.preventDefault.call(this);var a=this.h;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ac)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Fc="closure_listenable_"+(1E6*Math.random()|0);function Gc(a){return!(!a||!a[Fc])}var Hc=0;function Ic(a,b,c,d,e){this.Fc=a;this.proxy=null;this.src=b;this.type=c;this.$d=!!d;this.ib=e;this.key=++Hc;this.removed=this.Zd=!1}function Jc(a){a.removed=!0;a.Fc=null;a.proxy=null;a.src=null;a.ib=null};function Kc(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Lc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Mc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Nc(a,b){for(var c=fa(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function Oc(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function Pc(a,b){return b in a?a[b]:void 0}function Qc(a){var b={},c;for(c in a)b[a[c]]=c;return b}var Rc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Sc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Rc.length;f++)c=Rc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Tc(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Tc.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c}
function Uc(a){var b=arguments.length;if(1==b&&u(arguments[0]))return Uc.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Vc(a){this.src=a;this.g={};this.h=0}Vc.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);var g=Wc(a,b,d,e);-1<g?(b=a[g],c||(b.Zd=!1)):(b=new Ic(b,this.src,f,!!d,e),b.Zd=c,a.push(b));return b};Vc.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=Wc(e,b,c,d);return-1<b?(Jc(e[b]),tb.splice.call(e,b,1),0==e.length&&(delete this.g[a],this.h--),!0):!1};
function Xc(a,b){var c=b.type;if(!(c in a.g))return!1;var d=Fb(a.g[c],b);d&&(Jc(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d}Vc.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,Jc(d[e]);delete this.g[c];this.h--}return b};function Yc(a,b,c,d,e){a=a.g[b.toString()];b=-1;a&&(b=Wc(a,c,d,e));return-1<b?a[b]:null}
function Wc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.Fc==b&&f.$d==!!c&&f.ib==d)return e}return-1};var Zc="closure_lm_"+(1E6*Math.random()|0),$c={},ad=0;function bd(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)bd(a,b[f],c,d,e);return null}c=cd(c);return Gc(a)?a.listen(b,c,d,e):dd(a,b,c,!1,d,e)}function dd(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,k=ed(a);k||(a[Zc]=k=new Vc(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=fd();c.proxy=d;d.src=a;d.Fc=c;a.addEventListener?a.addEventListener(b.toString(),d,g):a.attachEvent(gd(b.toString()),d);ad++;return c}
function fd(){var a=hd,b=zc?function(c){return a.call(b.src,b.Fc,c)}:function(c){c=a.call(b.src,b.Fc,c);if(!c)return c};return b}function id(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)id(a,b[f],c,d,e);return null}c=cd(c);return Gc(a)?a.Eb.add(String(b),c,!0,d,e):dd(a,b,c,!0,d,e)}function kd(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)kd(a,b[f],c,d,e);else c=cd(c),Gc(a)?a.ha(b,c,d,e):a&&(a=ed(a))&&(b=Yc(a,b,c,!!d,e))&&ld(b)}
function ld(a){if(ha(a)||!a||a.removed)return!1;var b=a.src;if(Gc(b))return Xc(b.Eb,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.$d):b.detachEvent&&b.detachEvent(gd(c),d);ad--;(c=ed(b))?(Xc(c,a),0==c.h&&(c.src=null,b[Zc]=null)):Jc(a);return!0}function gd(a){return a in $c?$c[a]:$c[a]="on"+a}function md(a,b,c,d){var e=1;if(a=ed(a))if(b=a.g[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.$d==c&&!f.removed&&(e&=!1!==nd(f,d))}return Boolean(e)}
function nd(a,b){var c=a.Fc,d=a.ib||a.src;a.Zd&&ld(a);return c.call(d,b)}
function hd(a,b){if(a.removed)return!0;if(!zc){var c=b||ba("window.event"),d=new Cc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.i;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.j&&0<=k;k--)d.i=c[k],e&=md(c[k],f,!0,d);for(k=0;!d.j&&k<c.length;k++)d.i=c[k],e&=md(c[k],f,!1,d)}return e}return nd(a,new Cc(b,this))}
function ed(a){a=a[Zc];return a instanceof Vc?a:null}var od="__closure_events_fn_"+(1E9*Math.random()>>>0);function cd(a){return ia(a)?a:a[od]||(a[od]=function(b){return a.handleEvent(b)})};function pd(){cc.call(this);this.Eb=new Vc(this);this.Lg=this;this.S=null}A(pd,cc);pd.prototype[Fc]=!0;h=pd.prototype;h.Me=function(a){this.S=a};h.addEventListener=function(a,b,c,d){bd(this,a,b,c,d)};h.removeEventListener=function(a,b,c,d){kd(this,a,b,c,d)};
h.dispatchEvent=function(a){var b,c=this.S;if(c)for(b=[];c;c=c.S)b.push(c);var c=this.Lg,d=a.type||a;if(v(a))a=new F(a,c);else if(a instanceof F)a.target=a.target||c;else{var e=a;a=new F(d,c);Sc(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.j&&0<=g;g--)f=a.i=b[g],e=qd(f,d,!0,a)&&e;a.j||(f=a.i=c,e=qd(f,d,!0,a)&&e,a.j||(e=qd(f,d,!1,a)&&e));if(b)for(g=0;!a.j&&g<b.length;g++)f=a.i=b[g],e=qd(f,d,!1,a)&&e;return e};h.I=function(){pd.m.I.call(this);this.Eb&&this.Eb.removeAll(void 0);this.S=null};
h.listen=function(a,b,c,d){return this.Eb.add(String(a),b,!1,c,d)};h.ha=function(a,b,c,d){return this.Eb.remove(String(a),b,c,d)};function qd(a,b,c,d){b=a.Eb.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.$d==c){var k=g.Fc,l=g.ib||g.src;g.Zd&&Xc(a.Eb,g);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.Ih};function rd(a,b,c){this.i=a;this.h=b;this.g=c;this.id=this.h+(this.g?"-"+this.g:"")}rd.prototype.send=function(a,b){var c=new sd(a),d=this.g;c.o=this.h;c.p=d;b&&(c.h=b);var d=c.j,e=this.i,f=c.toJSON();td(e).postMessage(f);e.g.push(c);50<e.g.length&&(e.g.length-=1);return d};function ud(a){F.call(this,a.req||"event");this.h=a}A(ud,F);ud.prototype.getMessage=function(){return this.h};ud.prototype.getData=function(){return this.h.data};function G(a){ta.call(this,a);this.name="ydn.error.ArgumentException"}A(G,ta);function vd(a){ta.call(this,a);this.name="ydn.error.NotSupportedException"}A(vd,ta);function wd(a){ta.call(this,a);this.name="ydn.error.NotImplementedException"}A(wd,ta);function xd(a){ta.call(this,a);this.name="ydn.error.InvalidOperationException"}A(xd,ta);
function yd(a){Error.captureStackTrace?Error.captureStackTrace(this,yd):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}A(yd,Error);yd.prototype.name="ydn.error.InternalError";function zd(a){if("function"==typeof a.Da)return a.Da();if(v(a))return a.split("");if(fa(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Lc(a)}
function Ad(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(fa(a)||v(a))wb(a,b,void 0);else{var c;if("function"==typeof a.Ka)c=a.Ka();else if("function"!=typeof a.Da)if(fa(a)||v(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=Mc(a);else c=void 0;for(var d=zd(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};var Bd="StopIteration"in q?q.StopIteration:Error("StopIteration");function Cd(){}Cd.prototype.next=function(){throw Bd;};Cd.prototype.Wb=function(){return this};function Dd(a){if(a instanceof Cd)return a;if("function"==typeof a.Wb)return a.Wb(!1);if(fa(a)){var b=0,c=new Cd;c.next=function(){for(;;){if(b>=a.length)throw Bd;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Ed(a,b){if(fa(a))try{wb(a,b,void 0)}catch(c){if(c!==Bd)throw c;}else{a=Dd(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==Bd)throw d;}}}function Fd(a){if(fa(a))return Hb(a);a=Dd(a);var b=[];Ed(a,function(a){b.push(a)});return b}function Gd(a){try{return Dd(a).next()}catch(b){if(b!=Bd)throw b;return null}};function Hd(a,b){this.h={};this.g=[];this.j=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Hd?(c=a.Ka(),d=a.Da()):(c=Mc(a),d=Lc(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=Hd.prototype;h.ja=function(){return this.i};h.Da=function(){Id(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};h.Ka=function(){Id(this);return this.g.concat()};
h.Va=function(){return 0==this.i};h.clear=function(){this.h={};this.j=this.i=this.g.length=0};h.remove=function(a){return Jd(this.h,a)?(delete this.h[a],this.i--,this.j++,this.g.length>2*this.i&&Id(this),!0):!1};function Id(a){if(a.i!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Jd(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.i!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],Jd(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}h.get=function(a,b){return Jd(this.h,a)?this.h[a]:b};
h.set=function(a,b){Jd(this.h,a)||(this.i++,this.g.push(a),this.j++);this.h[a]=b};h.forEach=function(a,b){for(var c=this.Ka(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new Hd(this)};h.Wb=function(a){Id(this);var b=0,c=this.g,d=this.h,e=this.j,f=this,g=new Cd;g.next=function(){for(;;){if(e!=f.j)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw Bd;var g=c[b++];return a?g:d[g]}};return g};
function Jd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Kd(a){this.g=new Hd;if(a){a=zd(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function Ld(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ja(a):b.substr(0,1)+a}h=Kd.prototype;h.ja=function(){return this.g.ja()};h.add=function(a){this.g.set(Ld(a),a)};h.removeAll=function(a){a=zd(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};h.remove=function(a){return this.g.remove(Ld(a))};h.clear=function(){this.g.clear()};h.Va=function(){return this.g.Va()};
h.contains=function(a){a=Ld(a);return Jd(this.g.h,a)};h.Da=function(){return this.g.Da()};h.clone=function(){return new Kd(this)};h.Wb=function(){return this.g.Wb(!1)};function Md(a){var b;b||(b=Nd(a||arguments.callee.caller,[]));return b}
function Nd(a,b){var c=[];if(Db(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Od(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Od(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Nd(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Od(a){if(Pd[a])return Pd[a];a=String(a);if(!Pd[a]){var b=/function ([^\(]+)/.exec(a);Pd[a]=b?b[1]:"[Anonymous]"}return Pd[a]}var Pd={};function Qd(a,b,c,d,e){this.o="number"==typeof e?e:Rd++;this.l=d||z();this.j=a;this.p=b;this.h=c;delete this.i;delete this.g}Qd.prototype.o=0;Qd.prototype.i=null;Qd.prototype.g=null;var Rd=0;Qd.prototype.getMessage=function(){return this.p};function Sd(a){this.l=a;this.g=this.j=this.h=this.i=null}function Td(a,b){this.name=a;this.value=b}Td.prototype.toString=function(){return this.name};var Vd=new Td("SHOUT",1200),Wd=new Td("SEVERE",1E3),Xd=new Td("WARNING",900),Yd=new Td("INFO",800),Zd=new Td("CONFIG",700),$d=new Td("FINE",500),ae=new Td("FINER",400),be=new Td("FINEST",300),ce=[new Td("OFF",Infinity),Vd,Wd,Xd,Yd,Zd,$d,ae,be,new Td("ALL",0)],de=null;h=Sd.prototype;h.getName=function(){return this.l};
function ee(a,b){a.g||(a.g=[]);a.g.push(b)}h.getParent=function(){return this.i};h.getChildren=function(){this.j||(this.j={});return this.j};function fe(a){if(a.h)return a.h;if(a.i)return fe(a.i);Wa("Root logger has no level set.");return null}
h.log=function(a,b,c){if(a.value>=fe(this).value)for(ia(b)&&(b=b()),a=this.kh(a,b,c,Sd.prototype.log),b="log:"+a.getMessage(),q.console&&(q.console.timeStamp?q.console.timeStamp(b):q.console.markTimeline&&q.console.markTimeline(b)),q.msWriteProfilerMark&&q.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.g)for(var e=0,f=void 0;f=c.g[e];e++)f(d);b=b.getParent()}};
h.kh=function(a,b,c,d){a=new Qd(a,String(b),this.l);if(c){a.i=c;var e;d=d||Sd.prototype.kh;try{var f;var g=ba("window.location.href");if(v(c))f={message:c,name:"Unknown error",lineNumber:"Not available",fileName:g,stack:"Not available"};else{var k,l;b=!1;try{k=c.lineNumber||c.jk||"Not available"}catch(m){k="Not available",b=!0}try{l=c.fileName||c.filename||c.sourceURL||q.$googDebugFname||g}catch(n){l="Not available",b=!0}f=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:k,fileName:l,stack:c.stack||"Not available"}}e="Message: "+Da(f.message)+'\nUrl: <a href="view-source:'+f.fileName+'" target="_new">'+f.fileName+"</a>\nLine: "+f.lineNumber+"\n\nBrowser stack:\n"+Da(f.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+Da(Md(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.g=e}return a};function J(a,b,c){a.log(Xd,b,c)}h.info=function(a,b){this.log(Yd,a,b)};
function ge(a,b,c){a.log($d,b,c)}function he(a,b,c){a.log(ae,b,c)}function ie(a,b,c){a.log(be,b,c)}var je={},ke=null;function le(){ke||(ke=new Sd(""),je[""]=ke,ke.h=Zd)}function me(){le();return ke}function L(a){le();var b;if(!(b=je[a])){b=new Sd(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=L(a.substr(0,c));c.getChildren()[d]=b;b.i=c;je[a]=b}return b};function ne(a,b,c){a&&a.log(b,c,void 0)}function oe(a,b){a&&a.log(Wd,b,void 0)}function N(a,b){a&&J(a,b,void 0)}function pe(a,b){a&&ge(a,b,void 0)};function O(a,b){a&&ie(a,b,void 0)}function P(a,b){a&&he(a,b,void 0)};function qe(a,b){B.call(this,a,b);this.p=[]}A(qe,B);function re(a,b){for(var c=0;c<a.p.length;c++)a.p[c][0].call(a.p[c][1],b)}qe.prototype.callback=function(a){this.p.length=0;qe.m.callback.call(this,a)};qe.prototype.D=function(a){this.p.length=0;qe.m.D.call(this,a)};function sd(a){this.id="i"+this.count();this.req=a;this.i=!0;this.g=this.h=null;this.j=new qe;this.l=NaN}sd.prototype.C=function(){return this.id};var se=0;h=sd.prototype;h.count=function(){se++;return se};
h.listen=function(a){if(a&&a.id==this.id){this.h=a.data;var b=a.error;b&&(b instanceof Error?this.g=b:y(b)?(this.g=Error(b.message),this.g.name=b.name,this.g.source=b,this.g.result=this.h):(this.g=Error(b),this.g.name="UnknownError"));a.done?(this.i=!1,this.g?this.j.D(this.g):this.j.callback(this.h),window.clearTimeout(this.l)):re(this.j,a.data);return!0}return!1};h.toString=function(){return"Message:"+this.id+(this.i?"*":"")};h.getData=function(){return this.h};
h.toJSON=function(){var a=this;this.l=window.setTimeout(function(){if(a.i){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},1E4);return{id:this.id,req:this.req,group:this.o,name:this.p,data:this.h}};function te(a){pd.call(this);var b=v(a)?null:a;this.name=v(a)?a:a.name;this.g=[];this.o=b;this.h=null;this.i={}}A(te,pd);te.prototype.I=function(){if(this.h){var a=this;this.h.disconnect(function(){a.h=null;a.g.length=0})}else this.g.length=0};
te.prototype.l=function(a){if(a)if(a.id)for(var b=this.g.length-1;0<=b;b--){if(this.g[b].C()==a.id){if(this.g[b].listen(a)){this.g[b].i?25<b&&(a=this.g.splice(b,1),this.g.unshift(a[0])):this.g.splice(b,1);break}break}}else"info"==a.req?(a.data=this.o,this.h.postMessage(a)):"html-body-inner"==a.req?(window.console.log("html",a),a.req="",a.done=!0,a.data=document&&document.body?document.body.innerHTML:"",this.h.postMessage(a)):this.dispatchEvent(new ud(a))};
te.prototype.toString=function(){return"Pipe:"+this.name};te.prototype.j=function(a,b){var c=a||ue,d=c+(b?"-"+b:"");this.i[d]||(this.i[d]=new rd(this,c,b||""));return this.i[d]};function td(a){if(!a.h){a.h=chrome.runtime.connect({name:a.name});var b=oa(a.l,a);a.h.onMessage.addListener(b);a.h.onDisconnect.addListener(function(){a.h.onMessage.removeListener(b);a.h=null;a.g.length=0})}return a.h}var ve=null;function we(){if(!ve){var a=ue+"-"+z();ve=new te(a)}return ve}
function xe(a){var b=a;v(a)&&(b={group:a,name:a+"-"+z()});return ve=new te(b)}var ue="default",ye="dev gmail hostper popup options setup".split(" ");function ze(a,b){return we().j(a,b)};var Ae=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Be(a){if(Ce){Ce=!1;var b=q.location;if(b){var c=b.href;if(c&&(c=(c=Be(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw Ce=!0,Error();}}return a.match(Ae)}var Ce=oc;function De(a,b){var c;if(a instanceof De)this.tc=t(b)?b:a.tc,Ee(this,a.cd),this.Re=a.Re,Fe(this,a.Xb),Ge(this,a.oe),He(this,a.Hc),Ie(this,a.g.clone()),Je(this,a.wf);else if(a&&(c=Be(String(a)))){this.tc=!!b;Ee(this,c[1]||"",!0);var d=c[2]||"";this.Re=d?decodeURIComponent(d):"";Fe(this,c[3]||"",!0);Ge(this,c[4]);He(this,c[5]||"",!0);Ie(this,c[6]||"",!0);Je(this,c[7]||"",!0)}else this.tc=!!b,this.g=new Ke(null,0,this.tc)}h=De.prototype;h.cd="";h.Re="";h.Xb="";h.oe=null;h.Hc="";h.wf="";h.tc=!1;
h.toString=function(){var a=[],b=this.cd;b&&a.push(Le(b,Me),":");if(b=this.Xb){a.push("//");var c=this.Re;c&&a.push(Le(c,Me),"@");a.push(encodeURIComponent(String(b)));b=this.oe;null!=b&&a.push(":",String(b))}if(b=this.Hc)this.Xb&&"/"!=b.charAt(0)&&a.push("/"),a.push(Le(b,"/"==b.charAt(0)?Ne:Oe));(b=this.g.toString())&&a.push("?",b);(b=this.wf)&&a.push("#",Le(b,Pe));return a.join("")};h.clone=function(){return new De(this)};
function Ee(a,b,c){a.cd=c?b?decodeURIComponent(b):"":b;a.cd&&(a.cd=a.cd.replace(/:$/,""));return a}function Qe(a){return a.Xb}function Fe(a,b,c){a.Xb=c?b?decodeURIComponent(b):"":b;return a}function Ge(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.oe=b}else a.oe=null}function Re(a){return a.Hc}function He(a,b,c){a.Hc=c?b?decodeURIComponent(b):"":b}function Ie(a,b,c){b instanceof Ke?(a.g=b,Se(a.g,a.tc)):(c||(b=Le(b,Te)),a.g=new Ke(b,0,a.tc))}
function Je(a,b,c){a.wf=c?b?decodeURIComponent(b):"":b}function Le(a,b){return v(a)?encodeURI(a).replace(b,Ue):null}function Ue(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Me=/[#\/\?@]/g,Oe=/[\#\?:]/g,Ne=/[\#\?]/g,Te=/[\#\?@]/g,Pe=/#/g;function Ke(a,b,c){this.g=a||null;this.h=!!c}
function Ve(a){if(!a.pa&&(a.pa=new Hd,a.Ma=0,a.g))for(var b=a.g.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=We(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}h=Ke.prototype;h.pa=null;h.Ma=null;h.ja=function(){Ve(this);return this.Ma};h.add=function(a,b){Ve(this);this.g=null;a=We(this,a);var c=this.pa.get(a);c||this.pa.set(a,c=[]);c.push(b);this.Ma++;return this};
h.remove=function(a){Ve(this);a=We(this,a);return Jd(this.pa.h,a)?(this.g=null,this.Ma-=this.pa.get(a).length,this.pa.remove(a)):!1};h.clear=function(){this.pa=this.g=null;this.Ma=0};h.Va=function(){Ve(this);return 0==this.Ma};function Xe(a,b){Ve(a);b=We(a,b);return Jd(a.pa.h,b)}h.Ka=function(){Ve(this);for(var a=this.pa.Da(),b=this.pa.Ka(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.Da=function(a){Ve(this);var b=[];if(v(a))Xe(this,a)&&(b=Gb(b,this.pa.get(We(this,a))));else{a=this.pa.Da();for(var c=0;c<a.length;c++)b=Gb(b,a[c])}return b};h.set=function(a,b){Ve(this);this.g=null;a=We(this,a);Xe(this,a)&&(this.Ma-=this.pa.get(a).length);this.pa.set(a,[b]);this.Ma++;return this};h.get=function(a,b){var c=a?this.Da(a):[];return 0<c.length?String(c[0]):b};
h.toString=function(){if(this.g)return this.g;if(!this.pa)return"";for(var a=[],b=this.pa.Ka(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Da(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.g=a.join("&")};h.clone=function(){var a=new Ke;a.g=this.g;this.pa&&(a.pa=this.pa.clone(),a.Ma=this.Ma);return a};function We(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}
function Se(a,b){b&&!a.h&&(Ve(a),a.g=null,a.pa.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.g=null,this.pa.set(We(this,e),Hb(a)),this.Ma+=a.length))},a));a.h=b};var Ye;
Ye={l:["BC","AD"],j:["Before Christ","Anno Domini"],J:"JFMAMJJASOND".split(""),Ja:"JFMAMJJASOND".split(""),M:"January February March April May June July August September October November December".split(" "),Qa:"January February March April May June July August September October November December".split(" "),N:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),mc:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Nc:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Lg:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
aa:"Sun Mon Tue Wed Thu Fri Sat".split(" "),ff:"Sun Mon Tue Wed Thu Fri Sat".split(" "),S:"SMTWTFS".split(""),Vb:"SMTWTFS".split(""),Y:["Q1","Q2","Q3","Q4"],P:["1st quarter","2nd quarter","3rd quarter","4th quarter"],g:["AM","PM"],h:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Mg:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],i:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],o:6,Ng:[5,6],p:5};function Ze(a){a=String(a);if(void 0===Ye.ii)return a;for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);b.push(48<=d&&57>=d?String.fromCharCode(Ye.ii+d-48):a.charAt(c))}return b.join("")};var bf={ai:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},$h:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},cf=bf,cf=bf;var df={Ig:".",Kg:",",Og:"%",gf:"0",gi:"+",di:"-",Jg:"E",Pg:"\u2030",ef:"\u221e",ei:"NaN",Hg:"#,##0.###",hi:"#E0",fi:"#,##0%",bi:"\u00a4#,##0.00",ci:"USD"},ef=df,ef=df;var ff={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[0,"Ft",
"Ft"],IDR:[0,"Rp","Rp"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u0440\u0443\u0431.",
"\u0440\u0443\u0431."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u20b4","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function gf(a,b,c){this.t=b||ef.ci;this.Qa=c||hf;this.S=40;this.g=1;this.Y=0;this.j=3;this.K=this.h=0;this.fa=!1;this.J=this.l="";this.i="-";this.o="";this.M=1;this.N=3;this.P=this.aa=!1;this.p=jf;if("number"==typeof a)switch(a){case 1:kf(this,ef.Hg);break;case 2:kf(this,ef.hi);break;case 3:kf(this,ef.fi);break;case 4:a=ef.bi;b=["0"];c=ff[this.t][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));kf(this,a);break;case 5:lf(this,1);break;case 6:lf(this,2);break;
default:throw Error("Unsupported pattern type.");}else kf(this,a)}var hf=0,jf=0;
function kf(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.l=mf(a,b,c);for(var d=c[0],e=-1,f=0,g=0,k=0,l=-1,m=b.length,n=!0;c[0]<m&&n;c[0]++)switch(b.charAt(c[0])){case "#":0<g?k++:f++;0<=l&&0>e&&l++;break;case "0":if(0<k)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+k;break;case "E":if(a.P)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.P=!0;a.K=0;c[0]+1<
m&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.fa=!0);for(;c[0]+1<m&&"0"==b.charAt(c[0]+1);)c[0]++,a.K++;if(1>f+g||1>a.K)throw Error('Malformed exponential pattern "'+b+'"');n=!1;break;default:c[0]--,n=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,k=f-g,f=g-1,g=1);if(0>e&&0<k||0<=e&&(e<f||e>f+g)||0==l)throw Error('Malformed pattern "'+b+'"');k=f+g+k;a.j=0<=e?k-e:0;0<=e&&(a.h=f+g-e,0>a.h&&(a.h=0));a.g=(0<=e?e:k)-f;a.P&&(a.S=f+a.g,0==a.j&&0==a.g&&(a.g=1));a.N=Math.max(0,l);a.aa=0==e||e==k;d=c[0]-d;a.J=mf(a,b,c);c[0]<b.length&&
b.charAt(c[0])==nf?(c[0]++,a.i=mf(a,b,c),c[0]+=d,a.o=mf(a,b,c)):(a.i=a.l+a.i,a.o+=a.J)}function lf(a,b){a.p=b;kf(a,ef.Hg);a.h=0;a.j=2;if(0<a.h)throw Error("Can't combine significant digits and minimum fraction digits");a.Y=2}
gf.prototype.parse=function(a,b){var c=b||[0];if(this.p!=jf)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.l,c[0])==c[0],f=a.indexOf(this.i,c[0])==c[0];e&&f&&(this.l.length>this.i.length?f=!1:this.l.length<this.i.length&&(e=!1));e?c[0]+=this.l.length:f&&(c[0]+=this.i.length);if(a.indexOf(ef.ef,c[0])==c[0])c[0]+=ef.ef.length,d=Infinity;else{var d=a,g=!1,k=!1,l=!1,m=1,n=ef.Ig,p=ef.Kg,r=ef.Jg;if(this.p!=jf)throw Error("Parsing of compact style numbers is not implemented");
for(var s="";c[0]<d.length;c[0]++){var w=d.charAt(c[0]),x=of(w);if(0<=x&&9>=x)s+=x,l=!0;else if(w==n.charAt(0)){if(g||k)break;s+=".";g=!0}else if(w==p.charAt(0)&&("\u00a0"!=p.charAt(0)||c[0]+1<d.length&&0<=of(d.charAt(c[0]+1)))){if(g||k)break}else if(w==r.charAt(0)){if(k)break;s+="E";k=!0}else if("+"==w||"-"==w)s+=w;else if(w==ef.Og.charAt(0)){if(1!=m)break;m=100;if(l){c[0]++;break}}else if(w==ef.Pg.charAt(0)){if(1!=m)break;m=1E3;if(l){c[0]++;break}}else break}d=parseFloat(s)/m}if(e){if(a.indexOf(this.J,
c[0])!=c[0])return NaN;c[0]+=this.J.length}else if(f){if(a.indexOf(this.o,c[0])!=c[0])return NaN;c[0]+=this.o.length}return f?-d:d};function pf(a,b){var c=Math.pow(10,a.j),d=0>=a.Y?Math.round(b*c):Math.round(qf(b*c,a.Y,a.j)),e;isFinite(d)?(e=Math.floor(d/c),c=Math.floor(d-e*c)):(e=b,c=0);return{wh:e,oi:c}}
function rf(a,b,c,d){if(a.h>a.j)throw Error("Min value must be less than max value");b=pf(a,b);var e=Math.pow(10,a.j),f=b.wh,g=b.oi,k=0<a.h||0<g||!1;b=a.h;k&&(b=a.h);for(var l="",m=f;1E20<m;)l="0"+l,m=Math.round(m/10);var l=m+l,n=ef.Ig,p=ef.Kg,m=ef.gf.charCodeAt(0),r=l.length;if(0<f||0<c){for(f=r;f<c;f++)d.push(String.fromCharCode(m));for(f=0;f<r;f++)d.push(String.fromCharCode(m+1*l.charAt(f))),1<r-f&&0<a.N&&1==(r-f)%a.N&&d.push(p)}else k||d.push(String.fromCharCode(m));(a.aa||k)&&d.push(n);a=""+
(g+e);for(c=a.length;"0"==a.charAt(c-1)&&c>b+1;)c--;for(f=1;f<c;f++)d.push(String.fromCharCode(m+1*a.charAt(f)))}function sf(a,b,c){c.push(ef.Jg);0>b?(b=-b,c.push(ef.di)):a.fa&&c.push(ef.gi);b=""+b;for(var d=ef.gf,e=b.length;e<a.K;e++)c.push(d);c.push(b)}function of(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=ef.gf.charCodeAt(0);return b<=a&&a<b+10?a-b:-1}var nf=";";
function mf(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case nf:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.t;else switch(a.Qa){case hf:d+=ff[a.t][1];break;case 2:var g=a.t,k=ff[g],d=d+(g==k[1]?g:g+" "+k[1]);break;case 1:d+=ff[a.t][2]}break;case "%":if(1!=a.M)throw Error("Too many percent/permill");a.M=100;d+=ef.Og;
break;case "\u2030":if(1!=a.M)throw Error("Too many percent/permill");a.M=1E3;d+=ef.Pg;break;default:d+=g}}return d}var tf={prefix:"",Oh:"",sf:0};function uf(a,b){var c=1==a.p?cf.ai:cf.$h;if(3>b)return tf;b=Math.min(14,b);c=c[Math.pow(10,b)];if(!c)return tf;c=c.other;return c&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],Oh:c[3],sf:b-(c[2].length-1)}:tf:tf}function vf(a){for(var b=0;1<=(a/=10);)b++;return b}
function qf(a,b,c){if(!a)return a;b=b-vf(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};function wf(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"}var xf=wf,xf=wf;function yf(a){a=a+"";var b=a.indexOf(".");return-1==b?0:a.length-b-1}function zf(a,b){var c,d=a|0;c=void 0===b?Math.min(yf(a),3):b;return 1==d&&0==c?"one":"other"}var Af=zf,Af=zf;function Bf(a){this.g=[];this.j=[];this.i=new gf(1);a&&(a=Cf(this,a),this.j=Df(this,a))}var Ef=RegExp("'([{}#].*?)'","g"),Ff=RegExp("''","g");
function Gf(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,k=a,l=e,m=c[g];t(m)?(k.g.push(m),l.push(k.h(k.g))):l.push("Undefined parameter - "+g);break;case 2:g=b[f].value;k=e;l=g.Wd;t(c[l])?(l=g[c[l]],t(l)||(l=g.other),Gf(a,l,c,d,k)):k.push("Undefined parameter - "+l);break;case 0:g=b[f].value;Hf(a,g,c,Af,d,e);break;case 1:g=b[f].value;Hf(a,g,c,xf,d,e);break;default:Wa("Unrecognized block type: "+b[f].type)}}
function Hf(a,b,c,d,e,f){var g=b.Wd,k=b.Tg,l=+c[g];if(isNaN(l))f.push("Undefined or invalid parameter - "+g);else if(k=l-k,g=b[c[g]],t(g)||(d=a.i.Ja?d(k,a.i.Ja()):d(k),g=b[d],t(g)||(g=b.other)),b=[],Gf(a,g,c,e,b),c=b.join(""),e)f.push(c);else{a=a.i;if(isNaN(k))a=ef.ei;else{e=[];g=d=k;a.p==jf?b=tf:(d=Math.abs(d),g=Math.abs(g),b=uf(a,1>=d?0:vf(d)).sf,pf(a,g/Math.pow(10,b)),d=pf(a,d/Math.pow(10,b)),b=uf(a,b+vf(d.wh)));k/=Math.pow(10,b.sf);e.push(b.prefix);d=0>k||0==k&&0>1/k;e.push(d?a.i:a.l);if(isFinite(k))if(k=
k*(d?-1:1)*a.M,a.P)if(0==k)rf(a,k,a.g,e),sf(a,0,e);else{g=Math.log(k)/Math.log(10);g=Math.floor(g+2E-15);k/=Math.pow(10,g);l=a.g;if(1<a.S&&a.S>a.g){for(;0!=g%a.S;)k*=10,g--;l=1}else 1>a.g?(g++,k/=10):(g-=a.g-1,k*=Math.pow(10,a.g-1));rf(a,k,l,e);sf(a,g,e)}else rf(a,k,a.g,e);else e.push(ef.ef);e.push(d?a.o:a.J);e.push(b.Oh);a=e.join("")}f.push(c.replace(/#/g,a))}}
function Cf(a,b){var c=a.g,d=oa(a.h,a);b=b.replace(Ff,function(){c.push("'");return d(c)});return b=b.replace(Ef,function(a,b){c.push(b);return d(c)})}function If(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d}
var Jf=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Kf=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Lf=/^\s*(\w+)\s*,\s*select\s*,/;
function Df(a,b){for(var c=[],d=If(b),e=0;e<d.length;e++){var f={};if(0==d[e].type)f.type=4,f.value=d[e].value;else if(1==d[e].type){var g=d[e].value;switch(Jf.test(g)?0:Kf.test(g)?1:Lf.test(g)?2:/^\s*\w+\s*/.test(g)?3:5){case 2:f.type=2;f.value=Mf(a,d[e].value);break;case 0:f.type=0;f.value=Nf(a,d[e].value);break;case 1:f.type=1;f.value=Of(a,d[e].value);break;case 3:f.type=3;f.value=d[e].value;break;default:Wa("Unknown block type for pattern: "+d[e].value)}}else Wa("Unknown part of the pattern.");
c.push(f)}return c}function Mf(a,b){var c="";b=b.replace(Lf,function(a,b){c=b;return""});var d={};d.Wd=c;for(var e=If(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=Df(a,e[f].value);else Wa("Expected block type.");d[g.replace(/\s/g,"")]=k;f++}return d}
function Nf(a,b){var c="",d=0;b=b.replace(Jf,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.Wd=c;e.Tg=d;for(var f=If(b),g=0;g<f.length;){var k=f[g].value;g++;if(1==f[g].type)var l=Df(a,f[g].value);else Wa("Expected block type.");e[k.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=l;g++}return e}
function Of(a,b){var c="";b=b.replace(Kf,function(a,b){c=b;return""});var d={};d.Wd=c;d.Tg=0;for(var e=If(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=Df(a,e[f].value);else Wa("Expected block type.");d[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return d}Bf.prototype.h=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};function Pf(a,b,c){a=new Bf(a);b={COUNT:b,TEXT:c};if(0==a.j.length)a="";else{c=[];Gf(a,a.j,b,!1,c);for(b=c.join("");0<a.g.length;)b=b.replace(a.h(a.g),a.g.pop());a=b}return a};function Qf(a){cc.call(this);this.g=a;this.h={}}A(Qf,cc);var Rf=[];h=Qf.prototype;h.listen=function(a,b,c,d){u(b)||(b&&(Rf[0]=b.toString()),b=Rf);for(var e=0;e<b.length;e++){var f=bd(a,b[e],c||this.handleEvent,d||!1,this.g||this);if(!f)break;this.h[f.key]=f}return this};function Sf(a,b,c){Tf(a,b,"hide",c,!1)}function Tf(a,b,c,d,e,f){if(u(c))for(var g=0;g<c.length;g++)Tf(a,b,c[g],d,e,f);else(b=id(b,c,d||a.handleEvent,e,f||a.g||a))&&(a.h[b.key]=b)}
h.ha=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.ha(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.g||this,c=cd(c),d=!!d,b=Gc(a)?Yc(a.Eb,String(b),c,d,e):a?(a=ed(a))?Yc(a,b,c,d,e):null:null,b&&(ld(b),delete this.h[b.key]);return this};h.removeAll=function(){Kc(this.h,ld);this.h={}};h.I=function(){Qf.m.I.call(this);this.removeAll()};h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Uf(a,b){pd.call(this);this.h=a||1;this.g=b||q;this.i=oa(this.Aj,this);this.j=z()}A(Uf,pd);h=Uf.prototype;h.ud=!1;h.ea=null;h.setInterval=function(a){this.h=a;this.ea&&this.ud?(this.stop(),Vf(this)):this.ea&&this.stop()};h.Aj=function(){if(this.ud){var a=z()-this.j;0<a&&a<.8*this.h?this.ea=this.g.setTimeout(this.i,this.h-a):(this.ea&&(this.g.clearTimeout(this.ea),this.ea=null),this.dispatchEvent(Wf),this.ud&&(this.ea=this.g.setTimeout(this.i,this.h),this.j=z()))}};
function Vf(a){a.ud=!0;a.ea||(a.ea=a.g.setTimeout(a.i,a.h),a.j=z())}h.stop=function(){this.ud=!1;this.ea&&(this.g.clearTimeout(this.ea),this.ea=null)};h.I=function(){Uf.m.I.call(this);this.stop();delete this.g};var Wf="tick";function Xf(a,b,c){if(ia(a))c&&(a=oa(a,c));else if(a&&"function"==typeof a.handleEvent)a=oa(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:q.setTimeout(a,b||0)};var Yf=q.JSON.parse,Zf=q.JSON.stringify;function $f(){}
function ag(a,b,c){switch(typeof b){case "string":bg(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),ag(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),bg(e,c),c.push(":"),ag(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var cg={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},dg=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function bg(a,b){b.push('"',a.replace(dg,function(a){if(a in cg)return cg[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return cg[a]=e+b.toString(16)}),'"')};function eg(){}eg.prototype.g=null;function fg(a){var b;(b=a.g)||(b={},gg(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var hg;function ig(){}A(ig,eg);function jg(a){return(a=gg(a))?new ActiveXObject(a):new XMLHttpRequest}function gg(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h}hg=new ig;function kg(a){pd.call(this);this.headers=new Hd;this.Y=a||null;this.h=!1;this.N=this.W=null;this.Ja=this.t="";this.o=0;this.p="";this.i=this.fa=this.J=this.aa=!1;this.l=0;this.K=null;this.j=lg;this.P=this.Se=!1}A(kg,pd);var lg="";kg.prototype.g=L("goog.net.XhrIo");var mg=/^https?$/i,ng=["POST","PUT"];h=kg.prototype;h.mh=function(){return this.j};
h.send=function(a,b,c,d){if(this.W)throw Error("[goog.net.XhrIo] Object is active with another request="+this.t+"; newUri="+a);b=b?b.toUpperCase():"GET";this.t=a;this.p="";this.o=0;this.Ja=b;this.aa=!1;this.h=!0;this.W=this.Y?jg(this.Y):jg(hg);this.N=this.Y?fg(this.Y):fg(hg);this.W.onreadystatechange=oa(this.Dh,this);try{pe(this.g,og(this,"Opening Xhr")),this.fa=!0,this.W.open(b,String(a),!0),this.fa=!1}catch(e){pe(this.g,og(this,"Error opening Xhr: "+e.message));pg(this,e);return}a=c||"";var f=this.headers.clone();
d&&Ad(d,function(a,b){f.set(b,a)});d=Bb(f.Ka(),qg);c=q.FormData&&a instanceof q.FormData;!Db(ng,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.W.setRequestHeader(b,a)},this);this.j&&(this.W.responseType=this.j);"withCredentials"in this.W&&(this.W.withCredentials=this.Se);try{rg(this),0<this.l&&(this.P=sg(this.W),pe(this.g,og(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+this.P)),this.P?(this.W.timeout=this.l,this.W.ontimeout=
oa(this.Ph,this)):this.K=Xf(this.Ph,this.l,this)),pe(this.g,og(this,"Sending request")),this.J=!0,this.W.send(a),this.J=!1}catch(g){pe(this.g,og(this,"Send error: "+g.message)),pg(this,g)}};function sg(a){return E&&vc(9)&&ha(a.timeout)&&t(a.ontimeout)}function qg(a){return"content-type"==a.toLowerCase()}h.Ph=function(){"undefined"!=typeof aa&&this.W&&(this.p="Timed out after "+this.l+"ms, aborting",this.o=8,pe(this.g,og(this,this.p)),this.dispatchEvent("timeout"),this.abort(8))};
function pg(a,b){a.h=!1;a.W&&(a.i=!0,a.W.abort(),a.i=!1);a.p=b;a.o=5;tg(a);ug(a)}function tg(a){a.aa||(a.aa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}h.abort=function(a){this.W&&this.h&&(pe(this.g,og(this,"Aborting")),this.h=!1,this.i=!0,this.W.abort(),this.i=!1,this.o=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ug(this))};h.I=function(){this.W&&(this.h&&(this.h=!1,this.i=!0,this.W.abort(),this.i=!1),ug(this,!0));kg.m.I.call(this)};
h.Dh=function(){this.M||(this.fa||this.J||this.i?vg(this):this.pj())};h.pj=function(){vg(this)};function vg(a){if(a.h&&"undefined"!=typeof aa)if(a.N[1]&&4==wg(a)&&2==a.U())pe(a.g,og(a,"Local request error detected and ignored"));else if(a.J&&4==wg(a))Xf(a.Dh,0,a);else if(a.dispatchEvent("readystatechange"),4==wg(a)){pe(a.g,og(a,"Request complete"));a.h=!1;try{xg(a)?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.o=6,a.p=a.La()+" ["+a.U()+"]",tg(a))}finally{ug(a)}}}
function ug(a,b){if(a.W){rg(a);var c=a.W,d=a.N[0]?ca:null;a.W=null;a.N=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){oe(a.g,"Problem encountered resetting onreadystatechange: "+e.message)}}}function rg(a){a.W&&a.P&&(a.W.ontimeout=null);ha(a.K)&&(q.clearTimeout(a.K),a.K=null)}
function xg(a){var b=a.U(),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=Be(String(a.t))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!mg.test(a?a.toLowerCase():"");c=b}return c}function wg(a){return a.W?a.W.readyState:0}h.U=function(){try{return 2<wg(this)?this.W.status:-1}catch(a){return-1}};
h.La=function(){try{return 2<wg(this)?this.W.statusText:""}catch(a){return pe(this.g,"Can not get status: "+a.message),""}};function yg(a){try{if(!a.W)return null;if("response"in a.W)return a.W.response;switch(a.j){case lg:case "text":return a.W.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.W)return a.W.mozResponseArrayBuffer}oe(a.g,"Response type "+a.j+" is not supported on this browser");return null}catch(b){return pe(a.g,"Can not get response: "+b.message),null}}
function og(a,b){return b+" ["+a.Ja+" "+a.t+" "+a.U()+"]"};function zg(){this.g=[];this.h=[]}function Ag(a){0==a.g.length&&(a.g=a.h,a.g.reverse(),a.h=[]);return a.g.pop()}h=zg.prototype;h.ja=function(){return this.g.length+this.h.length};h.Va=function(){return 0==this.g.length&&0==this.h.length};h.clear=function(){this.g=[];this.h=[]};h.contains=function(a){return Db(this.g,a)||Db(this.h,a)};h.remove=function(a){var b=vb(this.g,a);if(0>b)return Fb(this.h,a);tb.splice.call(this.g,b,1);return!0};
h.Da=function(){for(var a=[],b=this.g.length-1;0<=b;--b)a.push(this.g[b]);for(var c=this.h.length,b=0;b<c;++b)a.push(this.h[b]);return a};function Bg(a,b){cc.call(this);this.o=a||0;this.i=b||10;if(this.o>this.i)throw Error(Cg);this.g=new zg;this.h=new Kd;this.l=null;this.Td()}A(Bg,cc);var Cg="[goog.structs.Pool] Min can not be greater than max";h=Bg.prototype;h.qe=function(){var a=z();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.g.ja()&&(b=Ag(this.g),!this.ng(b));)this.Td();!b&&this.ja()<this.i&&(b=this.Lf());b&&(this.l=a,this.h.add(b));return b}};h.ld=function(a){this.h.remove(a);this.ng(a)&&this.ja()<this.i?this.g.h.push(a):Dg(a)};
h.Td=function(){for(var a=this.g;this.ja()<this.o;){var b=this.Lf();a.h.push(b)}for(;this.ja()>this.i&&0<this.g.ja();)Dg(Ag(a))};h.Lf=function(){return{}};function Dg(a){if("function"==typeof a.$)a.$();else for(var b in a)a[b]=null}h.ng=function(a){return"function"==typeof a.ki?a.ki():!0};h.contains=function(a){return this.g.contains(a)||this.h.contains(a)};h.ja=function(){return this.g.ja()+this.h.ja()};h.Va=function(){return this.g.Va()&&this.h.Va()};
h.I=function(){Bg.m.I.call(this);if(0<this.h.ja())throw Error("[goog.structs.Pool] Objects not released");delete this.h;for(var a=this.g;!a.Va();)Dg(Ag(a));delete this.g};function Eg(a,b){this.g=a;this.h=b}Eg.prototype.T=function(){return this.h};Eg.prototype.clone=function(){return new Eg(this.g,this.h)};function Fg(a){this.g=[];if(a)a:{var b,c;if(a instanceof Fg){if(b=a.Ka(),c=a.Da(),0>=a.ja()){a=this.g;for(var d=0;d<b.length;d++)a.push(new Eg(b[d],c[d]));break a}}else b=Mc(a),c=Lc(a);for(d=0;d<b.length;d++)Gg(this,b[d],c[d])}}function Gg(a,b,c){var d=a.g;d.push(new Eg(b,c));b=d.length-1;a=a.g;for(c=a[b];0<b;)if(d=b-1>>1,a[d].g>c.g)a[b]=a[d],b=d;else break;a[b]=c}h=Fg.prototype;
h.remove=function(){var a=this.g,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Eb(a);else{a[0]=a.pop();for(var a=0,b=this.g,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].g<b[f].g?g:f;if(b[f].g>e.g)break;b[a]=b[f];a=f}b[a]=e}return c.T()}};h.Da=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].T());return b};h.Ka=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].g);return b};h.clone=function(){return new Fg(this)};h.ja=function(){return this.g.length};
h.Va=function(){return 0==this.g.length};h.clear=function(){Eb(this.g)};function Hg(){Fg.call(this)}A(Hg,Fg);function Ig(a,b){this.j=new Hg;Bg.call(this,a,b)}A(Ig,Bg);h=Ig.prototype;h.qe=function(a,b){if(!a)return Ig.m.qe.call(this);Gg(this.j,t(b)?b:100,a);this.Yf()};h.Yf=function(){for(var a=this.j;0<a.ja();){var b=this.qe();if(b)a.remove().apply(this,[b]);else break}};h.ld=function(a){Ig.m.ld.call(this,a);this.Yf()};h.Td=function(){Ig.m.Td.call(this);this.Yf()};h.I=function(){Ig.m.I.call(this);q.clearTimeout(void 0);this.j.clear();this.j=null};function Jg(a,b,c){Ig.call(this,b,c);this.p=a}A(Jg,Ig);Jg.prototype.Lf=function(){var a=new kg,b=this.p;b&&b.forEach(function(b,d){a.headers.set(d,b)});return a};Jg.prototype.ng=function(a){return!a.M&&!a.W};function Kg(a,b,c,d,e){pd.call(this);this.j=t(a)?a:1;this.l=t(e)?Math.max(0,e):0;this.i=new Jg(b,c,d);this.h=new Hd;this.g=new Qf(this)}A(Kg,pd);var Lg="ready complete success error abort timeout".split(" ");h=Kg.prototype;h.send=function(a,b,c,d,e,f,g,k,l,m){if(this.h.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new Mg(b,oa(this.Ki,this,a),c,d,e,g,t(k)?k:this.j,l,m);this.h.set(a,b);a=oa(this.Di,this,a);this.i.qe(a,f);return b};
h.abort=function(a,b){var c=this.h.get(a);if(c){var d=c.Md;c.Qg=!0;b&&(d&&(this.g.ha(d,Lg,c.zg),id(d,"ready",function(){var a=this.i;a.h.remove(d)&&a.ld(d)},!1,this)),this.h.remove(a));d&&d.abort()}};h.Di=function(a,b){var c=this.h.get(a);c&&!c.Md?(this.g.listen(b,Lg,c.zg),b.l=Math.max(0,this.l),b.j=c.mh(),c.Md=b,c.Md.Se=c.Se,this.dispatchEvent(new Ng("ready",this,a,b)),Og(this,a,b),c.Qg&&b.abort()):(c=this.i,c.h.remove(b)&&c.ld(b))};
h.Ki=function(a,b){var c=b.target;switch(b.type){case "ready":Og(this,a,c);break;case "complete":a:{var d=this.h.get(a);if(7==c.o||xg(c)||d.Xd>d.Jf)if(this.dispatchEvent(new Ng("complete",this,a,c)),d&&(d.ah=!0,d.$g)){c=d.$g.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new Ng("success",this,a,c));break;case "timeout":case "error":d=this.h.get(a);d.Xd>d.Jf&&this.dispatchEvent(new Ng("error",this,a,c));break;case "abort":this.dispatchEvent(new Ng("abort",this,a,c))}return null};
function Og(a,b,c){var d=a.h.get(b);!d||d.ah||d.Xd>d.Jf?(d&&(a.g.ha(c,Lg,d.zg),a.h.remove(b)),a=a.i,a.h.remove(c)&&a.ld(c)):(d.Xd++,c.send(d.Dj,d.ne(),d.ca(),d.sd()))}h.I=function(){Kg.m.I.call(this);this.i.$();this.i=null;this.g.$();this.g=null;this.h.clear();this.h=null};function Ng(a,b,c,d){F.call(this,a,b);this.id=c;this.Md=d}A(Ng,F);
function Mg(a,b,c,d,e,f,g,k,l){this.Se=!!l;this.Dj=a;this.i=c||"GET";this.g=d;this.h=e||null;this.Jf=t(g)?g:1;this.Xd=0;this.Qg=this.ah=!1;this.zg=b;this.$g=f;this.j=k||lg;this.Md=null}Mg.prototype.ne=function(){return this.i};Mg.prototype.ca=function(){return this.g};Mg.prototype.sd=function(){return this.h};Mg.prototype.mh=function(){return this.j};function Pg(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b}function Qg(a){if(8192>a.length)return String.fromCharCode.apply(null,a);for(var b="",c=0;c<a.length;c+=8192)b+=String.fromCharCode.apply(null,Kb(a,c,c+8192));return b};function Rg(){this.i=[];this.h=this.g=0};function Sg(){this.h=-1};function Tg(){this.h=-1;this.h=64;this.g=[];this.p=[];this.M=[];this.o=[];this.o[0]=128;for(var a=1;a<this.h;++a)this.o[a]=0;this.j=this.i=0;this.t()}A(Tg,Sg);Tg.prototype.t=function(){this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.j=this.i=0};
function Ug(a,b,c){c||(c=0);var d=a.M;if(v(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.g[0];c=a.g[1];for(var g=a.g[2],k=a.g[3],l=a.g[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.g[0]=a.g[0]+b&4294967295;a.g[1]=a.g[1]+c&4294967295;a.g[2]=a.g[2]+g&4294967295;a.g[3]=a.g[3]+k&4294967295;a.g[4]=a.g[4]+l&4294967295}
Tg.prototype.update=function(a,b){t(b)||(b=a.length);for(var c=b-this.h,d=0,e=this.p,f=this.i;d<b;){if(0==f)for(;d<=c;)Ug(this,a,d),d+=this.h;if(v(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.h){Ug(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.h){Ug(this,e);f=0;break}}this.i=f;this.j+=b};
Tg.prototype.l=function(){var a=[],b=8*this.j;56>this.i?this.update(this.o,56-this.i):this.update(this.o,this.h-(this.i-56));for(var c=this.h-1;56<=c;c--)this.p[c]=b&255,b/=256;Ug(this,this.p);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.g[c]>>d&255,++b;return a};var Vg=null,Wg=null;function Xg(a){this.g=a}Xg.prototype.set=function(a,b){t(b)?this.g.set(a,Zf(b)):this.g.remove(a)};Xg.prototype.get=function(a){var b;try{b=this.g.get(a)}catch(c){return}if(null!==b)try{return Yf(b)}catch(d){throw"Storage: Invalid value was encountered";}};Xg.prototype.remove=function(a){this.g.remove(a)};function Yg(){};function Zg(a){this.g=a}A(Zg,Xg);function $g(a){this.data=a}function ah(a){return!t(a)||a instanceof $g?a:new $g(a)}function bh(a){a=a.data;if(!t(a))throw"Storage: Invalid value was encountered";return a}Zg.prototype.set=function(a,b){Zg.m.set.call(this,a,ah(b))};Zg.prototype.td=function(a){a=Zg.m.get.call(this,a);if(!t(a)||a instanceof Object)return a;throw"Storage: Invalid value was encountered";};Zg.prototype.get=function(a){return(a=this.td(a))?bh(a):void 0};function ch(a){this.g=a}A(ch,Zg);ch.prototype.set=function(a,b,c){if(b=ah(b)){if(c){if(c<z()){ch.prototype.remove.call(this,a);return}b.expiration=c}b.creation=z()}ch.m.set.call(this,a,b)};ch.prototype.td=function(a,b){var c=ch.m.td.call(this,a);if(c){var d;if(d=!b){d=c.creation;var e=c.expiration;d=!!e&&e<z()||!!d&&d>z()}if(d)ch.prototype.remove.call(this,a);else return c}};function dh(a){this.g=a}A(dh,ch);function eh(){}A(eh,Yg);eh.prototype.ja=function(){var a=0;Ed(this.Wb(!0),function(){a++});return a};eh.prototype.clear=function(){var a=Fd(this.Wb(!0)),b=this;wb(a,function(a){b.remove(a)})};function fh(a,b){this.g=a;this.Kf=Pg(b);this.Xg=new $f}A(fh,dh);h=fh.prototype;h.Kf=null;h.Xg=null;
function gh(a,b){var c=new Tg;c.update(Pg(b));c.update(a.Kf);c=c.l();if(!fa(c))throw Error("encodeByteArray takes an array as a parameter");if(!Vg){Vg={};Wg={};for(var d=0;65>d;d++)Vg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d),Wg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(d)}for(var d=Wg,e=[],f=0;f<c.length;f+=3){var g=c[f],k=f+1<c.length,l=k?c[f+1]:0,m=f+2<c.length,n=m?c[f+2]:0,p=g>>2,g=(g&3)<<4|l>>4,l=(l&15)<<2|n>>6,n=n&63;
m||(n=64,k||(l=64));e.push(d[p],d[g],d[l],d[n])}return e.join("")}
function hh(a,b,c,d){if(!(0<b.length))throw Error("Non-empty salt must be provided");var e=new Tg;e.update(Pg(c));e.update(b);e.update(a.Kf);a=new Rg;var e=e.l(),f;f||(f=e.length);b=a.i;for(c=0;256>c;++c)b[c]=c;var g=0;for(c=0;256>c;++c){var g=g+b[c]+e[c%f]&255,k=b[c];b[c]=b[g];b[g]=k}a.g=0;a.h=0;f=a.g;e=a.h;b=a.i;for(c=0;1536>c;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=g;a.g=f;a.h=e;d=Pg(d);var l;l||(l=d.length);f=a.g;e=a.h;b=a.i;for(c=0;c<l;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=
g,d[c]^=b[b[f]+b[e]&255];a.g=f;a.h=e;return Qg(d)}h.set=function(a,b,c){if(t(b)){for(var d=[],e=0;8>e;++e)d[e]=Math.floor(256*Math.random());e=[];ag(this.Xg,b,e);b=new $g(hh(this,d,a,e.join("")));b.salt=d;fh.m.set.call(this,gh(this,a),b,c)}else fh.prototype.remove.call(this,a)};
h.td=function(a,b){var c=fh.m.td.call(this,gh(this,a),b);if(c){var d=bh(c),e=c.salt;if(!v(d)||!u(e)||!e.length)throw"Storage: Invalid value was encountered";d=hh(this,e,a,d);try{c.data=Yf(d)}catch(f){throw"Storage: The value could not be decrypted";}return c}};h.remove=function(a){fh.m.remove.call(this,gh(this,a))};function ih(a){this.g=a}A(ih,eh);h=ih.prototype;h.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};h.get=function(a){a=this.g.getItem(a);if(!v(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};h.remove=function(a){this.g.removeItem(a)};h.ja=function(){return this.g.length};
h.Wb=function(a){var b=0,c=this.g,d=new Cd;d.next=function(){if(b>=c.length)throw Bd;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!v(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){this.g.clear()};h.key=function(a){return this.g.key(a)};function jh(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}A(jh,ih);var kh=!E||E&&9<=xc,lh=!nc&&!E||E&&E&&9<=xc||nc&&vc("1.9.1"),mh=E&&!vc("9");function nh(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}h=nh.prototype;h.clone=function(){return new nh(this.x,this.y)};h.toString=function(){return"("+this.x+", "+this.y+")"};function oh(a,b){return new nh(a.x-b.x,a.y-b.y)}h.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};h.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};h.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function ph(a,b){this.width=a;this.height=b}h=ph.prototype;h.clone=function(){return new ph(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.Va=function(){return!(this.width*this.height)};h.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function qh(a){return a?new rh(sh(a)):ua||(ua=new rh)}function th(a,b){var c=b||document,d=null;c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=uh(document,"*",a,b)[0];return d||null}
function uh(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&Db(b.split(/\s+/),c)&&(d[e++]=g);d.length=e;return d}return a}
function vh(a,b){Kc(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in wh?a.setAttribute(wh[d],b):va(d,"aria-")||va(d,"data-")?a.setAttribute(d,b):a[d]=b})}var wh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function xh(a){a=(a||window).document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new ph(a.clientWidth,a.clientHeight)}function yh(a){return oc||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function zh(a){return a?Ah(a):window}function Ah(a){return a.parentWindow||a.defaultView}function Bh(a,b,c){return Ch(document,arguments)}
function Ch(a,b){var c=b[0],d=b[1];if(!kh&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Da(d.name),'"');if(d.type){c.push(' type="',Da(d.type),'"');var e={};Sc(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(v(d)?c.className=d:u(d)?c.className=d.join(" "):vh(c,d));2<b.length&&Dh(a,c,b,2);return c}function Dh(a,b,c,d){function e(c){c&&b.appendChild(v(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!fa(f)||y(f)&&0<f.nodeType?e(f):wb(Eh(f)?Hb(f):f,e)}}
function Fh(a,b){Dh(sh(a),a,arguments,1)}function Gh(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Hh(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function Ih(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function Jh(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Kh(a){return y(a)&&1==a.nodeType}
function Lh(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function sh(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Mh(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Gh(a),a.appendChild(sh(a).createTextNode(String(b)))}var Nh={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Oh={IMG:" ",BR:"\n"};function Ph(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function Qh(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function Rh(a){a=a.tabIndex;return ha(a)&&0<=a&&32768>a}function Sh(a){if(mh&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Th(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");mh||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Uh(a){var b=[];Th(a,b,!1);return b.join("")}
function Th(a,b,c){if(!(a.nodeName in Nh))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Oh)b.push(Oh[a.nodeName]);else for(a=a.firstChild;a;)Th(a,b,c),a=a.nextSibling}function Eh(a){if(a&&"number"==typeof a.length){if(y(a))return"function"==typeof a.item||"string"==typeof a.item;if(ia(a))return"function"==typeof a.item}return!1}
function Vh(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return Wh(a,function(a){return(!d||a.nodeName==d)&&(!c||v(a.className)&&Db(a.className.split(/\s+/),c))})}function Wh(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function rh(a){this.g=a||q.document||document}h=rh.prototype;h.n=function(a){return v(a)?this.g.getElementById(a):a};h.s=function(a,b,c){return Ch(this.g,arguments)};h.createElement=function(a){return this.g.createElement(a)};
function Xh(a,b){return a.g.createTextNode(String(b))}function Yh(a){return"CSS1Compat"==a.g.compatMode}function Zh(a){var b=a.g;a=yh(b);b=Ah(b);return E&&vc("10")&&b.pageYOffset!=a.scrollTop?new nh(a.scrollLeft,a.scrollTop):new nh(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}h.appendChild=function(a,b){a.appendChild(b)};h.ag=Hh;h.nh=Ih;h.getChildren=function(a){return lh&&void 0!=a.children?a.children:xb(a.childNodes,function(a){return 1==a.nodeType})};h.jh=Jh;h.ij=Kh;h.contains=Lh;E&&vc(8);Uc("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function $h(){this.g="";this.h=ai;this.i=null}$h.prototype.toString=function(){return"SafeHtml{"+this.g+"}"};function bi(a){if(a instanceof $h&&a.constructor===$h&&a.h===ai)return a.g;Wa("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Uc("action","cite","data","formaction","href","manifest","poster","src");Uc("link","script","style");var ai={};function ci(a,b){var c=new $h;c.g=a;c.i=b;return c}var di=ci("",0);var ei={kk:!0},fi={lk:!0};function gi(a,b,c){a.innerHTML=hi(b(c||ii,void 0,void 0))}function hi(a){if(!y(a))return String(a);Wa("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"}var ji=/^<(body|caption|col|colgroup|head|html|tr|td|tbody|thead|tfoot)>/i,ii={};function ki(a){return a&&a.pf&&a.pf===ei?a.content:String(a).replace(li,mi)}var ni={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function mi(a){return ni[a]}var li=/[\x00\x22\x26\x27\x3c\x3e]/g;function oi(){return'<div class="setting-dialog"><form class="basic-setting"><div><input type="checkbox" name="log-on-console"/> Log on console<br /></div><div class="group-panel" style="display: none"><div>Gmail context panel location</div>\x3c!-- see this value in ydn.crm.ui.ContextPanelPosition --\x3e<input type="radio" name="context-panel-position" value="in"/> Inline<br /><input type="radio" name="context-panel-position" value="st"/> Stick on right side<br /><input type="radio" name="context-panel-position" value="wg"/> Inside widget panel<br /></div></form></div>'}
oi.g="templ.ydn.crm.app.setting";function pi(a,b,c){cc.call(this);this.i=a;this.o=b||0;this.g=c;this.l=oa(this.j,this)}A(pi,cc);pi.prototype.h=0;pi.prototype.I=function(){pi.m.I.call(this);this.stop();delete this.i;delete this.g};function qi(a){a.stop();a.h=Xf(a.l,t(void 0)?void 0:a.o)}pi.prototype.stop=function(){0!=this.h&&q.clearTimeout(this.h);this.h=0};function ri(a){a.stop();a.j()}pi.prototype.j=function(){this.h=0;this.i&&this.i.call(this.g)};function si(a,b,c){cc.call(this);this.j=a;this.i=b;this.g=c;this.h=oa(this.tj,this)}A(si,cc);h=si.prototype;h.Hd=!1;h.ea=null;h.stop=function(){this.ea&&(q.clearTimeout(this.ea),this.ea=null,this.Hd=!1)};h.I=function(){si.m.I.call(this);this.stop()};h.tj=function(){this.ea=null;this.Hd&&(this.Hd=!1,ti(this))};function ti(a){a.ea=Xf(a.h,a.i);a.j.call(a.g)};L("ydn");var ui=Math.pow(2,3),vi=Math.pow(2,6);function wi(){pd.call(this);this.key=this.g=void 0}A(wi,pd);function xi(a,b,c){if("boolean"!=typeof c)throw Error("Invalid value");if("number"!=typeof b||0>b)throw Error("Invalid state");"undefined"==typeof a.g&&(a.g=0);a.g=c?a.g|b:a.g&~b}function yi(a){xi(a,ui,!0);Xf(function(){this.dispatchEvent(zi)},0,a)}var zi="a";function Ai(a,b,c){F.call(this,a,b);this.url=c}A(Ai,F);L("ydn");function Bi(a){return!v(a)||ya(a)?{}:JSON.parse(a)}function Ci(a){var b;try{b=Di(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function Di(a){return JSON.stringify(a,void 0,void 0)};function Ei(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=Fi();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function Gi(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=Fi();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function Hi(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");}
function Fi(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}}return a};function Ii(a){Error.captureStackTrace?Error.captureStackTrace(this,Ii):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}A(Ii,Error);function Ji(a){Error.captureStackTrace?Error.captureStackTrace(this,Ji):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}A(Ii,Error);Ji.prototype.name="ydn.error.NotSupportedException";
function Ki(a){Error.captureStackTrace?Error.captureStackTrace(this,Ki):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}A(Ki,Error);function Li(a){Error.captureStackTrace?Error.captureStackTrace(this,Li):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}A(Li,Error);Li.prototype.name="ydn.InternalError";
function Mi(a){Error.captureStackTrace?Error.captureStackTrace(this,Mi):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}A(Mi,Error);Mi.prototype.name="ydn.error.ConstraintError";function Ni(a){Error.captureStackTrace?Error.captureStackTrace(this,Ni):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}A(Ii,Error);
function Oi(a){Error.captureStackTrace?Error.captureStackTrace(this,Oi):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}A(Oi,Error);var Pi,Qi,Ri,Si;Si=Ri=Qi=Pi=!1;var Ti=gc;Ti&&(-1!=Ti.indexOf("Firefox")?Pi=!0:-1!=Ti.indexOf("Camino")||(-1!=Ti.indexOf("iPhone")||-1!=Ti.indexOf("iPod")?Qi=!0:-1!=Ti.indexOf("iPad")?Ri=!0:-1!=Ti.indexOf("Chrome")?Si=!0:-1!=Ti.indexOf("Android")||Ti.indexOf("Safari")));var Ui=Pi,Vi=Qi,Wi=Ri,Xi=Si;function Yi(a){if(!u(a))throw new Ii("Array required.");if(t(void 0))return a=yb(a,function(a){return a[void 0]}),Yi(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};function Zi(){wi.call(this);this.h=null;bd(this,"user-login",this.Gh,!1,this);bd(this,"user-logout",this.Gh,!1,this);this.p=window.top.location.href.replace(/[?#]\S+/,"")}A(Zi,wi);h=Zi.prototype;h.logger=L("ydn.api.AbstractUser");h.Gh=function(){this.display?(this.display.i(this.email||""),this.isLogin()?this.l&&this.display.h(this.l):this.j&&this.display.g(this.j),ie(this.logger,"Refreshed.")):ie(this.logger,"No UI refreshed.")};
h.toJSON=function(){return{nickname:this.o,email:this.email,is_login:this.h,login_url:this.j,logout_url:this.l,user_id:this.user_id}};h.isLogin=function(){return!0===this.h};h.toString=function(){return"User:"+(!0===this.h?this.email:!1===this.h?"logout":"?")};h.Fd=0;
h.li=function(){if(this.isLogin())this.i.stop();else if(1<this.Fd)J(this.logger,"Cannot login to the API server, tried "+this.Fd+" times."),this.i.stop(),this.Fd=0;else{this.Fd++;ge(this.logger,"Sending login request.");var a=$i(aj),b=window.top.location.href.replace(/[?#]\S+/,"");a.request(new bj("/rpc_login","GET",{url:b})).execute(oa(this.t,this))}};
h.refresh=function(a){!a&&this.isLogin()?ie(this.logger,"Already login"):(this.i||(this.i=new si(this.li,5E3,this)),this.Fd=0,a=this.i,a.ea?a.Hd=!0:ti(a))};function cj(a,b,c){Ai.call(this,a,b,c)}A(cj,Ai);function dj(){Zi.call(this)}var ej;A(dj,Zi);dj.prototype.logger=L("ydn.api.User");
dj.prototype.load=function(a){ge(this.logger,"getting user info");if(a.logout_url)return this.o=a.nickname,this.email=a.email,this.user_id=a.user_id,this.h=a.is_login,this.l=a.logout_url,this.j=a.login_url,ge(this.logger,a.email+" login"),this.l=a.logout_url,this.user_id=a.Id?a.Id.$t:void 0,this.h=!0,this.j=void 0,xi(this,vi,!0),yi(this),!0;a.login_url&&(ge(this.logger,"NO user"),this.j=a.login_url,this.h=!1,this.email=this.user_id=this.l=this.o=void 0,xi(this,vi,!0),yi(this));return!1};
dj.prototype.t=function(a,b){ie(this.logger,"Receiving "+(fj(b)?"":"fail")+" login info from server.");if(fj(b)){var c=a.User;if(c){var d;d=this.load(c)?new cj("user-login",this,this.l):new cj("user-logout",this,this.j);Xf(function(){this.dispatchEvent(d)},0,this)}}else J(this.logger,"Server return error with: "+b.La());this.i&&this.i.stop()};
function gj(a,b){var c=new B,d=$i(aj);if(!d)return C("login server not available.");var e={pm:a.p,state:Math.random().toString().substr(2,6)};if(b)for(var f in b)e[f]=b[f];d.request(new bj("/rpc_login","GET",e)).execute(function(a,b){if(a){var d=a.User;this.load(d);c.callback(d)}else c.D(b)},a);return c};function hj(){this.g=z()}var ij=new hj;hj.prototype.set=function(a){this.g=a};hj.prototype.get=function(){return this.g};function jj(a){this.j=a||"";this.l=ij}jj.prototype.g=!0;jj.prototype.h=!1;function kj(a){a=new Date(a.l);return lj(a.getFullYear()-2E3)+lj(a.getMonth()+1)+lj(a.getDate())+" "+lj(a.getHours())+":"+lj(a.getMinutes())+":"+lj(a.getSeconds())+"."+lj(Math.floor(a.getMilliseconds()/10))}function lj(a){return 10>a?"0"+a:String(a)}function mj(a,b){var c=(a.l-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function nj(a){jj.call(this,a)}A(nj,jj);nj.prototype.h=!0;
nj.prototype.i=function(a){var b;switch(a.j.value){case Vd.value:b="dbg-sh";break;case Wd.value:b="dbg-sev";break;case Xd.value:b="dbg-w";break;case Yd.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.j," ");this.g&&c.push("[",kj(a),"] ");c.push("[",La(mj(a,this.l.get())),"s] ");c.push("[",Da(a.h),"] ");c.push('<span class="',b,'">',Ca(La(Da(a.getMessage()))));this.h&&a.i&&c.push("<br>",Ca(La(a.g||"")));c.push("</span>");c.push("<br>");return c.join("")};
function oj(a){jj.call(this,a)}A(oj,jj);oj.prototype.i=function(a){var b=[];b.push(this.j," ");this.g&&b.push("[",kj(a),"] ");b.push("[",mj(a,this.l.get()),"s] ");b.push("[",a.h,"] ");b.push(a.getMessage());this.h&&a.i&&b.push("\n",a.g);b.push("\n");return b.join("")};function pj(){this.j=oa(this.o,this);this.g=new oj;this.g.g=!1;this.h=this.g.h=!1;this.i="";this.l={}}function qj(a){var b=rj;if(a!=b.h){var c=me();a?ee(c,b.j):(c=c.g)&&Fb(c,b.j);b.h=a}}pj.prototype.o=function(a){if(!this.l[a.h]){var b=this.g.i(a),c=sj;if(c)switch(a.j){case Vd:tj(c,"info",b);break;case Wd:tj(c,"error",b);break;case Xd:tj(c,"warn",b);break;default:tj(c,"debug",b)}else window.opera?window.opera.postError(b):this.i+=b}};var sj=window.console;
function tj(a,b,c){if(a[b])a[b](c);else a.log(c)};function uj(){return oc?"Webkit":nc?"Moz":E?"ms":mc?"O":null};function vj(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}h=vj.prototype;h.clone=function(){return new vj(this.top,this.right,this.bottom,this.left)};h.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};h.contains=function(a){return this&&a?a instanceof vj?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
h.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};h.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};h.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function wj(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}h=wj.prototype;h.clone=function(){return new wj(this.left,this.top,this.width,this.height)};h.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};h.contains=function(a){return a instanceof wj?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
h.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};h.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function xj(a,b){var c=sh(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function yj(a,b){return xj(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function zj(a){return yj(a,"position")}function Aj(a,b,c){var d,e=nc&&(jc||kc)&&vc("1.9");b instanceof nh?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Bj(d,e);a.style.top=Bj(b,e)}
function Cj(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Dj(a){if(E&&!(E&&8<=xc))return a.offsetParent;var b=sh(a),c=yj(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=yj(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Ej(a){for(var b=new vj(0,Infinity,Infinity,0),c=qh(a),d=c.g.body,e=c.g.documentElement,f=yh(c.g);a=Dj(a);)if(!(E&&0==a.clientWidth||oc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=yj(a,"overflow")){var g=Fj(a),k;k=a;if(nc&&!vc("1.9")){var l=parseFloat(xj(k,"borderLeftWidth"));if(Gj(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(xj(k,"borderRightWidth")),l=l+m;k=new nh(l,parseFloat(xj(k,"borderTopWidth")))}else k=new nh(k.clientLeft,k.clientTop);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=xh(Ah(c.g));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Fj(a){var b,c=sh(a),d=yj(a,"position"),e=nc&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new nh(0,0),g;b=c?sh(c):document;g=!E||E&&9<=xc||Yh(qh(b))?b.documentElement:b.body;if(a==g)return f;if(a.getBoundingClientRect)b=Cj(a),a=Zh(qh(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(oc&&"fixed"==zj(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(mc||oc&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=Dj(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,mc&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function Hj(a,b,c){if(b instanceof ph)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=Bj(b,!0);a.style.height=Bj(c,!0)}
function Bj(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Ij(a){var b=Jj;if("none"!=yj(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function Jj(a){var b=a.offsetWidth,c=a.offsetHeight,d=oc&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new ph(b,c):(a=Cj(a),new ph(a.right-a.left,a.bottom-a.top))}
function Kj(a){var b=Fj(a);a=Ij(a);return new wj(b.x,b.y,a.width,a.height)}function Lj(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function Q(a,b){a.style.display=b?"":"none"}function Gj(a){return"rtl"==yj(a,"direction")}var Mj=nc?"MozUserSelect":oc?"WebkitUserSelect":null;
function Nj(a,b,c){c=c?null:a.getElementsByTagName("*");if(Mj){if(b=b?"none":"",a.style[Mj]=b,c){a=0;for(var d;d=c[a];a++)d.style[Mj]=b}}else if(E||mc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Oj(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Pj(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Oj(a,c):0}var Qj={thin:2,medium:4,thick:6};function Rj(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Qj?Qj[c]:Oj(a,c)}
function Sj(a){if(E&&!(E&&9<=xc)){var b=Rj(a,"borderLeft"),c=Rj(a,"borderRight"),d=Rj(a,"borderTop");a=Rj(a,"borderBottom");return new vj(d,c,a,b)}b=xj(a,"borderLeftWidth");c=xj(a,"borderRightWidth");d=xj(a,"borderTopWidth");a=xj(a,"borderBottomWidth");return new vj(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Tj=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Uj(a){this.j=oa(this.l,this);this.g=new nj;this.h=this.g.g=!1;this.F=a;this.i=this.F.ownerDocument||this.F.document;a=qh(this.F);var b=null,c=a.g;if(E&&c.createStyleSheet)a=b=c.createStyleSheet(),E&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=uh(a.g,"head",void 0,void 0)[0];c||(b=uh(a.g,"body",void 0,void 0)[0],c=a.s("head"),b.parentNode.insertBefore(c,b));var d=b=a.s("style");E&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.F.className+=" logdiv"}
Uj.prototype.l=function(a){var b=100>=this.F.scrollHeight-this.F.scrollTop-this.F.clientHeight,c=this.i.createElement("div");c.className="logmsg";c.innerHTML=this.g.i(a);this.F.appendChild(c);b&&(this.F.scrollTop=this.F.scrollHeight)};Uj.prototype.clear=function(){this.F.innerHTML=""};var rj=null,Vj=null;L("ydn.debug");function Wj(a,b,c){if(ha(b))b=new Td("log",b);else if(v(b)){b=b.toUpperCase();if(!de){de={};for(var d=0,e;e=ce[d];d++)de[e.value]=e,de[e.name]=e}b=de[b]||null}else b=$d;L(a||"ydn").h=b;t(c)?Vj||(a=Vj=new Uj(c),!0!=a.h&&(c=me(),ee(c,a.j),a.h=!0),me().h=Xd):rj||Vj||(rj=new pj,qj(!0),me().h=Xd)}var Xj=null;function Yj(a){Xj&&setTimeout(function(){Xj.log(a)},10)};var aj="login",Zj=L("ydn.http"),ak={},bk=[];var ck,dk={},ek=[];function fk(a,b){dk[b||"default"]=a}function $i(a){if(!t(a))return dk["default"];for(var b=a,c=0;c<ek.length;c++){var d=(0,ek[c])(a);if(d){b=d;break}}return dk[b]||null}function gk(){ck||(ck=new Kg);return ck}function hk(a,b,c,d){v(a)?this.raw=a:(this.raw=null,this.status=a,this.body=b,this.headers=c||{},this.g=d)}function ik(a){if(a.raw){var b=Bi(a.raw);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.g=b.statusText;a.headers=b.headers;a.body=b.body;a.raw=null}}
hk.prototype.U=function(){ik(this);return this.status};function fj(a){ik(a);return 200<=a.status&&400>a.status}hk.prototype.La=function(){ik(this);return this.g||""};function jk(a){ik(a);return a.body}function kk(a,b){ik(a);return a.headers[b]}hk.prototype.sd=function(){ik(this);return this.headers};
function lk(a){var b;ik(a);"application/json"==kk(a,"content-type")?b=!0:(b=a.body,b=v(b)&&!ya(b)?/^[\],:{}\s]*$/.test(b.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")):!1);return b&&v(a.body)?JSON.parse(a.body):a.body}function mk(a){return a instanceof hk?a:v(a)?new hk(a):new hk(a.status,a.body,a.headers,a.statusText)}
function bj(a,b,c,d,e){this.path=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=e}var nk=null;function ok(a,b,c,d){this.o=t(b)?b:gk();this.l="sr"+pk++;this.p=c||0;this.j=!!d;this.g=a}var pk=0;ok.prototype.C=function(){return this.l};
ok.prototype.execute=function(a,b){var c=this.g,d=new De(c.path),e;for(e in c.params)d.g.set(e,c.params[e]);this.o.send(this.l,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.W&&4==wg(d)?d.W.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=yg(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(y(l))e=l;else if(v(l))try{e=Bi(l)}catch(n){e=l}k=new hk(d.U(),
l,k,d.La());nk&&!fj(k)&&nk.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.path,uri:String(d.t),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:k.U(),statusText:k.La(),body:jk(k),headers:k.sd()}});a&&(a.call(b,e,k),a=null)},this.p,void 0,this.j);this.o=null};ok.prototype.toString=function(){return"HTTPRequest:"+this.l};function qk(a,b,c){this.h=a;this.i=b;this.g=null;this.Ej=t(c)?c:!0}qk.prototype.request=function(a){return new rk(a,this)};function rk(a,b){ok.call(this,a,b.i);this.parent=b}A(rk,ok);var sk=new hk(0,null,null,"No access token");
rk.prototype.execute=function(a,b){function c(){this.Ej?d.g.headers.Authorization="Bearer "+d.parent.g.access_token:d.g.params.access_token=d.parent.g.access_token}var d=this;d.parent.g&&d.parent.g.expires>z()?(c(),rk.m.execute.call(this,function(e,f){401==f.U()?tk(d.parent.h).A(function(e){d.parent.g=e;c();rk.m.execute.call(d,a,b)},function(){d.parent.g=null;a.call(b,null,sk)},d):a.call(b,e,f)},this)):tk(this.parent.h).A(function(e){d.parent.g=e;c();rk.m.execute.call(this,a,b)},function(){d.parent.g=
null;a.call(b,null,sk)},this)};function R(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ia(Object.freeze)&&Object.freeze(this)}R.prototype.lower=void 0;R.prototype.upper=void 0;R.prototype.toJSON=function(){return uk(this)};function vk(a){return yk(a)}R.only=function(a){return new R(a,a,!1,!1)};R.bound=function(a,b,c,d){return new R(a,b,c,d)};R.upperBound=function(a,b){return new R(void 0,a,void 0,!!b)};R.lowerBound=function(a,b){return new R(a,void 0,!!b,void 0)};
function zk(a){var b;if(u(a))b=Hb(a),b.push("\uffff");else if(v(a))b=a+"\uffff";else if(ha(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return R.only(a);return R.bound(a,b,!1,!0)}function uk(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function Ak(a){if(null==a)return null;if(a instanceof R)return a;if(y(a))return new R(a.lower,a.upper,a.lowerOpen,a.upperOpen);throw new G("Invalid key range: "+a+" of type "+typeof a);}
function yk(a){return null!=a?null!=a.upper&&null!=a.lower?Bk.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?Bk.upperBound(a.upper,a.upperOpen):null!=a.lower?Bk.lowerBound(a.lower,a.lowerOpen):null:null}function Ck(a){if(a instanceof R)return"";if(null!=a){if(y(a)){for(var b in a)if(a.hasOwnProperty(b)&&!Db(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
R.prototype.kf=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return R.bound(b,c,d,e)};function Dk(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function Ek(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==Fk(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(Gk(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(Gk(c.upper,b)))}else d.push(a+" = ?"),e.push(Gk(c.lower,b))}var Bk=q.IDBKeyRange||q.webkitIDBKeyRange||R;function Hk(a,b){var c,d;2==arguments.length&&v(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=fa(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function Ik(a,b,c){if(a)if(-1==b.indexOf("."))a[b]=c;else{b=b.split(".");for(var d=b.pop(),e;e=b.shift();)y(a[e])||(a[e]={}),a=a[e];a[d]=c}}var Jk={};
function Kk(a){a=[a];for(var b=new Lk,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(Jk);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),Mk(b,e);else if(e instanceof Date)c+=2,b.write(c),Mk(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===Jk)b.write(0);else return"";c=0}return b.trim().toString()}function Nk(a){for(var b=[],c=b,d=[],e,f,g=new Ok(a);null!=g.read();)if(0===g.current)c=d.pop();else{if(null===g.current)break;do{e=g.current/4|0;a=g.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.current+4)g.read();else break}while(1);1===a?c.push(Pk(g)):2===a?c.push(new Date(Pk(g))):3===a?c.push(Qk(g)):0===a&&(c=d.pop())}return b[0]}
function Mk(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Pk(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Qk(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.read();if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Ok(a){this.current=null;this.g=a;this.h=this.g.length-1;this.index=-1}
Ok.prototype.read=function(){return this.current=this.index<this.h?parseInt(this.g[++this.index]+this.g[++this.index],16):null};function Lk(){this.g=[];this.h=void 0}Lk.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.h=arguments[b].toString(16),this.g.push(2===this.h.length?this.h:this.h="0"+this.h)};Lk.prototype.trim=function(){for(var a=this.g.length;"00"===this.g[--a];);this.g.length=++a;return this};Lk.prototype.toString=function(){return this.g.length?this.g.join(""):""};
function Rk(a,b){var c=Kk(a),d=Kk(b);return c>d?1:c==d?0:-1};function Sk(a,b,c,d,e){if(!(b instanceof R))if(v(b)&&t(c)){var f,g,k,l;if("starts"==b||"^"==b)b=zk(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)g=c,l=">"==b;else if("="==b||"=="==b)f=g=c;else throw new G("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)g=e,l=">"==d;else if(t(d))throw new G("invalid op2: "+d);b=R.bound(g,f,l,k)}}else b=Ak(b);this.g=b;this.h=a}Sk.prototype.h="";Sk.prototype.rd=function(){return this.h};
Sk.prototype.kf=function(a){if(this.h!=a.h)return null;a=null!=this.g&&null!=a.g?this.g.kf(a.g):this.g||a.g;return new Sk(this.h,a)};var Tk={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Uk=q.IDBRequest&&"LOADING"in q.IDBRequest?q.IDBTransaction:q.webkitIDBRequest&&"LOADING"in q.webkitIDBRequest&&1===q.webkitIDBTransaction.READ_WRITE?q.webkitIDBTransaction:Tk,Vk=Uk.READ_ONLY,Wk=Uk.READ_WRITE,Xk=Uk.VERSION_CHANGE,Yk=q.indexedDB||q.mozIndexedDB||q.webkitIndexedDB||q.moz_indexedDB||q.msIndexedDB;function Zk(a,b,c,d){cc.call(this);this.h=c;this.V=c.getName();this.jb=void 0;this.j=!1;this.da=null;this.o=a;this.Vb=b;this.fa=0;this.Y=this.K=!1;this.P=d||4;this.t=this.i=this.g=void 0;this.J=function(){throw new yd;};this.N=function(){throw new yd;};this.Ja=function(){}}A(Zk,cc);h=Zk.prototype;
h.init=function(a,b,c,d,e){if(t(b)){a=this.h;var f,g=b;u(b)?(f=$k(a,b),g=b.join(", ")):f=al(a,b);if(!f)throw new G('require index "'+g+'" not found in store "'+a.getName()+'"');this.jb=f.getName()}this.j=v(this.jb);this.da=c||null;this.fa=0;this.Y=this.K=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.xb=d;this.Dd=e;this.t=this.i=this.g=void 0};h.xb="";h.da=null;h.unique=!1;h.reverse=!1;h.Dd=!0;h.logger=L("ydn.db.core.req.AbstractCursor");
function bl(a,b){a.N(b);cl(a);a.K=!0}h.wb=function(a,b,c){null==a&&(P(this.logger,this+" finished."),this.K=!0);this.g=a;this.i=b;this.t=c;this.fa++;this.K?(O(this.logger,this+" DONE."),this.J(),cl(this)):(O(this.logger,this+" new cursor position {"+(this.j?this.g+", "+this.i:this.g)+"}"),this.J(this.g))};h.I=function(){this.o=null};h.toString=function(){return"Cursor:"+this.V+(t(this.jb)?":"+this.jb:"")+"["+(this.o?"":"~")+this.Vb+"]"};
function cl(a){null!=a.i?a.i=dl(a.i):a.i=void 0;null!=a.g?a.g=dl(a.g):a.g=void 0;a.Ja(a.Y,a.g,a.i)}h.open=function(a,b,c,d){this.o=a;this.Vb=b;this.K=this.Y=!1;this.g=c;this.i=d;this.openCursor(this.g,this.i)};function el(a){a.Y=!0;O(a.logger,a+": exit");cl(a)}h.ja=function(){return this.fa};h.ka=function(){return this.j?this.i:this.g};h.T=function(){return this.Dd?this.ka():this.t};h.md=function(){};h.oc=function(){};
h.restart=function(a,b){O(this.logger,this+" restarting");this.Y=this.K=!1;this.openCursor(b,a)};function fl(){};function gl(a,b,c,d,e,f,g){if(!v(a))throw new TypeError("store name must be a string, but "+a+" found.");this.i=a;this.h=b;this.o=g;this.p=!!this.h;if(t(d)&&!ga(d))throw new G("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!ga(e))throw new G("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!ga(f))throw new G("key_only value must be a boolean, but "+typeof f+" found");this.g=t(f)?f:!!v(this.h);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.l=
a;if(d=Ck(c))throw new G("Invalid key range: "+d);this.j=yk(c);this.t=hl;this.S=NaN}A(gl,fl);gl.prototype.g=!0;function il(a,b,c,d,e){if(!v(b))throw new G("index name must be string");gl.call(this,a,b,c,d,e,!0)}A(il,gl);function jl(a,b,c){if(3<arguments.length)throw new G("too many argument");gl.call(this,a,void 0,b,c,void 0,!1)}A(jl,gl);function kl(a,b,c,d,e){if(!v(b))throw new G("index name must be string");gl.call(this,a,b,c,d,e,!1)}A(kl,gl);var hl="init";h=gl.prototype;h.logger=L("ydn.db.Iterator");
h.L=function(){return this.i};h.clone=function(){var a=new gl(this.i,this.h,this.j,ll(this),ml(this),this.g,this.o);a.S=this.S;return a};h.unique=function(a){return new gl(this.i,this.h,this.j,ll(this),a,this.g,this.o)};h.toJSON=function(){return{store:this.i,index:this.h,keyRange:this.j?uk(this.j):null,direction:this.l}};
h.toString=function(){var a=t(this.o)?":"+this.o.join(","):t(this.h)?":"+this.h:"",a=a+Dk(this.j);this.t!=hl&&(a+=this.t+"{"+this.J,this.p&&(a+=", "+this.M),a+="}");var b=this.p?"Index":"",b=b+(this.g?"Key":"Value");return b+"Iterator:"+this.i+a};h.reverse=function(){return new gl(this.i,this.h,this.j,!ll(this),ml(this),this.g,this.o)};function ll(a){return"prev"===a.l||"prevunique"===a.l}function ml(a){return"nextunique"===a.l||"prevunique"===a.l}
h.load=function(a){a=a[0];a.init(this.i,this.o||this.h,this.j,this.l,this.g);this.t="busy";var b=this;a.Ja=function(a,d,e){b.J=d;b.M=e;b.t=a?"rest":"done"};a.openCursor(this.J,this.M);return a};h.ka=function(){return this.M};h.stores=function(){return[this.i]};function nl(a,b,c){qe.call(this,b,c);this.S=a;this.p=[];this.J=[];this.Qa=[];this.g=null;this.fd="";this.aa=0}A(nl,qe);h=nl.prototype;h.fd="";h.logger=L("ydn.db.Request");function ol(a,b,c){a.g=b;a.fd=c;P(a.logger,a+" BEGIN");if(b){for(c=0;c<a.J.length;c++)a.J[c][0].call(a.J[c][1],b);a.J.length=0}}function pl(a){var b=new nl(a.S);a.aa++;ol(b,a.g,a.fd+"C"+a.aa);return b}function ql(a){P(a.logger,a+" END");a.g=null}h.ne=function(){return this.S};
h.abort=function(){P(this.logger,this+" aborting "+this.g);if(this.g)if(ia(this.g.abort))this.g.abort();else if(ia(this.g.executeSql))this.g.executeSql("ABORT",[],function(){},function(){return!0});else throw new vd;else throw new rl(this+" No active transaction");};function T(a,b,c){var d=a.Qa.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){T(a,b,c)}):c?a.D(b):a.callback(b)}function sl(a,b,c){a.Qa.push([b,c])}function U(a,b,c){a.g?b.call(c,a.g):a.J.push([b,c])}
h.callback=function(a){P(this.logger,this+" SUCCESS");nl.m.callback.call(this,a)};h.D=function(a){P(this.logger,this+" ERROR");nl.m.D.call(this,a)};h.state=function(){return this.h?this.l?"rejected":"resolved":"pending"};function V(a){var b="";a.fd&&(b=a.g?"*":"",b="["+a.fd+b+"]");return a.S+b}function tl(a,b){var c=new nl(a);T(c,b);return c}h.toString=function(){return"Request:"+V(this)};
h.uf=function(){this.o&&this.h&&Yb(this)&&(Zb(this.o),this.o=0);this.i&&(this.i.K--,delete this.i);for(var a=this.j,b=!1;this.t.length&&!this.M;){var c=this.t.shift(),d=c[0],e=c[1],c=c[2];if(d=this.l?e:d)d=d.call(c||this.P,a),t(d)&&(this.l=this.l&&(d==a||d instanceof Error),this.j=a=d),sa(a)&&(this.M=b=!0)}this.j=a;b&&(b=oa(this.ce,this,!0),d=oa(this.ce,this,!1),a instanceof B?(a.A(b,d),a.Y=!0):a.then(b,d))};
h.toJSON=function(){var a=(this.fd||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.S?this.S.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var Fk=Yk&&Yk.cmp?oa(Yk.cmp,Yk):Rk,ul=[];function vl(a){Error.captureStackTrace?Error.captureStackTrace(this,vl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}A(vl,Error);vl.prototype.name="ConstraintError";vl.prototype.toString=function(){return this.name+": "+this.message};function wl(a){Error.captureStackTrace?Error.captureStackTrace(this,wl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}A(wl,Error);
wl.prototype.toString=function(){return this.name+": "+this.message};function xl(a){Error.captureStackTrace?Error.captureStackTrace(this,xl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}A(xl,Error);xl.prototype.name="ydn.db.VersionError";xl.prototype.toString=function(){return this.name+": "+this.message};function yl(a){Error.captureStackTrace?Error.captureStackTrace(this,yl):this.stack=Error().stack||"";a&&(this.message=String(a))}A(yl,Error);
yl.prototype.name="ydn.db.InternalError";function rl(a){Error.captureStackTrace?Error.captureStackTrace(this,rl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}A(rl,Error);function zl(a){Error.captureStackTrace?Error.captureStackTrace(this,zl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}A(zl,Error);
function Al(a){Error.captureStackTrace?Error.captureStackTrace(this,Al):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}A(Al,Error);Al.prototype.name="NotFoundError";Al.prototype.toString=function(){return this.name+": "+this.message};function Bl(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Bl):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}A(Bl,Error);
Bl.prototype.toString=function(){return this.name+": "+this.message};function Cl(a,b){Error.captureStackTrace?Error.captureStackTrace(this,Cl):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}A(Cl,Error);Cl.prototype.toString=function(){return this.name+": "+this.message};function Dl(a){Error.captureStackTrace?Error.captureStackTrace(this,Dl):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
A(Dl,Error);function El(a){Error.captureStackTrace?Error.captureStackTrace(this,El):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}A(El,Error);function Fl(a,b,c){var d;if(y(a))d=a.store,b=a.id,null!=a.parent&&(c=new Fl(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new Fl(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.V=d;this.id=b;this.parent=c||null}h=Fl.prototype;h.toJSON=function(){var a={store:this.V,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.V+"^:"+this.id};h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.L=function(){return this.V};h.C=function(){return this.id};function Gl(a){return u(a.id)?a.id.join("^|"):a.id instanceof Date?+a.id:a.id}h.getParent=function(){return this.parent};function Hl(a){return ha(a)||v(a)||u(a)&&Ab(a,Hl)||a instanceof Date}
function dl(a){if(fa(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function Il(a,b){this.g=b}Il.prototype.logger=L("ydn.db.crud.req.RequestExecuto");Il.prototype.toString=function(){return"RequestExecutor"};function Jl(a){this.i=a;this.g=null;this.h=0}Jl.prototype.logger=L("ydn.db.tr.Mutex");Jl.prototype.nb=null;function Kl(a){return!!a.g&&!a.j}Jl.prototype.cb=null;Jl.prototype.toString=function(){return"Mutex:"+("B"+this.i+"T"+this.h)+(this.g?"*":"")};function Ll(a,b,c,d,e,f){this.P=a;this.N=b;this.g=this.l=0;this.K=d;this.S=e;this.j=c||Ml;this.t=f||0}Ll.prototype.logger=L("ydn.db.tr.Thread");Ll.prototype.type=function(){return Nl(this.P)};Ll.prototype.O=function(){return this.P};Ll.prototype.Pa=function(){return"B"+this.N+"T"+this.l};var Ml="single";function Ol(a){if(a)if(ia(a.abort))a.abort();else if(ia(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new vd;else throw new rl("No active transaction");};function Pl(a,b,c,d,e,f){Ll.call(this,a,b,c,d,e,f);this.i=[];this.o=[];this.p=null;this.h=new Jl(b);this.M=f||0;this.J=!1}A(Pl,Ll);h=Pl.prototype;h.logger=L("ydn.db.tr.Serial");
function Ql(a,b,c){if("multi"==a.j)a:if(a=a.h,!a.nb||!a.mode||c!=a.mode&&(a.mode!=Wk||c!=Vk)||b.length>a.nb.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.nb.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.j)a:if(a=a.h,a.nb&&a.mode&&c==a.mode&&a.nb.length==b.length){for(c=0;c<b.length;c++)if(-1==a.nb.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.j?!0:!1;return b}
function Rl(a){var b=0<a.i.length?a.i[0].nb:null,c=0<a.i.length?a.i[0].mode:null;return null!=b&&null!=c?Ql(a,b,c):!1}function Sl(a,b,c,d,e){O(a.logger,"push tx queue["+a.i.length+"]");a.i.push({ke:b,nb:c,mode:d,cb:e})}h.abort=function(){P(this.logger,this+": aborting");Ol(this.p)};
h.Ic=function(a,b,c,d){var e=v(b)?[b]:b;if(fa(e)){if(0==e.length)throw new G("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!v(e[f]))throw new G("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.Y&&!Db(this.Y,e[f]))throw new G('store name "'+f+e[f]+'" in scope of '+this);}}else throw new G("store names must be an array");var g=t(c)?c:Vk,k=this;if(this.h.g||!Tl(this.O())&&this.J)Sl(this,a,b,g,d);else{var l=this.Pa();d&&this.o.push(d);if(this.M&&
this.l>=this.M)throw new xd("Exceed maximum number of transactions of "+this.M);this.J=!0;this.O().transaction(function(c){var d=k.h;d.g=c;d.j=!1;d.nb=b;d.mode=g;d.h++;d.cb=null;l=k.Pa();pe(k.logger,l+" BEGIN "+Di(b)+" "+g);a(k);for(a=null;Rl(k);)c=k.i.shift(),c.cb&&k.o.push(c.cb),O(k.logger,"pop tx queue"+(k.i.length+1)+" reusing T"+k.l),c.ke()},e,g,function(a,b){pe(k.logger,l+" "+a);var c=k.h;c.g?(c.g=null,c.nb=null,c.mode=null,ia(c.cb)&&c.cb(a,b),c.cb=null):N(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.o.length;c++)(0,k.o[c])(a,b);k.o.length=0;(c=k.i.shift())&&k.Ic(c.ke,c.nb,c.mode,c.cb);k.g=0})}};h.Pa=function(){var a=this.h;return"B"+a.i+"T"+a.h};h.request=function(a,b,c,d){function e(a,b){ql(f);d&&d(a,b)}var f=new nl(a);a=c||Vk;var g=this;Kl(this.h)&&Ql(this,b,a)?(b=this.h.g,this.g++,ol(f,b,this.Pa()+"R"+this.g),this.o.push(e)):g.Ic(function(){var a=g.h.g;g.g++;ol(f,a,g.Pa()+"R"+g.g)},b,a,e);return f};
h.lc=function(a,b,c,d,e){d=d||Vk;var f=this,g;if(Kl(f.h)&&Ql(this,c,d)){var k=f.h.g;f.g++;g=f.Pa()+"R"+f.g;P(f.logger,g+" BEGIN");b(k,g,function(b,c){f.p=k;c?(P(f.logger,g+" ERROR"),a.D(b)):(P(f.logger,g+" SUCCESS"),a.callback(b));f.p=null});P(f.logger,g+" END");b=null}else f.Ic(function(){var c=f.h.g;f.g++;g=f.Pa()+"R"+f.g;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.p=c;d?(P(f.logger,g+" ERROR"),a.D(b)):(P(f.logger,g+" SUCCESS"),a.callback(b));f.p=null});P(f.logger,g+" END");b=null},c,d,e)};
h.getName=function(){return this.O().getName()};h.toString=function(){return"Serial:"+this.Pa()+(this.p?"*":"")};function Ul(a,b){Pl.call(this,a,b)}A(Ul,Pl);Ul.prototype.logger=L("ydn.db.tr.AtomicSerial");Ul.prototype.request=function(a,b,c){var d,e,f,g=Ul.m.request.call(this,a,b,c,function(a,b){ql(g);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new El;T(g,c,!0)}});sl(g,function(a,b,c){f=b;e=a;d=c});return g};
Ul.prototype.lc=function(a,b,c,d,e){var f,g,k=new B;k.A(function(a){g=!1;f=a},function(a){g=!0;f=a});Ul.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.D(c);else if(!0===g)a.D(f);else if(!1===g)a.callback(f);else{var d=new El;a.D(d)}e&&(e(b,c),e=void 0)})};Ul.prototype.toString=function(){return"Atomic"+Ul.m.toString.call(this)};function Vl(a,b,c,d){this.j=a;this.h=b;this.g=c;this.Ya=d;this.i=null}Vl.prototype.logger=L("ydn.db.tr.DbOperator");Vl.prototype.abort=function(){this.g.abort()};function W(a){a.i||(a.i=a.j.J());return a.i}Vl.prototype.O=function(){return this.j};
function Wl(a,b){var c=a.O(),d=b instanceof Xl?b:Yl(b),e=b.name,f=X(c.h,e);if(0==Zl(d,f).length)bc(!1);else if(f=f?"update":"add",c.h instanceof $l)am(c.h,d),c.i?(c.i.close(),c.i=null,bm(c)):bc(!1);else throw new Mi("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}Vl.prototype.toString=function(){return"TxStorage:"+this.O().getName()};function cm(a,b,c,d){Vl.call(this,a,b,c,d)}A(cm,Vl);h=cm.prototype;h.logger=L("ydn.db.crud.DbOperator");
h.count=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(t(c)||t(b))throw new G("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!dm(this.h,f[l]))throw new G('store name "'+f[l]+'" at '+l+" not found.");P(this.logger,"countStores: "+Di(f));e=this.g.request("count",f);U(e,function(){W(this).de(e,f)},this)}else if(v(a)){l=X(this.h,a);if(!l)throw new G('store name "'+a+'" not found.');if(t(d)&&!ga(d))throw new G('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(v(b))if(g=
b,y(c)){var m=Ck(c);if(m)throw new G("invalid key range: "+Ci(c)+" "+m);k=yk(c)}else{if(null!=c)throw new G("invalid key range: "+Ci(c)+" of type "+typeof c);k=null}else if(y(b)||null==b)if(y(b)){if(m=Ck(b))throw new G("invalid key range: "+Ci(b)+" "+m);k=yk(b)}else{if(null!=b)throw new G("key range must be  an object but found "+Ci(b)+" of type "+typeof b);k=null}else throw new G('invalid second argument for count "'+Ci(c)+'" of type '+typeof b);P(this.logger,"countKeyRange: "+a+" "+(g?g:"")+Di(k));
e=this.g.request("count",f);em(l,e,arguments);U(e,function(){W(this).nd(e,f[0],k,g,!!d)},this)}else throw new G("Invalid store name or store names.");else N(this.logger,"count method requires store name(s)"),l=fm(this.h),e=this.g.request("count",l),sl(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),U(e,function(){W(this).de(e,f)},this);return e};
h.get=function(a,b){var c=this,d;if(a instanceof Fl){var e=a,f=e.L(),g=X(this.h,f);if(!g){if(this.h.gb()){if(Tl(this.O()))return tl("get",void 0);d=new nl("get");this.O().Wa(function(){c.get(a,b).A(function(a){d.callback(a)},function(a){d.D(a)})});return d}throw new G("Store: "+f+" not found.");}var k=e.C();P(this.logger,"getByKey: "+f+":"+k);d=this.g.request("get:key",[f]);em(g,d,arguments,void 0,this);U(d,function(){W(this).me(d,f,k)},this)}else if(v(a)&&t(b)){var l=a,g=X(this.h,l);if(!g){if(this.h.gb()){if(Tl(this.O()))return tl("get",
void 0);d=new nl("get");this.O().Wa(function(){c.get(a,b).A(function(a){d.callback(a)},function(a){d.D(a)})});return d}throw new G('Store name "'+l+'" not found.');}var m=b;P(this.logger,"getById: "+l+":"+m);d=this.g.request("get",[l]);em(g,d,arguments,void 0,this);U(d,function(){W(this).me(d,l,m)},this)}else throw new G("get require valid input arguments.");return d};
h.keys=function(a,b,c,d,e,f,g){var k,l,m=null,n=!1,p=!1,r=a,s=X(this.h,r);if(!v(r))throw new G("store name must be a string, but "+r+" of type "+typeof r+" is not.");if(!this.h.gb()){if(!s)throw new G('store name "'+r+'" not found.');if(v(b)&&!al(s,b))throw new G('index "'+b+'" not found in store "'+r+'".');}if(this.h.gb()&&!s)return tl("keys",[]);var w;if(v(b)){var x=b,H=Ck(c);if(H)throw new G("invalid key range: "+c+" "+H);m=yk(c);if(ha(d))k=d;else{if(t(d))throw new G("limit must be a number");
k=100}if(ha(e))l=e;else{if(t(e))throw new G("offset must be a number");l=0}if(t(f))if(ga(f))n=f;else throw new G("reverse must be a boolean");if(t(g))if(ga(g))p=g;else throw new G("unique must be a boolean");P(this.logger,"keysByIndexKeyRange: "+r);w=this.g.request("keys:iter:index",[r]);em(s,w,arguments);U(w,function(){W(this).list(w,2,r,x,m,k,l,n,p)},this)}else{if(y(b)){if(H=Ck(b))throw new G("invalid key range: "+Ci(b)+" "+H);m=yk(b)}else{if(null!=b)throw new G("invalid key range: "+Ci(b)+" of type "+
typeof b);m=null}if(ha(c))k=c;else{if(t(c))throw new G("limit must be a number");k=100}if(ha(d))l=d;else{if(t(d))throw new G("offset must be a number");l=0}if(t(e))if(ga(e))n=e;else throw new G("reverse must be a boolean");P(this.logger,"keysByKeyRange: "+r);w=this.g.request("keys",[r]);em(s,w,arguments);U(w,function(){W(this).list(w,2,r,null,m,k,l,n,!1)},this)}return w};
h.values=function(a,b,c,d,e,f,g){var k=this,l,m,n,p=!1,r=!1;if(v(a)){var s=a,w=X(this.h,s);if(!w){if(this.h.gb()){if(Tl(this.O()))return tl("values",[]);l=new nl("values");this.O().Wa(function(){k.values(a,b,c,d,e,f).A(function(a){l.callback(a)},function(a){l.D(a)})});return l}throw new Al(s);}if(u(b)){if(t(c)||t(d))throw new G("too many input arguments");var x=b;P(this.logger,"listByIds: "+s+" "+x.length+" ids");l=this.g.request("values:array",[s]);em(w,l,arguments,void 0,this);U(l,function(){W(this).eg(l,
s,x)},this)}else if(v(b)){var H=b;if(!gm(w,H))throw new G('index "'+H+'" not found in store "'+s+'"');var D=Ck(c);if(D)throw new G("invalid key range: "+c+" "+D);var I=yk(c);if(t(d))if(ha(d))m=d;else throw new G("limit must be a number.");else m=100;if(t(e))if(ha(e))n=e;else throw new G("offset must be a number.");else n=0;if(ga(f))p=f;else if(t(f))throw new G("reverse must be a boolean, but "+f);if(t(g))if(ga(g))r=g;else throw new G("unique must be a boolean");P(this.logger,"listByIndexKeyRange: "+
s+":"+H);l=this.g.request("values:iter:index",[s]);em(w,l,arguments);U(l,function(){W(this).list(l,4,s,H,I,m,n,p,r)},this)}else{I=null;if(y(b)){if(D=Ck(b))throw new G("invalid key range: "+b+" "+D);I=yk(b)}else if(null!=b)throw new G('expect key range object, but found "'+Ci(b)+'" of type '+typeof b);if(t(c))if(ha(c))m=c;else throw new G("limit must be a number, but "+c+" is "+typeof c);else m=100;if(t(d))if(ha(d))n=d;else throw new G("offset must be a number, but "+d+" is "+typeof d);else n=0;if(t(e))if(ga(e))p=
e;else throw new G("reverse must be a boolean, but "+e+" is "+typeof e);P(this.logger,(I?"listByKeyRange: ":"listByStore: ")+s);l=this.g.request("values",[s]);em(w,l,arguments);U(l,function(){W(this).list(l,4,s,null,I,m,n,p,!1)},this)}}else if(u(a))if(a[0]instanceof Fl){for(var w=[],S=a,D=0;D<S.length;D++){var za=S[D].L();if(!dm(this.h,za)){if(this.h.gb())return w=[],w[S.length-1]=void 0,tl("get",w);throw new G("Store: "+za+" not found.");}Db(w,za)||w.push(za)}P(this.logger,"listByKeys: "+Di(w)+" "+
S.length+" keys");l=this.g.request("values:keys",w);U(l,function(){W(this).Be(l,S)},this)}else throw new G("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new G("first argument "+a+" is invalid.");return l};
h.list=function(a,b,c,d,e,f,g,k,l){var m=X(this.h,b);if(!m){if(this.h.gb())return tl("get",[]);throw new Al(b);}var n;if(c&&!gm(m,c))throw new G('index "'+c+'" not found in store "'+b+'"');if(m=Ck(d))throw new G("invalid key range: "+d+" "+m);var p=yk(d),r=100;if(ha(e))r=e;else if(null!=e)throw new G('limit must be a number but "'+e+'" of type '+typeof e+" found.");var s=0;if(ha(f))s=f;else if(null!=f)throw new G('offset must be a number but "'+f+'" of type '+typeof f+" found.");var w=!1;if(ga(g))w=
g;else if(null!=g)throw new G('reverse must be a boolean but "'+g+'" of type '+typeof g+" found.");var x=!1;if(ga(k))x=k;else if(null!=k)throw new G('unique must be a boolean but "'+k+'" of type '+typeof k+" found.");if(s&&l&&t(l[0]))throw new G("offset must not given when initial cursor position is defined");P(this.logger,a+": "+b+":"+c);n=this.g.request("values:iter:index",[b]);U(n,function(){W(this).list(n,a,b,c||null,p,r,s,w,x,l)},this);return n};
h.add=function(a,b,c){var d=v(a)?a:y(a)?a.name:void 0;if(!v(d))throw new G("store name "+d+" must be a string, but "+typeof d);var e=X(this.h,d);if(!e){if(!this.h.gb())throw new G('store name "'+d+'" not found.');e=Yl(y(a)?a:{name:d});P(this.logger,"Adding object store: "+d);Wl(this,e)}else if(this.h.gb()&&y(a)&&(a=Yl(a),a=Zl(e,a)))throw new vd(a);var f;if(!e)throw new G('store name "'+d+'" not found.');if(v(e.keyPath)&&t(c))throw new G("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.autoIncrement&&!t(c))throw new G("out-of-line key must be provided.");if(u(b)){P(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)hm(e,b[a]);f=this.g.request("add:array",[d],Wk);U(f,function(){W(this).vb(f,!1,!1,d,b,c)},this);e.pc&&f.B(function(a){a=new im(jm,this.O(),e.getName(),a,b);this.O().Za(a)},this)}else if(y(b))a="store: "+d+" key: "+km(e,b,c),P(this.logger,"addObject: "+a),hm(e,b),f=this.g.request("add",[d],Wk),U(f,function(){W(this).vb(f,!1,
!0,d,[b],[c])},this),e.pc&&f.B(function(a){a=new lm(jm,this.O(),e.getName(),a,b);this.O().Za(a)},this);else throw new G("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function mm(a,b){var c=v(b)?b:y(b)?b.name:void 0;if(!v(c))throw new G("store name must be a string");var d=X(a.h,c);if(!d){if(!a.h.gb())throw new Al(c);d=Yl(y(b)?b:{name:c});P(a.logger,"Adding object store: "+c);Wl(a,d)}else if(a.h.gb()&&y(b)){var e=Yl(b);if(e=Zl(d,e))throw new vd(e);}if(!d)throw new Al(c);return d}h.load=function(a,b,c){var d=c||",",e=mm(this,a).getName();a=this.g.request("load",[e]);var f=this;this.g.lc(a,function(a,c,l){W(f).og(a,c,l,e,b,d)},[e],Wk);return a};
h.search=function(a){var b=nm(a);O(this.logger,"query "+a);var c=this.g.request("search",b,Vk);U(c,function(){var b=W(this);om(a,function(e,f,g,k){var l=pl(c);b.list(l,4,e,f,yk(g),100,0,!1,!1);l.ba(function(b){var d=null;b instanceof Array||(d=b,b=[]);for(var e=0;e<b.length;e++){var f;f=b[e];var g=f.id,g=v(g)?Nk(g):g,k=g[3];(f=1==this.type&&k!=this.value?null:new pm(this,g[0],g[2],g[1],k,f.k,f.loc))&&a.j.push(f)}a.i--;b=0==a.i?!1:a.h[a.h.length-1].l===this.l?!0:null;!0===b?re(c,a):!1===b&&c.callback(qm(a));
if(d)throw d;},k)})},this);return c};
h.put=function(a,b,c){var d,e=this;if(a instanceof Fl){var f=a,g=f.L(),k=X(this.h,g);if(!k)throw new G('store "'+g+'" not found.');if(k.keyPath){var l=km(k,b);if(null!=l){if(0!=Fk(l,f.C()))throw new G("Inline key must be "+f+" but "+l+" found.");}else rm(k,b,f.C());return this.put(g,b)}return this.put(g,b,f.C())}if(u(a)){if(t(c))throw new G("too many arguments");var m=a;if(!t(b))throw new G("record values required");for(var n=b,f=[],g=0,k=m.length;g<k;g++){l=m[g].L();-1==ub(f,l)&&f.push(l);var p=
X(this.h,l);if(!p)throw new G('store "'+l+'" not found.');p.keyPath&&rm(p,n[g],m[g].C())}P(this.logger,"putByKeys: to "+Di(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)hm(p,n[g]);d=this.g.request("put:keys",f,Wk);em(p,d,arguments);U(d,function(){W(e).Je(d,n,m)},this)}else if(v(a)||y(a)){var p=mm(this,a),r=p.getName();if(p.keyPath&&t(c))throw new G("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.autoIncrement&&!t(c))throw new G("out-of-line key must be provided.");
if(u(b)){var s=b,w=c;P(this.logger,"putObjects: "+r+" "+s.length+" objects");for(g=0;g<s.length;g++)hm(p,s[g]);d=this.g.request("put:array",[r],Wk);em(p,d,arguments);U(d,function(){W(this).vb(d,!0,!1,r,s,w)},this);p.pc&&d.B(function(a){a=new im(sm,this.O(),r,a,s);this.O().Za(a)},this)}else if(y(b)){var x=b,H=c;P(this.logger,"putObject: "+r+" "+(t(H)?H:"(without-key)"));if(t(q.Blob)&&x instanceof Blob&&p.Mc&&!p.keyPath&&0==p.indexes.length&&oc)d=new nl("put"),f=new FileReader,f.onload=function(a){var b=
a.target.result,c=e.g.request("put",[r],Wk);em(p,c,[r,x,H]);U(c,function(){W(e).vb(c,!0,!0,r,[b],[H])},this);c.A(function(a){d.callback(a)},function(a){d.D(a)})},f.onerror=function(a){d.D(a)},f.onabort=function(a){d.D(a)},f.readAsDataURL(x);else{hm(p,x);d=this.g.request("put",[r],Wk);var D=[r,x,H];em(p,d,D);U(d,function(){var a=t(H)?[D[2]]:void 0;W(e).vb(d,!0,!0,r,[D[1]],a)},this)}p.pc&&d.B(function(a){a=new lm(sm,this.O(),r,a,x);this.O().Za(a)},this)}else throw new G("put record value must be Object or array of Objects");
}else throw new G("the first argument of put must be store name, store schema or array of keys.");return d};
function tm(a,b,c,d){var e=a.Ya,f,g;if(v(b)){var k=X(a.h,b);if(k){if(!k.keyPath&&!k.autoIncrement&&null==d)throw new G('key required for store "'+b+'"');}else throw new Al(b);for(var l=0;l<c.length;l++)hm(k,c[l]);f=[b]}else{g=b;f=[];for(var l=0,m=g.length;l<m;l++){var n=g[l].L(),k=X(a.h,n);-1==ub(f,n)&&f.push(n);if(!k)throw new Al(n);hm(k,c[l])}}var p;v(b)?(k=X(a.h,b),p=e.request("put:array",f,Wk),U(p,function(){W(this).vb(p,!0,!1,b,c,d)},a)):(p=e.request("put:keys",f,Wk),U(p,function(){W(this).Je(p,
c,g)},a));return p}function um(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].L();-1==ub(c,f)&&c.push(f);if(!dm(a.h,f))throw new Al(f);}var g=a.Ya.request("rm:keys",c,Wk);U(g,function(){W(this).Le(g,b)},a);return g}function vm(a,b,c){var d=a.Ya.request("rm:iter",[b],Wk);U(d,function(){W(this).Gd(d,b,c||null)},a);return d}
function wm(a,b,c,d,e,f,g){f=f||100;var k,l=g||0;if(g=X(a.h,b)){if(c&&!gm(g,c))throw new Al('index "'+c+'" in store "'+b+'"');}else throw new Al(b);var m=yk(d);v(c)?(k=a.Ya.request("values:iter:index",[b]),U(k,function(){W(this).list(k,4,b,c,m,f,l,e,!1)},a)):(k=a.Ya.request("values",[b]),U(k,function(){W(this).list(k,4,b,null,m,f,l,e,!1)},a));return k}
function xm(a,b){var c=[],d=b.length;if(0==d)return tl("keys",[]);for(var e=0;e<d;e++){var f=b[e].L();-1==ub(c,f)&&c.push(f);if(!dm(a.h,f))throw new Al(f);}var g=a.Ya.request("keys",c);U(g,function(){W(a).Be(g,b)},a);return g}
function ym(a,b,c,d,e,f,g,k){var l;e=e||100;var m=X(a.h,b);if(m){if(c&&!gm(m,c))throw new Al('index "'+c+'" in store "'+b+'"');}else throw new Al(b);v(c)?(l=a.Ya.request("keys:iter:index",[b]),U(l,function(){W(this).list(l,2,b,c,d,e,f,g,k)},a)):(l=a.Ya.request("keys",[b]),U(l,function(){W(this).list(l,2,b,null,d,e,f,g,k)},a));return l}
h.clear=function(a,b,c){if(t(c))throw new G("too many input arguments");var d;if(v(a)){c=X(this.h,a);if(!c)throw new G('store name "'+a+'" not found.');if(y(b)){var e=yk(b);if(null===e)throw new G("clear method requires a valid non-null KeyRange object.");P(this.logger,"clearByKeyRange: "+a+":"+Di(e));d=this.g.request("clear",[a],Wk);em(c,d,[a,e]);U(d,function(){W(this).nf(d,a,e)},this)}else{if(t(b))throw new G("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);P(this.logger,"clearByStore: "+a);d=this.g.request("clear",[a],Wk);U(d,function(){W(this).be(d,[a])},this)}}else if(!t(a)||u(a)&&v(a[0])){var f=a||fm(this.h);P(this.logger,"clearByStores: "+Di(f));d=this.g.request("clear",f,Wk);U(d,function(){W(this).be(d,f)},this)}else throw new G('first argument "'+a+'" is invalid.');return d};
h.remove=function(a,b,c){var d;if(v(a)){var e=X(this.h,a);if(!e)throw new G('store name "'+a+'" not found.');if(t(c))if(v(b)){var f=al(e,b);if(!f)throw new G("index: "+b+" not found in "+a);if(y(c)||null===c){var g=yk(c);P(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.g.request("rm:iter:index",[a],Wk);U(d,function(){W(this).pg(d,a,f.getName(),g)},this)}else throw new G("key range "+c+' is invalid type "'+typeof c+'".');}else throw new G('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(v(b)||ha(b)||fa(b)||b instanceof Date){P(this.logger,"removeById: "+a+":"+b);d=this.g.request("rm",[a],Wk);var k=[a,b];em(e,d,k);U(d,function(){W(this).Ke(d,a,k[1])},this);e.pc&&d.B(function(c){c=1==c?b:void 0;c=new lm(zm,this.O(),a,c,void 0);this.O().Za(c)},this)}else if(y(b))g=yk(b),P(this.logger,"removeByKeyRange: "+a+":"+Di(g)),d=this.g.request("rm:iter",[a],Wk),em(e,d,[a,g]),U(d,function(){W(this).Gd(d,a,g)},this),e.pc&&d.B(function(b){var c=[];c.length=b;b=new im(zm,
this.O(),a,c,void 0);this.O().Za(b)},this);else throw new G('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof Fl){var l=a.L(),e=X(this.h,l);d=this.g.request("rm",[l],Wk);var m=[l,a.C()];em(e,d,m);U(d,function(){W(this).Ke(d,l,m[1])},this)}else if(u(a)){c=[];for(var e=0,n=a.length;e<n;e++){if(!(a[e]instanceof Fl))throw new G("key list element at "+e+" of "+n+' must be yn.db.Key, but "'+Ci(a[e])+'" ('+ea(a[e])+") is not ydn.db.Key.");var p=a[e].L();-1==ub(c,p)&&c.push(p)}if(1>
c.length)throw new G('at least one valid key required in key list "'+Ci(a)+'"');d=this.g.request("rm:keys",c,Wk);U(d,function(){W(this).Le(d,a)},this)}else throw new G('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+Ci(a)+'" ('+ea(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.O().getName()};function Am(a,b,c,d){Vl.call(this,a,b,c,d)}A(Am,cm);h=Am.prototype;h.logger=L("ydn.db.core.DbOperator");h.get=function(a,b){if(a instanceof gl){var c=a.L(),d=X(this.h,c);if(!d)throw new G('store "'+c+'" not found.');var e=a.h;if(t(e)&&!gm(d,e))throw new G('index "'+e+'" not found in store "'+c+'".');P(this.logger,"getByIterator:"+a);var f=this.g.request("get:iter",[c]);U(f,function(){Bm(this,5,f,a,1)},this);return f}return Am.m.get.call(this,a,b)};
h.keys=function(a,b,c,d,e,f,g){if(a instanceof gl){var k=100;if(ha(b)){if(k=b,1>k)throw new G("limit must be a positive value, but "+b);}else if(t(b))throw new G("limit must be a number,  but "+b);if(t(c))throw new G("offset must not be specified");P(this.logger,"keysByIterator:"+a);var l=this.g.request("keys:iter",[a.L()]);U(l,function(){a.p?Bm(this,1,l,a,k):Bm(this,2,l,a,k)},this);return l}return Am.m.keys.call(this,a,b,c,d,e,f,g)};
h.count=function(a,b,c,d){if(a instanceof gl){if(t(b)||t(c))throw new G("too many arguments.");P(this.logger,"countIterator:"+a);var e=this.g.request("count",[a.L()]);U(e,function(){Bm(this,6,e,a)},this);return e}return Am.m.count.call(this,a,b,c,d)};
h.values=function(a,b,c,d,e,f){if(a instanceof gl){var g;if(ha(b)){if(g=b,1>g)throw new G("limit must be a positive value, but "+g);}else if(t(b))throw new G("limit must be a number, but "+b);if(t(c))throw new G("offset must not be specified");P(this.logger,"listByIterator:"+a);var k=this.g.request("values:iter",[a.L()]);U(k,function(){a.g?Bm(this,2,k,a,g):Bm(this,4,k,a,g)},this);return k}return Am.m.values.call(this,a,b,c,d,e,f)};
function Cm(a,b,c){if(!u(c))throw new G("iterators argument must be an array, but "+c+" of type "+typeof c+" found");for(var d=0;d<c.length;d++)if(!(c[d]instanceof gl))throw new G("Iterator at "+d+" must be cursor range iterator.");for(var e=[],d=0;d<c.length;d++)for(var f=c[d].stores(),g=0;g<f.length;g++)Db(e,f[g])||e.push(f[g]);P(a.logger,a+": scan for "+c.length+" iterators on "+e);d=a.g.request("scan",e);a.g.lc(d,function(d,e,f){function g(b){for(var c=0;c<I.length;c++)el(I[c]);Eb(I);P(a.logger,
r+" error");f(b,!0)}function p(d,e){if(s)throw new Li;S++;var g=S===w,k=x[d],l=c[k],n=I[k],k=n.ka(),n=n.T();H[d]=e;D[d]=l.p?l.g?k:n:l.g?e:n;if(g){var p;p=b(H,D);g=[];l=[];k=[];n=[];if(u(p))for(var M=0;M<p.length;M++)!0===p[M]?k[M]=1:!1===p[M]?n[M]=!0:l[M]=p[M];else if(null===p)g=[];else if(t(p))if(y(p)){g=["advance","continue","continuePrimary","restart"];for(M in p)if(!Db(g,M))throw new xd('Unknown attribute "'+M+'" in cursor advancement object');g=p.continuePrimary||[];l=p["continue"]||[];k=p.advance||
[];n=p.restart||[]}else throw new xd("scan callback output");else for(g=[],M=0;M<c.length;M++)t(x[M])&&(k[M]=1);for(M=S=p=0;M<c.length;M++)null!=g[M]||t(l[M])||null!=n[M]||null!=k[M]||S++;for(M=0;M<c.length;M++)if(null!=g[M]||t(l[M])||null!=n[M]||null!=k[M]){var xk=x[M];if(!t(xk))throw new Ni(M+" is not an iterator.");var xk=c[xk],af=I[M];if(null==H[M]){var zo=M+"/"+c.length;if(null!=k[M])throw new Oi(af+" "+zo+" must not advance "+k[M]+" steps");if(t(l[M]))throw new Oi(af+" "+zo+" must not continue to key "+
l[M]);if(null!=g[M])throw new Oi(af+" "+zo+" must not continue to primary key "+g[M]);}H[M]=void 0;D[M]=void 0;if(null!=n[M])af.restart();else if(t(l[M]))af.oc(l[M]);else if(null!=g[M])af.md(g[M]);else if(null!=k[M])af.advance(1);else throw new Li(xk+": has no action");p++}if(0==p){for(M=0;M<I.length;M++)el(I[M]);s=!0;Eb(I);P(a.logger,"success "+r);f(void 0)}}}var r=e+" "+a+" scanning";O(a.logger,r);var s=!1,w,x=[],H=[],D=[],I=[],S=0;(function(){for(var b=0,f=0;f<c.length;f++){var m=c[f],r=[W(a).h(d,
e,m.L())],m=m.load(r);m.N=g;m.J=pa(p,b);I[f]=m;x[b]=f;b++}w=c.length})()},e,Vk);return d}
h.open=function(a,b,c,d){if(!(b instanceof gl))throw new G("Second argument must be cursor range iterator.");for(var e=b.stores(),f=0;f<e.length;f++)if(!X(this.h,e[f]))throw new G('Store "'+e[f]+'" not found.');c=c||Vk;var g=this,k=this.g.request("open",b.stores(),c);P(this.logger,"open:"+c+" "+b);U(k,function(c){var e=V(k);P(g.logger,e+" iterating "+b);for(var f=b.stores(),p=[],r=0;r<f.length;r++)p[r]=W(g).h(c,e,f[r]);var s=b.load(p);s.N=function(a){T(k,a,!0)};s.J=function(b){null!=b?(b=a.call(d,
s),!0===b?s.restart():y(b)?!0===b.restart?s.restart(b["continue"],b.continuePrimary):null!=b["continue"]?s.oc(b["continue"]):null!=b.continuePrimary?s.md(b.continuePrimary):(el(s),T(k,void 0)):null===b?(el(s),T(k,void 0)):null!=b?s.oc(b):s.advance(1)):(el(s),T(k,void 0))}},this);return k};
h.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new G('Store "'+e+'" not found.');e=this.g.request("map",d);O(this.logger,"map:"+a);this.g.lc(e,function(d,e,f){O(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=W(c).h(d,e,m[p]);var r=a.load(n);r.N=function(a){f(a,!1)};r.J=function(c){if(null!=c){var d;a.p?a.g?d=c:d=r.ka():a.g?d=c:d=r.T();b(d);r.advance(1)}else f(void 0),b=null}},d,Vk);return e};
function Bm(a,b,c,d,e){var f=[],g=c.g,k=V(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);P(a.logger,l);for(var m=W(a),n=[],p=d.stores(),r=0;r<p.length;r++)n[r]=m.h(g,k,p[r]);var s=d.load(n);s.N=function(a){el(s);T(c,a,!0)};var w=0,x=!1;s.J=function(d){x||(O(a.logger,l+" starting"),x=!0);null!=d?(s.ka(),w++,1==b?f.push(d):2==b?f.push(s.ka()):3==b?f.push([d,s.ka()]):6!=b&&f.push(s.T()),5==b?(el(s),T(c,f[0])):6==b||!t(e)||w<e?s.oc():(P(a.logger,"success:"+l+" yields "+f.length+" records"),el(s),
T(c,f))):(P(a.logger,"success:"+l+" yields "+f.length+" records"),el(s),T(c,5==b?f[0]:6==b?w:f))}};var jm="created",zm="deleted",sm="updated";function Dm(a,b){F.call(this,a,b)}A(Dm,F);Dm.prototype.L=function(){return this.V};function Em(a,b,c){F.call(this,a,b);this.version=c}A(Em,Dm);Em.prototype.name="ReadyEvent";Em.prototype.version=NaN;function Fm(a,b,c){F.call(this,c||"error",a);this.error=b}A(Fm,Dm);Fm.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};Fm.prototype.name="ErrorEvent";Fm.prototype.error=null;function Gm(a,b){Fm.call(this,a,b,"fail")}A(Gm,Fm);
Gm.prototype.name="FailEvent";function lm(a,b,c,d,e){F.call(this,a,b);this.V=c;this.key=d;this.value=e}A(lm,Dm);lm.prototype.name="RecordEvent";lm.prototype.T=function(){return this.value};function im(a,b,c,d,e){F.call(this,a,b);this.V=c;this.keys=d;this.values=e}A(im,Dm);im.prototype.name="StoreEvent";im.prototype.Ka=function(){return this.keys};im.prototype.Da=function(){return this.values};function Hm(a,b,c,d,e,f){t(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!v(a)&&!fa(a))throw new G("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.o=fa(this.keyPath);this.h=e;this.type=Im(b);if(t(b)){if(!t(this.type))throw new G("type invalid in index: "+this.h);if(u(this.keyPath))throw new G('composite key for store "'+this.h+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.p=
v(this.type)?this.type:Jm;this.j=v(e)?e:u(a)?this.keyPath.join(","):a;this.i=Pa(this.j);this.g=this.o?null:this.keyPath.split(".");this.l=f||null}function Km(a,b){if(null!=b){if(fa(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=Hk(b,a.keyPath[d]);c[d]=f}return c}return Hk(b,a.keyPath)}}function Lm(a,b,c){for(var d=0;d<a.g.length;d++)d==a.g.length-1?b[a.g[d]]=c:y(b[a.g[d]])||(b[a.g[d]]={})}var Jm="TEXT";
function Gk(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:Kk(a)}function Mm(a,b){return"DATE"==b?new Date(a):t(b)?a:Nk(a)}var Nm=["BLOB","DATE","INTEGER","NUMERIC",Jm];function Im(a){if(v(a))return a=ub(Nm,a),Nm[a]}h=Hm.prototype;h.getName=function(){return this.h};h.toJSON=function(){return{name:this.h,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};
h.clone=function(){var a=u(this.keyPath)?Hb(this.keyPath):this.keyPath;return new Hm(a,this.type,this.unique,this.multiEntry,this.h,this.l)};function Om(a,b){return null!=a||null!=b?null!=a?null!=b?fa(a)&&fa(b)?Mb(a,b)?null:"expect: "+a+", but: "+b:Pm(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}
h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?Hb(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new Hm(b,c,this.unique,this.multiEntry,a.h)};function Qm(a,b){a.l=b}h.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.g&&1<this.g.length&&(a+="Compound");return a+"Index:"+this.h};function Xl(a,b,c,d,e,f,g,k){if(!v(a))throw new G("store name must be a string");this.h=a;this.keyPath=t(b)?b:null;this.p=fa(this.keyPath);if(null!==this.keyPath&&!v(this.keyPath)&&!this.p)throw new G("keyPath must be a string or array");if(null!=c&&!ga(c))throw new G('invalid autoIncrement value in store "'+a+'"');this.autoIncrement=!!c;var l;if(null!=d){l=Im(d);if(!t(l))throw new G('type "'+d+'" for primary key in store "'+this.h+'" is invalid.');if(this.p)throw new G('composite key for store "'+
this.h+'" must not specified type');}this.type=null!=l?l:this.autoIncrement?"INTEGER":void 0;this.l=v(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.pc=!!f;this.Mc=!!g;this.M=v(this.type)?this.type:Jm;this.j=u(this.keyPath)?this.keyPath.join(","):v(this.keyPath)?this.keyPath:"_ROWID_";this.i=Pa(this.j);if(this.t=!!k){if(this.keyPath)throw new G('encrypted store "'+this.h+'" must not use inline key');if(this.autoIncrement)throw new G('encrypted store "'+this.h+'" must not use key generator');
}this.o=[]}h=Xl.prototype;h.pc=!1;h.Mc=!1;h.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.h,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function Yl(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==ub(b,c))throw new G('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==ub(f,g))throw new G("Unknown field: "+g+" in "+Di(e));e=new Hm(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Xl(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Rm(a,b,c,d,e,f,g){a=Sm(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Tc;a.ia&&(b+=" WHERE "+a.ia);a.group&&(b+=" GROUP BY "+a.group);a.gc&&(b+=" ORDER BY "+a.gc);return b}
function Sm(a,b,c,d,e,f,g){var k={select:"",Tc:"",ia:"",group:"",gc:""},l=a.j,m=a.i,n=null;d!==l&&v(d)&&(n=al(a,d));var p=!!n,r=d||l,s=Pa(r),w=p?n.type:a.type,x=p&&n.multiEntry;k.Tc=Tm(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=g?"DISTINCT ":"";l=[];x?(x=Pa("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+x+"."+s+")":3===c||1===c||2===c?"DISTINCT "+Tm(a)+"."+m+", "+x+"."+s+" AS "+r:"DISTINCT "+Tm(a)+".*, "+
x+"."+s+" AS "+r,k.Tc=x+" INNER JOIN "+Tm(a)+" USING ("+m+")",null!=e&&(Ek(x+"."+s,w,e,l,b),0<l.length&&(k.ia=k.ia?k.ia+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(Ek(s,w,e,l,b),0<l.length&&(k.ia=k.ia?k.ia+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&g&&(k.group=s);a=f?"DESC":"ASC";k.gc=s+" "+a;p&&(k.gc+=", "+m+" "+a);return k}
function Um(a,b,c,d,e,f,g,k,l){var m,n,p,r;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,r=e.upperOpen,f?null!=n?(e=Fk(k,n),-1==e?(n=k,r=l):0==e&&(r=l||r)):(n=k,r=l):null!=m?(e=Fk(k,m),1==e?(m=k,p=l):0==e&&(p=l||p)):(m=k,p=l)):f?(n=k,r=l):(m=k,p=l);e=new R(m,n,!!p,!!r);d=d?al(a,d):null;b=Sm(a,c,b,d?d.j:a.j,e,f,g);b="SELECT "+b.select+" FROM "+b.Tc+(b.ia?" WHERE "+b.ia:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.gc;d&&(b+=", "+a.i+(f?"DESC":"ASC"));return b}
function Vm(a,b,c,d,e,f,g,k,l,m){var n=al(a,d),p=n.j;d=n.i;var r=a.i,s=l?" <":" >",s=g?s+" ":s+"= ";g=Gk(f,n.type);k=Gk(k,a.type);n="";e?(a=Sm(a,c,b,p,e,l,m),a.ia+=" AND ",n=d+s+"?",c.push(g)):(e=l?R.upperBound(f,!0):R.lowerBound(f,!0),a=Sm(a,c,b,p,e,l,m),n=a.ia,a.ia="");a.ia+="("+n+" OR ("+d+" = ? AND "+r+s+"?))";c.push(g);c.push(k);return"SELECT "+a.select+" FROM "+a.Tc+" WHERE "+a.ia+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.gc}h.clone=function(){return Yl(this.toJSON())};
h.index=function(a){return this.indexes[a]||null};function al(a,b){return Bb(a.indexes,function(a){return a.getName()==b})}function $k(a,b){for(var c=0;c<a.indexes.length;c++)if(!Om(a.indexes[c].keyPath,b))return a.indexes[c];return null}function gm(a,b){return b===a.keyPath?!0:zb(a.indexes,function(a){return a.getName()==b})}function Tm(a){return Pa(a.h)}
function Wm(a,b){if(!b)return a;var c=a.autoIncrement,d=u(a.keyPath)?Hb(a.keyPath):a.keyPath,e=a.type,f=yb(a.indexes,function(a){return a.clone()});t(b.type)||"TEXT"!=e||(e=void 0);u(b.keyPath)&&v(d)&&d==b.keyPath.join(",")&&(d=Hb(b.keyPath));for(var g=0,k=b.indexes.length;g<k;g++)if(b.indexes[g].o)for(var l=b.indexes[g].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.indexes[g].clone();break}for(g=0;g<f.length;g++)(k=al(b,f[g].getName()))&&(f[g]=f[g].hint(k));return new Xl(b.h,
d,c,e,f)}h.getName=function(){return this.h};function Xm(a){return!!a.keyPath}function km(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.p){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(Hk(b,a.keyPath[d]));return c}if(a.keyPath)return Nc(b,a.l)}}function rm(a,b,c){for(var d=0;d<a.l.length;d++){var e=a.l[d];if(d==a.l.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Ym(a,b,c){var d=[],e=[];c=t(c)?c:km(a,b);t(c)&&(e.push(a.i),d.push(Gk(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var k=Km(g,b);null!=k&&(d.push(Gk(k,g.type)),e.push(g.i))}}a.Mc?a.Mc&&!a.keyPath&&0==a.indexes.length&&(v(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(Di(b)),e.push("_default_")):(d.push(Di(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Yg:e,Jh:a,values:d,key:c}}
function Zl(a,b){if(!b)return"missing store: "+a.h;if(a.h!=b.h)return"store name, expect: "+a.h+", but: "+b.h;var c=Om(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.autoIncrement)&&t(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(fa(a.type)?!Mb(a.type,b.type):a.type!=b.type))return"data type, expect:  "+
a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=al(b,a.indexes[c].getName()),e;e=a.indexes[c];if(d)if(e.h!=d.h)e="name, expect: "+e.h+", but: "+d.h;else{var f=Om(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(fa(e.type)?!Mb(e.type,d.type):e.type!=d.type)?
"data type, expect: "+e.type+", but: "+d.type:""}else e="no index for "+e.h;if(0<e.length)return'index "'+a.indexes[c].getName()+'" '+e}return""}function hm(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.l){var f=d.l(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.g.length-1;g++)y(e[d.g[g]])||(e[d.g[g]]={});e[d.g[d.g.length-1]]=f}}}}function Zm(a,b){a.o.push(b)}
function em(a,b,c,d,e){for(var f=0;f<a.o.length;f++)d!==f&&a.o[f].call(e,b,c)}h.toString=function(){return"Store:"+this.h+"["+this.indexes.length+"index]"};function $m(a,b,c){if(!a||ya(a))throw new G("store_name must be provided for primary full text index");if(!b||ya(b))throw new G("index_name must be provided for primary full text index");this.V=a;this.g=b;this.h=c||1}$m.prototype.L=function(){return this.V};function an(a,b,c,d){this.name=a;this.indexes=b;this.lang=c||"";if(-1==["","en","fr"].indexOf(this.lang))throw new G('Unsupported lang "'+c+" for full text search index "+a);this.h=d||null;this.g=null}an.prototype.getName=function(){return this.name};an.prototype.count=function(){return this.indexes.length};an.prototype.index=function(a){return this.indexes[a]};function bn(a,b,c){return Bb(a.indexes,function(a){return a.L()==b&&a.g==c})}
function cn(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==ub(b,c))throw new G("Unknown field: "+c+" in "+Di(a));if(!u(a.sources))throw new G("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==ub(b,c))throw new G("Unknown field: "+c+" in "+Ci(a));return new $m(a.storeName,a.keyPath,a.weight)});return new an(a.name,
b,a.lang)};function dn(a,b){var c,d,e=b;if(y(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==ub(c,f))throw new G("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new G("stores must be array");for(f=0;f<g.length;f++){var k=Yl(g[f]);if(-1!=Cb(e,function(a){return a.name==k.getName()}))throw new G('duplicate store name "'+k.getName()+'".');e.push(k)}}else v(a)?c=0==a.length?void 0:parseFloat(a):ha(a)&&(c=a);if(t(c)){if(!ha(c)||0>
c)throw new G("Invalid version: "+c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!u(b)||0<b.length&&!(b[0]instanceof Xl)))throw new G("stores");this.version=c;this.Dc=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=cn(d.fullTextCatalogs[f]),c[f]=e,X(this,e.getName())||(g=[new Hm("k",Jm),new Hm("v",Jm)],e=new Xl(e.getName(),"id",!1,void 0,g,!1,!1,!1),this.stores.push(e));this.g=c}h=dn.prototype;
h.toJSON=function(){var a=yb(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};h.Dc=!1;h.gb=function(){return!1};function fm(a){return yb(a.stores,function(a){return a.getName()})}h.store=function(a){return this.stores[a]||null};h.count=function(){return this.stores.length};function X(a,b){return Bb(a.stores,function(a){return a.getName()==b})}function dm(a,b){return zb(a.stores,function(a){return a.getName()==b})}
function en(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=X(b,a.stores[e].getName());if(f){c&&(f=Wm(f,a.stores[e]));if(d)for(var g=f,k=a.stores[e],l=0;l<k.indexes.length;l++){var m=k.indexes[l];gm(g,m.getName())||"BLOB"!=m.type||(m=new Hm(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),g.indexes.push(m))}f=Zl(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""}function fn(a,b){return Bb(a.g,function(a){return a.getName()==b})};function $l(a,b){dn.call(this,a,b)}A($l,dn);$l.prototype.gb=function(){return!0};function am(a,b){a.stores.push(b)};function gn(a){return Bi(Di(a))}function Pm(a,b){var c;c=c||{};if(null!=a&&null!=b){if(fa(a)&&fa(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Bb(b,function(b){return Pm(b,a[d])}))return!1;return!0}if(fa(a))return 1==a.length&&Pm(a[0],b);if(fa(b))return 1==b.length&&Pm(b[0],a);if(y(a)&&y(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Pm(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Pm(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function hn(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function jn(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==ub(d,e))throw new G('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new G("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!Db(kn,c.mechanisms[e]))throw new G('Invalid mechanism "'+c.mechanisms[e]+'"');}this.S=c.mechanisms||kn;this.M=c.size;this.K=
t(c.connectionTimeout)?c.connectionTimeout:3E3;this.i=null;this.j=[];this.we=!1;var f;if(b instanceof dn)f=b;else if(y(b))for(c.autoSchema||!t(b.stores)?f=new $l(b):f=new dn(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=X(f,b.stores[e].name),b.stores[e].Sync&&this.Sg(d,b.stores[e].Sync);else f=new $l;this.h=f;for(e=0;e<this.h.count();e++)if(this.h.store(e).t)throw Error("encryption option must be defined");if(t(a)){if(this.i)throw new xd("Already connected with "+this.t);this.t=a;bm(this)}this.p=
null;this.o=new B}jn.prototype.logger=L("ydn.db.con.Storage");function ln(a,b,c){return(a=X(a.h,b))?gm(a,c):!1}function mn(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.i?a.i.qb(c):a.transaction(function(b){a.i.qb(c,b)},null,Vk)}return a.h?a.h.toJSON():null}jn.prototype.getName=function(){return this.t};var kn="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");h=jn.prototype;h.qf=function(){return null};
function bm(a){function b(b,e){b?(O(a.logger,a+": ready."),a.xh=NaN,d.Qd=function(b){a.Za(new Fm(a,b))},d.Ze=function(b){a.Za(new Gm(a,b));a.i=null},d.Ie=function(b){a.Za(b)},setTimeout(function(){nn(a,e);on(a)},10),c.callback(e)):(N(a.logger,a+": database connection fail "+e.name),setTimeout(function(){nn(a,new Gm(a,e));if(a.j){var b=a.logger;for(b&&b.info("Purging "+a.j.length+" transactions request.",void 0);b=a.j.shift();)b.cb&&b.cb("error",e)}},10),c.D(e))}for(var c=new B,d=null,e=a.S,f=0;f<
e.length;f++){var g=e[f].toLowerCase();if(d=a.qf(g)){d=a.qf(g);break}}null===d?(e=new Mi("No storage mechanism found."),b(!1,new Gm(a,e))):(a.init(),d.connect(a.t,a.h).A(function(){this.i=d;b(!0,new Em("ready",this,parseFloat(d.Xe())))},function(a){N(this.logger,this+": opening fail");b(!1,a)},a))}function Nl(a){if(a.i)return a.i.kd()}h.Wa=function(a,b){this.o.ba(a,b)};function nn(a,b){setTimeout(function(){a.h.Dc&&a.o.h||(b instanceof Fm?a.o.D(b.error):a.o.callback(),a.Za(b))},4)}
function Tl(a){return!!a.i&&a.i.Ye()}h.init=function(){};h.close=function(){this.i&&(this.i.close(),this.i=null,O(this.logger,this+" closed"))};h.xh=NaN;function on(a){var b=a.j.shift();b&&(O(a.logger,"pop tx queue["+(a.j.length+1)+"]"),a.transaction(b.ke,b.scopes,b.mode,b.cb));a.xh=z()}
function pn(a,b,c,d,e){O(a.logger,"push tx queue["+a.j.length+"]");a.j.push({ke:b,scopes:c,mode:d,cb:e});100<a.j.length&&0==a.j.length%100&&N(a.logger,"Transaction queue stack size is "+a.j.length+". It is too large, possibility due to incorrect usage.")}h.we=!1;
h.transaction=function(a,b,c,d){var e=b;if(v(b))e=[b];else if(null!=b)if(fa(b)){if(0==b.length)throw new G("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!v(b[f]))throw new G("store name at "+f+" must be string but found "+typeof b[f]);}else throw new G("store names must be an array");else e=null;if(this.i&&this.i.Ye()&&!this.we){var g=this,k=t(c)?c:Vk;k==Xk&&(this.we=!0);this.i.ge(function(b){a(b);a=null},e,k,function(a,b){ia(d)&&(d(a,b),d=void 0);k==Xk&&(g.we=!1);on(g)})}else pn(this,
a,e,c,d)};h.Sg=function(a){N(this.logger,"Synchronization option for "+a.getName()+" ignored.")};h.Rg=function(a){N(this.logger,"Full text indexer option for "+a.getName()+" ignored.")};h.Za=function(){};h.toString=function(){return"Storage:"+this.i};function qn(a,b,c,d){this.j=a;this.l=b;this.g=Hb(c);this.h=d;this.i=[]}qn.prototype.j=null;qn.prototype.onCompleted=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c](a,b);this.i.length=0;this.i=this.g=this.j=null};function rn(a,b,c){if(a.j)c&&a.i.push(c),b(a.j);else throw new yd("tx committed on ParallelTxExecutor");}qn.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.l+" mode:"+this.h+" scopes:"+Di(this.g)};function sn(a,b,c,d,e,f){Ll.call(this,a,b,c,d,e,f);this.i=this.h=null}A(sn,Ll);h=sn.prototype;h.logger=L("ydn.db.tr.Parallel");h.abort=function(){P(this.logger,this+": aborting");Ol(this.i)};
h.Xh=function(a,b){var c;if("multi"==this.j)a:if(c=this.h,!c.g||!c.h||b!=c.h&&(c.h!=Wk||b!=Vk)||a.length>c.g.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.j)a:if(c=this.h,c.g&&c.h&&b==c.h&&c.g.length==a.length){for(d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.j?!0:!1;return c};
h.Ic=function(a,b,c,d){function e(c){l.l++;m=new qn(c,l.l,b,k);g=l.Pa();pe(l.logger,g+" BEGIN "+Di(b)+" "+k);l.h=m;rn(l.h,a,d)}function f(a,b){pe(l.logger,g+" "+a);if(m)m.onCompleted(a,b);l.g=0}var g;this.K&&(b=this.K);this.S&&(c=this.S);var k=t(c)?c:Vk,l=this,m;if(this.h&&this.h.j&&this.Xh(b,k))rn(this.h,a,d);else{if(this.t&&this.l>=this.t)throw new xd("Exceed maximum number of transactions of "+this.t);this.O().transaction(e,b,k,f)}};
h.request=function(a,b,c,d){var e=new nl(a),f=this;this.Ic(function(a){f.g++;ol(e,a,f.Pa()+"R"+f.g)},b,c||Vk,function(a,b){ql(e);d&&d(a,b)});return e};h.lc=function(a,b,c,d,e){var f=this,g;this.Ic(function(c){f.g++;g=f.Pa()+"R"+f.g;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.i=c;g=f.Pa()+"R"+f.g;d?(P(f.logger,g+" ERROR"),a.D(b)):(P(f.logger,g+" SUCCESS"),a.callback(b));f.i=null});b=null;P(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.j+":"+this.Pa()+(this.i?"*":"")};function tn(a,b){sn.call(this,a,b,Ml)}A(tn,sn);h=tn.prototype;h.logger=L("ydn.db.tr.AtomicParallel");h.Xh=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=tn.m.request.call(this,a,b,c,function(a,b){ql(k);P(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new El;T(k,c,!0)}});sl(k,function(a,b,c){f=b;e=a;d=c});return k};
h.lc=function(a,b,c,d,e){var f,g,k=new B;k.A(function(a){g=!1;f=a},function(a){g=!0;f=a});tn.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.D(c);else if(!0===g)a.D(f);else if(!1===g)a.callback(f);else{var d=new El;a.D(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+tn.m.toString.call(this)};function un(a,b,c){jn.call(this,a,b,c);this.l=0;a=!0;b=Ml;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=vn(this,b,a);this.Ya=vn(this,"atomic",!1);this.g=this.ad(c,this.Ya)}A(un,jn);un.prototype.l=0;un.prototype.ad=function(a,b){return new Vl(this,this.h,a,b)};
function vn(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==Ml)return new Pl(a,a.l++,b,d,e,f);if("atomic"==b)return new Ul(a,a.l++);throw new G('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==Ml)return new sn(a,a.l++,b,d,e,f);if("atomic"==b)return new tn(a,a.l++);throw new G('Invalid requestType "'+b+'"');}
un.prototype.P=function(a,b,c){if(3<arguments.length)throw new G("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.l++;var d=b||fm(this.h),e=Vk;if(c)if("readwrite"==c)e=Wk;else if("readonly"!=c)throw new G('Invalid transaction mode "'+c+'"');var f=vn(this,"all",!1,d,e,1),g=this.ad(f,this.Ya),k=new nl("run"),l=this;f.Ic(function(b){O(l.logger,"executing run in transaction on "+f);ol(k,b,f.Pa()+"R0");a(g)},d,e,function(a){ql(k);T(k,f.l,"complete"!==
a)});return k};function wn(a,b,c){un.call(this,a,b,c);a=this.h;for(b=0;b<a.g.length;b++){c=a.g[b];var d=X(a,c.getName());if(d){if(!gm(d,"k"))throw new G('full text index store "'+d.getName()+'" must have "keyword" index');if(!gm(d,"v"))throw new G('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new G('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new G('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=X(a,e.L());if(f)this.Rg(f,c);else throw new G('full text source store "'+e.L()+'" does not exist for full text index "'+c.getName()+'"');}}}A(wn,un);h=wn.prototype;h.init=function(){wn.m.init.call(this)};h.ad=function(a,b){return new cm(this,this.h,a,b)};h.add=function(a,b,c){return this.g.add(a,b,c)};h.count=function(a,b,c,d){return this.g.count(a,b,c,d)};h.get=function(a,b){return this.g.get(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.g.keys(a,b,c,d,e,f,g)};
h.values=function(a,b,c,d,e,f){return this.g.values(a,b,c,d,e,f)};h.list=function(a,b,c,d,e,f,g,k,l){return this.g.list(a,b,c,d,e,f,g,k,l)};h.load=function(a,b,c){return this.g.load(a,b,c)};h.put=function(a,b,c){return this.g.put(a,b,c)};h.clear=function(a,b,c){return this.g.clear(a,b,c)};h.remove=function(a,b,c){return this.g.remove(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Tl(this)&&(a+=" ["+Nl(this)+"]");return a};function xn(a,b,c){wn.call(this,a,b,c)}A(xn,wn);xn.prototype.ad=function(a,b){return new Am(this,this.h,a,b)};xn.prototype.open=function(a,b,c,d){return this.g.open(a,b,c,d)};function yn(a,b,c){return Cm(a.g,b,c)}xn.prototype.map=function(a,b){return this.g.map(a,b)};function zn(a,b,c,d){Zk.call(this,a,b,c,d);this.l=null}A(zn,Zk);h=zn.prototype;h.logger=L("ydn.db.core.req.IDBCursor");h.ee=function(a){(a=a.target.result)?this.wb(a.key,a.primaryKey,a.value):this.wb()};
h.openCursor=function(a,b){function c(a,b,c){p.l=n;p.l.onsuccess=oa(p.ee,p);p.wb(a,p.j?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");O(this.logger,d);var e=this.da,d=this.o.objectStore(this.V),f=v(this.jb)?d.index(this.jb):null;if(t(a))var g=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=vk(this.reverse?new R(k,a,m,g):new R(a,l,g,e));var n;this.Dd?f?n=null!=this.xb?f.openKeyCursor(e,this.xb):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.xb?d.openCursor(e,this.xb):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.xb?f.openCursor(e,this.xb):null!=e?f.openCursor(e):f.openCursor():n=null!=this.xb?d.openCursor(e,this.xb):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();bl(p,b)};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Yk.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=
b)if(Yk.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.l=n,p.l.onsuccess=oa(p.ee,p))};h.ue=function(){return!!this.l};h.update=function(a){var b=this.l.result;if(b){var c=new B;a=b.update(a);a.onsuccess=function(a){c.callback(a.target.result)};a.onerror=function(a){a.preventDefault();c.D(a)};return c}throw new zl("cursor gone");};
h.clear=function(){var a=this.l.result;if(a){var b=new B,a=a["delete"]();a.onsuccess=function(){b.callback(1)};a.onerror=function(a){a.preventDefault();b.D(a)};return b}throw new zl("cursor gone");};h.advance=function(a){var b=this.l.result;if(1==a)b["continue"]();else b.advance(a)};
h.md=function(a){var b=this.l.result,c=Yk.cmp(a,b.primaryKey);if(c!=(this.reverse?-1:1))throw new yd('continuing primary key "'+a+'" must '+(this.reverse?"lower":"higher")+' than current primary key "'+b.primaryKey+'"');var d=this;this.l.onsuccess=function(e){if(b=e.target.result)if(c=Yk.cmp(b.primaryKey,a),0==c||1==c&&!d.reverse||-1==c&&d.reverse)d.l.onsuccess=oa(d.ee,d),d.wb(b.key,d.j?b.primaryKey:void 0,b.value);else b["continue"]();else d.l.onsuccess=oa(d.ee,d),d.wb()};b["continue"]()};
h.oc=function(a){var b=this.l.result;if(null!=a)b["continue"](a);else b["continue"]()};h.I=function(){zn.m.I.call(this);this.l=null};h.toString=function(){return"IDB"+zn.m.toString.call(this)};function An(a,b,c,d,e,f){B.call(this,e,f);this.p=a;this.g=[];this.J=!!b;this.Ja=!!c;this.Qa=!!d;for(b=this.aa=0;b<a.length;b++)a[b].A(oa(this.S,this,b,!0),oa(this.S,this,b,!1));0!=a.length||this.J||this.callback(this.g)}A(An,B);An.prototype.S=function(a,b,c){this.aa++;this.g[a]=[b,c];this.h||(this.J&&b?this.callback([a,c]):this.Ja&&!b?this.D(c):this.aa==this.p.length&&this.callback(this.g));this.Qa&&!b&&(c=null);return c};An.prototype.D=function(a){An.m.D.call(this,a);for(a=0;a<this.p.length;a++)Rb(this.p[a])};
function Bn(a){return(new An(a,!1,!0)).B(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function Cn(a,b){this.g=b}A(Cn,Il);h=Cn.prototype;h.logger=L("ydn.db.crud.req.IndexedDb");h.de=function(a,b){function c(e){var f=a.g.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?T(a,d):c(e)};f.onerror=function(b){b.preventDefault();T(a,f.error,!0)}}var d=[];0==b.length?T(a,[]):c(0)};
h.vb=function(a,b,c,d,e,f){function g(s){if(null==e[s])if(O(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)T(a,k,m);else{var x=s+10;x<e.length&&g(x)}var H,x=e[s];H=f&&null!=f[s]?b?r.put(x,f[s]):r.add(x,f[s]):b?r.put(x):r.add(x);H.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?T(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))};H.onerror=function(b){l++;var f=H.error;O(n.logger,V(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+Ci(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?T(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))}}var k=[],l=0,m=!1,n=this,p=b?"put":"add",r=a.g.objectStore(d);O(this.logger,V(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)g(s);else T(a,[])};
h.Je=function(a,b,c){function d(l){var n=c[l],p=n.L(),r=a.g.objectStore(p),s;s=null===r.keyPath?r.put(b[l],n.C()):r.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?T(a,e,g):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;N(k.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+Ci(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;g=!0;c.preventDefault();f==b.length?T(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,k=this;O(this.logger,
V(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else T(a,e,g)};
h.og=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),I=0;I<p.length;I++){var S=b[I];r[I]&&(r[I]==Jm?S=Ma(S,'"'):"INTEGER"==r[I]?S=parseInt(S,10):"NUMERIC"==r[I]&&(S=parseFloat(S)));a[p[I]]=S}var za=l.put(a);za.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};za.onerror=function(a){"DataError"==a.name&&(a=new wl(k+": "+s.substring(0,70)));a.preventDefault();c(za.error,!0)}}var k=X(this.g,d),
l=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),r=[];for(a=0;a<p.length;a++){var s=al(k,p[a]);s?r[a]=s.type:p[a]==k.keyPath&&(r[a]=k.type)}n++;O(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
h.Ke=function(a,b,c){var d=a.g.objectStore(b);O(this.logger,V(a)+" clearById: "+b+" "+c);var e=d.openCursor(Bk.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){T(a,1)};c.onerror=function(){T(a,c.error,!0)}}else T(a,0)};e.onerror=function(b){b.preventDefault();T(a,e.error,!0)}};
h.Le=function(a,b){function c(k){k++;if(k>=b.length)0<g.length?T(a,g,!0):T(a,d);else{b[k].L()!=e&&(e=b[k].L(),f=a.g.objectStore(e));var l=f["delete"](b[k].C());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();g[k]=l.error;c(k)}}}var d=0,e,f;O(this.logger,V(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
h.Gd=function(a,b,c){var d=a.g.objectStore(b),e=d.count(c);O(this.logger,V(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){T(a,e)};k.onerror=function(){T(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();T(a,e.error,!0)}};h.nf=function(a,b,c){var d=a.g.objectStore(b);O(this.logger,V(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){T(a,void 0)};e.onerror=function(b){b.preventDefault();T(a,e.error,!0)}};
h.pg=function(a,b,c,d){var e=a.g.objectStore(b).index(c);O(this.logger,V(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),k=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?T(a,f,!0):T(a,k)};g.onerror=function(b){b.preventDefault();T(a,g.error,!0)}};
h.be=function(a,b){var c=b.length,d=0;O(this.logger,V(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.g.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&T(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&T(a,f.error,!0)}}};
h.me=function(a,b,c){var d=this;O(this.logger,V(a)+b+":"+c);var e=a.g.objectStore(b),f=e.get(c);f.onsuccess=function(b){O(d.logger,V(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&oc&&v(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
T(a,new Blob([m.buffer],{type:b}))}else T(a,b.target.result)};f.onerror=function(b){b.preventDefault();T(a,f.error,!0)}};
h.eg=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)T(a,e);else{var m=b+10;m<k&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?T(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();T(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.g.objectStore(b),k=c.length;O(this.logger,V(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else T(a,[])};
h.Be=function(a,b){function c(f){var k=b[f],l=a.g.objectStore(k.L()).get(k.C());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?T(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();T(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;O(this.logger,V(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else T(a,[])};
h.nd=function(a,b,c,d,e){if(d&&e)throw new xd("unique count not available in IndexedDB");e=a.g.objectStore(b);b=V(a)+" "+b+(d?":"+d:"")+(c?":"+Di(c):"");O(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){T(a,b.target.result)};f.onerror=function(b){b.preventDefault();T(a,f.error,!0)}};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=[],p=a.g.objectStore(c),r=k?l?"prevunique":"prev":l?"nextunique":"next";c=V(a)+" "+b+" "+c+(d?":"+d:"")+(e?Di(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],w=e?e.lower:void 0,x=e?e.upper:void 0,H=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=vk(k?new R(w,s,H,l):new R(s,x,l,e));c+=" starting from "+Di(m[0]);t(m[1])&&(c+=", "+Di(m[1]))}O(this.logger,c);var D;D=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,r):p.openCursor(e,
r):d?p.index(d).openCursor(e,r):p.openCursor(e,r);var I=!1;D.onsuccess=function(c){if(c=c.target.result){if(!I){if(0<g){I=!0;c.advance(g);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=Yk.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=Yk.cmp(c.primaryKey,m[1]);if(0==e){I=!0;c["continue"]();return}if(e==l)I=!0;else{c["continue"]();return}}else I=!0}else I=!0;else I=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=dl(c.key),m[1]=dl(c.primaryKey)),T(a,n)}else m&&(m[0]=void 0,m[1]=void 0),T(a,n)};D.onerror=function(b){b.preventDefault();T(a,D.error,!0)}};function Dn(a,b){this.g=b}A(Dn,Cn);Dn.prototype.logger=L("ydn.db.core.req.IndexedDb");Dn.prototype.h=function(a,b,c,d){c=X(this.g,c);return new zn(a,b,c,d)};function En(){this.g=!1}En.prototype.g=!1;En.prototype.state=function(){return this.g};function Fn(a,b,c,d){Zk.call(this,a,b,c,d);this.t=this.i=this.g=void 0;this.p=this.l=null;this.S=new En;this.Oe=this.nc=null}A(Fn,Zk);h=Fn.prototype;h.logger=L("ydn.db.core.req.SimpleCursor");h.ue=function(){return!!this.o};h.update=function(a){Gn(this.Oe,this.ka(),a);return bc()};h.advance=function(a){function b(b){d++;if(!b||d>=a)return Hn(c,b)}var c=this,d=this.l?-1:0;this.reverse?In(this.nc,b,this.l):Jn(this.nc,b,this.l)};
h.oc=function(a){if(null!=a){var b=this,c=new Kn(a),d=function(c){b.l=c;if(!c)return Hn(b,c);var d=Fk(c.value.key,a);if(b.reverse){if(1!=d)return Hn(b,c)}else if(-1!=d)return Hn(b,c)};this.reverse?In(this.nc,d,c):Jn(this.nc,d,c)}else this.advance(1)};function Ln(a){setTimeout(function(){a.S.state()?(a.S.g=!1,a.wb(a.g,a.i,a.t),Ln(a)):(a.p(),a.p=null)},4)}
function Hn(a,b){if(a.l=b){var c=b.value;if(a.da)if(a.reverse||null==a.da.upper)a.reverse&&null!=a.da.lower&&(d=Fk(c.key,a.da.lower),-1==d||0==d&&a.da.lowerOpen)&&(a.l=null);else{var d=Fk(c.key,a.da.upper);if(1==d||0==d&&a.da.upperOpen)a.l=null}if(a.l){if(a.unique&&null!=a.g&&null!=c.key&&0==Fk(a.g,c.key))return;a.g=c.key;a.i=a.j?c.ka():a.g;4==a.P&&(a.Dd?a.t=a.i:a.t=a.Oe.Ib(null,a.i))}}a.l||(a.g=void 0,a.i=void 0,a.t=void 0);return a.S.g=!0}
h.openCursor=function(a,b){var c=null;if(this.da)if(this.reverse){var d=this.j?"\uffff":void 0;null!=this.da.upper&&(c=new Kn(this.da.upper,d))}else null!=this.da.lower&&(c=new Kn(this.da.lower));null!=a&&(c=this.j?new Kn(a,b):new Kn(a));this.p=this.o.O(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==Mn(c,e))return}else if(this.da&&(!this.reverse&&this.da.lowerOpen&&null!=this.da.lower&&(e=Fk(f,this.da.lower),0==e)||this.reverse&&this.da.upperOpen&&null!=this.da.upper&&
(e=Fk(f,this.da.upper),0==e)))return;return Hn(this,b)}this.Oe=Nn(b,this.V);this.nc=On(this.Oe,this.jb);this.reverse?In(this.nc,oa(d,this),c):Jn(this.nc,oa(d,this),c);Ln(this)},this)};h.clear=function(){throw new wd;};h.md=function(){throw new wd;};h.toString=function(){return"Simple"+Fn.m.toString.call(this)};function Pn(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(Kk(void 0))));return a.join("^|")};function Kn(a,b){this.key=a;this.g=b}Kn.prototype.ka=function(){return this.g};Kn.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.g?", "+this.g+")":")")};function Mn(a,b){var c=Fk(a.key,b.key);return 0===c?null!=a.g?null!=b.g?Fk(a.g,b.g):1:null!=b.g?-1:0:c};function Qn(a){this.rb=a||Rn}function Rn(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=Qn.prototype;h.Ea=null;h.rb=null;h.Pb=null;h.Nb=null;
h.add=function(a){if(null==this.Ea)return this.Nb=this.Pb=this.Ea=new Sn(a),!0;var b=null;Tn(this,function(c){var d=null,e=this.rb(c.value,a);0<e?(d=c.left,null==c.left&&(b=new Sn(a,c),c.left=b,c==this.Pb&&(this.Pb=b))):0>e&&(d=c.right,null==c.right&&(b=new Sn(a,c),c.right=b,c==this.Nb&&(this.Nb=b)));return d});b&&(Tn(this,function(a){a.count++;return a.parent},b.parent),Un(this,b.parent));return!!b};
h.remove=function(a){var b=null;Tn(this,function(c){var d=null,e=this.rb(c.value,a);0<e?d=c.left:0>e?d=c.right:(b=c.value,Vn(this,c));return d});return b};h.clear=function(){this.Nb=this.Pb=this.Ea=null};h.contains=function(a){var b=!1;Tn(this,function(c){var d=null,e=this.rb(c.value,a);0<e?d=c.left:0>e?d=c.right:b=!0;return d});return b};
h.indexOf=function(a){var b=-1,c=0;Tn(this,function(d){var e=this.rb(d.value,a);if(0<e)return d.left;d.left&&(c+=d.left.count);if(0>e)return c++,d.right;b=c;return null});return b};h.ja=function(){return this.Ea?this.Ea.count:0};h.Da=function(){var a=[];Wn(this,function(b){a.push(b)});return a};
function Wn(a,b){if(a.Ea){var c,d=c=Xn(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Tn(a,b,c){for(c=c?c:a.Ea;c&&null!=c;)c=b.call(a,c)}
function Un(a,b){Tn(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Yn(this,a.left),Zn(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Zn(this,a.right),Yn(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Yn(a,b){$n(b)?(b.parent.left=b.right,b.right.parent=b.parent):ao(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.Ea=b.right,a.Ea.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Zn(a,b){$n(b)?(b.parent.left=b.left,b.left.parent=b.parent):ao(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.Ea=b.left,a.Ea.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Vn(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=bo(a,b.left);Tn(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Nb&&(a.Nb=d)}else{d=Xn(a,b.right);Tn(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.Pb&&(a.Pb=d)}d.count=b.count;$n(b)?b.parent.left=d:ao(b)?b.parent.right=d:a.Ea=d;Un(a,c?c:d)}else Tn(a,function(a){a.count--;return a.parent},b.parent),$n(b)?(b.parent.left=null,b==a.Pb&&(a.Pb=b.parent),Un(a,b.parent)):ao(b)?(b.parent.right=null,b==a.Nb&&(a.Nb=b.parent),Un(a,b.parent)):a.clear()}function Xn(a,b){if(!b)return a.Pb;var c=b;Tn(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function bo(a,b){if(!b)return a.Nb;var c=b;Tn(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Sn(a,b){this.value=a;this.parent=b?b:null;this.count=1}Sn.prototype.left=null;Sn.prototype.right=null;Sn.prototype.height=1;function ao(a){return!!a.parent&&a.parent.right==a}function $n(a){return!!a.parent&&a.parent.left==a};function co(a){this.rb=a||Rn}A(co,Qn);function Jn(a,b,c){if(a.Ea){var d;if(c instanceof Sn)d=c;else if(c){if(Tn(a,function(a){var b=null;0<this.rb(a.value,c)?(b=a.left,d=a):0>this.rb(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Xn(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function In(a,b,c){if(a.Ea){var d;if(c instanceof Sn)d=c;else if(c){if(Tn(a,oa(function(a){var b=null;0<this.rb(a.value,c)?b=a.left:(0>this.rb(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=bo(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function eo(a,b,c){this.l=a;this.storage=b;this.h=c;this.g={};a=this.h.keyPath;this.i=u(a)?a.join(","):a||"_ROWID_";this.g[this.i]=null;this.j=Pn(this.l,this.h.getName(),this.i)+"^|"}
function On(a,b){var c=b||a.i;if(!a.g[c]){a.g[c]=new co(Mn);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&va(f,a.j)){var g=Nk(f.substr(a.j.length));if(c==a.i)a.g[c].add(new Kn(g));else{var k=a.storage.getItem(f);if(null!==k)if(f=al(a.h,c),k=Bi(k),k=Km(f,k),f.multiEntry){if(u(k))for(f=0;f<k.length;f++)a.g[c].add(new Kn(k[f],g))}else a.g[c].add(new Kn(k,g))}}}}return a.g[c]}
function fo(a,b,c){for(var d in a.g){var e=a.g[d];if(e)if(d==a.i)e.remove(new Kn(b));else{var f=al(a.h,d),f=Hk(c,f.keyPath);e.remove(new Kn(b,f))}}}function go(a){for(var b in a.g){var c=a.g[b];c&&c.clear()}a.g={}}
function Gn(a,b,c,d){if(null==b&&(a.h.keyPath&&(b=km(a.h,c)),a.h.autoIncrement&&null==b)){b=a.j+Kk(void 0);var e=Bi(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,Di(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.j+Kk(b)));if(d)return null;a.storage.setItem(a.j+Kk(b),Di(c));d=b;for(var f in a.g)if(e=a.g[f])if(f==a.i)e.add(new Kn(d));else{var g=al(a.h,f),g=Hk(c,g.keyPath);null!=g&&e.add(new Kn(d,g))}return b}
function ho(a,b){var c=a.j+Kk(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=Bi(d);fo(a,b,c);return 1}h=eo.prototype;h.clear=function(){go(this);jo(this)};h.Ib=function(a,b){if(a&&a!=this.i)throw"impl";var c=this.storage.getItem(this.j+Kk(b)),d=void 0;if(null!==c)for(var d=Bi(c),c=0,e=this.h.indexes.length;c<e;c++){var f=this.h.index(c);if("DATE"==f.type){var g=Km(f,d);g&&Lm(f,d,new Date(g))}}return d};h.getName=function(){return this.h.getName()};
function ko(a,b,c){b=b||a.i;a=On(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new Kn(c.lower)),null!=c.upper&&(e=new Kn(c.upper)),g=c.lowerOpen,k=c.upperOpen);Jn(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=Fk(a.key,d.key))){if(null!=e&&(a=Fk(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function jo(a,b){var c=On(a,a.i),d=null,e=null,f=0,g=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new Kn(b.lower)),null!=b.upper&&(e=new Kn(b.upper)),l=b.lowerOpen,m=b.upperOpen);Jn(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=Mn(b,d))){if(null!=e){var c=Mn(b,e);if(1===c||0===c&&m)return!0}var c=a.j+Kk(b.key),r=a.storage.getItem(c);null!==r&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(Bi(r))))}},d);if(10>g.length)for(c=0;c<g.length;c++)fo(a,g[c],k[c]);else go(a);return f}
h.Vc=function(a,b,c,d,e,f,g,k){function l(b){if(b&&(x++,!(x<f))){var c=b.value;if(d){if(D&&null!=w&&(b=p?Mn(c,w):Fk(c.key,w.key),0==b))return;if(null!=s&&(b=p?Mn(c,s):Fk(c.key,s.key),-1==b||0==b&&H))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(H&&null!=s&&(b=p?Mn(c,s):Fk(c.key,s.key),0==b))return;if(null!=w&&(b=p?Mn(c,w):Fk(c.key,w.key),1==b||0==b&&D))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!g||!r||null==n||0!=Fk(n,b)){c=r?c.ka():b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=S.Ib(null,c);m.push(l)}else m.push([b,c,S.Ib(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,p=!!k&&null!=k[0];b=b||this.i;var r=b!=this.i;b=On(this,b);var s=null,w=null;t(f)||(f=0);var x=-1,H=!1,D=!1;null!=c&&(null!=c.lower&&(s=r&&d?new Kn(c.lower,"\uffff"):new Kn(c.lower)),null!=c.upper&&(w=r&&!d?new Kn(c.upper,"\uffff"):new Kn(c.upper)),H=!!c.lowerOpen,D=!!c.upperOpen);if(p){d?D=!0:H=!0;c=k[0];var I=t(k[1])?k[1]:"\uffff";d?w=r?new Kn(c,I):new Kn(c):
s=r?new Kn(c,I):new Kn(c)}var S=this;d?In(b,l,w):Jn(b,l,s);return m};h.Ka=function(a,b,c,d,e){return this.Vc(2,a,b,c,d,e)};h.toString=function(){return"ydn.db.con.simple.Store:"+this.l+":"+this.h.getName()};function lo(){this.clear()}h=lo.prototype;h.of=function(){return this};h.setItem=function(a,b){t(this.g[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.g[a]=b};h.getItem=function(a){return t(this.g[a])?this.g[a]:null};h.removeItem=function(a){delete this.g[a];Fb(this.keys,a.toString());this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return t(a)?this.g[a]:null};h.clear=function(){this.g={};this.keys=[];this.length=0};function mo(a){this.o=a||new lo;this.l={}}function Nn(a,b){var c=X(a.g,b);if(c)a.l[b]||(a.l[b]=new eo(a.i,a.j,c));else throw new yd('store name "'+b+'" not found.');return a.l[b]}mo.prototype.qb=function(a){var b=this;setTimeout(function(){var c=Pn(b.i),c=b.j.getItem(c),c=new dn(c);a(c)},10)};function no(a,b){this.h=a;this.g=b}no.prototype.O=function(a,b){var c=this.h;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.g("complete",null);d.g=null;d.h=null}};function oo(a,b){this.g=b}A(oo,Il);h=oo.prototype;h.logger=L("ydn.db.crud.req.SimpleStore");h.Je=function(a,b,c){this.vb(a,!0,!1,null,b,c)};
h.vb=function(a,b,c,d,e,f){O(this.logger,V(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var g=a.g.O(function(k){var l;if(c)l=Nn(k,d),k=f?f[0]:void 0,k=Gn(l,k,e[0],!b),null!=k?T(a,k):(l=Ci(k),l=new vl(l),T(a,l,!0));else{for(var m=d,n=[],p=!1,r=f||{},s=0;s<e.length;s++){var w;d?w=r[s]:(m=f[s],w=m.C(),m=m.L());l&&l.getName()==m||(l=Nn(k,m));w=Gn(l,w,e[s],!b);null!=w?n.push(w):(p=!0,n.push(new vl))}T(a,n,p)}g();g=null},this)};h.og=function(){throw new wd("putData");};
h.me=function(a,b,c){var d=a.g.O(function(e){e=Nn(e,b).Ib(null,c);T(a,e);d();d=null},this)};function po(a,b,c,d){var e=b.g.O(function(a){for(var g=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof Fl&&(k=n,n=k.C(),k=k.L());l&&l.getName()==k||(l=Nn(a,k));n=l.Ib(null,n);g[m]=n}T(b,g,!1);e();e=null},a)}h.eg=function(a,b,c){po(this,a,b,c)};h.Be=function(a,b){po(this,a,null,b)};
h.Ke=function(a,b,c){var d=V(a)+" removeById "+b+" "+c;O(this.logger,d);var e=this,f=a.g.O(function(g){g=ho(Nn(g,b),c);P(e.logger,"success "+d+(0==g?" [not found]":""));T(a,g);f();f=null},this)};h.Le=function(a,b){O(this.logger,V(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.g.O(function(f){for(var g=0;g<b.length;g++){var k=b[g].L(),l=b[g].C();c&&c.getName()==k||(c=Nn(f,k));d+=ho(c,l)}T(a,d);e();e=null},this)};h.nf=function(a,b,c){this.Gd(a,b,c)};
h.Gd=function(a,b,c){var d=V(a)+" removeByKeyRange "+(c?Di(c):"");O(this.logger,d);var e=this,f=a.g.O(function(g){g=jo(Nn(g,b),c);P(e.logger,d+" deleted "+g+" records.");T(a,g);f();f=null},this)};h.pg=function(a,b,c,d){var e=V(a)+" removeByIndexKeyRange "+(d?Di(d):"");O(this.logger,e);var f=a.g.O(function(e){e=Nn(e,b);for(var k=e.Ka(c,d),l=k.length,m=0;m<l;m++)ho(e,k[m]);T(a,l);f();f=null},this)};
h.be=function(a,b){var c=V(a)+" clearByStores";O(this.logger,c);var d=a.g.O(function(e){for(var f=0;f<b.length;f++)Nn(e,b[f]).clear();P(this.logger,"success "+c);T(a,b.length);d();d=null},this)};h.de=function(a,b){var c=a.g.O(function(d){for(var e=[],f=0;f<b.length;f++){var g=Nn(d,b[f]);e.push(ko(g))}T(a,e);c();c=null},this)};
h.nd=function(a,b,c,d){var e=V(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");O(this.logger,e);var f=a.g.O(function(g){g=ko(Nn(g,b),d,c);P(this.logger,"success "+e);T(a,g);f();f=null},this)};h.list=function(a,b,c,d,e,f,g,k,l,m){var n=V(a)+" "+c+" "+(e?Ci(e):"");O(this.logger,n);var p=a.g.O(function(r){r=Nn(r,c).Vc(b,d,e,k,f,g,l,m);P(this.logger,n+" "+r.length+" records found.");T(a,r);p();p=null},this)};function qo(a,b){this.g=b}A(qo,oo);qo.prototype.h=function(a,b,c,d){c=X(this.g,c);return new Fn(a,b,c,d)};function ro(a,b,c,d){Zk.call(this,a,b,c,d);this.aa=null;this.l=this.p=void 0}A(ro,Zk);h=ro.prototype;h.logger=L("ydn.db.core.req.WebsqlCursor");h.ka=function(){return this.l};h.init=function(a,b,c,d,e){ro.m.init.call(this,a,b,c,d,e);this.aa=v(b)?al(this.h,b):null};h.T=function(){return this.S};function so(a,b){a.p=void 0;a.l=void 0;a.S=void 0;if(t(b))if(y(b)){var c=Mm(b[a.h.j],a.h.type);a.l=c;if(a.j){var d=al(a.h,a.jb);a.p=Mm(b[a.jb],d.type)}else a.p=c;a.S=a.Dd?c:to(b,a.h)}else a.S=b}
function uo(a,b,c){al(a.h,a.jb);var d=[],e=a.jb,f=a.da,g=a.p;if(null!=f){var k=f.lower,l=f.upper,m=f.lowerOpen,n=f.upperOpen;a.reverse?l=null!=l&&-1==Fk(l,g)?l:g:k=null!=k&&1==Fk(k,g)?k:g;null!=k&&null!=l?f=R.bound(k,l,!!m,!!n):f=null!=k?Bk.lowerBound(k,!!m):Bk.upperBound(l,!!n)}else f=a.reverse?Bk.upperBound(g):Bk.lowerBound(g);e=Sm(a.h,d,a.P,e,f,a.reverse,a.unique);c=a.reverse?Bk.upperBound(c,!1):Bk.lowerBound(c,!1);c=Sm(a.h,d,a.P,a.h.j,c,a.reverse,a.unique);e.ia=e.ia?e.ia+(" AND "+c.ia):c.ia;c=
"SELECT "+e.select+" FROM "+e.Tc+(e.ia?" WHERE "+e.ia:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.gc;c+=" LIMIT 1";O(a.logger,a+": continuePrimary:  SQL: "+c+" : "+Di(d));a.o.executeSql(c,d,function(c,d){0<d.rows.length?so(a,d.rows.item(0)):so(a);b.call(a,a.p,a.l,a.S);b=null},function(c,d){N(a.logger,"get error: "+d.message);bl(a,d);so(a);b.call(a,a.l,a.p,a.S);b=null;return!1})}
function vo(a,b,c,d,e,f){var g=!d;d=[];a.j&&null!=f&&null!=c?c=Vm(a.h,a.P,d,a.aa.getName(),a.da,c,g,f,a.reverse,a.unique):null!=c?(f=a.aa?a.aa.getName():null,c=Um(a.h,a.P,d,f,a.da,a.reverse,a.unique,c,g)):(c=Rm(a.h,d,a.P,a.j?a.aa.j:a.h.j,a.da,a.reverse,a.unique),a.j&&(c+=", "+a.h.i+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);O(a.logger,a+": continue:  SQL: "+c+" : "+Di(d));a.o.executeSql(c,d,function(c,d){0<d.rows.length?so(a,d.rows.item(0)):so(a);b.call(a,a.p,a.l,a.S);b=null},function(c,d){N(a.logger,
"get error: "+d.message);bl(a,d);so(a);b.call(a,a.l,a.p,a.S);b=null;return!1})}h.ue=function(){return!!this.o};h.update=function(a){if(!this.ue())throw new zl;var b=new B,c=this.ka();a=Ym(this.h,a,c);var d="REPLACE INTO "+Tm(this.h)+" ("+a.Yg.join(", ")+") VALUES ("+a.Jh.join(", ")+")";O(this.logger,this+': update "'+d+'" : '+Di(a.values));this.o.executeSql(d,a.values,function(){b.callback(c)},function(a,c){b.D(c);return!1});return b};
h.advance=function(a){var b=this.p,c=this.l,d=!0;null==this.p||this.j&&null==this.l||(a-=1,d=!1);vo(this,function(a,d,g){var k=null!=b&&null!=a&&0==Fk(b,a);if(this.j){var l=null!=d&&null!=c&&0==Fk(d,c);if(k&&l)throw new yd("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new yd("current: "+b+" next: "+a);this.wb(a,d,g)},this.p,d,a,this.l)};h.oc=function(a){null!=a?vo(this,this.wb,a,!0):this.advance(1)};h.openCursor=function(a,b){vo(this,this.wb,a,!1,0,b)};
h.clear=function(){if(!this.ue())throw new zl;var a=new B,b=this.h.j,b="DELETE FROM "+Tm(this.h)+" WHERE "+b+" = ?",c=[this.ka()];O(this.logger,this+': clear "'+b+'" : '+Di(c));this.o.executeSql(b,c,function(b,c){a.callback(c.rowsAffected)},function(b,c){a.D(c);return!1});return a};h.md=function(a){var b=Fk(a,this.l);if(0==b||1==b&&this.reverse||-1==b&&!this.reverse)throw new Oi(this+" to continuePrimaryKey  from "+this.l+" to "+a+" on "+this.xb+" direction is wrong");uo(this,this.wb,a)};
h.toString=function(){return"WebSql"+ro.m.toString.call(this)};function wo(a,b){this.g=b}A(wo,Il);h=wo.prototype;h.logger=L("ydn.db.crud.req.WebSql");
function to(a,b){if(b.Mc&&!b.keyPath&&0==b.indexes.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return Bi(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?Bi(a._default_):{};null!=b.keyPath&&(d=Mm(a[b.keyPath],b.type),null!=d&&rm(b,c,d));for(d=0;d<b.indexes.length;d++)e=
b.index(d),f=e.j,"_default_"==f||e.o||e.multiEntry||"DATE"!=e.type&&!b.Mc||(f=Mm(a[f],e.type),t(f)&&Lm(e,c,f));return c}h.og=function(){throw new wd("putData");};
h.vb=function(a,b,c,d,e,f){function g(b,d){if(null==e[b])if(O(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)P(m.logger,r+" success "+r),T(a,n,s);else{var H=b+2;H<e.length&&g(H,d)}var D;D=t(f)?Ym(k,e[b],f[b]):Ym(k,e[b]);H=l+Tm(k)+" ("+D.Yg.join(", ")+") VALUES ("+D.Jh.join(", ")+");";O(m.logger,V(a)+" SQL: "+H+" PARAMS: "+D.values+" REQ: "+b+" of "+e.length);d.executeSql(H,D.values,function(f,r){function H(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Pa(e)+" ("+k.i+", "+
b.i+") VALUES (?, ?)",f=[Gk(K,k.type),Gk(c,b.type)];O(m.logger,V(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){N(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var K=t(D.key)?D.key:r.insertId;1>r.rowsAffected&&(s=!0,K=new vl(K+" no-op"));for(var jd=0,wk=k.indexes.length;jd<wk;jd++){var Ud=k.index(jd);if(Ud.multiEntry)for(var $e=Hk(e[b],Ud.keyPath),jA=($e?$e.length:0)||0,M=0;M<jA;M++)H(Ud,$e[M])}c?T(a,K):(n[b]=K,p==e.length?T(a,n,s):(jd=b+2,jd<e.length&&
g(jd,f)))},function(d,f){p++;s=!0;6==f.code?f.name="ConstraintError":N(m.logger,"error: "+f.message+" "+r);if(c)T(a,f,!0);else if(n[b]=f,p==e.length)O(m.logger,"success "+r),T(a,n,s);else{var k=b+2;k<e.length&&g(k,d)}return!1})}b=!b;var k=X(this.g,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.g;var m=this,n=[],p=0,r=V(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)g(b,d);else P(this.logger,"success"),T(a,[])};
h.Je=function(a,b,c){if(0==c.length)T(a,[]);else{for(var d=[],e=0,f=0,g=this,k=function(k,l){var m=[];O(g.logger,"put "+l.length+" objects to "+k);for(var n=Xm(X(g.g,k)),p=n?void 0:[],r=0;r<l.length;r++)m.push(b[l[r]]),n||p.push(c[l[r]].C());n=pl(a);n.A(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&T(a,d)},function(){e++;e==f&&T(a,d,!0)});g.vb(n,!1,!1,k,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var r=c[p].L(),s=c[p].C();r!=l?(f++,0<m.length&&k(l,m),m=[p],n=[s],l=r):(m.push(p),n.push(s))}0<
m.length&&k(l,m)}};h.me=function(a,b,c){var d=a.g,e=X(this.g,b),f=this;b=e.i;c=[Gk(c,e.type)];b="SELECT * FROM "+Tm(e)+" WHERE "+b+" = ?";var g=V(a)+" SQL: "+b+" PARAMS: "+c;O(this.logger,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=to(d,e),T(a,d)):(P(f.logger,"success no result: "+g),T(a,void 0))}else P(f.logger,"success no result: "+g),T(a,void 0)},function(b,c){N(f.logger,"error: "+g+" "+c.message);T(a,c,!0);return!1})};
h.eg=function(a,b,c){function d(b,e){var p=l.i,r=[Gk(c[b],l.type)],s="SELECT * FROM "+Tm(l)+" WHERE "+p+" = ?";O(f.logger,"SQL: "+s+" PARAMS: "+r);e.executeSql(s,r,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=to(n,l))}else g[b]=void 0;k==c.length?T(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;N(f.logger,"error: "+s+" "+l.message);if(k==c.length)T(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.g,f=this,g=[],k=0,l=X(this.g,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else P(f.logger,"success"),T(a,[])};
h.Be=function(a,b){function c(d,k){var n=b[d],p=X(e.g,n.L()),r=Gl(n),n=p.i,r=[Gk(r,p.type)],s="SELECT * FROM "+Tm(p)+" WHERE "+n+" = ?";O(e.logger,"SQL: "+s+" PARAMS: "+r);k.executeSql(s,r,function(k,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=to(n,p))}else f[d]=void 0;g==b.length?(O(e.logger,"success "+s),T(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){T(a,c,!0);return!1})}var d=a.g,e=this,f=[],g=0;if(0<b.length)for(var k=0;10>k&&k<b.length;k++)c(k,d);else O(this.logger,"success"),
T(a,[])};
h.be=function(a,b){function c(d,g){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Pa(a);O(e.logger,"SQL: "+a);g.executeSql(a,[])}var l=X(e.g,b[d]),m="DELETE FROM  "+Tm(l);O(e.logger,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(O(e.logger,"success "+m),T(a,b.length)):c(d+1,g)},function(b,c){T(a,c,!0);return!1});for(var n=0,p=l.indexes.length;n<p;n++){var r=l.index(n);r.multiEntry&&k(r)}}var d=a.g,e=this;0<b.length?c(0,d):(O(this.logger,"success"),
T(a,0))};
h.Le=function(a,b){function c(k){if(k>=b.length)T(a,f,g);else{var l=X(e.g,b[k].L()),m=Gk(b[k].C(),l.type),n=" WHERE "+l.i+" = ?",p="DELETE FROM "+Tm(l)+n,r=V(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(k)},function(a,b){N(e.logger,"error: "+r+b.message);g=!0;c(k);return!1});k++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Pa(b)+n;O(e.logger,V(a)+NaN+b);d.executeSql(b,[m])},s=0,w=l.indexes.length;s<w;s++){var x=l.index(s);x.multiEntry&&p(x)}}}
var d=a.g,e=this,f=0,g=!1;O(this.logger,V(a)+" removeByKeys: "+b.length+" keys");c(0)};
h.Ke=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Pa(b)+l;O(k.logger,V(a)+NaN+b);e.executeSql(b,[g])}var e=a.g,f=X(this.g,b),g=Gk(c,f.type),k=this,l=" WHERE "+f.i+" = ?";b="DELETE FROM "+Tm(f)+l;O(this.logger,V(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){T(a,c.rowsAffected)},function(b,c){T(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};h.nf=function(a,b,c){xo(this,a,b,void 0,c)};
h.Gd=function(a,b,c){xo(this,a,b,void 0,c)};h.pg=function(a,b,c,d){xo(this,a,b,c,d)};
function xo(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Pa(c)+n;O(a.logger,V(b)+NaN+c);g.executeSql(c,m)}var g=b.g,k=X(a.g,c);c="DELETE FROM "+Tm(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=al(k,d),Ek(d.i,d.type,e,m,l)):Ek(k.i,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=V(b)+" SQL: "+c+" PARAMS: "+l;O(a.logger,p);g.executeSql(c,l,function(c,d){O(a.logger,"success "+p);T(b,d.rowsAffected)},function(c,d){N(a.logger,"error: "+p+d.message);T(b,d,!0);return!1});
e=0;for(d=k.indexes.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}h.de=function(a,b){function c(g){var k="SELECT COUNT(*) FROM "+Pa(b[g]);O(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[g]=parseInt(k["COUNT(*)"],10);g++;g==b.length?T(a,f):c(g)},function(b,c){T(a,c,!0);return!1})}var d=a.g,e=this,f=[];0==b.length?(O(this.logger,"success"),T(a,0)):c(0)};
h.nd=function(a,b,c,d,e){var f=[];b=Rm(X(this.g,b),f,6,d,c,!1,e);O(this.logger,V(a)+" SQL: "+b+" PARAMS: "+f);a.g.executeSql(b,f,function(b,c){var d=c.rows.item(0);T(a,hn(d))},function(b,c){T(a,c,!0);return!1})};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=this,p=[],r=X(this.g,c),s=r.j,w=r.type,x=w,H=null!=d&&d!==s?al(r,d):null,D=d||s;H&&(x=H.type);c=[];if(m&&t(m[0])){var I=m[0];H&&t(m[1])?(d=m[1],e=Vm(r,b,c,H.getName(),e,I,!0,d,k,l)):e=Um(r,b,c,d,e,k,l,I,!0)}else e=Rm(r,c,b,D,e,k,l);ha(f)&&(e+=" LIMIT "+f);ha(g)&&(e+=" OFFSET "+g);var S=a+" SQL: "+e+" ;params= "+Di(c);O(this.logger,S);a.g.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=Mm(f[s],w):1==b?p[g]=Mm(f[D],
x):3==b?p[g]=[Mm(f[D],x),Mm(f[s],w)]:null!=f&&(p[g]=to(f,r));P(n.logger,"success "+a);m&&f&&(m[0]=Mm(f[D],x),m[1]=Mm(f[s],w));T(a,p)},function(b,c){N(n.logger,"error: "+S+c.message);T(a,c,!0);return!1})};function yo(a,b){this.g=b}A(yo,wo);yo.prototype.logger=L("ydn.db.core.req.WebSql");yo.prototype.h=function(a,b,c,d){c=X(this.g,c);return new ro(a,b,c,d)};xn.prototype.J=function(){var a=Nl(this);if("indexeddb"==a)return new Dn(0,this.h);if("websql"==a||"sqlite"==a)return new yo(0,this.h);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new qo(0,this.h);throw new yd("No executor for "+a);};function Ao(a){return v(a)?a.replace(/\D/g,"").replace(/^0+/,""):null}function Bo(a){if(!v(a)||!/[\w\+]+@\w+\.\w+/.test(a))return null;a=a.replace(/.*</,"").replace(/>.*/,"");a=a.toLowerCase();a=a.replace(/\+\w*?@/,"@");for(var b=a.indexOf("@");0<=b;b--);return a};function Co(a){if(!v(a))throw new Ii;this.fb=a;this.j=Wk;this.g=[];Do(this,a);this.Pd=""}h=Co.prototype;h.fb="";h.yh=NaN;h.zh=NaN;h.Cg=!1;h.Pd="";
function Do(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.l=c[1].toUpperCase();if("SELECT"==a.l)a.j=Vk;else if("INSERT"==a.l)a.j=Wk;else if("UPDATE"==a.l)a.j=Wk;else if("DELETE"==a.l)a.j=Wk;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.i=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.i=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new Dl("missing closing parentheses"));a.M=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.h=d.substring(c),d=d.substring(0,c)):a.h="";c=d.search(/WHERE/i);0<c?(a.o=d.substring(c+6).trim(),d=d.substring(0,c)):a.o="";a.g=d.trim().split(",").map(function(a){a=Ma(a,'"');a=Ma(a,"'");return a.trim()})}}}
h.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.fb=this.fb.replace("?",a[b]);Do(this,this.fb)}this.p=Eo(this);if(!this.p)return this.Pd;a=this.h.length;if(b=/OFFSET\s+(\d+)/i.exec(this.h))this.zh=parseInt(b[1],10),a=this.h.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.h))this.yh=parseInt(b[1],10),b=this.h.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.h.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.Cg="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.Cg=!1,this.t=Ma(Ma(a,'"'),"'")):this.t=void 0;return""};function Fo(a){if("*"==a.M)return null;a=a.M.split(",");return a=a.map(function(a){return Ma(a.trim(),'"')})}h.toJSON=function(){return{sql:this.fb}};
function Eo(a){function b(a){return Cb(c,function(b){return b.rd()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.o.length)for(var e=a.o.split("AND"),f=0;f<e.length;f++){var g=e[f],k=d.exec(g);if(k){var l=k[1].trim(),l=Ma(l,'"'),l=Ma(l,"'");if(0<l.length){var m=k[3].trim();va(m,'"')?m=Ma(m,'"'):va(m,"'")?m=Ma(m,"'"):m=parseFloat(m);k=new Sk(l,k[2],m);l=b(l);if(0<=l){if(c[l]=c[l].kf(k),!c[l])return a.Pd='where clause "'+g+'" conflict',null}else c.push(k)}else return a.Pd='Invalid clause "'+g+'"',
null}else return a.Pd='Invalid clause "'+g+'"',null}return c}h.toString=function(){return"query:"+this.fb};function Go(a,b){this.g=b;this.h=a}Go.prototype.logger=L("ydn.db.sql.req.nosql.Node");Go.prototype.toJSON=function(){return{sql:this.g}};Go.prototype.toString=function(){return"idb.Node:"};
Go.prototype.execute=function(a,b){var c=Hb(this.g.g)[0],d=this.g.p,e=this.g.yh,e=isNaN(e)?100:e,f=this.g.zh,f=isNaN(f)?0:f,g=this.g.t,k=Fo(this.g),l=null,m=this.g.Cg;if(0==d.length)l=null;else if(1==d.length)l=yk(d[0].g);else throw new vd("too many conditions.");null===k||sl(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return Hk(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=Hk(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].rd():void 0,n=V(a)+" executing on"+c;d&&(n+=":"+
d);n+=" "+Dk(l);P(this.logger,n);g&&g!=this.h.keyPath?b.list(a,4,c,g,l,e,f,m,!1):t(d)&&d!=this.h.keyPath?b.list(a,4,c,d,l,e,f,m,!1):b.list(a,4,c,null,l,e,f,m,!1)};function Ho(a,b){Go.call(this,a,b)}A(Ho,Go);
Ho.prototype.execute=function(a,b){var c,d=Hb(this.g.g)[0],e=this.g.p,f=null;if(0==e.length)f=null;else if(1==e.length)f=yk(e[0].g);else throw new vd("too many conditions.");var g=this.g.i,e=0<e.length?e[0].rd():void 0,k=V(a)+" executing "+g+" on "+d;e&&(k+=":"+e);k+=" "+Dk(f);P(this.logger,k);if("COUNT"==g)f?b.nd(a,d,f,e,!1):b.nd(a,d,null,void 0,!1);else{var l,k=Fo(this.g);if(!k||0==k.length)throw new Oi("field name require for reduce operation: "+g);k=k[0];if("MIN"==g)l=Io(k);else if("MAX"==g)l=
Jo(k);else if("AVG"==g)c=0,l=Ko(k);else if("SUM"==g)c=0,l=Lo(k);else throw new Ji(g);var m;t(e)?m=new kl(d,e,f):m=new jl(d,f);var d=b.h(a.g,V(a),d,4),n=m.load([d]);n.N=function(b){T(a,b,!0)};var p=0;n.J=function(b){null!=b?(b=m.g?n.ka():n.T(),c=l(b,c,p),n.advance(1),p++):T(a,c)}}};function Ko(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function Lo(a){return function(b,c){return c+b[a]}}function Io(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function Jo(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function Mo(a,b){this.g=b}A(Mo,Dn);Mo.prototype.logger=L("ydn.db.sql.req.IndexedDb");Mo.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new Dl(c);c=Hb(b.g);if(1==c.length){var d=X(this.g,c[0]);if(!d)throw new Al(c[0]);var e=Fo(b);if(e)for(var f=0;f<e.length;f++)if(!gm(d,e[f]))throw new Al('Index "'+e[f]+'" not found in '+c[0]);var g;b.i?g=new Ho(d,b):g=new Go(d,b);g.execute(a,this)}else throw new Ji(b.fb);};function No(a,b){this.h=b;this.i=a;this.g=Fo(b)}No.prototype.logger=L("ydn.db.sql.req.websql.Node");No.prototype.toJSON=function(){return{sql:this.h.fb}};No.prototype.toString=function(){return"websql.Node:"};function Oo(a,b){if(a.g){if(1==a.g.length){if(y(b))return Nc(b,a.g[0]);return}for(var c={},d=0;d<a.g.length;d++)c[a.g[d]]=Nc(b,a.g[d]);return c}return to(b,a.i)}
No.prototype.execute=function(a,b,c){var d=this,e=[];b.executeSql(this.h.fb,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(y(m))var n=Oo(d,m);e.push(n)}a(e)},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function Po(a,b){No.call(this,a,b)}A(Po,No);Po.prototype.execute=function(a,b,c){var d=this;b.executeSql(this.h.fb,c,function(b,c){var d=c.rows.length;if(1==d)d=hn(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new yl;},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function Qo(a,b){this.g=b}A(Qo,yo);Qo.prototype.logger=L("ydn.db.sql.req.WebSql");Qo.prototype.executeSql=function(a,b,c){var d=Hb(b.g);if(1==d.length){var e=X(this.g,d[0]);if(!e)throw new Al(d[0]);var f=Fo(b);if(f)for(var g=0;g<f.length;g++)if(!gm(e,f[g]))throw new Al('Index "'+f[g]+'" not found in '+d[0]);var k;b.i?k=new Po(e,b):k=new No(e,b);k.execute(function(b,c){T(a,b,c)},a.g,c)}else throw new Ji(b.fb);};function Ro(a,b){this.g=b}A(Ro,qo);Ro.prototype.logger=L("ydn.db.sql.req.SimpleStore");Ro.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new Dl(c);c=Hb(b.g);if(1==c.length){var d=X(this.g,c[0]);if(!d)throw new Al(c[0]);var e=Fo(b);if(e)for(var f=0;f<e.length;f++)if(!gm(d,e[f]))throw new G('Index "'+e[f]+'" not found in '+c[0]);var g;b.i?g=new Ho(d,b):g=new Go(d,b);g.execute(a,this)}else throw new vd(b.fb);};function So(a,b,c,d){Vl.call(this,a,b,c,d)}A(So,Am);So.prototype.executeSql=function(a,b){for(var c=new Co(a),d=Hb(c.g),e=0;e<d.length;e++){var f=X(this.h,d[e]);if(!f)throw new G("store: "+f+" not exists.");}P(this.logger,"executeSql: "+a+" params: "+b);var g=this.g.request("sql",Hb(c.g),c.j);U(g,function(){W(this).executeSql(g,c,b||[])},this);return g};function To(a,b,c){wn.call(this,a,b,c)}A(To,xn);To.prototype.ad=function(a,b){return new So(this,this.h,a,b)};To.prototype.executeSql=function(a,b){return this.g.executeSql(a,b)};To.prototype.J=function(){var a=Nl(this);if("indexeddb"==a)return new Mo(0,this.h);if("websql"==a||"sqlite"==a)return new Qo(0,this.h);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new Ro(0,this.h);throw new yd("No executor for "+a);};function Uo(a,b){t(a)&&5242880<a&&ne(this.logger,Xd,"storage size request ignored, use Quota Management API instead");this.oa=null;this.Kd=b||NaN}h=Uo.prototype;
h.connect=function(a,b){function c(a,c,d){P(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Vo(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)dm(b,c[d])||(a.deleteObjectStore(c[d]),P(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.h?N(e.logger,"database already set."):t(b)?(N(e.logger,b?b.message:"Error received."),e.oa=null,f.D(b)):(e.oa=a,e.oa.onabort=function(a){O(e.logger,e+": abort");e.Qd(a.target.error)},
e.oa.onerror=function(a){O(e.logger,e+": error");e.Qd(a.target.error)},e.oa.onversionchange=function(a){O(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.oa&&(e.oa.onabort=null,e.oa.onblocked=null,e.oa.onerror=null,e.oa.onversionchange=null,e.Ie(a),!a.defaultPrevented)){e.oa.close();e.oa=null;var b=Error();b.name=a.type;e.Ze(b)}},f.callback(parseFloat(g)))}var e=this,f=new B,g=void 0,k=b.version;ne(this.logger,ae,"Opening database: "+a+" ver: "+(b.Dc?"auto":k));var l;l=t(k)?
Yk.open(a,k):Yk.open(a);l.onsuccess=function(f){var k=f.target.result;t(g)||(g=k.version);ne(e.logger,ae,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.Dc)e.qb(function(f){if(b instanceof $l)for(var g=0;g<f.stores.length;g++)dm(b,f.stores[g].getName())||am(b,f.stores[g].clone());f=en(b,f,!1,!0);if(0<f.length){ne(e.logger,ae,"Schema change require for difference in "+f);var l=ha(k.version)?k.version+1:1;if("IDBOpenDBRequest"in q){k.close();var m=Yk.open(a,l);m.onupgradeneeded=function(a){a=
a.target.result;ne(e.logger,ae,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){ne(e.logger,ae,e+": fail.");d(null)}}else{var p=k.setVersion(l+"");p.g=function(a){N(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=D;c(k,p.transaction,!0)};var D=function(){var b=Yk.open(a);b.onsuccess=function(a){a=a.target.result;ne(e.logger,ae,e+": OK.");d(a)};b.onerror=function(){ne(e.logger,
ae,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=D)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.g=function(a){N(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?ne(e.logger,ae,"database version "+k.version+" ready to go"):N(e.logger,"connected database version "+k.version+" is higher than requested version."),e.qb(function(a){a=en(b,a,!1,
!0);0<a.length?(ne(e.logger,ae,a),d(null,new Mi("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;ne(this.logger,ae,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){oe(e.logger,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){oe(e.logger,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};ha(this.Kd)&&
!isNaN(this.Kd)&&setTimeout(function(){"done"!=l.readyState&&(oe(e.logger,e+": database state is still "+l.readyState),d(null,new El("connection timeout after "+e.Kd)))},this.Kd);return f};h.Kd=18E4;h.Ze=function(){};h.Qd=function(){};h.Ie=function(){};h.kd=function(){return"indexeddb"};h.Ye=function(){return!!this.oa};h.logger=L("ydn.db.con.IndexedDb");h.oa=null;h.Xe=function(){return this.oa?parseFloat(this.oa.version):void 0};
h.qb=function(a,b,c){c=c||this.oa;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new dn(c.version));return}throw new Li;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new dn(c.version));return}b=c.transaction(b,Vk)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var p=k.index(k.indexNames[m]);l[m]=new Hm(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Xl(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new dn(c.version,f);a(b)};
function Vo(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}ne(a.logger,be,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());Om(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),ne(a.logger,Xd,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):ga(c.autoIncrement)&&ga(d.autoIncrement)&&c.autoIncrement!=
d.autoIncrement&&(b.deleteObjectStore(d.getName()),ne(a.logger,Xd,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0;g<d.indexes.length;g++){var k=d.index(g);!f.contains(k.getName())&&k.l&&(c.clear(),ne(a.logger,Xd,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,g=0;g<d.indexes.length;g++){var k=d.index(g),p=!1;if(f.contains(k.getName())){var r=c.index(k.getName()),s=null!=r.unique&&null!=k.unique&&r.unique!=
k.unique,w=null!=r.multiEntry&&null!=k.multiEntry&&r.multiEntry!=k.multiEntry,r=null!=r.keyPath&&null!=k.keyPath&&!!Om(r.keyPath,k.keyPath);if(s||w||r)c.deleteIndex(k.getName()),p=!0,l--,n++}else"BLOB"!=k.type&&(p=!0);p&&(k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath),l++)}for(g=0;g<f.length;g++)gm(d,f[g])||(c.deleteIndex(f[g]),m++);ne(a.logger,be,"Updated store: "+c.name+", "+l+" index created, "+m+
" index deleted, "+n+" modified.")}else{c=e();for(g=0;g<d.indexes.length;g++)k=d.index(g),"BLOB"==k.type?ne(a.logger,Yd,"Index "+k+" of blob data type ignored."):(ne(a.logger,be,"Creating index: "+k),k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath));ne(a.logger,be,"Created store: "+c)}}
h.ge=function(a,b,c,d){var e=this.oa;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};h.close=function(){ne(this.logger,be,this+" closing connection");this.oa.close()};h.toString=function(){return"IndexedDB:"+(this.oa?this.oa.name+":"+this.oa.version:"")};
ul.push(function(a,b){if(!Yk||b&&"indexeddb"!=b)return null;var c=Yk.deleteDatabase(a),d=new nl("IDBVersionChangeEvent ");c.onblocked=function(a){re(d,a)};c.onerror=function(a){d.D(a)};c.onsuccess=function(a){d.callback(a)};return d});function Wo(a){mo.call(this,a);this.h=NaN}A(Wo,mo);h=Wo.prototype;h.logger=L("ydn.db.con.SimpleStorage");h.Xe=function(){return this.h};
h.connect=function(a,b){function c(a,b){setTimeout(function(){b?(P(d.logger,d+" opening fail"),e.D(b)):(P(d.logger,d+" version "+d.Xe()+" open"),e.callback(a))},10)}var d=this,e=new B;this.j=this.o.of(a);this.i=a;this.g=b;var f=Pn(this.i);this.h=NaN;var g=Bi(this.j.getItem(f));t(g.version)&&!ha(g.version)&&(g.version=NaN);if(g)if(g=new dn(g),en(this.g,g,!1,!1))if(!this.g.Dc&&!isNaN(g.version)&&this.g.version>g.version)c(NaN,new xl("existing version "+g.version+" is larger than "+this.g.version));
else{var k=this.g.version;this.h=t(k)?k:g.version+1;for(k=0;k<this.g.count();k++)var l=this.g.store(k);if(this.g instanceof $l)for(k=0;k<g.count();k++)l=g.store(k),am(this.g,l);k=this.g.toJSON();k.version=this.h||NaN;this.j.setItem(f,Di(k));c(g.version||NaN)}else{for(k=0;k<this.g.count();k++)l=this.g.store(k);this.h=g.version||NaN;c(this.h)}else g=b.toJSON(),this.h=1,g.version=this.h,this.j.setItem(f,Di(g)),c(NaN);return e};h.Ye=function(){return!!this.i};h.Ze=function(){};h.Qd=function(){};
h.Ie=function(){};h.kd=function(){return"memory"};h.close=function(){};h.ge=function(a,b,c,d){a(new no(this,function(a,b){d(a,b)}))};h.toString=function(){return"SimpleStorage:"+this.kd()+":"+(this.i+":"+this.h)};function Xo(){Wo.call(this,this)}A(Xo,Wo);Xo.prototype.of=function(){return window.localStorage};Xo.prototype.kd=function(){return"localstorage"};ul.push(function(a,b){if(!b||"localstorage"==b){var c=new Xo,d=new $l;c.connect(a,d);c.qb(function(a){for(var b=0;b<a.stores.length;b++)Nn(c,a.stores[b].getName()).clear()})}});function Yo(){Wo.call(this,this)}A(Yo,Wo);Yo.prototype.of=function(){return window.sessionStorage};Yo.prototype.kd=function(){return"sessionstorage"};
ul.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Yo,d=new $l;c.connect(a,d);c.qb(function(a){for(var b=0;b<a.stores.length;b++)Nn(c,a.stores[b].getName()).clear()})}});function Zo(a,b){this.g=t(a)?a:4194304;this.h=b||"websql"}h=Zo.prototype;
h.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.Dc?isNaN(f)?1:f+1:c.version;pe(e.logger,a+": changing version from "+b.version+" to "+g);var k=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.qb(function(b){k=!0;for(var d=0;d<c.count();d++){var f=X(b,c.store(d).getName()),f=f?Wm(f,c.store(d)):null;$o(e,a,c.store(d),function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.store(d),dm(c,f.getName())||(c instanceof $l?am(c,f):(f="DROP TABLE "+Tm(f),P(e.logger,f),a.executeSql(f,
[],function(){},function(a,b){throw b;})))},a,b)},function(c){oe(e.logger,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");O(e.logger,a+":"+b.version+" ready"+f);d(b)}else N(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.Ha=null,g.D(b)):(e.Ha=a,g.callback(parseFloat(f)))}var e=this,f=NaN,g=new B,k=null;try{"sqlite"==this.h?q.sqlitePlugin?
(k=q.sqlitePlugin.openDatabase(a,"",a,this.g),k.readTransaction||(k.readTransaction=k.transaction),k.changeVersion=function(a,b,c,d,e){k.transaction(c,d,e)}):(N(this.logger,"sqlitePlugin not found."),k=null,this.$e=Error("sqlitePlugin not found.")):k=q.openDatabase(a,"",a,this.g)}catch(l){if("SECURITY_ERR"==l.name)N(this.logger,"SECURITY_ERR for opening "+a),k=null,this.$e=new Cl(l);else throw l;}if(k){var f=k.version||"",m="database "+a+(0==f.length?"":" version "+k.version);null!=b.version&&b.version==
k.version?(pe(e.logger,"Existing "+m+" opened as requested."),d(k)):this.qb(function(a){(a=en(b,a,!0,!1))?(0==f?pe(e.logger,"New "+m+" created."):b.Dc?pe(e.logger,"Existing "+m+" opened and schema change for "+a):pe(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(pe(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.$e);return g};h.kd=function(){return this.h};h.$e=null;h.Ha=null;h.logger=L("ydn.db.con.WebSql");h.Ze=function(){};
h.Qd=function(){};
function ap(a){var b=a.M,c="CREATE TABLE IF NOT EXISTS "+Tm(a)+" (",d=a.i,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");if(!a.Mc||!a.keyPath&&0==a.indexes.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,k=a.indexes.length;g<k;g++){var l=a.index(g),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Pa(m)+" ("+d+" "+b+", "+l.i+" "+l.p+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=
l.type&&v(n)&&(n="CREATE "+m+" INDEX IF NOT EXISTS "+Pa(a.getName()+"-"+l.getName())+" ON "+Tm(a)+" ("+l.i+")",e.push(n)),n=l.i,-1==f.indexOf(n)&&(c+=", "+n+" "+l.p+m,f.push(n))}e.unshift(c+")");return e}h.Xe=function(){return this.Ha?parseFloat(this.Ha.version):void 0};
h.qb=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var r=Pc(e,"sql");O(f.logger,"Parsing table schema from SQL: "+r);for(var s=r.substr(r.indexOf("("),r.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),w=void 0,x,r=[],H=!1,D=!1,I=0;I<s.length;I++){var S=s[I].match(/\w+|"[^"]+"/g),za=yb(S,function(a){return a.toUpperCase()}),K=Ma(S[0],'"'),
S=Im(za[1]);if(-1!=za.indexOf("PRIMARY")&&-1!=za.indexOf("KEY")){x=S;if(v(K)&&!ya(K)&&"_ROWID_"!=K){var jd=K.split(","),w=K;1<jd.length&&(w=jd,x=void 0)}-1!=za.indexOf("AUTOINCREMENT")&&(H=!0)}else if("_ROWID_"!=K)if("_default_"==K)D=!0;else{var wk="UNIQUE"==za[2];va(K,e.tbl_name+"-")&&(K=K.substr(e.tbl_name.length+1));za=new Hm(K,S,wk);r.push(za)}}if(va(e.name,"ydn.db.me:")){var Ud=e.name.split(":");if(3<=Ud.length){var $e=Ud[1],w=new Hm(Ud[2],S,wk,!0),s=Cb(r,function(a){return a.getName()==Ud[2]});
0<=s?r[s]=w:r.push(w);s=Cb(k,function(a){return a.getName()===$e});0<=s?(I=k[s],k[s]=new Xl(I.getName(),I.keyPath,H,x,r,void 0,!D)):k.push(new Xl($e,void 0,!1,void 0,[w]));O(f.logger,'multi entry index "'+w.getName()+'" found in '+$e+(-1==s?"*":""))}else N(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else I=Cb(k,function(a){return a.getName()===e.name}),0<=I?(s=k[I].index(0),r.push(s),k[I]=new Xl(e.name,w,H,x,r,void 0,!D)):(r=new Xl(e.name,w,H,x,r,void 0,!D),k.push(r))}}d=new dn(g,k);a(d)}}
var f=this,g=(c=c||this.Ha)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.qb(a,b,c)},function(a){oe(f.logger,"opening tx: "+a.message);throw a;},e)};
function $o(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==k.length&&(d(!0),d=null)},function(b,e){g++;g==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new Bl(e,f);})}var g=0,k=ap(c),l="Create";if(e){e=Zl(c,e);if(0==e.length){O(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";N(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Pa(c.getName()))}O(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}h.Ye=function(){return!!this.Ha};h.close=function(){this.Ha=null};
h.ge=function(a,b,c,d){function e(a){O(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var k=this;null===this.Ha&&(a(null),d("abort",this.$e));c==Vk?this.Ha.readTransaction(g,e,f):c==Xk?this.Ha.changeVersion(this.Ha.version,this.Ha.version+1+"",g,e,f):this.Ha.transaction(g,e,f)};
ul.push(function(a,b){if(ia(q.openDatabase)&&(!b||"websql"==b)){var c=new Zo,d=new $l;P(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){var b=c.logger;b&&b.info("all tables in "+a+" deleted.",void 0)};d.B(function(){c.ge(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,O(c.logger,"deleting table: "+
p.name),b.executeSql("DROP TABLE "+p.name))}P(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],Wk,e)});d.Oc(function(){N(c.logger,"Connecting "+a+" failed.")})}});Zo.prototype.Ie=function(){};Zo.prototype.toString=function(){return"WebSql:"+(this.Ha?":"+this.Ha.version:"")};un.prototype.qf=function(a){return"indexeddb"==a&&Yk?new Uo(this.M,this.K):"sqlite"==a&&q.sqlitePlugin?new Zo(this.M,"sqlite"):"websql"==a&&ia(q.openDatabase)?new Zo(this.M):"localstorage"==a&&window.localStorage?new Xo:"sessionstorage"==a&&window.sessionStorage?new Yo:"memory"==a?new Wo:null};function bp(a,b){cc.call(this);this.j=b;this.h=[];if(a>this.j)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.h.push(this.g())}A(bp,cc);bp.prototype.g=function(){return{}};bp.prototype.i=function(a){if(y(a))if(ia(a.$))a.$();else for(var b in a)delete a[b]};bp.prototype.I=function(){bp.m.I.call(this);for(var a=this.h;a.length;)this.i(a.pop());delete this.h};function cp(){this.g=[];this.i=new Hd;this.j=new Hd;this.o=1;this.l=new bp(0,4E3);this.l.g=function(){return new dp};this.p=new bp(0,50);this.p.g=function(){return new ep};var a=this;this.h=new bp(0,2E3);this.h.g=function(){return String(a.o++)};this.h.i=function(){}}L("goog.debug.Trace");function ep(){this.time=this.count=0}ep.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function dp(){}
function fp(a,b,c){var d=[];-1==b?d.push("    "):d.push(gp(a.eventTime-b));d.push(" ",hp(a.eventTime-0));0==a.g?d.push(" Start        "):1==a.g?(d.push(" Done "),d.push(gp(a.i-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.h&&d.push("[VarAlloc ",a.h,"] ");return d.join("")}dp.prototype.toString=function(){return null==this.type?this.comment:"["+this.type+"] "+this.comment};
cp.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.g.length;d++){var e=this.g[d];1==e.g&&c.pop();a.push(" ",fp(e,b,c.join("")));b=e.eventTime;a.push("\n");0==e.g&&c.push("|  ")}if(0!=this.i.ja()){var f=z();a.push(" Unstopped timers:\n");Ed(this.i,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",hp(b.startTime),")\n")})}b=this.j.Ka();for(d=0;d<b.length;d++)c=this.j.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function gp(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function hp(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new cp;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function ip(a){a.p||(a.p=new pd);return a.p}un.prototype.addEventListener=function(a,b,c,d){if("ready"==a)id(ip(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!Db(e,a))throw new G('Invalid event type "'+a+'"');};if(fa(a))for(var g=0;g<a.length;g++)f(a[g]);else f(a);bd(ip(this),a,b,c,d)}};un.prototype.removeEventListener=function(a,b,c,d){kd(ip(this),a,b,c,d)};un.prototype.Za=function(a){ip(this).dispatchEvent(a)};function jp(a,b,c){wn.call(this,a,b,c)}A(jp,To);L("ydn.gdata.base");function kp(a){this.i=a||null;this.g=this.h=null;a&&lp(this,a)}kp.prototype.logger=L("ydn.crm.UserSetting");
var mp={stores:[{name:"general"},{name:"sugar"}]},np={stores:[{name:"contact",keyPath:"id.$t",type:"TEXT",indexes:[{name:"updated.$t",type:"TEXT"},{name:"ydn$emails",multiEntry:!0,generator:function(a){var b=[];a=u(a.gd$email)?a.gd$email:y(a.gd$email)?[a.gd$email]:[];for(var c=0;c<a.length;c++){var d=Bo(a[c].address);d&&b.push(d)}return b}},{name:"ydn$externalIds",multiEntry:!0,generator:function(a){return(u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:
[]).map(function(a){return a.value})}}]}]};function lp(a,b){if(!a.i||a.i!=b){q.sessionStorage.setItem("last-user-id",b);var c="setting-"+b,d="gdata-"+b;a.h&&a.h.getName()!=c&&(a.h.close(),a.h=null);a.g&&a.g.getName()!=d&&(a.g.close(),a.g=null);a.h||(a.h=new jp(c,mp));a.g||(a.g=new jp(d,np))}}function op(a){return a.i?a.i+"-sd":q.sessionStorage.getItem("last-user-id")+"-sd"}function pp(a){var b=op(a),c=new B;chrome.storage.local.get(b,function(a){c.callback(a[b])});return c}
function qp(a,b){var c=op(a),d=new B,e={};e[c]=b;chrome.storage.local.set(e,function(){d.callback(!0)})};function rp(a){a.preventDefault();var b=200,c=100,d=a.target.getAttribute("data-window-height"),e=a.target.getAttribute("data-window-width");e&&(b=parseInt(e,10));d&&(c=parseInt(d,10));window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+b+", height="+c+", top="+(window.innerWidth/2-c/2+window.screenTop)+", left="+(window.innerWidth/2-b/2+window.screenLeft))};function sp(){pd.call(this)}A(sp,pd);sp.prototype.logger=L("ydn.crm.Client");function tp(a,b,c){this.h=a;this.i=b;this.g=c}tp.prototype.request=function(a){return this.h(a)?this.i.request(a):this.g.request(a)};function up(a,b,c){this.client=a;this.i=b;this.h=NaN;this.j=[];this.g=!1;this.l=!!c}up.prototype.request=function(a){return new vp(a,this)};function vp(a,b){a.path=b.i+a.path;this.req=b.client.request(a);this.parent=b;b.l&&(this.req instanceof ok&&(this.req.j=!0),this.j=!0);this.i=null;this.h=void 0}A(vp,ok);
vp.prototype.execute=function(a,b){if(this.parent.g)this.i=a,this.h=b,this.parent.j.push(this);else{this.parent.g=!0;var c=function(c,d){var g=kk(d,"retry-after");this.parent.h=g?/[^0-9|\.]/.test(g)?(new Date(g)).getTime():1E3*parseFloat(g)+z():NaN;a&&a.call(b,c,d);this.parent.g=!1;if(g=this.parent.j.pop())g.execute(g.i,g.h),g.i=null,g.h=null},d=this.parent.h-z();0<d?Xf(function(){this.parent.h=NaN;this.req.execute(c,this)},d,this):this.req.execute(c,this)}};function wp(a,b,c,d,e){this.l=t(a)?a:gk();this.g=b;this.h=c;this.i=d||0;this.j=!!e}wp.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new ok(a,this.l,this.i,this.j)};function xp(a,b,c){this.i=t(a)?a:gk();this.g=b;this.h=c}xp.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new ok(a,this.i)};function yp(a){for(var b=mn(a),c=0;c<b.stores.length;c++);b=(b=Ml)||Ml;b=vn(a,b,!1,void 0,void 0,void 0);this.g=a.ad(b,a.Ya);this.j=!1;a.Wa(this.M,this);this.h=1E4;this.l=be.value;this.i=0;this.t=oa(this.J,this);this.p=!1;this.o={}}function zp(a){if(a.h&&a.i>=a.h){var b=a.h/100;100<b&&(b=100);a.g.keys("db-logger",null,b).B(function(a){a=a.map(function(a){return new Fl("db-logger",a)});this.g.remove(a).B(function(){this.g.count("db-logger").B(function(a){this.i=a},this)},this)},a)}}
function Ap(){var a=Bp;a.h=1E4;zp(a)}yp.prototype.M=function(){this.h&&(this.j=!0,this.g.count("db-logger").B(function(a){this.i=a;zp(this)},this))};function Cp(a){var b=Bp;if(a!=b.p){var c=me();a?ee(c,b.t):(c=c.g)&&Fb(c,b.t);b.p=a}}yp.prototype.J=function(a){if(this.j){var b=a.h;va(b,"ydn.db.")||this.o[b]||!(b=a.j)||b.value<=this.l||(a={exception:a.g,level:b.value,logger:a.h,name:b.name,time:a.l,message:a.getMessage(),seq:a.o},this.g.put("db-logger",a),this.i++,zp(this))}};
function Dp(a,b){var c=Bp,d=a||100,e=b||0,f=zk(["INFO"]);return c.g.values("db-logger","name, time",f,d,e,!0)}var Bp=null;function Ep(a){this.j=a;this.h=this.j.length/4;this.l=this.h+6;this.i=[[],[],[],[]];this.o=[[],[],[],[]];this.g=Array(4*(this.l+1));for(a=0;a<this.h;a++)this.g[a]=[this.j[4*a],this.j[4*a+1],this.j[4*a+2],this.j[4*a+3]];var b=Array(4);for(a=this.h;a<4*(this.l+1);a++){b[0]=this.g[a-1][0];b[1]=this.g[a-1][1];b[2]=this.g[a-1][2];b[3]=this.g[a-1][3];if(0==a%this.h){var c=b,d=c[0];c[0]=c[1];c[1]=c[2];c[2]=c[3];c[3]=d;Fp(b);b[0]^=Gp[a/this.h][0];b[1]^=Gp[a/this.h][1];b[2]^=Gp[a/this.h][2];b[3]^=Gp[a/this.h][3]}else 6<
this.h&&4==a%this.h&&Fp(b);this.g[a]=Array(4);this.g[a][0]=this.g[a-this.h][0]^b[0];this.g[a][1]=this.g[a-this.h][1]^b[1];this.g[a][2]=this.g[a-this.h][2]^b[2];this.g[a][3]=this.g[a-this.h][3]^b[3]}}function Hp(a,b){for(var c=0;4>c;c++)for(var d=0;4>d;d++)a.i[c][d]^=a.g[4*b+d][c]}function Ip(a){for(var b=Jp,c=0;4>c;c++)for(var d=0;4>d;d++)a.i[c][d]=b[a.i[c][d]]}function Kp(a){for(var b=1;4>b;b++)for(var c=0;4>c;c++)a.o[b][c]=a.i[b][c];for(b=1;4>b;b++)for(c=0;4>c;c++)a.i[b][c]=a.o[b][(c+b)%4]}
function Fp(a){a[0]=Jp[a[0]];a[1]=Jp[a[1]];a[2]=Jp[a[2]];a[3]=Jp[a[3]]}
var Jp=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,
61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Gp=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,
0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Lp=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,
27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Mp=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,
17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,
164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26];function Np(a){this.g=a};function Op(a,b){this.h=-1;this.h=Pp;this.j=q.Uint8Array?new Uint8Array(this.h):Array(this.h);this.o=this.i=0;this.g=[];this.M=a;this.p=b;this.J=q.Int32Array?new Int32Array(64):Array(64);t(Qp)||(q.Int32Array?Qp=new Int32Array(Rp):Qp=Rp);this.t()}var Qp;A(Op,Sg);for(var Pp=64,Sp=Pp-1,Tp=[],Up=0;Up<Sp;Up++)Tp[Up]=0;var Vp=Gb(128,Tp);Op.prototype.t=function(){this.o=this.i=0;this.g=q.Int32Array?new Int32Array(this.p):Hb(this.p)};
function Wp(a){for(var b=a.j,c=a.J,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){var e=c[b-15]|0,d=c[b-2]|0,f=(c[b-16]|0)+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,g=(c[b-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=f+g|0}for(var d=a.g[0]|0,e=a.g[1]|0,k=a.g[2]|0,l=a.g[3]|0,m=a.g[4]|0,n=a.g[5]|0,p=a.g[6]|0,f=a.g[7]|0,b=0;64>b;b++)var r=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&k^e&k)|0,g=m&n^~m&p,f=f+((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<
7))|0,g=g+(Qp[b]|0)|0,g=f+(g+(c[b]|0)|0)|0,f=p,p=n,n=m,m=l+g|0,l=k,k=e,e=d,d=g+r|0;a.g[0]=a.g[0]+d|0;a.g[1]=a.g[1]+e|0;a.g[2]=a.g[2]+k|0;a.g[3]=a.g[3]+l|0;a.g[4]=a.g[4]+m|0;a.g[5]=a.g[5]+n|0;a.g[6]=a.g[6]+p|0;a.g[7]=a.g[7]+f|0}
Op.prototype.update=function(a,b){t(b)||(b=a.length);var c=0,d=this.i;if(v(a))for(;c<b;)this.j[d++]=a.charCodeAt(c++),d==this.h&&(Wp(this),d=0);else if(u(a))for(;c<b;){var e=a[c++];if(!("number"==typeof e&&0<=e&&255>=e&&e==(e|0)))throw Error("message must be a byte array");this.j[d++]=e;d==this.h&&(Wp(this),d=0)}else throw Error("message must be string or array");this.i=d;this.o+=b};
Op.prototype.l=function(){var a=[],b=8*this.o;56>this.i?this.update(Vp,56-this.i):this.update(Vp,this.h-(this.i-56));for(var c=63;56<=c;c--)this.j[c]=b&255,b/=256;Wp(this);for(c=b=0;c<this.M;c++)for(var d=24;0<=d;d-=8)a[b++]=this.g[c]>>d&255;return a};
var Rp=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,
4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Xp(){Op.call(this,8,Yp)}A(Xp,Op);var Yp=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Zp(a,b){this.g=a;this.j=Pg("requestAnimationFrame");this.filter=b||null;this.i=!1;this.h=this.prefix=""}function $p(){var a=Xj;a.i||(aq(a),a.i=!0,window.setInterval(function(){a.count().B(function(b){20<b&&aq(a)})},6E5))}Zp.prototype.count=function(){return this.g.count("log")};
function aq(a){var b=$i();if(b){var c={"Content-Type":"application/json"};a.g.values("log",null,40).B(function(a){if(0!=a.length){var e=a.map(function(a){return a.key});a=JSON.stringify(a);a=new bj("https://mhardartway.s3.amazonaws.com/"+(this.prefix+e[0]+this.h),"PUT",null,c,a);e=e.map(function(a){return new Fl("log",a)});b.request(a).execute(function(a,b){fj(b)&&this.g.remove(e).B(function(a){a==e.length&&aq(this)},this)},this)}},a)}}
Zp.prototype.log=function(a){this.filter&&(a=this.filter(a));if(a){var b=JSON.stringify(a);a=String(z());for(var c=[],d=0;16>d;++d)c[d]=256*Math.random()|0;var d=this.j,e=new Xp;e.update(Pg(a));e.update(c);e.update(d);for(var e=e.l(),d=Pg(b),b=c.length-d.length%c.length,f=0;f<b;f++)d.push(10);for(var b=new Ep(e),b=new Np(b),e=[],g=c,f=0;f<d.length;f+=16){for(var k=Kb(d,f,f+16),l=[],m=0;m<k.length;m++)l.push(k[m]^g[m]);for(var g=k=b.g,n=void 0,n=void 0,m=0;4>m;m++)for(var p=0;4>p;p++)n=4*p+m,n=l[n],
g.i[m][p]=n;Hp(k,0);for(g=1;g<k.l;++g){Ip(k);Kp(k);l=k.i;m=k.o[0];for(p=0;4>p;p++)m[0]=l[0][p],m[1]=l[1][p],m[2]=l[2][p],m[3]=l[3][p],l[0][p]=Lp[m[0]]^Mp[m[1]]^m[2]^m[3],l[1][p]=m[0]^Lp[m[1]]^Mp[m[2]]^m[3],l[2][p]=m[0]^m[1]^Lp[m[2]]^Mp[m[3]],l[3][p]=Mp[m[0]]^m[1]^m[2]^Lp[m[3]];Hp(k,g)}Ip(k);Kp(k);Hp(k,k.l);g=[];for(l=0;4>l;l++)for(m=0;4>m;m++)g[4*m+l]=k.i[l][m];k=g;Ib(e,k);g=k}this.g.put("log",{key:a,salt:c,value:Qg(e)})}};var bq,cq,dq=L("ydn.crm");function eq(){bq||(bq=new Kg(0));return bq}var fq=null,gq={};function hq(a,b){"sync"==b&&(y(a["lg-cc"])&&qj(!!a["lg-cc"].newValue),y(a["lg-br"])&&Cp(!!a["lg-br"].newValue),y(a["cp-po"])&&(gq["cp-po"]=a["cp-po"].newValue||iq))}var jq=!1,kq="";z();
function lq(){var a=new B;chrome.storage.local.get("ydn-crm-track",function(b){var c=b["ydn-crm-track"],d=q.CRMinInbox.sugarcrm.Version;b="jsc/ydn.crm.sugarcrm-"+d.release+".js";navigator.onLine&&"Edge"==c?b="https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm.sugarcrm-edge.js":"Beta"==c&&d.beta?b="jsc/ydn.crm.sugarcrm-"+d.beta+".js":"RC"==c&&d.rc&&(b="jsc/ydn.crm.sugarcrm-"+d.rc+".js");a.callback(b);c={};c["sugarcrm-src"]=b;chrome.storage.local.set(c)});return a}
function mq(){if(!jq){jq=!0;var a;a="Yathit CRM Bridge ydn.crm.version 1.1.0 (dev)";Wj("ydn.crm","fine");Wj("ydn.crm.inj.App","finer");Wj("ydn.ds","fine");q.console.info(a);q.console.info("API documentation: http://dev.yathit.com/\nFeedback and suggestion: https://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");qj(!1);nq();fq=new jp("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,indexes:[{name:"level"},{name:"time"},
{name:"name"},{name:"name, time",keyPath:["name","time"]}]},{name:"default",autoIncrement:!0}]});Bp=new yp(fq);Ap();Bp.l=300;Bp.o["ydn.db.tr.DbOperator"]=!0;Cp(!1);fq.Wa(function(){fq.get("default","install-id").B(function(a){a?kq=a["install-id"]:(kq=z()+Math.random().toFixed(8).substr(2),a={},a["install-id"]=kq,fq.put("default",a,"install-id"));Xj.h=kq})});dq.info("Starting ydn.crm.App:1.1.0");var b=["lg-cc","cp-po","lg-br"];chrome.storage.sync.get(b,function(a){for(var d={},e=0;e<b.length;e++)t(a[b[e]])&&
(d[b[e]]={newValue:a[b[e]]});hq(d,"sync")});chrome.storage.onChanged.addListener(hq);nk=Xj=new Zp(fq,function(a){return!a||a.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==a.HttpRequestData.path?null:a});window.onerror=function(a,b,e,f){var g="";f&&f instanceof Error&&(g=f.stack+"");Yj({message:a,url:b,lineNumber:e,stack:g})}}}function nq(){cq||(cq=new xp(eq()),fk(cq,"default"))}
function oq(a){pq();qq();rq();a=new qk(a,bq,!1);fk(a,"gc");fk(new tp(function(a){return"GET"==a.method},a,new up(a,"https://yathit-app.appspot.com/proxy/",!0)),"gse")}function pq(){var a=$i(aj);a||(nq(),a=new wp(eq(),void 0,"https://yathit-app.appspot.com",0,!0),fk(a,aj));return a}function qq(){var a=$i("proxy");a||(a=new up(pq(),"/proxy/"),fk(a,"proxy"))}function rq(){var a=$i("auth");a||(a=new wp(eq(),void 0,"https://yathit-app.appspot.com/a/cm",0,!0),fk(a,"auth"));return a}
function sq(a){y(a)||C("Invalid request data");a=a.email;v(a)&&/\S+@\S+\.\S+/.test(a)||C("Invalid request data for email "+a);return tq(a).B(function(a){return{fc:a}})}function uq(a){sq({email:a}).ba(function(a){window.console.log(a)})}function tq(a){var b=new B;a=a.trim().toLowerCase();a=new bj("/so/info","POST",{email:a});pq().request(a).execute(function(a,d){a?b.callback(a):b.D(d)});return b};function vq(a,b){this.timestamp=b||z();this.type=a;this.i=this.g=this.h=void 0}function wq(a,b){y(b)?a.h=gn(b):a.h=b}vq.prototype.toJSON=function(){return{type:this.type,timestamp:this.timestamp,newValue:this.g,oldValue:this.h,meta:this.i}};function xq(a){this.g=a}xq.prototype.add=function(a){this.g.add("history",a.toJSON())};function yq(a,b){if(a.link){if(u(a.link)){for(var c=0;c<a.link.length;c++)if(a.link[c].rel==b)return a.link[c];return null}return a.link.rel==b?a.link:null}return null};function zq(a,b){this.entry=a;this.data=b;this.g=!1}zq.prototype.data=null;zq.prototype.preventDefault=function(){this.g=!0};function Aq(a,b,c,d){F.call(this,a,b);this.status=c;this.entry=d}A(Aq,F);Aq.prototype.status=NaN;Aq.prototype.U=function(){return this.status};Aq.prototype.Kb=function(){return this.entry.Kb()};function Bq(a,b,c){Aq.call(this,"conflict",a,b,c.entry)}A(Bq,Aq);function Cq(a,b){this.g=a;if(b)throw new vd("optional key paths");}var Dq={Zj:"key",Vj:"date",$j:"modified",Yj:"expires",Xj:"etag",dk:"updated",ek:"uri",NEXT:"next"};Cq.prototype.T=function(a,b){return b&&this.g[a]?Hk(b,this.g[a]):void 0};function Eq(a,b,c,d){a.g[b]&&Ik(c,a.g[b],d)};function Fq(a,b,c,d){this.key=a;this.h=(this.h=d?b[d]:b)||{};this.g=c}function Gq(a){return null!=a.key?a.key:a.g.T("key",a.h)}Fq.prototype.getDate=function(){return this.g.T("date",this.h)};function Hq(a){return a.g.T("updated",a.h)}function Iq(a){return a.g.T("etag",a.h)}function Jq(a){var b={},c=Iq(a);c&&1<c.length?b["if-none-match"]=c:(a=Hq(a))&&(b["if-modified-since"]=a);return b}
Fq.prototype.toJSON=function(){var a={};Eq(this.g,"key",a,Gq(this));var b=this.getDate();b&&Eq(this.g,"date",a,b);(b=this.g.T("expires",this.h))&&Eq(this.g,"expires",a,b);(b=Hq(this))&&Eq(this.g,"updated",a,b);(b=Iq(this))&&Eq(this.g,"etag",a,b);return a};function Kq(a,b,c){b.expires&&Eq(c,"expires",b,(new Date(b.expires)).getTime());b["last-updated"]&&Eq(c,"updated",b,(new Date(b["last-updated"])).getTime());b.etag&&Eq(c,"etag",b,(new Date(b.etag)).getTime());Eq(c,"date",b,NaN);Fq.call(this,a,b,c)}A(Kq,Fq);function Lq(a,b,c){this.g=a;this.o=c||null;this.i=this.h=null;this.key=b}h=Lq.prototype;h.logger=L("ydn.db.sync.entry.Rest");h.Kb=function(){if(this.i&&this.g.p&&this.j){var a=this.g.t;this.g.K||delete this.i[a]}return this.i||null};h.T=function(){return this.o};h.C=function(){return this.key};h.af=function(){return this.g.$f(this.C())};function Mq(a,b){var c=a.C();return new Kq(c,b.sd(),a.g.o)}
h.Bf=function(a,b){if(a)return a;if(fj(b))return lk(b);try{return lk(b)}catch(c){var d=jk(b);return y(d)?d:{body:d}}};h.save=function(a){var b=this.C();if(a&&!this.g.p)return z(),Nq(this.g,[this.j.toJSON()]);var c=this.i;if(a&&!c)return bc();a=void 0;null!=this.j&&(z(),a=[this.j.toJSON()]);return Oq(this.g,[c],a,[b])};
h.Jc=function(a,b){if(this.g.J&&y(this.h))a.call(b,304),a=null;else{var c=this;Pq(this,function(d){if(d){var e=d.g.T("expires",d.h);if(e&&e>z()){O(this.logger,this+" not expired");a.call(b,304);a=null;return}}e=c.af();d=c.Gc(e,"GET",d);this.g.ua().request(d).execute(function(d,e){c.j=Mq(c,e);c.i=c.Bf(d,e);a.call(b,e.U());a=null})},this)}};
h.Gc=function(a,b,c,d){a=new bj(a,b);if(c){var e;"POST"==a.method||"PUT"==a.method||"DELETE"==a.method?(e={},(b=Hq(c))&&(e["if-unmodified-since"]=b),(c=Iq(c))&&1<c.length&&(e["if-match"]=c),c=e):c=Jq(c);e=c;a.headers?Sc(a.headers,e):a.headers=e}a.body=y(d)?JSON.stringify(d):d;O(this.logger,this+" "+a.method+" "+a.path+" "+Ci(e));return a};
function Qq(a,b,c){Pq(a,function(a){var e=this.T();a=this.Gc(this.af(),"PUT",a,e);this.g.ua().request(a).execute(function(a,d){this.j=Mq(this,d);this.i=a;b&&(b.call(c,d.U()),b=null)},this)},a)}function Pq(a,b,c){a.l?b.call(c,a.l):Rq(a.g,a.C(),function(d){a.l=d;b.call(c,d)})}
h.load=function(a,b){if(this.h&&this.l)a&&(a.call(b,this.h,this.l),a=void 0);else{var c=this.C();this.g.load(c,function(c,e){this.h=c;var f=this.g.t;this.h&&f&&this.h[f]&&(this.l=new Fq(this.key,this.h,this.g.o,f),this.g.K||delete this.h[f]);this.h=c;this.l=e;a&&(a.call(b,c),a=void 0)},this)}};function Sq(a,b){var c=a.af(),d=a.g.ua();Pq(a,function(a){a=this.Gc(c,"DELETE",a);d.request(a).execute(function(a,d){O(this.logger,"deleted "+c+" "+d.U());b.call(this,d.U())},this)},a)}
h.toString=function(){return"sync.entry{"+this.g.L()+":"+this.key+"}"};function Tq(a,b,c){this.storage=a;this.store=b;this.V=b.getName();a="format readRequestTimeout writeRequestTimeout transport Options fetchStrategies baseUri immutable keepMeta metaStoreName metaDataName prefetch prefetchRefractoryPeriod".split(" ");for(var d in c)if(-1==ub(a,d))throw new G('Unknown Sync attribute "'+d+'"  in Sync.');this.J=!!c.immutable;this.h=c.baseUri;this.Ob=c.metaStoreName||this.V;this.t=c.metaDataName;this.p=this.Ob==this.V;a=c.Options||{};if(!this.Ob)throw new G("metadata store name required.");
b=this.Hb();for(d in a)if(-1==ub(b,d))throw new G('Unknown Sync.Options attribute "'+d+'" in Sync.Options');this.Y=a.delimiter||"";this.j=a.prefix||"";this.K=!!c.keepMeta;this.S=c.prefetch||ha(c.prefetchRefractoryPeriod)?"full":null;this.N=ha(c.prefetchRefractoryPeriod)?c.prefetchRefractoryPeriod:5E3;this.g=Uq(c.transport);this.o=new Cq(this.Gb(),c.metaData);this.l=null;this.M=NaN}h=Tq.prototype;h.Gb=function(){var a={},b;for(b in Dq)a[b]=b;return a};h.Hb=function(){return[]};h.L=function(){return this.V};
h.logger=L("ydn.db.sync.Rest");h.Ub=function(){return this.h};h.ua=function(){this.g||(this.g=new xp);return this.g};h.toString=function(){return"sync:"+this.V};function Nq(a,b){return tm(a.storage.g,a.Ob,b).Oc(function(a){throw a;})}function Vq(a,b,c){a.store.keyPath&&null==km(a.store,b)&&null!=c&&Ik(b,a.store.keyPath,c)}
function Oq(a,b,c,d){d=a.store.keyPath?void 0:d;if(c){if(a.p){for(g=0;g<b.length;g++)null!=c[g]&&Sc(b[g],c[g]);return tm(a.storage.g,a.V,b,d)}if(b){for(var e=[],f=b.concat(c),g=0;g<b.length;g++){var k=a.store.keyPath?NaN:d[g];e.push(new Fl(a.V,k))}for(g=0;g<c.length;g++)e.push(new Fl(a.Ob,NaN));return tm(a.storage.g,e,f)}return tm(a.storage.g,a.Ob,c)}for(g=0;g<b.length;g++)k=d?d[g]:void 0,Vq(a,b[g],k);return tm(a.storage.g,a.V,b,d)}
function Wq(a,b){var c=[new Fl(a.V,b)];a.p||c.push(new Fl(a.Ob,b));return um(a.storage.g,c)}h.$f=function(a){return this.Ub()+a};h.add=function(a,b,c){null!=c?Vq(this,b,c):this.store.keyPath&&(c=km(this.store,b));var d=this.Ba(c,b),e=this;Qq(d,function(a){201==a||200==a?(O(e.logger,d+" created"),d.save(!0)):N(e.logger,"Unexpected respond "+a+" for add "+d)})};
function Rq(a,b,c){var d=new Fl(a.Ob,b);Xq(a,[d]).A(function(a){c.call(void 0,new Fq(b,a[0],this.o,this.t))},function(a){N(this.logger,this+" error loading meta data "+a);c.call(void 0,null)},a)}h.De=function(a,b){var c=a.map(function(a){return new Fl(this.Ob,a)});Xq(this,c).A(function(c){for(var e=[],f=0;f<a.length;f++)e[f]=new Fq(a[f],c[f],this.o,this.t);b(e)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)};
h.load=function(a,b,c){var d=this.Ob,e=[new Fl(this.L(),a)];this.p||e.push(new Fl(d,a));Xq(this,e).A(function(d){var e=d[0];b.call(c,e,new Fq(a,this.p?e:d[1],this.o,this.t))},function(a){N(this.logger,this+" error loading meta data "+a);b.call(c,null,null)},this)};function Xq(a,b){return xm(a.storage.g,b)}
h.get=function(a,b){this.M||this.qc();sl(a,function(c,d,e){if(d)e(c,d);else{re(a,c);var f=t(c);if(f&&this.J)e(c);else{var g=this.Ba(b,c);g.Jc(function(a){if(304==a){if(e(c),!f)throw new yd(g+" not modified, but not exist in server");}else if(200==a)g.save().ba(function(){e(g.Kb())});else if(404==a)Wq(g.g,g.C()).ba(function(){e(g.Kb())});else throw e(g.Kb()),new xd("Invalid HTTP respond "+a+" for GET "+b);},this)}}},this)};
function Yq(a,b,c,d,e,f){var g=[],k=a.logger;P(a.logger,d.length+", "+e.length+", "+f.length+", "+g.length+" records to fetch, update, delete, save");var l=d.length+e.length+f.length+g.length;if(0==l)b(c);else{for(var m=!1,n=function(){l--;0==l&&(b(c,m),b=null)},g=0;g<d.length;g++){var p=a.Ba(d[g]);p.index=g;p.Jc(function(a){200==a?(ie(k,"A new "+this+" received from server"),this.save().A(function(){c[this.index]=this.Kb();n()},function(){m=!0;n()},this)):304==a?this.save(!0).A(function(){ie(k,this+
" expires date updated");n()},function(){m=!0;n()},this):(J(k,"Invalid status "+a+" for fetching "+this),n())},p)}for(g=0;g<e.length;g++)p=a.Ba(e[g]),p.index=g,p.load(function(){this.Jc(function(a){200==a?(ie(k,this+" updated from server"),this.save().A(function(){c[this.index]=this.Kb();n()},function(){m=!0;n()},this)):(J(k,"Invalid status "+a+" for fetching "+this),n())})});for(g=0;g<f.length;g++)p=a.Ba(f[g]),p.index=g,Wq(p.g,p.C()).A(function(){c[this.index]=new zq(p,null);n()},function(){m=!0;
n()},p)}}function Zq(a,b,c){sl(b,function(a,e,f){if(e)f(a,e);else if(Ab(a,function(a){return t(a)})&&this.J)f(a);else{re(b,a);var g=a.length;for(e=0;e<c.length;e++)if(this.J&&t(a[e]))g--,0==g&&f(a);else{var k=this.Ba(c[e],a[e]);k.index=e;k.Jc(function(b){200==b?(a[this.index]=this.Kb(),this.save()):404==b&&(a[this.index]=void 0);g--;0==g&&f(a)},k)}}},a)}h.Ba=function(a,b){return new Lq(this,a,b)};h.count=function(a){return a};h.gg=function(){throw new vd;};
h.values=function(a,b,c){$q(this)?(O(this.logger,"prefetch queued"),sl(a,function(d,e,f){re(a,d);e?f(d,e):ar(this,function(a){a?wm(this.storage.g,this.V,null,null,!1,b,c).A(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(){N(this.logger,this+" prefetch fail");f(d)},this)},this)):this.gg(a,b,c)};
h.keys=function(a,b,c,d,e,f,g){sl(a,function(k,l,m){re(a,k);l?m(k,l):ar(this,function(a){a?ym(this.storage.g,this.V,b,c,d,e,f,g).A(function(a){m(a)},function(a){m(a,!0)},this):m(k)},function(){N(this.logger,this+" prefetch fail");m(k)},this)},this)};h.zf=function(){};
h.put=function(a,b,c){c=t(c)?c:this.store.keyPath?km(this.store,b):null;var d=this.Ba(c,b);U(a,function(){d.load()},this);sl(a,function(c,f,g){re(a,c);Qq(d,function(c){409==c?d.Jc(function(){var c=new zq(d,b);re(a,c);c.g?g(null,f):g(void 0,f)}):200==c||201==c?(d.save(!0),g(b,f)):(N(this.logger,"Unexpected response for PUT: "+c),g(null,f))},this)},this)};
h.remove=function(a,b){var c=this,d=this.Ba(b);d.load(function(){sl(a,function(e,f,g){Sq(d,function(f){if(409==f){f=new zq(d,null);re(a,f);var l=new Bq(c.storage,409,f);c.storage.Za(l)}else 200==f?O(c.logger,"Successfully deleted object "+b):(N(c.logger,"Unexpected response for DELETE: "+f+" "+b),re(a,l));g(e)})})})};
h.qc=function(){O(this.logger,this+" starting prefetch");var a=new B;wm(this.storage.g,this.V,"updated.$t",null,!0,1).A(function(b){var c={};if(b=b[0])b=Nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new bj(this.Ub(),"GET",c);d.ua().request(c).execute(function(b,c){if(200==c.U()){if(!b){var g=jk(c);v(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?u(g)?g:[g]:[];0<g.length?Oq(d,g).ba(function(){a.callback(!0)}):a.callback(!1)}else 302==c.U()?a.callback():
(g=d+": Invalid response status "+c.U()+" on prefetching",N(d.logger,g),a.D(Error(g)))})},function(b){a.D(b)},this);return a};function $q(a){return a.S?a.M?z()-a.M>a.N:!0:!1}function ar(a,b,c,d){$q(a)?a.l?a.l.A(b,c,d):(a.l=a.qc(),a.M=z(),a.l.A(b,c,d),a.l.A(function(a){O(this.logger,"prefetch "+(a?"updated":"no update"));this.l=null},function(a){this.l=null;throw a;},a)):b.call(d,!1)};function br(a,b,c){Tq.call(this,a,b,c)}A(br,Tq);br.prototype.logger=L("ydn.db.sync.Atom");br.prototype.Hb=function(){return br.m.Hb.call(this)};br.prototype.C=function(a){return a.key};function cr(a){this.data=a}h=cr.prototype;h.C=function(){return this.data.id.$t};h.Nd=function(){return this.data.title?this.data.title.$t:void 0};h.Te=function(a){return yq(this.data,a)};h.Gj=function(){var a=this.Te("self");return a?a.href:void 0};h.Fj=function(){var a=this.Te("http://schemas.google.com/g/2005#batch");return a?a.href:""};h.ca=function(){return this.data.content||null};function dr(a,b,c){Lq.call(this,a,b,c)}A(dr,Lq);dr.prototype.logger=L("ydn.db.sync.entry.S3");dr.prototype.getName=function(){return this.g.j+this.key};dr.prototype.Gc=function(a,b,c,d){b=dr.m.Gc.call(this,a,b,c,d);if("PUT"==b.method||"POST"==b.method){c=Re(new De(a)).substr(1);if(1>c.length)throw new xd("invalid url "+a);b.headers.Key=c;a=b.headers["Content-Type"]||"application/json";d instanceof File?a=d.type:v(d)&&(a=/<*DOCTYPE html/i.test(d)?"text/html":"text/plain");b.headers.ContentType=a}return b};function er(a){this.data=a}A(er,cr);var fr={atom:"http://www.w3.org/2005/Atom",ydn:"http://www.yathit.com/2012/ydn",app:"http://www.w3.org/2007/app",openSearch:"http://a9.com/-/spec/opensearch/1.1/",gAcl:"http://schemas.google.com/acl/2007",sites:"http://schemas.google.com/sites/2008",gs:"http://schemas.google.com/spreadsheets/2006",dc:"http://purl.org/dc/terms",batch:"http://schemas.google.com/gdata/batch",gd:"http://schemas.google.com/g/2005",gContact:"http://schemas.google.com/contact/2008",thr:"http://purl.org/syndication/thread/1.0",
xhtml:"http://www.w3.org/1999/xhtml"};function gr(a,b){for(var c=a.indexOf(" "),d=0;d<b.length;d++){var e=b[d],e=(0==d?"xmlns":"xmlns:"+e)+'="'+fr[e]+'"';-1==a.indexOf(e)&&(a=a.substring(0,c+1)+e+" "+a.substr(c+1))}return a}L("ydn.xml");function hr(a){return fr[a]||fr.xhtml};function ir(a,b,c){c=!!c;if(a.getName()!=b.getName())return!1;var d=jr(a),e=jr(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;for(d=0;d<e.length;d++)if(a.getAttribute(e[d])!=b.getAttribute(e[d]))return!1;d=kr(a);e=kr(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;if(0==d.length||0==d.length)return a.data.$t===b.data.$t;for(d=0;d<e.length;d++){var f=lr(a,e[d]),g=lr(b,e[d]);if(!c&&f.length!=g.length||c&&g.length>f.length)return!1;for(var k=0;k<g.length;k++)if(-1==Cb(f,function(a){return ir(a,
g[k],c)}))return!1}return!0};function mr(a,b,c){if(t(b))nr(this,b),t(c)||(c=a[b]);else for(var d in a)if(a.hasOwnProperty(d)&&y(a[d])&&v(a[d].xmlns)){this.Rd=[d].xmlns;nr(this,d);c=a[d];break}this.data=c;this.parent=a}h=mr.prototype;h.Rd="http://www.w3.org/2005/Atom";function nr(a,b){var c=b.split(":");1<c.length&&(a.Rd=hr(c[0])||mr.prototype.Rd,b=c[1]);a.tagName=b}
h.n=function(a,b){var c;c=a;var d=b,e=c;if(t(d))"atom"!=d&&(e=d+"$"+c);else{var f=c.split(":"),e=c.replace(/:/,"$");2==f.length&&(d=f[0],c=f[1])}d=t(d)?hr(d):void 0;c=t(this.data[c])&&t(d)&&this.data[c].xmlns==d?c:e;return u(this.data[c])?new mr(this.data,c,this.data[c][0]):y(this.data[c])?new mr(this.data,c,this.data[c]):null};h.toString=function(){return"JsonElement:"+this.tagName};h.getName=function(){return this.tagName};
function or(a,b){for(var c in a.data)a.data.hasOwnProperty(c)&&y(a.data[c])&&delete a.data[c];a.data.$t=b}h.getAttribute=function(a){a=a.replace(/:/,"$");return this.data[a]};h.setAttribute=function(a,b){a=a.replace(/:/,"$");this.data[a]=b};h.removeAttribute=function(a){a=a.replace(/:/,"$");delete this.data[a]};function jr(a){var b=[],c;for(c in a.data)a.data.hasOwnProperty(c)&&v(a.data[c])&&"$t"!=c&&b.push(c);return b}
function lr(a,b){t(void 0)?b="undefined$"+b:t(b)&&(b=b.replace(/:/,"$"));var c=[];if(t(b)){var d=a.data[b];if(u(d))for(var e=0;e<d.length;e++)c.push(new mr(a.data,b,d[e]));else y(d)&&c.push(new mr(a.data,b,d))}else for(d in a.data)if(u(a.data[d]))for(e=0;e<a.data[d].length;e++)c.push(new mr(a.data,d,a.data[d][e]));else y(a.data[d])&&c.push(new mr(a.data,d,a.data[d]));return c}function kr(a){var b=[],c;for(c in a.data)y(a.data[c])&&b.push(c.replace("$",":"));return b}
h.appendChild=function(a){var b=a.getName();this.data[b]?(u(this.data[b])||(this.data[b]=[this.data[b]]),this.data[b].push(gn(a.data))):this.data[b]=gn(a.data)};h.removeChild=function(a){if(a.parent!=this.data)throw Error("NOT_FOUND_ERR: JSON:DOM Exception 8: "+a+" not in "+this);var b=a.getName();u(this.data[b])?Fb(this.data[b],a.data):delete this.data[b]};
h.update=function(a,b,c,d,e){var f=!1;c=c||{};var g=t(b),k=!0===b||!g,l=!1===b,m=jr(this),n=jr(a);if(!g)for(var p=0;p<m.length;p++)t(e)&&!e[m[p].replace("$",":")]||Db(n,m[p])||(this.removeAttribute(m[p]),f=!0);for(p=0;p<n.length;p++){var r=a.getAttribute(n[p]);if(!t(e)||e[n[p].replace("$",":")])Db(m,n[p])?l||r==this.getAttribute(n[p])||(this.setAttribute(n[p],r),f=!0):(this.setAttribute(n[p],r),f=!0)}if(0==pr(a)&&k&&(e=this.data.$t,l=a.data.$t,t(l)&&e!=l))return or(this,l),!0;if(!g)for(var s in this.data)d&&
!d[s.replace("$",":")]||!y(this.data[s])||y(a.data[s])||(delete this.data[s],f=!0);s=kr(a);for(e=0;e<s.length;e++)if(l=s[e],!d||!0==d[l]){var w=lr(a,l),m=lr(this,l),x=l.replace(":","$");if(1==w.length)0==m.length?(this.data[x]=gn(w[0].data),f=!0):1==m.length?c[l]?k&&!ir(m[0],w[0],!0)&&(u(this.data[x])||(this.data[x]=[this.data[x]]),this.data[x].push(gn(w[0].data)),f=!0):f=m[0].update(w[0],b)||f:g?(l=Cb(m,function(a){return ir(a,w[0],!0)}),-1==l&&k&&(this.data[x].push(gn(w[0].data)),f=!0)):(this.data[x]=
gn(w[0].data),f=!0);else if(!u(this.data[x]))if(k)this.data[x]=gn(a.data[x]),f=!0;else{if(g){var m=gn(a.data[x]),H=this,l=Cb(m,function(a){return Pm(H.data[x],a)});-1==l&&(m.push(this.data[x]),this.data[x]=m,f=!0)}}else if(k)for(m.length>w.length&&(this.data[x].splice(w.length,m.length-w.length),f=!0),p=0;p<w.length;p++)t(m[p])?Pm(m[p].data,w[p].data)||(this.data[x][p]=gn(w[p].data),f=!0):(this.data[x][p]=gn(w[p].data),f=!0);else if(g)for(p=0;p<a.data[x].length;p++)l=Cb(this.data[x],function(b){return Pm(a.data[x][p],
b)}),-1==l&&(this.data[x].push(gn(a.data[x][p])),f=!0)}return f};h.ig=function(a,b,c,d,e){t(b)||(b=!1);return this.update(a,b,c,d,e)};h.toJSON=function(){return{data:this.data,tagName:this.tagName}};
function qr(a){function b(a,g){d(g,a);var k,l;for(l in a)if(a.hasOwnProperty(l)&&!v(a[l]))if(v(a[l].$t)&&"xhtml"==a[l].type){k=c(l);d(k,a[l]);var m=Gi(a[l].$t);e.importNode(m.documentElement,!0);k.appendChild(m.documentElement);g.appendChild(k)}else if(v(a[l].$t))k=c(l),k.textContent=a[l].$t,d(k,a[l]),g.appendChild(k);else if(u(a[l])&&a[l][0]&&v(a[l][0].$t))for(m=0;m<a[l].length;m++)k=c(l),k.textContent=a[l][m].$t,d(k,a[l][m]),g.appendChild(k);else if(u(a[l]))for(m=0;m<a[l].length;m++)k=c(l),g.appendChild(k),
b(a[l][m],k);else y(a[l])&&(k=c(l),g.appendChild(k),b(a[l],k))}function c(a){return e.createElement(a.replace("$",":"))}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&"$t"!=c&&v(b[c])&&a.setAttribute(c.replace("$",":"),b[c])}var e=Ei(a.getName(),a.Rd);b(a.data,e.documentElement);return Hi(e.documentElement)}
function pr(a){function b(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&(u(a[c])?b+=a[c].length:y(a[c])&&b++);return b}var c;t(void 0)?c="undefined$"+c:t(c)&&(c=c.replace(/:/,"$"));return t(c)?u(a.data[c])?a.data[c].length:y(a.data[c])?b(a.data[c]):0:b(a.data)}h.clone=function(a){var b={};if(t(a))for(var c in this.data){var d=c.replace("$",":");v(this.data[c])?b[c]=this.data[c]:!0==a[d]&&(b[c]=gn(this.data[c]))}else b=gn(this.data);return new mr(null,this.tagName,b)};
function rr(a,b){var c=b.ownerDocument.createElementNS(a.Rd,a.getName()),d;for(d in a.data)if(a.data.hasOwnProperty(d)){var e=d.replace("$",":");if(v(a.data[d]))"$t"==d?c.textContent=a.data[d]:(e=c.ownerDocument.createAttribute(e),e.nodeValue=a.data[d],c.setAttributeNode(e));else if(u(a.data[d]))for(var f=0;f<a.data[d].length;f++){var g=new mr(a.data[d],e,a.data[d][f]);rr(g,c)}else y(a.data[d])&&(g=new mr(a.data,e,a.data[d]),rr(g,c))}return b.appendChild(c)};function sr(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.g))b=a.g.$t;else throw new Ii("id or batch:id required.");this.id=b;this.h=void 0;this.data=a}A(sr,er);h=sr.prototype;h.logger=L("ydn.gdata.Entry");h.bf=function(){return this.kind};h.getData=function(){return this.data};h.Nd=cr.prototype.Nd;h.C=function(){return this.id};function tr(a){return a.id.match(/\w+$/)[0]}h.Pc=["link","category"];h.uh=["id","batch$id","link","category"];h.ca=cr.prototype.ca;
function ur(a,b){if(b)a.getData().status=""==b?void 0:b;else{var c=a.getData();c.status&&(c.status=b)}}function vr(a){return t(a.gd$deleted)?"gd:deleted":(a=a.status)?a:""}function wr(a){return"gd:deleted"==vr(a.getData())}h.setTitle=function(){throw new Ki;};
h.Zg=function(){if(!xr(this.getData()))throw Error("nothing to commit");var a=new B;yr(this,function(b,c){if(fj(c))a.callback(b);else{var d=jk(c);if(v(d)&&/html/.test(kk(c,"content-type")))try{var e=(new DOMParser).parseFromString(d,"text/html");e.body&&(d=e.body.innerHTML)}catch(f){}a.D(c.U()+" "+c.La()+" "+d)}},this);return a};
function yr(a,b,c){var d=$i("gse");if(xr(a.getData())){var e={"Content-Type":"application/atom+xml"};a.g&&(e["GData-Version"]=a.g);var f={},g="POST",k,l,m;m="full";t(l)||(l="base"!=m);var n=a.kind||"contact";k=k?"/"+k:"";k=(l?"https":"http")+"://www.google.com/m8/feeds/"+n+"s/"+a.user_id.replace("@","%40")+"/"+m+k;k=k.replace("%40","@");if(l=(l=a.Te("edit"))?l.href:void 0)g="delete"==vr(a.getData())?"DELETE":"PUT",k=l;try{var p=zr(a)}catch(r){Yj({"class":"ydn.gdata.Entry",method:"ydn.gdata.Entry.commit",
"entry.data":a.getData(),context:"toXmlString",error:{name:r.name,message:r.message,stack:r.stack}})}l=a.type;m=["atom","app","gd","batch","ydn"];if("sites"==l||"site"==l||"content"==l||"webpage"==l)m=m.concat("xhtml","sites");else if("m8"==l||"contact"==l)m=m.concat("gContact");p=gr(p,m);sr.g&&(a.h=[k,f,g,e,p]);d.request(new bj(k,g,f,e,p)).execute(b,c)}else he(a.logger,a+" commit ignore since not modified."),b&&b.call(c,null,null)}
function xr(a){if(null==a.id)return!0;a=vr(a);return"modified"===a||"delete"===a}h.Af=function(){return this.data};function zr(a){var b=new mr(null,"entry",a.Af()),c=!1;b.xmlns||(b.xmlns="http://www.w3.org/2005/Atom",c=!0);var d=["atom"],e;for(e in a.data)if(a=e.match(/^(\w+)\$\w+/))a=a[1],a in fr&&(Db(d,a)||d.push(a));e=qr(b);c&&delete b.xmlns;return gr(e,d)}
h.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&y(a.data[c])&&!Db(b,c)&&!Db(this.uh,c)&&(this.data[c]=a.data[c])};h.jg=function(a,b){if(Pm(this.data[a],b))return!1;this.data[a]=gn(b);return!0};
h.ig=function(a){if(a.data.updated.$t>=this.data.updated.$t&&wr(a)){if(wr(this)||"delete"==vr(this.getData()))return!1;ur(this,"delete");return!0}var b=!1,c;for(c in a.data)a.data.hasOwnProperty(c)&&y(a.data[c])&&!Db(this.uh,c)&&this.jg(c,a.data[c])&&(b=!0);b&&(a=vr(this.getData()),"delete"==a?J(this.logger,this+" marked for deletion. Cannot mark modify flag."):"committed"==a?this.logger.log(Wd,this+" already committed. All changes must wait until updated from the server.",void 0):ur(this,"modified"));
return b};function Ar(a,b,c){Lq.call(this,a,b,c)}A(Ar,Lq);Ar.prototype.af=function(){return this.key};Ar.prototype.Gc=function(a,b,c,d){a=Ar.m.Gc.call(this,a,b,c,d);this.g.Sh(a.method)&&q.gapi&&q.gapi.auth&&(b=gapi.auth.getToken())&&b.access_token&&(a.headers.Authorization=b.token_type+" "+b.access_token);if("GET"==a.method)a.params.alt="json";else if("PUT"==a.method||"POST"==a.method)d=new sr(d),a.body=zr(d),a.headers["Content-Type"]="application/atom+xml";return a};
Ar.prototype.Bf=function(a,b){a=Ar.m.Bf.call(this,a,b);a.feed&&(a=a.feed);a.entry&&(a=a.entry);return a};function Br(a,b,c){Tq.call(this,a,b,c);a=c.Options;this.kind=a.kind;this.version=a.version;this.projection=a.projection;this.i=a.maxResults}A(Br,br);h=Br.prototype;h.projection=null;h.version=null;h.logger=L("ydn.db.sync.GData");h.Ba=function(a,b){return new Ar(this,a,b)};h.Gb=function(){var a=Br.m.Gb.call(this);a.key=["id","$t"];a.etag="gd$etag";a.updated=["updated","$t"];return a};h.Hb=function(){var a=Br.m.Hb.call(this);return a=a.concat(["version","projection","kind","maxResults"])};
h.Ub=function(){return"https://www.googleapis.com/"+this.kind+"/"};h.Sh=function(){return!1};h.C=function(a){return a?a.id?a.id.$t:"":""};
function Cr(a,b,c){var d=c||a.Ub();c&&O(a.logger,"continuing "+c);b=new bj(d,"GET",b);var e=new B;a.ua().request(b).execute(function(b,d){if(200==d.U()){if(!b){var k=jk(d);v(k)&&(b=JSON.parse(k))}var k=b.feed||b,l=k.entry,l=l?u(l)?l:[l]:[];0<l.length&&Oq(a,l);for(var l=null,k=k.link,k=u(k)?k:[k],m=0;m<k.length;m++)"next"==k[m].rel&&(l=k[m].href);l?Wb(Cr(a,{},l),e):(O(a.logger,"prefetch "+a.V+" done"),e.callback(!!c))}else 302==d.U()?e.callback():(k=a+": Invalid response status "+d.U()+" on prefetching",
N(a.logger,k),e.D(Error(k)))});return e}h.qc=function(){O(this.logger,"starting prefetch");var a=new B;wm(this.storage.g,this.V,"updated.$t",null,!0,1).B(function(b){var c={alt:"json",kind:this.kind};this.i&&(c["max-results"]=this.i);(b=b[0])?(b=Nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b,O(this.logger,this.V+" fetching entries later then "+b)):O(this.logger,this.V+" fetching entries from beginning");Wb(Cr(this,c),a)},this);return a};
h.count=function(a){var b=$k(this.store,"updated.$t");if(!b)return a;var c=pl(a);a.A(function(a){re(c,a);wm(this.storage.g,this.V,b.getName(),null,!1,1).A(function(b){var f={alt:"json"};if(b=u(b)?b[0]:b)b=Nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),f["updated-min"]=b;var g=this,f=new bj(this.Ub(),"GET",f);this.ua().request(f).execute(function(b,e){if(200==e.U()){if(!b){var f=jk(e);v(f)&&(b=JSON.parse(f))}f=Nc(b.feed,"openSearch$totalResults");c.callback(a+parseFloat(f||0))}else N(g.logger,
g+":Unexpected respond status "+e.U())})},function(a){c.D(a)},this)},function(a){c.D(a)},this);return c};function Dr(a,b,c){Lq.call(this,a,b,c)}A(Dr,Ar);function Er(a,b,c){Br.call(this,a,b,c);this.h=this.h.substr(27);this.ic=c.Options.prefix}A(Er,Br);Er.prototype.ua=function(){this.g||(this.g=new Fr(gapi.client));return this.g};Er.prototype.Ba=function(a,b){return new Dr(this,a,b)};Er.prototype.Ub=function(){return this.h+this.ic};
Er.prototype.qc=function(){O(this.logger,"starting prefetch");var a=new B;wm(this.storage.g,this.V,"updated",null,!0,1).A(function(b){var c={alt:"json"};if(b=b[0])b=Nc(b,"updated"),b=(new Date(1+ +new Date(b))).toISOString(),c.updatedMin=b;var d=this,c=new bj(this.Ub(),"GET",c);d.ua().request(c).execute(function(b,c){if(b){var g=b.items||[];0<g.length?Oq(d,g).ba(function(){a.callback(!0)}):a.callback(!1)}else 302==c.U()?a.callback():(g=d+": Invalid response status "+c.U()+" on prefetching",N(d.logger,
g),a.D(Error(g)))})},function(b){a.D(b)},this);return a};function Gr(a,b){if(!t(q.AWS))throw new xd("AWS JS SDK not loaded");this.h=a;this.region=b;this.g=null}Gr.prototype.request=function(a){return new Hr(this,a)};function Ir(a){var b={params:{Bucket:a.h,region:a.region}};if(!a.h)throw new G("bucket name required");a.g||(a.g=new AWS.S3(b));return a.g}function Hr(a,b){this.parent=a;this.g=b}
function Jr(a,b,c,d,e){var f=NaN,g="",k={};a=Ir(a.parent)[b](c);a.on("complete",function(a){a.httpResponse&&(f=a.httpResponse.statusCode,v(f)&&(f=parseInt(f,10)),k=a.httpResponse.headers);a.error&&(g=a.error.message,f||(f=400))});a.send(function(a,b){var c=new hk(f,b,k,g);a?d.call(e,null,c):d.call(e,b,c)})}
Hr.prototype.execute=function(a,b){var c=Re(new De(this.g.path)),c="/"==c.charAt(0)?c.substr(1):c,d=this.g.headers||{};c&&(d.Key=c);if(c)if("GET"==this.g.method)Jr(this,"getObject",d,a,b);else if("PUT"==this.g.method)Jr(this,"putObject",d,a,b);else throw new vd("HTTP method "+this.g.method);};function Kr(a,b){this.g=a;this.prefix=Lr(this,"Prefix")[0];this.h=b.type}Kr.prototype.ja=function(){return this.g.documentElement.getElementsByTagName("Contents").length};Kr.prototype.keys=function(){var a=Lr(this,"Key");if(this.prefix){var b=this.prefix.length,a=a.map(function(a){return a.substr(b)});"INTEGER"==this.h?a=a.map(function(a){return parseInt(a,10)}):"NUMERIC"==this.h&&(a=a.map(function(a){return parseFloat(a)}))}return a};
function Lr(a,b){for(var c=[],d=a.g.documentElement.getElementsByTagName(b),e=d.length,f=0;f<e;f++)c[f]=d[f].textContent;return c}function Mr(a){return Lr(a,"LastModified").map(function(a){return(new Date(Date.parse(a))).toGMTString()})}
function Nr(a){var b=a.g.documentElement.getElementsByTagName("NextMarker");return 1==b.length?b[0].textContent:"true"==a.g.documentElement.getElementsByTagName("IsTruncated")[0].textContent&&(a=a.g.documentElement.firstElementChild.lastElementChild)&&"Contents"==a.tagName?a.getElementsByTagName("Key")[0]:null};function Or(a,b,c){Tq.call(this,a,b,c);this.i=c.Options.bucket;if(!v(this.i)||ya(this.i))throw new G("bucket name required.");this.h||(this.h="https://"+this.i+".s3.amazonaws.com/");if(!0===b.autoIncrement)throw new G('S3 object store "'+b.getName()+'" must not set autoIncrement to true.');}A(Or,Tq);h=Or.prototype;h.logger=L("ydn.db.sync.S3");h.Hb=function(){var a=Or.m.Hb.call(this);return a=a.concat(["bucket","maxKeys","prefix","delimiter"])};h.ua=function(){this.g||(this.g=new Gr(this.i));return this.g};
h.$f=function(a){return this.h+this.j+a};h.Ba=function(a,b){return new dr(this,a,b)};
h.gg=function(a,b){var c=this;sl(a,function(d,e,f){re(a,d);c.De(d,function(a){var e={},l=a[0]?Gq(a[0]):null;null!=l&&(e.marker=l);0<c.j.length&&(e.prefix=c.j);0<b&&(e["max-keys"]=b);O(c.logger,c+" querying for newer entries starting from "+l);e=new bj(c.h,"GET",e);c.ua().request(e).execute(function(b,e){if(200==e.U()){for(var k=jk(e),k=k instanceof Document?k:Gi(k),l=new Kr(k,c.store),k=l.keys(),l=Mr(l),s=[],w=[],x=[],H=0,D=0;H<=a.length&&D<k.length;){var I=a[H]?Gq(a[H]):null,S=k[D];if(H==a.length)w.push(S),
D++;else{var za=I?Fk(I,S):-1;0==za?((S=Hq(a[H]))&&l[D]&&S!=l[D]&&(l[D]>S?x.push(I):N(c.logger,'record "'+I+'" in database is more recent than server '+S+" vs "+l[D])),H++,D++):1==za?(s.push(I),H++):(w.push(S),D++)}}Yq(c,f,d,w,x,s)}else N(c.logger,"Invalid response status "+e.U())})})},this)};
function Pr(a,b){function c(f){null!=f&&(d.marker=f);O(a.logger,a+" querying for newer entries starting from "+f);e.request(new bj(a.h,"GET",d)).execute(function(d,e){if(200==e.U()){var f=jk(e),f=f instanceof Document?f:Gi(f),f=new Kr(f,a.store),m=Nr(f),f=f.keys(),n=f.length;if(0==n)b([]),b=null;else for(var p=0,r=0;r<n;r++)a.Ba(f[r]).Jc(function(){p++;p==n&&(m?c(m):b&&(b([this.Kb()]),b=null))})}else N(a.logger,"Invalid response status "+e.U())})}var d={};0<a.j.length&&(d.prefix=a.j);var e=a.ua();
c();a.P=!0}function Qr(a,b){a.P||sl(b,function(a,b,e){t(a[0])?e(a):Pr(this,e)},a)};function Rr(a,b,c){Lq.call(this,a,b,c)}A(Rr,dr);Rr.prototype.logger=L("ydn.db.sync.entry.Gcs");function Sr(a,b,c){Or.call(this,a,b,c);this.h="https://"+this.i+".storage.googleapis.com/"}A(Sr,Or);Sr.prototype.logger=L("ydn.db.sync.Gcs");Sr.prototype.ua=function(){this.g||(this.g=new xp);return this.g};Sr.prototype.Ba=function(a,b){return new Rr(this,a,b)};function Fr(a,b){this.h=a;this.g=!!b}Fr.prototype.request=function(a){var b={path:a.path,method:a.method,headers:a.headers,params:a.params,body:a.body};this.g&&(b.callback=function(a,e){c.callback(a,e);b.callback=null});a=this.h.request(b);var c=new Tr(a);return c};function Tr(a){this.h=a||null}Tr.prototype.callback=function(a,b){this.i&&(this.i(a,mk(b)),this.i=null);this.g={json:a,raw:b}};
Tr.prototype.execute=function(a){this.h?(this.h.execute(function(b,c){a(b,mk(c))}),this.h=null):this.g?(a(this.g.json,mk(this.g.raw)),this.g=null):this.i=a};function Uq(a){if(a){if(a instanceof xp)return a;if(ia(a))return new Fr({request:function(b){a(b)}},!0);if("request"in a)return new Fr(a);throw new G(a+" is not a valid HTTP Client");}return null};function Ur(a,b,c){Lq.call(this,a,b,c)}A(Ur,Rr);Ur.prototype.logger=L("ydn.db.sync.entry.GcsJson");Ur.prototype.Jc=function(a){var b=this.g,c=this;Pq(this,function(d){var e={method:"GET",path:"storage/v1beta2/b/"+b.i+"/o/"+encodeURIComponent(c.getName())};d&&(e.headers=Jq(d));gapi.client.request(e).execute(function(d,e){var k=mk(e);c.j=new Kq(c.C(),k.sd(),b.o);d?(O(c.logger,c+": readServer updated"),c.i=d):(O(c.logger,c+": readServer request fail "+e),c.j=null,c.i=null);a.call(c,200)},e)})};function Vr(a,b,c){Sr.call(this,a,b,c)}A(Vr,Sr);h=Vr.prototype;h.logger=L("ydn.db.sync.GcsJson");h.Gb=function(){var a=Vr.m.Gb.call(this);a.key="name";return a};h.ua=function(){if(!this.g)if(t(q.gapi))this.g=new Fr(gapi.client);else throw new xd("gapi not loaded");return Vr.m.ua.call(this)};h.Ba=function(a,b){return new Ur(this,a,b)};
h.qc=function(){P(this.logger,"starting prefetch");var a=new B;ym(this.storage.g,this.V,null,null,1,0,!0,!1).A(function(b){var c={bucket:this.i};(b=b[0])&&(c.marker=b);var d=this;if(!q.gapi||q.gapi.client)throw Error("gapi lib not loaded");gapi.client.load("storage","v1beta2",function(){var b=gapi.client.storage.objects.list({bucket:d.i});this.ic&&(c.prefix=this.ic);b.execute(function(b,c){if(b&&!b.error){var e=b.items||[];0<e.length?Oq(d,null,e).ba(function(){a.callback(!0)}):a.callback(!1)}else e=
d+": "+c,N(d.logger,e),a.D(Error(e))})})},function(b){a.D(b)},this);return a};function Wr(a,b,c){Sr.call(this,a,b,c);this.S="full"}A(Wr,Sr);h=Wr.prototype;h.logger=L("ydn.db.sync.GcsMeta");h.Gb=function(){var a=Wr.m.Gb.call(this);a.key="name";return a};h.ua=function(){!this.g&&gapi&&(this.g=new Fr(gapi.client));return Wr.m.ua.call(this)};h.Ba=function(a,b){return new Ur(this,a,b)};
h.qc=function(){P(this.logger,"starting prefetch");var a=new B;if(!q.gapi||!q.gapi.client)throw Error("gapi lib not loaded");var b=this;gapi.client.load("storage","v1beta2",function(){function c(e){e&&(d.pageToken=e);gapi.client.storage.objects.list(d).execute(function(e,g){if(e&&!e.error){var k=e.items||[];if(e.nextPageToken)O(b.logger,"receiving "+k.length+" meta records, continuing next"),Oq(b,k),c(e.nextPageToken);else if(0<k.length)Oq(b,k).ba(function(){O(b.logger,"receiving "+k.length+" meta records, prefetching dane.");
a.callback(!0)});else{var l=!!d.pageToken;O(b.logger,"prefetching done");a.callback(l)}}else l=b+": "+g,N(b.logger,l),a.D(Error(l))})}var d={bucket:b.i};this.ic&&(d.prefix=this.ic);c()});return a};h.De=function(a,b){if(0==a.length)b([]);else{var c=this.L(),d=yb(a,function(a){return new Fl(c,a)});Xq(this,d).A(function(d){for(var f=[],g=0;g<a.length;g++)f[g]=new Fq(a[g],d[g],this.o,c);b(f)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)}};function Xr(a,b,c){Tq.call(this,a,b,c)}A(Xr,Tq);Xr.prototype.$f=function(a){return this.h+this.j+this.V+this.Y+a};Xr.prototype.logger=L("ydn.db.sync.Json");
Xr.prototype.gg=function(a){function b(a,b){var c=new bj(e);d.ua().request(c).execute(function(c){if(200==c.status){var e=(c.response instanceof Object?c.response:Bi(c.responseText)).items;c=yb(e,function(a){return a.id});for(var e=yb(e,function(a){return a.updated}),k=[],p=[],r=[],s=0,w=0;s<=a.length&&w<c.length;){var x=Gq(a[s]),H=c[w];if(s==a.length)p.push(H),w++;else{var D=Fk(x,H);0==D?((H=Hq(a[s]))&&e[w]&&H!=e[w]&&(new Date(e[w])>H?r.push(x):N(d.logger,'record "'+x+'" in database is more recent than server '+
H+" vs "+e[w])),s++,w++):1==D?(k.push(x),s++):(p.push(H),w++)}}Yq(d,function(){},b,p,r,k)}else N(d.logger,"Invalid response status "+c.status)})}var c=new qe,d=this,e=this.h+this.j+this.V;a.B(function(a){re(c,a);this.De(a,function(c){b(c,a)})},this)};function Yr(a,b,c){Tq.call(this,a,b,c)}A(Yr,br);function Zr(a,b,c){Lq.call(this,a,b,c)}A(Zr,dr);Zr.prototype.logger=L("ydn.db.sync.entry.S3Meta");function $r(a,b,c){Or.call(this,a,b,c);this.ic=c.Options.prefix;if("Key"!=b.keyPath)throw new G('s3-meta store "'+b.getName()+'" must use inline key with keyPath "Key"');this.S="meta"}A($r,Or);h=$r.prototype;h.logger=L("ydn.db.sync.S3Meta");h.Gb=function(){var a=$r.m.Gb.call(this);a.key="Key";a.modified="LastModified";a.etag="ETag";return a};h.Ba=function(a,b){return new Zr(this,a,b)};
h.qc=function(){function a(f){f&&(e.marker=f);c.listObjects(e).send(function(c,f){if(c){var l=d+": "+Ci(c);N(d.logger,l);b.D(c instanceof Error?c:Error(l))}else{var m=f.Contents||[];f.IsTruncated?(O(d.logger,"receiving "+m.length+" meta records, continuing next"),Oq(d,m),a(m[m.length-1].Key+"\uffff")):0<m.length?Oq(d,m).ba(function(){O(d.logger,"receiving "+m.length+" meta records, prefetching dane.");b.callback(!0)}):(l=!!e.marker,O(d.logger,"prefetching done"),b.callback(l))}})}P(this.logger,"starting prefetch");
var b=new B,c=Ir(this.ua()),d=this,e={};this.ic&&(e.prefix=this.ic);a();return b};h.De=function(){throw new xd("loading meta data should not be necessary");};function as(a,b,c){Lq.call(this,a,b,c)}A(as,Ar);function bs(a,b,c){Br.call(this,a,b,c);a=c.Options;this.domain=a.domain;this.P=a.siteName;if(a=al(b,"sites$parent"))Qm(a,function(a){for(var b=a.link||[],c=0;c<b.length;c++)if("http://schemas.google.com/sites/2008#parent"==b[c].rel)return b[c].href;return a.id.$t.replace(/\w+$/,"0")}),pe(this.logger,"index sites$parent in "+b.getName()+" has set a generator.");if(a=al(b,"alternate"))Qm(a,function(a){a=a.link||[];for(var b=0;b<a.length;b++)if("alternate"==a[b].rel)return a[b].href}),pe(this.logger,
"index alternate in "+b.getName()+" has set a generator.")}A(bs,Br);h=bs.prototype;h.Ba=function(a,b){return new as(this,a,b)};h.Hb=function(){var a=bs.m.Hb.call(this);return a=a.concat(["domain","siteName"])};h.Ub=function(){return"https://sites.google.com/feeds/content/"+this.domain+"/"+this.P+"/"};h.Sh=function(a){return"GET"!=a};
function cs(a,b,c,d){var e={alt:"json",kind:a.kind};"sites$parent"==c?(c=d.match(/\w+$/)[0],e.parent=c):"alternate"==c&&(c=d.replace(/https:\/\/sites.google.com\/a\/[^\/]+\/[^\/]+/,""),e.path=c);var f={},g=a.Ub();sl(b,function(c,l,m){re(b,c);if(l=c[0])l=Nc(l,"updated","$t"),l=(new Date(1+ +new Date(l))).toISOString(),e["updated-min"]=l;l=new bj(g,"GET",e,f);a.ua().request(l).execute(function(b,e){if(200==e.U()){if(!b){var f=jk(e);v(f)&&(b=JSON.parse(f))}var g=(f=(b.feed||b).entry)?u(f)?f:[f]:[];0<
g.length?Oq(a,g).ba(function(){m(g)}):m(c)}else 302==e.U()?m(c):(f=a+": Invalid response status "+e.U()+" for querying pageName: "+d,N(a.logger,f),m(Error(f),!0))})},a)}h.zf=function(a,b,c){if($q(this))sl(a,function(d,e,f){re(a,d);ar(this,function(a){!0===a?wm(this.storage.g,this.V,b,R.only(c),!1,0).A(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(a){f(a,!0)},this)},this);else return"alternate"==b||"alternate"==b?cs(this,a,b,c):bs.m.zf.call(this,a,b,c)};Xl.prototype.g=null;
wn.prototype.Sg=function(a,b){var c=b.format;if("gdata-sites"==c)a.g=new bs(this,a,b);else if("gdata"==c)a.g=new Br(this,a,b);else if("gdata-json"==c)a.g=new Er(this,a,b);else if("odata"==c)a.g=new Yr(this,a,b);else if("s3"==c)a.g=new Or(this,a,b);else if("s3-meta"==c)a.g=new $r(this,a,b);else if("gcs"==c)a.g=new Sr(this,a,b);else if("gcs-json"==c)a.g=new Vr(this,a,b);else if("gcs-meta"==c)a.g=new Wr(this,a,b);else if("atom"==c)a.g=new br(this,a,b);else if("json"==c)a.g=new Xr(this,a,b);else if("rest"==
c)a.g=new Tq(this,a,b);else throw new vd("Sync format: "+c);Zm(a,function(b,c){var f=b.ne();if(!(this instanceof Vl)||this.Ya)if(!window.navigator||!t(window.navigator.onLine)||window.navigator.onLine)if("add"==f)f=c[1],a.g.add(b,f);else if("count"==f)c[1]||c[2]||a.g.count(b);else if("put"==f){var f=c[1],g=c[2];a.g.put(b,f,g)}else if("rm:iter"==f)g=c[1],a.g.remove(b,g);else if("values:iter:index"==f){var f=c[1],g=c[2],k=c[3],l=c[4],m=c[5];!k&&!m&&g&&null!=g.lower&&null!=g.upper&&0==Fk(g.lower,g.upper)&&
a.g.zf(b,f,g.lower)}else if("keys"==f)g=c[1],l=c[2],k=c[3],m=c[4],a.g.keys(b,null,g,l,k,m,!1);else if("keys:iter:index"==f)f=c[1],g=c[2],l=c[3],k=c[4],m=c[5],a.g.keys(b,f,g,l,k,m,c[6]);else if("values"==f)g=c[1],l=c[2],k=c[3],m=c[4],g||m?g&&g.lower&&v(g.lower)&&g.lower==g.upper||!g&&m&&1==l&&k&&Qr(a.g,b):a.g.values(b,l,k);else if(""!=f)if("get"==f)g=c[1],a.g.get(b,g);else if("values:array"==f)Zq(a.g,b,c[1]);else throw Error(f);})};var ds="Accounts Calls Campaigns Contacts Documents Meetings Emails EmailTemplates Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),es="Accounts Contacts EmailTemplates Leads Notes Tasks Meetings Calls Opportunities Emails".split(" "),fs=["Accounts","Contacts","Leads"],gs=["Contacts","Leads","Accounts"],hs=["Meetings","Calls","Tasks","Opportunities"];function is(a){a=ds.indexOf(a);return ds[a]};function js(a){this.h=a||[]}js.prototype.g=function(a){return-1==this.h.indexOf(a)?a:null};function ks(){}
ks.prototype.g=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,k;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,k=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f+="e":k.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f+="e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,k=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!k.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function ls(a){this.h=a}
ls.prototype.g=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=function(a){return a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a}(a);a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,
"$1")}(a);a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.h&&(a=a.substring(0,this.h));return a=a.toUpperCase()};var ms=new ls(32),ns=new ks,os=new js("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function ps(a){this.data=a;this.g=0}ps.prototype.next=function(a){for(var b=this.g,c=this.data[b],c=1,d=0;0<=b&&b<this.data.length;){c=this.data[b];if(c instanceof Array)if(a<c[0])c=-1;else if(a>c[1])c=1;else return this.g=b,!0;else{if(c==a)return this.g=b,!0;c=a<c?-1:1}if(0==d)d=c;else if(d!=c)break;b+=c;if(b>this.data.length||0>b)break}return!1};
function qs(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new ps(categ_letters_numbers_data);if(ha(d))d=g.next(d);else{for(var k=0,l=d.length;k<l;++k)if(!1===g.next(d[k])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};function rs(a,b){this.j=b;this.value=a}rs.prototype.T=function(){return this.value};rs.prototype.Jb=function(){return 1};var ss=Xi||Ui;rs.prototype.C=function(){return this.value};rs.prototype.toString=function(){return"Entry:"+this.value};function ts(a,b,c,d,e,f){rs.call(this,d,e);this.V=a;this.h=b;this.i=c;this.Ee=f||[]}A(ts,rs);h=ts.prototype;h.Ld=function(){return{k:this.j,v:this.value.toLowerCase(),id:this.C(),loc:this.Ee}};h.C=function(){var a=[this.V,this.i,this.h,this.value];return ss?a:Kk(a)};h.L=function(){return this.V};h.ka=function(){return this.i};h.toString=function(){return["IndexEntry",this.V,this.i,this.value].join(":")};function us(a,b,c,d,e){rs.call(this,b,c);this.l=d;this.g=e;this.type=a;this.Ug=1}A(us,rs);us.prototype.Jb=function(){return this.g*this.type*this.Ug};us.prototype.C=function(){return this.value+"|"+this.l};function vs(a,b){ts.call(this,b.L(),b.h,b.ka(),b.T(),b.j,[]);this.o=a;this.g=[b]}A(vs,ts);h=vs.prototype;h.count=function(){return this.g.length};h.entry=function(a){return this.g[a]};h.ig=function(a){a=a.g[0];for(var b=0;b<this.g.length;b++)if(this.g[b].h==a.h&&this.g[b].value==a.value)return;this.g.push(a)};h.Jb=function(){for(var a=0,b=0;b<this.g.length;b++)var c=this.g[b],d=bn(this.o,c.L(),c.h),c=c.Jb(),a=a+c*d.h;return a};function Qb(a,b){var c=a.Jb(),d=b.Jb();return c<=d?1:-1}
h.Ld=function(){for(var a={value:this.value,primaryKey:this.i,storeName:this.V,score:this.Jb(),tokens:[]},b=0;b<this.g.length;b++)a.tokens[b]=this.g[b].Ld();return a};h.toString=function(){return["RankEntry",this.V,this.i,this.value].join(":")+"["+this.g.length+"]"};function ws(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function pm(a,b,c,d,e,f,g){ts.call(this,b,c,d,e,f,g);this.query=a}A(pm,ts);pm.prototype.Jb=function(){var a,b=this.value;a=ws(this.query.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=ws(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,k;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(k=b[f],g==k){c++;delete b[f];break}a=2*c/d;b=Math.log(this.Ee.length+1);c=this.query.Jb();return b*a*c};pm.prototype.Ld=function(){return{keyPath:this.h,value:this.value,loc:this.Ee.slice()}};
pm.prototype.toString=function(){return["ResultEntry",this.V,this.i,this.value].join(":")};function xs(a,b,c){this.g=a;this.h=b;this.j=[];this.limit=c||1E3;this.i=0}function om(a,b){for(var c,d,e=a.g.getName(),f=0;f<a.h.length;f++){var g=a.h[f],k=g.type;.4==k||.6==k?(d="v",c=g.T().toLowerCase(),c=zk(c)):(d="v",c=g.T().toLowerCase(),c=R.only(c));b(e,d,c,g);a.i++;.6==k&&(d="k",c=g.j,c=R.only(c),b(e,d,c,g),a.i++)}}function nm(a){for(var b=[a.g.getName()],c=0;c<a.g.count();c++){var d=a.g.index(c).L();-1==b.indexOf(d)&&b.push(d)}return b}
function qm(a){for(var b=[],c=[],d=0;d<a.j.length;d++){var e=a.j[d];if(0==e.query.type)-1==Cb(c,function(a){return a.ka()==e.ka()&&a.L()==e.L()})&&c.push(e);else{var f=new vs(a.g,e),g=Cb(b,function(a){return a.ka()==f.ka()&&a.L()==f.L()});if(0<=g){var k=b[g];tb.splice.call(b,g,1);k.ig(f);f=k}Pb(b,f)}}for(a=0;a<c.length;a++)for(g=c[a],d=b.length-1;0<=d;--d)if(k=b[d],g.ka()==k.ka()&&g.L()==k.L()){b.splice(a,1);break}return b.map(function(a){return a.Ld()})};function ys(a){this.g=a;if("en"==a.lang){a=a.h||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(ms);else if("stemmer"==a[c])b.push(ns);else if("stop"==a[c])b.push(os);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.h=a}function zs(a,b){for(var c=0;c<a.h.length;c++){var d=a.h[c].g(b);if(d)b=d;else return null}return b}ys.prototype.parse=function(a){var b=[];qs(a,function(c,d){b.push(a.substr(c,d))});return b};
ys.prototype.query=function(a,b,c){a=As(this,b);return 0==a.length?null:new xs(this.g,a,c||10)};
function As(a,b){var c=[],d=[];qs(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=zs(a,c[f]);for(var g=[],k=0,f=0;f<c.length;f++){var l=c[f],m=e[f],n="*"==b.charAt(d[f]+l.length),p=n?d[f]+l.length+1:d[f]+l.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),r="-"==b.charAt(p?d[f]-2:d[f]-1),s=.8;n?s=.4:p?s=1:r?s=0:null!=m&&(s=.6);l=new us(s,l,m,d[f],1/(f+2));g.push(l);k+=l.Jb()}for(f=0;f<g.length;++f)g[f].Ug=1/k;return g}
function Bs(a,b,c,d){var e=[],f=[];qs(b,function(a,c){e.push(b.substr(a,c));f.push(a)});for(var g=[],k=0;k<e.length;k++)g[k]=zs(a,e[k]);a=c.L();c=c.g;for(var l=[],k=0;k<e.length;k++){var m=e[k],n=g[k];if(null!=n){var p=Bb(l,function(a){return a.T()==m});p||(p=new ts(a,c,d,m,n),l.push(p));p.Ee.push(f[k])}}return l}function Cs(a,b,c,d){for(var e=[],f=0;f<a.g.count();f++){var g=a.g.index(f);if(g.L()==b){var k=Hk(d,g.g);v(k)&&(e=e.concat(Bs(a,k,g,c)))}}return e};wn.prototype.Rg=function(a,b){var c=this;b.g=new ys(b);Zm(a,function(d,e){function f(e){var f=a.getName();Hl(e)&&sl(d,function(a,g,k){if(g)k(a,g);else{re(d,a);var l=vk(R.bound([f,e],[f,e,"\uffff"])),x=b.getName();vm(c.g,x,l).ba(function(){k(a,g)})}})}function g(b){var e=a.getName();sl(d,function(a,f,g){f?g(a,f):(re(d,a),b&&(b=vk(R.bound([e,b.lower],[e,b.upper,"\uffff"]))),vm(c.g,e,b).ba(function(){g(a,f)}))})}function k(e,f){var g=a.getName();sl(d,function(a,k,l){re(d,a);if(k)l(a,k);else{var x=b.getName();
u(a)||(a=[a]);for(var H=0;H<a.length;H++){var D=a[H];if(Hl(D)){if(f){var I=vk(R.bound([g,D],[g,D,"\uffff"]));vm(c.g,x,I)}D=Cs(b.g,g,D,e[H]).map(function(a){return a.Ld()});D=tm(c.g,x,D);H==a.length-1&&D.ba(function(){l(a,k)})}}}})}var l=d.ne();"put"==l?k([e[1]],!0):"put:array"==l?k(e[1],!0):"add"==l?k([e[1]],!1):"add:array"==l?k(e[1],!1):"rm:iter"==l||"clear"==l?g(e[1]):"rm"==l&&f(e[1])})};
wn.prototype.search=function(a,b,c,d){var e=fn(this.h,a);if(!e)throw new G('full text index catalog "'+a+'" not found.');a=e.g.query(a,b,c,d);return a?this.g.search(a):(he(this.logger,'query "'+b+'" contains only noise and search is ignored'),tl("search",null))};function Ds(a){this.name=a;this.info=null;this.h={};this.g=null}
var Es={Accounts:{GeneratorIndex:{ydn$emails:["email","email1","email_addresses_non_primary"],ydn$phones:["phone_office","phone_alternate","phone_fax"]}},Calls:{FullTextIndex:{name:["name","description"],content:["name","description"]},indexes:[{name:"parent",keyPath:["parent_type","parent_id","date_modified"]},{name:"assigned_user_id, date_start",keyPath:["assigned_user_id","date_start"]}]},Contacts:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email",
"email1","email2"],ydn$phones:["phone_home","phone_mobile","phone_work","phone_other","phone_fax"]}},Documents:{FullTextIndex:{name:["name","document_name","filename"],content:["description"]},indexes:[{name:"parent",keyPath:["doc_type","doc_id"]}]},Emails:{FullTextIndex:{name:["name"],content:["content","description"]},GeneratorIndex:{ydn$emails:["bcc_addrs","cc_addrs","from_addr","to_addrs","reply_to_addr"]},indexes:[{name:"parent",keyPath:["parent_type","parent_id","date_modified"]},{name:"message_id"}]},
Leads:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home","phone_mobile","phone_work","phone_other","phone_fax"]}},Meetings:{FullTextIndex:{name:["name"],content:["description"]},indexes:[{name:"date_start"},{name:"parent",keyPath:["parent_type","parent_id","date_modified"]},{name:"assigned_user_id, date_start",keyPath:["assigned_user_id","date_start"]}]},Notes:{FullTextIndex:{name:["name"],content:["description"]},
indexes:[{name:"parent",keyPath:["parent_type","parent_id","date_modified"]}]},Opportunities:{FullTextIndex:{name:["name"],content:["description"]},indexes:{name:"assigned_user_id, date_closed",keyPath:["assigned_user_id","date_closed"]}},Tasks:{FullTextIndex:{name:["name"],content:["description"]},indexes:[{name:"parent",keyPath:["parent_type","parent_id","date_modified"]},{name:"assigned_user_id, date_due",keyPath:["assigned_user_id","date_due"]}]}};
function Fs(a,b){return"ydn$emails"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e))if(v(b[e]))if(/addrs$/.test(e))for(var f=b[e].split(","),g=0;g<f.length;g++){var k=Bo(f[g]);k&&d.push(k)}else(k=Bo(b[e]))&&d.push(k);else if(fa(b[e])&&b[e][0]&&b[e][0].email_address)for(f=b[e],g=0;g<f.length;g++)f[g]&&v(f[g].email_address)&&(k=Bo(f[g].email_address))&&d.push(k);return d}}:"ydn$phones"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=
a.indexOf(e)){var f=Ao(b[e]);f&&d.push(f)}return d}}:null}function Gs(a,b){if(a.g)for(var c=0;c<a.g.stores.length;c++)if(a.g.stores[c].name==b)return a.g.stores[c];var c=a.h[b]||Es[b]||{},d={name:b,keyPath:c.keyPath||"id",indexes:[{name:"name"},{name:"date_modified"}]},e=["ydn$emails","ydn$phones","ydn$names"];c.indexes&&(d.indexes=d.indexes.concat(c.indexes));for(var f=c.GeneratorIndex||{},c=0;c<e.length;c++){var g=e[c],k=f[g];!k||u(k)&&0==k.length||d.indexes.push(Fs(k,g))}return d}
function Hs(a){if(a.g)return a.g;for(var b={fullTextCatalogs:[],stores:[{name:"history",indexes:[{keyPath:"type"},{keyPath:"timestamp"}]},{name:"Meta"}]},c=0;c<es.length;c++){var d=es[c];b.stores.push(Gs(a,d));var e=a.h[d]||Es[d]||{};if(e.FullTextIndex)for(var f in e.FullTextIndex){var g=e.FullTextIndex[f];if(0<g.length){for(var k={name:"ft-"+d+"-"+f,lang:"en",sources:[]},l=0;l<g.length;l++)k.sources.push({storeName:d,keyPath:g[l]});b.fullTextCatalogs.push(k)}}}a.g=b;Object.freeze(a.g);return a.g}
;function Is(a,b,c){this.domain=a;this.module=b;this.g=c||{}}function Js(a){return null!=a.g.id}h=Is.prototype;h.getData=function(){return this.g};h.C=function(){return this.g.id};function Ks(a){return a.g?+Ls(a.g.date_modified):NaN}function Ms(a){return"assigned_user_id, "+Ns(a)}function Ns(a){return"Tasks"==a?"date_due":"Opportunities"==a?"date_closed":"date_start"}
function Os(a){if(!a.g)return"";if(a.g.name)return a.g.name;var b=a.g.full_name||a.g.name;return b?b:a.g.first_name||a.g.last_name?(b=(a.g.first_name||"").trim(),a=(a.g.last_name||"").trim(),b+" "+a):a.g.id}h.value=function(a){return this.g[a]};h.toJSON=function(){return{domain:this.domain,module:this.module,obj:this.g}};h.toString=function(){return"Record:"+this.module+":"+(this.g?this.g.id:void 0)};function Ps(a,b,c){var d=0;if(!b)return d;b.gd$city&&a[c+"_address_city"]!=b.gd$city.$t&&(a[c+"_address_city"]=b.gd$city.$t,d++);b.gd$country&&a[c+"_address_country"]!=b.gd$country.$t&&(a[c+"_address_country"]=b.gd$country.$t,d++);b.gd$postcode&&a[c+"_address_postalcode"]!=b.gd$postcode.$t&&(a[c+"_address_postalcode"]=b.gd$postcode.$t,d++);b.gd$region&&a[c+"_address_state"]!=b.gd$region.$t&&(a[c+"_address_state"]=b.gd$region.$t,d++);b.gd$street&&a[c+"_address_street"]!=b.gd$street.$t&&(a[c+"_address_street"]=
b.gd$street.$t,d++);b.gd$housename&&a[c+"_address_street_2"]!=b.gd$neighborhood.$t&&(a[c+"_address_street_2"]=b.gd$neighborhood.$t,d++);b.gd$neighborhood&&a[c+"_address_street_3"]!=b.gd$city.$t&&(a[c+"_address_street_3"]=b.gd$city.$t,d++);return d}
function Qs(a,b,c){function d(d,g){!a[c+g]||b[d]&&b[d].$t==a[c+g]||(e++,b[d]={$t:a[c+g]})}var e=0;if(!a)return 0;b||(b={});d("gd$city","_address_city");d("gd$country","_address_country");d("gd$postcode","_address_postalcode");d("gd$region","_address_state");d("gd$street","_address_street");d("gd$neighborhood","_address_street_2");d("gd$city","_address_street_3");return e}
function Rs(a,b){var c=0;!a.title||b.name&&b.name==a.title.$t||(b.name=a.title.$t,c++);for(var d=0;a.gd$email&&d<a.gd$email.length;d++){var e=a.gd$email[d];"http://schemas.google.com/g/2005#work"==e.rel?b.email1!=e.address&&(c++,b.email1=e.address):"http://schemas.google.com/g/2005#home"==e.rel?b.email2!=e.address&&(c++,b.email2=e.address):"http://schemas.google.com/g/2005#other"==e.rel&&b.email!=e.address&&(c++,b.email=e.address)}a.gd$name?(a.gd$name.gd$namePrefix&&b.salutation!=a.gd$name.gd$namePrefix.$t&&
(c++,b.salutation=a.gd$name.gd$namePrefix.$t),a.gd$name.gd$givenName&&b.first_name!=a.gd$name.gd$givenName.$t&&(b.first_name=a.gd$name.gd$givenName.$t,c++),a.gd$name.gd$familyName&&b.last_name!=a.gd$name.gd$familyName.$t&&(b.last_name=a.gd$name.gd$familyName.$t,c++),a.gd$name.gd$fullName&&b.full_name!=a.gd$name.gd$fullName.$t&&(b.full_name=a.gd$name.gd$fullName.$t,c++)):b.full_name=a.title.$t;a.gd$organization&&a.gd$organization[0]&&(d=a.gd$organization[0],d.gd$orgTitle&&d.gd$orgTitle.$t!=b.title&&
(b.title=d.gd$orgTitle.$t,c++),d.gd$orgDepartment&&d.gd$orgDepartment.$t!=b.department&&(b.department=d.gd$orgDepartment.$t,c++),d.gd$orgJobDescription&&d.gd$orgJobDescription.$t!=b.description&&(b.description=d.gd$orgJobDescription.$t,c++));if(a.gd$im)for(d=0;d<a.gd$im.length;d++)"Twitter"==a.gd$im[d].label&&b.twitter!=a.gd$im[d].address?(b.twitter=a.gd$im[d].address,c++):"Facebook"==a.gd$im[d].label&&b.facebook!=a.gd$im[d].address?(b.facebook=a.gd$im[d].address,c++):"Google Plus"==a.gd$im[d].label&&
b.googleplus!=a.gd$im[d].address?(b.googleplus=a.gd$im[d].address,c++):"Linkedin"==a.gd$im[d].label&&b.linkedin!=a.gd$im[d].address&&(b.linkedin=a.gd$im[d].address,c++);a.gContact$birthday&&b.birthdate!=a.gContact$birthday.when&&(b.birthdate=a.gContact$birthday.when,c++);for(d=0;a.gd$phoneNumber&&d<a.gd$phoneNumber.length;d++)if(e=a.gd$phoneNumber[d],e.$t)if("http://schemas.google.com/g/2005#mobile"==e.rel)b.phone_mobile!=e.$t&&(b.phone_mobile=e.$t,c++);else if("http://schemas.google.com/g/2005#work"==
e.rel)b.phone_work!=e.$t&&(b.phone_work=e.$t,c++);else if("http://schemas.google.com/g/2005#home"==e.rel)b.phone_home!=e.$t&&(b.phone_home=e.$t,c++);else if("http://schemas.google.com/g/2005#fax"==e.rel||"http://schemas.google.com/g/2005#home_fax"==e.rel||"http://schemas.google.com/g/2005#work_fax"==e.rel)b.phone_fax!=e.$t&&(b.phone_fax=e.$t,c++);else if(b.phone_other=e.$t)b.phone_other=e.$t,c++;if(a.gd$structuredPostalAddress){for(var f=e=-1,d=0;d<a.gd$structuredPostalAddress.length;d++){var g=a.gd$structuredPostalAddress[d];
"http://schemas.google.com/g/2005#work"==g.rel||g.primary?e=d:f=d}-1==e&&(f=-1);c+=Ps(b,a.gd$structuredPostalAddress[e],"primary");c+=Ps(b,a.gd$structuredPostalAddress[f],"alt")}return c}
function Ss(a,b){function c(a,c){if(g[a]){b.gd$phoneNumber||(b.gd$phoneNumber=[]);var d;a:{for(d=0;b.gd$phoneNumber&&d<b.gd$phoneNumber.length;d++)if(b.gd$phoneNumber[d].rel==c){d=b.gd$phoneNumber[d];break a}d=null}d?d.$t!=g[a]&&(d.$t=g[a],k++):(b.gd$phoneNumber.push({rel:c,$t:g[a]}),k++)}}function d(a){b.gd$im||(b.gd$im=[]);for(var c=0;c<b.gd$im.length;c++)if(b.gd$im[c].label==a)return b.gd$im[c];return null}function e(){b.gd$name||(b.gd$name={},k++)}function f(a,c){if(g[a]){b.gd$email?fa(b.gd$email)||
(b.gd$email=[b.gd$email]):b.gd$email=[];var d;a:{d=g[a];for(var e=0;b.gd$email&&e<b.gd$email.length;e++)if(!(0<=l.indexOf(e))&&b.gd$email[e].address==d){d=e;break a}d=-1}0<=d?(e=b.gd$email[d],e.rel!=c&&(k++,e.rel=c),l.push(d)):(b.gd$email.push({rel:c,address:g[a]}),l.push(b.gd$email.length-1),k++)}}var g=a.getData(),k=0;!g.name||b.title&&b.title.$t==g.name||(b.title={$t:g.name},k++);var l=[];f("email1","http://schemas.google.com/g/2005#work");f("email2","http://schemas.google.com/g/2005#home");f("email",
"http://schemas.google.com/g/2005#other");g.salutation&&(e(),b.gd$name.gd$namePrefix&&b.gd$name.gd$namePrefix.$t==g.salutation||(b.gd$name.gd$namePrefix={$t:g.salutation},k++));g.first_name&&(e(),b.gd$name.gd$givenName&&b.gd$name.gd$givenName.$t==g.first_name||(b.gd$name.gd$givenName={$t:g.first_name},k++));g.last_name&&(e(),b.gd$name.gd$familyName&&b.gd$name.gd$familyName.$t==g.last_name||(b.gd$name.gd$familyName={$t:g.last_name},k++));g.full_name&&(e(),b.gd$name.gd$fullName&&b.gd$name.gd$fullName.$t==
g.full_name||(b.gd$name.gd$fullName={$t:g.full_name},k++));if(g.twitter){var m=d("Twitter");m?m.address!=g.twitter&&(m.address=g.twitter,k++):(b.gd$im.push({label:"Twitter",address:g.twitter}),k++)}g.facebook&&((m=d("Facebook"),m)?m.address!=g.facebook&&(m.address=g.facebook,k++):(b.gd$im.push({label:"Facebook",address:g.facebook}),k++));g.googleplus&&((m=d("Google Plus"),m)?m.address!=g.googleplus&&(m.address=g.googleplus,k++):(b.gd$im.push({label:"Google Plus",address:g.googleplus}),k++));g.linkedin&&
((m=d("Linkedin"),m)?m.address!=g.linkedin&&(m.address=g.linkedin,k++):(b.gd$im.push({label:"Linkedin",address:g.linkedin}),k++));!g.birthdate||b.gContact$birthday&&b.gContact$birthday.when==g.birthdate||(b.gContact$birthday={when:g.birthdate},k++);c("phone_mobile","http://schemas.google.com/g/2005#mobile");c("phone_work","http://schemas.google.com/g/2005#work");c("phone_home","http://schemas.google.com/g/2005#home");c("phone_fax","http://schemas.google.com/g/2005#work_fax");c("phone_other","http://schemas.google.com/g/2005#other");
for(var n=-1,m=-1,p=0;b.gd$structuredPostalAddress&&p<b.gd$structuredPostalAddress.length;p++)-1==n&&"true"==b.gd$structuredPostalAddress[p].primary||"http://schemas.google.com/g/2005#work"==b.gd$structuredPostalAddress[p].rel?n=p:-1==m&&(m=p);-1==n&&0<=m&&(n=m,b.gd$structuredPostalAddress[n].primary="true",m=-1);0<=n?k+=Qs(g,b.gd$structuredPostalAddress[n],"primary"):(n={primary:"true",rel:"http://schemas.google.com/g/2005#work"},p=Qs(g,n,"primary"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=
[]),b.gd$structuredPostalAddress.push(n),k+=p));0<=m?k+=Qs(g,b.gd$structuredPostalAddress[m],"alt"):(n={},p=Qs(g,n,"alt"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=[]),b.gd$structuredPostalAddress.push(n),k+=p));return k};function Ts(a){if(u(a))return a.map(function(a){return Ts(a)});if(y(a)){var b={},c;for(c in a.name_value_list)b[c]=a.name_value_list[c].value;return b}throw Error("Invalid name_value_entries");}function Ls(a){return new Date(a+" GMT")}function Us(a){return a.toISOString().replace("T"," ").replace(/\..+/,"")};function Vs(a,b,c,d,e){pd.call(this);c=va(c,"http")?new De(c):Ee(Fe(new De,c),"https");Je(c,"");Ie(c,null);this.h=c.Xb;this.P=b;this.o=c.toString().replace(/\/$/,"");this.l=d;this.J=e;this.g=null;this.j=a;this.N=new Ds(this.h);this.db=new jp("su-"+this.h,Hs(this.N),{isSerial:!0,policy:"single",mechanisms:["indexeddb"]});this.i=null;this.p=this.t=NaN;this.K=!1;this.history=new xq(this.db)}A(Vs,sp);h=Vs.prototype;
h.request=function(a,b,c,d,e,f){function g(){m.execute(function(g,k){this.t=z();var l=g;if(v(l))try{g=JSON.parse(l)}catch(m){}f||!g||11!=g.number&&10!=g.number?d.call(e,g,k):Ws(this).A(function(){this.request(a,b,c,d,e,!0)},function(){d.call(e,null,new hk(0,null,{},"Login fail"))},this)},this)}for(var k="{",l=0;l<b.length;l++)k+=(0==l?"":",")+'"'+b[l]+'":'+JSON.stringify(c[l]);k+="}";l=new Ke;l.add("method",a);l.add("input_type","json");l.add("response_type","json");l.add("rest_data",k);var m=this.j.request(new bj(this.o+
"/service/v4/rest.php","POST",{},{"Content-Type":"application/x-www-form-urlencoded"},l.toString())),k=z()-this.t;0<k&&100>k?(this.t=100+this.t,ie(this.logger,"request will call after "+k+" ms."),Xf(g,k,this)):g.call(this)};
function Xs(a,b,c){var d=c.module_name,e=["session"];a=[a.g?a.g.id:null];var f=[!1];d&&(e.push("module_name"),a.push(d),f.push(!1));if("get_entry_list"==b)b=c.query||"",e.push("query"),a.push(b),f.push(""==b),e.push("order_by"),b=c.order_by||"",a.push(b),f.push(""==b),b=c.offset||0,e.push("offset"),a.push(b),f.push(0==b),b=c.select_fields||[],e.push("select_fields"),a.push(b),f.push(0==b.length),b=c.link_name_to_fields_array||[],e.push("link_name_to_fields_array"),a.push(b),f.push(0==b.length),b=
c.max_results||25,e.push("max_results"),a.push(b),f.push(null!=c.max_results),b=c.deleted||0,e.push("deleted"),a.push(b),f.push(0==b),c=!!c.favorites,e.push("favorites"),a.push(c),f.push(!1==c);else if("get_available_modules"==b)c=c.filter||"",e.push("filter"),a.push(c),f.push(0==c.length);else if("get_module_fields"==b)c=c.fields||[],e.push("fields"),a.push(c),f.push(0==c.length);else if("get_entries"==b)b=c.ids||[],e.push("ids"),a.push(b),f.push(!1),b=c.select_fields||[],e.push("select_fields"),
a.push(b),f.push(0==b.length),b=c.link_name_to_fields_array||[],e.push("link_name_to_fields_array"),a.push(b),f.push(0==b.length);else for(var g in c)"module_name"!=g&&(e.push(g),a.push(c[g]),f.push(!1));for(c=f.length-1;0<=c;c--)if(f[c])e.pop(),a.pop();else break;return{keys:e,values:a}}
function Ys(a,b){var c=b.entry_list;if(u(c)&&0<c.length){var d=c.map(function(a){return'"'+a.id+'"'});return Zs(a,"get_entry_list",{module_name:"EmailText",max_results:b.length,query:"email_id IN ("+d.join(",")+")"}).B(function(a){a=a.entry_list;c.length!=a.length&&J(this.logger,"number of entries retrived for EmailText exptected to have "+c.length+" but found only "+a.length);for(var d=0;d<a.length;d++){var g=a[d];if(a[d]){var k=Nc(g,"name_value_list","email_id","value"),l=Cb(c,function(a){return a.id==
k});if(0<=l)for(var m in g.name_value_list)c[l].name_value_list[m]=g.name_value_list[m];else ge(this.logger,"key "+k+" not found in EmailText")}}return b},a)}}
function $s(a,b){var c=b.module_name;a.p=z();var d=Zs(a,"get_entry_list",b);"Emails"==c&&(d=d.B(function(a){return Ys(this,a)},a));return d.B(function(a){var d=a.result_count,g=a.offset||0,k=a.entry_list,l=parseInt(a.next_offset,10);if(t(d)&&u(k)){if(0<k.length){var m=Ts(k);return this.db.put(c,m).A(function(){var a=this.P,e=this.h,r=m;if(a.h)for(var r=u(r)?r:[r],s=0;s<r.length;s++)r[s]&&at(a,new Is(e,c,r[s]));return d>=k.length&&l>g?(b.offset=l,$s(this,b)):l},function(a){J(this.logger,"Fail to store into the database for module "+
c+": "+a)},this)}return l}throw Error("Invalid REST respond on entry list query on "+c+": "+JSON.stringify(a));},a)}function bt(a,b){if(!b){for(var c=[],d=0;d<es.length;d++)c[d]=bt(a,es[d]);c.push(bt(a,"Users"));return Bn(c)}var e={module_name:b},f="module/"+b;return a.db.get("Meta",f).B(function(a){return a?a:Zs(this,"get_module_fields",e).B(function(a){a&&a.module_name&&a.module_fields?this.db.put("Meta",a,f):J(this.logger,"Invalid module for "+b+" "+Ci(a));return a},this)},a)}
function ct(a,b){var c=new il(b,"date_modified",null,!0),d="EmailTemplates"!=b;return a.db.keys(c,1).B(function(a){var c={};a[0]&&d&&(c.query=b.toLowerCase()+".date_modified>'"+a[0]+"'");c.module_name=b;c.order_by="date_modified";a=$s(this,c);a.A(function(a){this.logger.info(this+" module "+b+" synced, "+a+" records updated.")},function(a){var c=".";a&&(c=" with "+a.name+": "+a.message);J(this.logger,this+" module "+b+" failed"+c)},this);return a},a)}
function Zs(a,b,c,d){var e=d||0,f=new B;if(!a.g||!a.g.user_id)return 2>e?(ie(a.logger,"Request require login, tried "+e),Ws(a).B(function(){e++;Wb(Zs(a,b,c,e),f)})):(he(a.logger,"Cannot do request, not login. Give up after "+e+" retry"),f.D()),f;d=Xs(a,b,c);a.request(b,d.keys,d.values,function(d,k){fj(k)&&y(d)?11==d.number&&/invalid/i.test(d.name)?(this.g=null,Wb(Zs(a,b,c,e),f)):f.callback(d):f.D(k.U()+" "+k.La())},a);return f}
h.query=function(a,b){if(!u(a)||0==a.length)return C("invalid query");for(var c=[],d=0;d<a.length;d++){var e=a[d],f=e.limit||5,g=e.offset||0,k=!!e.reverse;if(!y(e))return C("invalid query at "+d+"");var l=e.store;if(-1==es.indexOf(l))return C("invalid store name at "+d+": "+l);var m=e.index||"id",n=null;null!=e.key?(n=e.key,"ydn$phones"==m?n=Ao(n):"ydn$emails"==m&&(n=n.toLowerCase()),n=e.prefix?zk(n):R.only(n)):null!=e.keyRange&&(n=Ak(e.keyRange));"id"==m?b?c.push(this.db.keys(l,n,f,g,k)):c.push(this.db.values(l,
n,f,g,k)):ln(this.db,l,m)?b?c.push(this.db.keys(l,m,n,f,g,k)):c.push(this.db.values(l,m,n,f,g,k)):c.push(bc([]))}return(new An(c)).A(function(c){for(var d=0;d<c.length;d++)if(c[d][0]){if(a[d].result=c[d][1],!b)for(var e=0;e<a[d].result.length;e++)a[d].result[e]._module=a[d].store}else J(this.logger,"query "+d+" failed."),a[d].result=[];return a},function(b){J(this.logger,"list failed "+b);return a},this)};
h.values=function(a,b){if(u(a)||!y(a))return C("invalid query");var c=a.limit||5,d=a.offset||0,e=!!a.reverse,f=a.store;if(-1==es.indexOf(f))return C("invalid store name : "+f);var g=a.index||"id";if(!v(g)||0==g.length)return C("index name missing in "+f);var k=null;null!=a.key?(k=a.key,"ydn$phones"==g&&v(k)?k=Ao(k):"ydn$emails"==g&&v(k)&&(k=k.toLowerCase()),k=a.prefix?zk(k):R.only(k)):null!=a.keyRange&&(k=Ak(a.keyRange));return"id"==g?b?this.db.keys(f,k,c,d,e):this.db.values(f,k,c,d,e):ln(this.db,
f,g)?b?this.db.keys(f,g,k,c,d,e):this.db.values(f,g,k,c,d,e):C("invalid index name: "+g+" for "+f)};
h.search=function(a){if(!u(a)||0==a.length)return C("invalid query");for(var b=[],c=Hs(this.N),d=0;d<a.length;d++){var e=a[d];if(!y(e))return C("invalid query at "+d+"");var f=e.q;if(!v(f)||0==f.length)return C("query term missing "+d+"");var g="ft-"+e.store+"-"+(e.index||"name");0<=Cb(c.fullTextCatalogs,function(a){return a.name==g})?(f=this.db.search(g,e.q),e.fetchFull&&(f=f.B(function(a){if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(new Fl(a[c].storeName,a[c].primaryKey));return this.db.values(b).B(function(b){for(var c=
0;c<b.length;c++)a.record=b[c];return a})}},this)),b.push(f)):b.push(bc([]))}return(new An(b)).A(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].fullTextResult=b[c][1]:(J(this.logger,"query "+c+" failed."),a[c].fullTextResult=[]);return a},function(b){J(this.logger,"list failed "+b);return a},this)};
function dt(a,b,c,d){var e={module_name:b},f="get_entry";d?(e.query=d+" = '"+c+"'",e.order_by="id",f="get_entry_list"):e.id=c;return Zs(a,f,e).B(function(a){if(a&&a.entry_list&&y(a.entry_list[0]))return Ts(a.entry_list[0]);he(this.logger,"record "+b+":"+c+" not found.");return null},a)}
function et(a){if(a.isLogin()){var b="login_data/"+a.g.user_id;return a.db.get("Meta",b).B(function(a){var d=dt(this,"Users",this.g.user_id).B(function(d){a&&a.date_modified==d.date_modified||this.db.put("Meta",d,b)},this);return a?a:d},a)}return C("Not login")}
function ft(a,b,c,d){if(!v(c)||0==c.length)return C("record id required.");if(0<=es.indexOf(b)){var e;d?(e=R.only(c),e=a.db.values(b,d,e).B(function(a){return a[0]},a)):e=a.db.get(b,c);return e.B(function(a){if(!a)return dt(this,b,c,d)},a)}return 0<=ds.indexOf(b)?dt(a,b,c,d):C("module: "+b+" not registerred")}
function gt(a){if(a.i&&a.i.isLogin)return bc(a.i);var b=new B;a.db.get("Meta","info/server").ba(function(a){a&&a.version?(this.i=a,b.callback(a)):this.request("get_server_info",[],[],function(a,c){if(0==c.U())this.i=null,b.D("service "+(this.o+"/service/v4/rest.php")+" not responding");else if(fj(c)){var f=jk(c);if((!a||!a.version)&&v(f))try{a=JSON.parse(f)}catch(g){a=jk(c)}if(a&&a.version){var f=a,k={},l;for(l in f)k[l]=f[l];this.i=k;b.callback({info:f,about:this.about()});this.db.put("Meta",f,"info/server")}else this.i=
null,b.D("invalid respond "+jk(c))}else this.i=null,b.D("request fail "+c.U()+" "+c.La())},this)},a);return b}function ht(a){return a.db.get("Meta","available_modules").B(function(a){if(a)return a;this.request("get_available_modules",["filter"],["all"],function(a){if(a&&a.modules){var b=a.modules;this.db.put("Meta",[b],["available_modules"])}else J(this.logger,"AvailableModules failed.");return b},this)},a)}
h.about=function(){var a=this.j,a=a instanceof up&&/proxy/.test(a.i);return{baseUrl:this.o,domain:this.h,userName:this.l,isLogin:this.isLogin(),hostPermission:!a}};function it(a){return(new An([gt(a),ht(a),bt(a)])).B(function(a){return{serverInfo:a[0][1],availableModules:a[1][1],modulesInfo:a[2][1],about:this.about()}},a)}
function jt(a,b,c){var d=[],e;for(e in c)d.push({name:e,value:c[e]});var f={module_name:b,name_value_list:d};return Zs(a,"set_entry",f).B(function(a){if(a&&a.id){var c={id:a.id};a=a.entry_list||{};for(var d in a)c[d]=a[d].value;for(var e in c)"date_modified"!=e&&(f[e]=c[e]);this.db.put(b,f);ct(this,b);return c}throw Error("creating "+b+" entry fail");},a)}
function kt(a,b,c){if(c){var d=lt(b,mt,a.h,void 0,c.id),e=d.module,f=new Is(a.h,e,c);he(a.logger,"synchronizing "+b+" to "+f);if(Ks(f)==d.h){var g=new vq("update-gdata-record");wq(g,c);b=b.getData();y(b)&&gn(b);Rs(b,c)&&jt(a,e,c).A(function(a){y(a)?g.g=gn(a):g.g=a;this.history.add(g)},function(a){J(this.logger,"Fail to put record "+c.id+" to server "+a.message)},a)}}}
function nt(a,b){for(var c=ot(b),d=0;d<c.length;d++)0<=es.indexOf(c[d].module)&&a.db.get(c[d].module,c[d].g).B(function(a){kt(this,b,a)},a)}function pt(a,b,c){var d={};Rs(c,d);return jt(a,b,d)}h.isLogin=function(){return!!this.g&&!!this.g.user_id};
h.update=function(){if(this.j&&this.j instanceof up)this.logger.info(this+" updating skipped since no direct connection is not available.");else{var a;if(this.K)ge(this.logger,"Modules are already updating now at "+a+" / "+es.length);else{this.K=!0;this.p=z();a=0;var b=this,c=function(){var d=es[a];d?(he(b.logger,"Syncing module "+d),a++,ct(b,d).ba(function(){b.p=z();q.setTimeout(function(){c()},500)})):(ge(b.logger,"Updating module done"),b.K=!1)};c();q.setTimeout(function(){2E3<b.p-z()&&c()},2E3)}}};
function Ws(a){if(!window.navigator.onLine){var b=new B;chrome.storage.local.get("last-login",function(c){(c=c["last-login"])&&Wb(a.db.get("Meta","login_data/"+c).B(function(a){this.g=a},a),b)});return b}if(!a.l)return C("username required.");if(!a.J)return C("password required.");b=new B;a.request("login",["user_auth","application_name","name_value_list"],[{user_name:a.l,password:a.J},"Yathit CRM",{language:"",notifyonsave:"false"}],function(a,d){if(a&&a.id){this.g=Ts(a);this.g.id=a.id;var e={};
e["last-login"]=this.g.user_id;chrome.storage.local.set(e);this.dispatchEvent(new F(qt,this));b.callback(a)}else a&&a.description?b.D(a.description+" ("+a.name+")"):(e=d.U()+" "+d.La()+" "+jk(d),b.D("Login fail: "+e.substr(0,200)))},a,!0);return b}
function rt(a){var b=new B;if(a.g&&a.g.user_id){var c="login_data/"+a.g.user_id;chrome.storage.local.remove("last-login");a.db.remove("Meta",c)}a.request("logout",[],[],function(a,c){this.g=null;fj(c)?(J(this.logger,"Logout request fail with "+c.U()+" "+c.La()),b.callback(!0)):b.D(c.U()+" "+c.La())},a,!0);return b}
function st(a){function b(){var a=new B;g.request(new bj(f.toString())).execute(function(b,c){/sugarcrm/i.test(jk(c))?a.D("Look like SugarCRM web site, but REST V4 API is not available."):200==c.U()?a.D("Not a SugarCRM web site"):a.D("Invalid respond, "+c.U())});return a}function c(a){var b=new B;e(a+"/service/v4/rest.php",function(c,e){if(200==e.U()){if(!c||!c.version){var f=jk(e);if(v(f))try{c=JSON.parse(f)}catch(g){b.D(d(a,e));return}else c=f}c&&c.version&&(c.baseUrl=a,b.callback(c))}else b.D(d(a,
e))});return b}function d(a,b){var c="GET "+a+" "+b.U()+" "+b.La()+" "+jk(b);return{name:"HttpRequestError: "+b.U()+" GET "+a,message:c}}function e(a,b){var c=new Ke;c.add("method","get_server_info");c.add("input_type","json");c.add("response_type","json");c.add("rest_data","{}");g.request(new bj(a,"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},c.toString())).execute(b)}a=a.trim();va(a,"http")||(a="https://"+a);var f=new De(a);Je(f,"");Ie(f,null);var g=$i("proxy"),k=f.clone();a=f.Hc;
/rest.php$/.test(a)||/index.php$/.test(a)&&He(k,a.replace("/index.php",""));var l=k.toString();wa(l,"/")&&(l=l.substring(0,l.length-1));return c(l).A(function(a){a.isLogin=!1;a.userName=null;a.domain=k.Xb;a.baseUrl=l;return a},function(a){if(200==a.errorCode||ya(k.Hc))return b();He(k,"");l=k.toString();return c(l)})}h.toString=function(){return"SugarClient:"+this.h};
function tt(a,b){var c=b&&v(b.assigned_user_id)?b.assigned_user_id:null;if(!v(c)||0==c.length)return C("assigned_user_id required");var d=z()-604800,d=Us(new Date(d)),c=R.bound([c,d],[c,"\uffff"]),c=[new kl("Meetings",Ms("Meetings"),c),new kl("Calls",Ms("Calls"),c),new kl("Tasks",Ms("Tasks"),c),new kl("Opportunities",Ms("Opportunities"),c)],e=[];return yn(a.db,function(a,b){for(var c=[],d=0;d<b.length;d++)b[d]&&(e.push(b[d]),c[d]=!0);return c},c).B(function(){return e})}
function ut(a,b){var c=[],d=null,e=b||{},f=e.limit||10;(e=e.since)&&e instanceof Date&&(d=Us(e),d=R.upperBound(d));for(e=0;e<es.length;e++)c[e]=new kl(es[e],"date_modified",d,!0,!0);var g=[];return yn(a.db,function(a,b){for(var c=[],d=-1,e=null,r=0;r<b.length;r++)b[r]&&(e?e<b[r].date_modified&&(e=b[r].date_modified,d=r,c=[],c[r]=!0):(e=b[r].date_modified,d=r,c[r]=!0));0<=d&&(b[d]._module=es[d],g.push(b[d]));return g.length>=f?[]:c},c).B(function(){return g})}
function vt(a,b,c){"about"==b?a=bc(a.about()):"activity-stream"==b?a=ut(a,c):"activity-upcoming"==b?a=tt(a,c):"delete-record"==b?a=(b=c.module)&&-1!=ds.indexOf(b)?(c=c.id)?c?jt(a,b,{id:c,deleted:"1"}):C("deleting in-exist record."):C("record id required"):C("invalid module name: "+b):"details"==b?a=it(a):"get"==b?a=ft(a,c.module,c.id,c.index):"fetch-module"==b?a=ct(a,c):"info-module"==b?(y(c)&&v(c.module)&&(c=c.module),a=bt(a,c)):"keys"==b?a=a.values(c,!0):"list-module"==b?a=ht(a):"login-user"==b?
a=et(a):"put-record"==b||"new-record"==b?(b=c.module)&&-1!=ds.indexOf(b)?(c=c.record,a=y(c)?jt(a,b,c):C("record object required")):a=C("invalid module name: "+b):"search"==b?a=u(c)?a.search(c):C("query must be an array"):"query"==b?a=a.query(c):"server-info"==b?a=gt(a):"rest"==b?y(c)?(b=c.method,c=c.params,a=v(b)&&0!=b.length?y(c)?Zs(a,b,c):C("REST parameter must be an object"):C("method must be valid string")):a=C("REST parameter must be an object"):a="values"==b?a.values(c):C("invalid req "+b);
return a};function wt(a){Error.captureStackTrace?Error.captureStackTrace(this,wt):this.stack=Error().stack||"";a&&(this.message=String(a))}A(wt,Error);wt.prototype.name="ydn.gdata.error.InvalidAtomFormatError";function xt(a){Error.captureStackTrace?Error.captureStackTrace(this,xt):this.stack=Error().stack||"";a&&(this.message=String(a))}A(xt,Error);xt.prototype.name="ydn.gdata.error.IncompatibleError";var yt="atom app gd xhtml batch openSearch".split(" ");function zt(a){if(!t(this.type))throw new Ni("Abstract class cannot be instantiated.");if(v(a))a={id:{$t:a}};else if(!t(a.id)||!v(a.id.$t))throw new Ii("Invalid GDataFeed");this.id=a.id.$t;this.data=a;t(this.data.entry)?u(this.data.entry)||(this.data.entry=[this.data.entry]):this.data.entry=[];this.j={};this.o={};a=u(this.data.entry)?this.data.entry.length:0;for(var b=0;b<a;b++){var c=this.data.entry[b],c=c.id?c.id.$t:c.ji?c.ji.$t:"";if(0==c.length)throw new wt("entry "+b);if(0==c.match(/\w+$/)[0].length)throw new wt("entry "+
b+" of "+c);var d=c.match(/\w+$/)[0];this.j[c]=this.data.entry[b];this.o[d]=this.data.entry[b]}this.i=!0;this.J=[];this.t=new pi(function(){this.dispatchEvent(At)},300,this);this.Qh=null;this.h=NaN;this.p=void 0}A(zt,wi);var At="i";h=zt.prototype;h.Fg=function(){return this.kind};h.logger=L("ydn.gdata.Feed");
h.Wa=function(a){var b=new B;ie(this.logger,this+" receiving a task, ready: "+this.i);var c=this;this.i?(this.i=!1,b.ba(function(){O(c.logger,c+" finish the task.");c.i=!0;var a=c.J.shift();a&&a.call(this)}),a.call(this,b)):this.J.push(pa(oa(a,this),b));return b};h.Qh=null;function Bt(a){var b;if(!(b=a.Qh))if(a=a.df(),t(a)){b=a;for(var c=0;c<bk.length;c++){var d=(0,bk[c])(a);if(d){b=d;break}}O(Zj,"Resolving "+a+" to "+b);b=ak[b]||null}else b=ak["default"];return b}h.Gg=function(){this.dispatchEvent("e")};
h.hh=function(){return yt};h.mi=function(a){a.g()||J(this.logger,"Batch submission failed. "+a.responseText)};
h.Zg=function(a,b){var c=this.hh(),d=void 0;t(c)||(c=yt);for(var e="",f=0;f<c.length;f++)var g=c[f],e=0==f?e+(' xmlns="'+fr[g]+'" '):e+(" xmlns:"+g+'="'+fr[g]+'" ');d=t(d)?"<id>"+d+"</id>":"";d=Gi("<feed"+e+">"+d+"</feed>");for(f=c=0;e=this.Uc(f);f++)if(wr(e))ur(e,"");else if(xr(e.getData())){var g="delete"==vr(e.getData()),k=!(!e.data.id||!e.data.id.$t);ur(e,null);var l=rr(new mr(null,"entry",e.data),d.documentElement),m=l.getElementsByTagNameNS(hr("batch"),"operation");m[0]?m=m[0]:m=l.appendChild(d.createElementNS(hr("batch"),
"operation"));l=d.createAttribute("type");l.nodeValue=g?"delete":k?"update":"insert";m.setAttributeNode(l);ur(e,"committed");c++;a&&a.message({id:this.Eg(),code:"operation: "+l.nodeValue+" "+e})}if(0==c)return ge(this.logger,this+" Nothing to commit."),0;ge(this.logger,this+" committing "+c+" entries.");d=Hi(d);b?((e=this.logger)&&e.info("Commit ignored for dry run.",void 0),window.console.log(d)):(e=oa(this.mi,this),this.K&&this.K.stop(),f=Bt(this),g=this.yf(),f.send(g,e,{method:"POST",body:d,headers:{"Content-Type":"application/atom+xml"},
params:{}}));return c};h.cf=function(a){return new sr(a)};h.Uc=function(a){return 0<=a&&a<this.data.entry.length?this.cf(this.data.entry[a]):null};h.Dg=function(a){return(a=this.j[a])?this.cf(a):null};
h.save=function(a){if(this.store){var b=this;this.l||(this.l=new pi(function(){this.Wa(function(a){var d=b.toJSON(),e=b.data.entry,f,g,k;b.store.P(function(a){a.put("ydn.gdata.feed",d).Oc(function(a){throw a;}).B(function(){f=!0});a.put("ydn.gdata.entry",e).Oc(function(a){throw a;}).B(function(a){k=a.length;g=!0})},["ydn.gdata.feed","ydn.gdata.entry"],"readwrite").A(function(){f&&g?ie(this.logger,b+": saved "+k+" entries."):ie(this.logger,b+": saved failed"+e.length+" entries.");a.callback(!0)},function(a){throw a;
},this)})},1E3,this));a?ri(this.l):qi(this.l)}};
function Ct(a,b,c){c=c||new B;var d=Bt(a);if(!d)return J(a.logger,a+": No transport available."),c.D(Error("No transport available.")),c;d.send(b,function(b){if(200==b.status){a.h=z();b=b.W?Yf(b.W.responseText):void 0;if(!b.feed)throw new wt("feed missing.");var d=b.feed;if(!t(d))throw b=Di(d),new wt(b.substr(0,50));if(d.id.$t!=a.C())throw new xt(d.id.$t+" is not "+a.C());var g=b=0,k=u(d.entry)?d.entry:d.entry?[d.entry]:[];b=k.length;0==b&&O(a.logger,a+": fetch return no result.");for(var l=0;l<b;l++){for(var m=
a,n=k[l],p=n instanceof sr?n:m.cf(n),r=p,s=0;s<r.Pc.length;s++)null!=r.data[r.Pc[s]]&&!u(r.data[r.Pc[s]])&&(r.data[r.Pc[s]]=[r.data[r.Pc[s]]]);ur(r,null);r=r.getData();r.batch$status&&(r.batch$status=void 0);r.batch$operation&&(r.batch$operation=void 0);var r=p.C(),w=m.Dg(r);(s=!!w)?w.update(p):(w=tr(p),m.data.entry.push(n),m.j[r]=p.getData(),m.o[w]=p.getData());!s&&g++}ge(a.logger,a+" "+b+" ("+g+" new) entries received");a.Gg();(d=yq(d,"next"))?(a.save(),qi(a.t),a.p=d.$t,Ct(a,d.href,c)):(0<b&&(a.save(),
qi(a.t)),c.callback(!0))}else J(a.logger,"Fetching "+b.uri+" failed: "+b.status),c.D(!1)});return c}h.toString=function(){return this.type+":"+this.id};function Dt(a,b){a.Zh&&b.g.set("v",a.Zh);b.g.set("alt","json");b.g.set("showdeleted",!0)}
function Et(a,b){var c="lu",d=!1;if("lf"==c){if(a.h){var d=!0,e=new Date(a.h),e=e.toISOString();b.g.set("updated-min",e)}}else if("lu"==c){for(var e=0,f=-1,g,k=0;g=a.Uc(k);k++)g=g.data.updated.$t,e<g&&(e=g,f=k);if(e=a.Uc(f))e=new Date(e.data.updated.$t),e=new Date(1+ +e),e=e.toISOString(),b.g.set("updated-min",e)}else"lo"==c?(b.g.set("orderby","lastmodified"),a.h&&b.g.set("max-results","1")):c="no";ie(a.logger,a+" updating "+(d?"continue":"begin")+" by "+c)}h.Qj=cr.prototype.Te;h.C=cr.prototype.C;
h.Sj=cr.prototype.Gj;h.Rj=cr.prototype.Fj;h.df=function(){return this.Sj()||""};h.Eg=function(){return this.id};h.yf=function(){return this.Rj()};function Ft(a){return a.Wa(function(a){var c=new De(this.df());Dt(this,c);Et(this,c);xi(this,ui,!1);Ct(this,c.toString()).ba(function(c){yi(this);c?a.callback(!0):a.D(void 0)},this)})}h.update=function(a){return a||!0!==("undefined"==typeof this.g?null:(this.g&ui)==ui)?Ft(this):(ie(this.logger,this+" already loaded."),bc(!1))};
h.count=function(a){if(a){a=0;for(var b,c=0;b=this.Uc(c);c++)wr(b)||"deleted"==vr(b.getData())||a++;return a}return this.data.entry.length};h.toJSON=function(){return{id:this.id,key:this.Eg(),last_fetch_next_uri:this.p,last_fetch:this.h}};function Gt(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{Ab:b,mb:a}}function Ht(a,b){var c=Gt(a),d=Gt(b);if(t(c.Ab)&&t(d.Ab)&&0!=c.Ab.length&&0!=d.Ab.length&&c.Ab!==d.Ab)return 0;if(t(c.lb)&&0!=c.lb.length){if(t(d.lb)&&0!=d.lb.length){if(c.lb.length>=d.lb.length){for(var e=0;e<d.lb.length;e++)if(c.lb[e]!=d.lb[e])return 0;return 1}for(e=0;e<c.lb.length;e++)if(c.lb[e]!=d.lb[e])return 0}return-1}return 1}
function It(a,b){if(!a||!b||0==a.length||0==b.length)return 0;a=a.trim();b=b.trim();var c=Gt(a),d=Gt(b);return c.Ab&&c.mb&&c.Ab==d.Ab&&c.mb==d.mb?6<=c.mb.length?1:4<=c.mb.length?.8:.4:c.mb&&4<=c.mb.length&&c.mb==d.mb?8<=c.mb.length?.8:4<=c.mb.length?.6:.4:0};function Jt(a){sr.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{hk:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}A(Jt,sr);Jt.prototype.logger=L("ydn.gdata.m8.Entry");Jt.prototype.g="3.0";Jt.prototype.type="m8";
Jt.prototype.toString=function(){var a=this.id?tr(this):void 0;return"m8.Entry."+this.kind+":"+a};function Kt(a){if(!t(this.kind))throw new Ni("Abstract class cannot be instantiated.");zt.call(this,a);this.user_id=this.C()}A(Kt,zt);h=Kt.prototype;h.Fg=function(){return this.kind};h.Zh="3.0";h.type="m8";h.toString=function(){return"Feed:"+this.kind+":"+this.user_id};h.df=function(){return"https://www.google.com/m8/feeds/"+this.Fg()+"s/"+this.user_id.replace("@","%40")+"/full?v=3.0"};
h.yf=function(){var a=Kt.m.yf.call(this);return a?a:"https://www.google.com/m8/feeds/"+this.Fg()+"s/"+this.user_id.replace("@","%40")+"/full/batch?v=3.0"};var Lt=yt.concat(["gContact"]);Kt.prototype.hh=function(){return Lt};function Mt(a,b,c,d,e,f){this.scheme=a;this.domain=b;this.module=c;this.g=d;this.i=ha(e)?e:NaN;this.h=ha(f)?f:NaN}var mt="sugarcrm";function Nt(a){if(!y(a)||!v(a.value))return null;var b=Ot(a.value);if(!b)return null;var c=NaN,d=NaN;if(v(a.label)){a=a.label;var e=a.indexOf("#"),f=a.indexOf("-");0<e&&0<f&&f>e&&(c=parseInt(a.substring(e,f),10),d=parseInt(a.substring(f),10))}return new Mt(b[1],b[2],b[3],b[4],c,d)}function Ot(a){return a?a.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null}
Mt.prototype.T=function(){return this.scheme+"://"+this.domain+"/"+this.module+"/"+this.g};function Pt(a){Jt.call(this,a)}A(Pt,Jt);h=Pt.prototype;h.kind="contact";h.logger=L("ydn.gdata.m8.ContactEntry");h.bf=function(){return"contact"};h.getName=function(a){var b=a?"":this.Nd();if(a||0==b.length)a=this.getData().gd$name,y(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return Ba(b)};function Qt(a){var b=a.data.gd$email;a=[];for(var b=u(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function Rt(a){a=a.data.gd$phoneNumber;a=u(a)?a:y(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!ya(a[c].$t)&&b.push(a[c].$t);return b}h.Af=function(){var a=Pt.m.Af.call(this);if(a.ydn$emails||a.ydn$xp||a.ydn$externalIds)a==this.data&&(a=gn(this.data)),delete a.ydn$emails,delete a.ydn$xp,delete a.ydn$externalIds;return a};h.Pc="link category gd$email gd$im gd$organization gd$phoneNumber gd$structuredPostalAddress gd$formattedAddress".split(" ");
function St(a,b){function c(a){var b=Bb(e,function(b){return b.address===a.address});b?b.rel=t(a.rel)?a.rel:b.rel:d(a)}function d(a){a=gn(a);f&&delete a.primary;t(void 0)&&(a.rel=void 0);e.push(a)}for(var e=[gn(a.data.gd$email[0])],f=!!a.data.gd$email[0].primary,g=1;g<a.data.gd$email.length;g++)c(a.data.gd$email[g]);for(g=0;g<b.length;g++)c(b[g]);g=Pm(e,a.data.gd$email);g||(a.data.gd$email=e);return!g}
function Tt(a,b){function c(a){var b=yb(e,function(b){return It(b.$t,a.$t)}),c=Yi(b);if(.4<c.value){var b=e[c.index],f=t(a.rel)?a.rel:b.rel;1==c.value?(b.rel=f,b.$t=a.$t):t(a.rel)&&t(b.rel)&&b.rel!==a.rel?d(a,f):(b.rel=f,c=Ht(b,a),-1==c?b.$t=a.$t:0==c&&(b.$t=a.$t))}else d(a)}function d(a,b){a=gn(a);f&&delete a.primary;t(b)&&(a.rel=b);e.push(a)}for(var e=[gn(a.data.gd$phoneNumber[0])],f=!!a.data.gd$phoneNumber[0].primary,g=1;g<a.data.gd$phoneNumber.length;g++)c(a.data.gd$phoneNumber[g]);for(g=0;g<
b.length;g++)c(b[g]);g=Pm(e,a.data.gd$phoneNumber);g||(a.data.gd$phoneNumber=e);return!g}h.jg=function(a,b){if("gd$phoneNumber"==a){if(null!=this.data.gd$phoneNumber)return Tt(this,b);this.data.gd$phoneNumber=gn(b);return!0}if("gd$email"==a){if(null!=this.data.gd$email)return St(this,b);this.data.gd$email=gn(b);return!0}return Pt.m.jg.call(this,a,b)};
function lt(a,b,c,d,e){a=a.getData();a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var f=0;f<a.length;f++){var g=Nt(a[f]);if(g&&!(b&&b!=g.scheme||c&&c!=g.domain||e&&e!=g.g||d&&d!=g.module))return g}return null}function ot(a){a=a.getData();a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var b=[],c=0;c<a.length;c++){var d=Nt(a[c]);d&&b.push(d)}return b};function Ut(a){Kt.call(this,a)}A(Ut,Kt);h=Ut.prototype;h.logger=L("ydn.gdata.m8.ContactFeed");h.kind="contact";h.Gg=function(){Ut.m.Gg.call(this)};h.Dg=function(a){return Ut.m.Dg.call(this,a)};h.cf=function(a){return new Pt(a)};h.Uc=function(a){return Ut.m.Uc.call(this,a)};h.df=function(){return"https://www.google.com/m8/feeds/contacts/"+this.C()+"/full"};h.Eg=function(){return"http://www.google.com/m8/feeds/contacts/"+this.C().replace("@","%40")};function Vt(a){function b(a){va(a,"atom:")&&(a=a.substring(5,a.length));return a.replace("#text","$t").replace(/:/g,"$")}v(a)&&(a=Gi(a));var c={};if(1==a.nodeType){if(0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var e=a.attributes.item(d);c[b(e.nodeName)]=e.nodeValue}}else 3==a.nodeType&&(c=a.nodeValue);if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){var e=a.childNodes.item(d),f=b(e.nodeName);if("undefined"==typeof c[f])"content"==f?(c[f]={$t:Hi(e)},e.namespaceURI&&(c[f].xmlns=
e.namespaceURI)):c[f]=Vt(e);else{if("undefined"==typeof c[f].length){var g=c[f];c[f]=[];c[f].push(g)}c[f].push(Vt(e))}}return c};function Wt(a,b){this.id=b.replace("@","%40");this.client=this.g=null;this.i=new si(function(){ge(this.logger,"updating gdata "+this);Xt(this).A(function(a){this.logger.info(this+" synced, "+a+" new entries updated.")},function(){J(this.logger,this+" update failed.")},this)},6E4,this);this.j=a;this.h=null}h=Wt.prototype;h.logger=L("ydn.ds.gdata.GData");h.update=function(){var a=this.i;a.ea?a.Hd=!0:ti(a)};h.O=function(){return this.j};
function Yt(a){var b=new B;a.execute(function(a,d){a?b.callback(a):b.D(d)});return b}
function Zt(a,b){var c=(a.client?a.client:$i("gse")).request(b);return Yt(c).A(function(a){a=a.feed;if(!a.entry)return 0;for(var b=(new Ut(a)).Qj("next"),c=a.entry.length,g=!!this.h,k=0;g&&k<c;k++){var l=a.entry[k];l.gContact$externalId&&this.h(l)}return this.O().put(this.L(),a.entry).B(function(){return b?Zt(this,new bj(b.href)).B(function(a){return c+a},this):c},this)},function(a){J(this.logger,"fetching fail "+(a?a.U()+" "+a.La():""))},a)}h.getParams=function(){return{alt:"json"}};
h.get=function(a){return v(a)&&0!=a.length?this.O().get(this.L(),a):C("invalid key")};h.put=function(a){return this.O().put(this.L(),a)};h.Yh=function(a){return new sr(a)};function $t(a,b){var c=a.Yh(b);ur(c,"modified");return c.Zg().B(function(a){a=Vt(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+Ci(a));delete b.updated;this.O().put(this.L(),b);return b},a)}
function Xt(a){if(!a.O().getName())return C(Error("database not ready"));if(!a.g){var b=new il(a.L(),"updated.$t",null,!0);a.g=a.O().keys(b,1).B(function(a){var b=this.getParams();b.orderby="lastmodified";a[0]?(b.sortorder="descending",a=(new Date(1+ +new Date(a[0]))).toISOString(),b["updated-min"]=a):b.sortorder="ascending";return Zt(this,new bj(au(this)+"/full","GET",b)).ba(function(){this.g=null},this)},a)}return a.g}h.toString=function(){return"GData:contact:"+this.id.replace("%40","@")};function bu(a,b){Wt.call(this,a,b)}A(bu,Wt);bu.prototype.L=function(){return"contact"};bu.prototype.getParams=function(){var a=bu.m.getParams.call(this);a.v="3.0";return a};function au(a){return"https://www.google.com/m8/feeds/contacts/"+a.id}bu.prototype.Yh=function(a){var b=!!a.id;b||(a.id={$t:au(this)+"/base/0"});var c=new Pt(a);b||delete a.id;return c};function cu(a,b){return v(b)?0==b.length?bc([]):a.O().values(a.L(),"ydn$emails",R.only(b),100,0,!1,!0):C("invalid key for email "+b)}
function du(a,b){var c=b.T();if(!v(c)||0==c.length)return C("invalid key for external id "+c);c=R.only(c);return a.O().values(a.L(),"ydn$externalIds",c).B(function(){},a)}
function eu(a,b,c){return a.O().get(a.L(),b).B(function(a){if(a){if(!c||!c.label||!c.value)return C("invalid external_id_data");var e=c.label,f=c.value;a.gContact$externalId=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var g=!1,k=0;k<a.gContact$externalId.length;k++)if(a.gContact$externalId[k].value==f){a.gContact$externalId[k].label=e;g=!0;break}g||a.gContact$externalId.push({label:e,value:f});return $t(this,a)}throw Error("gdata entry "+b+" not found");
},a)}function fu(a,b,c){return a.O().get(a.L(),b).B(function(a){if(a){a.gContact$externalId=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=!1,f=0;f<a.gContact$externalId.length;f++)if(a.gContact$externalId[f].value==c){a.gContact$externalId.splice(f,1);e=!0;break}if(!e)throw Error("ExternalId value "+c+" not found.");return $t(this,a)}throw Error("gdata entry "+b+" not found");},a)};function gu(a){var b=document.querySelector('span[name="me"][email]');if(b)return b=b.getAttribute("email"),bc(b);if(b=document.title.match(/- (\S+@\S+\.\S+) -/))return bc(b[1]);a--;var c=new B;0<a?setTimeout(function(){Wb(gu(a),c)},500):c.D(null);return c}function hu(){if("https://mail.google.com"!=location.origin)return C(null);document.querySelector('span[name="me"][email]');return gu(3).Oc(function(){return iu()})}
function iu(){if("https://mail.google.com"!=location.origin)return C("");var a=new bj("https://mail.google.com/mail/feed/atom/bazinga","GET",{zx:"124"}),a=$i("default").request(a),b=new B;window.setTimeout(function(){b.h||(b.D(),b=null)},2E3);a.execute(function(a,d){if(b)if(fj(d)){var e=jk(d).match(/<title>(.+?)(\S+)<\/title>/);e?b.callback(e[2]):b.D()}else b.D()});return b};/*
 Copyright 2014 YDN Authors, Yathit. All Rights Reserved.
 GNU Lesser General Public License (Version 3).
*/
function ju(){this.g={};this.h=null;ej||(ej=new dj);var a=this.S=ej,b=chrome.extension.getURL("option-page.html");a.p=b;this.t=new kp;this.i=this.o=this.j=this.p=null;this.M=new fh(new jh,"XMLHttpRequest"+location.host);this.l={};this.ib=new Qf(this);chrome.permissions.onAdded.addListener(this.Xi.bind(this))}h=ju.prototype;h.logger=L("ydn.crm.app.App");
h.Xi=function(a){for(var b=(a=a.origins)?a.length:0,c=0;c<b;c++){var d=a[c].match(/https:\/\/([^\/]+)/);if(d){var d=d[1],e=this.g[d];if(e){ge(this.logger,"host permission granted to "+e);if(e.j instanceof up){var f=$i("default");this.g[d]=new Vs(f,e.P,e.o,e.l,e.J);this.g[d].update()}ku(this,{req:"host-permission",data:{grant:d}})}}}};
h.init=function(){he(this.logger,"init "+this);pq();chrome.runtime.onInstalled.addListener(function(a){Yj({event:"onInstalled",details:a,version:"1.1.0","install-id":kq})});setTimeout(function(){$p()},6E4*(.5+Math.random()))};function lu(a,b){return Ws(b).B(function(){var a=b.h,d=b.isLogin()?b.l+"@":" (not login) ";this.logger.info("connected to sugarcrm client: "+d+a);b.isLogin()&&(b.update(),mu(this));a=b.about();Yj({event:"sugar-login",details:a});this.ib.listen(b,qt,this.rh);return a},a)}
h.rh=function(a){a.target.about()};
function nu(a,b){var c=b.baseUrl,d=b.domain||c;if(!d)return C("domain or url required.");d=d.trim();va(d,"http")&&(d=Qe(new De(d)));/\//.test(d)&&(d=Qe(new De("https://"+d)));if(c&&(c=c.trim(),!va(c,"http"))){var c=c.replace(/:?\/\//,""),e=new De("https://"+c);e.Hc||He(e,"/");c=e.toString()}var f=a.g[d],g="sugar-client-"+d,k=a.M.get(g)||{};Xj.log({event:"sugar-init",details:{domain:d}});if(f)return f.isLogin()?bc(f.about()):lu(a,f);var l=b.userName||k.userName;c||(c=k.base_url);c||(c="https://"+d+
"/");if(!l)return he(a.logger,"username not found in "+JSON.stringify(b)),C("username required");var m=b.password;m?b.hashed||(m=CryptoJS.MD5(m).toString()):m=k.password;if(!m)return he(a.logger,"password not found in "+JSON.stringify(b)),C("password required.");k.userName=l;k.password=m;k.base_url=c;var e={origins:[c+"/"]},n=new B;chrome.permissions.contains(e,function(b){b||J(a.logger,"host permission required for "+c);b=b?$i("default"):$i("proxy");f=new Vs(b,a,c,l,m);a.g[d]=f;b=lu(a,f);b.B(function(){a.M.set(g,
k);var b=Object.keys(a.g);qp(a.t,b);ku(a,{req:"list-sugarcrm-domains",data:b})},a);Wb(b,n)});return n}function ou(a,b,c,d){return 0<=ds.indexOf(b)?a.h.get(c).B(function(a){if(a){var f=is(b);return pt(d,f,a).B(function(a){if(a&&a.id)return a;throw Error("Set Entry to "+f+" failed");},this)}throw Error("contact entry "+c+" not found");},a):C(new Ii("invalid module name "+b))}
function pu(a,b){var c=new Is(b.domain,b.module,b.obj),d={};Ss(c,d);c=new Mt(mt,c.domain,c.module,c.C(),NaN,Ks(c));d.gContact$externalId=[{label:c.module+"#"+c.i+"-"+c.h,value:c.T()}];return $t(a.h,d)}function at(a,b){var c=new Mt(mt,b.domain,b.module,b.C());du(a.h,c).B(function(a){for(var c=0;c<a.length;c++){var f=a[c];0<Ss(b,f)&&this.h.put(f)}},a)}function mu(a){for(var b in a.g)if(a.g[b].isLogin())break}
function qu(a,b){if(!b)return C("domain required");a.M.remove("sugar-client-"+b);Xj.log({event:"sugar-rm",details:{domain:b}});return pp(a.t).B(function(a){a=a||[];var d=a.indexOf(b),e=this.g[b];this.ib.ha(e,qt,this.rh);e.$();delete this.g[b];0<=d&&(a.splice(d,1),qp(this.t,a),ku(this,{req:"list-sugarcrm-domains",data:a}));return e.isLogin()?rt(e).B(function(){this.logger.info("SugarCRM "+b+" removed.");mu(this);return!0},this):!1},a)}
h.hj=function(a){for(var b=u(a.gContact$externalId)?a.gContact$externalId:[a.gContact$externalId],c=0;c<b.length;c++)if(b[c]&&b[c].value&&b[c].label){var d=Ot(b[c].value);d&&"sugarcrm"==d[1]&&(d=d[2],this.g[d]&&nt(this.g[d],new Pt(a)))}};function ru(a){a.h=new bu(a.t.g,a.i.email);var b=$i("gse");a.h.client=b;a.h.h=a.hj.bind(a);a.h.update()}
function su(a,b){var c=new B,d=b.email||"";if(a.i&&a.i.email==d)return he(a.logger,"already running for "+d),c.callback(a.i),c;a.i=b;a.i.updated=z();d?(a.logger.info(d+" login to YDN server"),oq(a),lp(a.t,b.Id.$t),ru(a),pp(a.t).B(function(a){a=a||[];for(var b=0;b<a.length;b++)a[b]&&nu(this,{domain:a[b]})},a)):a.logger.info("Not login to YDN server");c.callback(a.i);return c}
function tu(a){var b=new B;rq().request(new bj("/token","DELETE")).execute(function(a,d){fj(d)?(this.j=this.p=null,b.callback(null)):b.D("error "+d.La())},a);return b}
function uu(a,b){var c=y(b)?b:{last_login:"1"},d=rq(),c=new bj("/audit","GET",c),e=new B;d.request(c).execute(function(a,b){if(fj(b)){if(a.LastLoginRecord){var c=a.LastLoginRecord;if(c.timestamp){var d;d=c.timestamp-z();d=Math.abs(d);if(6E4>d)d="0 minutes";else{var m=Math.floor(d/864E5);d%=864E5;var n=Math.floor(d/36E5),p=Math.floor(d%36E5/6E4),r=Ze(m),s=Ze(n),w=Ze(p);d=m*(n+p)?" ":"";var x=n*p?" ":"",m=Pf("{COUNT, plural, =0 {}=1 {{TEXT} day}other {{TEXT} days}}",m,r),n=Pf("{COUNT, plural, =0 {}=1 {{TEXT} hour}other {{TEXT} hours}}",
n,s),p=Pf("{COUNT, plural, =0 {}=1 {{TEXT} minute}other {{TEXT} minutes}}",p,w);d=m+(d+(n+(x+p)))}c.ago=d}}e.callback(a)}else e.D(b)},a);return e}
function tk(a,b){if(a.j)return a.j;if(a.p&&a.p.expires>z())return bc(a.p);if(!a.isLogin())return C(Error("Not login"));a.j=new B;var c={url:b||chrome.extension.getURL("option-page.html")},c=new bj("/token","GET",c);rq().request(c).execute(function(a,b){if(fj(b)){var c=a.Tokens[0];c.has_token?(c.expires=1E3*c.expires_in+z(),this.p=c,this.j.callback(c)):this.j.D(c)}else this.p=null,this.j.D(b);this.j=null},a);return a.j}
function vu(a){function b(a){return Cb(c,function(b){return b.email==a})}for(var c=[],d=0;d<a.length;d++){var e=a[d].user.raw;0<=b(e.name)||c.push({email:e.name,region:a[d].region,ik:new Date(a[d].timestamp)})}return c}h.ni=function(a){var b=new bj("/admin");pq().request(b).execute(function(b){if(a)a(b);else{b=b.LoginRecords;var d=vu(b);window.console.table(d);window.console.info(b.length+" records since "+(new Date(b[b.length-1].timestamp)).toLocaleDateString())}},this)};
function ku(a,b){delete b.id;for(var c in a.l)a.l[c].port.postMessage(b)}h.isLogin=function(){return!!this.i&&this.i.is_login};
function wu(a,b){if(a.o)return a.o;a.o=gj(a.S,b).B(function(a){return su(this,a).A(function(){var a={event:"login","install-id":kq};if(this.isLogin()){var b=this;a.user=this.i.email;a.status="ok";ku(b,{req:"login",data:this.i});setTimeout(function(){b.o=null},9E5)}else a.status="fail",this.o=null;Yj(a)},function(a){this.logger.info("Attempting to login YDN server fail: "+Ci(a))},this)},a);return a.o}
function xu(a){var b=new B;a.o=null;if(a.i){var c=a.i.logout_url;a.i=null;a.p=null;a.j=null;a.h=null;var d=new XMLHttpRequest;d.open("GET",c,!0);d.onload=function(){ku(a,{req:"logout"});d=null};d.send();b.callback(!0)}else b.callback(!1);return b}h.toString=function(){return"SugarApp:1.1.0"};function yu(){ju.call(this);zu(this)}A(yu,ju);yu.prototype.logger=L("ydn.crm.app.EventPage");
function Au(a,b,c){var d=c.req;c.done=!0;var e=null!=c.data?c.data:{};he(a.logger,"service req: "+d+":"+c.id);if("app-setting"==d)c.data=q.localStorage.getItem("app-setting"),b.postMessage(c);else if("echo"==d)he(a.logger,"resp: "+d+":"+c.id),b.postMessage(c);else if("export-record"==d)pu(a,e).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="failed to create a new entry";b.postMessage(this)},c);else if("feed-log"==d){var f=
e.offset||0,e=e.limit||100;Bp.g.values("db-logger",null,e||100,f||0,!0).ba(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c)}else if("feed-log-info"==d)f=e.offset||0,e=e.limit||100,Dp(e,f).ba(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-fetch"==d)f=c.data,"contact"==f?a.h?Xt(a.h).A(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):(c.error="gdata not ready",
b.postMessage(c)):(c.error="invalid kind "+f,b.postMessage(c));else if("gdata-list-contact-by-email"==d)cu(a.h,c.data).B(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token"==d)tk(a,c.data).ba(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token-revoke"==d)tu(a).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){he(a.logger,"resp: "+
this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("list-sugarcrm"==d){e=[];for(f in a.g)e.push(a.g[f].about());he(a.logger,"resp: "+c.req+":"+c.id);c.data=e;b.postMessage(c)}else if("list-sugarcrm-domain"==d){e=[];for(f in a.g)e.push(f);he(a.logger,"resp: "+c.req+":"+c.id);c.data=e;b.postMessage(c)}else"log"==d?(Yj(c.data),b.postMessage(c)):"login-info"==d?q.navigator.onLine?wu(a,c.data).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=
a;this.error="InvalidLoginError:"+(a&&a instanceof Error?a:"");b.postMessage(this)},c):(c.data=a.i,b.postMessage(c)):"logged-in"==d?(wu(a,null).B(function(b){ku(a,{req:d,info:b})}),b.postMessage(c)):"logged-out"==d?xu(a).ba(function(){b.postMessage(c)}):"new-entry"==d?y(c.data)?$t(a.h,c.data).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="failed to create a new entry";b.postMessage(this)},c):(c.error="Invalid gdata entry data",
b.postMessage(c)):"new-sugarcrm"==d?nu(a,c.data).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"remove-sugar"==d?qu(a,c.data).ba(function(a){this.data=a;b.postMessage(this)},c):"server-audit-log"==d?uu(a,e).A(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"social-profile"==d?sq(e).A(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},
c):"sugar-server-info"==d?(f=c.data,f=/https?:/.test(f)?new De(f):Fe(new De,f),(f=a.g[f.Xb])?gt(f).B(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c):st(c.data).A(function(c){he(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){he(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},c)):J(a.logger,"Main channel unknown req: "+d)}
function Bu(a,b,c,d){var e=d.req;d.done=!0;he(a.logger,"sugar service req: "+c+":"+e+":"+d.id);if(a.isLogin())if("echo"==e)b.postMessage(d);else if("import-gdata"==e){var f=d.data,g=f?f["gdata-id"]:"";g?ou(a,f.module,g,c).A(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(J(a.logger,"resp error: "+e+":"+d.id),d.error="gdata id required",b.postMessage(d))}else"link"==e?(c=a.h,(e=d.data["gdata-id"])?(f=d.data["external-id"],eu(c,e,f).A(function(a){this.data=
a;b.postMessage(this)},function(c){J(a.logger,"error linking gdata "+this.req+":"+this.id);this.error=c.name+": "+c.message;b.postMessage(this)},d)):(d.error="required gdata-id not found.",b.postMessage(d))):"login"==e?nu(a,d.data).A(function(c){this.data=c;b.postMessage(this);mu(a)},function(a){this.error=a;b.postMessage(this)},d):"sync-entry"==e?(e=d.data,a.h.get(e).A(function(c){c?new Pt(c):(c="GData entry "+this.data+" not found.",he(a.logger,c),this.error=c,b.postMessage(this))},function(c){he(a.logger,
"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d)):"unlink"==e?(c=a.h,(e=d.data["gdata-id"])?(f=d.data["external-id"])?fu(c,e,f).A(function(a){this.data=a;b.postMessage(this)},function(c){J(a.logger,"error linking gdata "+this.req+":"+this.id);this.error=c.name+": "+c.message;b.postMessage(this)},d):(d.error="required external_id not not found",b.postMessage(d)):(d.error="required gdata-id not found.",b.postMessage(d))):vt(c,e,d.data).A(function(c){he(a.logger,"resp: "+
this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){he(a.logger,"resp error: "+this.req+":"+this.id+" "+(c&&c instanceof Error?c.name+" "+c.message:c));this.error=c;b.postMessage(this)},d);else d.error="Not login",b.postMessage(d)}function Cu(a){for(var b in a.l)if("gmail"==a.l[b].group)break;for(b in a.g)if(a.g[b].isLogin())break}yu.prototype.J=function(){var a=Object.keys(this.g)[0];return{du:this.ni.bind(this),sugars:this.g,s0:a?this.g[a]:null,gdata:this.h,ports:this.l,so:uq,user_info:this.i}};
function zu(a){var b="";chrome.runtime.onMessage.addListener(function(c,d,e){var f=d.url;f&&/https?:\/\/mail.google.com/.test(f)?(d=c?c.req:null,"inject"==d&&b!=c.id?(b=c.id,lq().A(function(b){ge(a.logger,"injecting "+b+" to "+f);chrome.tabs.executeScript(null,{file:b},function(){chrome.tabs.executeScript(null,{code:"app = runInjApp();"},function(){ge(a.logger,b+" injected")})})},function(a){window.console.error(a)}),e(c)):"attach"==d&&(c=c.parent,ge(a.logger,"attaching crm-ex/sidebar.html to "+c+
" in "+f),chrome.tabs.executeScript(null,{code:'var parent = document.getElementById("'+c+'");var f = document.createElement("iframe"); f.src = "crm-ex/sidebar.html"; parent.appendChild(f);'},function(){ge(a.logger,"crm-ex/sidebar.html attached");e("crm-ex/sidebar.html")}))):ge(a.logger,"invalid sender "+f)});chrome.runtime.onConnect.addListener(function(b){var d=b.sender.url,e=b.name.substr(0,b.name.lastIndexOf("-"));Db(ye,e)?(ge(a.logger,"Channel "+b.name+" connected for "+d),a.l[b.name]={name:b.name,
group:e,port:b},Cu(a),b.onMessage.addListener(function(d){if(d&&y(d)){if("close"==d.req)a.logger.info("closing "+b.name),delete a.l[b.name],b.disconnect(),Cu(a);else if(!d.id){J(a.logger,"Unknown group in pipe info "+b.name);return}if("sugarcrm"==d.group){var e=d.name,k=a.g[e];k?Bu(a,b,k,d):J(a.logger,"SugarCRM instance "+e+" not found.")}else"gmail"!=d.group&&"dev"!=d.group&&"hostper"!=d.group&&"popup"!=d.group&&"options"!=d.group&&Au(a,b,d)}else J(a.logger,"invalid message package: "+d)}),b.onDisconnect.addListener(function(){ge(a.logger,
"disconnected "+b.name);delete a.l[b.name];Cu(a)})):J(a.logger,"channel "+b.name+" ignored from "+d)});ge(a.logger,"event page start listening incoming connection")}function Du(){mq();var a=new yu;a.init();wu(a);return a}qa("ydn.crm.version","1.1.0");qa("runApp",Du);yu.prototype.xp=yu.prototype.J;function Eu(a){F.call(this,"navigate");this.h=a}A(Eu,F);function Fu(a){pd.call(this);this.g=a||window;bd(this.g,"popstate",this.Ge,!1,this);bd(this.g,"hashchange",this.Ge,!1,this)}A(Fu,pd);h=Fu.prototype;h.If=!1;h.wj="/";h.setEnabled=function(a){a!=this.If&&(this.If=a)&&this.dispatchEvent(new Eu(this.getToken()))};h.getToken=function(){var a=this.g.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};h.I=function(){kd(this.g,"popstate",this.Ge,!1,this);kd(this.g,"hashchange",this.Ge,!1,this)};h.Ge=function(){this.If&&this.dispatchEvent(new Eu(this.getToken()))};function Gu(){}da(Gu);Gu.prototype.g=0;function Hu(a){return":"+(a.g++).toString(36)};function Y(a){pd.call(this);this.g=a||qh();this.Ja=Iu;this.J=null;this.Z=!1;this.F=null;this.Zb=void 0;this.p=this.l=this.o=this.j=null;this.ff=!1}A(Y,pd);Y.prototype.Mg=Gu.H();var Iu=null;
function Ju(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}h=Y.prototype;h.C=function(){return this.J||(this.J=Hu(this.Mg))};function Ku(a,b){if(a.o&&a.o.p){var c=a.o.p,d=a.J;d in c&&delete c[d];Oc(a.o.p,b,a)}a.J=b}h.n=function(){return this.F};
function Z(a){a.Zb||(a.Zb=new Qf(a));return a.Zb}function Lu(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.o&&a.J&&Mu(a.o,a.J)&&a.o!=b)throw Error("Unable to set parent component");a.o=b;Y.m.Me.call(a,b)}h.getParent=function(){return this.o};h.Me=function(a){if(this.o&&this.o!=a)throw Error("Method not supported");Y.m.Me.call(this,a)};h.Q=function(){this.F=this.g.createElement("div")};h.render=function(a){Nu(this,a)};
function Nu(a,b,c){if(a.Z)throw Error("Component already rendered");a.F||a.Q();b?b.insertBefore(a.F,c||null):a.g.g.body.appendChild(a.F);a.o&&!a.o.Z||a.G()}function Ou(a,b){if(a.Z)throw Error("Component already rendered");if(b&&a.re(b)){a.ff=!0;var c=sh(b);a.g&&a.g.g==c||(a.g=qh(b));a.hb(b);a.G()}else throw Error("Invalid element to decorate");}h.re=function(){return!0};h.hb=function(a){this.F=a};h.G=function(){this.Z=!0;Pu(this,function(a){!a.Z&&a.n()&&a.G()})};
h.ra=function(){Pu(this,function(a){a.Z&&a.ra()});this.Zb&&this.Zb.removeAll();this.Z=!1};h.I=function(){this.Z&&this.ra();this.Zb&&(this.Zb.$(),delete this.Zb);Pu(this,function(a){a.$()});!this.ff&&this.F&&Ih(this.F);this.o=this.j=this.F=this.p=this.l=null;Y.m.I.call(this)};h.u=function(){return this.j};h.X=function(a,b){this.Sd(a,Qu(this),b)};
h.Sd=function(a,b,c){if(a.Z&&(c||!this.Z))throw Error("Component already rendered");if(0>b||b>Qu(this))throw Error("Child component index out of bounds");this.p&&this.l||(this.p={},this.l=[]);if(a.getParent()==this){var d=a.C();this.p[d]=a;Fb(this.l,a)}else Oc(this.p,a.C(),a);Lu(a,this);Jb(this.l,b,0,a);a.Z&&this.Z&&a.getParent()==this?(c=this.R(),c.insertBefore(a.n(),c.childNodes[b]||null)):c?(this.F||this.Q(),b=$(this,b+1),Nu(a,this.R(),b?b.F:null)):this.Z&&!a.Z&&a.F&&a.F.parentNode&&1==a.F.parentNode.nodeType&&
a.G()};h.R=function(){return this.F};function Ru(a){null==a.Ja&&(a.Ja=Gj(a.Z?a.F:a.g.g.body));return a.Ja}function Qu(a){return a.l?a.l.length:0}function Mu(a,b){return a.p&&b?Pc(a.p,b)||null:null}function $(a,b){return a.l?a.l[b]||null:null}function Pu(a,b,c){a.l&&wb(a.l,b,c)}function Su(a,b){return a.l&&b?ub(a.l,b):-1}
h.removeChild=function(a,b){if(a){var c=v(a)?a:a.C();a=Mu(this,c);if(c&&a){var d=this.p;c in d&&delete d[c];Fb(this.l,a);b&&(a.ra(),a.F&&Ih(a.F));Lu(a,null)}}if(!a)throw Error("Child is not in parent component");return a};function Tu(a,b,c,d,e){if(!(E||oc&&vc("525")))return!0;if(jc&&e)return Uu(a);if(e&&!d)return!1;ha(b)&&(b=Vu(b));if(!c&&(17==b||18==b||jc&&91==b))return!1;if(oc&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return!(E&&E&&9<=xc);case 27:return!oc}return Uu(a)}
function Uu(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||oc&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Vu(a){if(nc)a=Wu(a);else if(jc&&oc)a:switch(a){case 93:a=91;break a}return a}
function Wu(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Xu(a,b){pd.call(this);a&&Yu(this,a,b)}A(Xu,pd);h=Xu.prototype;h.F=null;h.ye=null;h.cg=null;h.ze=null;h.bb=-1;h.ec=-1;h.jf=!1;
var Zu={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},$u={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},av=E||oc&&vc("525"),bv=jc&&nc;h=Xu.prototype;
h.Qi=function(a){oc&&(17==this.bb&&!a.ctrlKey||18==this.bb&&!a.altKey||jc&&91==this.bb&&!a.metaKey)&&(this.ec=this.bb=-1);-1==this.bb&&(a.ctrlKey&&17!=a.g?this.bb=17:a.altKey&&18!=a.g?this.bb=18:a.metaKey&&91!=a.g&&(this.bb=91));av&&!Tu(a.g,this.bb,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.ec=Vu(a.g),bv&&(this.jf=a.altKey))};h.Ri=function(a){this.ec=this.bb=-1;this.jf=a.altKey};
h.handleEvent=function(a){var b=a.h,c,d,e=b.altKey;E&&"keypress"==a.type?c=this.ec:oc&&"keypress"==a.type?c=this.ec:mc?c=this.ec:(c=b.keyCode||this.ec,d=b.charCode||0,bv&&(e=this.jf),jc&&63==d&&224==c&&(c=191));d=c=Vu(c);var f=b.keyIdentifier;c?63232<=c&&c in Zu?d=Zu[c]:25==c&&a.shiftKey&&(d=9):f&&f in $u&&(d=$u[f]);this.bb=d;a=new cv(d,0,0,b);a.altKey=e;this.dispatchEvent(a)};h.n=function(){return this.F};
function Yu(a,b,c){a.ze&&dv(a);a.F=b;a.ye=bd(a.F,"keypress",a,c);a.cg=bd(a.F,"keydown",a.Qi,c,a);a.ze=bd(a.F,"keyup",a.Ri,c,a)}function dv(a){a.ye&&(ld(a.ye),ld(a.cg),ld(a.ze),a.ye=null,a.cg=null,a.ze=null);a.F=null;a.bb=-1;a.ec=-1}h.I=function(){Xu.m.I.call(this);dv(this)};function cv(a,b,c,d){Cc.call(this,d);this.type="key";this.g=a}A(cv,Cc);var ev;function fv(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function gv(a,b,c){fa(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(ev||(ev={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=ev,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function hv(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function iv(a){if(a.classList)return a.classList;a=a.className;return v(a)&&a.match(/\S+/g)||[]}function jv(a,b){return a.classList?a.classList.contains(b):Db(iv(a),b)}function kv(a,b){a.classList?a.classList.add(b):jv(a,b)||(a.className+=0<a.className.length?" "+b:b)}function lv(a,b){if(a.classList)wb(b,function(b){kv(a,b)});else{var c={};wb(iv(a),function(a){c[a]=!0});wb(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function mv(a,b){a.classList?a.classList.remove(b):jv(a,b)&&(a.className=xb(iv(a),function(a){return a!=b}).join(" "))}function nv(a,b){a.classList?wb(b,function(b){mv(a,b)}):a.className=xb(iv(a),function(a){return!Db(b,a)}).join(" ")};function ov(){}var pv;da(ov);var qv={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};h=ov.prototype;h.yc=function(){};h.va=function(a){var b=a.g.s("div",rv(this,a).join(" "),a.ca());sv(this,a,b);return b};h.na=function(a){return a};function tv(a,b,c){if(a=a.n?a.n():a){var d=[b];E&&!vc("7")&&(d=uv(iv(a),b),d.push(b));(c?lv:nv)(a,d)}}h.xc=function(){return!0};
h.la=function(a,b){b.id&&Ku(a,b.id);var c=this.na(b);c&&c.firstChild?a.kc(c.firstChild.nextSibling?Hb(c.childNodes):c.firstChild):a.kc(null);var d=0,e=this.w(),f=this.w(),g=!1,k=!1,c=!1,l=Hb(iv(b));wb(l,function(a){g||a!=e?k||a!=f?d|=this.Gf(a):k=!0:(g=!0,f==e&&(k=!0))},this);a.bc=d;g||(l.push(e),f==e&&(k=!0));k||l.push(f);var m=a.tf;m&&l.push.apply(l,m);if(E&&!vc("7")){var n=uv(l);0<n.length&&(l.push.apply(l,n),c=!0)}if(!g||!k||m||c)b.className=l.join(" ");sv(this,a,b);return b};
h.Wc=function(a){Ru(a)&&this.Rf(a.n(),!0);a.isEnabled()&&this.Xc(a,a.Fa)};function vv(a,b,c){if(a=c||a.yc())c=b.getAttribute("role")||null,a!=c&&fv(b,a)}function sv(a,b,c){b.Fa||gv(c,"hidden",!b.Fa);b.isEnabled()||a.pb(c,1,!b.isEnabled());wv(b,8)&&a.pb(c,8,xv(b,8));wv(b,16)&&a.pb(c,16,xv(b,16));wv(b,64)&&a.pb(c,64,xv(b,64))}h.se=function(a,b){Nj(a,!b,!E&&!mc)};h.Rf=function(a,b){tv(a,this.w()+"-rtl",b)};h.Qf=function(a){var b;return wv(a,32)&&(b=yv(a))?Qh(b)&&Rh(b):!1};
h.Xc=function(a,b){var c;if(wv(a,32)&&(c=yv(a))){if(!b&&xv(a,32)){try{c.blur()}catch(d){}xv(a,32)&&a.te(null)}(Qh(c)&&Rh(c))!=b&&Ph(c,b)}};h.xd=function(a,b,c){var d=a.n();if(d){var e=this.pd(b);e&&tv(a,e,c);this.pb(d,b,c)}};h.pb=function(a,b,c){pv||(pv={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=pv[b];var d=a.getAttribute("role")||null;d&&(d=qv[d]||b,b="checked"==b||"selected"==b?d:b);b&&gv(a,b,c)};
h.ac=function(a,b){var c=this.na(a);if(c&&(Gh(c),b))if(v(b))Mh(c,b);else{var d=function(a){if(a){var b=sh(c);c.appendChild(v(a)?b.createTextNode(a):a)}};u(b)?wb(b,d):!fa(b)||"nodeType"in b?d(b):wb(Hb(b),d)}};h.ph=function(a){return a.n()};h.w=function(){return"goog-control"};function rv(a,b){var c=a.w(),d=[c],e=a.w();e!=c&&d.push(e);c=b.bc;for(e=[];c;){var f=c&-c;e.push(a.pd(f));c&=~f}d.push.apply(d,e);(c=b.tf)&&d.push.apply(d,c);E&&!vc("7")&&d.push.apply(d,uv(d));return d}
function uv(a,b){var c=[];b&&(a=a.concat([b]));wb([],function(d){!Ab(d,pa(Db,a))||b&&!Db(d,b)||c.push(d.join("_"))});return c}h.pd=function(a){this.g||zv(this);return this.g[a]};h.Gf=function(a){this.i||(this.g||zv(this),this.i=Qc(this.g));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function zv(a){var b=a.w();Qa(b.replace(/\xa0|\s/g," ")," ");a.g={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Av(a,b){if(!ia(a))throw Error("Invalid component class "+a);if(!ia(b))throw Error("Invalid renderer class "+b);var c=ja(a);Bv[c]=b}function Cv(a,b){if(!a)throw Error("Invalid class name "+a);if(!ia(b))throw Error("Invalid decorator function "+b);Dv[a]=b}var Bv={},Dv={};function Ev(a,b,c){Y.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ja(b);if(d=Bv[d])break;b=b.m?b.m.constructor:null}b=d?ia(d.H)?d.H():new d:null}this.i=b;this.kc(t(a)?a:null)}A(Ev,Y);h=Ev.prototype;h.Sf=null;h.bc=0;h.Jd=39;h.zb=255;h.Rb=0;h.Fa=!0;h.tf=null;h.Wf=!0;h.Vd=!1;h.Tf=null;function Fv(a,b){a.Z&&b!=a.Wf&&Gv(a,b);a.Wf=b}function yv(a){return a.i.ph(a)}h.Q=function(){var a=this.i.va(this);this.F=a;vv(this.i,a,this.yd());this.Vd||this.i.se(a,!1);this.Fa||(Q(a,!1),a&&gv(a,"hidden",!0))};
h.yd=function(){return this.Tf};h.R=function(){return this.i.na(this.n())};h.re=function(a){return this.i.xc(a)};h.hb=function(a){this.F=a=this.i.la(this,a);vv(this.i,a,this.yd());this.Vd||this.i.se(a,!1);this.Fa="none"!=a.style.display};h.G=function(){Ev.m.G.call(this);this.i.Wc(this);if(this.Jd&-2&&(this.Wf&&Gv(this,!0),wv(this,32))){var a=yv(this);if(a){var b=this.t||(this.t=new Xu);Yu(b,a);Z(this).listen(b,"key",this.Na).listen(a,"focus",this.vi).listen(a,"blur",this.te)}}};
function Gv(a,b){var c=Z(a),d=a.n();b?(c.listen(d,"mouseover",a.Bc).listen(d,"mousedown",a.zc).listen(d,"mouseup",a.Cc).listen(d,"mouseout",a.Xf),a.Bd!=ca&&c.listen(d,"contextmenu",a.Bd),E&&c.listen(d,"dblclick",a.sh)):(c.ha(d,"mouseover",a.Bc).ha(d,"mousedown",a.zc).ha(d,"mouseup",a.Cc).ha(d,"mouseout",a.Xf),a.Bd!=ca&&c.ha(d,"contextmenu",a.Bd),E&&c.ha(d,"dblclick",a.sh))}h.ra=function(){Ev.m.ra.call(this);this.t&&dv(this.t);this.Fa&&this.isEnabled()&&this.i.Xc(this,!1)};
h.I=function(){Ev.m.I.call(this);this.t&&(this.t.$(),delete this.t);delete this.i;this.tf=this.Sf=null};h.ca=function(){return this.Sf};function Hv(a,b){a.i.ac(a.n(),b);a.kc(b)}h.kc=function(a){this.Sf=a};h.Fb=function(){var a=this.ca();if(!a)return"";a=v(a)?a:u(a)?yb(a,Uh).join(""):Sh(a);return Aa(a)};h.Zc=function(a,b){if(b||this.Fa!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.n();c&&(Q(c,a),c&&gv(c,"hidden",!a));this.isEnabled()&&this.i.Xc(this,a);this.Fa=a;return!0}return!1};
h.isEnabled=function(){return!xv(this,1)};h.setEnabled=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Iv(this,1,!a)||(a||(Jv(this,!1),this.wa(!1)),this.Fa&&this.i.Xc(this,a),Kv(this,1,!a))};h.wa=function(a){Iv(this,2,a)&&Kv(this,2,a)};function Jv(a,b){Iv(a,4,b)&&Kv(a,4,b)}h.dd=function(a){Iv(this,8,a)&&Kv(this,8,a)};h.ma=function(a){Iv(this,64,a)&&Kv(this,64,a)};function xv(a,b){return!!(a.bc&b)}
function Kv(a,b,c){wv(a,b)&&c!=xv(a,b)&&(a.i.xd(a,b,c),a.bc=c?a.bc|b:a.bc&~b)}function wv(a,b){return!!(a.Jd&b)}h.qa=function(a,b){if(this.Z&&xv(this,a)&&!b)throw Error("Component already rendered");!b&&xv(this,a)&&Kv(this,a,!1);this.Jd=b?this.Jd|a:this.Jd&~a};function Lv(a,b){return!!(a.zb&b)&&wv(a,b)}function Iv(a,b,c){return wv(a,b)&&xv(a,b)!=c&&(!(a.Rb&b)||a.dispatchEvent(Ju(b,c)))&&!a.M}h.Bc=function(a){!Mv(a,this.n())&&this.dispatchEvent("enter")&&this.isEnabled()&&Lv(this,2)&&this.wa(!0)};
h.Xf=function(a){!Mv(a,this.n())&&this.dispatchEvent("leave")&&(Lv(this,4)&&Jv(this,!1),Lv(this,2)&&this.wa(!1))};h.Bd=ca;function Mv(a,b){return!!a.l&&Lh(b,a.l)}h.zc=function(a){this.isEnabled()&&(Lv(this,2)&&this.wa(!0),Ec(a)&&(Lv(this,4)&&Jv(this,!0),this.i.Qf(this)&&yv(this).focus()));!this.Vd&&Ec(a)&&a.preventDefault()};h.Cc=function(a){this.isEnabled()&&(Lv(this,2)&&this.wa(!0),xv(this,4)&&this.Xa(a)&&Lv(this,4)&&Jv(this,!1))};h.sh=function(a){this.isEnabled()&&this.Xa(a)};
h.Xa=function(a){if(Lv(this,16)){var b=!xv(this,16);Iv(this,16,b)&&Kv(this,16,b)}Lv(this,8)&&this.dd(!0);Lv(this,64)&&this.ma(!xv(this,64));b=new F("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.t=a.t);return this.dispatchEvent(b)};h.vi=function(){Lv(this,32)&&Iv(this,32,!0)&&Kv(this,32,!0)};h.te=function(){Lv(this,4)&&Jv(this,!1);Lv(this,32)&&Iv(this,32,!1)&&Kv(this,32,!1)};
h.Na=function(a){return this.Fa&&this.isEnabled()&&this.Yc(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};h.Yc=function(a){return 13==a.g&&this.Xa(a)};Av(Ev,ov);Cv("goog-control",function(){return new Ev(null)});function Nv(){}A(Nv,ov);da(Nv);h=Nv.prototype;h.w=function(){return"goog-tab"};h.yc=function(){return"tab"};h.va=function(a){var b=Nv.m.va.call(this,a);(a=a.tb())&&this.Aa(b,a);return b};h.la=function(a,b){b=Nv.m.la.call(this,a,b);var c=this.tb(b);c&&a.Ne(c);xv(a,8)&&(c=a.getParent())&&ia(c.ed)&&(Kv(a,8,!1),c.ed(a));return b};h.tb=function(a){return a.title||""};h.Aa=function(a,b){a&&(a.title=b||"")};function Ov(a,b,c){Ev.call(this,a,b||Nv.H(),c);this.qa(8,!0);this.Rb|=9}A(Ov,Ev);Ov.prototype.tb=function(){return this.h};Ov.prototype.Aa=function(a){this.i.Aa(this.n(),a);this.Ne(a)};Ov.prototype.Ne=function(a){this.h=a};Cv("goog-tab",function(){return new Ov(null)});function Pv(a){this.g=a}da(Pv);function Qv(a,b){a&&(a.tabIndex=b?0:-1)}h=Pv.prototype;h.Mf=function(a){return"DIV"==a.tagName};function Rv(a,b,c){c.id&&Ku(b,c.id);var d=a.w(),e=!1,f=iv(c);f&&wb(f,function(a){a==d?e=!0:a&&this.ug(b,a,d)},a);e||kv(c,d);Sv(a,b,c);return c}h.ug=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?Tv(a,Uv):b==c+"-vertical"&&Tv(a,Vv)};
function Sv(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.qd(d);f&&(f.F=d,b.isEnabled()||f.setEnabled(!1),b.X(f),Ou(f,d))}else d.nodeValue&&""!=Ba(d.nodeValue)||c.removeChild(d);d=e}}h.qd=function(a){a:{var b;a=iv(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Dv?Dv[b]():null){a=b;break a}a=null}return a};h.Of=function(a){a=a.n();Nj(a,!0,nc);E&&(a.hideFocus=!0);var b=this.g;b&&fv(a,b)};h.w=function(){return"goog-container"};
h.Nf=function(a){var b=this.w(),c=[b,a.hc==Uv?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};h.ih=function(){return Vv};function Wv(a,b,c){Y.call(this,c);this.ub=b||Pv.H();this.hc=a||this.ub.ih()}A(Wv,Y);var Uv="horizontal",Vv="vertical";h=Wv.prototype;h.dg=null;h.vc=null;h.ub=null;h.hc=null;h.ya=!0;h.uc=!0;h.Sc=!0;h.Ua=-1;h.sa=null;h.kb=!1;h.Bb=null;function Xv(a){return a.dg||a.n()}h.Q=function(){this.F=this.g.s("div",this.ub.Nf(this).join(" "))};h.R=function(){return this.n()};h.re=function(a){return this.ub.Mf(a)};h.hb=function(a){this.F=Rv(this.ub,this,a);"none"==a.style.display&&(this.ya=!1)};
h.G=function(){Wv.m.G.call(this);Pu(this,function(a){a.Z&&Yv(this,a)},this);var a=this.n();this.ub.Of(this);this.wc(this.ya,!0);Z(this).listen(this,"enter",this.Vf).listen(this,"highlight",this.si).listen(this,"unhighlight",this.ui).listen(this,"open",this.Yi).listen(this,"close",this.Gi).listen(a,"mousedown",this.ti).listen(sh(a),"mouseup",this.Ji).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Fi);this.Sc&&Zv(this,!0)};
function Zv(a,b){var c=Z(a),d=Xv(a);b?c.listen(d,"focus",a.wd).listen(d,"blur",a.oh).listen(a.vc||(a.vc=new Xu(Xv(a))),"key",a.Na):c.ha(d,"focus",a.wd).ha(d,"blur",a.oh).ha(a.vc||(a.vc=new Xu(Xv(a))),"key",a.Na)}h.ra=function(){this.Lb(-1);this.sa&&this.sa.ma(!1);this.kb=!1;Wv.m.ra.call(this)};h.I=function(){Wv.m.I.call(this);this.vc&&(this.vc.$(),this.vc=null);this.ub=this.sa=this.Bb=this.dg=null};h.Vf=function(){return!0};
h.si=function(a){var b=Su(this,a.target);if(-1<b&&b!=this.Ua){var c=$v(this);c&&c.wa(!1);this.Ua=b;c=$v(this);this.kb&&Jv(c,!0);this.sa&&c!=this.sa&&(wv(c,64)?c.ma(!0):this.sa.ma(!1))}b=this.n();null!=a.target.n()&&gv(b,"activedescendant",a.target.n().id)};h.ui=function(a){a.target==$v(this)&&(this.Ua=-1);this.n().removeAttribute("aria-activedescendant")};h.Yi=function(a){(a=a.target)&&a!=this.sa&&a.getParent()==this&&(this.sa&&this.sa.ma(!1),this.sa=a)};
h.Gi=function(a){a.target==this.sa&&(this.sa=null)};h.ti=function(a){this.uc&&(this.kb=!0);var b=Xv(this);b&&Qh(b)&&Rh(b)?b.focus():a.preventDefault()};h.Ji=function(){this.kb=!1};h.Fi=function(a){var b;a:{b=a.target;if(this.Bb)for(var c=this.n();b&&b!==c;){var d=b.id;if(d in this.Bb){b=this.Bb[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.zc(a);break;case "mouseup":b.Cc(a);break;case "mouseover":b.Bc(a);break;case "mouseout":b.Xf(a);break;case "contextmenu":b.Bd(a)}};
h.wd=function(){};h.oh=function(){this.Lb(-1);this.kb=!1;this.sa&&this.sa.ma(!1)};h.Na=function(a){return this.isEnabled()&&this.ya&&(0!=Qu(this)||this.dg)&&this.Pf(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
h.Pf=function(a){var b=$v(this);if(b&&"function"==typeof b.Na&&b.Na(a)||this.sa&&this.sa!=b&&"function"==typeof this.sa.Na&&this.sa.Na(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.g){case 27:if(this.Sc)Xv(this).blur();else return!1;break;case 36:aw(this);break;case 35:bw(this);break;case 38:if(this.hc==Vv)cw(this);else return!1;break;case 37:if(this.hc==Uv)Ru(this)?dw(this):cw(this);else return!1;break;case 40:if(this.hc==Vv)dw(this);else return!1;break;case 39:if(this.hc==
Uv)Ru(this)?cw(this):dw(this);else return!1;break;default:return!1}return!0};function Yv(a,b){var c=b.n(),c=c.id||(c.id=b.C());a.Bb||(a.Bb={});a.Bb[c]=b}h.X=function(a,b){Wv.m.X.call(this,a,b)};h.Sd=function(a,b,c){a.Rb|=2;a.Rb|=64;a.qa(32,!1);Fv(a,!1);Wv.m.Sd.call(this,a,b,c);a.Z&&this.Z&&Yv(this,a);b<=this.Ua&&this.Ua++};
h.removeChild=function(a,b){if(a=v(a)?Mu(this,a):a){var c=Su(this,a);-1!=c&&(c==this.Ua?(a.wa(!1),this.Ua=-1):c<this.Ua&&this.Ua--);var d=a.n();d&&d.id&&this.Bb&&(c=this.Bb,d=d.id,d in c&&delete c[d])}a=Wv.m.removeChild.call(this,a,b);Fv(a,!0);return a};function Tv(a,b){if(a.n())throw Error("Component already rendered");a.hc=b}
h.wc=function(a,b){if(b||this.ya!=a&&this.dispatchEvent(a?"show":"hide")){this.ya=a;var c=this.n();c&&(Q(c,a),this.Sc&&Qv(Xv(this),this.uc&&this.ya),b||this.dispatchEvent(this.ya?"aftershow":"afterhide"));return!0}return!1};h.isEnabled=function(){return this.uc};
h.setEnabled=function(a){this.uc!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.uc=!0,Pu(this,function(a){a.Th?delete a.Th:a.setEnabled(!0)})):(Pu(this,function(a){a.isEnabled()?a.setEnabled(!1):a.Th=!0}),this.kb=this.uc=!1),this.Sc&&Qv(Xv(this),a&&this.ya))};function ew(a,b){b!=a.Sc&&a.Z&&Zv(a,b);a.Sc=b;a.uc&&a.ya&&Qv(Xv(a),b)}h.Lb=function(a){(a=$(this,a))?a.wa(!0):-1<this.Ua&&$v(this).wa(!1)};h.wa=function(a){this.Lb(Su(this,a))};function $v(a){return $(a,a.Ua)}
function aw(a){fw(a,function(a,c){return(a+1)%c},Qu(a)-1)}function bw(a){fw(a,function(a,c){a--;return 0>a?c-1:a},0)}function dw(a){fw(a,function(a,c){return(a+1)%c},a.Ua)}function cw(a){fw(a,function(a,c){a--;return 0>a?c-1:a},a.Ua)}function fw(a,b,c){c=0>c?Su(a,a.sa):c;var d=Qu(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=$(a,c);if(f&&a.Vg(f)){a.sg(c);break}e++;c=b.call(a,c,d)}}h.Vg=function(a){return a.Fa&&a.isEnabled()&&wv(a,2)};h.sg=function(a){this.Lb(a)};function gw(){this.g="tablist"}A(gw,Pv);da(gw);gw.prototype.w=function(){return"goog-tab-bar"};gw.prototype.ug=function(a,b,c){this.i||(this.h||hw(this),this.i=Qc(this.h));var d=this.i[b];d?(Tv(a,d==iw||d==jw?Vv:Uv),a.i=d):gw.m.ug.call(this,a,b,c)};gw.prototype.Nf=function(a){var b=gw.m.Nf.call(this,a);this.h||hw(this);b.push(this.h[a.i]);return b};function hw(a){var b=a.w();a.h=Tc(kw,b+"-top",lw,b+"-bottom",iw,b+"-start",jw,b+"-end")};function mw(a,b,c){a=a||kw;Tv(this,a==iw||a==jw?Vv:Uv);this.i=a;Wv.call(this,this.hc,b||gw.H(),c);nw(this)}A(mw,Wv);var kw="top",lw="bottom",iw="start",jw="end";h=mw.prototype;h.eb=null;h.G=function(){mw.m.G.call(this);nw(this)};h.I=function(){mw.m.I.call(this);this.eb=null};h.removeChild=function(a,b){ow(this,a);return mw.m.removeChild.call(this,a,b)};h.sg=function(a){mw.m.sg.call(this,a);this.ed($(this,a))};h.ed=function(a){a?a.dd(!0):this.eb&&this.eb.dd(!1)};
function ow(a,b){if(b&&b==a.eb){for(var c=Su(a,b),d=c-1;b=$(a,d);d--)if(b.Fa&&b.isEnabled()){a.ed(b);return}for(c+=1;b=$(a,c);c++)if(b.Fa&&b.isEnabled()){a.ed(b);return}a.ed(null)}}h.cj=function(a){this.eb&&this.eb!=a.target&&this.eb.dd(!1);this.eb=a.target};h.fj=function(a){a.target==this.eb&&(this.eb=null)};h.aj=function(a){ow(this,a.target)};h.bj=function(a){ow(this,a.target)};h.wd=function(){$v(this)||this.wa(this.eb||$(this,0))};
function nw(a){Z(a).listen(a,"select",a.cj).listen(a,"unselect",a.fj).listen(a,"disable",a.aj).listen(a,"hide",a.bj)}Cv("goog-tab-bar",function(){return new mw});function pw(a){return'<div id="sticky-hud-base"><div class="hud-button"><div class="logo-box"></div><div class="arrow-box"></div></div><div class="hud-popup"><div class="popup-container"><div class="popup-content"></div><div class="popup-footer"><div class="popup-footer-bar"><span class="left-item"><a href="'+ki(a.vj)+'" title="Extension options" target="option-page">Options</a></span><span class="center-item"></span><span class="right-item"><a href="https://yathit.uservoice.com/" target="yathit.uservoice.com">Feedback</a> |&nbsp;<a href="https://sites.google.com/a/yathit.com/ydn-crm-wiki/" target="help">Help</a></span></div><div class="status-bar"><span class="status-bar-message"></span></div></div></div></div>'}
pw.g="templ.ydn.crm.inj.hub";function qw(a){return"<div>Current you are login as "+ki(a.Tj)+" to Yathit server.</div>"}qw.g="templ.ydn.crm.inj.wrongLogin";function rw(a,b,c,d,e,f,g,k,l){var m,n;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==zj(m)||(n=Fj(m),p||(p=(p=Gj(m))&&nc?-m.scrollLeft:!p||E&&vc("8")||"visible"==yj(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=oh(n,new nh(p,m.scrollTop))))}m=n||new nh;n=Kj(a);if(p=Ej(a)){var r=new wj(p.left,p.top,p.right-p.left,p.bottom-p.top),p=Math.max(n.left,r.left),s=Math.min(n.left+n.width,r.left+r.width);if(p<=s){var w=Math.max(n.top,r.top),r=Math.min(n.top+
n.height,r.top+r.height);w<=r&&(n.left=p,n.top=w,n.width=s-p,n.height=r-w)}}p=qh(a);w=qh(c);if(p.g!=w.g){var s=p.g.body,w=Ah(w.g),r=new nh(0,0),x=zh(sh(s)),H=s;do{var D;if(x==w)D=Fj(H);else{var I=H;D=void 0;if(I.getBoundingClientRect)D=Cj(I),D=new nh(D.left,D.top);else{D=Zh(qh(I));var S=Fj(I);D=new nh(S.x-D.x,S.y-D.y)}if(nc&&!vc(12)){b:{var S=I,za=Ta("transform");if(void 0===S.style[za]&&(za=uj()+Ua(za),void 0!==S.style[za])){S=(oc?"-webkit":nc?"-moz":E?"-ms":mc?"-o":null)+"-transform";break b}S=
"transform"}I=(I=yj(I,S)||yj(I,"transform"))?(I=I.match(Tj))?new nh(parseFloat(I[1]),parseFloat(I[2])):new nh(0,0):new nh(0,0);D=new nh(D.x+I.x,D.y+I.y)}}r.x+=D.x;r.y+=D.y}while(x&&x!=w&&(H=x.frameElement)&&(x=x.parent));s=oh(r,Fj(s));E&&!Yh(p)&&(s=oh(s,Zh(p)));n.left+=s.x;n.top+=s.y}a=sw(a,b);b=new nh(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=oh(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var K;if(g)if(l)K=l;else if(K=Ej(c))K.top-=m.y,K.right-=m.x,K.bottom-=m.y,K.left-=m.x;a:{l=
b.clone();e=0;a=sw(c,d);d=Ij(c);k=k?k.clone():d.clone();if(f||0!=a)a&2?l.x-=k.width+(f?f.right:0):f&&(l.x+=f.left),a&1?l.y-=k.height+(f?f.bottom:0):f&&(l.y+=f.top);if(g&&(K?(f=l,e=0,65==(g&65)&&(f.x<K.left||f.x>=K.right)&&(g&=-2),132==(g&132)&&(f.y<K.top||f.y>=K.bottom)&&(g&=-5),f.x<K.left&&g&1&&(f.x=K.left,e|=1),f.x<K.left&&f.x+k.width>K.right&&g&16&&(k.width=Math.max(k.width-(f.x+k.width-K.right),0),e|=4),f.x+k.width>K.right&&g&1&&(f.x=Math.max(K.right-k.width,K.left),e|=1),g&2&&(e=e|(f.x<K.left?
16:0)|(f.x+k.width>K.right?32:0)),f.y<K.top&&g&4&&(f.y=K.top,e|=2),f.y<=K.top&&f.y+k.height<K.bottom&&g&32&&(k.height=Math.max(k.height-(K.top-f.y),0),f.y=K.top,e|=8),f.y>=K.top&&f.y+k.height>K.bottom&&g&32&&(k.height=Math.max(k.height-(f.y+k.height-K.bottom),0),e|=8),f.y+k.height>K.bottom&&g&4&&(f.y=Math.max(K.bottom-k.height,K.top),e|=2),g&8&&(e=e|(f.y<K.top?64:0)|(f.y+k.height>K.bottom?128:0)),g=e):g=256,e=g,e&496)){c=e;break a}Aj(c,l);d==k||d&&k&&d.width==k.width&&d.height==k.height||(f=Yh(qh(sh(c))),
!E||f&&vc("8")?(c=c.style,nc?c.MozBoxSizing="border-box":oc?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(k.width,0)+"px",c.height=Math.max(k.height,0)+"px"):(g=c.style,f?(E?(f=Pj(c,"paddingLeft"),d=Pj(c,"paddingRight"),l=Pj(c,"paddingTop"),K=Pj(c,"paddingBottom"),f=new vj(l,d,K,f)):(f=xj(c,"paddingLeft"),d=xj(c,"paddingRight"),l=xj(c,"paddingTop"),K=xj(c,"paddingBottom"),f=new vj(parseFloat(l),parseFloat(d),parseFloat(K),parseFloat(f))),c=Sj(c),g.pixelWidth=k.width-c.left-
f.left-f.right-c.right,g.pixelHeight=k.height-c.top-f.top-f.bottom-c.bottom):(g.pixelWidth=k.width,g.pixelHeight=k.height)));c=e}return c}function sw(a,b){return(b&4&&Gj(a)?b^2:b)&-5};function tw(){}tw.prototype.i=function(){};function uw(a,b,c){this.g=a;this.h=b;this.p=c}A(uw,tw);uw.prototype.i=function(a,b,c){rw(this.g,this.h,a,b,void 0,c,this.p)};function vw(a,b,c,d){uw.call(this,a,b);this.j=c?5:0;this.l=d||void 0}A(vw,uw);vw.prototype.o=function(){return this.j};vw.prototype.i=function(a,b,c,d){var e=rw(this.g,this.h,a,b,null,c,10,d,this.l);if(e&496){var f=ww(e,this.h);b=ww(e,b);e=rw(this.g,f,a,b,null,c,10,d,this.l);e&496&&(f=ww(e,f),b=ww(e,b),rw(this.g,f,a,b,null,c,this.j,d,this.l))}};function ww(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function xw(a,b){var c;c=a.replace("@","%40");c="http://www.google.com/m8/feeds/contacts/"+c+"/base/"+ ++yw;b.id={$t:c};Jt.call(this,b)}A(xw,Pt);var yw=0;function zw(a,b,c){this.i=a;this.g=b;this.h=c;this.kind=Aw}var Aw="d";
function Bw(a,b){var c,d={gd$email:[{address:a.g}]};a.h&&(d.gd$name={gd$fullName:{$t:a.h}});c=new xw(a.i,d);for(var d=[],e=0;e<b.length;e++){for(var f=e,g=c,k=b[e],l=0,m=Qt(g),n=Qt(k),p=0;p<m.length;p++)for(var r=m[p],s=0;s<n.length;s++){var w=n[s];r&&r==w&&(l+=1)}m=0;r=g.data.gd$name;s=k.data.gd$name;if(r&&s)for(w=["gd$familyName","gd$givenName","gd$additionalName","gd$fullName"],n=[.06,.06,.06,.12],p=0;4>p;p++){var x=r[w[p]],H=s[w[p]];x&&H==x&&(m+=n[p])}p=0;n=g.Nd();r=k.Nd();n&&n==r&&(p+=.2);s=
0;g=Rt(g);k=Rt(k);r=g.length;for(n=[];r--;){s=g[r];w=k.length;for(n[r]=0;w--;)x=k[w],s.$t&&x.$t&&(x=.7*It(s,x),n[r]=Math.max(n[r],x));s=Yi(n).value}d[f]=l+m+p+s}c=[];for(e=0;e<b.length;e++)f=Lb(c,Ob,d[e]),0>f?(Jb(c,-(f+1),0,d[e]),l=b.splice(e,1),Jb(b,-(f+1),0,l[0])):Jb(c,f,0,d[e])}zw.prototype.toString=function(){return"ContactModel:"+this.g};function Cw(a,b){this.parent=a;this.g=b}Cw.prototype.i=function(){return Dw(this.parent.module).module_fields[this.g]};function Ew(a){return(a=a.i())?a.group:""}Cw.prototype.h=function(){return this.parent.module.value(this.g)};Cw.prototype.rd=function(){return this.h()};function Fw(a){a=a.i();return v(a.label)?a.label.replace(/:$/,""):a.label}function Gw(a){return(a=a.i())?a.type||"varchar":"varchar"}function Hw(a){return(a=a.i())?!!a.calculated:!1}
var Iw={Uj:"add",Wj:"edit",ak:"optout",bk:"primary",ck:"remove"};Cw.prototype.j=function(){return[]};Cw.prototype.toString=function(){return this.parent+";Field:"+this.g};Cw.prototype.l=function(a){if(Hw(this)||a===this.h())return null;var b={};b[this.g]=a;return b};function Jw(a,b){Cw.call(this,a,b)}A(Jw,Cw);Jw.prototype.h=function(){var a;a:{var b=this.parent;a=this.g;var c=b.module.value("email");if(u(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a=d.email_address;break a}}a=null}else a=b.module.value(a)}return a};Jw.prototype.i=function(){return Dw(this.parent.module).module_fields[this.g]||Dw(this.parent.module).module_fields.email};
Jw.prototype.l=function(a){if(!a)return null;var b=this.parent;if(Kw(b)){for(var b=Lw(b),c=0;c<b.length;c++){var d=b[c];if(b[c].email_address_id==this.g){if(d.email_address==a)return null;b[c].email_address=a;b[c].email_address_caps=a.toUpperCase();return{email:b}}}b={};b[this.g]=a;return b}if(b.module.value(this.g)==a)return null;b={};b[this.g]=a;return b};
function Mw(a){var b=a.parent;if(Kw(b)){for(var c=Lw(b),b=0;b<c.length;b++)if(c[b].email_address_id==a.g)return a=gn(c),a.splice(b,1),{email:a};return null}return b.module.value(a.g)?(b={},b[a.g]=void 0,b):null}
Jw.prototype.j=function(){var a;a:{var b=this.parent;a=this.g;var c=b.module.value("email");if(u(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a="1"==d.opt_out;break a}}a=null}else a="email"==a?"1"==b.module.value("email_opt_out"):null}return[{name:"remove",label:"Remove"},{name:"optout",label:"Opt out",type:"bool",value:a}]};function Nw(a,b){this.yb=null;this.g=a||{};this.bg=gn(b||[])}Nw.prototype.render=function(a){this.yb=document.createElement("div");this.yb.className="more-menu";var b=Ow(this.g.className||"more-vert"),c=document.createElement("div");c.className="svg-button";c.appendChild(b);b=Pw(this.bg);b.classList.add("flyout-menu");this.yb.appendChild(c);this.yb.appendChild(b);a.appendChild(this.yb)};
function Qw(a){var b=Vh(a.target,null,"goog-menuitem");if(b){a.preventDefault();a.stopPropagation();a=b.getAttribute("name");var c=b.classList.contains("goog-menuitem-disabled"),d=Vh(b,null,"flyout-menu");Q(d,!1);setTimeout(function(){Q(d,!0)},1E3);return c?null:a}return null}Nw.prototype.n=function(){return this.yb};
function Pw(a){for(var b=qh(),c=[],d=0;d<a.length;d++){var e=a[d];if(e){var f=[b.s("div",{"class":"goog-menuitem-content"},e.label)];if("bool"==e.type){var g=b.s("div",{"class":"goog-menuitem-checkbox",role:"menuitem"});f.unshift(g)}e.children&&(g=Ow("arrow-drop-right"),g.classList.add("left-arrow"),f.unshift(g));f=b.s("div",{"class":"goog-menuitem",role:"bool"==e.type?"goog-menuitem-checkbox":"menuitem"},f);f.setAttribute("name",e.name);e.value&&f.classList.add("goog-option-selected");e.children&&
(g=Pw(e.children),f.appendChild(g));e.disabled&&f.classList.add("goog-menuitem-disabled");c.push(f)}else e=b.s("div",{"class":"goog-menuseparator",role:"separator"}),c.push(e)}return b.s("div",{"class":"goog-menu goog-menu-vertical",role:"menu"},c)}function Rw(a,b){var c=document.createElement("span");c.className="flyout-button";var d=Ow("more-vert"),e=Pw(b);e.classList.add("flyout-menu");c.appendChild(d);c.appendChild(e);a.appendChild(c)}
function Sw(a,b,c){(a=a.n().querySelector('div.goog-menuitem[name="'+b+'"]'))&&(c?a.classList.remove("goog-menuitem-disabled"):a.classList.add("goog-menuitem-disabled"))}function Tw(a,b){var c=a.n().querySelector('div.goog-menuitem[name="sync"]');c&&(c.querySelector(".goog-menuitem-content").textContent=b)};function Uw(a,b){this.module=a;this.g=b||""}h=Uw.prototype;h.Tb=function(a){var b=Dw(this.module),c;for(c in b.module_fields)if(c==a)return!0;return!1};h.fg=function(){var a=Dw(this.module),b=[],c;for(c in a.module_fields){var d=a.module_fields[c];this.g&&d.group==this.g?b.push(c):this.g||d.group||b.push(c)}return b};function Vw(a,b){var c=a.module.value(b);return v(c)?c:""}h.Df=function(){var a=this.g.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};h.Od=function(){return null};
h.xf=function(){return null};function Ww(a,b){Uw.call(this,a,b)}A(Ww,Uw);function Xw(a,b){return a.module.value(a.g+"_"+b)}function Yw(a,b,c,d,e,f){var g="";a&&(g+=a);c?g=d?c+" "+d+", "+g:g+(" "+c):d&&(g+=" "+d);g||(g=e||"");g||(g=f||"");b&&(g=b+" "+g);return g}Ww.prototype.Od=function(){var a=Xw(this,"country"),b=Xw(this,"city"),c=Xw(this,"state"),d=Xw(this,"postalcode"),e=Xw(this,"street")||"",f=Xw(this,"street_2")||"";return Yw(a,b,c,d,e,f)};Ww.prototype.xf=function(){return{label:"Edit",name:"edit",type:"text"}};function Zw(a,b){Uw.call(this,a,b);this.Ta=[]}A(Zw,Uw);Zw.prototype.h=function(a){var b=$w(this,a);if(b)return b;b=new Cw(this,a);this.Ta.push(b);return b};function $w(a,b){for(var c=0;c<a.Ta.length;c++)if(a.Ta[c].g==b)return a.Ta[c];return null};function ax(a){Zw.call(this,a,"email")}A(ax,Zw);ax.prototype.fg=function(){var a=this.module.value("email");if(u(a))return a.map(function(a){return a.email_address_id});var a=Kw(this),b=Dw(this.module),c=[],d;for(d in b.module_fields)"email"!=b.module_fields[d].group||a&&"email"==d||c.push(d);return c};ax.prototype.h=function(a){var b=$w(this,a);if(b)return b;b=new Jw(this,a);this.Ta.push(b);return b};function Kw(a){var b=a.module.value("email");return t(b)?u(b):!!bx(a.module.parent)}
ax.prototype.Tb=function(a){var b=this.module.value("email");return u(b)?b.some(function(b){return b.email_address_id==a}):ax.m.Tb.call(this,a)};function Lw(a){var b=a.module.value("email");if(u(b))return b;a=Dw(a.module);var c=[],d;for(d in a.module_fields)"email"==a.module_fields[d].group&&c.push({email_address_id:d,email_address:b,primary_address:"0"});return c};function cx(a){Uw.call(this,a,"name")}A(cx,Uw);
function dx(a,b){b=b.trim();if(!a.Tb("last_name"))return{full_name:b?b:void 0};var c={salutation:void 0,full_name:void 0,first_name:void 0,last_name:void 0};if(!b)return c;var d=b.split(/\s+/);if(!a.Tb("last_name"))return{name:b};var e=a.module.value("salutation"),f=a.module.value("first_name"),g=a.module.value("last_name");d[0]==e&&(c.salutation=d.shift(),b=b.substr(e.length+1).trim());if((e=a.Tb("salutation"))&&!(e=f&&d[1]==f)&&(e=2<=d.length))if(e=d[0]){"."!=e.charAt(e.length-1)&&(e+=".");var k=
Dw(a.module).module_fields.salutation,e=0<=(k.options?Object.keys(k.options):["Mrs.","Mr."]).indexOf(e)}else e=!1;e&&(c.salutation=d.shift(),b=b.substr(c.salutation.length+1).trim());e=b.indexOf(g);g&&0<=e?(c.first_name=b.substr(0,e-1).trim(),c.last_name=b.substr(e).trim()):(g=b.indexOf(f),f&&0<=g?(c.first_name=f,c.last_name=b.substr(g+f.length+1,b.length).trim()):(c.first_name=d.shift(),c.last_name=d.join(" ")));c.first_name&&(c.full_name=c.first_name);c.last_name&&(c.full_name=c.full_name?c.full_name+
(" "+c.last_name):c.last_name);return c}cx.prototype.Df=function(){return"Name"};cx.prototype.Od=function(){var a;if(this.Tb("full_name")){a="";var b=this.module.value("full_name");b?a+=b:(a+=this.module.value("first_name")||"",(b=this.module.value("last_name"))&&(a+=" "+b))}else a=this.module.value("name")||"";return a};cx.prototype.xf=function(){return{label:"Edit",name:"edit",type:"text"}};function ex(a,b){Cw.call(this,a,b)}A(ex,Cw);ex.prototype.j=function(){return[{name:"remove",label:"Remove"}]};function fx(a){Zw.call(this,a,"phone")}A(fx,Zw);fx.prototype.h=function(a){var b=this.Ta.indexOf(a);if(0<=b)return this.Ta[b];a=new ex(this,a);this.Ta.push(a);return a};function gx(a,b){pd.call(this);this.parent=a;this.g=b;this.h={}}A(gx,pd);h=gx.prototype;h.logger=L("ydn.crm.sugarcrm.model.Record");h.C=function(){return this.g.C()};h.value=function(a){return this.g.value(a)};function hx(a){return Js(a.g)?Os(a.g):""}function ix(a){return a.g.module}function Dw(a){return a.parent.l[ix(a)]}h.save=function(a){return jx(this.parent,new Is(kx(this.parent),ix(this),a)).B(function(a){lx(this,a)},this)};
function lx(a,b){Js(a.g)&&a.g.C();var c=a.g;if(b){c.g||(c.g={});for(var d in b)c.g[d]=b[d]}Js(a.g)?a.dispatchEvent(new mx):a.dispatchEvent(new nx)}function ox(a,b){if(!b||0==Object.keys(b))return bc(!1);var c=gn(a.g.getData()),d;for(d in b)c[d]=b[d];return jx(a.parent,new Is(kx(a.parent),ix(a),c)).B(function(a){lx(this,a)},a)}function px(a){if(!Js(a.g))return C(Error("record not defined."));var b={module:ix(a),id:a.C()};return qx(a.parent).send("delete-record",b)}
h.I=function(){gx.m.I.call(this);this.h=null};function rx(a){return Js(a.g)?sx(a.parent,ix(a),a.C()):null}function tx(a,b){if(b!=a.g)if(b)if(b.module!=a.g.module){var c=a.g.module;a.g=b;a.dispatchEvent(new ux(c,a))}else Js(b)?Js(a.g)?b.C()!=a.g.C()?(a.g.C(),a.g=b,a.dispatchEvent(new nx(0,a))):(a.g=b,a.dispatchEvent(new mx(a))):Js(b)&&(a.g=b,a.dispatchEvent(new nx(0,a))):Js(a.g)&&(a.g.C(),a.g=b,a.dispatchEvent(new nx(0,a)));else Js(a.g)&&(a.g.g={},a.dispatchEvent(new nx(0,a)))}
h.toString=function(){return"ydn.crm.sugarcrm.model.Record:"+this.g};function vx(a,b){F.call(this,a,b)}A(vx,F);function wx(a,b,c,d){F.call(this,"context-change",d);this.h=a;this.p=b||null;this.l=c||null}A(wx,vx);function nx(a,b){F.call(this,"record-change",b)}A(nx,vx);function ux(a,b){F.call(this,"module-change",b);this.module=a}A(ux,vx);function mx(a){F.call(this,"record-update",a)}A(mx,vx);function xx(a,b,c){pd.call(this);this.about=a;a={};if(u(b))for(var d=0;d<b.length;d++)a[b[d].module_name]=b[d];else a=b;this.l=a;this.info=c||{};this.ib=new Qf(this);this.j=new Is(kx(this),"Users");yx(this);b=we();this.ib.listen(b,["login","host-permission"],this.Ui);this.o=null}A(xx,pd);var qt="login";h=xx.prototype;
h.Ui=function(a){"login"==a.type?(a=a.getData())&&a.domain==kx(this)&&zx(this,a):"host-permission"==a.type&&this.about&&(a=a.getData(),a.grant&&a.grant==kx(this)&&(this.about.hostPermission=!0,this.dispatchEvent(new F("hag"))))};function bx(a){if(null==a.o&&a.info){var b;b=0<=Ra(a.info?a.info.version||"":"","7");a.o=b}return a.o}function zx(a,b){if(b){var c=a.about.isLogin,d=!!b&&b.isLogin;a.about=b;!c&&d?a.dispatchEvent(new F(qt,a)):c&&!d&&a.dispatchEvent(new F("logout",a))}}h.isLogin=function(){return!!this.about.isLogin};
function yx(a){a.about&&a.about.userName&&a.send("login-user").B(function(a){a&&a.id&&(this.j.g=a||{})},a)}function Ax(a){return a.send("about").B(function(a){zx(this,a)},a)}function qx(a){return ze("sugarcrm",kx(a))}function kx(a){return a.about.domain}function Bx(a){return a.about.baseUrl?a.about.baseUrl:"https://"+a.about.domain}function sx(a,b,c){return bx(a)?Bx(a)+"#"+b+"/"+c:Bx(a)+"/index.php?module="+b+"&action=DetailView&record="+c}
function Cx(a,b,c){var d={};d.domain=kx(a);d.baseUrl=a.about.baseUrl||null;d.username=b;d.password=c;return a.send("login",d).B(function(a){zx(this,a)},a)}h.send=function(a,b){return ze("sugarcrm",kx(this)).send(a,b)};function Dx(a,b,c,d,e,f){b={store:b};c&&(b.index=c);d&&(d instanceof R?b.range=d.toJSON():b.key=d);b.prefix=!!e;f&&(b.limit=void 0);return qx(a).send("query",[b])}
function Ex(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return qx(a).send("search",[c])}
function Fx(a,b,c,d){var e=document.createElement("div");e.innerHTML=b.Zf;var f=b.eh,f=f&&f instanceof Date&&!isNaN(f.getTime())?Us(b.eh):"",g=a.about?a.about.userName||"":"",k;k=a.j.value("name")||a.about.userName||null;return a.send("new-record",{module:"Emails",record:{assigned_user_id:g,assigned_user_name:k,type:"archived",date_sent:f,description:e.textContent,description_html:b.Zf,name:b.zj,from_addr:b.pi,to_addrs:b.Bj,parent_id:d||"",parent_type:c||"",mailbox_id:b.jj||"",message_id:b.kg||"",
status:"read"}})}function jx(a,b){var c={module:b.module,record:b.getData()};return a.send("put-record",c)}h.clone=function(){return new xx(this.about,this.l)};h.I=function(){xx.m.I.call(this);this.info=null;this.ib.$();this.ib=null};h.toString=function(){return"ydn.crm.sugarcrm.model.Sugar:"+kx(this)};function Gx(a,b,c,d){xx.call(this,a,b,d);this.g=this.h=this.i=null}A(Gx,xx);Gx.prototype.Ib=function(){return this.g};
function Hx(a){if(!a.g)return C("No SugarCRM Record to link with Gmail contact.");a.g.C();var b=a.g.module,c=a.h;if(!c)return C("Not Gmail contact data to link.");var d=lt(c,mt,kx(a),b);if(d)return C("Contact "+tr(c)+" already link to "+d.g+" with the module "+b);b=new Mt(mt,kx(a),b,a.g.C(),+new Date(c.data.updated.$t),Ks(a.g));c={kind:c.bf(),"gdata-id":c.C(),"external-id":{label:b.module+"#"+b.i+"-"+b.h,value:b.T()}};return qx(a).send("link",c).B(function(a){this.h=new Pt(a);this.dispatchEvent(new wx(this.i,
this.h,this.g))},a)}function Ix(a){if(!a.g)return C("No SugarCRM Record to unlink with Gmail contact.");var b=a.g.C(),c=a.g.module,d=a.h;if(!d)return C("Not Gmail contact data to link.");var e=lt(d,mt,kx(a),c,b);if(!e)return C("No link exists between SugarCRM "+c+" "+b+" and Gmail Contact "+tr(d));b={kind:d.bf(),"gdata-id":d.C(),"external-id":e.T()};return qx(a).send("unlink",b).B(function(a){this.h=new Pt(a);this.dispatchEvent(new wx(this.i,this.h,this.g))},a)}
function Jx(a,b){if(a.g)return C("already imported as "+a.g.C()+" in "+a.g.module);var c=a.h;if(!c)return C("no contact gdata to import?");c={module:b,kind:c.bf(),"gdata-id":c.C()};return qx(a).send("import-gdata",c).B(function(a){this.g=new Is(kx(this),b,a);this.dispatchEvent(new wx(this.i,this.h,this.g));return this.g},a)}Gx.prototype.update=function(a){return this.isLogin()?Kx(this,a):Ax(this).ba(function(){return Kx(this,a)},this)};
function Lx(a,b,c){for(var d=b.g,e=[],f=0;f<gs.length;f++)e[f]={store:gs[f],index:"ydn$emails",key:d};return qx(a).send("query",e).B(function(a){for(var d=0;d<a.length;d++){var e=a[d];if(e.result[0])return new wx(b,c,new Is(kx(this),e.store,e.result[0]))}return new wx(b,c)},a)}function Mx(a){return a.h&&a.g?!!lt(a.h,mt,kx(a),a.g.module,a.g.C()):!1}
function Nx(a,b,c){var d=lt(c,mt,kx(a));if(d){var e=[{store:d.module,index:"id",key:d.g}];return qx(a).send("query",e).B(function(a){if((a=a[0])&&a.result[0])return new wx(b,c,new Is(kx(this),a.store,a.result[0]));window.console.warn("link id: "+d.g+" no longer available, deleting..");window.console.error("Removing external id not implemented");Lx(this,b,c)},a)}return Lx(a,b,c)}
function Ox(a,b){if(b){var c=b.g;return ze().send("gdata-list-contact-by-email",c).B(function(a){a=a.map(function(a){return new Pt(a)});Bw(b,a);return a[0]?Nx(this,b,a[0]):Lx(this,b)},a)}return bc(new wx(null))}function Kx(a,b){return Ox(a,b).A(function(a){this.h=a.p;this.i=a.h;this.g=a.l;this.dispatchEvent(a)},function(a){window.console.error(a.stack||a)},a)}
function Px(a,b){if(a.g)return C("already exist as "+a.g.C()+" in "+a.g.module);var c=a.i.g;if(!c)return C("No data to import.");new qe;var d=a.i.h,c={email1:c,full_name:d};d&&0<d.length&&(d=d.split(/\s/),d[0]&&(c.first_name=d[0]),d[1]&&(c.last_name=d[d.length-1]));d={module:b,record:c};return qx(a).send("put-record",d).B(function(a){this.g=new Is(kx(this),b,a);this.dispatchEvent(new wx(this.i,this.h,this.g))},a)};function Qx(){}A(Qx,ov);da(Qx);Qx.prototype.w=function(){return"goog-menuheader"};function Rx(a,b,c){Ev.call(this,a,c||Qx.H(),b);this.qa(1,!1);this.qa(2,!1);this.qa(4,!1);this.qa(32,!1);this.bc=1}A(Rx,Ev);Cv("goog-menuheader",function(){return new Rx(null)});function Sx(){this.h=[]}A(Sx,ov);da(Sx);function Tx(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.w()+"-highlight";break;case 1:c=a.w()+"-checkbox";break;case 2:c=a.w()+"-content"}a.h[b]=c}return c}h=Sx.prototype;h.yc=function(){return"menuitem"};h.va=function(a){var b=a.g.s("div",rv(this,a).join(" "),Ux(this,a.ca(),a.g));Vx(this,a,b,wv(a,8)||wv(a,16));return b};h.na=function(a){return a&&a.firstChild};
h.la=function(a,b){var c=Jh(b),d=Tx(this,2);c&&jv(c,d)||b.appendChild(Ux(this,b.childNodes,a.g));jv(b,"goog-option")&&(a.qa(16,!0),a&&b&&Vx(this,a,b,!0));return Sx.m.la.call(this,a,b)};h.ac=function(a,b){var c=this.na(a),d=Wx(this,a)?c.firstChild:null;Sx.m.ac.call(this,a,b);d&&!Wx(this,a)&&c.insertBefore(d,c.firstChild||null)};function Ux(a,b,c){a=Tx(a,2);return c.s("div",a,b)}function Wx(a,b){var c=a.na(b);if(c){var c=c.firstChild,d=Tx(a,1);return!!c&&Kh(c)&&jv(c,d)}return!1}
function Vx(a,b,c,d){vv(a,c,b.yd());sv(a,b,c);d!=Wx(a,c)&&(d?kv(c,"goog-option"):mv(c,"goog-option"),c=a.na(c),d?(a=Tx(a,1),c.insertBefore(b.g.s("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}h.pd=function(a){switch(a){case 2:return Tx(this,0);case 16:case 8:return"goog-option-selected";default:return Sx.m.pd.call(this,a)}};h.Gf=function(a){var b=Tx(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Sx.m.Gf.call(this,a)}};h.w=function(){return"goog-menuitem"};function Xx(a,b,c,d){Ev.call(this,a,d||Sx.H(),c);this.j=b}A(Xx,Ev);h=Xx.prototype;h.T=function(){var a=this.u();return null!=a?a:this.Fb()};h.qa=function(a,b){Xx.m.qa.call(this,a,b);switch(a){case 8:xv(this,16)&&!b&&Iv(this,16,!1)&&Kv(this,16,!1);var c=this.n();c&&this&&c&&Vx(this.i,this,c,b);break;case 16:(c=this.n())&&this&&c&&Vx(this.i,this,c,b)}};
h.Fb=function(){var a=this.ca();return u(a)?(a=yb(a,function(a){return Kh(a)&&(jv(a,"goog-menuitem-accel")||jv(a,"goog-menuitem-mnemonic-separator"))?"":Uh(a)}).join(""),Aa(a)):Xx.m.Fb.call(this)};h.Cc=function(a){var b=this.getParent();if(b){var c=b.h;b.h=null;if(b=c&&ha(a.clientX))b=new nh(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}Xx.m.Cc.call(this,a)};h.Yc=function(a){return a.g==this.lg&&this.Xa(a)?!0:Xx.m.Yc.call(this,a)};h.ri=function(){return this.lg};
Cv("goog-menuitem",function(){return new Xx(null)});Xx.prototype.yd=function(){return wv(this,16)?"menuitemcheckbox":wv(this,8)?"menuitemradio":Xx.m.yd.call(this)};function Yx(){}A(Yx,ov);da(Yx);Yx.prototype.va=function(a){return a.g.s("div",this.w())};Yx.prototype.la=function(a,b){b.id&&Ku(a,b.id);if("HR"==b.tagName){var c=b;b=this.va(a);Hh(b,c);Ih(c)}else kv(b,this.w());return b};Yx.prototype.ac=function(){};Yx.prototype.w=function(){return"goog-menuseparator"};function Zx(a,b){Ev.call(this,null,a||Yx.H(),b);this.qa(1,!1);this.qa(2,!1);this.qa(4,!1);this.qa(32,!1);this.bc=1}A(Zx,Ev);Zx.prototype.G=function(){Zx.m.G.call(this);var a=this.n();fv(a,"separator")};Cv("goog-menuseparator",function(){return new Zx});function $x(a){this.g=a||"menu"}A($x,Pv);da($x);h=$x.prototype;h.Mf=function(a){return"UL"==a.tagName||$x.m.Mf.call(this,a)};h.qd=function(a){return"HR"==a.tagName?new Zx:$x.m.qd.call(this,a)};h.Cb=function(a,b){return Lh(a.n(),b)};h.w=function(){return"goog-menu"};h.Of=function(a){$x.m.Of.call(this,a);a=a.n();gv(a,"haspopup","true")};function ay(a){Zx.call(this,Yx.H(),a)}A(ay,Zx);Cv("goog-menuseparator",function(){return new Zx});function by(a,b){Wv.call(this,Vv,b||$x.H(),a);ew(this,!1)}A(by,Wv);h=by.prototype;h.Ud=!0;h.w=function(){return this.ub.w()};h.Cb=function(a){if(this.ub.Cb(this,a))return!0;for(var b=0,c=Qu(this);b<c;b++){var d=$(this,b);if("function"==typeof d.Cb&&d.Cb(a))return!0}return!1};h.Vc=function(){var a=[];Pu(this,function(b){a.push(b)});return a};h.wc=function(a,b,c){(b=by.m.wc.call(this,a,b))&&a&&this.Z&&this.Ud&&Xv(this).focus();a&&c&&ha(c.clientX)?this.h=new nh(c.clientX,c.clientY):this.h=null;return b};
h.Vf=function(a){this.Ud&&Xv(this).focus();return by.m.Vf.call(this,a)};h.Vg=function(a){return a.isEnabled()&&a.Fa&&wv(a,2)};h.hb=function(a){for(var b=this.ub,c=uh(this.g.g,"div",b.w()+"-content",a),d=c.length,e=0;e<d;e++)Sv(b,this,c[e]);by.m.hb.call(this,a)};h.Pf=function(a){var b=by.m.Pf.call(this,a);b||Pu(this,function(c){!b&&c.ri&&c.lg==a.g&&(this.isEnabled()&&this.wa(c),b=c.Na(a))},this);return b};
h.Lb=function(a){by.m.Lb.call(this,a);if(a=$(this,a)){var b=a.n();a=this.n();var c=Fj(b),d=Fj(a),e=Sj(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,g=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),g=g+Math.min(c,Math.max(c-d,0)),b=new nh(e,g);a.scrollLeft=b.x;a.scrollTop=b.y}};function cy(a,b,c,d){vw.call(this,a,b,c||d);if(c||d)this.j=65|(d?32:132)}A(cy,vw);function dy(){}A(dy,ov);da(dy);h=dy.prototype;h.yc=function(){return"button"};h.pb=function(a,b,c){switch(b){case 8:case 16:gv(a,"pressed",c);break;default:case 64:case 1:dy.m.pb.call(this,a,b,c)}};h.va=function(a){var b=dy.m.va.call(this,a);this.Aa(b,a.tb());var c=a.T();c&&this.vd(b,c);wv(a,16)&&this.pb(b,16,xv(a,16));return b};h.la=function(a,b){b=dy.m.la.call(this,a,b);var c=this.T(b);a.aa=c;a.Ne(this.tb(b));wv(a,16)&&this.pb(b,16,xv(a,16));return b};h.T=ca;h.vd=ca;h.tb=function(a){return a.title};
h.Aa=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};h.w=function(){return"goog-button"};function ey(){}A(ey,dy);da(ey);h=ey.prototype;h.yc=function(){};h.va=function(a){Fv(a,!1);a.zb&=-256;a.qa(32,!1);return a.g.s("button",{"class":rv(this,a).join(" "),disabled:!a.isEnabled(),title:a.tb()||"",value:a.T()||""},a.Fb()||"")};h.xc=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};h.la=function(a,b){Fv(a,!1);a.zb&=-256;a.qa(32,!1);if(b.disabled){var c=this.pd(1);kv(b,c)}return ey.m.la.call(this,a,b)};
h.Wc=function(a){Z(a).listen(a.n(),"click",a.Xa)};h.se=ca;h.Rf=ca;h.Qf=function(a){return a.isEnabled()};h.Xc=ca;h.xd=function(a,b,c){ey.m.xd.call(this,a,b,c);(a=a.n())&&1==b&&(a.disabled=c)};h.T=function(a){return a.value};h.vd=function(a,b){a&&(a.value=b)};h.pb=ca;function fy(a,b,c){Ev.call(this,a,b||ey.H(),c)}A(fy,Ev);h=fy.prototype;h.T=function(){return this.aa};h.$b=function(a){this.aa=a;this.i.vd(this.n(),a)};h.tb=function(){return this.Y};h.Aa=function(a){this.Y=a;this.i.Aa(this.n(),a)};h.Ne=function(a){this.Y=a};h.I=function(){fy.m.I.call(this);delete this.aa;delete this.Y};h.G=function(){fy.m.G.call(this);if(wv(this,32)){var a=yv(this);a&&Z(this).listen(a,"keyup",this.Yc)}};
h.Yc=function(a){return 13==a.g&&"key"==a.type||32==a.g&&"keyup"==a.type?this.Xa(a):32==a.g};Cv("goog-button",function(){return new fy(null)});function gy(){}A(gy,dy);da(gy);h=gy.prototype;h.va=function(a){var b=rv(this,a),b=a.g.s("div",{"class":"goog-inline-block "+b.join(" ")},this.od(a.ca(),a.g));this.Aa(b,a.tb());sv(this,a,b);return b};h.yc=function(){return"button"};h.na=function(a){return a&&a.firstChild.firstChild};h.od=function(a,b){return b.s("div","goog-inline-block "+(this.w()+"-outer-box"),b.s("div","goog-inline-block "+(this.w()+"-inner-box"),a))};h.xc=function(a){return"DIV"==a.tagName};
h.la=function(a,b){hy(b,!0);hy(b,!1);var c;a:{c=a.g.jh(b);var d=this.w()+"-outer-box";if(c&&jv(c,d)&&(c=a.g.jh(c),d=this.w()+"-inner-box",c&&jv(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.od(b.childNodes,a.g));lv(b,["goog-inline-block",this.w()]);return gy.m.la.call(this,a,b)};h.w=function(){return"goog-custom-button"};
function hy(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ba(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function iy(){}A(iy,gy);da(iy);h=iy.prototype;h.na=function(a){return iy.m.na.call(this,a&&a.firstChild)};h.la=function(a,b){var c=uh(document,"*","goog-menu",b)[0];if(c){Q(c,!1);sh(c).body.appendChild(c);var d=new by;Ou(d,c);a.$c(d)}return iy.m.la.call(this,a,b)};h.od=function(a,b){return iy.m.od.call(this,[this.Uf(a,b),b.s("div","goog-inline-block "+(this.w()+"-dropdown"),"\u00a0")],b)};h.Uf=function(a,b){return b.s("div","goog-inline-block "+(this.w()+"-caption"),a)};h.w=function(){return"goog-menu-button"};function jy(a,b,c,d,e){fy.call(this,a,c||iy.H(),d);this.qa(64,!0);this.K=new cy(null,5);b&&this.$c(b);this.ea=new Uf(500);!Vi&&!Wi||vc("533.17.9")||(this.xe=!0);this.Nc=e||$x.H()}A(jy,fy);h=jy.prototype;h.xe=!1;h.G=function(){jy.m.G.call(this);ky(this,!0);this.h&&ly(this,this.h,!0);gv(this.F,"haspopup",!!this.h)};h.ra=function(){jy.m.ra.call(this);ky(this,!1);if(this.h){this.ma(!1);this.h.ra();ly(this,this.h,!1);var a=this.h.n();a&&Ih(a)}};
h.I=function(){jy.m.I.call(this);this.h&&(this.h.$(),delete this.h);delete this.Ng;this.ea.$()};h.zc=function(a){jy.m.zc.call(this,a);xv(this,4)&&(this.ma(!xv(this,64),a),this.h&&(this.h.kb=xv(this,64)))};h.Cc=function(a){jy.m.Cc.call(this,a);this.h&&!xv(this,4)&&(this.h.kb=!1)};h.Xa=function(){Jv(this,!1);return!0};h.Ii=function(a){this.h&&this.h.ya&&!this.Cb(a.target)&&this.ma(!1)};h.Cb=function(a){return a&&Lh(this.n(),a)||this.h&&this.h.Cb(a)||!1};
h.Yc=function(a){if(32==a.g){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.ya){var b=this.h.Na(a);return 27==a.g?(this.ma(!1),!0):b}return 40==a.g||38==a.g||32==a.g||13==a.g?(this.ma(!0,a),!0):!1};h.zd=function(){this.ma(!1)};h.Ti=function(){xv(this,4)||this.ma(!1)};h.te=function(a){this.xe||this.ma(!1);jy.m.te.call(this,a)};
h.$c=function(a){var b=this.h;if(a!=b&&(b&&(this.ma(!1),this.Z&&ly(this,b,!1),delete this.h),this.Z&&gv(this.F,"haspopup",!!a),a)){this.h=a;Lu(a,this);a.wc(!1);var c=this.xe;(a.Ud=c)&&ew(a,!0);this.Z&&ly(this,a,!0)}return b};h.Zc=function(a,b){var c=jy.m.Zc.call(this,a,b);c&&!this.Fa&&this.ma(!1);return c};h.setEnabled=function(a){jy.m.setEnabled.call(this,a);this.isEnabled()||this.ma(!1)};
h.ma=function(a,b){jy.m.ma.call(this,a);if(this.h&&xv(this,64)==a){if(a)this.h.Z||this.h.render(),this.mc=Ej(this.n()),this.Vb=Kj(this.n()),my(this),this.h.Lb(!b||40!=b.g&&38!=b.g?-1:0);else{Jv(this,!1);this.h.kb=!1;var c=this.n();c&&(gv(c,"activedescendant",""),gv(c,"owns",""));null!=this.P&&(this.P=void 0,(c=this.h.n())&&Hj(c,"",""))}this.h.wc(a,!1,b);if(!this.M){var c=Z(this),d=a?c.listen:c.ha;d.call(c,this.g.g,"mousedown",this.Ii,!0);this.xe&&d.call(c,this.h,"blur",this.Ti);d.call(c,this.ea,Wf,
this.sj);a?Vf(this.ea):this.ea.stop()}}};function my(a){if(a.h.Z){var b=a.Ng||a.n(),c=a.K;a.K.g=b;b=a.h.n();a.h.ya||(b.style.visibility="hidden",Q(b,!0));!a.P&&a.K.o&&a.K.j&32&&(a.P=Ij(b));c.i(b,c.h^1,null,a.P);a.h.ya||(Q(b,!1),b.style.visibility="visible")}}
h.sj=function(){var a=Kj(this.n()),b=Ej(this.n()),c=this.Vb;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.mc,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Vb=a,this.mc=b,my(this))};function ly(a,b,c){var d=Z(a);c=c?d.listen:d.ha;c.call(d,b,"action",a.zd);c.call(d,b,"highlight",a.wi);c.call(d,b,"unhighlight",a.xi)}function ky(a,b){var c=Z(a);(b?c.listen:c.ha).call(c,a.n(),"keydown",a.Pi)}
h.wi=function(a){var b=this.n();if(a=a.target.n()){var c=hv(a,"activedescendant");a=sh(a).getElementById(c)||a;a.id||(c=Gu.H(),a.id=Hu(c));c="";a&&(c=a.id);gv(b,"activedescendant",c);gv(b,"owns",a.id)}};h.Pi=function(a){wv(this,32)&&yv(this)&&this.h&&this.h.ya&&a.stopPropagation()};h.xi=function(){if(!$v(this.h)){var a=this.n();gv(a,"activedescendant","");gv(a,"owns","")}};Cv("goog-menu-button",function(){return new jy(null)});function ny(a,b,c){pd.call(this);this.target=a;this.j=b||a;this.i=c||new wj(NaN,NaN,NaN,NaN);this.h=sh(a);this.g=new Qf(this);a=pa(fc,this.g);this.Qa||(this.Qa=[]);this.Qa.push(t(void 0)?oa(a,void 0):a);bd(this.j,["touchstart","mousedown"],this.Kh,!1,this)}A(ny,pd);var oy=E||nc&&vc("1.9.3");h=ny.prototype;h.clientX=0;h.clientY=0;h.Lh=0;h.Mh=0;h.Qc=0;h.Rc=0;h.Hf=!0;h.sc=!1;h.setEnabled=function(a){this.Hf=a};
h.I=function(){ny.m.I.call(this);kd(this.j,["touchstart","mousedown"],this.Kh,!1,this);this.g.removeAll();oy&&this.h.releaseCapture();this.j=this.target=null};
h.Kh=function(a){var b="mousedown"==a.type;if(!this.Hf||this.sc||b&&!Ec(a))this.dispatchEvent("earlycancel");else if(py(a),this.dispatchEvent(new qy("start",this,a.clientX,a.clientY))){this.sc=!0;a.preventDefault();var b=this.h,c=b.documentElement,d=!oy;this.g.listen(b,["touchmove","mousemove"],this.Wi,d);this.g.listen(b,["touchend","mouseup"],this.he,d);oy?(c.setCapture(!1),this.g.listen(c,"losecapture",this.he)):this.g.listen(zh(b),"blur",this.he);this.o&&this.g.listen(this.o,"scroll",this.rj,d);
this.clientX=this.Lh=a.clientX;this.clientY=this.Mh=a.clientY;this.Qc=this.target.offsetLeft;this.Rc=this.target.offsetTop;this.l=Zh(qh(this.h));z()}};h.he=function(a){this.g.removeAll();oy&&this.h.releaseCapture();if(this.sc){py(a);this.sc=!1;var b=ry(this,this.Qc),c=sy(this,this.Rc);this.dispatchEvent(new qy("end",this,a.clientX,a.clientY,0,b,c))}else this.dispatchEvent("earlycancel")};
function py(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.h.targetTouches[0],a.i):"touchend"!=b&&"touchcancel"!=b||a.init(a.h.changedTouches[0],a.i)}
h.Wi=function(a){if(this.Hf){py(a);var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;if(!this.sc){var d=this.Lh-this.clientX,e=this.Mh-this.clientY;if(0<d*d+e*e)if(this.dispatchEvent(new qy("start",this,a.clientX,a.clientY)))this.sc=!0;else{this.M||this.he(a);return}}c=ty(this,b,c);b=c.x;c=c.y;this.sc&&this.dispatchEvent(new qy("beforedrag",this,a.clientX,a.clientY,0,b,c))&&(uy(this,a,b,c),a.preventDefault())}};
function ty(a,b,c){var d=Zh(qh(a.h));b+=d.x-a.l.x;c+=d.y-a.l.y;a.l=d;a.Qc+=b;a.Rc+=c;b=ry(a,a.Qc);a=sy(a,a.Rc);return new nh(b,a)}h.rj=function(a){var b=ty(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;uy(this,a,b.x,b.y)};function uy(a,b,c,d){a.target.style.left=c+"px";a.target.style.top=d+"px";a.dispatchEvent(new qy("drag",a,b.clientX,b.clientY,0,c,d))}
function ry(a,b){var c=a.i,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function sy(a,b){var c=a.i,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function qy(a,b,c,d,e,f,g){F.call(this,a);this.clientX=c;this.clientY=d;this.left=t(f)?f:b.Qc;this.top=t(g)?g:b.Rc}A(qy,F);function vy(a){pd.call(this);this.F=a;a=E?"focusout":"blur";this.g=bd(this.F,E?"focusin":"focus",this,!E);this.h=bd(this.F,a,this,!E)}A(vy,pd);vy.prototype.handleEvent=function(a){var b=new Cc(a.h);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};vy.prototype.I=function(){vy.m.I.call(this);ld(this.g);ld(this.h);delete this.F};function wy(a,b){Y.call(this,b);this.Vb=!!a;this.fa=null}A(wy,Y);h=wy.prototype;h.vf=null;h.Ac=!1;h.Ra=null;h.Ca=null;h.ob=null;h.lf=!1;h.w=function(){return"goog-modalpopup"};h.le=function(){return this.Ra};h.Q=function(){wy.m.Q.call(this);var a=this.n(),b=Ba(this.w()).split(" ");lv(a,b);Ph(a,!0);Q(a,!1);xy(this);yy(this)};
function xy(a){if(a.Vb&&!a.Ca){var b;b=a.g.s("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.Ca=b;a.Ca.className=a.w()+"-bg";Q(a.Ca,!1);Lj(a.Ca,0)}a.Ra||(a.Ra=a.g.s("div",a.w()+"-bg"),Q(a.Ra,!1))}function yy(a){a.ob||(a.ob=a.g.createElement("span"),Q(a.ob,!1),Ph(a.ob,!0),a.ob.style.position="absolute")}h.Hh=function(){this.lf=!1};h.re=function(a){return!!a&&"DIV"==a.tagName};
h.hb=function(a){wy.m.hb.call(this,a);a=Ba(this.w()).split(" ");lv(this.n(),a);xy(this);yy(this);Q(this.n(),!1)};h.G=function(){this.Ca&&Hh(this.Ca,this.n());Hh(this.Ra,this.n());wy.m.G.call(this);var a=this.n();a.parentNode&&a.parentNode.insertBefore(this.ob,a.nextSibling);this.vf=new vy(this.g.g);Z(this).listen(this.vf,"focusin",this.onFocus);zy(this,!1)};h.ra=function(){this.Ac&&this.$a(!1);fc(this.vf);wy.m.ra.call(this);Ih(this.Ca);Ih(this.Ra);Ih(this.ob)};
h.$a=function(a){if(a!=this.Ac)if(this.P&&this.P.stop(),this.aa&&this.aa.stop(),this.K&&this.K.stop(),this.Y&&this.Y.stop(),this.Z&&zy(this,a),a){if(this.dispatchEvent("beforeshow")){try{this.fa=this.g.g.activeElement}catch(b){}this.qg();var c=zh(this.g.g)||window;if("fixed"==zj(this.n()))var d=a=0;else d=Zh(this.g),a=d.x,d=d.y;var e;e=this.n();e=Ij(e);c=xh(c);a=Math.max(a+c.width/2-e.width/2,0);d=Math.max(d+c.height/2-e.height/2,0);Aj(this.n(),a,d);Aj(this.ob,a,d);Z(this).listen(Ah(this.g.g),"resize",
this.qg);Ay(this,!0);this.gh();this.Ac=!0;this.P&&this.aa?(id(this.P,"end",this.He,!1,this),this.aa.play(),this.P.play()):this.He()}}else if(this.dispatchEvent("beforehide")){Z(this).ha(Ah(this.g.g),"resize",this.qg);this.Ac=!1;this.K&&this.Y?(id(this.K,"end",this.Fe,!1,this),this.Y.play(),this.K.play()):this.Fe();try{d=this.g.g.body,c=this.g.g.activeElement||d,this.fa&&c==d&&this.fa!=d&&this.fa.focus()}catch(f){}this.fa=null}};
function zy(a,b){if(b){a.t||(a.t=[]);for(var c=a.g,c=c.getChildren(c.g.body),d=0;d<c.length;d++){var e=c[d];e==a.F||hv(e,"hidden")||(gv(e,"hidden",!0),a.t.push(e))}}else if(a.t){for(d=0;d<a.t.length;d++)a.t[d].removeAttribute("aria-hidden");a.t=null}}function Ay(a,b){a.Ca&&Q(a.Ca,b);a.Ra&&Q(a.Ra,b);Q(a.n(),b);Q(a.ob,b)}h.He=function(){this.dispatchEvent("show")};h.Fe=function(){Ay(this,!1);this.dispatchEvent("hide")};
h.qg=function(){this.Ca&&Q(this.Ca,!1);this.Ra&&Q(this.Ra,!1);var a=this.g.g,b=xh(zh(a)||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.Ca&&(Q(this.Ca,!0),Hj(this.Ca,c,a));this.Ra&&(Q(this.Ra,!0),Hj(this.Ra,c,a))};h.onFocus=function(a){this.lf?this.Hh():a.target==this.ob&&Xf(this.gh,0,this)};h.gh=function(){try{E&&this.g.g.body.focus(),this.n().focus()}catch(a){}};
h.I=function(){fc(this.P);this.P=null;fc(this.K);this.K=null;fc(this.aa);this.aa=null;fc(this.Y);this.Y=null;wy.m.I.call(this)};function By(a,b,c){wy.call(this,b,c);this.i=a||"modal-dialog";this.h=Cy()}A(By,wy);h=By.prototype;h.ie=!0;h.Cd=!0;h.mg=!0;h.Yd=.5;h.yg="";h.cc=null;h.Yb=null;h.fe=!1;h.Oa=null;h.Ia=null;h.Pe=null;h.Ga=null;h.Sa=null;h.xa=null;h.w=function(){return this.i};h.setTitle=function(a){this.yg=a;this.Ia&&Mh(this.Ia,a)};h.ca=function(){return null!=this.cc?bi(this.cc):""};h.R=function(){this.n()||this.render();return this.Sa};h.le=function(){this.n()||this.render();return By.m.le.call(this)};
function Dy(a,b){a.Yd=b;if(a.n()){var c=a.le();c&&Lj(c,a.Yd)}}function Ey(a){!0!=a.mg&&Fy(a,!0)}function Fy(a,b){a.mg=b;if(a.Z){var c=a.g,d=a.le(),e=a.Ca;b?(e&&c.ag(e,a.n()),c.ag(d,a.n())):(c.nh(e),c.nh(d))}a.Ac&&zy(a,b)}function Gy(a,b){var c=Ba(a.i+"-title-draggable").split(" ");a.n()&&(b?lv(a.Oa,c):nv(a.Oa,c));if(b&&!a.Yb){var d;d=new ny(a.n(),a.Oa);a.Yb=d;lv(a.Oa,c);bd(a.Yb,"start",a.xj,!1,a)}else!b&&a.Yb&&(a.Yb.$(),a.Yb=null)}
h.Q=function(){By.m.Q.call(this);var a=this.n(),b=this.g;this.Oa=b.s("div",this.i+"-title",this.Ia=b.s("span",{className:this.i+"-title-text",id:this.C()},this.yg),this.Ga=b.s("span",this.i+"-title-close"));Fh(a,this.Oa,this.Sa=b.s("div",this.i+"-content"),this.xa=b.s("div",this.i+"-buttons"));fv(this.Ia,"heading");fv(this.Ga,"button");Ph(this.Ga,!0);gv(this.Ga,"label",Hy);this.Pe=this.Ia.id;fv(a,"dialog");gv(a,"labelledby",this.Pe||"");this.cc&&(this.Sa.innerHTML=bi(this.cc));Q(this.Ga,this.Cd);
this.h&&(a=this.h,a.F=this.xa,a.render());Q(this.xa,!!this.h);Dy(this,this.Yd)};
h.hb=function(a){By.m.hb.call(this,a);a=this.n();var b=this.i+"-content";this.Sa=uh(document,null,b,a)[0];this.Sa||(this.Sa=this.g.s("div",b),this.cc&&(this.Sa.innerHTML=bi(this.cc)),a.appendChild(this.Sa));var b=this.i+"-title",c=this.i+"-title-text",d=this.i+"-title-close";(this.Oa=uh(document,null,b,a)[0])?(this.Ia=uh(document,null,c,this.Oa)[0],this.Ga=uh(document,null,d,this.Oa)[0]):(this.Oa=this.g.s("div",b),a.insertBefore(this.Oa,this.Sa));this.Ia?(this.yg=Sh(this.Ia),this.Ia.id||(this.Ia.id=
this.C())):(this.Ia=Bh("span",{className:c,id:this.C()}),this.Oa.appendChild(this.Ia));this.Pe=this.Ia.id;gv(a,"labelledby",this.Pe||"");this.Ga||(this.Ga=this.g.s("span",d),this.Oa.appendChild(this.Ga));Q(this.Ga,this.Cd);b=this.i+"-buttons";if(this.xa=uh(document,null,b,a)[0]){if(a=this.h=new Iy(this.g),(b=this.xa)&&1==b.nodeType){a.F=b;for(var b=a.F.getElementsByTagName("button"),c=0,e,f;d=b[c];c++)if(e=d.name||d.id,f=Sh(d)||d.value,e){var g=0==c;a.set(e,f,g,d.name==Jy);g&&kv(d,"goog-buttonset-default")}}}else this.xa=
this.g.s("div",b),a.appendChild(this.xa),this.h&&(a=this.h,a.F=this.xa,a.render()),Q(this.xa,!!this.h);Dy(this,this.Yd)};h.G=function(){By.m.G.call(this);Z(this).listen(this.n(),"keydown",this.Bh).listen(this.n(),"keypress",this.Bh);Z(this).listen(this.xa,"click",this.kj);Gy(this,!0);Z(this).listen(this.Ga,"click",this.uj);var a=this.n();fv(a,"dialog");""!==this.Ia.id&&gv(a,"labelledby",this.Ia.id);this.mg||Fy(this,!1)};h.ra=function(){this.Ac&&this.$a(!1);Gy(this,!1);By.m.ra.call(this)};
h.$a=function(a){a!=this.Ac&&(this.Z||this.render(),By.m.$a.call(this,a))};h.He=function(){By.m.He.call(this);this.dispatchEvent(Ky)};h.Fe=function(){By.m.Fe.call(this);this.dispatchEvent(Ly);this.fe&&this.$()};
h.xj=function(){var a=this.g.g,b=xh(zh(a)||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d;d=this.n();d=Ij(d);"fixed"==zj(this.n())?(b=new wj(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height)),this.Yb.i=b||new wj(NaN,NaN,NaN,NaN)):this.Yb.i=new wj(0,0,c-d.width,a-d.height)||new wj(NaN,NaN,NaN,NaN)};h.uj=function(){My(this)};function My(a){if(a.Cd){var b=a.h,c=b&&b.mf;c?(b=b.get(c),a.dispatchEvent(new Ny(c,b))&&a.$a(!1)):a.$a(!1)}}
function Oy(a,b){a.Cd=b;a.Ga&&Q(a.Ga,a.Cd)}h.I=function(){this.xa=this.Ga=null;By.m.I.call(this)};function Py(a,b){a.h=b;if(a.xa){if(a.h){var c=a.h;c.F=a.xa;c.render()}else a.xa.innerHTML=bi(di);Q(a.xa,!!a.h)}}h.kj=function(a){a:{for(a=a.target;null!=a&&a!=this.xa;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.h.get(a);this.dispatchEvent(new Ny(a,b))&&this.$a(!1)}};
h.Bh=function(a){var b=!1,c=!1,d=this.h,e=a.target;if("keydown"==a.type)if(this.ie&&27==a.g){var f=d&&d.mf,e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=this.dispatchEvent(new Ny(f,b))):e||(b=!0)}else{if(9==a.g&&a.shiftKey&&e==this.n()){this.lf=!0;try{this.ob.focus()}catch(g){}Xf(this.Hh,0,this)}}else if(13==a.g){if("BUTTON"==e.tagName&&!e.disabled)f=e.name;else if(e==this.Ga)My(this);else if(d){var k=d.rf,l;if(l=k)a:{l=d.F.getElementsByTagName("BUTTON");for(var m=0,n;n=l[m];m++)if(n.name==
k||n.id==k){l=n;break a}l=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!l||l.disabled||e||(f=k)}f&&d&&(c=!0,b=this.dispatchEvent(new Ny(f,String(d.get(f)))))}else e==this.Ga&&32==a.g&&My(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.$a(!1)};function Ny(a,b){this.type=Qy;this.key=a;this.caption=b}A(Ny,F);var Qy="dialogselect",Ly="afterhide",Ky="aftershow";function Iy(a){a||qh();Hd.call(this)}A(Iy,Hd);h=Iy.prototype;h.rf=null;h.F=null;h.mf=null;
h.set=function(a,b,c,d){Hd.prototype.set.call(this,a,b);c&&(this.rf=a);d&&(this.mf=a);return this};function Ry(a,b,c,d){return a.set(b.key,b.caption,c,d)}h.render=function(){if(this.F){this.F.innerHTML=bi(di);var a=qh(this.F);this.forEach(function(b,c){var d=a.s("button",{name:c},b);c==this.rf&&(d.className="goog-buttonset-default");this.F.appendChild(d)},this)}};h.n=function(){return this.F};
var Jy="cancel",Hy="Close",Sy={key:"ok",caption:"OK"},Ty={key:Jy,caption:"Cancel"},Uy={key:"yes",caption:"Yes"},Vy={key:"no",caption:"No"},Wy={key:"save",caption:"Save"},Xy={key:"continue",caption:"Continue"};function Cy(){return Ry(Ry(new Iy,Sy,!0),Ty,!1,!0)}"undefined"!=typeof document&&(Ry(new Iy,Sy,!0,!0),Cy(),Ry(Ry(new Iy,Uy,!0),Vy,!1,!0),Ry(Ry(Ry(new Iy,Uy),Vy,!0),Ty,!1,!0),Ry(Ry(Ry(new Iy,Xy),Wy),Ty,!0,!0));function Yy(){this.h=[]}A(Yy,Sx);da(Yy);Yy.prototype.va=function(a){var b=Yy.m.va.call(this,a);kv(b,"goog-submenu");Zy(this,a,b);return b};Yy.prototype.la=function(a,b){b=Yy.m.la.call(this,a,b);kv(b,"goog-submenu");Zy(this,a,b);var c=uh(document,"div","goog-menu",b);if(c.length){var d=new by(a.g),c=c[0];Q(c,!1);a.g.g.body.appendChild(c);Ou(d,c);$y(a,d)}return b};Yy.prototype.ac=function(a,b){var c=this.na(a),d=c&&c.lastChild;Yy.m.ac.call(this,a,b);d&&c.lastChild!=d&&jv(d,"goog-submenu-arrow")&&c.appendChild(d)};
Yy.prototype.Wc=function(a){Yy.m.Wc.call(this,a);var b=a.R(),c=uh(a.g.g,"span","goog-submenu-arrow",b)[0];az(a,c);c!=b.lastChild&&b.appendChild(c);a=a.n();gv(a,"haspopup","true")};function Zy(a,b,c){var d=b.g.s("span");d.className="goog-submenu-arrow";az(b,d);a.na(c).appendChild(d)}function az(a,b){Ru(a)?(kv(b,"goog-submenu-arrow-rtl"),Mh(b,"\u25c4")):(mv(b,"goog-submenu-arrow-rtl"),Mh(b,"\u25ba"))};function bz(a,b,c,d){Xx.call(this,a,b,c,d||Yy.H())}A(bz,Xx);h=bz.prototype;h.Ad=null;h.wg=null;h.hg=!1;h.ta=null;h.je=!1;h.G=function(){bz.m.G.call(this);Z(this).listen(this.getParent(),"hide",this.Ch);this.ta&&cz(this,this.ta,!0)};h.ra=function(){Z(this).ha(this.getParent(),"hide",this.Ch);this.ta&&(cz(this,this.ta,!1),this.je||(this.ta.ra(),Ih(this.ta.n())));bz.m.ra.call(this)};h.I=function(){this.ta&&!this.je&&this.ta.$();this.ta=null;bz.m.I.call(this)};
h.wa=function(a,b){bz.m.wa.call(this,a);b&&(dz(this).kb=!0);a||(this.Ad&&q.clearTimeout(this.Ad),this.Ad=Xf(this.Db,218,this))};h.vg=function(){var a=this.getParent();a&&$v(a)==this&&(ez(this,!0),fz(this))};h.Db=function(){var a=this.ta;a&&a.getParent()==this&&(ez(this,!1),Pu(a,function(a){"function"==typeof a.Db&&a.Db()}))};function gz(a){a.Ad&&q.clearTimeout(a.Ad);a.wg&&q.clearTimeout(a.wg)}h.Zc=function(a,b){var c=bz.m.Zc.call(this,a,b);c&&!this.Fa&&this.Db();return c};
function fz(a){Pu(a.getParent(),function(a){a!=this&&"function"==typeof a.Db&&(a.Db(),gz(a))},a)}h.Na=function(a){var b=a.g,c=Ru(this)?37:39,d=Ru(this)?39:37;if(!this.hg){if(!this.isEnabled()||b!=c&&b!=this.lg)return!1;this.vg();aw(dz(this));gz(this)}else if(!dz(this).Na(a))if(b==d)this.Db();else return!1;a.preventDefault();return!0};h.lj=function(){this.ta.getParent()==this&&(gz(this),this.S.wa(this),fz(this))};h.Ch=function(a){a.target==this.S&&(this.Db(),gz(this))};
h.Bc=function(a){this.isEnabled()&&(gz(this),this.wg=Xf(this.vg,218,this));bz.m.Bc.call(this,a)};h.Xa=function(a){gz(this);if(wv(this,8))return bz.m.Xa.call(this,a);this.vg();return!0};
function ez(a,b){a.dispatchEvent(Ju(64,b));var c=dz(a);if(b!=a.hg){var d=a.n();b?kv(d,"goog-submenu-open"):mv(d,"goog-submenu-open")}if(b!=c.ya&&(b&&(c.Z||c.render(),c.Lb(-1)),c.wc(b),b)){var c=new vw(a.n(),6,!1),d=dz(a),e=d.n();d.ya||(e.style.visibility="hidden",Q(e,!0));c.i(e,4);d.ya||(Q(e,!1),e.style.visibility="visible")}a.hg=b}function cz(a,b,c){var d=Z(a);(c?d.listen:d.ha).call(d,b,"enter",a.lj)}h.Vc=function(){return dz(this).Vc()};
function dz(a){a.ta?a.je&&a.ta.getParent()!=a&&Lu(a.ta,a):$y(a,new by(a.g));a.ta.n()||a.ta.Q();return a.ta}function $y(a,b){var c=a.ta;b!=c&&(c&&(a.Db(),a.Z&&cz(a,c,!1)),a.ta=b,a.je=!1,b&&(Lu(b,a),b.wc(!1,!0),b.Ud=!1,ew(b,!1),a.Z&&cz(a,b,!0)))}h.Cb=function(a){return dz(this).Cb(a)};Cv("goog-submenu",function(){return new bz(null)});function hz(a){this.h=a;this.g=null}hz.prototype.logger=L("ydn.crm.gmail.Template");hz.prototype.u=function(){return this.h};function iz(a){if("FORM"!=a.tagName)return null;for(a=a.nextElementSibling;a&&"TABLE"!=a.tagName;)a=a.nextElementSibling;return a}function jz(a){a=Vh(a,"table");a=Vh(a.parentElement,"table");return Vh(a.parentElement,"table").querySelector("form")}
function kz(a,b){if(!a)return null;var c=b||dq,d=jz(a);if(!d)return J(c,"Gmail header FORM not found"),null;d=d.querySelector("textarea[name=to]");if(!d)return J(c,"To textarea not found."),null;d=d.parentElement.querySelector("span[email]");return d?d?d.getAttribute("email"):null:(J(c,"email span not found in TO element"),null)}
hz.prototype.i=function(a){if(a.target instanceof Xx){var b=a.target.u();a=this.u();if(b){var c=kz(this.g,this.logger),d=!1;c||(c=a.i?a.i.g:null,d=!!c);c?lz(this,b.id,c).A(function(a){var f=jz(this.g),g=f.querySelector('input[name="subjectbox"]'),k=iz(f).querySelector('div[aria-label="Message Body"]');d&&(f.querySelector('textarea[name="to"]').value=c);g.value=b.name;f=document.createElement("span");f.innerHTML=a;k.appendChild(f)},function(a){throw a;},this):window.alert("A valid recipient email address is required in To input field.")}else window.open(Bx(a)+
"/index.php?module=EmailTemplates&action=EditView&return_module=EmailTemplates&return_action=DetailView",kx(a))}};
function mz(a,b){var c=new rh(b.ownerDocument);if(a.g)a.g.parentElement!=b&&(a.g.parentElement&&a.g.parentElement.removeChild(a.g),c=c.s("span"),c.className="ydn-crm crm-template inj",c.appendChild(a.g),b.insertBefore(c,b.firstElementChild));else{a.g=b;var d=new by(c),e=new jy("$t",d,null,c);e.Aa("Insert SugarCRM template");nz(a,function(a){for(var b=[],c=0;c<a.length;c++)-1==b.indexOf(a[c].type)&&b.push(a[c].type);for(c=0;c<b.length;c++)if(b[c]){for(var e=new bz(b[c],null,d.g),m=0;m<a.length;m++)if(a[m].type==
b[c]){var n=new Xx(a[m].name,a[m]);dz(e).X(n,!0)}d.X(e,!0)}for(m=0;m<a.length;m++)a[m].type||(n=new Xx(a[m].name,a[m]),d.X(n,!0));d.X(new ay,!0);d.X(new Xx("New template...",null),!0)},a);c=c.s("span");c.className="ydn-crm crm-template inj";b.insertBefore(c,b.firstElementChild);e.render(c);bd(d,"action",a.i,!0,a)}}function oz(a){return 0<=a.indexOf("$contact_name")||0<=a.indexOf("$contact_account_name")}
function nz(a,b,c){Dx(a.u(),"EmailTemplates",void 0,void 0,void 0,200).A(function(a){a=a[0];for(var e=[],f=0;f<a.result.length;f++){var g=a.result[f];e.push({id:g.id,name:g.name,type:g.type||"",gk:oz(g.body_html)})}b.call(c,e)},function(a){throw a;},a)}
function lz(a,b,c){var d=a.u();if(v(c))return d.send("query",[{store:"Contacts",index:"ydn$emails",key:c,limit:1},{store:"Leads",index:"ydn$emails",key:c,limit:1}]).B(function(a){var c=null;a[0].result[0]?c=new Is(kx(d),"Contacts",a[0].result[0]):a[1].result[0]&&(c=new Is(kx(d),"Leads",a[1].result[0]));a=c?new gx(d,c):null;return lz(this,b,a)},a);if(!v(b)||16>b.length)throw Error("valid template id required, but "+b+" found.");return d.send("get",{module:"EmailTemplates",id:b}).B(function(a){a=a.body_html;
if(v(a)){var d=this.u().j;if(d&&Js(d)){var g;g=this.u().l.Users;for(var k in g.module_fields)g=d.value(k),v(g)&&(a=a.replace(new RegExp("\\$user_"+k,"g"),g))}else J(this.logger,"Login user info not available");if(c&&Js(c.g))for(k in d=Dw(c),d.module_fields)g=c.value(k),v(g)&&(a=a.replace(new RegExp("\\$contact_"+k,"g"),g),a=a.replace(new RegExp("{::future::Contacts::"+k+"::}","g"),g));return a}throw Error("Template record: "+b+" does not have body_html");},a)};var pz;function qz(a){var b=z(),c=Math.floor((b-a)/6E4),b=!1;0>c&&(b=!0,c*=-1);if(60>c)return pz(c,b,0);c=Math.floor(c/60);if(24>c)return pz(c,b,1);c=new Date(z());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?pz(c,b,2):""}
pz=function(a,b,c){var d=Ze(a);return b||0!=c?b&&0==c?1==a?"in "+(d+" minute"):"in "+(d+" minutes"):b||1!=c?b&&1==c?1==a?"in "+(d+" hour"):"in "+(d+" hours"):b||2!=c?b&&2==c?1==a?"in "+(d+" day"):"in "+(d+" days"):"":1==a?d+" day ago":d+" days ago":1==a?d+" hour ago":d+" hours ago":1==a?d+" minute ago":d+" minutes ago"};function rz(a){for(var b=sz,c=0;c<b.h.length;c++){var d=b.h[c],e=b.g[a];e&&d.o(a,e)}}var sz=new function(){this.g=[];this.h=[]};function tz(a,b){sz.g.push({title:a,update:b,type:"n"});var c=sz.g.length-20;0<=c&&(sz.g[c]=void 0);c=sz.g.length-1;rz(c);return c}function uz(a,b,c,d){var e=sz.g[a];e&&(e.title=b,c&&(e.update=c),d&&(e.type=d),rz(a))}function vz(a,b){var c=sz.g[a];c&&(c.update=b,c.type="e",rz(a))}
function wz(a,b,c,d){var e=sz.g[a];e&&(b?(e.Ec=b,e.Ae=c,e.Ed=d):(e.Ec=void 0,e.Ae=void 0,e.Ed=void 0),rz(a))};function xz(a,b,c,d){By.call(this);this.N=d;Py(this,c);this.setTitle(a);this.cc=a=ci(b,null);this.Sa&&(this.Sa.innerHTML=bi(a));this.ie=!0;Oy(this,!1);Ey(this);this.fe=!0;a=Z(this);a.listen(this,Qy,this.Nc);a.listen(this,Qy,this.mc)}A(xz,By);xz.prototype.Nc=function(a){this.N&&(this.N.callback(a.key),this.N=null)};xz.prototype.mc=function(){this.N&&(this.N.callback(Jy),this.N=null)};
function yz(){var a=new B,b=Ry(new Iy,Sy,!0,!0);(new xz("Yathit CRM Setting","User setting cannot change because you are not login Yathit server.",b,a)).$a(!0);return a};function zz(){this.i=this.h=this.l=this.g=null;mq();this.j=null}da(zz);h=zz.prototype;h.logger=L("ydn.crm.ui.UserSetting");h.isLogin=function(){return!!this.g&&this.g.is_login};function Az(a){return a.isLogin()&&(!a.j||a.j==a.g.email)}h.Nj=function(){return this.g};
h.Wa=function(){if(!this.i){var a=this;chrome.storage.sync.get("user-setting",function(b){a.l=b["user-setting"]||Bz});Cz(this);this.i=hu().ba(function(a){(this.j=a)?tz("Loading user setting for "+a):tz("User setting not available.");return ze().send("login-info",{gmail:a}).A(function(a){(this.g=a)&&a.is_login?tz(a.email+" login."):(tz(a.email+" login failed."),J(this.logger,"login fail"))},function(){this.g=null;tz("login error.");J(this.logger,"login fail")},this)},this)}return this.i};
function Dz(a){a.g=null;a.l=null;a.i=null;a.Wa()}h.qi=function(){return this.g.email};h.Wh=function(a){var b=ze("sugarcrm",a);return Xb(this.Wa()).B(function(){return b.send("info-module").B(function(a){if(u(a))for(var b=0;b<a.length;b++)Ez(a[b]);else Ez(a);return a},this)},this)};
function Ez(a){var b="",c="",d;for(d in a.module_fields){var e=a.module_fields[d];0<="created_by created_by_name date_entered date_modified deleted modified_user_id modified_by_name id".split(" ").indexOf(d)&&(e.calculated=!0);if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(d))e.group="name";else if(/^email\d?$/.test(d))e.group="email";else if(/^phone?/.test(d))e.group="phone";else if(!e.group&&va(d,b)){e.group=c;continue}b=d;c=e.group}for(d in a.link_fields)b=a.link_fields[d],
"contact"!=d||b.module||(b.module="Contacts")}var Bz={},Fz={Group:{},Field:{}};function Cz(a){if(a.h)bc(a.h);else{var b=new B;chrome.storage.sync.get("sugar-setting",function(c){a.h=c["sugar-setting"]||Fz;b.callback(a.h)})}}function Gz(a){var b={};b["sugar-setting"]=a.h;var c=new B;chrome.storage.sync.set(b,function(){c.callback(b)})}function Hz(){var a=zz.H();a.h||Cz(a);return a.h||gn(Fz)}
function Iz(a){By.call(this);this.N=a;Py(this,Cy());this.setTitle("Yathit CRM Setting");this.ie=!0;Oy(this,!1);Ey(this);this.fe=!0;a=this.R();a.classList.add("ydn-crm");gi(a,oi);a=Z(this);a.listen(this,Qy,this.Nc);a.listen(this,Qy,this.mc)}A(Iz,By);Iz.prototype.Nc=function(){if(this.N){var a=this.R().querySelector("form.basic-setting"),b={};b["cp-po"]=Jz(a,"context-panel-position");b["lg-cc"]=!!Jz(a,"log-on-console");this.N.callback(b);this.N=null}};
Iz.prototype.mc=function(){this.N&&(this.N.callback(null),this.N=null)};
zz.prototype.show=function(){if(!Az(this))return yz();var a=new B,b=new Iz(a),c,d=["lg-cc","cp-po"];chrome.storage.sync.get(d,function(a){c=a;var d=b.R().querySelector("form.basic-setting"),g=d.querySelector("input[name=log-on-console]");a=!!a["lg-cc"];var k=g.type;if(t(k))switch(k.toLowerCase()){case "checkbox":case "radio":g.checked=a?"checked":null;break;case "select-one":g.selectedIndex=-1;if(v(a))for(var l=0;k=g.options[l];l++)if(k.value==a){k.selected=!0;break}break;case "select-multiple":v(a)&&
(a=[a]);for(l=0;k=g.options[l];l++)if(k.selected=!1,a)for(var m,n=0;m=a[n];n++)k.value==m&&(k.selected=!0);break;default:g.value=null!=a?a:""}d=d.querySelectorAll("input[name=context-panel-position]");g=gq["cp-po"]||iq;for(a=0;a<d.length;a++)if(g==d[a].value){d[a].setAttribute("checked","1");break}b.$a(!0)}.bind(this));return a.B(function(a){if(a){for(var b={},g=0;g<d.length;g++){var k=d[g];a[k]!=c[k]&&(b[k]=a[k])}(a=0<Object.keys(b).length)&&chrome.storage.sync.set(b);return a}})};function Kz(a){this.name=a||""}Kz.prototype.Ve=function(){return this.name.toUpperCase()};Kz.prototype.getName=function(){return this.name};function Lz(a){this.name=a.name||"";this.g=a}A(Lz,Kz);h=Lz.prototype;h.Ve=function(){return this.g.label||""};h.getName=function(){return this.g.name||""};h.lh=function(){this.getName();return!0};h.We=function(){return Hz().Field[this.g.name]||null};h.dh=function(){var a=Hz();a.Field[this.g.name]||(a.Field[this.g.name]={});return a.Field[this.g.name]};
h.sb=function(){var a=this.We();a&&t(a.normallyHide)?a=!!a.normallyHide:this.g.group?a=-1==Mz.indexOf(this.g.group):(this.getName(),a=!0);return a};function Nz(a){this.name=a||""}A(Nz,Kz);Nz.prototype.Ve=function(){return Nz.m.Ve.call(this).toUpperCase()};Nz.prototype.We=function(){return Hz().Group[this.name]||null};Nz.prototype.dh=function(){var a=Hz();a.Group[this.name]||(a.Group[this.name]={});return a.Group[this.name]};var Mz=["name","email","phone",""];
Nz.prototype.sb=function(){var a=this.We();return a?!!a.normallyHide:-1==Mz.indexOf(this.name)};Nz.prototype.lh=function(){var a=this.getName();return-1==Mz.indexOf(a)};function Oz(a,b){F.call(this,"field-change",b);this.h=a}A(Oz,F);function Pz(a,b){F.call(this,"action",b);this.h=a}A(Pz,F);function Qz(a){var b=a.type;if(!t(b))return null;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:null;case "select-one":return b=a.selectedIndex,0<=b?a.options[b].value:null;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:null;default:return t(a.value)?a.value:null}}function Jz(a,b){var c=a.elements[b];if(c){if(c.type)return Qz(c);for(var d=0;d<c.length;d++){var e=Qz(c[d]);if(e)return e}}return null};function Rz(){}da(Rz);Rz.prototype.w=function(){return"field"};function Sz(a,b){var c="ydnf-"+(a+"-"+b.name);if(b.options){if(!document.getElementById(c)){var d=document.createElement("datalist");d.id=c;for(var e in b.options)if(e){var f=document.createElement("option");f.setAttribute("value",e);d.appendChild(f)}document.body.appendChild(d)}return c}return null}Rz.prototype.g=function(a){var b=a.u(),c=a.g.s("div");c.classList.add(this.w());c.setAttribute("name",b.g);return a.F=c};
Rz.prototype.refresh=function(a){var b=a.n(),c=a.u();Q(b,!!c);if(c){var d=c.h();b.textContent=d;var e=Fw(c);e?b.setAttribute("title",e):b.removeAttribute("title");(v(d)?ya(d):null==d)?b.classList.add("empty"):b.classList.remove("empty");!Ew(c)&&Tz(a).sb()?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};Rz.prototype.h=function(a){return a.R().textContent};function Uz(){}A(Uz,Rz);da(Uz);Uz.prototype.g=function(a){var b=Uz.m.g.call(this,a),c=a.u();a=a.g;var d=Fw(c),c=Hw(c),e=Hu(Gu.H()),f=a.s("input",{type:"checkbox",id:e});a=a.s("label",{"for":e},d);c&&f.setAttribute("disabled","true");f.classList.add("value");b.appendChild(f);b.appendChild(a);return b};
Uz.prototype.refresh=function(a){var b=a.n(),c=a.u();Q(b,!!c);if(c){var d=c.h(),e=v(d)?!ya(d):null!=d,f=b.querySelector(".value");"bool"!=Gw(c)||ga(d)||(d="1"==d||"on"==d||"true"==d?!0:!1);f.value=d;e?b.classList.remove("empty"):b.classList.add("empty");!Ew(c)&&Tz(a).sb()&&b.classList.add("normally-hide")}};Uz.prototype.h=function(a){a=a.R().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function Vz(){}A(Vz,Rz);da(Vz);Vz.prototype.g=function(a){var b=Vz.m.g.call(this,a),c=a.u();a=a.g;var d=Fw(c),d=a.s("input",{type:"text","class":"value",title:d,placeholder:d});b.appendChild(d);Hw(c)&&d.setAttribute("disabled","1");c=c.j();0<c.length&&(a=a.s("div",{"class":"hover-button more-menu"}),b.appendChild(a),Rw(a,c));return b};
Vz.prototype.refresh=function(a){var b=a.n(),c=a.u();Q(b,!!c);if(c){var d=c.h(),e=v(d)?!ya(d):null!=d;b.querySelector(".value").value=e?d:"";if(d=b.querySelector(".more-menu")){d.innerHTML="";var f=c.j();Rw(d,f)}e?b.classList.remove("empty"):b.classList.add("empty");!Ew(c)&&Tz(a).sb()&&b.classList.add("normally-hide")}};Vz.prototype.h=function(a){return a.R().querySelector(".value").value};function Wz(){}A(Wz,Vz);da(Wz);Wz.prototype.g=function(a){var b=Wz.m.g.call(this,a),c=b.querySelector(".value");c.classList.add("enum");(a=Xz(a))&&c.setAttribute("list",a);return b};function Yz(){}A(Yz,Rz);da(Yz);Yz.prototype.g=function(a){var b=Yz.m.g.call(this,a),c=a.g;a=Fw(a.u());c=c.s("TEXTAREA",{"class":"value",title:a,placeholder:a});b.appendChild(c);return b};Yz.prototype.refresh=function(a){var b=a.n(),c=a.u();Q(b,!!c);if(c){var d=c.h(),e=v(d)?!ya(d):null!=d;b.querySelector(".value").value=e?d:"";e?b.classList.remove("empty"):b.classList.add("empty");!Ew(c)&&Tz(a).sb()&&b.classList.add("normally-hide")}};
Yz.prototype.h=function(a){a=a.R().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function Zz(a,b,c){Y.call(this,c);b||(b=Gw(a),b="bool"==b?Uz.H():"text"==b?Yz.H():"enum"==b?Wz.H():Vz.H());this.h=b;this.j=a}A(Zz,Y);function Tz(a){return new Lz(a.u().i())}h=Zz.prototype;h.Q=function(){this.h.g(this)};h.G=function(){var a=this.n().querySelector("input");a&&Z(this).listen(a,"blur",this.Kj);(a=this.n().getElementsByClassName("more-menu")[0])&&Z(this).listen(a,"click",this.Lj)};
h.Lj=function(a){a=a.target;var b=Vh(a,null,"goog-menuitem").getAttribute("name");if(b){b=new Pz(b,this);this.dispatchEvent(b);var c=Vh(a,null,"more-menu");Q(c,!1);setTimeout(function(){Q(c,!0)},1E3);b.o||("remove"==b.h?(a=this.bh(),this.dispatchEvent(new Oz(a,this))):"edit"==b.h&&$z(this))}};function aA(a){var b=a.u();a=Xz(a);return{Ta:[{label:Fw(b),name:b.g,value:b.h(),type:Gw(b),Ce:a}]}}function Xz(a){a=a.u();return Sz(ix(a.parent.module),a.i())}
function bA(a){var b=new By;Py(b,Cy());b.setTitle("Edit name");b.ie=!0;Oy(b,!0);Ey(b);b.fe=!0;b.R().classList.add("ydn-crm");var c='<div class="field-edit-dialog"><table><tbody>';a=a.Ta;for(var d=a.length,e=0;e<d;e++)var f=a[e],c=c+('<tr class="field" name="'+ki(f.name)+'"><td class="name">'+ki(f.label)+'</td><td><input class="value" type="'+ki(f.type)+'"'+(f.Ce?'list="'+ki(f.Ce)+'"':"")+'value="'+ki(f.value)+'" /></td></tr>');c=ci(c+"</tbody></table></div>",null);b.cc=c;b.Sa&&(b.Sa.innerHTML=bi(c));
return b}function $z(a){var b=bA(aA(a));Z(a).listen(b,Qy,a.Uh,!1);Sf(Z(a),b,function(){Z(this).ha(b,Qy,this.Uh,!1)});b.$a(!0)}h.Uh=function(a){if("ok"==a.key){a=a.target.R().querySelectorAll(".field");for(var b={},c=this.u(),d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;c.h()!=f&&(b[e]=f)}this.dispatchEvent(new Oz(b,this))}};h.Kj=function(){var a=this.h.h(this);(a=this.u().l(a))&&this.dispatchEvent(new Oz(a,this))};
h.bh=function(){var a={};a[this.u().g]="";return a};h.refresh=function(){this.h.refresh(this)};function cA(a){var b=a.h.h(a);a=a.u();var c=a.rd();if("bool"==Gw(a)&&t(c)&&!ga(c))if("on"==c||"off"==c)b=b?"on":"off";else if("true"==c||"false"==c)b=b?"true":"false";else{if("1"==c||"0"==c)b=b?"1":"0"}else!1===c&&"bool"!=!Gw(a)&&"false"==b?b=c:t(c)||b||(b=c);return b!=c?b:null}h.T=function(){return this.u().h()};function dA(a,b){Y.call(this,b);this.j=a}A(dA,Y);function eA(a,b){var c=a.n();b?(c.classList.add("edit"),c.classList.remove("view")):(c.classList.remove("edit"),c.classList.add("view"))}function fA(a){var b=a.n();b.classList.add("view");b.classList.remove("edit");for(b=0;b<Qu(a);b++)$(a,b).Ue()}dA.prototype.w=function(){return"record-body"};dA.prototype.Q=function(){dA.m.Q.call(this);var a=this.n();a.classList.add(this.w());a.classList.add("view")};
function gA(a){for(var b=null,c=0;c<Qu(a);c++){var d=$(a,c).hd();if(d){b||(b={});for(var e in d)b[e]=d[e]}}return b}dA.prototype.refresh=function(){for(var a=0;a<Qu(this);a++)$(this,a).refresh()};function hA(a,b){var c=Vz.H();Zz.call(this,a,c,b)}A(hA,Zz);hA.prototype.bh=function(){return Mw(this.u())};function iA(a,b){var c=Vz.H();Zz.call(this,a,c,b)}A(iA,Zz);function kA(){}da(kA);kA.prototype.w=function(){return"record-group"};kA.prototype.refresh=function(a){for(var b=0;b<Qu(a);b++)$(a,b).refresh()};function lA(a){this.data=a||{}}function mA(a){a=a.trim().replace("%40","@");return-1==a.indexOf("@")||-1==a.indexOf(".")?C(Error("Invalid email "+a)):ze().send("social-profile",{email:a}).A(function(a){return new lA(a)},function(){return new lA(null)})};function nA(a,b){Y.call(this,b);this.j=a}A(nA,Y);h=nA.prototype;h.R=function(){return th("content",this.n())};h.hd=function(){return null};h.w=function(){return"record-group"};h.Q=function(){var a=this.g,b=a.s("div",this.w()),c=a.s("div","header"),a=a.s("div","content");b.appendChild(c);b.appendChild(a);this.F=b;b.setAttribute("name",this.u().g);(new Nz(this.u().g)).sb()&&b.classList.add("normally-hide")};h.refresh=function(){};
h.Ue=function(){var a=(new Nz(this.u().g)).sb(),b=this.n();a?b.classList.add("normally-hide"):b.classList.remove("normally-hide")};h.xg=function(a,b){var c=a?'[name="'+a+'"]':"";if(c=this.R().querySelector("div.field"+c+" input.value"))c.value=b};h.Ag=function(){return!1};function oA(){}da(oA);function pA(a,b){a.R().querySelector("input.value").value=b}oA.prototype.refresh=function(a){var b=a.u();a=a.R();Q(a,!!b);if(b){a=a.querySelector(".value");var c=b.Od();"INPUT"==a.tagName?a.value=c:a.textContent=c;(b=b.Df())?a.setAttribute("title",b):a.removeAttribute("title");(v(c)?ya(c):null==c)?a.classList.add("empty"):a.classList.remove("empty")}};function qA(a,b,c){this.i=b||oA.H();nA.call(this,a,c)}A(qA,nA);h=qA.prototype;
h.Q=function(){qA.m.Q.call(this);var a=this.u(),b=this.g,c=b.s("div","field"),d=a.Df(),d=b.s("input",{type:"text","class":"value",title:d,placeholder:d});c.appendChild(d);a=a.xf();u(a)?(b=b.s("div",{"class":"hover-button more-menu"}),c.appendChild(b),Rw(b,a)):y(a)&&(d=a.name==Iw?"delete-field":"detail-field",b=b.s("div",{"class":"hover-button "+d,title:a.label}),d=Ow("delete-field"==d?"delete":"more-horiz"),b.appendChild(d),b.setAttribute("name",a.name),c.appendChild(b));this.R().appendChild(c)};
h.G=function(){qA.m.G.call(this);var a=this.n().querySelector("input");a&&Z(this).listen(a,"blur",this.Mj);(a=this.n().getElementsByClassName("hover-button")[0])&&Z(this).listen(a,"click",this.nj)};h.Mj=function(){var a=this.hd();var b=this.u();if(y(a)){var c=!1,d={},e;for(e in a)if(b.Tb(e)){var f=b.module.value(e);a[e]!==f&&(c=!0,d[e]=a[e])}else c=!0,d[e]=a[e];a=c?d:null}else a=null;a&&this.dispatchEvent(new Oz(a,this))};
h.nj=function(a){if(a=a.i.getAttribute("name"))a=new Pz(a,this),this.dispatchEvent(a),a.o||rA(this,a)};h.hd=function(){for(var a=null,b=0;b<Qu(this);b++){var c=$(this,b),d=cA(c);null!==d&&(a||(a={}),a[c.u().g]=d)}return a};function rA(a,b){if("edit"==b.h){var c=bA(a.Bg());Z(a).listen(c,Qy,a.Vh,!1);Sf(Z(a),c,function(){Z(this).ha(c,Qy,this.Vh,!1)});c.$a(!0)}}
h.Vh=function(a){if("ok"==a.key){a=a.target.R().querySelectorAll(".field");for(var b={},c=this.u(),d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;Vw(c,e)!=f&&(b[e]=f)}a=new Oz(b,this);this.dispatchEvent(a);a.o||this.fh(a)}};h.fh=function(){};h.refresh=function(){this.i.refresh(this)};h.Bg=function(){return{Ta:[]}};function sA(a,b){qA.call(this,a,null,b);this.h=null}A(sA,qA);h=sA.prototype;h.G=function(){sA.m.G.call(this);this.n().querySelector("input").setAttribute("disabled","1")};function tA(a,b){return a.h&&a.h[b]?a.h[b]:Vw(a.u(),b)}function uA(a,b,c){a.h||(a.h={});a.h[b]=c}h.Bg=function(){var a=this.u(),b=[],c=Dw(a.module),d=a.g,e;for(e in c.module_fields){var f=c.module_fields[e];f.group==d&&b.push({name:e,label:f.label,type:f.type,value:tA(this,e),Ce:Sz(ix(a.module),f)})}return{Ta:b}};
h.Ag=function(a){if(!a)return!1;var b=Nc(a.data,"fc","demographics","locationDeduced");a=!1;if(b){var c=this.u().g+"_";!tA(this,c+"country")&&b.country&&(b.country.code?(uA(this,c+"country",b.country.code),a=!0):b.country.name&&(uA(this,c+"country",b.country.name),a=!0));!tA(this,c+"city")&&b.city&&b.city.name&&(uA(this,c+"city",b.city.name),a=!0);!tA(this,c+"state")&&b.state&&b.state.name&&(uA(this,c+"state",b.state.name),a=!0);a&&(b=vA(this),pA(this,b))}return a};
function vA(a){var b=a.u();if(a.h){var c=a.u().g+"_",b=tA(a,c+"country"),d=tA(a,c+"city"),e=tA(a,c+"state"),f=tA(a,c+"postalcode"),g=tA(a,c+"street");a=tA(a,c+"street_2");return Yw(b,d,e,f,g,a)}return b.Od()}h.fh=function(a){this.h=gn(a.h);a=vA(this);pA(this,a)};h.hd=function(){return this.h||null};function wA(a,b,c){b||kA.H();nA.call(this,a,c)}A(wA,nA);h=wA.prototype;h.Q=function(){wA.m.Q.call(this);xA(this)};function xA(a){for(var b=a.u(),c=a.g,d=b.fg(),e=0;e<d.length;e++){var f=b.h(d[e]),g;f instanceof Jw?g=new hA(f,c):f instanceof ex?g=new iA(f,c):g=new Zz(f,null,c);a.X(g,!0)}}h.G=function(){wA.m.G.call(this);Z(this).listen(this,"action",this.oj)};h.oj=function(){};h.hd=function(){for(var a=null,b=0;b<Qu(this);b++){var c=$(this,b),d=cA(c);null!==d&&(a||(a={}),a[c.u().g]=d)}return a};
h.refresh=function(){for(var a=0;a<Qu(this);a++)$(this,a).refresh()};h.Ue=function(){wA.m.Ue.call(this);for(var a=0;a<Qu(this);a++){var b=$(this,a),c=Tz(b).sb(),b=b.n();c?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};function yA(a,b){var c=kA.H();wA.call(this,a,c,b)}A(yA,wA);yA.prototype.Ue=function(){for(var a=Qu(this)-1;0<=a;a--)this.removeChild($(this,a),void 0).$();xA(this)};function zA(){}A(zA,kA);da(zA);zA.prototype.w=function(){return"record-group"};zA.prototype.refresh=function(a){for(var b=a.u(),c=a.g,d=[],e=0;e<Qu(a);e++){var f=$(a,e);f.refresh();d.push(f.u().g)}f=b.fg();for(e=0;e<f.length;e++){var g=f[e],k=b.h(g);(new Nz(a.u().g)).sb()||-1!=d.indexOf(g)||(g=new Zz(k,null,c),a.X(g,!0))}};function AA(){}A(AA,kA);da(AA);AA.prototype.w=function(){return"list"};function BA(a,b){var c=AA.H();wA.call(this,a,c,b)}A(BA,wA);BA.prototype.R=function(){return th("content",this.n())};BA.prototype.refresh=function(){for(var a=0;a<Qu(this);a++)$(this,a).refresh()};function CA(a,b){qA.call(this,a,null,b)}A(CA,qA);CA.prototype.Bg=function(){var a=this.u();if(a.Tb("full_name"))var b=Sz(ix(a.module),Dw(a.module).module_fields.salutation),a=[{name:"salutation",label:"Salutation",type:"enum",value:Vw(a,"salutation"),Ce:b},{name:"first_name",label:"First name",type:"text",value:Vw(a,"first_name")},{name:"last_name",label:"Last name",type:"text",value:Vw(a,"last_name")}];else a=[{name:"name",label:"Name",type:"text",value:Vw(a,"name")}];return{Ta:a}};
CA.prototype.hd=function(){var a=this.u(),b=this.R().querySelector("input.value").value,c=a.Od();if(b==c)return null;if(!a.Tb("full_name"))return{name:b};var b=dx(a,b),c=a.module.value("salutation"),d=a.module.value("first_name"),e=a.module.value("last_name"),a=a.module.value("full_name");return c!=b.salutation||d!=b.first_name||e!=b.last_name||a!=b.full_name?b:null};CA.prototype.xg=function(a,b){"full_name"!=a&&"name"!=a||CA.m.xg.call(this,null,b)};
CA.prototype.Ag=function(a){var b=this.R().querySelector("input.value").value;a=a.data.fc?a.data.fc.contactInfo.fullName:null;return!b&&a?(pA(this,a),!0):!1};function DA(a,b){BA.call(this,a,b)}A(DA,BA);function EA(a,b){dA.call(this,a,b)}A(EA,dA);
EA.prototype.Q=function(){EA.m.Q.call(this);this.n();var a=this.g,b=this.u(),c=[],d=Dw(b),e;for(e in d.module_fields){var f=d.module_fields[e].group;-1==c.indexOf(f)&&c.push(f)}for(d=0;d<c.length;d++){e=c[d];var f=b,g=e;f.h[g]||("name"==g?f.h[g]=new cx(f):0<=["address","alt_address","primary_address"].indexOf(g)?f.h[g]=new Ww(f,g):f.h[g]="email"==g?new ax(f):"phone"==g?new fx(f):new Zw(f,g));f=f.h[g];if(f instanceof ax)e=new yA(f,a);else if(f instanceof Ww)e=new sA(f,a);else if(f instanceof fx)e=
new DA(f,a);else if(f instanceof cx)e=new CA(f,a);else if(f instanceof Zw)e=f,f=null,""==e.g&&(f=zA.H()),e=new wA(e,f,a);else throw Error("Invalid group: "+e);this.X(e,!0)}};function FA(){}da(FA);function GA(a){a=a.n().querySelector(".record-footer div.message");a.textContent="";a.classList.remove("error")};function HA(a,b,c){Xx.call(this,a,b,c);this.qa(16,!0)}A(HA,Xx);Cv("goog-checkbox-menuitem",function(){return new HA(null)});var IA={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function JA(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(KA.test(c))return b.ve=LA(c),b.type="hex",b;c=MA(a);if(c.length){var d=c[0];a=c[1];c=c[2];d=Number(d);a=Number(a);c=Number(c);if(isNaN(d)||0>d||255<d||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)throw Error('"('+d+","+a+","+c+'") is not a valid RGB color');d=NA(d.toString(16));a=NA(a.toString(16));c=NA(c.toString(16));b.ve="#"+d+a+c;b.type="rgb";return b}if(IA&&(c=IA[a.toLowerCase()]))return b.ve=c,b.type="named",b;throw Error(a+
" is not a valid color string");}var OA=/#(.)(.)(.)/;function LA(a){if(!KA.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(OA,"#$1$1$2$2$3$3"));return a.toLowerCase()}var KA=/^#(?:[0-9a-f]{3}){1,2}$/i,PA=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function MA(a){var b=a.match(PA);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]}
function NA(a){return 1==a.length?"0"+a:a};function QA(){}A(QA,iy);da(QA);QA.prototype.Uf=function(a,b){return QA.m.Uf.call(this,b.s("div","goog-color-menu-button-indicator",a),b)};QA.prototype.vd=function(a,b){if(a){var c=this.na(a);if(c&&c.firstChild){var d;if(d=b)d=!!(KA.test("#"==b.charAt(0)?b:"#"+b)||MA(b).length||IA&&IA[b.toLowerCase()]);d=d?JA(b).ve:null;c.firstChild.style.borderBottomColor=d||(E?"":"transparent")}}};QA.prototype.Wc=function(a){var b=a.n();this.vd(b,a.T());kv(b,"goog-color-menu-button");QA.m.Wc.call(this,a)};function RA(a,b,c,d,e){this.g=!!b;a&&SA(this,a,d);this.h=void 0!=e?e:this.Sb||0;this.g&&(this.h*=-1);this.i=!c}A(RA,Cd);h=RA.prototype;h.Qb=null;h.Sb=0;h.Nh=!1;function SA(a,b,c){if(a.Qb=b)a.Sb=ha(c)?c:1!=a.Qb.nodeType?0:a.g?-1:1;ha(void 0)&&(a.h=void 0)}h.clone=function(){return new RA(this.Qb,this.g,!this.i,this.Sb,this.h)};
h.next=function(){var a;if(this.Nh){if(!this.Qb||this.i&&0==this.h)throw Bd;a=this.Qb;var b=this.g?-1:1;if(this.Sb==b){var c=this.g?a.lastChild:a.firstChild;c?SA(this,c):SA(this,a,-1*b)}else(c=this.g?a.previousSibling:a.nextSibling)?SA(this,c):SA(this,a.parentNode,-1*b);this.h+=this.Sb*(this.g?-1:1)}else this.Nh=!0;a=this.Qb;if(!this.Qb)throw Bd;return a};
h.splice=function(a){var b=this.Qb,c=this.g?1:-1;this.Sb==c&&(this.Sb=-1*c,this.h+=this.Sb*(this.g?-1:1));this.g=!this.g;RA.prototype.next.call(this);this.g=!this.g;for(var c=fa(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)b.parentNode&&b.parentNode.insertBefore(c[d],b.nextSibling);Ih(b)};function TA(a,b,c,d){RA.call(this,a,b,c,null,d)}A(TA,RA);TA.prototype.next=function(){do TA.m.next.call(this);while(-1==this.Sb);return this.Qb};function UA(){}A(UA,ov);da(UA);var VA=0;h=UA.prototype;h.va=function(a){var b=rv(this,a);a=a.g.s("DIV",b?b.join(" "):null,WA(this,a.ca(),a.ab,a.g));fv(a,"grid");return a};function WA(a,b,c,d){for(var e=[],f=0,g=0;f<c.height;f++){for(var k=[],l=0;l<c.width;l++){var m=b&&b[g++];k.push(XA(a,m,d))}e.push(YA(a,k,d))}a=d.s("TABLE",a.w()+"-table",d.s("TBODY",a.w()+"-body",e));a.cellSpacing=0;a.cellPadding=0;return a}function YA(a,b,c){a=c.s("TR",a.w()+"-row",b);fv(a,"row");return a}
function XA(a,b,c){a=c.s("TD",{"class":a.w()+"-cell",id:a.w()+"-cell-"+VA++},b);fv(a,"gridcell");gv(a,"selected",!1);if(!Sh(a)&&!hv(a,"label")){var d;b=new TA(a);for(c="";!c&&(d=Gd(b));)1==d.nodeType&&(c=hv(d,"label")||d.title);(d=c)&&gv(a,"label",d)}return a}h.xc=function(){return!1};h.la=function(){return null};
h.ac=function(a,b){if(a){var c=uh(document,"TBODY",this.w()+"-body",a)[0];if(c){var d=0;wb(c.rows,function(a){wb(a.cells,function(a){Gh(a);if(b){var c=b[d++];c&&a.appendChild(c)}})});if(d<b.length){for(var e=[],f=qh(a),g=c.rows[0].cells.length;d<b.length;){var k=b[d++];e.push(XA(this,k,f));e.length==g&&(k=YA(this,e,f),c.appendChild(k),e.length=0)}if(0<e.length){for(;e.length<g;)e.push(XA(this,"",f));k=YA(this,e,f);c.appendChild(k)}}}Nj(a,!0,nc)}};
function ZA(a,b,c){for(b=b.n();c&&1==c.nodeType&&c!=b;){if("TD"==c.tagName&&jv(c,a.w()+"-cell"))return c.firstChild;c=c.parentNode}return null}h.w=function(){return"goog-palette"};function $A(a){pd.call(this);this.g=[];aB(this,a)}A($A,pd);h=$A.prototype;h.jc=null;h.rg=null;function aB(a,b){b&&(wb(b,function(a){bB(this,a,!1)},a),Ib(a.g,b))}h.Vc=function(){return Hb(this.g)};function cB(a,b){b!=a.jc&&(bB(a,a.jc,!1),a.jc=b,bB(a,b,!0));a.dispatchEvent("select")}function dB(a){var b=a.jc;return b?ub(a.g,b):-1}h.clear=function(){Eb(this.g);this.jc=null};h.I=function(){$A.m.I.call(this);delete this.g;this.jc=null};
function bB(a,b,c){b&&("function"==typeof a.rg?a.rg(b,c):"function"==typeof b.dd&&b.dd(c))};function eB(a,b,c){Ev.call(this,a,b||UA.H(),c);this.zb&=-89;this.h=new fB;this.h.Me(this);this.Y=-1}A(eB,Ev);h=eB.prototype;h.ab=null;h.Mb=-1;h.za=null;h.I=function(){eB.m.I.call(this);this.za&&(this.za.$(),this.za=null);this.ab=null;this.h.$()};h.kc=function(a){eB.m.kc.call(this,a);gB(this);this.za?(this.za.clear(),aB(this.za,a)):(this.za=new $A(a),a=oa(this.zi,this),this.za.rg=a,Z(this).listen(this.za,"select",this.yi));this.Mb=-1};h.Fb=function(){return""};
h.Bc=function(a){eB.m.Bc.call(this,a);var b=ZA(this.i,this,a.target);b&&a.l&&Lh(b,a.l)||b==hB(this)||(a=this.ca(),iB(this,a?ub(a,b):-1))};h.zc=function(a){eB.m.zc.call(this,a);if(xv(this,4)&&(a=ZA(this.i,this,a.target),a!=hB(this))){var b=this.ca();iB(this,b?ub(b,a):-1)}};h.Xa=function(a){var b=hB(this);return b?(this.za&&cB(this.za,b),eB.m.Xa.call(this,a)):!1};
h.Na=function(a){var b=this.ca(),b=b?b.length:0,c=this.ab.width;if(0==b||!this.isEnabled())return!1;if(13==a.g||32==a.g)return this.Xa(a);if(36==a.g)return iB(this,0),!0;if(35==a.g)return iB(this,b-1),!0;var d=0>this.Mb?this.za?dB(this.za):-1:this.Mb;switch(a.g){case 37:if(-1==d||0==d)d=b;iB(this,d-1);a.preventDefault();return!0;case 39:return d==b-1&&(d=-1),iB(this,d+1),a.preventDefault(),!0;case 38:-1==d&&(d=b+c-1);if(d>=c)return iB(this,d-c),a.preventDefault(),!0;break;case 40:if(-1==d&&(d=-c),
d<b-c)return iB(this,d+c),a.preventDefault(),!0}return!1};h.yi=function(){};function hB(a){var b=a.ca();return b&&b[a.Mb]}function iB(a,b){b!=a.Mb&&(jB(a,a.Mb,!1),a.Y=a.Mb,a.Mb=b,jB(a,b,!0),a.dispatchEvent("j"))}function kB(a,b){if(a.za){var c=a.za;cB(c,c.g[b]||null)}}
function jB(a,b,c){if(a.n()){var d=a.ca();if(d&&0<=b&&b<d.length){var e;e=(e=hB(a))?e.parentNode:null;a.h.n()!=e&&(a.h.F=e);e=a.h;e.wa(c);xv(e,2)==c&&(b=d[b])&&(b=b?b.parentNode:null,d=a.i.w()+"-cell-hover",c?kv(b,d):mv(b,d),c?gv(a.F,"activedescendant",b.id):b.id==hv(a.F,"activedescendant")&&a.F.removeAttribute("aria-activedescendant"))}}}h.wa=function(a){a&&-1==this.Mb?iB(this,-1<this.Y?this.Y:0):a||iB(this,-1);eB.m.wa.call(this,a)};
h.zi=function(a,b){if(this.n()&&a){var c=a.parentNode,d=this.i.w()+"-cell-selected";b?kv(c,d):mv(c,d);gv(c,"selected",b)}};function gB(a){var b=a.ca();if(b)if(a.ab&&a.ab.width){if(b=Math.ceil(b.length/a.ab.width),!ha(a.ab.height)||a.ab.height<b)a.ab.height=b}else b=Math.ceil(Math.sqrt(b.length)),a.ab=new ph(b,b);else a.ab=new ph(0,0)}function fB(){Ev.call(this,null);this.Rb|=2}A(fB,Ev);function lB(a,b,c){this.K=a||[];eB.call(this,null,b||UA.H(),c);this.K=this.K;this.N=this.P=null;Hv(this,mB(this))}A(lB,eB);lB.prototype.N=null;lB.prototype.P=null;lB.prototype.Ff=function(){var a=this.za?this.za.jc:null;if(a){var b=a.style[Ta("background-color")];if("undefined"!==typeof b)a=b;else{b=a.style;a:{var c=Ta("background-color");if(void 0===a.style[c]){var d=uj()+Ua(c);if(void 0!==a.style[d]){a=d;break a}}a=c}a=b[a]||""}return nB(a)}return null};
lB.prototype.tg=function(a){a=nB(a);this.N||(this.N=yb(this.K,function(a){return nB(a)}));kB(this,a?ub(this.N,a):-1)};function mB(a){return yb(a.K,function(a,c){var d=this.g.s("div",{"class":this.i.w()+"-colorswatch",style:"background-color:"+a}),e;this.P&&this.P[c]?e=this.P[c]:"#"==a.charAt(0)?(e=LA(a),e="RGB ("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(", ")+")"):e=a;d.title=e;return d},a)}
function nB(a){if(a)try{return JA(a).ve}catch(b){}return null};function oB(a,b,c,d){jy.call(this,a,b,c||QA.H(),d)}A(oB,jy);var pB={t:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),fa:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),K:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};
function qB(a){var b=new by(a);Kc(pB,function(c){c=new lB(c,null,a);if(c.n())throw Error("Component already rendered");c.ab=ha(8)?new ph(8,void 0):8;gB(c);b.X(c,!0)});return b}h=oB.prototype;h.Ff=function(){return this.T()};h.tg=function(a){this.$b(a)};h.$b=function(a){for(var b=0,c;c=this.h?$(this.h,b):null;b++)"function"==typeof c.tg&&c.tg(a);oB.m.$b.call(this,a)};
h.zd=function(a){"function"==typeof a.target.Ff?this.$b(a.target.Ff()):"none"==a.target.T()&&this.$b(null);oB.m.zd.call(this,a);a.stopPropagation();this.dispatchEvent("action")};h.ma=function(a,b){a&&0==(this.h?Qu(this.h):0)&&(this.$c(qB(this.g)),this.$b(this.T()));oB.m.ma.call(this,a,b)};Cv("goog-color-menu-button",function(){return new oB(null)});function rB(){}A(rB,dy);da(rB);h=rB.prototype;h.na=function(a){return a};h.va=function(a){var b=rv(this,a);return a.g.s("div",{"class":"goog-inline-block "+b.join(" "),title:a.tb()||""},a.ca())};h.xc=function(a){return"DIV"==a.tagName};h.la=function(a,b){lv(b,["goog-inline-block",this.w()]);return rB.m.la.call(this,a,b)};h.w=function(){return"goog-css3-button"};Cv("goog-css3-button",function(){return new fy(null,rB.H())});
Cv("goog-css3-toggle-button",function(){var a=new fy(null,rB.H());a.qa(16,!0);return a});function sB(a,b,c){fy.call(this,a,b||gy.H(),c)}A(sB,fy);Cv("goog-custom-button",function(){return new sB(null)});function tB(a,b,c){fy.call(this,a,b||gy.H(),c);this.qa(16,!0)}A(tB,fy);Cv("goog-toggle-button",function(){return new tB(null)});function uB(){}A(uB,Yx);da(uB);uB.prototype.va=function(a){return a.g.s("div",this.w()+" goog-inline-block","\u00a0")};uB.prototype.la=function(a,b){b=uB.m.la.call(this,a,b);kv(b,"goog-inline-block");return b};uB.prototype.w=function(){return"goog-toolbar-separator"};function vB(){this.g="toolbar"}A(vB,Pv);da(vB);vB.prototype.qd=function(a){return"HR"==a.tagName?new Zx(uB.H()):vB.m.qd.call(this,a)};vB.prototype.w=function(){return"goog-toolbar"};vB.prototype.ih=function(){return Uv};function wB(a,b,c){Wv.call(this,b,a||vB.H(),c)}A(wB,Wv);wB.prototype.wd=function(a){wB.m.wd.call(this,a);this.kb||aw(this)};function xB(a,b){Y.call(this,b);this.j=a}A(xB,Y);xB.prototype.w=function(){return"secondary"};xB.prototype.Q=function(){xB.m.Q.call(this);this.n().classList.add(this.w())};xB.prototype.G=function(){xB.m.G.call(this);var a=this.u();if(0<=fs.indexOf(ix(a))){var b=Z(this);b.listen(a,"module-change",this.h);b.listen(a,"record-change",this.h);this.h()}};
xB.prototype.h=function(){for(;this.l&&0!=this.l.length;){var a=$(this,0);this.removeChild(a,!0);a.$()}a=this.u();if(Js(a.g)){var b=a.parent,a=[{store:"Notes",index:"parent",reverse:!0,keyRange:zk([ix(a),a.C()])}];b.send("query",a).A(function(a){for(var d=0;d<a.length;d++){var e=a[d];e.result&&0<e.result.length&&(e=new gx(this.u().parent,new Is(kx(b),"Notes",e.result[0])),e=new yB(e,this.g),this.X(e,!0))}},function(a){throw a;},this)}};var iq="in",zB=null;function AB(){if(!zB){var a=chrome.extension.getURL("image/all-icons.svg"),b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){zB=b.responseXML;b=null};b.send()}return zB}function Ow(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=AB().documentElement.getElementById(a);d&&(c.setAttribute("viewBox",d.getAttribute("viewBox")),c.innerHTML=d.innerHTML);2>arguments.length?c.classList.add("icons"):v(b)&&c.classList.add(b);return c}var BB=null;
function CB(){if(!BB){var a=chrome.extension.getURL("inj-template.html"),b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){BB=(new DOMParser).parseFromString(b.responseText,"text/html");b=null};b.send()}return BB}function DB(a){a=CB().documentElement.querySelector("#"+a);document.body.contains(a)||(a=document.importNode(a,!0),document.body.appendChild(a));return a};function yB(a,b){Y.call(this,b);this.j=a;this.i=new Nw({className:"menu"});this.h=new EA(this.u(),this.g);this.t=new xB(a,b);FA.H()}A(yB,Y);h=yB.prototype;h.logger=L("ydn.crm.sugarcrm.ui.record.Record");h.w=function(){return"record-panel"};h.R=function(){return this.n().querySelector(".content")};function EB(a){return a.n().querySelector(".head")}
h.Q=function(){yB.m.Q.call(this);var a=this.n(),b=this.g;a.className=this.w()+" "+ix(this.u());var c=b.s("div","head"),d=b.s("div","content");a.appendChild(c);a.appendChild(d);c.classList.add("record-header");c.classList.add("flex-bar");var d=b.s("a",{"class":"title center",title:"Open in SugarCRM"}),e=b.s("span","icon"),f=b.s("span","svg-button ok-button",Ow("check-circle"));f.setAttribute("title","Save");c.appendChild(e);c.appendChild(d);c.appendChild(f);this.i.render(c);this.X(this.h,!0);this.X(this.t,
!0);b=b.s("div","record-footer");a.appendChild(b);b=this.g;a=this.n().querySelector(".record-footer");b=b.s("div","message");a.appendChild(b)};
h.G=function(){yB.m.G.call(this);var a=Z(this),b=this.u();a.listen(b,"click",this.th,!1);this.n().querySelector(".record-footer");var c=this.n().querySelector(".head .more-menu");a.listen(b,"module-change",this.th);a.listen(b,"record-change",this.Zi);a.listen(b,"record-update",this.$i);a.listen(this.R(),"click",this.Hi,!1);a.listen(this,["field-change"],this.Oi);a.listen(c,"click",this.Li);b=EB(this).querySelector(".ok-button");a.listen(b,"click",this.qj);FB(this)};
function GB(a){var b=a.u(),c=DB("record-delete-dialog");a=c.querySelector("a.record");a.href=rx(b);a.textContent=hx(b);c.querySelector("span.type").textContent=ix(b);c.showModal(document.getElementById("sticky-hud-base"));c.querySelector("button[name=cancel]").onclick=function(){c.close("cancel")};a=c.querySelector("button[name=ok]");a.onclick=function(){c.close("ok")};a.focus();c.onclose=function(a){if("ok"==a.target.returnValue){var c=tz("Deleting","...");wz(c,rx(b),hx(b));px(b).A(function(){uz(c,
hx(b)," deleted.")},function(a){vz(c,a.message)},this)}}}h.Li=function(a){a=Qw(a);var b=HB+"-";"edit"==a?this.jd(!this.n().classList.contains("edit")):a==IB?GB(this):a==JB?KB(this):a==LB?MB(this):a&&va(a,"new-")?(a=a.substr(4),NB(this,a,!1)):a&&va(a,b)&&(a=a.substr(b.length),NB(this,a,!0))};h.qj=function(){var a=gA(this.h),b=tz("Saving..."),c=this.u();ox(this.u(),a).A(function(){uz(b,ix(c)," saved.");var a=rx(c);wz(b,a,hx(c),"View in SugarCRM");OB(this,!1)},function(a){vz(b,a.message)},this)};
function KB(a){var b=document.querySelector("#field-display-dialog")||DB("field-display-dialog"),c=b.querySelector(".content"),d=c.getAttribute("name");if(!d){var e=b.querySelector("button.apply"),f=b.querySelector("button.cancel");e.onclick=function(){b.close("apply")};f.onclick=function(){b.close("cancel")};b.onclose=a.mj.bind(a)}a=a.u();e=ix(a);if(d!=e){c.innerHTML="";c.setAttribute("name",e);d=DB("field-table").content;c.appendChild(d.cloneNode(!0));d=c.querySelector("tbody.group-body");c=c.querySelector("tbody.field-body");
a=Dw(a);e=[];zz.H();for(var g in a.module_fields){var k=a.module_fields[g],l=k.group,f=document.createElement("tr");if(l)if(-1==e.indexOf(l))e.push(l),d.appendChild(f),k=new Nz(l);else continue;else c.appendChild(f),k=new Lz(k);f.setAttribute("name",k.getName());var l=document.createElement("td"),m=document.createElement("td"),n=document.createElement("input");l.appendChild(n);n.type="checkbox";k.sb()||(n.checked=!0);m.textContent=k.Ve();f.appendChild(l);f.appendChild(m)}}b.showModal()}
h.mj=function(a){a=a.target;if("apply"==a.returnValue){var b=a.querySelector(".group-body"),b=PB(b);QB(this,!0,b);a=a.querySelector(".field-body");a=PB(a);QB(this,!1,a);a=this.n().classList.contains("edit");fA(this.h);this.h.refresh();a&&eA(this.h,!0)}};function PB(a){for(var b={},c=a.childElementCount,d=0;d<c;d++){var e=a.children[d],f=e.children[0].children[0];b[e.getAttribute("name")]=!f.checked}return b}
function QB(a,b,c){a=Dw(a.u());zz.H();for(var d in c){var e=a.module_fields[d],f;b?f=new Nz(d):f=new Lz(e);var e=f,g=c[d],k=zz.H(),l=e.We(),m=e.lh();g==m?l?(delete l.normallyHide,Gz(k)):bc(!1):(l||(l=e.dh()),l.normallyHide=!!g,Gz(k))}}
function MB(a){a=gn(a.u().g.getData());var b=DB("record-detail-dialog");b.querySelector("button.ok").onclick=function(){b.close("close")};var c=b.querySelector(".content");c.innerHTML="";var d=document.createElement("pre");if(a){for(var e in a)va(e,"ydn$")&&delete a[e];d.textContent=JSON.stringify(a,null,2)}c.appendChild(d);b.showModal()}h.Oi=function(a){this.n().classList.contains("edit")?OB(this,!0):(a.preventDefault(),ox(this.u(),a.h))};
function OB(a,b){var c=EB(a).querySelector(".ok-button");Q(c,!!b)}h.jd=function(a){var b=this.n();a?b.classList.add("edit"):b.classList.remove("edit");eA(this.h,a)};h.Hi=function(a){if(a.target.classList.contains("value"))a:{var b=this.h;if(a=Vh(a.target,null,"record-group"))for(var c=0;c<Qu(b);c++)if($(b,c).n()==a)break a}};h.th=function(){this.removeChild(this.h,!0);this.h.$();this.h=new EA(this.u(),this.g);this.Sd(this.h,1,!0);FB(this)};h.Zi=function(){FB(this)};h.$i=function(){this.refresh()};
function FB(a){var b=a.u(),c=a.n(),d=EB(a),e=ix(a.u());d.querySelector("span.icon").textContent=e?e.substr(0,2):"";var e=a.i,f=[];f.push({name:"edit",label:"Edit"},{name:IB,label:"Delete"},null);var g=a.Ef();if(0<g.length){for(var k=[],l=0;l<g.length;l++)k[l]={name:"new-"+g[l],label:g[l]};f.push({name:"new",label:"New",children:k})}k=a.Cf();if(0<k.length){for(var m=[],l=0;l<k.length;l++)m[l]={name:HB+"-"+k[l],label:k[l]};f.push({name:HB,label:"Duplicate to",children:m})}(0<g.length||0<k.length)&&
f.push(null);f.push({name:LB,label:"View details ..."},{name:JB,label:"Fields ..."});e.bg=gn(f);e.yb&&(f=e.yb.querySelector(".flyout-menu"),e.yb.removeChild(f),f=Pw(e.bg),f.classList.add("flyout-menu"),e.yb.appendChild(f));d=d.querySelector(".ok-button");Q(d,!1);RB(a);GA(a);fA(a.h);a.h.refresh();c.className=Js(b.g)?a.w()+" "+ix(b):a.w()+" "+ix(b)+" empty"}h.ra=function(){yB.m.ra.call(this)};
h.refresh=function(){Js(this.u().g)?this.n().classList.remove("empty"):this.n().classList.add("empty");RB(this);GA(this);this.h.refresh()};function SB(a,b){if(b){var c=a.h,d;for(d in b){var e;a:{if(e=Dw(c.u()).module_fields[d]){e=e.group||"";for(var f=0;f<Qu(c);f++){var g=$(c,f);if(g.u().g==e){e=g;break a}}}e=null}e&&e.xg(d,b[d])}}}h.toString=function(){return"ydn.crm.sugarcrm.ui.record.Record:"+this.u()};
function NB(a,b,c){var d=a.u(),e=null;c&&(e=gn(d.g.getData()),delete e.id,delete e._module,delete e.date_entered,delete e.date_modified);tx(d,new Is(kx(d.parent),b));e&&SB(a,e);a.jd(!0)}var IB="delete",LB="record-detail",HB="duplicate",JB="field-option";yB.prototype.Ef=function(){return[]};yB.prototype.Cf=function(){return[]};
function RB(a){var b=EB(a),c=a.u(),b=b.querySelector("a.title");Js(c.g)?(b.textContent=hx(c),b.href=rx(c),b.target=kx(c.parent),Sw(a.i,"duplicate",!1)):(b.innerHTML="",b.href="",Sw(a.i,"duplicate",!1),Sw(a.i,"duplicate",!1))};function TB(a,b){yB.call(this,a,b)}A(TB,yB);h=TB.prototype;h.w=function(){return TB.m.w.call(this)+" new-record"};h.G=function(){TB.m.G.call(this);var a=this.u();Z(this).listen(a.parent,"context-change",this.Ij);this.jd(!0)};
h.Ij=function(a){var b=this.u();if(a.l||a.p)Q(this.n(),!1),b=a.l?" record":" ",a.p&&(b+=" gdata"),window.console.info(this+" hiding on context change since "+b+" exists");else if(tx(b,new Is(kx(b.parent),ix(b))),this.jd(!0),a.h&&"s"==a.h.kind){var b=a.h.g||"",c=a.h.h||"";SB(this,{email1:b,full_name:c});UB(this,a.h);Q(this.n(),!0);window.console.info(this+" show on context change for "+(b||c))}else Q(this.n(),!1),a.h?window.console.info(this+" hiding on context change on none-search"):window.console.info(this+
" hiding on context change for null context")};function UB(a,b){if(b&&b.g){var c=b.g,d=tz("Querying social data for "+c);mA(b.g).A(function(a){if(a&&a.data.fc){uz(d,"Social data for "+c+" applied.");for(var b=this.h,g=!1,k=0;k<Qu(b);k++)g|=!!$(b,k).Ag(a);g&&OB(this,!0)}else uz(d,"Social data for "+c+" not available, dispatching crawlers now.")},function(a){uz(d,"Fail request due to "+(a.message?a.message:a))},a)}}h.Ef=function(){return es};h.Cf=function(){return[]};
h.jd=function(){TB.m.jd.call(this,!0)};h.toString=function(){return"NewRecordPanel"};function VB(a,b,c,d,e){jy.call(this,a,b,c,d,e||new $x("listbox"));this.N=this.ca();this.fa=null;this.Tf="listbox"}A(VB,jy);h=VB.prototype;h.ga=null;h.G=function(){VB.m.G.call(this);WB(this);XB(this)};h.hb=function(a){VB.m.hb.call(this,a);(a=this.Fb())?(this.N=a,WB(this)):YB(this)||this.ga&&ZB(this,this.ga.g[0]||null)};h.I=function(){VB.m.I.call(this);this.ga&&(this.ga.$(),this.ga=null);this.N=null};h.zd=function(a){ZB(this,a.target);VB.m.zd.call(this,a);a.stopPropagation();this.dispatchEvent("action")};
h.Ai=function(){var a=YB(this);VB.m.$b.call(this,a&&a.T());WB(this)};h.$c=function(a){var b=VB.m.$c.call(this,a);a!=b&&(this.ga&&this.ga.clear(),a&&(this.ga?Pu(a,function(a){$B(a);var b=this.ga,e=b.g.length;a&&(bB(b,a,!1),Jb(b.g,e,0,a))},this):aC(this,a)));return b};function ZB(a,b){if(a.ga){var c=YB(a);cB(a.ga,b);b!=c&&a.dispatchEvent("change")}}h.$b=function(a){if(null!=a&&this.ga)for(var b=0,c;c=this.ga.g[b]||null;b++)if(c&&"function"==typeof c.T&&c.T()==a){ZB(this,c);return}ZB(this,null)};
h.T=function(){var a=YB(this);return a?a.T():null};function YB(a){return a.ga?a.ga.jc:null}function aC(a,b){a.ga=new $A;b&&Pu(b,function(a){$B(a);var b=this.ga,e=b.g.length;a&&(bB(b,a,!1),Jb(b.g,e,0,a))},a);XB(a)}function XB(a){a.ga&&Z(a).listen(a.ga,"select",a.Ai)}function WB(a){var b=YB(a);Hv(a,b?b.Fb():a.N);var c=a.i.na(a.n());c&&a.g.ij(c)&&(null==a.fa&&(a.fa=hv(c,"label")),b=(b=b?b.n():null)?hv(b,"label"):a.fa,gv(c,"label",b),bC(a))}
function bC(a){var b=a.i;if(b&&(b=b.na(a.n()))){var c=a.F;b.id||(b.id=Hu(Gu.H()));fv(b,"option");gv(c,"activedescendant",b.id);a.ga&&(gv(b,"setsize",a.ga.g.length),gv(b,"posinset",1+dB(a.ga)))}}function $B(a){a.Tf=a instanceof Xx?"option":"separator"}h.ma=function(a,b){VB.m.ma.call(this,a,b);xv(this,64)?(this.h||this.$c(new by(this.g,this.Nc)),(this.h||null).Lb(this.ga?dB(this.ga):-1)):bC(this)};Cv("goog-select",function(){return new VB(null)});function cC(){}A(cC,iy);da(cC);cC.prototype.w=function(){return"goog-toolbar-menu-button"};function dC(a,b,c,d){VB.call(this,a,b,c||cC.H(),d)}A(dC,VB);Cv("goog-toolbar-select",function(){return new dC(null)});function eC(){}A(eC,ov);da(eC);h=eC.prototype;h.yc=function(){};function fC(a,b,c,d){var e=d.s("div",a.w()+"-inner-box"),f=d.s("div",a.w()+"-clear","\u00d7");a=d.s("div",a.w()+"-outer-box",[e,f]);d.appendChild(b,a);d.appendChild(e,c)}h.la=function(a,b){var c=a.g,d=b;b=c.s("div","goog-inline-block");c.ag(b,d);fC(this,b,d,c);eC.m.la.call(this,a,b);a.kc(d.value);return b};
h.va=function(a){var b=a.g,c=b.s("div","goog-inline-block "+rv(this,a).join(" "));a=b.s("input",{type:"text",value:a.ca()||"",disabled:!a.isEnabled()});fC(this,c,a,b);return c};h.xc=function(a){return"INPUT"==a.tagName&&(!a.type||"TEXT"==a.type.toUpperCase())};h.na=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};h.ph=function(a){return this.na(a.n())};h.Rf=ca;h.Qf=function(a){return a.isEnabled()};
h.Xc=ca;h.xd=function(a,b,c){eC.m.xd.call(this,a,b,c);1==b&&(a=this.na(a.n()))&&(a.disabled=c)};h.pb=ca;h.ac=function(a,b){var c=this.na(a);c&&(c.value=b)};h.ca=function(a){return(a=this.na(a))?a.value:null};h.w=function(){return"wgui-textinput"};function gC(a,b,c,d){Ev.call(this,a,b||eC.H(),c);this.h=!d;Fv(this,!1);this.Vd=!0;(b=this.n())&&this.i.se(b,!0);this.zb&=-256;this.qa(32,!1);a||this.kc("")}A(gC,Ev);h=gC.prototype;h.G=function(){gC.m.G.call(this);var a=yv(this);if(a){var b=this.t||(this.t=new Xu);Yu(b,a);Z(this).listen(b,"key",this.Na)}a=this.h;b=th(this.i.w()+"-clear",this.n());this.h=!!a;b&&(this.h?(Z(this).listen(b,"click",this.qh),Q(b,!0)):(Z(this).ha(b,"click",this.qh),Q(b,!1)))};
h.qh=function(a){a.preventDefault();Hv(this,"");this.dispatchEvent(new F("action",this))};h.ca=function(){return this.n()?this.i.ca(this.n()):null};h.T=function(){return this.ca()};h.Fb=function(){return this.ca()||""};function hC(a,b){this.result=b;gx.call(this,a,new Is(kx(a),b.storeName,b.record));Js(this.g)||iC(this)}A(hC,gx);function iC(a){a.parent.send("query",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]).B(function(a){a=a[0].result;if(a[0]){var c=is(this.result.storeName);tx(this,new Is(kx(this.parent),c,a[0]))}},a)}function jC(a,b){b&&(a.result=b,b.record?tx(a,new Is(kx(a.parent),b.storeName,b.record)):b.storeName&&t(b.primaryKey)&&iC(a))}
hC.prototype.clear=function(){this.Va()||(tx(this,null),this.result=null)};hC.prototype.toString=function(){return"ydn.crm.sugarcrm.model.ResultRecord:"+this.g};hC.prototype.Va=function(){return!Js(this.g)&&!this.result};function kC(a,b){Y.call(this,b);this.j=a;this.i=new Y(b);this.h=null;this.t=[];this.K=0}A(kC,Y);h=kC.prototype;h.w=function(){return"search-panel"};
h.Q=function(){kC.m.Q.call(this);var a=this.g,b=this.n();b.classList.add(this.w());var c=a.s("div","header");b.appendChild(c);this.h=new wB(null,null,a);for(var d=new by(a),e=0;e<es.length;e++)d.X(new Xx(es[e]),!0);e=new dC("Module",d,null,a);this.h.X(e,!0);d=new gC("");this.h.X(d,!0);this.h.render(c);e.Zc(!1);c=a.s("div","content");a=a.s("div","content-wrapper",[c]);b.appendChild(a);this.X(this.i,!0);b=d.n().querySelector("input");b.setAttribute("placeholder","Search ...");b.setAttribute("title",
"Search name, email, phone, id, title, description, etc.")};h.yj=function(a){a=a.module;ga(a)&&$(this.h,0).Zc(a)};h.G=function(){kC.m.G.call(this);var a=$(this.h,1);Z(this).listen(a,"action",this.Bi,!0)};function lC(a,b){if(b){for(var c=Qu(a.i),d=0;d<c;d++){var e=$(a.i,d).u();if(e.Va()){jC(e,b);return}}30<c?(e=$(a.i,0).u(),jC(e,b)):(c=new hC(a.u(),b),c=new yB(c,a.g),a.i.X(c,!0))}}
function mC(a,b,c,d){Dx(a.u(),b,c,d,!0).A(function(a){var b=a[0];b.result[0]&&(a=is(b.store),b=b.result[0],lC(this,{storeName:a,primaryKey:b.id,record:b,value:d,tokens:[{keyPath:c}]}));nC(this)},function(a){nC(this);throw a;},a)}
function oC(a,b){0==a.K&&(a.K=b);var c=100*(a.K-b)/a.K,d=$(a.h,1).n(),d=uh(document,"input",null,d)[0].style,e=c+.1,f=["rgb(255, 255, 255) 0%"];99>c&&(f[1]="rgb(135, 224, 253) "+c.toFixed(1)+"%",f[2]="rgb(255, 255, 255) "+e.toFixed(1)+"%");f.push("rgb(255, 255, 255) 100%");d.background="linear-gradient(to right, "+f.join(", ")+")"}
function nC(a){var b=a.t[0];if(b){b.Kc++;oC(a,4*(a.t.length-1)+(4-b.Kc));var c=a.u();0==b.Kc?mC(a,b.module,"id",b.bd):1==b.Kc?mC(a,b.module,"ydn$emails",b.bd):2==b.Kc?(c=b.bd.match(/\d/g),3>(c?c.length:0)?nC(a):mC(a,b.module,"ydn$phones",b.bd)):3==b.Kc?Ex(c,b.module,b.bd).A(function(a){a=a[0].fullTextResult;for(var b=a.length||0,c=0;c<b;c++)lC(this,a[c]);nC(this)},function(a){throw a;},a):(a.t.shift(),0<a.t.length&&nC(a))}}
h.Bi=function(){for(var a=$(this.h,1).ca(),b=Qu(this.i)-1;0<=b;b--)$(this.i,b).u().clear();this.K=0;if(a&&(a=a.trim(),2<=a.length)){b=(b=YB($(this.h,0)))?b.Fb():null;this.t.length=0;if(b)this.t[0]={module:b,bd:a,Kc:-1};else for(b=0;b<es.length;b++)this.t[b]={module:es[b],bd:a,Kc:-1};nC(this)}};h.R=function(){return th("content",this.n())};function pC(a,b){Y.call(this,b);this.j=a}A(pC,Y);h=pC.prototype;h.w=function(){return"detail-panel"};h.Q=function(){pC.m.Q.call(this);var a=this.g,b=this.n();b.classList.add(this.w());b.appendChild(a.s("div","header"));b.appendChild(a.s("div","content"))};h.R=function(){return this.n().querySelector(".content")};h.G=function(){pC.m.G.call(this)};h.clear=function(){this.R().innerHTML="";this.n().querySelector(".header").innerHTML=""};
function qC(a,b){var c=a.u().j.C(),d=Us(new Date),c=R.bound([c,d],[c,"\uffff"]);return{store:b,index:Ms(b),keyRange:c}}
function rC(a){a.n();a.u().send("activity-stream").A(function(a){var c=this.g,d=c.s("span");if(0<a.length)c=Ls(a[a.length-1].date_modified),c=qz(c.getTime())||c.toLocaleDateString(),d.textContent=a.length+" records updated since "+c;else{d.appendChild(Xh(c,"No activity? Have you "));var e=c.s("a",{href:chrome.extension.getURL("setup.html")},"setup");d.appendChild(e);d.appendChild(Xh(c,"?"))}c=this.n().querySelector(".header");c.innerHTML="";c.appendChild(d);for(d=0;d<a.length;d++){var c=a[d],e=this.g,
f=this.u(),g=c._module,k=new Is(kx(f),g,c),l=e.s("div","icon small",c._module.substr(0,2)),m=e.s("span"),n=k.value("modified_user_id"),p=k.value("created_by");n?(n=e.s("a",{href:sx(f,"Users",n),target:"_blank"},k.value("modified_user_name")),m.appendChild(n),m.appendChild(Xh(e," "))):p&&(n=e.s("a",{href:sx(f,"Users",p),target:"_blank"},k.value("created_by_name")),m.appendChild(n),m.appendChild(Xh(e," ")));m.appendChild(Xh(e,c.date_modified==c.date_entered?"created ":"updated "));f=e.s("a",{href:sx(f,
k.module,k.C()),target:"_blank"},Os(k));m.appendChild(f);g=g.replace(/ies$/,"y").replace(/s$/,"");m.appendChild(Xh(e," "+g+""));g=Ls(c.date_modified);g=qz(g.getTime())||"on "+g.toLocaleDateString();m.appendChild(Xh(e," "+g+"."));e=e.s("div",null,[l,m]);e.className="detail-item record-header "+c._module;this.R().appendChild(e)}},function(a){throw a;},a)}
function sC(a,b){var c=qC(a,b);a.u().send("values",c).A(function(a){var c=this.g.s("span");c.textContent=a.length+" upcoming "+b;var f=this.n().querySelector(".header");f.innerHTML="";f.appendChild(c);for(c=0;c<a.length;c++){var f=a[c],g=b,k=this.g,l=this.u(),m=kx(l),n=new Is(m,g,f),p=k.s("span"),g="Calls"==g?"call":"Tasks"==g?"finish":"Meetings"==g?"meet":"Opportunities"==g?"close":"do",g=g.charAt(0).toUpperCase()+g.substr(1)+" ";p.appendChild(Xh(k,g));l=k.s("a",{href:sx(l,n.module,n.C()),target:m},
Os(n));p.appendChild(l);n=n.g?Ls(n.g[Ns(n.module)]):new Date("NaN");n=qz(n.getTime())||"on "+n.toLocaleDateString();p.appendChild(Xh(k," "+n+"."));k=k.s("div",null,[p]);k.className="detail-item record-header "+f._module;this.R().appendChild(k)}},function(a){throw a;},a)};function tC(a,b){Y.call(this,b);this.j=a;this.h=new mw(kw,void 0,b);this.i=new pC(a,b);this.search=new kC(a,b);var c=new gx(a,new Is(kx(a),"Leads"));this.t=new TB(c,b)}A(tC,Y);h=tC.prototype;h.w=function(){return"activity-panel"};h.R=function(){return this.n().querySelector(".content")};
h.Q=function(){tC.m.Q.call(this);var a=this.g,b=this.n();kv(b,this.w());var c=a.s("div","content");b.appendChild(c);this.X(this.h,!0);b=a.s("div");c=Ow("magnifying-glass");b.appendChild(c);b=new Ov(b);b.Aa("Search");this.h.X(b,!0);b.R().classList.add("activity-search");b=a.s("div");c=Ow("plus");b.appendChild(c);b=new Ov(b);b.Aa("Create a new record");this.h.X(b,!0);b.R().classList.add("new");b=a.s("div");c=Ow("rss");b.appendChild(c);b=new Ov(b);b.Aa("Activity feed");this.h.X(b,!0);b.R().classList.add("activity-feed");
for(b=0;b<hs.length;b++){var c=hs[b],d=Ow(c),d=a.s("div","activity-tab-label",d),d=new Ov(d);d.Aa(c);this.h.X(d,!0);d.R().classList.add(c)}this.X(this.search,!0);this.X(this.t,!0);this.X(this.i,!0)};h.G=function(){tC.m.G.call(this);var a=this.u(),b=Z(this);b.listen(a,qt,this.Rh);b.listen(this.h,"select",this.dj);b.listen(this.h,"unselect",this.ej);Q(this.n(),!1);Q(this.t.n(),!1);Q(this.i.n(),!1);a.isLogin()&&this.Rh()};h.ej=function(){this.i.clear()};
h.dj=function(){var a;a=this.h;a=Su(a,a.eb);0==a?(Q(this.search.n(),!0),Q(this.t.n(),!1),Q(this.i.n(),!1)):1==a?(Q(this.search.n(),!1),Q(this.t.n(),!0),Q(this.i.n(),!1)):(Q(this.search.n(),!1),Q(this.t.n(),!1),Q(this.i.n(),!0),2==a?rC(this.i):sC(this.i,hs[a-3]))};h.Rh=function(){var a=this;setTimeout(function(){uC(a)},2E3);setTimeout(function(){vC(a)},3E3)};
function uC(a){a.u().send("activity-stream").A(function(a){if(0<a.length){var c=Ls(a[a.length-1].date_modified);Q(this.n(),!0);a=a.length;var d=$(this.h,2);d.R();0<a?(c=qz(c.getTime())||c.toLocaleDateString(),d.Aa(a+" records updated since "+c)):d.Aa("")}},function(a){throw a;},a)}
function vC(a,b){var c=b||0,d=hs[c];if(d){var e=qC(a.i,d);a.u().send("keys",e).A(function(a){vC(this,c+1);Q(this.n(),!0);a=a.length;var b=hs.indexOf(d),b=$(this.h,b+3);b.R().querySelector(".activity-tab-label");a?b.Aa(a+" upcoming "+d):b.Aa("No upcoming "+d)},function(a){throw a;},a)}};function wC(a,b){Y.call(this,b);this.j=a}A(wC,Y);h=wC.prototype;h.logger=L("ydn.crm.sugarcrm.ui.Header");h.w=function(){return"sugar-header"};h.R=function(){return this.n().querySelector(".sugar-header-content")};
h.Q=function(){wC.m.Q.call(this);var a=this.n(),b=this.u(),c=this.g;kv(a,this.w());var d=c.s("a");d.textContent=kx(b);d.href=Bx(b);var e=Ow("sugarcrm"),e=c.s("div","icon-box",e),d=c.s("div",{"class":"main-title",title:"SugarCRM"},[e,d]);a.appendChild(d);d=[];e=chrome.extension.getURL("option-page.html")+"#credentials";e=chrome.extension.getURL("host-permission.html")+"?"+kx(b);e=c.s("a",{className:"maia-button blue",href:e,target:"host-permission"},"Grant host permission");e.setAttribute("title",
"Your permission is required to connect your server from this extension. Without permission request to server will be slow.");d.push(e);d=c.s("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.s("input",{name:"username",type:"text"}),e=c.s("div",null,[e]),f=c.s("input",{name:"password",type:"password"}),f=c.s("div",null,[f]),g=c.s("div","message"),e=c.s("div","login-form",[e,f,g]),f=c.s("div","sugar-header-content");a.appendChild(e);a.appendChild(f);Q(d,!b.about.hostPermission);Q(e,!b.isLogin());
Q(f,!!this.u().about.hostPermission);a=new tC(b,c);this.X(a,!0)};h.G=function(){wC.m.G.call(this);var a=this.n(),b=Z(this),c=this.n().querySelector(".host-permission"),a=a.querySelector(".login-form"),a=new Xu(a);b.listen(a,"key",this.Si);c=c.querySelector("a");b.listen(c,"click",rp,!0);b.listen(this.u(),"hag",this.Ni);b.listen(this.u(),qt,this.Vi)};h.Vi=function(){var a=this.n().querySelector(".login-form");Q(a,!this.u().isLogin())};
h.Ni=function(){var a=this.n().querySelector(".host-permission"),b=!!this.u().about.hostPermission;Q(a,!b);Q(this.R(),b)};h.Si=function(a){if(13==a.g){var b=this.n().querySelector(".login-form"),c=this.u();a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";Cx(c,a,d).A(function(){c.isLogin()?(e.textContent="",Q(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};function xC(a,b){Y.call(this,b);this.j=a}A(xC,Y);h=xC.prototype;h.w=function(){return"sugar-panel"};h.R=function(){return this.n().querySelector(".sugar-panel-content")};h.Q=function(){xC.m.Q.call(this);var a=this.g,b=this.n();kv(b,this.w());var c=a.s("div","sugar-panel-head"),a=a.s("div","sugar-panel-content");b.appendChild(c);b.appendChild(a)};h.G=function(){xC.m.G.call(this);Z(this).listen(this.u(),["gdata-change"],this.Jj)};h.Jj=function(){var a=this.u(),a=!(!a.i||!a.i.g);Q(this.R(),a)};
h.logger=L("ydn.crm.sugarcrm.ui.SimpleSugarPanel");function yC(a,b){xC.call(this,a,b)}A(yC,xC);yC.prototype.Q=function(){yC.m.Q.call(this);var a=this.g,b=this.n().querySelector(".sugar-panel-head"),c=this.R();Q(c,!1);(new wC(this.u(),a)).render(b)};yC.prototype.logger=L("ydn.crm.sugarcrm.ui.SugarPanel");function zC(a){this.g=this.h=null;this.M=(this.i=!!a)?"&#x25BC;":"&#x25B2;";this.j=this.i?"&#x25B2;":"&#x25BC;";this.l=this.p.bind(this)}
zC.prototype.render=function(a){this.h=document.createElement("div");this.g=document.createElement("span");var b=document.createElement("div");this.h.className="status-base";b.className="status-panel";this.g.className="status-bar";var c=document.createElement("span"),d=document.createElement("a"),e=document.createElement("span"),f=document.createElement("span");f.className="status-detail-button";f.innerHTML=this.j;f.setAttribute("title","Show previous messages");this.g.appendChild(c);this.g.appendChild(d);
this.g.appendChild(e);c=document.createElement("div");c.className="status-message";c.appendChild(this.g);c.appendChild(f);this.h.appendChild(c);this.h.appendChild(b);a.appendChild(this.h);f.onclick=this.t.bind(this)};zC.prototype.t=function(){this.h.querySelector(".status-panel").classList.contains("open")?AC(this,!1):AC(this,!0)};
function AC(a,b){var c=a.h.querySelector(".status-detail-button");c.innerHTML=b?a.M:a.j;var d=a.h.querySelector(".status-panel");if(b){d.classList.add("open");c.classList.add("open");c.setAttribute("title","Hide message panel");c=a.h.querySelector(".status-panel");c.innerHTML="";for(var d=document.createDocumentFragment(),e=sz.g.length-1;0<=e;e--){var f=sz.g[e];if(!f)break;var g=document.createElement("div");if(f.title){var k=document.createElement("span");k.textContent=f.title;g.appendChild(k)}f.Ec&&
(k=document.createElement("a"),k.textContent=f.Ae,k.href=f.Ec,f.Ed&&(k.setAttribute("title",f.Ed),k.setAttribute("target","_blank")),g.appendChild(k));f.update&&(k=document.createElement("span"),k.textContent=f.update,g.appendChild(k));d.appendChild(g)}c.appendChild(d);a.i&&(c.style.marginTop=-18-c.clientHeight+"px");document.body.addEventListener("click",a.l,!0)}else d.classList.remove("open"),c.classList.remove("open"),c.setAttribute("title","Show previous messages"),d.innerHTML="",document.body.removeEventListener("click",
a.l,!0)}zC.prototype.p=function(a){var b=a.target,c=this.h.querySelector(".status-panel");b&&b instanceof Element&&b!=c&&!c.contains(b)&&(c.classList.contains("open")&&(a.preventDefault(),a.stopPropagation()),AC(this,!1))};
zC.prototype.o=function(a,b){this.g&&(this.g.children[0].textContent=b.title+" ",b.Ec?(this.g.children[1].textContent=b.Ae,this.g.children[1].href=b.Ec,this.g.children[1].title=b.Ed,this.g.children[1].style.display=""):this.g.children[1].style.display="none",this.g.children[2].textContent=" "+(b.update||""))};function BC(a){Y.call(this,a)}A(BC,Y);h=BC.prototype;h.w=function(){return"sidebar"};
h.Q=function(){BC.m.Q.call(this);var a=this.n(),b=this.g;a.classList.add(this.w());var c=b.s("div","head"),d=b.s("div","content");a.appendChild(c);a.appendChild(d);a=b.s("div","no-sugar-panel");b=b.createElement("a");b.textContent="Setup SugarCRM";b.href=chrome.extension.getURL("setup.html")+"#modal";b.className="sugarcrm-link maia-button blue";b.setAttribute("data-window-height","600");b.setAttribute("data-window-width","800");a.appendChild(b);Q(a,!1);c.appendChild(a)};h.R=function(){return this.n().querySelector(".content")};
function CC(a){return a.n().querySelector(".head")}h.G=function(){BC.m.G.call(this);var a=Z(this),b=CC(this).querySelector("a.sugarcrm-link");a.listen(b,"click",rp,!0)};h.Lc=function(){zz.H().isLogin()?Q(this.R(),!0):Q(this.R(),!1)};h.logger=L("ydn.crm.ui.SugarListPanel");function DC(a,b){var c=ze("sugarcrm",b).send("details");zz.H();return c.B(function(a){for(var c=0;c<a.modulesInfo.length;c++)Ez(a.modulesInfo[c]);a=new Gx(a.about,a.modulesInfo,0,a.serverInfo);EC(this,b)||this.hf(a)},a)}
h.hf=function(a){a=new xC(a,this.g);this.X(a,!0)};function EC(a,b){for(var c=0;c<Qu(a);c++){var d=$(a,c);if(d instanceof xC&&kx(d.u())==b)return!0}return!1}
function FC(a,b){var c=CC(a).querySelector(".no-sugar-panel");c.querySelector("a");if(zz.H().isLogin()){0==b.length?Q(c,!0):Q(c,!1);for(var c=[],d=Qu(a)-1;0<d;d--){var e=$(a,d);e instanceof xC&&!(0<=b.indexOf(kx(e.u())))&&(ge(a.logger,"disposing sugar panel "+kx(e.u())),e.u().$(),a.removeChild(e,!0),e.$())}for(d=0;d<b.length;d++)EC(a,b[d])||(ge(a.logger,"adding sugar panel "+b[d]),c.push(DC(a,b[d])));Bn(c)}else Q(c,!1),bc(!1)};function GC(a){Y.call(this,a)}A(GC,BC);h=GC.prototype;h.logger=L("ydn.crm.ui.SidebarPanel");
h.Q=function(){GC.m.Q.call(this);var a=this.g,b=this.n(),c=b.querySelector(".head"),d=a.s("div","setup-panel"),e=a.createElement("a");e.textContent="Setup";e.href=chrome.extension.getURL("setup.html")+"#modal";e.className="maia-button blue";e.setAttribute("data-window-height","600");e.setAttribute("data-window-width","800");d.appendChild(e);Q(d,!1);e=a.s("div","invalid-login-panel");c.appendChild(d);c.appendChild(e);a=a.s("div","sidebar-status");c=new zC;c.render(a);sz.h.push(c);b.insertBefore(a,
b.firstElementChild)};h.G=function(){GC.m.G.call(this);var a=Z(this),b=CC(this).querySelector("div.setup-panel a");a.listen(b,"click",rp,!0)};h.hf=function(a){a=new yC(a,this.g);this.X(a,!0)};h.Lc=function(){GC.m.Lc.call(this);var a=zz.H(),b=CC(this).querySelector(".setup-panel");a.isLogin()?(Q(b,!1),b=CC(this).querySelector(".invalid-login-panel"),Az(a)?Q(b,!1):(gi(b,qw,{Tj:a.g.email}),Q(b,!0))):Q(b,!0)};function HC(){var a;a:{var b={vj:chrome.extension.getURL("option-page.html")};a=qh().createElement("DIV");b=hi(pw(b||ii));b.match(ji);a.innerHTML=b;if(1==a.childNodes.length&&(b=a.firstChild,1==b.nodeType)){a=b;break a}}this.g=a;this.h=new GC}
HC.prototype.i=function(){this.g.classList.toggle("open");var a=this.g.querySelector(".hud-button").children[1];this.g.classList.contains("open")?(a.classList.remove("arrow-drop-left"),a.classList.add("arrow-drop-right")):(a.classList.add("arrow-drop-left"),a.classList.remove("arrow-drop-right"))};
HC.prototype.render=function(){document.body.appendChild(this.g);var a=this.g.querySelector(".hud-popup"),b=this.g.querySelector(".hud-button");bd(b,"click",this.i,!1,this);a=a.querySelector(".popup-content");this.h.render(a);this.g.querySelector(".logo-box").appendChild(Ow("ydn-logo"));this.g.querySelector(".arrow-box").appendChild(Ow("arrow-drop-right"))};function IC(a){var b=zz.H();b.isLogin()&&!Az(b)?a.g.classList.add("invalid"):a.g.classList.remove("invalid");a.h.Lc()};function JC(a){this.g=a||KC()}JC.prototype.logger=L("ydn.crm.inj.AppRenderer");
function KC(){var a=document.createElement("div");a.id="root-panel";a.className="inj ydn-crm";document.body.appendChild(a);Q(a,!1);var b=document.createElement("div");b.className="container";a.appendChild(b);for(var c=0;3>c;c++){var d=document.createElement("div");b.appendChild(d)}b=document.createElement("div");c=document.createElement("a");c.textContent="Setup";c.href=chrome.extension.getURL("setup.html");c.className="setup-link";b.appendChild(c);a.firstElementChild.appendChild(b);Q(b,!1);return a}
JC.prototype.n=function(){return this.g};JC.prototype.h=function(){};function LC(a){this.g=a||KC();this.i=!1}A(LC,JC);
LC.prototype.h=function(a){if(!a)this.i=!1,Q(this.g,!1);else if(!this.i){for(var b,c=a,d=0;4>d;d++)if(c&&c.parentElement&&(c=c.parentElement,c.nextElementSibling&&"DIV"==c.nextElementSibling.tagName)){var c=c.parentElement,d=c.lastElementChild,e=!!d.querySelector("a[href]");b=document.createElement("div");e&&c.parentElement.contains(d)?c.parentElement.insertBefore(b,d):c.appendChild(b);break}b||(J(this.logger,"usual root position is not available, locating on second best position"),c=a.ownerDocument,
b=c.createElement("td"),b.setAttribute("colspan","2"),c=c.createElement("tr"),c.className="widget-topraw",c.appendChild(b),(a.querySelector("tbody")||a).appendChild(c));a=this.g;a.parentElement&&a.parentElement.removeChild(a);b.appendChild(a);this.i=!0;Q(a,!0)}};document.createElement("input");function MC(a,b,c,d){Xx.call(this,a,b,c,d)}A(MC,Xx);Cv("goog-combobox-item",function(){return new MC(null)});function NC(){}A(NC,iy);da(NC);NC.prototype.na=function(a){return a?uh(document,"*",this.w()+"-caption",a)[0]:null};NC.prototype.xc=function(a){return"DIV"==a.tagName};NC.prototype.od=function(a,b){var c=this.w();return b.s("div","goog-inline-block ",b.s("div",[c+"-caption","goog-inline-block"],a),b.s("div",[c+"-dropdown","goog-inline-block"]))};NC.prototype.w=function(){return"goog-css3-button"};Cv("goog-css3-menu-button",function(){return new jy(null,null,NC.H())});function OC(){pd.call(this);this.h=this.g=null}A(OC,pd);OC.prototype.I=function(){this.g&&(this.g.$(),this.h=this.g=null)};OC.prototype.n=function(){return this.h};OC.prototype.i=function(a){var b=this.n(),c=this.n();(c.classList.contains("error")?PC:c.href?"n":"v")==PC?(a.preventDefault(),b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):this.dispatchEvent(a)};var PC="e";
function QC(a,b,c){a=a.n();a.classList.remove("error");c?a.href=c:a.removeAttribute("href");b?(a.textContent=b,Q(a,!0)):Q(a,!1);a.removeAttribute("title")}function RC(a,b){var c=a.n();c.classList.add("error");c.href="#error";c.textContent="error";b&&b instanceof Error&&(b=b.name+": "+b.message);c.setAttribute("title","Click to report error"+(b?" for "+b:""))};function SC(a,b){Y.call(this);this.j=a;this.parent=b||null;this.h=new OC}A(SC,Y);h=SC.prototype;h.logger=L("ydn.crm.ui.GmailCmd");h.w=function(){return"gmail-cmd-panel"};h.Q=function(){SC.m.Q.call(this);var a=this.n(),b=this.g;a.classList.add(this.w());var b=b.s("a",{"class":"archive"},"."),c=this.h;c.h=b;c.g=new Qf(c);c.g.listen(b,"click",c.i,!0);a.appendChild(b)};
function TC(a,b){var c=sx(a.u(),"Emails",b.id);QC(a.h,"View",c);c=a.h.n();c.setAttribute("target","gmail");c.setAttribute("title","View archived email in SugarCRM")}function UC(a){QC(a.h,"Archive","#archive");a.h.n().setAttribute("title","Archive this email message to SugarCRM")}
function VC(a){QC(a.h,".");setTimeout(function(){QC(a.h,"..");var b=WC(a.n());b.kg?(QC(a.h,"..."),a.u().send("query",[{store:"Emails",index:"message_id",key:b.kg}]).A(function(b){(b=b[0]&&b[0].result?b[0].result[0]:null)?TC(a,b):UC(a)},function(b){UC(a);throw b;})):1<b.Zf.length?UC(a):RC(a.h,"gmail message cannot be parsed")},100)}h.G=function(){SC.m.G.call(this);Z(this).listen(this.h,"click",this.Ci);VC(this)};
function WC(a){var b="",c="",d="",e="",f="",g=Vh(a,"TR");if(b=g.children[0].querySelector("span[email]"))b=b.getAttribute("email");else return J(dq,"cannot sniff sender email"),null;if(a=g.children[1].querySelector("span[alt]"))a=a.getAttribute("alt"),a=new Date(a.replace(" at",""));else return J(dq,"cannot sniff date sent"),null;var k=g.nextElementSibling;if(!k||"TR"!=k.tagName)return J(dq,"to email address TR expect after title TR"),null;for(var l=k.querySelectorAll("span[email]"),k=0;k<l.length;k++)c&&
(c+=", "),c+=l[k].getAttribute("email");for(var g=Vh(g,"TABLE"),m=g.parentElement.nextElementSibling,k=0;m&&10>k;k++)if(l=m.querySelector("div[style]")){d=l.parentElement.className.split(/\s/);k=d.map(function(a){return a.length});k=k.indexOf(Math.max.apply(Math,k));10<d[k].length&&(e=d[k].substring(1),"m"!=d[k].charAt(0)&&he(dq,"not start with m? "+d[k]));d=l.innerHTML;break}else m=m.nextElementSibling;g=Vh(g.parentElement,"TABLE");for(k=0;g&&10>k&&"presentation"!=g.getAttribute("role");k++)g=Vh(g,
"TABLE");"presentation"==g.getAttribute("role")?(g=g.querySelector("h2"))?f=g.textContent:J(dq,"email subject cannot be sniff"):J(dq,"expect a presentation role TABLE");g=zz.H().g.email;return{pi:b,Bj:c,eh:a,Zf:d,jj:g,kg:e,zj:f}}
h.Ci=function(a){if(wa(a.target.href,"#archive")){a.preventDefault();QC(this.h,"archiving...");var b=a=void 0,c=this.parent?XC(this.parent):null;c&&(a=c.module,b=c.id);(c=WC(this.n()))?Fx(this.u(),c,a,b).A(function(a){TC(this,a)},function(a){RC(this.h,a)},this):RC(this.h,"Cannot gather email message")}};function YC(a){this.h=a;this.g=[]}YC.prototype.logger=L("ydn.crm.ui.GmailCmdInjector");YC.prototype.i=function(a){for(var b=0;b<a.length;b++){var c=a[b].target;if("Reply"==c.getAttribute("data-tooltip")){var d;a:{for(d=0;d<this.g.length;d++)if(!document.body.contains(this.g[d].n())){this.g[d].Z&&this.g[d].ra();d=this.g[d];break a}d=new SC(this.h);this.g.push(d)}var e=document.createElement("span");c.parentElement.insertBefore(e,c);d.render(e)}}};function ZC(a,b){Y.call(this,b);this.j=a;for(var c=[],d=0;d<gs.length;d++){var e=gs[d];c[d]={label:e,name:e}}this.h=new Nw({className:"menu"},[{name:"add",label:"Add to",children:c},null,{label:"Sync",name:"sync"}])}A(ZC,Y);h=ZC.prototype;h.logger=L("ydn.crm.ui.gmail.ContactPanel");
h.Q=function(){ZC.m.Q.call(this);var a=this.n();a.classList.add("gmail-contact-panel");var b=this.g,c=Ow("google","icons-small"),c=b.s("div","badge",c);c.setAttribute("title","Gmail contact");var d=b.s("a","title center");d.setAttribute("title","Open in Gmail contact");d.setAttribute("target","gmail");b=b.s("div","head flex-bar",[c,d]);this.h.render(b);a.appendChild(b)};
h.G=function(){ZC.m.G.call(this);Z(this).listen(this.u(),["context-change"],this.Oj);var a=this.n().getElementsByClassName("more-menu")[0];Z(this).listen(a,"click",this.Pj)};h.Oj=function(){this.refresh()};
h.refresh=function(){var a=this.u(),b=a.h;if(b){var c=this.n().querySelector(".head").querySelector(".title"),d;d=b.getData();d=Nc(d,"gd$name","gd$fullName","$t")||"";c.textContent=d;c.href="#contact/"+tr(b);Q(this.n(),!0);b=!!a.Ib();Sw(this.h,"add",!b);b?(Sw(this.h,"sync",!0),Mx(a)?Tw(this.h,"Remove sync"):Tw(this.h,"Sync")):(Sw(this.h,"sync",!1),Tw(this.h,"Sync"))}else Q(this.n(),!1)};h.Pj=function(a){if(a=Qw(a))"sync"==a?(a=this.u(),a.Ib()?Mx(a)?$C(this):aD(this):$C(this)):bD(this,a)};
function aD(a){a=a.u();var b=tz("Linking gmail contact...");Hx(a).A(function(){uz(b,"Linked ")},function(a){window.console.error(a.stack||a);uz(b,"Linked failed "+(a.message||"."),"e")})}function $C(a){a=a.u();var b=a.Ib(),c=" all records.";if(b)var d=b.module,b=b.C(),c=d+" record "+b;var e=tz("Removing gmail contact link to "+c);Ix(a).A(function(){uz(e,"Removed link from "+c)},function(a){window.console.error(a.stack||a);uz(e,"Removing link failed "+(a.message||"."),"e")})}
function bD(a,b){var c=a.u(),d=tz("Adding... to "+b),e;c.h?(e=Jx(c,b),e=e.B(function(){uz(d,"Linking GData and SugarCRM...");return Hx(c)},a)):e=Px(c,b);e.A(function(){uz(d,"Added.")},function(a){a=a instanceof Error?a.name+" "+a.message:y(a)?Ci(a):a;uz(d,a,"","e");throw Error(a);},a)};function cD(a,b){yB.call(this,a,b)}A(cD,yB);h=cD.prototype;h.w=function(){return cD.m.w.call(this)+" new-record"};h.G=function(){cD.m.G.call(this);var a=this.u();Z(this).listen(a.parent,"context-change",this.Hj)};h.Hj=function(a){var b=this.u();a.l?tx(b,a.l):a.l||tx(b,new Is(kx(b.parent),ix(b)))};h.Ef=function(){return[]};h.Cf=function(){return gs};function dD(a,b){xC.call(this,a,b);var c=this.h=new YC(a),d=document.body;(new MutationObserver(c.i.bind(c))).observe(d,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["data-tooltip"]})}A(dD,xC);
dD.prototype.Q=function(){dD.m.Q.call(this);var a=this.g;this.n().querySelector(".sugar-panel-head");this.R();var b=this.u(),c=new gx(b,new Is(kx(b),"Leads")),c=new TB(c,a);this.X(c,!0);c=new ZC(b,a);this.X(c,!0);b=new gx(b,new Is(kx(b),"Leads"));a=new cD(b,a);this.X(a,!0)};dD.prototype.logger=L("ydn.crm.sugarcrm.ui.ContextSugarPanel");function XC(a){for(var b=0;b<Qu(a);b++){var c=$(a,b).u();if(Js(c.g))return{module:ix(c),id:c.C()}}return null};function eD(a){Y.call(this,a);this.h=null;this.i=new pi(this.Cj,500,this)}A(eD,BC);h=eD.prototype;h.logger=L("ydn.crm.gmail.ContextSidebar");
h.Q=function(){eD.m.Q.call(this);var a=this.g,b=this.n();b.classList.add("context-sidebar");var c=b.querySelector(".head"),d=a.s("div","sidebar-status"),e=new zC(!0);e.render(d);sz.h.push(e);b.appendChild(d);b=a.s("div","toolbar flex-bar");d=a.s("input","target-email");d.setAttribute("list","all-emails");b.appendChild(d);d=Ow("search");a=a.s("span","search svg-button");a.appendChild(d);b.appendChild(a);c.appendChild(b);document.getElementById("all-emails")||(c=document.createElement("datalist"),c.id=
"all-emails",document.body.appendChild(c))};h.G=function(){eD.m.G.call(this);var a=Z(this),b=this.n().querySelector(".toolbar"),c=b.querySelector("input"),b=b.querySelector(".search");a.listen(c,"change",this.Fh);a.listen(b,"click",this.Fh)};h.Fh=function(){var a=this.n().querySelector("input.target-email").value,b=0<a.indexOf("@")?a:void 0,a=b?void 0:a,c=zz.H().g.email,b=new zw(c,b,a);b.kind="s";this.Qe(b)};
h.Cj=function(){for(var a=document.querySelectorAll("span[email]"),b=[],c=a.length-1;0<=c;c--){var d=a[c].getAttribute("email");-1==b.indexOf(d)&&-1==d.indexOf("daemon@")&&-1==d.indexOf("noreply@")&&b.push(d)}a=document.getElementById("all-emails");a.innerHTML="";for(c=0;c<b.length;c++)d=document.createElement("option"),d.value=b[c],a.appendChild(d)};h.I=function(){this.i.$();this.i=null;eD.m.I.call(this)};
h.hf=function(a){var b=new dD(a,this.g);this.X(b,!0);!this.h&&a.isLogin()&&(he(this.logger,"compose template initialized."),this.h=new hz(a))};h.Qe=function(a){for(var b=Qu(this),c=0;c<b;c++){var d=$(this,c);d instanceof dD&&(d.u().update(a),qi(this.i))}};h.Lc=function(){eD.m.Lc.call(this)};function fD(){this.g=null}fD.prototype.render=function(a){this.g=document.createElement("div");this.g.className="simple-status-bar";var b=document.createElement("span"),c=document.createElement("a"),d=document.createElement("span");this.g.appendChild(b);this.g.appendChild(c);this.g.appendChild(d);a.appendChild(this.g)};
fD.prototype.o=function(a,b){this.g&&(this.g.children[0].textContent=b.title+" ",b.Ec?(this.g.children[1].textContent=b.Ae,this.g.children[1].href=b.Ec,this.g.children[1].title=b.Ed,this.g.children[1].style.display=""):this.g.children[1].style.display="none",this.g.children[2].textContent=" "+(b.update||""))};function gD(a,b,c){Xx.call(this,a,b,c);this.qa(8,!0)}A(gD,Xx);gD.prototype.Xa=function(){return this.dispatchEvent("action")};Cv("goog-option",function(){return new gD(null)});function hD(){}A(hD,gy);da(hD);hD.prototype.w=function(){return"goog-toolbar-button"};function iD(a,b,c){fy.call(this,a,b||hD.H(),c)}A(iD,fy);Cv("goog-toolbar-button",function(){return new iD(null)});function jD(a,b,c,d){jy.call(this,a,b,c||cC.H(),d)}A(jD,jy);Cv("goog-toolbar-menu-button",function(){return new jD(null)});function kD(a,b){Zx.call(this,a||uB.H(),b)}A(kD,Zx);Cv("goog-toolbar-separator",function(){return new kD});function lD(a,b,c){tB.call(this,a,b||hD.H(),c)}A(lD,tB);Cv("goog-toolbar-toggle-button",function(){return new lD(null)});function mD(){return'<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>'}
mD.g="templ.ydn.crm.sugarcrm.syncPanel";function nD(){}A(nD,ov);da(nD);nD.prototype.w=function(){return"record"};nD.prototype.va=function(a){return nD.m.va.call(this,a)};function oD(a,b){Ev.call(this,null,null,a);this.j=b}A(oD,Ev);Av(oD,nD);function pD(a,b){Y.call(this,a);this.j=b;this.i=new Y(a);this.h=new Y(a)}A(pD,Y);pD.prototype.R=function(){return th("content",this.n())};pD.prototype.Q=function(){pD.m.Q.call(this);var a=this.n();gi(a,mD,{});Ou(new wB,th("goog-toolbar",a));this.X(this.i,!0);this.X(this.h,!0);Q(this.h.n(),!1)};pD.prototype.G=function(){pD.m.G.call(this);this.n()};pD.prototype.refresh=function(){};function qD(){xe("gmail");tz("Starting 1.1.0...");this.g=new LC;this.h=new eD;this.h.render(this.g.g.firstElementChild.children[1]);this.l=new Uf(400);bd(this.l,Wf,this.gj,!0,this);this.j=0;this.p="";var a=this.history=new Fu,b=Re(new De(document.location.href))+"/";a.wj=b;bd(this.history,"navigate",this.Mi,!1,this);this.t=null;this.o=zz.H();this.i=new HC}h=qD.prototype;h.logger=L("ydn.crm.inj.App");
h.gj=function(){this.j++;this.p!=location.href&&(J(this.logger,"url already changed"),this.l.stop());40<this.j&&(J(this.logger,"sniff give up after "+this.j),this.l.stop());var a;a=(a=document.querySelector('table[role="presentation"]'))?a.querySelector("tr").children[2].querySelector("table"):null;a&&this.g&&this.g.h(a);if(a=rD(a,5<this.j))this.l.stop(),this.h.Qe(a)};
function rD(a,b){if(!a)return null;var c=a.querySelector("img[jid]");if(!c){if(b){var d=a.querySelector("span[title]");if(d){var e=d.getAttribute("title").trim();if(0<e.length&&(d=document.querySelector('span[name="'+e+'"][email]')))return c=zz.H().g.email,d=d.getAttribute("email"),new zw(c,d,e)}}return null}for(d=c.getAttribute("jid");c&&"TD"!=c.tagName;)c=c.parentElement;e=c.nextElementSibling.querySelector("span[title]").getAttribute("title");c=zz.H().g.email;return new zw(c,d,e)}
h.Mi=function(a){if(a.h!=this.t)if(a=(this.t=a.h)||location.hash,"#"==a.charAt(0)&&(a=a.substr(1)),a=/^contact(\/\[w\W]+)?\/[a-f\d]{2,18}$/.test(a)?"cd":/^contacts(\/\[w\W]+)?/.test(a)?"ct":/compose=new$/.test(a)?"cp":/^(label\/)?[\w\+]+$/.test(a)?"in":/^(label\/)?[\w\+]+\/[a-f\d]{10,18}$/.test(a)?"em":"un","cp"==a){a=this.h;if(a.h){a=a.h;var b=document.querySelector('form[enctype="multipart/form-data"]');b?(b=(b=iz(b))?(b=b.querySelector("tbody").lastElementChild.firstElementChild.firstElementChild.firstElementChild.lastElementChild.querySelector("table"))?
b.querySelector("td:last-child"):null:null,b?(mz(a,b),a=!0):(J(a.logger,"compose toolbar not found."),a=!1)):(J(a.logger,"compose FORM element not found."),a=!1)}else J(a.logger,"SugarCRM instance not ready."),a=!1;ie(this.logger,"inject compose "+(a?"ok":"fail"))}else"em"==a?(ie(this.logger,"updating sidebar"),this.j=0,this.p=location.href,this.g&&this.g.h(null),this.h.Qe(null),Vf(this.l)):this.g&&this.g.h(null)};
h.Ei=function(a){var b=zz.H();"list-sugarcrm-domains"==a.type?sD(this):"login"==a.type?Az(b)||(Dz(b),tD(this)):"logout"==a.type&&b.g.email&&(Dz(b),tD(this))};
function tD(a){a.o.Wa().A(function(){ie(this.logger,"initiating UI");var a=this.o,c=this.g.g.firstElementChild.children[0];a&&Az(a)?Q(c,!1):Q(c,!0);Az(this.o)?(this.h.Lc(),IC(this.i),sD(this),this.history.setEnabled(!0)):(this.h.Lc(),IC(this.i),FC(this.h,[]),FC(this.i.h,[]),J(this.logger,"user not login"),this.history.setEnabled(!1))},function(a){window.console.error(a)},a)}function sD(a){ze().send("list-sugarcrm-domain").B(function(a){FC(this.h,a);FC(this.i.h,a)},a)}
h.init=function(){he(this.logger,"init "+this);this.i.render();bd(we(),["list-sugarcrm-domains","logout","login"],this.Ei,!1,this);setTimeout(function(){$p()},6E4*(.5+Math.random()));tD(this)};h.toString=function(){return"inj.Main:1.1.0"};qa("ydn.crm.version","1.1.0");qa("runInjApp",function(){mq();var a=new qD;window.setTimeout(function(){a.init()},500);return a});qa("ydn.crm.msg.SimpleStatusBar",fD);fD.render=fD.prototype.render;qa("ydn.crm.sugarcrm.model.Sugar",xx);
qa("ydn.crm.ui.SidebarPanel",GC);qa("ydn.crm.sugarcrm.ui.SyncPanel",pD);qa("ydn.crm.sugarcrm.ui.SearchPanel",kC);kC.prototype.setToolbarOptions=kC.prototype.yj;qa("ydn.crm.ui.UserSetting",zz);zz.getInstance=zz.H;zz.prototype.getModuleInfo=zz.prototype.Wh;zz.prototype.getUserInfo=zz.prototype.Nj;zz.prototype.onReady=zz.prototype.Wa;zz.prototype.show=zz.prototype.show;zz.prototype.getLoginEmail=zz.prototype.qi;
xx.list=function(){var a=zz.H();return ze().send("list-sugarcrm").B(function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.isLogin&&c.push(a.Wh(e.domain).B(function(a){return new xx(this,a)},e))}return Bn(c)})};eD.prototype.update=eD.prototype.Qe;qa("ydn.debug.log",Wj);qa("ydn.crm.version","1.1.0");qa("runEventApp",Du);yu.prototype.xp=yu.prototype.J;qa("ydn.msg.Pipe",te);qa("ydn.msg.initPipe",xe);qa("ydn.msg.getChannel",ze);te.prototype.listen=te.prototype.listen;te.prototype.getChannel=te.prototype.j;rd.prototype.send=rd.prototype.send;qa("goog.async.Deferred",B);B.prototype.addCallback=B.prototype.B;B.prototype.addErrback=B.prototype.Oc;B.prototype.addBoth=B.prototype.ba;B.prototype.addCallbacks=B.prototype.A;})();app=runApp();

            //# sourceMappingURL=https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm-1.1.0.js.map
        