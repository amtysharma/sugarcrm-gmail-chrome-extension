(function(){var h,aa=aa||{},r=this;function ba(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ca(){}function da(a){a.Y=function(){return a.Zf?a.Zf:a.Zf=new a}}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return void 0!==a}function u(a){return"array"==ea(a)}function w(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ga(a){return"function"==ea(a)}function A(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ha(a){return a[ja]||(a[ja]=++ka)}
var ja="closure_uid_"+(1E9*Math.random()>>>0),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return B.apply(null,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var C=Date.now||function(){return+new Date};
function oa(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function E(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Nh=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}E(pa,Error);pa.prototype.name="CustomError";var qa;function ra(a,b){return 0==a.lastIndexOf(b,0)}function sa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ta(a){return/^[\s\xa0]*$/.test(a)}function ua(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function va(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function wa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}
function xa(a){if(!ya.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(za,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Aa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));return a}var za=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,ya=/[&<>"']/;function Ea(a){return wa(a.replace(/  /g," &#160;"),void 0)}
function Fa(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ga={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ha={"'":"\\'"};
function Ia(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,k;if(!(k=Ga[d])){if(!(31<e&&127>e))if(d in Ha)d=Ha[d];else if(d in Ga)d=Ha[d]=Ga[d];else{e=d;k=d.charCodeAt(0);if(31<k&&127>k)e=d;else{if(256>k){if(e="\\x",16>k||256<k)e+="0"}else e="\\u",4096>k&&(e+="0");e+=k.toString(16).toUpperCase()}d=Ha[d]=e}k=d}f[g]=k}b.push('"');return b.join("")};function Ja(a,b){b.unshift(a);pa.call(this,sa.apply(null,b));b.shift()}E(Ja,pa);Ja.prototype.name="AssertionError";function Ka(a,b){throw new Ja("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var La=Array.prototype,Ma=La.indexOf?function(a,b,c){return La.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Na=La.forEach?function(a,b,c){La.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Oa=La.filter?function(a,b,c){return La.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=
0,g=x(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Pa=La.map?function(a,b,c){return La.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Qa=La.some?function(a,b,c){return La.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Ra=La.every?function(a,b,c){return La.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Sa(a,b){var c=Ta(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Ta(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ua(a,b){return 0<=Ma(a,b)}function Va(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Wa(a,b){var c=Ma(a,b),d;(d=0<=c)&&Xa(a,c);return d}
function Xa(a,b){La.splice.call(a,b,1)}function Ya(a){return La.concat.apply(La,arguments)}function Za(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function $a(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=w(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}}function ab(a,b,c,d){La.splice.apply(a,bb(arguments,1))}
function bb(a,b,c){return 2>=arguments.length?La.slice.call(a,b):La.slice.call(a,b,c)}function cb(a,b,c){for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,k;k=b(c,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}function db(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=eb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function fb(a,b){return a>b?1:a<b?-1:0}function eb(a,b){return a===b}function gb(a,b){var c=cb(a,hb||fb,b);0>c&&ab(a,-(c+1),0,b)};function ib(){return null}function jb(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function F(a,b){this.s=[];this.Ga=a;this.$=b||null;this.l=this.h=!1;this.j=void 0;this.ca=this.If=this.H=!1;this.n=0;this.i=null;this.O=0;this.U=null;if(Error.captureStackTrace){var c={stack:""};Error.captureStackTrace(c,F);"string"==typeof c.stack&&(this.U=c.stack.replace(/^[^\n]*\n/,""))}}function kb(a,b){if(a.h)a.j instanceof F&&kb(a.j);else{if(a.i){var c=a.i;delete a.i;b?kb(c,b):(c.O--,0>=c.O&&kb(c))}a.Ga?a.Ga.call(a.$,a):a.ca=!0;a.h||a.A(new lb)}}h=F.prototype;
h.nd=function(a,b){this.H=!1;mb(this,a,b)};function mb(a,b,c){a.h=!0;a.j=c;a.l=!b;a.ue()}function nb(a){if(a.h){if(!a.ca)throw new ob;a.ca=!1}}h.w=function(a){nb(this);mb(this,!0,a)};h.A=function(a){nb(this);pb(this,a);mb(this,!1,a)};function pb(a,b){a.U&&A(b)&&b.stack&&/^[^\n]+(\n   [^\n]+)+/.test(b.stack)&&(b.stack=b.stack+"\nDEFERRED OPERATION:\n"+a.U)}h.C=function(a,b){return this.u(a,null,b)};h.Ec=function(a,b){return this.u(null,a,b)};h.ea=function(a,b){return this.u(a,a,b)};
h.u=function(a,b,c){this.s.push([a,b,c]);this.h&&this.ue();return this};function qb(a,b){a.u(b.w,b.A,b)}function rb(a){return Qa(a.s,function(a){return ga(a[1])})}
h.ue=function(){this.n&&this.h&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.i&&(this.i.O--,delete this.i);for(var a=this.j,b=!1,c=!1;this.s.length&&!this.H;){var d=this.s.shift(),e=d[0],f=d[1],d=d[2];if(e=this.l?f:e)try{var g=e.call(d||this.$,a);t(g)&&(this.l=this.l&&(g==a||g instanceof Error),this.j=a=g);a instanceof F&&(this.H=c=!0)}catch(k){a=k,this.l=!0,pb(this,a),rb(this)||(b=!0)}}this.j=a;c&&(a.u(B(this.nd,this,!0),B(this.nd,this,!1)),a.If=!0);b&&(this.n=r.setTimeout(jb(a),0))};
function sb(a){var b=new F;b.w(a);return b}function tb(a){var b=new F;b.A(a);return b}function ub(a){Error.captureStackTrace?Error.captureStackTrace(this,ub):this.stack=Error().stack||"";a&&(this.message=String(a))}E(ub,Error);function ob(){ub.call(this)}E(ob,ub);ob.prototype.message="Deferred has already fired";ob.prototype.name="AlreadyCalledError";function lb(){ub.call(this)}E(lb,ub);lb.prototype.message="Deferred was canceled";lb.prototype.name="CanceledError";function vb(){0!=wb&&(xb[ha(this)]=this)}var wb=0,xb={};vb.prototype.H=!1;vb.prototype.sa=function(){if(!this.H&&(this.H=!0,this.J(),0!=wb)){var a=ha(this);delete xb[a]}};vb.prototype.J=function(){if(this.Sa)for(;this.Sa.length;)this.Sa.shift()()};var yb,zb,Ab,Bb,Cb,Db;function Eb(){return r.navigator?r.navigator.userAgent:null}function Fb(){return r.navigator}Cb=Bb=Ab=zb=yb=!1;var Gb;if(Gb=Eb()){var Hb=Fb();yb=ra(Gb,"Opera");zb=!yb&&(-1!=Gb.indexOf("MSIE")||-1!=Gb.indexOf("Trident"));Bb=(Ab=!yb&&-1!=Gb.indexOf("WebKit"))&&-1!=Gb.indexOf("Mobile");Cb=!yb&&!Ab&&!zb&&"Gecko"==Hb.product}var Ib=yb,H=zb,Jb=Cb,Kb=Ab,Lb=Bb,Mb=Fb();Db=-1!=(Mb&&Mb.platform||"").indexOf("Mac");var Nb=!!Fb()&&-1!=(Fb().appVersion||"").indexOf("X11");
function Ob(){var a=r.document;return a?a.documentMode:void 0}var Pb;a:{var Qb="",Rb;if(Ib&&r.opera)var Sb=r.opera.version,Qb="function"==typeof Sb?Sb():Sb;else if(Jb?Rb=/rv\:([^\);]+)(\)|;)/:H?Rb=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Kb&&(Rb=/WebKit\/(\S+)/),Rb)var Tb=Rb.exec(Eb()),Qb=Tb?Tb[1]:"";if(H){var Ub=Ob();if(Ub>parseFloat(Qb)){Pb=String(Ub);break a}}Pb=Qb}var Vb={};
function Wb(a){var b;if(!(b=Vb[a])){b=0;for(var c=va(String(Pb)).split("."),d=va(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var n=l.exec(g)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==n[1].length?0:parseInt(n[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==n[2].length)<
(0==p[2].length)?-1:(0==n[2].length)>(0==p[2].length)?1:0)||(n[2]<p[2]?-1:n[2]>p[2]?1:0)}while(0==b)}b=Vb[a]=0<=b}return b}var Xb=r.document,Yb=Xb&&H?Ob()||("CSS1Compat"==Xb.compatMode?parseInt(Pb,10):5):void 0;var Zb=!H||H&&9<=Yb,$b=!H||H&&9<=Yb,ac=H&&!Wb("9");!Kb||Wb("528");Jb&&Wb("1.9b")||H&&Wb("8")||Ib&&Wb("9.5")||Kb&&Wb("528");Jb&&!Wb("8")||H&&Wb("9");function K(a,b){this.type=a;this.i=this.target=b}h=K.prototype;h.sa=function(){};h.Rb=!1;h.gg=!0;h.Nc=function(){this.Rb=!0};h.preventDefault=function(){this.gg=!1};function bc(a){bc[" "](a);return a}bc[" "]=ca;function cc(a,b){K.call(this,a?a.type:"");this.j=this.i=this.target=null;this.g=this.clientY=this.clientX=0;this.l=this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.h=null;a&&this.init(a,b)}E(cc,K);var dc=[1,4,2];
cc.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.i=b;var d=a.relatedTarget;if(d){if(Jb){var e;a:{try{bc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.j=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.g=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.l=Db?a.metaKey:
a.ctrlKey;this.h=a;a.defaultPrevented&&this.preventDefault();delete this.Rb};function ec(a){return Zb?0==a.h.button:"click"==a.type?!0:!!(a.h.button&dc[0])}cc.prototype.Nc=function(){cc.m.Nc.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};cc.prototype.preventDefault=function(){cc.m.preventDefault.call(this);var a=this.h;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ac)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var fc="closure_listenable_"+(1E6*Math.random()|0);function gc(a){try{return!(!a||!a[fc])}catch(b){return!1}}var hc=0;function ic(a,b,c,d,e){this.fc=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Wa=e;this.key=++hc;this.removed=this.kd=!1}function jc(a){a.removed=!0;a.fc=null;a.proxy=null;a.src=null;a.Wa=null};function kc(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function lc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function nc(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function oc(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function qc(a){var b={},c;for(c in a)b[c]=a[c];return b}function rc(a){var b={},c;for(c in a)b[a[c]]=c;return b}var sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function tc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<sc.length;f++)c=sc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function uc(a){var b=arguments.length;if(1==b&&u(arguments[0]))return uc.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};function vc(a){this.src=a;this.g={};this.h=0}vc.prototype.add=function(a,b,c,d,e){var f=this.g[a];f||(f=this.g[a]=[],this.h++);var g=wc(f,b,d,e);-1<g?(a=f[g],c||(a.kd=!1)):(a=new ic(b,this.src,a,!!d,e),a.kd=c,f.push(a));return a};vc.prototype.remove=function(a,b,c,d){if(!(a in this.g))return!1;var e=this.g[a];b=wc(e,b,c,d);return-1<b?(jc(e[b]),Xa(e,b),0==e.length&&(delete this.g[a],this.h--),!0):!1};
function xc(a,b){var c=b.type;if(!(c in a.g))return!1;var d=Wa(a.g[c],b);d&&(jc(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d}vc.prototype.removeAll=function(a){var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,jc(d[e]);delete this.g[c];this.h--}return b};function yc(a,b,c,d,e){a=a.g[b];b=-1;a&&(b=wc(a,c,d,e));return-1<b?a[b]:null}function wc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.fc==b&&f.capture==!!c&&f.Wa==d)return e}return-1};var zc="closure_lm_"+(1E6*Math.random()|0),Ac={},Bc=0;function Cc(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)Cc(a,b[f],c,d,e);return null}c=Dc(c);return gc(a)?a.listen(b,c,d,e):Ec(a,b,c,!1,d,e)}function Ec(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,k=Fc(a);k||(a[zc]=k=new vc(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=Gc();c.proxy=d;d.src=a;d.fc=c;a.addEventListener?a.addEventListener(b,d,g):a.attachEvent(b in Ac?Ac[b]:Ac[b]="on"+b,d);Bc++;return c}
function Gc(){var a=Hc,b=$b?function(c){return a.call(b.src,b.fc,c)}:function(c){c=a.call(b.src,b.fc,c);if(!c)return c};return b}function Ic(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Ic(a,b[f],c,d,e);else c=Dc(c),gc(a)?a.qb.add(String(b),c,!0,d,e):Ec(a,b,c,!0,d,e)}function Jc(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Jc(a,b[f],c,d,e);else c=Dc(c),gc(a)?a.Fa(b,c,d,e):a&&(a=Fc(a))&&(b=yc(a,b,c,!!d,e))&&Kc(b)}
function Kc(a){if(y(a)||!a||a.removed)return!1;var b=a.src;if(gc(b))return xc(b.qb,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in Ac?Ac[c]:Ac[c]="on"+c,d);Bc--;(c=Fc(b))?(xc(c,a),0==c.h&&(c.src=null,b[zc]=null)):jc(a);return!0}function Lc(a,b,c,d){var e=1;if(a=Fc(a))if(b=a.g[b])for(b=Za(b),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.removed&&(e&=!1!==Mc(f,d))}return Boolean(e)}
function Mc(a,b){var c=a.fc,d=a.Wa||a.src;a.kd&&Kc(a);return c.call(d,b)}
function Hc(a,b){if(a.removed)return!0;if(!$b){var c=b||ba("window.event"),d=new cc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.i;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.Rb&&0<=k;k--)d.i=c[k],e&=Lc(c[k],f,!0,d);for(k=0;!d.Rb&&k<c.length;k++)d.i=c[k],e&=Lc(c[k],f,!1,d)}return e}return Mc(a,new cc(b,this))}
function Fc(a){a=a[zc];return a instanceof vc?a:null}var Nc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Dc(a){return ga(a)?a:a[Nc]||(a[Nc]=function(b){return a.handleEvent(b)})};function L(){vb.call(this);this.qb=new vc(this);this.Ub=this}E(L,vb);L.prototype[fc]=!0;h=L.prototype;h.Md=null;h.lf=function(a){this.Md=a};h.removeEventListener=function(a,b,c,d){Jc(this,a,b,c,d)};
h.dispatchEvent=function(a){var b,c=this.Md;if(c)for(b=[];c;c=c.Md)b.push(c);var c=this.Ub,d=a.type||a;if(x(a))a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);tc(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.Rb&&0<=g;g--)f=a.i=b[g],e=Oc(f,d,!0,a)&&e;a.Rb||(f=a.i=c,e=Oc(f,d,!0,a)&&e,a.Rb||(e=Oc(f,d,!1,a)&&e));if(b)for(g=0;!a.Rb&&g<b.length;g++)f=a.i=b[g],e=Oc(f,d,!1,a)&&e;return e};h.J=function(){L.m.J.call(this);this.qb&&this.qb.removeAll(void 0);this.Md=null};
h.listen=function(a,b,c,d){return this.qb.add(String(a),b,!1,c,d)};h.Fa=function(a,b,c,d){return this.qb.remove(String(a),b,c,d)};function Oc(a,b,c,d){b=a.qb.g[String(b)];if(!b)return!0;b=Za(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var k=g.fc,l=g.Wa||g.src;g.kd&&xc(a.qb,g);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.gg};function M(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}E(M,pa);function Pc(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}E(Pc,pa);function Qc(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}E(Qc,pa);function Rc(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}E(Rc,pa);
function Sc(a){Error.captureStackTrace?Error.captureStackTrace(this,Sc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Sc,Error);Sc.prototype.name="ydn.error.InternalError";function Tc(a,b){F.call(this,a,b);this.p=[]}E(Tc,F);function Uc(a,b){for(var c=0;c<a.p.length;c++)a.p[c][0].call(a.p[c][1],b)}Tc.prototype.w=function(a){this.p.length=0;Tc.m.w.call(this,a)};Tc.prototype.A=function(a){this.p.length=0;Tc.m.A.call(this,a)};function Vc(a){this.id="i"+this.count();this.req=a;this.i=!0;this.g=this.h=null;this.j=new Tc;this.l=NaN}Vc.prototype.F=function(){return this.id};var Wc=0;Vc.prototype.count=function(){Wc++;return Wc};
Vc.prototype.listen=function(a){if(a&&a.id==this.id){this.h=a.data;var b=a.error;b&&(b instanceof Error?this.g=b:A(b)?(this.g=Error(b.message),this.g.name=b.name,this.g.source=b,this.g.result=this.h):(this.g=Error(b),this.g.name="UnknownError"));a.done?(this.i=!1,this.g?this.j.A(this.g):this.j.w(this.h),window.clearTimeout(this.l)):Uc(this.j,a.data);return!0}return!1};Vc.prototype.toString=function(){return"Message:"+this.id+(this.i?"*":"")};
Vc.prototype.toJSON=function(){var a=this;this.l=window.setTimeout(function(){if(a.i){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},5E3);return{id:this.id,req:this.req,group:this.n,name:this.p,data:this.h}};function Xc(a){L.call(this);var b=x(a)?null:a;this.name=x(a)?a:a.name;this.g=[];this.n=b;this.h=null;this.i={}}E(Xc,L);Xc.prototype.J=function(){if(this.h){var a=this;this.h.disconnect(function(){a.h=null;a.g.length=0})}else this.g.length=0};function Zc(a){K.call(this,"post");this.message=a}E(Zc,K);Zc.prototype.getMessage=function(){return this.message};
Xc.prototype.l=function(a){if(a)if(a.id)for(var b=this.g.length-1;0<=b;b--){if(this.g[b].F()==a.id&&this.g[b].listen(a)){this.g[b].i?25<b&&(a=this.g.splice(b,1),this.g.unshift(a[0])):this.g.splice(b,1);break}}else"info"==a.req?(a.data=this.n,this.h.postMessage(a)):this.dispatchEvent(new Zc(a))};Xc.prototype.toString=function(){return"Pipe:"+this.name};Xc.prototype.j=function(a,b){var c=a||$c,d=c+(b?"-"+b:"");this.i[d]||(this.i[d]=new ad(this,c,b||""));return this.i[d]};
function bd(a){if(!a.h){a.h=chrome.runtime.connect({name:a.name});var b=B(a.l,a);a.h.onMessage.addListener(b);a.h.onDisconnect.addListener(function(){a.h.onMessage.removeListener(b);a.h=null;a.g.length=0})}return a.h}var cd=null;function dd(){if(!cd){var a=$c+"-"+C();cd=new Xc(a)}return cd}function ed(a){var b=a;x(a)&&(b={group:a,name:a+"-"+C()});cd=new Xc(b)}var $c="default",fd=["gmail","host-permission","popup","options"];function gd(a,b){return dd().j(a,b)}
function ad(a,b,c){this.g=a;this.h=b;this.i=c}ad.prototype.send=function(a,b){var c=new Vc(a),d=this.i;c.n=this.h;c.p=d;b&&(c.h=b);var d=c.j,e=this.g,f=c.toJSON();bd(e).postMessage(f);e.g.push(c);50<e.g.length&&(e.g.length-=1);return d};function hd(a){if("function"==typeof a.Aa)return a.Aa();if(x(a))return a.split("");if(w(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return lc(a)}function id(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(w(a)||x(a))Na(a,b,c);else{var d;if("function"==typeof a.Ma)d=a.Ma();else if("function"!=typeof a.Aa)if(w(a)||x(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=mc(a);else d=void 0;for(var e=hd(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var jd="StopIteration"in r?r.StopIteration:Error("StopIteration");function kd(){}kd.prototype.next=function(){throw jd;};kd.prototype.Hb=function(){return this};function ld(a){if(a instanceof kd)return a;if("function"==typeof a.Hb)return a.Hb(!1);if(w(a)){var b=0,c=new kd;c.next=function(){for(;;){if(b>=a.length)throw jd;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function md(a,b){if(w(a))try{Na(a,b,void 0)}catch(c){if(c!==jd)throw c;}else{a=ld(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==jd)throw d;}}}function nd(a){if(w(a))return Za(a);a=ld(a);var b=[];md(a,function(a){b.push(a)});return b};function od(a,b){this.h={};this.g=[];this.j=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof od?(c=a.Ma(),d=a.Aa()):(c=mc(a),d=lc(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=od.prototype;h.ga=function(){return this.i};h.Aa=function(){pd(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};h.Ma=function(){pd(this);return this.g.concat()};
h.Pa=function(){return 0==this.i};h.clear=function(){this.h={};this.j=this.i=this.g.length=0};h.remove=function(a){return qd(this.h,a)?(delete this.h[a],this.i--,this.j++,this.g.length>2*this.i&&pd(this),!0):!1};function pd(a){if(a.i!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];qd(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.i!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],qd(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}h.get=function(a,b){return qd(this.h,a)?this.h[a]:b};
h.set=function(a,b){qd(this.h,a)||(this.i++,this.g.push(a),this.j++);this.h[a]=b};h.fa=function(){return new od(this)};h.Hb=function(a){pd(this);var b=0,c=this.g,d=this.h,e=this.j,f=this,g=new kd;g.next=function(){for(;;){if(e!=f.j)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw jd;var g=c[b++];return a?g:d[g]}};return g};function qd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function sd(a){if(td){td=!1;var b=r.location;if(b){var c=b.href;if(c&&(c=(c=sd(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw td=!0,Error();}}return a.match(rd)}var td=Kb;function ud(a,b){var c;if(a instanceof ud)this.$b=t(b)?b:a.$b,vd(this,a.kc),this.Vd=a.Vd,wd(this,a.M()),xd(this,a.vd),yd(this,a.yc),zd(this,a.g.fa()),Ad(this,a.ve);else if(a&&(c=sd(String(a)))){this.$b=!!b;vd(this,c[1]||"",!0);var d=c[2]||"";this.Vd=d?decodeURIComponent(d):"";wd(this,c[3]||"",!0);xd(this,c[4]);yd(this,c[5]||"",!0);zd(this,c[6]||"",!0);Ad(this,c[7]||"",!0)}else this.$b=!!b,this.g=new Bd(null,0,this.$b)}h=ud.prototype;h.kc="";h.Vd="";h.se="";h.vd=null;h.yc="";h.ve="";h.$b=!1;
h.toString=function(){var a=[],b=this.kc;b&&a.push(Cd(b,Dd),":");if(b=this.M()){a.push("//");var c=this.Vd;c&&a.push(Cd(c,Dd),"@");a.push(encodeURIComponent(String(b)));b=this.vd;null!=b&&a.push(":",String(b))}if(b=this.yc)this.se&&"/"!=b.charAt(0)&&a.push("/"),a.push(Cd(b,"/"==b.charAt(0)?Ed:Fd));(b=this.g.toString())&&a.push("?",b);(b=this.ve)&&a.push("#",Cd(b,Gd));return a.join("")};h.fa=function(){return new ud(this)};
function vd(a,b,c){a.kc=c?b?decodeURIComponent(b):"":b;a.kc&&(a.kc=a.kc.replace(/:$/,""));return a}h.M=function(){return this.se};function wd(a,b,c){a.se=c?b?decodeURIComponent(b):"":b;return a}function xd(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.vd=b}else a.vd=null}function Hd(a){return a.yc}function yd(a,b,c){a.yc=c?b?decodeURIComponent(b):"":b}function zd(a,b,c){b instanceof Bd?(a.g=b,Id(a.g,a.$b)):(c||(b=Cd(b,Jd)),a.g=new Bd(b,0,a.$b))}
function Ad(a,b,c){a.ve=c?b?decodeURIComponent(b):"":b}function Cd(a,b){return x(a)?encodeURI(a).replace(b,Kd):null}function Kd(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dd=/[#\/\?@]/g,Fd=/[\#\?:]/g,Ed=/[\#\?]/g,Jd=/[\#\?@]/g,Gd=/#/g;function Bd(a,b,c){this.g=a||null;this.h=!!c}
function Md(a){if(!a.ma&&(a.ma=new od,a.Ka=0,a.g))for(var b=a.g.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Nd(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}h=Bd.prototype;h.ma=null;h.Ka=null;h.ga=function(){Md(this);return this.Ka};h.add=function(a,b){Md(this);this.g=null;a=Nd(this,a);var c=this.ma.get(a);c||this.ma.set(a,c=[]);c.push(b);this.Ka++;return this};
h.remove=function(a){Md(this);a=Nd(this,a);return qd(this.ma.h,a)?(this.g=null,this.Ka-=this.ma.get(a).length,this.ma.remove(a)):!1};h.clear=function(){this.ma=this.g=null;this.Ka=0};h.Pa=function(){Md(this);return 0==this.Ka};function Od(a,b){Md(a);b=Nd(a,b);return qd(a.ma.h,b)}h.Ma=function(){Md(this);for(var a=this.ma.Aa(),b=this.ma.Ma(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.Aa=function(a){Md(this);var b=[];if(x(a))Od(this,a)&&(b=Ya(b,this.ma.get(Nd(this,a))));else{a=this.ma.Aa();for(var c=0;c<a.length;c++)b=Ya(b,a[c])}return b};h.set=function(a,b){Md(this);this.g=null;a=Nd(this,a);Od(this,a)&&(this.Ka-=this.ma.get(a).length);this.ma.set(a,[b]);this.Ka++;return this};h.get=function(a,b){var c=a?this.Aa(a):[];return 0<c.length?String(c[0]):b};
h.toString=function(){if(this.g)return this.g;if(!this.ma)return"";for(var a=[],b=this.ma.Ma(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.Aa(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.g=a.join("&")};h.fa=function(){var a=new Bd;a.g=this.g;this.ma&&(a.ma=this.ma.fa(),a.Ka=this.Ka);return a};function Nd(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}
function Id(a,b){b&&!a.h&&(Md(a),a.g=null,id(a.ma,function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.g=null,this.ma.set(Nd(this,e),Za(a)),this.Ka+=a.length))},a));a.h=b};var Pd;
Pd={i:["BC","AD"],h:["Before Christ","Anno Domini"],p:"JFMAMJJASOND".split(""),$:"JFMAMJJASOND".split(""),n:"January February March April May June July August September October November December".split(" "),U:"January February March April May June July August September October November December".split(" "),D:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ia:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ub:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Sa:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
O:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Ga:"Sun Mon Tue Wed Thu Fri Sat".split(" "),s:"SMTWTFS".split(""),ca:"SMTWTFS".split(""),K:["Q1","Q2","Q3","Q4"],H:["1st quarter","2nd quarter","3rd quarter","4th quarter"],g:["AM","PM"],uf:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Cf:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],vg:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],j:6,zf:[5,6],l:5};function Qd(a){this.h=[];this.g=Pd;"number"==typeof a?Rd(this,a):Sd(this,a)}var Td=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|w+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvwzZ]+/];function Sd(a,b){for(;b;)for(var c=0;c<Td.length;++c){var d=b.match(Td[c]);if(d){d=d[0];b=b.substring(d.length);0==c&&("''"==d?d="'":(d=d.substring(1,d.length-1),d=d.replace(/\'\'/,"'")));a.h.push({text:d,type:c});break}}}
function Rd(a,b){var c;if(4>b)c=a.g.uf[b];else if(8>b)c=a.g.Cf[b-4];else if(12>b)c=a.g.vg[b-8],c=c.replace("{1}",a.g.uf[b-8]),c=c.replace("{0}",a.g.Cf[b-8]);else{Rd(a,10);return}Sd(a,c)}function Ud(a){var b=Qd.prototype;if(void 0===b.g||void 0===b.g.Cg)return a;for(var c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(b.g.Cg+e-48):a.charAt(d))}return c.join("")};var Vd={tg:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},sg:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},Wd=Vd,Wd=Vd;var Xd={wf:".",yf:",",Af:"%",ge:"0",Ag:"+",xg:"-",xf:"E",Bf:"\u2030",fe:"\u221e",yg:"NaN",vf:"#,##0.###",Bg:"#E0",zg:"#,##0%",ug:"\u00a4#,##0.00;(\u00a4#,##0.00)",wg:"USD"},Yd=Xd,Yd=Xd;var Zd={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[0,"Ft",
"Ft"],IDR:[0,"Rp","Rp"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u0440\u0443\u0431.",
"\u0440\u0443\u0431."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u20b4","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function $d(a,b,c){this.s=b||Yd.wg;this.Sa=c||ae;this.K=40;this.g=1;this.ca=0;this.j=3;this.O=this.h=0;this.Ga=!1;this.D=this.l="";this.i="-";this.n="";this.H=1;this.$=3;this.U=this.ia=!1;this.p=be;if("number"==typeof a)switch(a){case 1:ce(this,Yd.vf);break;case 2:ce(this,Yd.Bg);break;case 3:ce(this,Yd.zg);break;case 4:a=Yd.ug;b=["0"];c=Zd[this.s][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));ce(this,a);break;case 5:de(this,1);break;case 6:de(this,2);break;
default:throw Error("Unsupported pattern type.");}else ce(this,a)}var ae=0,be=0;
function ce(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.l=ee(a,b,c);for(var d=c[0],e=-1,f=0,g=0,k=0,l=-1,m=b.length,n=!0;c[0]<m&&n;c[0]++)switch(b.charAt(c[0])){case "#":0<g?k++:f++;0<=l&&0>e&&l++;break;case "0":if(0<k)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+k;break;case "E":if(a.U)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.U=!0;a.O=0;c[0]+1<
m&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.Ga=!0);for(;c[0]+1<m&&"0"==b.charAt(c[0]+1);)c[0]++,a.O++;if(1>f+g||1>a.O)throw Error('Malformed exponential pattern "'+b+'"');n=!1;break;default:c[0]--,n=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,k=f-g,f=g-1,g=1);if(0>e&&0<k||0<=e&&(e<f||e>f+g)||0==l)throw Error('Malformed pattern "'+b+'"');k=f+g+k;a.j=0<=e?k-e:0;0<=e&&(a.h=f+g-e,0>a.h&&(a.h=0));a.g=(0<=e?e:k)-f;a.U&&(a.K=f+a.g,0==a.j&&0==a.g&&(a.g=1));a.$=Math.max(0,l);a.ia=0==e||e==k;d=c[0]-d;a.D=ee(a,b,c);c[0]<b.length&&
b.charAt(c[0])==fe?(c[0]++,a.i=ee(a,b,c),c[0]+=d,a.n=ee(a,b,c)):(a.i=a.l+a.i,a.n+=a.D)}function de(a,b){a.p=b;ce(a,Yd.vf);a.h=0;a.j=2;if(0<a.h)throw Error("Can't combine significant digits and minimum fraction digits");a.ca=2}
$d.prototype.parse=function(a,b){var c=b||[0];if(this.p!=be)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.l,c[0])==c[0],f=a.indexOf(this.i,c[0])==c[0];e&&f&&(this.l.length>this.i.length?f=!1:this.l.length<this.i.length&&(e=!1));e?c[0]+=this.l.length:f&&(c[0]+=this.i.length);if(a.indexOf(Yd.fe,c[0])==c[0])c[0]+=Yd.fe.length,d=Infinity;else{var d=a,g=!1,k=!1,l=!1,m=1,n=Yd.wf,p=Yd.yf,q=Yd.xf;if(this.p!=be)throw Error("Parsing of compact style numbers is not implemented");
for(var s="";c[0]<d.length;c[0]++){var v=d.charAt(c[0]),z=ge(v);if(0<=z&&9>=z)s+=z,l=!0;else if(v==n.charAt(0)){if(g||k)break;s+=".";g=!0}else if(v==p.charAt(0)&&("\u00a0"!=p.charAt(0)||c[0]+1<d.length&&0<=ge(d.charAt(c[0]+1)))){if(g||k)break}else if(v==q.charAt(0)){if(k)break;s+="E";k=!0}else if("+"==v||"-"==v)s+=v;else if(v==Yd.Af.charAt(0)){if(1!=m)break;m=100;if(l){c[0]++;break}}else if(v==Yd.Bf.charAt(0)){if(1!=m)break;m=1E3;if(l){c[0]++;break}}else break}d=parseFloat(s)/m}if(e){if(a.indexOf(this.D,
c[0])!=c[0])return NaN;c[0]+=this.D.length}else if(f){if(a.indexOf(this.n,c[0])!=c[0])return NaN;c[0]+=this.n.length}return f?-d:d};function he(a,b){var c=Math.pow(10,a.j),d=0>=a.ca?Math.round(b*c):Math.floor(ie(b*c,a.ca,a.j)),e;isFinite(d)?(e=Math.floor(d/c),c=Math.floor(d-e*c)):(e=b,c=0);return{$f:e,Gg:c}}
function je(a,b,c,d){if(a.h>a.j)throw Error("Min value must be less than max value");b=he(a,b);var e=Math.pow(10,a.j),f=b.$f,g=b.Gg,k=0<a.h||0<g||!1;b=a.h;k&&(b=a.h);for(var l="",m=f;1E20<m;)l="0"+l,m=Math.round(m/10);var l=m+l,n=Yd.wf,p=Yd.yf,m=Yd.ge.charCodeAt(0),q=l.length;if(0<f||0<c){for(f=q;f<c;f++)d.push(String.fromCharCode(m));for(f=0;f<q;f++)d.push(String.fromCharCode(m+1*l.charAt(f))),1<q-f&&0<a.$&&1==(q-f)%a.$&&d.push(p)}else k||d.push(String.fromCharCode(m));(a.ia||k)&&d.push(n);a=""+
(g+e);for(c=a.length;"0"==a.charAt(c-1)&&c>b+1;)c--;for(f=1;f<c;f++)d.push(String.fromCharCode(m+1*a.charAt(f)))}function ke(a,b,c){c.push(Yd.xf);0>b?(b=-b,c.push(Yd.xg)):a.Ga&&c.push(Yd.Ag);b=""+b;for(var d=Yd.ge,e=b.length;e<a.O;e++)c.push(d);c.push(b)}function ge(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=Yd.ge.charCodeAt(0);return b<=a&&a<b+10?a-b:-1}var fe=";";
function ee(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case fe:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.s;else switch(a.Sa){case ae:d+=Zd[a.s][1];break;case 2:var g=a.s,k=Zd[g],d=d+(g==k[1]?g:g+" "+k[1]);break;case 1:d+=Zd[a.s][2]}break;case "%":if(1!=a.H)throw Error("Too many percent/permill");a.H=100;d+=Yd.Af;
break;case "\u2030":if(1!=a.H)throw Error("Too many percent/permill");a.H=1E3;d+=Yd.Bf;break;default:d+=g}}return d}var le={prefix:"",jg:"",re:0};function me(a,b){var c=1==a.p?Wd.tg:Wd.sg;if(3>b)return le;b=Math.min(14,b);c=c[Math.pow(10,b)];if(!c)return le;c=c.other;return c&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],jg:c[3],re:b-(c[2].length-1)}:le:le}function ne(a){for(var b=0;1<=(a/=10);)b++;return b}
function ie(a,b,c){if(!a)return a;b=b-ne(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};function oe(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"}var pe=oe,pe=oe;function qe(a){return 1==a?"one":"other"}var re=qe,re=qe;function se(a){this.g=[];this.i=[];this.j=new $d(1);a&&(a=te(this,a),this.i=ue(this,a))}var ve=RegExp("'([{}#].*?)'","g"),we=RegExp("''","g");
function xe(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,k=a,l=e,m=c[g];t(m)?(k.g.push(m),l.push(k.h(k.g))):l.push("Undefined parameter - "+g);break;case 2:g=b[f].value;k=e;l=g.hd;t(c[l])?(l=g[c[l]],t(l)||(l=g.other),xe(a,l,c,d,k)):k.push("Undefined parameter - "+l);break;case 0:g=b[f].value;ye(a,g,c,re,d,e);break;case 1:g=b[f].value;ye(a,g,c,pe,d,e);break;default:Ka("Unrecognized block type.")}}
function ye(a,b,c,d,e,f){var g=b.hd,k=b.Gf,l=+c[g];if(isNaN(l))f.push("Undefined or invalid parameter - "+g);else if(k=l-k,g=b[c[g]],t(g)||(d=d(k),g=b[d],t(g)||(g=b.other)),b=[],xe(a,g,c,e,b),c=b.join(""),e)f.push(c);else{a=a.j;if(isNaN(k))a=Yd.yg;else{e=[];g=d=k;a.p==be?b=le:(d=Math.abs(d),g=Math.abs(g),b=me(a,1>=d?0:ne(d)).re,he(a,g/Math.pow(10,b)),d=he(a,d/Math.pow(10,b)),b=me(a,b+ne(d.$f)));k/=Math.pow(10,b.re);e.push(b.prefix);d=0>k||0==k&&0>1/k;e.push(d?a.i:a.l);if(isFinite(k))if(k=k*(d?-1:
1)*a.H,a.U)if(0==k)je(a,k,a.g,e),ke(a,0,e);else{g=Math.log(k)/Math.log(10);g=Math.floor(g+2E-15);k/=Math.pow(10,g);l=a.g;if(1<a.K&&a.K>a.g){for(;0!=g%a.K;)k*=10,g--;l=1}else 1>a.g?(g++,k/=10):(g-=a.g-1,k*=Math.pow(10,a.g-1));je(a,k,l,e);ke(a,g,e)}else je(a,k,a.g,e);else e.push(Yd.fe);e.push(d?a.n:a.D);e.push(b.jg);a=e.join("")}f.push(c.replace(/#/g,a))}}
function te(a,b){var c=a.g,d=B(a.h,a);b=b.replace(we,function(){c.push("'");return d(c)});return b=b.replace(ve,function(a,b){c.push(b);return d(c)})}function ze(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d}
var Ae=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Be=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Ce=/^\s*(\w+)\s*,\s*select\s*,/;
function ue(a,b){for(var c=[],d=ze(b),e=0;e<d.length;e++){var f={};if(0==d[e].type)f.type=4,f.value=d[e].value;else if(1==d[e].type)switch(Ae.test(d[e].value)?0:Be.test(d[e].value)?1:Ce.test(d[e].value)?2:/^\s*\w+\s*/.test(d[e].value)?3:5){case 2:f.type=2;f.value=De(a,d[e].value);break;case 0:f.type=0;f.value=Ee(a,d[e].value);break;case 1:f.type=1;f.value=Fe(a,d[e].value);break;case 3:f.type=3;f.value=d[e].value;break;default:Ka("Unknown block type.")}else Ka("Unknown part of the pattern.");c.push(f)}return c}
function De(a,b){var c="";b=b.replace(Ce,function(a,b){c=b;return""});var d={};d.hd=c;for(var e=ze(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=ue(a,e[f].value);else Ka("Expected block type.");d[g.replace(/\s/g,"")]=k;f++}return d}
function Ee(a,b){var c="",d=0;b=b.replace(Ae,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.hd=c;e.Gf=d;for(var f=ze(b),g=0;g<f.length;){var k=f[g].value;g++;if(1==f[g].type)var l=ue(a,f[g].value);else Ka("Expected block type.");e[k.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=l;g++}return e}
function Fe(a,b){var c="";b=b.replace(Be,function(a,b){c=b;return""});var d={};d.hd=c;d.Gf=0;for(var e=ze(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=ue(a,e[f].value);else Ka("Expected block type.");d[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return d}se.prototype.h=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};function Ge(a,b,c){a=new se(a);b={COUNT:b,TEXT:c};if(0==a.i.length)a="";else{c=[];xe(a,a.i,b,!1,c);for(b=c.join("");0<a.g.length;)b=b.replace(a.h(a.g),a.g.pop());a=b}return a};function He(a){this.g=new od;if(a){a=hd(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function Ie(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ha(a):b.substr(0,1)+a}h=He.prototype;h.ga=function(){return this.g.ga()};h.add=function(a){this.g.set(Ie(a),a)};h.removeAll=function(a){a=hd(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};h.remove=function(a){return this.g.remove(Ie(a))};h.clear=function(){this.g.clear()};h.Pa=function(){return this.g.Pa()};
h.contains=function(a){a=Ie(a);return qd(this.g.h,a)};h.Aa=function(){return this.g.Aa()};h.fa=function(){return new He(this)};h.Hb=function(){return this.g.Hb(!1)};function Je(a){return Ke(a||arguments.callee.caller,[])}
function Ke(a,b){var c=[];if(Ua(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Le(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Le(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Ke(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Le(a){if(Me[a])return Me[a];a=String(a);if(!Me[a]){var b=/function ([^\(]+)/.exec(a);Me[a]=b?b[1]:"[Anonymous]"}return Me[a]}var Me={};function Ne(a,b,c,d,e){this.n="number"==typeof e?e:Oe++;this.l=d||C();this.j=a;this.p=b;this.h=c;delete this.i;delete this.g}Ne.prototype.n=0;Ne.prototype.i=null;Ne.prototype.g=null;var Oe=0;Ne.prototype.getMessage=function(){return this.p};function Pe(a){this.l=a}Pe.prototype.i=null;Pe.prototype.h=null;Pe.prototype.j=null;Pe.prototype.g=null;function Qe(a,b){this.name=a;this.value=b}Qe.prototype.toString=function(){return this.name};var Re=new Qe("SHOUT",1200),Se=new Qe("SEVERE",1E3),Te=new Qe("WARNING",900),Ue=new Qe("INFO",800),Ve=new Qe("CONFIG",700),We=new Qe("FINE",500),Xe=new Qe("FINER",400),Ye=new Qe("FINEST",300),Ze=[new Qe("OFF",Infinity),Re,Se,Te,Ue,Ve,We,Xe,Ye,new Qe("ALL",0)],$e=null;h=Pe.prototype;h.getName=function(){return this.l};
function af(a,b){a.g||(a.g=[]);a.g.push(b)}h.getParent=function(){return this.i};h.getChildren=function(){this.j||(this.j={});return this.j};function bf(a){if(a.h)return a.h;if(a.i)return bf(a.i);Ka("Root logger has no level set.");return null}
h.log=function(a,b,c){if(a.value>=bf(this).value)for(ga(b)&&(b=b()),a=this.Ig(a,b,c),b="log:"+a.getMessage(),r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.g)for(var e=0,f=void 0;f=c.g[e];e++)f(d);b=b.getParent()}};
h.Ig=function(a,b,c){var d=new Ne(a,String(b),this.l);if(c){d.i=c;var e;var f=arguments.callee.caller;try{var g;var k=ba("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,m,n=!1;try{l=c.lineNumber||c.Ph||"Not available"}catch(p){l="Not available",n=!0}try{m=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||k}catch(q){m="Not available",n=!0}g=!n&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:m,stack:c.stack||"Not available"}}e="Message: "+xa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+xa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+xa(Je(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.g=e}return d};function N(a,b,c){a.log(Te,b,c)}h.info=function(a,b){this.log(Ue,a,b)};
function cf(a,b,c){a.log(We,b,c)}function P(a,b){a.log(Xe,b,void 0)}function Q(a,b){a.log(Ye,b,void 0)}var df={},ef=null;function ff(){ef||(ef=new Pe(""),df[""]=ef,ef.h=Ve)}function gf(){ff();return ef}function R(a){ff();var b;if(!(b=df[a])){b=new Pe(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=R(a.substr(0,c));c.getChildren()[d]=b;b.i=c;df[a]=b}return b};function hf(a){vb.call(this);this.h=a;this.g={}}E(hf,vb);var jf=[];h=hf.prototype;h.listen=function(a,b,c,d){u(b)||(jf[0]=b,b=jf);for(var e=0;e<b.length;e++){var f=Cc(a,b[e],c||this.handleEvent,d||!1,this.h||this);if(!f)break;this.g[f.key]=f}return this};h.Fa=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.Fa(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.h||this,c=Dc(c),d=!!d,b=gc(a)?yc(a.qb,String(b),c,d,e):a?(a=Fc(a))?yc(a,b,c,d,e):null:null,b&&(Kc(b),delete this.g[b.key]);return this};
h.removeAll=function(){kc(this.g,Kc);this.g={}};h.J=function(){hf.m.J.call(this);this.removeAll()};h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function kf(a,b){L.call(this);this.h=a||1;this.g=b||r;this.i=B(this.th,this);this.j=C()}E(kf,L);h=kf.prototype;h.Mc=!1;h.da=null;h.setInterval=function(a){this.h=a;this.da&&this.Mc?(this.stop(),lf(this)):this.da&&this.stop()};h.th=function(){if(this.Mc){var a=C()-this.j;0<a&&a<0.8*this.h?this.da=this.g.setTimeout(this.i,this.h-a):(this.da&&(this.g.clearTimeout(this.da),this.da=null),this.dispatchEvent(mf),this.Mc&&(this.da=this.g.setTimeout(this.i,this.h),this.j=C()))}};
function lf(a){a.Mc=!0;a.da||(a.da=a.g.setTimeout(a.i,a.h),a.j=C())}h.stop=function(){this.Mc=!1;this.da&&(this.g.clearTimeout(this.da),this.da=null)};h.J=function(){kf.m.J.call(this);this.stop();delete this.g};var mf="tick";function nf(a,b,c){if(ga(a))c&&(a=B(a,c));else if(a&&"function"==typeof a.handleEvent)a=B(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:r.setTimeout(a,b||0)};function of(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return JSON.parse(a)}catch(b){}throw Error("Invalid JSON string: "+a);}function pf(){}function qf(a,b){var c=[];rf(a,b,c);return c.join("")}
function rf(a,b,c){switch(typeof b){case "string":sf(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),rf(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),sf(e,c),c.push(":"),rf(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var tf={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},uf=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function sf(a,b){b.push('"',a.replace(uf,function(a){if(a in tf)return tf[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return tf[a]=e+b.toString(16)}),'"')};function vf(a,b){a&&cf(a,b,void 0)};function wf(){}wf.prototype.g=null;var xf;function yf(){}E(yf,wf);function zf(a){return(a=Af(a))?new ActiveXObject(a):new XMLHttpRequest}function Bf(a){var b={};Af(a)&&(b[0]=!0,b[1]=!0);return b}
function Af(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h}xf=new yf;function Cf(a){L.call(this);this.headers=new od;this.p=a||null;this.h=!1;this.$=this.Q=null;this.Ga=this.D="";this.n=0;this.s="";this.i=this.ia=this.K=this.ca=!1;this.l=0;this.O=null;this.j=Df;this.U=this.Wd=!1}E(Cf,L);var Df="";Cf.prototype.g=R("goog.net.XhrIo");var Ef=/^https?$/i,Ff=["POST","PUT"];h=Cf.prototype;h.Rf=function(){return this.j};
h.send=function(a,b,c,d){if(this.Q)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);b=b?b.toUpperCase():"GET";this.D=a;this.s="";this.n=0;this.Ga=b;this.ca=!1;this.h=!0;this.Q=this.p?zf(this.p):zf(xf);this.$=this.p?this.p.g||(this.p.g=Bf(this.p)):xf.g||(xf.g=Bf(xf));this.Q.onreadystatechange=B(this.eg,this);try{vf(this.g,Gf(this,"Opening Xhr")),this.ia=!0,this.Q.open(b,a,!0),this.ia=!1}catch(e){vf(this.g,Gf(this,"Error opening Xhr: "+e.message));Hf(this,
e);return}a=c||"";var f=this.headers.fa();d&&id(d,function(a,b){f.set(b,a)});d=Sa(f.Ma(),If);c=r.FormData&&a instanceof r.FormData;!Ua(Ff,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");id(f,function(a,b){this.Q.setRequestHeader(b,a)},this);this.j&&(this.Q.responseType=this.j);"withCredentials"in this.Q&&(this.Q.withCredentials=this.Wd);try{Jf(this),0<this.l&&(this.U=H&&Wb(9)&&y(this.Q.timeout)&&t(this.Q.ontimeout),vf(this.g,Gf(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+
this.U)),this.U?(this.Q.timeout=this.l,this.Q.ontimeout=B(this.kg,this)):this.O=nf(this.kg,this.l,this)),vf(this.g,Gf(this,"Sending request")),this.K=!0,this.Q.send(a),this.K=!1}catch(g){vf(this.g,Gf(this,"Send error: "+g.message)),Hf(this,g)}};function If(a){return"content-type"==a.toLowerCase()}h.kg=function(){"undefined"!=typeof aa&&this.Q&&(this.s="Timed out after "+this.l+"ms, aborting",this.n=8,vf(this.g,Gf(this,this.s)),this.dispatchEvent("timeout"),this.abort(8))};
function Hf(a,b){a.h=!1;a.Q&&(a.i=!0,a.Q.abort(),a.i=!1);a.s=b;a.n=5;Kf(a);Lf(a)}function Kf(a){a.ca||(a.ca=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}h.abort=function(a){this.Q&&this.h&&(vf(this.g,Gf(this,"Aborting")),this.h=!1,this.i=!0,this.Q.abort(),this.i=!1,this.n=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Lf(this))};h.J=function(){this.Q&&(this.h&&(this.h=!1,this.i=!0,this.Q.abort(),this.i=!1),Lf(this,!0));Cf.m.J.call(this)};
h.eg=function(){this.H||(this.ia||this.K||this.i?Mf(this):this.ph())};h.ph=function(){Mf(this)};function Mf(a){if(a.h&&"undefined"!=typeof aa)if(a.$[1]&&4==Nf(a)&&2==a.N())vf(a.g,Gf(a,"Local request error detected and ignored"));else if(a.K&&4==Nf(a))nf(a.eg,0,a);else if(a.dispatchEvent("readystatechange"),4==Nf(a)){vf(a.g,Gf(a,"Request complete"));a.h=!1;try{a.Da()?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.n=6,a.s=a.Ja()+" ["+a.N()+"]",Kf(a))}finally{Lf(a)}}}
function Lf(a,b){if(a.Q){Jf(a);var c=a.Q,d=a.$[0]?ca:null;a.Q=null;a.$=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.g)&&c.log(Se,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Jf(a){a.Q&&a.U&&(a.Q.ontimeout=null);y(a.O)&&(r.clearTimeout(a.O),a.O=null)}
h.Da=function(){var a=this.N(),b;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:b=!0;break a;default:b=!1}if(!b){if(a=0===a)a=sd(String(this.D))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),a=!Ef.test(a?a.toLowerCase():"");b=a}return b};function Nf(a){return a.Q?a.Q.readyState:0}h.N=function(){try{return 2<Nf(this)?this.Q.status:-1}catch(a){var b=this.g;b&&N(b,"Can not get status: "+a.message,void 0);return-1}};
h.Ja=function(){try{return 2<Nf(this)?this.Q.statusText:""}catch(a){return vf(this.g,"Can not get status: "+a.message),""}};
function Of(a){try{if(!a.Q)return null;if("response"in a.Q)return a.Q.response;switch(a.j){case Df:case "text":return a.Q.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.Q)return a.Q.mozResponseArrayBuffer}var b=a.g;b&&b.log(Se,"Response type "+a.j+" is not supported on this browser",void 0);return null}catch(c){return vf(a.g,"Can not get response: "+c.message),null}}function Gf(a,b){return b+" ["+a.Ga+" "+a.D+" "+a.N()+"]"};function Pf(){this.i=this.h=0;this.g=[]}function Qf(a){if(a.h!=a.i){var b=a.g[a.h];delete a.g[a.h];a.h++;return b}}h=Pf.prototype;h.ga=function(){return this.i-this.h};h.Pa=function(){return 0==this.i-this.h};h.clear=function(){this.i=this.h=this.g.length=0};h.contains=function(a){return Ua(this.g,a)};h.remove=function(a){a=Ma(this.g,a);if(0>a)return!1;a==this.h?Qf(this):(Xa(this.g,a),this.i--);return!0};h.Aa=function(){return this.g.slice(this.h,this.i)};function Rf(a,b){vb.call(this);this.n=a||0;this.i=b||10;if(this.n>this.i)throw Error(Sf);this.g=new Pf;this.h=new He;this.l=null;this.ed()}E(Rf,vb);var Sf="[goog.structs.Pool] Min can not be greater than max";h=Rf.prototype;h.wd=function(){var a=C();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.g.ga()&&(b=Qf(this.g),!this.ff(b));)this.ed();!b&&this.ga()<this.i&&(b=this.Ee());b&&(this.l=a,this.h.add(b));return b}};h.Od=function(a){return this.h.remove(a)?(this.ie(a),!0):!1};
h.ie=function(a){this.h.remove(a);if(this.ff(a)&&this.ga()<this.i){var b=this.g;b.g[b.i++]=a}else Tf(a)};h.ed=function(){for(var a=this.g;this.ga()<this.n;){var b=this.Ee();a.g[a.i++]=b}for(;this.ga()>this.i&&0<this.g.ga();)Tf(Qf(a))};h.Ee=function(){return{}};function Tf(a){if("function"==typeof a.sa)a.sa();else for(var b in a)a[b]=null}h.ff=function(a){return"function"==typeof a.Eg?a.Eg():!0};h.contains=function(a){return this.g.contains(a)||this.h.contains(a)};
h.ga=function(){return this.g.ga()+this.h.ga()};h.Pa=function(){return this.g.Pa()&&this.h.Pa()};h.J=function(){Rf.m.J.call(this);if(0<this.h.ga())throw Error("[goog.structs.Pool] Objects not released");delete this.h;for(var a=this.g;!a.Pa();)Tf(Qf(a));delete this.g};function Uf(a,b){this.g=a;this.h=b}Uf.prototype.V=function(){return this.h};Uf.prototype.fa=function(){return new Uf(this.g,this.h)};function Vf(a){this.g=[];if(a)a:{var b,c;if(a instanceof Vf){if(b=a.Ma(),c=a.Aa(),0>=a.ga()){a=this.g;for(var d=0;d<b.length;d++)a.push(new Uf(b[d],c[d]));break a}}else b=mc(a),c=lc(a);for(d=0;d<b.length;d++)Wf(this,b[d],c[d])}}function Wf(a,b,c){var d=a.g;d.push(new Uf(b,c));b=d.length-1;a=a.g;for(c=a[b];0<b;)if(d=b-1>>1,a[d].g>c.g)a[b]=a[d],b=d;else break;a[b]=c}h=Vf.prototype;
h.remove=function(){var a=this.g,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Va(a);else{a[0]=a.pop();for(var a=0,b=this.g,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].g<b[f].g?g:f;if(b[f].g>e.g)break;b[a]=b[f];a=f}b[a]=e}return c.V()}};h.Aa=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].V());return b};h.Ma=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].g);return b};h.fa=function(){return new Vf(this)};h.ga=function(){return this.g.length};
h.Pa=function(){return 0==this.g.length};h.clear=function(){Va(this.g)};function Xf(){Vf.call(this)}E(Xf,Vf);function Yf(a,b){this.j=new Xf;Rf.call(this,a,b)}E(Yf,Rf);h=Yf.prototype;h.wd=function(a,b){if(!a)return Yf.m.wd.call(this);Wf(this.j,t(b)?b:100,a);this.We()};h.We=function(){for(var a=this.j;0<a.ga();){var b=this.wd();if(b)a.remove().apply(this,[b]);else break}};h.ie=function(a){Yf.m.ie.call(this,a);this.We()};h.ed=function(){Yf.m.ed.call(this);this.We()};h.J=function(){Yf.m.J.call(this);r.clearTimeout(void 0);this.j.clear();this.j=null};function Zf(a,b,c){Yf.call(this,b,c);this.p=a}E(Zf,Yf);Zf.prototype.Ee=function(){var a=new Cf,b=this.p;b&&id(b,function(b,d){a.headers.set(d,b)});return a};Zf.prototype.ff=function(a){return!a.H&&!a.Q};function $f(a,b,c,d,e){L.call(this);this.i=t(a)?a:1;this.j=t(e)?Math.max(0,e):0;this.Cc=new Zf(b,c,d);this.g=new od;this.h=new hf(this)}E($f,L);var ag="ready complete success error abort timeout".split(" ");h=$f.prototype;h.send=function(a,b,c,d,e,f,g,k,l,m){if(this.g.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new bg(b,B(this.Wg,this,a),c,d,e,g,t(k)?k:this.i,l,m);this.g.set(a,b);a=B(this.Qg,this,a);this.Cc.wd(a,f);return b};
h.abort=function(a,b){var c=this.g.get(a);if(c){var d=c.$c;c.Df=!0;b&&(this.h.Fa(d,ag,c.Xd),Ic(d,"ready",function(){this.Cc.Od(d)},!1,this),this.g.remove(a));d&&d.abort()}};h.Qg=function(a,b){var c=this.g.get(a);c&&!c.$c?(this.h.listen(b,ag,c.Xd),b.l=Math.max(0,this.j),b.j=c.Rf(),c.$c=c.Sh=b,c.$c.Wd=c.Wd,this.dispatchEvent(new cg("ready",this,a,b)),dg(this,a,b),c.Df&&b.abort()):this.Cc.Od(b)};
h.Wg=function(a,b){var c=b.target;switch(b.type){case "ready":dg(this,a,c);break;case "complete":a:{var d=this.g.get(a);if(7==c.n||c.Da()||d.jd>d.Ce)if(this.dispatchEvent(new cg("complete",this,a,c)),d&&(d.Mf=!0,d.oe)){c=d.oe.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new cg("success",this,a,c));break;case "timeout":case "error":d=this.g.get(a);d.jd>d.Ce&&this.dispatchEvent(new cg("error",this,a,c));break;case "abort":this.dispatchEvent(new cg("abort",this,a,c))}return null};
function dg(a,b,c){var d=a.g.get(b);!d||d.Mf||d.jd>d.Ce?(d&&(a.h.Fa(c,ag,d.Xd),a.g.remove(b)),a.Cc.Od(c)):(d.jd++,c.send(d.uh,d.ud(),d.ra(),d.Kc()))}h.J=function(){$f.m.J.call(this);this.Cc.sa();this.Cc=null;this.h.sa();this.h=null;var a=this.g;id(a,function(a){a.sa()});a.clear();this.g=null};function cg(a,b,c,d){K.call(this,a,b);this.id=c;this.$c=d}E(cg,K);
function bg(a,b,c,d,e,f,g,k,l){vb.call(this);this.Wd=!!l;this.uh=a;this.i=c||"GET";this.g=d;this.h=e||null;this.Ce=t(g)?g:1;this.jd=0;this.Df=this.Mf=!1;this.Xd=b;this.oe=f;this.j=k||Df;this.$c=null}E(bg,vb);h=bg.prototype;h.ud=function(){return this.i};h.ra=function(){return this.g};h.Kc=function(){return this.h};h.Rf=function(){return this.j};h.J=function(){bg.m.J.call(this);delete this.Xd;delete this.oe};function eg(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b};function fg(){this.i=[];this.h=this.g=0};function gg(){};function hg(){this.g=[];this.j=[];this.n=[];this.i=[];this.i[0]=128;for(var a=1;64>a;++a)this.i[a]=0;this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.l=this.h=0}E(hg,gg);
function ig(a,b,c){c||(c=0);var d=a.n;if(x(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.g[0];c=a.g[1];for(var g=a.g[2],k=a.g[3],l=a.g[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.g[0]=a.g[0]+b&4294967295;a.g[1]=a.g[1]+c&4294967295;a.g[2]=a.g[2]+g&4294967295;a.g[3]=a.g[3]+k&4294967295;a.g[4]=a.g[4]+l&4294967295}
hg.prototype.update=function(a,b){t(b)||(b=a.length);for(var c=b-64,d=0,e=this.j,f=this.h;d<b;){if(0==f)for(;d<=c;)ig(this,a,d),d+=64;if(x(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,64==f){ig(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,64==f){ig(this,e);f=0;break}}this.h=f;this.l+=b};
function jg(a){var b=[],c=8*a.l;56>a.h?a.update(a.i,56-a.h):a.update(a.i,64-(a.h-56));for(var d=63;56<=d;d--)a.j[d]=c&255,c/=256;ig(a,a.j);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.g[d]>>e&255,++c;return b};var kg=null,lg=null;function mg(a){this.g=a;this.h=new pf}mg.prototype.set=function(a,b){t(b)?this.g.set(a,qf(this.h,b)):this.g.remove(a)};mg.prototype.get=function(a){var b;try{b=this.g.get(a)}catch(c){return}if(null!==b)try{return of(b)}catch(d){throw"Storage: Invalid value was encountered";}};mg.prototype.remove=function(a){this.g.remove(a)};function ng(){};function og(a){mg.call(this,a)}E(og,mg);function pg(a){this.data=a}function qg(a){return!t(a)||a instanceof pg?a:new pg(a)}function rg(a){a=a.data;if(!t(a))throw"Storage: Invalid value was encountered";return a}og.prototype.set=function(a,b){og.m.set.call(this,a,qg(b))};og.prototype.Lc=function(a){a=og.m.get.call(this,a);if(!t(a)||a instanceof Object)return a;throw"Storage: Invalid value was encountered";};og.prototype.get=function(a){return(a=this.Lc(a))?rg(a):void 0};function sg(a){mg.call(this,a)}E(sg,og);sg.prototype.set=function(a,b,c){if(b=qg(b)){if(c){if(c<C()){sg.prototype.remove.call(this,a);return}b.expiration=c}b.creation=C()}sg.m.set.call(this,a,b)};sg.prototype.Lc=function(a,b){var c=sg.m.Lc.call(this,a);if(c){var d;if(d=!b){d=c.creation;var e=c.expiration;d=!!e&&e<C()||!!d&&d>C()}if(d)sg.prototype.remove.call(this,a);else return c}};function tg(a){mg.call(this,a)}E(tg,sg);function ug(){}E(ug,ng);ug.prototype.ga=function(){var a=0;md(this.Hb(!0),function(){a++});return a};ug.prototype.clear=function(){var a=nd(this.Hb(!0)),b=this;Na(a,function(a){b.remove(a)})};function vg(a,b){mg.call(this,a);this.De=eg(b);this.Kf=new pf}E(vg,tg);h=vg.prototype;h.De=null;h.Kf=null;
function wg(a,b){var c=new hg;c.update(eg(b));c.update(a.De);c=jg(c);if(!w(c))throw Error("encodeByteArray takes an array as a parameter");if(!kg){kg={};lg={};for(var d=0;65>d;d++)kg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d),lg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(d)}for(var d=lg,e=[],f=0;f<c.length;f+=3){var g=c[f],k=f+1<c.length,l=k?c[f+1]:0,m=f+2<c.length,n=m?c[f+2]:0,p=g>>2,g=(g&3)<<4|l>>4,l=(l&15)<<2|n>>6,n=n&63;
m||(n=64,k||(l=64));e.push(d[p],d[g],d[l],d[n])}return e.join("")}
function xg(a,b,c,d){if(!(0<b.length))throw Error("Non-empty salt must be provided");var e=new hg;e.update(eg(c));e.update(b);e.update(a.De);a=new fg;var e=jg(e),f;f||(f=e.length);b=a.i;for(c=0;256>c;++c)b[c]=c;var g=0;for(c=0;256>c;++c){var g=g+b[c]+e[c%f]&255,k=b[c];b[c]=b[g];b[g]=k}a.g=0;a.h=0;f=a.g;e=a.h;b=a.i;for(c=0;1536>c;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=g;a.g=f;a.h=e;d=eg(d);var l;l||(l=d.length);f=a.g;e=a.h;b=a.i;for(c=0;c<l;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=
g,d[c]^=b[b[f]+b[e]&255];a.g=f;a.h=e;return String.fromCharCode.apply(null,d)}h.set=function(a,b,c){if(t(b)){for(var d=[],e=0;8>e;++e)d[e]=Math.floor(256*Math.random());b=new pg(xg(this,d,a,qf(this.Kf,b)));b.salt=d;vg.m.set.call(this,wg(this,a),b,c)}else vg.prototype.remove.call(this,a)};
h.Lc=function(a,b){var c=vg.m.Lc.call(this,wg(this,a),b);if(c){var d=rg(c),e=c.salt;if(!x(d)||!u(e)||!e.length)throw"Storage: Invalid value was encountered";d=xg(this,e,a,d);try{c.data=of(d)}catch(f){throw"Storage: The value could not be decrypted";}return c}};h.remove=function(a){vg.m.remove.call(this,wg(this,a))};function yg(a){this.g=a}E(yg,ug);h=yg.prototype;h.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};h.get=function(a){a=this.g.getItem(a);if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};h.remove=function(a){this.g.removeItem(a)};h.ga=function(){return this.g.length};
h.Hb=function(a){var b=0,c=this.g,d=new kd;d.next=function(){if(b>=c.length)throw jd;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){this.g.clear()};h.key=function(a){return this.g.key(a)};function zg(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}E(zg,yg);var Ag=!H||H&&9<=Yb,Bg=!Jb&&!H||H&&H&&9<=Yb||Jb&&Wb("1.9.1"),Cg=H&&!Wb("9");function Dg(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]}function Eg(a,b){for(var c=Dg(a),d=bb(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)Ua(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e}function Fg(a,b){var c=Dg(a),d=bb(arguments,1),e=Gg(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Gg(a,b){return Oa(a,function(a){return!Ua(b,a)})};function Hg(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}Hg.prototype.fa=function(){return new Hg(this.x,this.y)};Hg.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Ig(a,b){return new Hg(a.x-b.x,a.y-b.y)}Hg.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};Hg.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function Jg(a,b){this.width=a;this.height=b}h=Jg.prototype;h.fa=function(){return new Jg(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.Pa=function(){return!(this.width*this.height)};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Kg(a){return a?new Lg(Mg(a)):qa||(qa=new Lg)}function Ng(a,b){var c=b||document;c.querySelectorAll&&c.querySelector?c=c.querySelector("."+a):(c=b||document,c=(c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Og(document,"*",a,b))[0]);return c||null}
function Og(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&Ua(b.split(/\s+/),c)&&(d[e++]=g);d.length=e;return d}return a}
function Pg(a,b){kc(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Qg?a.setAttribute(Qg[d],b):ra(d,"aria-")||ra(d,"data-")?a.setAttribute(d,b):a[d]=b})}var Qg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Rg(a){return Kb||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Sg(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||A(f)&&0<f.nodeType?d(f):Na(Tg(f)?Za(f):f,d)}}function Ug(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Vg(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function Wg(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Xg(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Yg(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Mg(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Zg(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Ug(a),a.appendChild(Mg(a).createTextNode(String(b)))}var $g={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ah={IMG:" ",BR:"\n"};function bh(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}function ch(a){a=a.tabIndex;return y(a)&&0<=a&&32768>a}
function dh(a){var b=[];eh(a,b,!1);return b.join("")}function eh(a,b,c){if(!(a.nodeName in $g))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ah)b.push(ah[a.nodeName]);else for(a=a.firstChild;a;)eh(a,b,c),a=a.nextSibling}function Tg(a){if(a&&"number"==typeof a.length){if(A(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}
function fh(a){return gh(a,function(a){return Ua(Dg(a),"sidebar")})}function gh(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Lg(a){this.g=a||r.document||document}h=Lg.prototype;h.o=function(a){return x(a)?this.g.getElementById(a):a};
h.t=function(a,b,c){var d=this.g,e=arguments,f=e[0],g=e[1];if(!Ag&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',xa(g.name),'"');if(g.type){f.push(' type="',xa(g.type),'"');var k={};tc(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:u(g)?Eg.apply(null,[f].concat(g)):Pg(f,g));2<e.length&&Sg(d,f,e);return f};h.createElement=function(a){return this.g.createElement(a)};function hh(a){return"CSS1Compat"==a.g.compatMode}
function ih(a){var b=a.g;a=Rg(b);b=b.parentWindow||b.defaultView;return H&&Wb("10")&&b.pageYOffset!=a.scrollTop?new Hg(a.scrollLeft,a.scrollTop):new Hg(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}h.appendChild=function(a,b){a.appendChild(b)};h.mh=Vg;h.getChildren=function(a){return Bg&&void 0!=a.children?a.children:Oa(a.childNodes,function(a){return 1==a.nodeType})};h.Qf=Xg;h.contains=Yg;H&&Wb(8);function jh(a,b,c){vb.call(this);this.h=a;this.n=b||0;this.i=c;this.l=B(this.j,this)}E(jh,vb);jh.prototype.g=0;jh.prototype.J=function(){jh.m.J.call(this);this.stop();delete this.h;delete this.i};function kh(a){a.stop();a.g=nf(a.l,t(void 0)?void 0:a.n)}jh.prototype.stop=function(){0!=this.g&&r.clearTimeout(this.g);this.g=0};function lh(a){a.stop();a.j()}jh.prototype.j=function(){this.g=0;this.h&&this.h.call(this.i)};function mh(a,b,c){vb.call(this);this.j=a;this.i=b;this.h=c;this.g=B(this.rh,this)}E(mh,vb);h=mh.prototype;h.Td=!1;h.da=null;function nh(a){a.da?a.Td=!0:oh(a)}h.stop=function(){this.da&&(r.clearTimeout(this.da),this.da=null,this.Td=!1)};h.J=function(){mh.m.J.call(this);this.stop()};h.rh=function(){this.da=null;this.Td&&(this.Td=!1,oh(this))};function oh(a){a.da=nf(a.g,a.i);a.j.call(a.h)};R("ydn");var ph=Math.pow(2,3),qh=Math.pow(2,6);function rh(){L.call(this);this.key=this.g=void 0}E(rh,L);rh.prototype.T=function(a,b){if("boolean"!=typeof b)throw Error("Invalid value");if("number"!=typeof a||0>a)throw Error("Invalid state");"undefined"==typeof this.g&&(this.g=0);this.g=b?this.g|a:this.g&~a};function sh(a){a.T(ph,!0);nf(function(){this.dispatchEvent(th)},0,a)}var th="a";function uh(a,b,c){K.call(this,a,b);this.url=c}E(uh,K);R("ydn");function vh(a){return!x(a)||ta(a)?{}:JSON.parse(a)}function wh(a){var b;try{b=xh(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function xh(a){return JSON.stringify(a,void 0,void 0)};function yh(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=zh();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function Ah(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=zh();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function Bh(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");}
function zh(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}}return a};function Ch(a){Error.captureStackTrace?Error.captureStackTrace(this,Ch):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}E(Ch,Error);function Dh(a){Error.captureStackTrace?Error.captureStackTrace(this,Dh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}E(Ch,Error);Dh.prototype.name="ydn.error.NotSupportedException";
function Eh(a){Error.captureStackTrace?Error.captureStackTrace(this,Eh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}E(Eh,Error);function Fh(a){Error.captureStackTrace?Error.captureStackTrace(this,Fh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Fh,Error);Fh.prototype.name="ydn.InternalError";
function Gh(a){Error.captureStackTrace?Error.captureStackTrace(this,Gh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}E(Gh,Error);Gh.prototype.name="ydn.error.ConstraintError";function Hh(a){Error.captureStackTrace?Error.captureStackTrace(this,Hh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}E(Ch,Error);
function Ih(a){Error.captureStackTrace?Error.captureStackTrace(this,Ih):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}E(Ih,Error);var Jh,Kh,Lh,Mh;Mh=Lh=Kh=Jh=!1;var Nh=Eb();Nh&&(-1!=Nh.indexOf("Firefox")?Jh=!0:-1!=Nh.indexOf("Camino")||(-1!=Nh.indexOf("iPhone")||-1!=Nh.indexOf("iPod")?Kh=!0:-1!=Nh.indexOf("iPad")?Lh=!0:-1!=Nh.indexOf("Chrome")&&(Mh=!0)));var Oh=Jh,Ph=Kh,Qh=Lh,Rh=Mh;function Sh(a){if(!u(a))throw new Ch("Array required.");if(t(void 0))return a=Pa(a,function(a){return a[void 0]}),Sh(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};function Th(){rh.call(this);this.h=null;Cc(this,"user-login",this.fg,!1,this);Cc(this,"user-logout",this.fg,!1,this);this.s=window.top.location.href.replace(/[?#]\S+/,"")}E(Th,rh);h=Th.prototype;h.logger=R("ydn.api.AbstractUser");h.fg=function(){this.n?(this.n.i(this.l||""),this.isLogin()?this.j&&this.n.h(this.j):this.i&&this.n.g(this.i),Q(this.logger,"Refreshed.")):Q(this.logger,"No UI refreshed.")};
h.toJSON=function(){return{nickname:this.p,email:this.l,is_login:this.h,login_url:this.i,logout_url:this.j,user_id:this.user_id}};h.isLogin=function(){return!0===this.h};h.toString=function(){return"User:"+(!0===this.h?this.l:!1===this.h?"logout":"?")};h.Vc=0;
function Uh(a,b){!b&&a.isLogin()?Q(a.logger,"Already login"):(a.xc||(a.xc=new mh(function(){this.isLogin()?this.xc.stop():1<this.Vc?(N(this.logger,"Cannot login to the API server, tried "+this.Vc+" times."),this.xc.stop(),this.Vc=0):(this.Vc++,this.Sc())},5E3,a)),a.Vc=0,nh(a.xc))}h.refresh=function(a){Uh(this,a)};function Vh(a,b,c){uh.call(this,a,b,c)}E(Vh,uh);function Wh(){Th.call(this)}E(Wh,Th);Wh.prototype.logger=R("ydn.api.User");
Wh.prototype.load=function(a){cf(this.logger,"getting user info");if(a.logout_url)return this.p=a.nickname,this.l=a.email,this.user_id=a.user_id,this.h=a.is_login,this.j=a.logout_url,this.i=a.login_url,cf(this.logger,a.email+" login"),this.j=a.logout_url,this.user_id=a.Id?a.Id.$t:void 0,this.h=!0,this.i=void 0,this.T(qh,!0),sh(this),!0;a.login_url&&(cf(this.logger,"NO user"),this.i=a.login_url,this.h=!1,this.l=this.user_id=this.j=this.p=void 0,this.T(qh,!0),sh(this));return!1};
Wh.prototype.D=function(a,b){Q(this.logger,"Receiving "+(b.Da()?"":"fail")+" login info from server.");if(b.Da()){var c=a.User;if(c){var d;d=this.load(c)?new Vh("user-login",this,this.j):new Vh("user-logout",this,this.i);nf(function(){this.dispatchEvent(d)},0,this)}}else N(this.logger,"Server return error with: "+b.Ja());this.xc&&this.xc.stop()};
function Xh(a,b){var c=new F,d=Yh(Zh);if(!d)return tb("login server not available.");var e={pm:a.s,state:Math.random().toString().substr(2,6)};if(b)for(var f in b)e[f]=b[f];d.request(new $h("/rpc_login","GET",e)).execute(function(a,b){a?c.w(a.User):c.A(b)},a);return c}Wh.prototype.Sc=function(){cf(this.logger,"Sending login request.");var a=Yh(Zh),b=window.top.location.href.replace(/[?#]\S+/,"");a.request(new $h("/rpc_login","GET",{url:b})).execute(B(this.D,this));return!1};function ai(){this.g=C()}var bi=new ai;ai.prototype.set=function(a){this.g=a};ai.prototype.get=function(){return this.g};function ci(a){this.j=a||"";this.l=bi}ci.prototype.g=!0;ci.prototype.h=!1;function di(a){a=new Date(a.l);return ei(a.getFullYear()-2E3)+ei(a.getMonth()+1)+ei(a.getDate())+" "+ei(a.getHours())+":"+ei(a.getMinutes())+":"+ei(a.getSeconds())+"."+ei(Math.floor(a.getMilliseconds()/10))}function ei(a){return 10>a?"0"+a:String(a)}function fi(a,b){var c=(a.l-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function gi(a){ci.call(this,a)}E(gi,ci);gi.prototype.h=!0;
gi.prototype.i=function(a){var b;switch(a.j.value){case Re.value:b="dbg-sh";break;case Se.value:b="dbg-sev";break;case Te.value:b="dbg-w";break;case Ue.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.j," ");this.g&&c.push("[",di(a),"] ");c.push("[",Ea(fi(a,this.l.get())),"s] ");c.push("[",xa(a.h),"] ");c.push('<span class="',b,'">',wa(Ea(xa(a.getMessage()))));this.h&&a.i&&c.push("<br>",wa(Ea(a.g||"")));c.push("</span>");c.push("<br>");return c.join("")};
function hi(a){ci.call(this,a)}E(hi,ci);hi.prototype.i=function(a){var b=[];b.push(this.j," ");this.g&&b.push("[",di(a),"] ");b.push("[",fi(a,this.l.get()),"s] ");b.push("[",a.h,"] ");b.push(a.getMessage());this.h&&a.i&&b.push("\n",a.g);b.push("\n");return b.join("")};function ii(){this.j=B(this.n,this);this.g=new hi;this.g.g=!1;this.h=this.g.h=!1;this.i="";this.l={}}function ji(a){var b=ki;if(a!=b.h){var c=gf();a?af(c,b.j):(c=c.g)&&Wa(c,b.j);b.h=a}}ii.prototype.n=function(a){if(!this.l[a.h]){var b=this.g.i(a),c=li;if(c)switch(a.j){case Re:mi(c,"info",b);break;case Se:mi(c,"error",b);break;case Te:mi(c,"warn",b);break;default:mi(c,"debug",b)}else window.opera?window.opera.postError(b):this.i+=b}};var li=window.console;
function mi(a,b,c){if(a[b])a[b](c);else a.log(c)};function ni(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}h=ni.prototype;h.fa=function(){return new ni(this.top,this.right,this.bottom,this.left)};h.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};h.contains=function(a){return this&&a?a instanceof ni?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
h.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};h.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function oi(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}h=oi.prototype;h.fa=function(){return new oi(this.left,this.top,this.width,this.height)};h.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};h.contains=function(a){return a instanceof oi?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
h.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function pi(a,b){var c=Mg(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function qi(a,b){return pi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function ri(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}H&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function si(a){if(H&&!(H&&8<=Yb))return a.offsetParent;var b=Mg(a),c=qi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=qi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function ti(a){for(var b=new ni(0,Infinity,Infinity,0),c=Kg(a),d=c.g.body,e=c.g.documentElement,f=Rg(c.g);a=si(a);)if(!(H&&0==a.clientWidth||Kb&&0==a.clientHeight&&a==d||a==d||a==e||"visible"==qi(a,"overflow"))){var g=ui(a),k;k=a;if(Jb&&!Wb("1.9")){var l=parseFloat(pi(k,"borderLeftWidth"));if(vi(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(pi(k,"borderRightWidth")),l=l+m;k=new Hg(l,parseFloat(pi(k,"borderTopWidth")))}else k=new Hg(k.clientLeft,k.clientTop);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(c.g.parentWindow||c.g.defaultView||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new Jg(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function ui(a){var b,c=Mg(a),d=qi(a,"position"),e=Jb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Hg(0,0),g;b=c?Mg(c):document;g=!H||H&&9<=Yb||hh(Kg(b))?b.documentElement:b.body;if(a==g)return f;if(a.getBoundingClientRect)b=ri(a),a=ih(Kg(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(Kb&&"fixed"==qi(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ib||Kb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=si(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,Ib&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function wi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function xi(a){var b=yi;if("none"!=qi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function yi(a){var b=a.offsetWidth,c=a.offsetHeight,d=Kb&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new Jg(b,c):(a=ri(a),new Jg(a.right-a.left,a.bottom-a.top))}function zi(a){var b=ui(a);a=xi(a);return new oi(b.x,b.y,a.width,a.height)}
function S(a,b){a.style.display=b?"":"none"}function vi(a){return"rtl"==qi(a,"direction")}var Ai=Jb?"MozUserSelect":Kb?"WebkitUserSelect":null;function Bi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ai){if(b=b?"none":"",a.style[Ai]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ai]=b}}else if(H||Ib)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function Di(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function Ei(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Di(a,c):0}var Fi={thin:2,medium:4,thick:6};
function Gi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Fi?Fi[c]:Di(a,c)}function Hi(a){if(H&&!(H&&9<=Yb)){var b=Gi(a,"borderLeft"),c=Gi(a,"borderRight"),d=Gi(a,"borderTop");a=Gi(a,"borderBottom");return new ni(d,c,a,b)}b=pi(a,"borderLeftWidth");c=pi(a,"borderRightWidth");d=pi(a,"borderTopWidth");a=pi(a,"borderBottomWidth");return new ni(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Ii=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ji(a){this.l=B(this.n,this);this.h=new gi;this.i=this.h.g=!1;this.g=a;this.j=this.g.ownerDocument||this.g.document;a=Kg(this.g);var b=null,c=a.g;if(H&&c.createStyleSheet)a=b=c.createStyleSheet(),H&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=Og(a.g,"head",void 0,void 0)[0];c||(b=Og(a.g,"body",void 0,void 0)[0],c=a.t("head"),b.parentNode.insertBefore(c,b));var d=b=a.t("style");H&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.g.className+=" logdiv"}
Ji.prototype.n=function(a){var b=100>=this.g.scrollHeight-this.g.scrollTop-this.g.clientHeight,c=this.j.createElement("div");c.className="logmsg";c.innerHTML=this.h.i(a);this.g.appendChild(c);b&&(this.g.scrollTop=this.g.scrollHeight)};Ji.prototype.clear=function(){this.g.innerHTML=""};var ki=null,Ki=null;R("ydn.debug");function Li(a,b,c){if(y(b))b=new Qe("log",b);else if(x(b)){b=b.toUpperCase();if(!$e){$e={};for(var d=0,e;e=Ze[d];d++)$e[e.value]=e,$e[e.name]=e}b=$e[b]||null}else b=We;R(a||"ydn").h=b;t(c)?Ki||(a=Ki=new Ji(c),!0!=a.i&&(c=gf(),af(c,a.l),a.i=!0),gf().h=Te):ki||Ki||(ki=new ii,ji(!0),gf().h=Te)}var Mi=null;function Ni(a){Mi&&setTimeout(function(){Mi.log(a)},10)};var Zh="login",Oi=R("ydn.http"),Pi={},Qi=[];var Ri,Si={},Ti=[];function Ui(a,b){Si[b||"default"]=a}function Yh(a){if(!t(a))return Si["default"];for(var b=a,c=0;c<Ti.length;c++){var d=(0,Ti[c])(a);if(d){b=d;break}}return Si[b]||null}function Vi(){Ri||(Ri=new $f);return Ri}function Wi(a,b,c,d){x(a)?this.zc=a:(this.zc=null,this.status=a,this.body=b,this.headers=c||{},this.g=d)}function Xi(a){if(a.zc){var b=vh(a.zc);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.g=b.statusText;a.headers=b.headers;a.body=b.body;a.zc=null}}
Wi.prototype.N=function(){Xi(this);return this.status};Wi.prototype.Da=function(){Xi(this);return 200<=this.status&&400>this.status};Wi.prototype.Ja=function(){Xi(this);return this.g||""};function Yi(a){Xi(a);return a.body}function Zi(a,b){Xi(a);return a.headers[b]}Wi.prototype.Kc=function(){Xi(this);return this.headers};
function $i(a){Xi(a);if("application/json"==Zi(a,"content-type"))return!0;a=a.body;return x(a)&&!ta(a)?/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")):!1}function aj(a){return a instanceof Wi?a:x(a)?new Wi(a):new Wi(a.status,a.body,a.headers,a.statusText)}function $h(a,b,c,d,e){this.path=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=e}
var bj=null;function cj(a,b,c,d){this.l=t(b)?b:Vi();this.j="sr"+dj++;this.n=c||0;this.p=!!d;this.g=a}var dj=0;cj.prototype.F=function(){return this.j};
cj.prototype.execute=function(a,b){var c=this.g,d=new ud(c.path),e;for(e in c.params)d.g.set(e,c.params[e]);this.l.send(this.j,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.Q&&4==Nf(d)?d.Q.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=Of(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(A(l))e=l;else if(x(l))try{e=vh(l)}catch(n){e=l}k=new Wi(d.N(),
l,k,d.Ja());bj&&!k.Da()&&bj.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.path,uri:String(d.D),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:k.N(),statusText:k.Ja(),body:Yi(k),headers:k.Kc()}});a&&(a.call(b,e,k),a=null)},this.n,void 0,this.p);this.l=null};cj.prototype.toString=function(){return"HTTPRequest:"+this.j};function ej(a,b,c){this.h=a;this.i=b;this.g=null;this.vh=t(c)?c:!0}ej.prototype.request=function(a){return new fj(a,this)};function fj(a,b){cj.call(this,a,b.i);this.parent=b}E(fj,cj);var gj=new Wi(0,null,null,"No access token");
fj.prototype.execute=function(a,b){function c(){this.vh?d.g.headers.Authorization="Bearer "+d.parent.g.access_token:d.g.params.access_token=d.parent.g.access_token}var d=this;d.parent.g&&d.parent.g.expires>C()?(c(),fj.m.execute.call(this,function(e,f){401==f.N()?hj(d.parent.h).u(function(e){d.parent.g=e;c();fj.m.execute.call(d,a,b)},function(){d.parent.g=null;a.call(b,null,gj)},d):a.call(b,e,f)},this)):hj(this.parent.h).u(function(e){d.parent.g=e;c();fj.m.execute.call(this,a,b)},function(){d.parent.g=
null;a.call(b,null,gj)},this)};function T(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}T.prototype.lower=void 0;T.prototype.upper=void 0;T.prototype.toJSON=function(){return ij(this)};function jj(a){return kj(a)}T.only=function(a){return new T(a,a,!1,!1)};T.bound=function(a,b,c,d){return new T(a,b,c,d)};T.upperBound=function(a,b){return new T(void 0,a,void 0,!!b)};T.lowerBound=function(a,b){return new T(a,void 0,!!b,void 0)};
function lj(a){var b;if(u(a))b=Za(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a=a-2.220460492503131E-16;else return T.only(a);return T.bound(a,b,!1,!0)}function ij(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function mj(a){if(null==a)return null;if(a instanceof T)return a;if(A(a))return new T(a.lower,a.upper,a.lowerOpen,a.upperOpen);throw new M("Invalid key range: "+a+" of type "+typeof a);}
function kj(a){return null!=a?null!=a.upper&&null!=a.lower?nj.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?nj.upperBound(a.upper,a.upperOpen):null!=a.lower?nj.lowerBound(a.lower,a.lowerOpen):null:null}function oj(a){if(a instanceof T)return"";if(null!=a){if(A(a)){for(var b in a)if(a.hasOwnProperty(b)&&!Ua(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
T.prototype.le=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return T.bound(b,c,d,e)};function pj(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function qj(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==rj(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(sj(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(sj(c.upper,b)))}else d.push(a+" = ?"),e.push(sj(c.lower,b))}var nj=r.IDBKeyRange||r.webkitIDBKeyRange||T;function tj(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function uj(a,b,c){if(a)if(-1==b.indexOf("."))a[b]=c;else{b=b.split(".");for(var d=b.pop(),e;e=b.shift();)A(a[e])||(a[e]={}),a=a[e];a[d]=c}}var vj={};
function wj(a){a=[a];for(var b=new xj,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(vj);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),yj(b,e);else if(e instanceof Date)c+=2,b.write(c),yj(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===vj)b.write(0);else return"";c=0}return b.trim().toString()}function zj(a){for(var b=[],c=b,d=[],e,f,g=new Aj(a);null!=g.read();)if(0===g.current)c=d.pop();else{if(null===g.current)break;do{e=g.current/4|0;a=g.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.current+4)g.read();else break}while(1);1===a?c.push(Bj(g)):2===a?c.push(new Date(Bj(g))):3===a?c.push(Cj(g)):0===a&&(c=d.pop())}return b[0]}
function yj(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Bj(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Cj(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.read();if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Aj(a){this.current=null;this.g=a;this.h=this.g.length-1;this.index=-1}
Aj.prototype.read=function(){return this.current=this.index<this.h?parseInt(this.g[++this.index]+this.g[++this.index],16):null};function xj(){this.g=[];this.h=void 0}xj.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.h=arguments[b].toString(16),this.g.push(2===this.h.length?this.h:this.h="0"+this.h)};xj.prototype.trim=function(){for(var a=this.g.length;"00"===this.g[--a];);this.g.length=++a;return this};xj.prototype.toString=function(){return this.g.length?this.g.join(""):""};
function Dj(a,b){var c=wj(a),d=wj(b);return c>d?1:c==d?0:-1};function Ej(a,b,c,d,e){if(!(b instanceof T))if(x(b)&&t(c)){var f,g,k,l;if("starts"==b||"^"==b)b=lj(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)g=c,l=">"==b;else if("="==b||"=="==b)f=g=c;else throw new M("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)g=e,l=">"==d;else if(t(d))throw new M("invalid op2: "+d);b=T.bound(g,f,l,k)}}else b=mj(b);this.g=b;this.h=a}Ej.prototype.h="";Ej.prototype.Jc=function(){return this.h};
Ej.prototype.le=function(a){if(this.h!=a.h)return null;a=null!=this.g&&null!=a.g?this.g.le(a.g):this.g||a.g;return new Ej(this.h,a)};var Fj={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Gj=r.IDBRequest&&"LOADING"in r.IDBRequest?r.IDBTransaction:r.webkitIDBRequest&&"LOADING"in r.webkitIDBRequest&&1===r.webkitIDBTransaction.READ_WRITE?r.webkitIDBTransaction:Fj,Hj=Gj.READ_ONLY,Ij=Gj.READ_WRITE,Jj=Gj.VERSION_CHANGE,Kj=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;function Lj(a,b,c,d){vb.call(this);this.i=c;this.P=c.getName();this.zb=void 0;this.j=!1;this.ba=null;this.n=a;this.zf=b;this.Ga=0;this.ia=this.D=!1;this.ca=d||4;this.p=this.h=this.g=void 0;this.O=function(){throw new Sc;};this.U=function(){throw new Sc;};this.Ub=function(){}}E(Lj,vb);h=Lj.prototype;
h.init=function(a,b,c,d,e){if(t(b)){a=this.i;var f,g=b;u(b)?(f=Mj(a,b),g=b.join(", ")):f=Nj(a,b);if(!f)throw new M('require index "'+g+'" not found in store "'+a.getName()+'"');this.zb=f.getName()}this.j=x(this.zb);this.ba=c||null;this.Ga=0;this.ia=this.D=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.Fb=d;this.Rc=e;this.p=this.h=this.g=void 0};h.Fb="";h.ba=null;h.unique=!1;h.reverse=!1;h.Rc=!0;h.logger=R("ydn.db.core.req.AbstractCursor");
h.hc=function(a,b,c){null==a&&(P(this.logger,this+" finished."),this.D=!0);this.g=a;this.h=b;this.p=c;this.Ga++;this.D?(Q(this.logger,this+" DONE."),this.O(),Oj(this)):(Q(this.logger,this+" new cursor position {"+(this.j?this.g+", "+this.h:this.g)+"}"),this.O(this.g))};h.J=function(){this.n=null};h.toString=function(){return"Cursor:"+this.P+(t(this.zb)?":"+this.zb:"")+"["+(this.n?"":"~")+this.zf+"]"};
function Oj(a){null!=a.h?a.h=Pj(a.h):a.h=void 0;null!=a.g?a.g=Pj(a.g):a.g=void 0;a.Ub(a.ia,a.g,a.h)}function Qj(a){a.ia=!0;Q(a.logger,a+": exit");Oj(a)}h.ga=function(){return this.Ga};h.ja=function(){return this.j?this.h:this.g};h.V=function(){return this.Rc?this.ja():this.p};h.md=function(){};function Rj(){};function Sj(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.i=a;this.h=b;this.n=g;this.p=!!this.h;if(t(d)&&!fa(d))throw new M("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!fa(e))throw new M("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!fa(f))throw new M("key_only value must be a boolean, but "+typeof f+" found");this.g=t(f)?f:!!x(this.h);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.l=
a;if(d=oj(c))throw new M("Invalid key range: "+d);this.j=kj(c);this.s=Tj;this.K=NaN}E(Sj,Rj);Sj.prototype.g=!0;function Uj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Sj.call(this,a,b,c,d,e,!0)}E(Uj,Sj);function Vj(a,b,c){if(3<arguments.length)throw new M("too many argument");Sj.call(this,a,void 0,b,c,void 0,!1)}E(Vj,Sj);function Wj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Sj.call(this,a,b,c,d,e,!1)}E(Wj,Sj);var Tj="init";h=Sj.prototype;h.logger=R("ydn.db.Iterator");
h.I=function(){return this.i};h.fa=function(){var a=new Sj(this.i,this.h,this.j,Xj(this),Yj(this),this.g,this.n);a.K=this.K;return a};h.unique=function(a){return new Sj(this.i,this.h,this.j,Xj(this),a,this.g,this.n)};h.toJSON=function(){return{store:this.i,index:this.h,keyRange:this.j?ij(this.j):null,direction:this.l}};
h.toString=function(){var a=t(this.n)?":"+this.n.join(","):t(this.h)?":"+this.h:"",a=a+pj(this.j);this.s!=Tj&&(a+=this.s+"{"+this.D,this.p&&(a+=", "+this.H),a+="}");var b=this.p?"Index":"",b=b+(this.g?"Key":"Value");return b+"Iterator:"+this.i+a};h.reverse=function(){return new Sj(this.i,this.h,this.j,!Xj(this),Yj(this),this.g,this.n)};function Xj(a){return"prev"===a.l||"prevunique"===a.l}function Yj(a){return"nextunique"===a.l||"prevunique"===a.l}
h.load=function(a){a=a[0];a.init(this.i,this.n||this.h,this.j,this.l,this.g);this.s="busy";var b=this;a.Ub=function(a,d,e){b.D=d;b.H=e;b.s=a?"rest":"done"};a.openCursor(this.D,this.H);return a};h.ja=function(){return this.H};h.stores=function(){return[this.i]};function Zj(a,b,c){Tc.call(this,b,c);this.K=a;this.p=[];this.D=[];this.Sa=[];this.g=null;this.nb="";this.ia=0}E(Zj,Tc);h=Zj.prototype;h.nb="";h.logger=R("ydn.db.Request");function ak(a,b,c){a.g=b;a.nb=c;P(a.logger,a+" BEGIN");if(b){for(c=0;c<a.D.length;c++)a.D[c][0].call(a.D[c][1],b);a.D.length=0}P(a.logger,a+" END")}function bk(a){var b=new Zj(a.K);a.ia++;ak(b,a.g,a.nb+"C"+a.ia);return b}h.ud=function(){return this.K};
h.abort=function(){if(this.g)if(P(this.logger,this+" aborting"),ga(this.g.abort))this.g.abort();else if(ga(this.g.executeSql))this.g.executeSql("ABORT",[],function(){},function(){return!0});else throw new Pc;else throw new ck("No active transaction");};function U(a,b,c){var d=a.Sa.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){U(a,b,c)}):c?a.A(b):a.w(b)}function dk(a,b,c){a.Sa.push([b,c])}function V(a,b,c){a.g?b.call(c,a.g):a.D.push([b,c])}
h.w=function(a){P(this.logger,this+" SUCCESS");Zj.m.w.call(this,a);this.g=null;this.nb=this.nb};h.A=function(a){P(this.logger,this+" ERROR");Zj.m.A.call(this,a);this.g=null;this.nb=this.nb};function W(a){var b="";a.nb&&(b=a.g?"*":"",b="["+a.nb+b+"]");return a.K+b}function ek(a,b){var c=new Zj(a);U(c,b);return c}h.toString=function(){return"Request:"+W(this)};
h.ue=function(){this.n&&this.h&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.i&&(this.i.O--,delete this.i);for(var a=this.j,b=!1;this.s.length&&!this.H;){var c=this.s.shift(),d=c[0],e=c[1],c=c[2];if(d=this.l?e:d)d=d.call(c||this.$,a),t(d)&&(this.l=this.l&&(d==a||d instanceof Error),this.j=a=d),a instanceof F&&(this.H=b=!0)}this.j=a;b&&(a.u(B(this.nd,this,!0),B(this.nd,this,!1)),a.If=!0)};
h.toJSON=function(){var a=(this.nb||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.K?this.K.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var rj=Kj&&Kj.cmp?B(Kj.cmp,Kj):Dj,fk=[];(function(a){if(null!=a&&!("push"in a))throw new Ch('output receiver object must have "push" method.');}).prototype.logger=R("ydn.db.algo.AbstractSolver");function gk(a){Error.captureStackTrace?Error.captureStackTrace(this,gk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}E(gk,Error);gk.prototype.name="ConstraintError";gk.prototype.toString=function(){return this.name+": "+this.message};function hk(a){Error.captureStackTrace?Error.captureStackTrace(this,hk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}E(hk,Error);
hk.prototype.toString=function(){return this.name+": "+this.message};function ik(a){Error.captureStackTrace?Error.captureStackTrace(this,ik):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}E(ik,Error);ik.prototype.name="ydn.db.VersionError";ik.prototype.toString=function(){return this.name+": "+this.message};function jk(a){Error.captureStackTrace?Error.captureStackTrace(this,jk):this.stack=Error().stack||"";a&&(this.message=String(a))}E(jk,Error);
jk.prototype.name="ydn.db.InternalError";function ck(a){Error.captureStackTrace?Error.captureStackTrace(this,ck):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}E(ck,Error);function kk(a){Error.captureStackTrace?Error.captureStackTrace(this,kk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}E(kk,Error);
function lk(a){Error.captureStackTrace?Error.captureStackTrace(this,lk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}E(lk,Error);lk.prototype.name="NotFoundError";lk.prototype.toString=function(){return this.name+": "+this.message};function mk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,mk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}E(mk,Error);
mk.prototype.toString=function(){return this.name+": "+this.message};function nk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,nk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}E(nk,Error);nk.prototype.toString=function(){return this.name+": "+this.message};function ok(a){Error.captureStackTrace?Error.captureStackTrace(this,ok):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
E(ok,Error);function pk(a){Error.captureStackTrace?Error.captureStackTrace(this,pk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}E(pk,Error);function qk(a,b,c){var d;if(A(a))d=a.store,b=a.id,null!=a.parent&&(c=new qk(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new qk(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.P=d;this.id=b;this.parent=c||null}h=qk.prototype;h.toJSON=function(){var a={store:this.P,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.P+"^:"+this.id};h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.I=function(){return this.P};h.F=function(){return this.id};h.getParent=function(){return this.parent};function rk(a){return y(a)||x(a)||u(a)&&Ra(a,rk)||a instanceof Date}function Pj(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function sk(a,b){this.g=b}sk.prototype.logger=R("ydn.db.crud.req.RequestExecuto");sk.prototype.toString=function(){return"RequestExecutor"};function tk(a,b,c,d,e,f){this.ia=a;this.Ga=b;this.h=this.i=0;this.$=d;this.U=e;this.l=c||uk;this.K=f||0;this.s=!1;this.H=0}h=tk.prototype;h.logger=R("ydn.db.tr.Thread");h.oh=function(a){if("complete"==a||"abort"==a)this.s?(Q(this.logger,"tx "+this.i+" committed"),this.s=!1):(Q(this.logger,"Generator done "+this.s),U(null,this.i,"complete"!=a))};
h.pc=function(){if(t(this.D))if(this.D)Q(this.logger,"Receive to commit tx "+this.i+" on yield "+this.H),this.s=!0;else throw new Rc("Coroutine transaction thread has been ended");else throw new Rc("Transaction thread not running in a generator");};
function vk(a,b){a.s?(Q(a.logger,"waiting tx to be committed for yielding "+a.H),setTimeout(function(){a.Qb(function(){Q(a.logger,"sending result to yield "+a.H);a.D.next(b)},a.$,a.U,B(a.oh,a))},4)):(Q(a.logger,"sending result to yield "+a.H),a.D.next(b));a.H++}h.request=function(a){a=new Zj(a);this.D&&a.u(function(a){vk(this,a)},function(a){var c=a;a instanceof Error||(c=Error(),c.error=a);vk(this,c)},this);return a};h.type=function(){return wk(this.ia)};h.L=function(){return this.ia};
h.La=function(){return"B"+this.Ga+"T"+this.i};var uk="single";function xk(a){if(a)if(ga(a.abort))a.abort();else if(ga(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Pc;else throw new ck("No active transaction");};function yk(a){this.j=a;this.g=null;this.h=0}yk.prototype.logger=R("ydn.db.tr.Mutex");yk.prototype.ib=null;yk.prototype.Ya=null;yk.prototype.toString=function(){return"Mutex:"+("B"+this.j+"T"+this.h)+(this.g?"*":"")};function zk(a,b,c,d,e,f){tk.call(this,a,b,c,d,e,f);this.j=[];this.n=[];this.p=null;this.g=new yk(b);this.O=f||0;this.ca=!1}E(zk,tk);h=zk.prototype;h.logger=R("ydn.db.tr.Serial");
function Ak(a,b,c){if("multi"==a.l)a:if(a=a.g,!a.ib||!a.mode||c!=a.mode&&(a.mode!=Ij||c!=Hj)||b.length>a.ib.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.ib.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.l)a:if(a=a.g,a.ib&&a.mode&&c==a.mode&&a.ib.length==b.length){for(c=0;c<b.length;c++)if(-1==a.ib.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.l?!0:!1;return b}
function Bk(a){var b=0<a.j.length?a.j[0].ib:null,c=0<a.j.length?a.j[0].mode:null;return null!=b&&null!=c?Ak(a,b,c):!1}function Ck(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({rd:b,ib:c,mode:d,Ya:e})}h.abort=function(){P(this.logger,this+": aborting");xk(this.p)};
h.Qb=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new M("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new M("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.Sa&&!Ua(this.Sa,e[f]))throw new M('store name "'+f+e[f]+'" in scope of '+this);}}else throw new M("store names must be an array");var g=t(c)?c:Hj,k=this;if(this.g.g||!Dk(this.L())&&this.ca)Ck(this,a,b,g,d);else{var l=this.La();d&&this.n.push(d);
if(this.O&&this.i>=this.O)throw new Rc("Exceed maximum number of transactions of "+this.O);this.ca=!0;Ek(this.L(),function(c){var d=k.g;d.g=c;d.i=!1;d.ib=b;d.mode=g;d.h++;d.Ya=null;l=k.La();cf(k.logger,l+" BEGIN "+xh(b)+" "+g);a(k);for(a=null;Bk(k);)c=k.j.shift(),c.Ya&&k.n.push(c.Ya),Q(k.logger,"pop tx queue"+(k.j.length+1)+" reusing T"+k.i),c.rd()},e,g,function(a,b){cf(k.logger,l+" "+a);var c=k.g;c.g?(c.g=null,c.ib=null,c.mode=null,ga(c.Ya)&&c.Ya(a,b),c.Ya=null):N(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.n.length;c++)(0,k.n[c])(a,b);k.n.length=0;(c=k.j.shift())&&k.Qb(c.rd,c.ib,c.mode,c.Ya);k.h=0})}};h.La=function(){return"B"+this.g.j+"T"+this.g.h};h.request=function(a,b,c,d){var e=zk.m.request.call(this,a,b,c,d);a=c||Hj;var f=this;this.g.g&&!this.g.i&&Ak(this,b,a)?(b=this.g.g,this.h++,ak(e,b,this.La()+"R"+this.h),d&&this.n.push(d)):f.Qb(function(){var a=f.g.g;f.h++;ak(e,a,f.La()+"R"+f.h)},b,a,d);return e};
h.nc=function(a,b,c,d,e){d=d||Hj;var f=this,g;if(f.g.g&&!f.g.i&&Ak(this,c,d)){var k=f.g.g;f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(k,g,function(b,c){f.p=k;c?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.p=null});P(f.logger,g+" END");b=null}else f.Qb(function(){var c=f.g.g;f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.p=c;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.p=null});P(f.logger,g+" END");b=null},c,d,e)};h.getName=function(){return this.L().getName()};
h.toString=function(){return"Serial:"+this.La()+(this.p?"*":"")};function Fk(a,b){zk.call(this,a,b)}E(Fk,zk);Fk.prototype.logger=R("ydn.db.tr.AtomicSerial");Fk.prototype.request=function(a,b,c){var d,e,f,g=Fk.m.request.call(this,a,b,c,function(a,b){g.g=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new pk;U(g,c,!0)}});dk(g,function(a,b,c){f=b;e=a;d=c});return g};
Fk.prototype.nc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});Fk.m.nc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new pk;a.A(d)}e&&(e(b,c),e=void 0)})};Fk.prototype.toString=function(){return"Atomic"+Fk.m.toString.call(this)};function Gk(a,b,c,d){this.j=a;this.h=b;this.g=c;this.$a=d;this.i=null}h=Gk.prototype;h.logger=R("ydn.db.tr.DbOperator");h.abort=function(){this.g.abort()};function X(a){a.i||(a.i=a.j.H());return a.i}h.L=function(){return this.j};h.pc=function(){this.g.pc()};
function Hk(a,b){var c=a.L(),d=b instanceof Ik?b:Jk(b),e=b.name,f=Y(c.h,e);if(0==Kk(d,f).length)sb(!1);else if(f=f?"update":"add",c.h instanceof Lk)Mk(c.h,d),c.i?(c.i.Zd(),c.i=null,Nk(c)):sb(!1);else throw new Gh("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}h.toString=function(){return"TxStorage:"+this.L().getName()};function Ok(a,b,c,d){Gk.call(this,a,b,c,d)}E(Ok,Gk);h=Ok.prototype;h.logger=R("ydn.db.crud.DbOperator");
h.count=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(t(c)||t(b))throw new M("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!Pk(this.h,f[l]))throw new M('store name "'+f[l]+'" at '+l+" not found.");P(this.logger,"countStores: "+xh(f));e=this.g.request("count",f);V(e,function(){X(this).od(e,f)},this)}else if(x(a)){l=Y(this.h,a);if(!l)throw new M('store name "'+a+'" not found.');if(t(d)&&!fa(d))throw new M('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,A(c)){var m=oj(c);if(m)throw new M("invalid key range: "+wh(c)+" "+m);k=kj(c)}else{if(null!=c)throw new M("invalid key range: "+wh(c)+" of type "+typeof c);k=null}else if(A(b)||null==b)if(A(b)){if(m=oj(b))throw new M("invalid key range: "+wh(b)+" "+m);k=kj(b)}else{if(null!=b)throw new M("key range must be  an object but found "+wh(b)+" of type "+typeof b);k=null}else throw new M('invalid second argument for count "'+wh(c)+'" of type '+typeof b);P(this.logger,"countKeyRange: "+a+" "+(g?g:"")+xh(k));
e=this.g.request("count",f);Qk(l,e,arguments);V(e,function(){X(this).Fc(e,f[0],k,g,!!d)},this)}else throw new M("Invalid store name or store names.");else N(this.logger,"count method requires store name(s)"),l=Rk(this.h),e=this.g.request("count",l),dk(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),V(e,function(){X(this).od(e,f)},this);return e};
h.get=function(a,b){var c=this,d;if(a instanceof qk){var e=a,f=e.I(),g=Y(this.h,f);if(!g){if(this.h.g()){if(Dk(this.L()))return ek("get",void 0);d=new Zj("get");this.L().mb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M("Store: "+f+" not found.");}var k=e.F();P(this.logger,"getByKey: "+f+":"+k);d=this.g.request("get:key",[f]);Qk(g,d,arguments,void 0,this);V(d,function(){X(this).sd(d,f,k)},this)}else if(x(a)&&t(b)){var l=a,g=Y(this.h,l);if(!g){if(this.h.g()){if(Dk(this.L()))return ek("get",
void 0);d=new Zj("get");this.L().mb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M('Store name "'+l+'" not found.');}var m=b;P(this.logger,"getById: "+l+":"+m);d=this.g.request("get",[l]);Qk(g,d,arguments,void 0,this);V(d,function(){X(this).sd(d,l,m)},this)}else throw new M("get require valid input arguments.");return d};
h.keys=function(a,b,c,d,e,f,g){var k,l,m=null,n=!1,p=!1,q=a,s=Y(this.h,q);if(!x(q))throw new M("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.h.g()){if(!s)throw new M('store name "'+q+'" not found.');if(x(b)&&!Nj(s,b))throw new M('index "'+b+'" not found in store "'+q+'".');}if(this.h.g()&&!s)return ek("keys",[]);var v;if(x(b)){var z=b,D=oj(c);if(D)throw new M("invalid key range: "+c+" "+D);m=kj(c);if(y(d))k=d;else{if(t(d))throw new M("limit must be a number");k=100}if(y(e))l=
e;else{if(t(e))throw new M("offset must be a number");l=0}if(t(f))if(fa(f))n=f;else throw new M("reverse must be a boolean");if(t(g))if(fa(g))p=g;else throw new M("unique must be a boolean");P(this.logger,"keysByIndexKeyRange: "+q);v=this.g.request("keys:iter:index",[q]);Qk(s,v,arguments);V(v,function(){X(this).list(v,2,q,z,m,k,l,n,p)},this)}else{if(A(b)){if(D=oj(b))throw new M("invalid key range: "+wh(b)+" "+D);m=kj(b)}else{if(null!=b)throw new M("invalid key range: "+wh(b)+" of type "+typeof b);
m=null}if(y(c))k=c;else{if(t(c))throw new M("limit must be a number");k=100}if(y(d))l=d;else{if(t(d))throw new M("offset must be a number");l=0}if(t(e))if(fa(e))n=e;else throw new M("reverse must be a boolean");P(this.logger,"keysByKeyRange: "+q);v=this.g.request("keys",[q]);Qk(s,v,arguments);V(v,function(){X(this).list(v,2,q,null,m,k,l,n,!1)},this)}return v};
h.values=function(a,b,c,d,e,f,g){var k=this,l,m,n,p=!1,q=!1;if(x(a)){var s=a,v=Y(this.h,s);if(!v){if(this.h.g()){if(Dk(this.L()))return ek("values",[]);l=new Zj("values");this.L().mb(function(){k.values(a,b,c,d,e,f).u(function(a){l.w(a)},function(a){l.A(a)})});return l}throw new lk(s);}if(u(b)){if(t(c)||t(d))throw new M("too many input arguments");var z=b;P(this.logger,"listByIds: "+s+" "+z.length+" ids");l=this.g.request("values:array",[s]);Qk(v,l,arguments,void 0,this);V(l,function(){X(this).bf(l,
s,z)},this)}else if(x(b)){var D=b;if(!Sk(v,D))throw new M('index "'+D+'" not found in store "'+s+'"');var G=oj(c);if(G)throw new M("invalid key range: "+c+" "+G);var J=kj(c);if(t(d))if(y(d))m=d;else throw new M("limit must be a number.");else m=100;if(t(e))if(y(e))n=e;else throw new M("offset must be a number.");else n=0;if(fa(f))p=f;else if(t(f))throw new M("reverse must be a boolean, but "+f);if(t(g))if(fa(g))q=g;else throw new M("unique must be a boolean");P(this.logger,"listByIndexKeyRange: "+
s+":"+D);l=this.g.request("values:iter:index",[s]);Qk(v,l,arguments);V(l,function(){X(this).list(l,4,s,D,J,m,n,p,q)},this)}else{J=null;if(A(b)){if(G=oj(b))throw new M("invalid key range: "+b+" "+G);J=kj(b)}else if(null!=b)throw new M('expect key range object, but found "'+wh(b)+'" of type '+typeof b);if(t(c))if(y(c))m=c;else throw new M("limit must be a number, but "+c+" is "+typeof c);else m=100;if(t(d))if(y(d))n=d;else throw new M("offset must be a number, but "+d+" is "+typeof d);else n=0;if(t(e))if(fa(e))p=
e;else throw new M("reverse must be a boolean, but "+e+" is "+typeof e);P(this.logger,(J?"listByKeyRange: ":"listByStore: ")+s);l=this.g.request("values",[s]);Qk(v,l,arguments);V(l,function(){X(this).list(l,4,s,null,J,m,n,p,!1)},this)}}else if(u(a))if(a[0]instanceof qk){for(var v=[],O=a,G=0;G<O.length;G++){var ia=O[G].I();if(!Pk(this.h,ia)){if(this.h.g())return v=[],v[O.length-1]=void 0,ek("get",v);throw new M("Store: "+ia+" not found.");}Ua(v,ia)||v.push(ia)}P(this.logger,"listByKeys: "+xh(v)+" "+
O.length+" keys");l=this.g.request("values:keys",v);V(l,function(){X(this).Gd(l,O)},this)}else throw new M("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new M("first argument "+a+" is invalid.");return l};
h.list=function(a,b,c,d,e,f,g,k,l){var m=Y(this.h,b);if(!m){if(this.h.g())return ek("get",[]);throw new lk(b);}var n;if(c&&!Sk(m,c))throw new M('index "'+c+'" not found in store "'+b+'"');if(m=oj(d))throw new M("invalid key range: "+d+" "+m);var p=kj(d),q=100;if(y(e))q=e;else if(null!=e)throw new M('limit must be a number but "'+e+'" of type '+typeof e+" found.");var s=0;if(y(f))s=f;else if(null!=f)throw new M('offset must be a number but "'+f+'" of type '+typeof f+" found.");var v=!1;if(fa(g))v=
g;else if(null!=g)throw new M('reverse must be a boolean but "'+g+'" of type '+typeof g+" found.");var z=!1;if(fa(k))z=k;else if(null!=k)throw new M('unique must be a boolean but "'+k+'" of type '+typeof k+" found.");if(s&&l&&t(l[0]))throw new M("offset must not given when initial cursor position is defined");P(this.logger,a+": "+b+":"+c);n=this.g.request("values:iter:index",[b]);V(n,function(){X(this).list(n,a,b,c||null,p,q,s,v,z,l)},this);return n};
h.add=function(a,b,c){var d=x(a)?a:A(a)?a.name:void 0;if(!x(d))throw new M("store name "+d+" must be a string, but "+typeof d);var e=Y(this.h,d);if(!e){if(!this.h.g())throw new M('store name "'+d+'" not found.');e=Jk(A(a)?a:{name:d});P(this.logger,"Adding object store: "+d);Hk(this,e)}else if(this.h.g()&&A(a)&&(a=Jk(a),a=Kk(e,a)))throw new Pc(a);var f;if(!e)throw new M('store name "'+d+'" not found.');if(x(e.keyPath)&&t(c))throw new M("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){P(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Tk(e,b[a]);f=this.g.request("add:array",[d],Ij);V(f,function(){X(this).lb(f,!1,!1,d,b,c)},this);e.Yb&&f.C(function(a){a=new Uk(Vk,this.L(),e.getName(),a,b);this.L().Ua(a)},this)}else if(A(b))a="store: "+d+" key: "+Wk(e,b,c),P(this.logger,"addObject: "+a),Tk(e,b),f=this.g.request("add",[d],Ij),V(f,function(){X(this).lb(f,!1,!0,d,[b],[c])},
this),e.Yb&&f.C(function(a){a=new Xk(Vk,this.L(),e.getName(),a,b);this.L().Ua(a)},this);else throw new M("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function Yk(a,b){var c=x(b)?b:A(b)?b.name:void 0;if(!x(c))throw new M("store name must be a string");var d=Y(a.h,c);if(!d){if(!a.h.g())throw new lk(c);d=Jk(A(b)?b:{name:c});P(a.logger,"Adding object store: "+c);Hk(a,d)}else if(a.h.g()&&A(b)){var e=Jk(b);if(e=Kk(d,e))throw new Pc(e);}if(!d)throw new lk(c);return d}h.load=function(a,b,c){var d=c||",",e=Yk(this,a).getName();a=this.g.request("load",[e]);var f=this;this.g.nc(a,function(a,c,l){X(f).hf(a,c,l,e,b,d)},[e],Ij);return a};
h.search=function(a){var b=Zk(a);Q(this.logger,"query "+a);var c=this.g.request("search",b,Hj);V(c,function(){var b=X(this);$k(a,function(e,f,g,k){var l=bk(c);b.list(l,4,e,f,kj(g),100,0,!1,!1);l.ea(function(b){var d=null;b instanceof Array||(d=b,b=[]);for(var e=0;e<b.length;e++){var f;f=b[e];var g=f.id,g=x(g)?zj(g):g,k=g[3];(f=1==this.type&&k!=this.value?null:new al(this,g[0],g[2],g[1],k,f.k,f.loc))&&a.j.push(f)}a.i--;b=0==a.i?!1:a.h[a.h.length-1].l===this.l?!0:null;!0===b?Uc(c,a):!1===b&&c.w(bl(a));
if(d)throw d;},k)})},this);return c};
h.put=function(a,b,c){var d,e=this;if(a instanceof qk){var f=a,g=f.I(),k=Y(this.h,g);if(!k)throw new M('store "'+g+'" not found.');if(k.keyPath){var l=Wk(k,b);if(null!=l){if(0!=rj(l,f.F()))throw new M("Inline key must be "+f+" but "+l+" found.");}else cl(k,b,f.F());return this.put(g,b)}return this.put(g,b,f.F())}if(u(a)){if(t(c))throw new M("too many arguments");var m=a;if(!t(b))throw new M("record values required");for(var n=b,f=[],g=0,k=m.length;g<k;g++){l=m[g].I();-1==Ma(f,l)&&f.push(l);var p=
Y(this.h,l);if(!p)throw new M('store "'+l+'" not found.');p.keyPath&&cl(p,n[g],m[g].F())}P(this.logger,"putByKeys: to "+xh(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)Tk(p,n[g]);d=this.g.request("put:keys",f,Ij);Qk(p,d,arguments);V(d,function(){X(e).Nd(d,n,m)},this)}else if(x(a)||A(a)){var p=Yk(this,a),q=p.getName();if(p.keyPath&&t(c))throw new M("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){var s=
b,v=c;P(this.logger,"putObjects: "+q+" "+s.length+" objects");for(g=0;g<s.length;g++)Tk(p,s[g]);d=this.g.request("put:array",[q],Ij);Qk(p,d,arguments);V(d,function(){X(this).lb(d,!0,!1,q,s,v)},this);p.Yb&&d.C(function(a){a=new Uk(dl,this.L(),q,a,s);this.L().Ua(a)},this)}else if(A(b)){var z=b,D=c;P(this.logger,"putObject: "+q+" "+D);if(t(r.Blob)&&z instanceof Blob&&p.mc&&!p.keyPath&&0==p.indexes.length&&Kb)d=new Zj("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.g.request("put",
[q],Ij);Qk(p,c,[q,z,D]);V(c,function(){X(e).lb(c,!0,!0,q,[b],[D])},this);c.u(function(a){d.w(a)},function(a){d.A(a)})},f.onerror=function(a){d.A(a)},f.onabort=function(a){d.A(a)},f.readAsDataURL(z);else{Tk(p,z);d=this.g.request("put",[q],Ij);var G=[q,z,D];Qk(p,d,G);V(d,function(){var a=t(D)?[G[2]]:void 0;X(e).lb(d,!0,!0,q,[G[1]],a)},this)}p.Yb&&d.C(function(a){a=new Xk(dl,this.L(),q,a,z);this.L().Ua(a)},this)}else throw new M("put record value must be Object or array of Objects");}else throw new M("the first argument of put must be store name, store schema or array of keys.");
return d};
function el(a,b,c,d){var e=a.$a,f,g;if(x(b)){var k=Y(a.h,b);if(k){if(!k.keyPath&&!k.h&&null==d)throw new M('key required for store "'+b+'"');}else throw new lk(b);for(var l=0;l<c.length;l++)Tk(k,c[l]);f=[b]}else{g=b;f=[];for(var l=0,m=g.length;l<m;l++){var n=g[l].I(),k=Y(a.h,n);-1==Ma(f,n)&&f.push(n);if(!k)throw new lk(n);Tk(k,c[l])}}var p;x(b)?(k=Y(a.h,b),p=e.request("put:array",f,Ij),V(p,function(){X(this).lb(p,!0,!1,b,c,d)},a)):(p=e.request("put:keys",f,Ij),V(p,function(){X(this).Nd(p,c,g)},a));
return p}function fl(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].I();-1==Ma(c,f)&&c.push(f);if(!Pk(a.h,f))throw new lk(f);}var g=a.$a.request("rm:keys",c,Ij);V(g,function(){X(this).Qd(g,b)},a);return g}function gl(a,b,c){var d=a.$a.request("rm:iter",[b],Ij);V(d,function(){X(this).Wc(d,b,c||null)},a);return d}
function hl(a,b,c,d,e,f,g){f=f||100;var k,l=g||0;if(g=Y(a.h,b)){if(c&&!Sk(g,c))throw new lk('index "'+c+'" in store "'+b+'"');}else throw new lk(b);var m=kj(d);x(c)?(k=a.$a.request("values:iter:index",[b]),V(k,function(){X(this).list(k,4,b,c,m,f,l,e,!1)},a)):(k=a.$a.request("values",[b]),V(k,function(){X(this).list(k,4,b,null,m,f,l,e,!1)},a));return k}
function il(a,b){var c=[],d=b.length;if(0==d)return ek("keys",[]);for(var e=0;e<d;e++){var f=b[e].I();-1==Ma(c,f)&&c.push(f);if(!Pk(a.h,f))throw new lk(f);}var g=a.$a.request("keys",c);V(g,function(){X(a).Gd(g,b)},a);return g}
function jl(a,b,c,d,e,f,g,k){var l;e=e||100;var m=Y(a.h,b);if(m){if(c&&!Sk(m,c))throw new lk('index "'+c+'" in store "'+b+'"');}else throw new lk(b);x(c)?(l=a.$a.request("keys:iter:index",[b]),V(l,function(){X(this).list(l,2,b,c,d,e,f,g,k)},a)):(l=a.$a.request("keys",[b]),V(l,function(){X(this).list(l,2,b,null,d,e,f,g,k)},a));return l}
h.clear=function(a,b,c){if(t(c))throw new M("too many input arguments");var d;if(x(a)){c=Y(this.h,a);if(!c)throw new M('store name "'+a+'" not found.');if(A(b)){var e=kj(b);if(null===e)throw new M("clear method requires a valid non-null KeyRange object.");P(this.logger,"clearByKeyRange: "+a+":"+xh(e));d=this.g.request("clear",[a],Ij);Qk(c,d,[a,e]);V(d,function(){X(this).ne(d,a,e)},this)}else{if(t(b))throw new M("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);P(this.logger,"clearByStore: "+a);d=this.g.request("clear",[a],Ij);V(d,function(){X(this).ld(d,[a])},this)}}else if(!t(a)||u(a)&&x(a[0])){var f=a||Rk(this.h);P(this.logger,"clearByStores: "+xh(f));d=this.g.request("clear",f,Ij);V(d,function(){X(this).ld(d,f)},this)}else throw new M('first argument "'+a+'" is invalid.');return d};
h.remove=function(a,b,c){var d;if(x(a)){var e=Y(this.h,a);if(!e)throw new M('store name "'+a+'" not found.');if(t(c))if(x(b)){var f=Nj(e,b);if(!f)throw new M("index: "+b+" not found in "+a);if(A(c)||null===c){var g=kj(c);P(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.g.request("rm:iter:index",[a],Ij);V(d,function(){X(this).jf(d,a,f.getName(),g)},this)}else throw new M("key range "+c+' is invalid type "'+typeof c+'".');}else throw new M('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){P(this.logger,"removeById: "+a+":"+b);d=this.g.request("rm",[a],Ij);var k=[a,b];Qk(e,d,k);V(d,function(){X(this).Pd(d,a,k[1])},this);e.Yb&&d.C(function(b){b=new Xk(kl,this.L(),a,b,void 0);this.L().Ua(b)},this)}else if(A(b))g=kj(b),P(this.logger,"removeByKeyRange: "+a+":"+xh(g)),d=this.g.request("rm:iter",[a],Ij),Qk(e,d,[a,g]),V(d,function(){X(this).Wc(d,a,g)},this),e.Yb&&d.C(function(b){b=new Uk(kl,this.L(),a,b,void 0);this.L().Ua(b)},
this);else throw new M('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof qk){var l=a.I(),e=Y(this.h,l);d=this.g.request("rm",[l],Ij);var m=[l,a.F()];Qk(e,d,m);V(d,function(){X(this).Pd(d,l,m[1])},this)}else if(u(a)){b=[];c=0;for(e=a.length;c<e;c++){if(!(a[c]instanceof qk))throw new M("key list element at "+c+" of "+e+' must be yn.db.Key, but "'+wh(a[c])+'" ('+ea(a[c])+") is not ydn.db.Key.");var n=a[c].I();-1==Ma(b,n)&&b.push(n)}if(1>b.length)throw new M('at least one valid key required in key list "'+
wh(a)+'"');d=this.g.request("rm:keys",b,Ij);V(d,function(){X(this).Qd(d,a)},this)}else throw new M('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+wh(a)+'" ('+ea(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.L().getName()};function ll(a,b,c,d){Gk.call(this,a,b,c,d)}E(ll,Ok);h=ll.prototype;h.logger=R("ydn.db.core.DbOperator");h.get=function(a,b){if(a instanceof Sj){var c=a.I(),d=Y(this.h,c);if(!d)throw new M('store "'+c+'" not found.');var e=a.h;if(t(e)&&!Sk(d,e))throw new M('index "'+e+'" not found in store "'+c+'".');P(this.logger,"getByIterator:"+a);var f=this.g.request("get:iter",[c]);V(f,function(){ml(this,5,f,a,1)},this);return f}return ll.m.get.call(this,a,b)};
h.keys=function(a,b,c,d,e,f,g){if(a instanceof Sj){var k=100;if(y(b)){if(k=b,1>k)throw new M("limit must be a positive value, but "+b);}else if(t(b))throw new M("limit must be a number,  but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"keysByIterator:"+a);var l=this.g.request("keys:iter",[a.I()]);V(l,function(){a.p?ml(this,1,l,a,k):ml(this,2,l,a,k)},this);return l}return ll.m.keys.call(this,a,b,c,d,e,f,g)};
h.count=function(a,b,c,d){if(a instanceof Sj){if(t(b)||t(c))throw new M("too many arguments.");P(this.logger,"countIterator:"+a);var e=this.g.request("count",[a.I()]);V(e,function(){ml(this,6,e,a)},this);return e}return ll.m.count.call(this,a,b,c,d)};
h.values=function(a,b,c,d,e,f){if(a instanceof Sj){var g;if(y(b)){if(g=b,1>g)throw new M("limit must be a positive value, but "+g);}else if(t(b))throw new M("limit must be a number, but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"listByIterator:"+a);var k=this.g.request("values:iter",[a.I()]);V(k,function(){a.g?ml(this,2,k,a,g):ml(this,4,k,a,g)},this);return k}return ll.m.values.call(this,a,b,c,d,e,f)};
h.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new M('Store "'+e+'" not found.');e=this.g.request("map",d);Q(this.logger,"map:"+a);this.g.nc(e,function(d,e,f){Q(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=X(c).h(d,e,m[p]);var q=a.load(n);q.U=function(a){f(a,!1)};q.O=function(c){null!=c?(c=a.p?a.g?c:q.ja():a.g?c:q.V(),b(c),q.advance(1)):(f(void 0),b=null)}},d,Hj);return e};
function ml(a,b,c,d,e){var f=[],g=c.g,k=W(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);P(a.logger,l);for(var m=X(a),n=[],p=d.stores(),q=0;q<p.length;q++)n[q]=m.h(g,k,p[q]);var s=d.load(n);s.U=function(a){Qj(s);U(c,a,!0)};var v=0,z=!1;s.O=function(d){z||(Q(a.logger,l+" starting"),z=!0);null!=d?(s.ja(),v++,1==b?f.push(d):2==b?f.push(s.ja()):3==b?f.push([d,s.ja()]):6!=b&&f.push(s.V()),5==b?(Qj(s),U(c,f[0])):6==b||!t(e)||v<e?s.md():(P(a.logger,"success:"+l+" yields "+f.length+" records"),Qj(s),
U(c,f))):(P(a.logger,"success:"+l+" yields "+f.length+" records"),Qj(s),U(c,5==b?f[0]:6==b?v:f))}};var Vk="created",kl="deleted",dl="updated";function nl(a,b){K.call(this,a,b)}E(nl,K);nl.prototype.I=function(){return this.P};function ol(a,b,c){K.call(this,a,b);this.version=c}E(ol,nl);ol.prototype.name="ReadyEvent";ol.prototype.version=NaN;function pl(a,b,c){K.call(this,c||"error",a);this.error=b}E(pl,nl);pl.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};pl.prototype.name="ErrorEvent";pl.prototype.error=null;function ql(a,b){pl.call(this,a,b,"fail")}E(ql,pl);
ql.prototype.name="FailEvent";function Xk(a,b,c,d,e){K.call(this,a,b);this.P=c;this.key=d;this.value=e}E(Xk,nl);Xk.prototype.name="RecordEvent";Xk.prototype.V=function(){return this.value};function Uk(a,b,c,d,e){K.call(this,a,b);this.P=c;this.keys=d;this.values=e}E(Uk,nl);Uk.prototype.name="StoreEvent";Uk.prototype.Ma=function(){return this.keys};Uk.prototype.Aa=function(){return this.values};function rl(a,b,c,d,e,f){t(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new M("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.n=w(this.keyPath);this.h=e;this.type=sl(b);if(t(b)){if(!t(this.type))throw new M("type invalid in index: "+this.h);if(u(this.keyPath))throw new M('composite key for store "'+this.h+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.p=x(this.type)?
this.type:tl;this.j=x(e)?e:u(a)?this.keyPath.join(","):a;this.i=Ia(this.j);this.g=this.n?null:this.keyPath.split(".");this.l=f||null}function ul(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=tj(b,a.keyPath[d]);c[d]=f}return c}return tj(b,a.keyPath)}}function vl(a,b,c){for(var d=0;d<a.g.length;d++)d==a.g.length-1?b[a.g[d]]=c:A(b[a.g[d]])||(b[a.g[d]]={})}var tl="TEXT";function sj(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:wj(a)}
function wl(a,b){return"DATE"==b?new Date(a):t(b)?a:zj(a)}var xl=["BLOB","DATE","INTEGER","NUMERIC",tl];function sl(a){if(x(a))return a=Ma(xl,a),xl[a]}h=rl.prototype;h.getName=function(){return this.h};h.toJSON=function(){return{name:this.h,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};h.fa=function(){var a=u(this.keyPath)?Za(this.keyPath):this.keyPath;return new rl(a,this.type,this.unique,this.multiEntry,this.h,this.l)};
function yl(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?db(a,b)?null:"expect: "+a+", but: "+b:zl(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?Za(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new rl(b,c,this.unique,this.multiEntry,a.h)};function Al(a,b){a.l=b}
h.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.g&&1<this.g.length&&(a+="Compound");return a+"Index:"+this.h};function Ik(a,b,c,d,e,f,g,k){this.i=a;if(!x(this.i))throw new M("store name must be a string");this.keyPath=t(b)?b:null;this.s=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.s)throw new M("keyPath must be a string or array");this.h=c;var l;if(null!=d){l=sl(d);if(!t(l))throw new M('type "'+d+'" for primary key in store "'+this.i+'" is invalid.');if(this.s)throw new M('composite key for store "'+this.i+'" must not specified type');}this.type=null!=l?l:this.h?"INTEGER":void 0;this.n=
x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.Yb=!!f;this.mc=!!g;this.D=x(this.type)?this.type:tl;this.l=u(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.j=Ia(this.l);if(this.H=!!k){if(this.keyPath)throw new M('encrypted store "'+this.i+'" must not use inline key');if(this.h)throw new M('encrypted store "'+this.i+'" must not use key generator');}this.p=[]}h=Ik.prototype;h.Yb=!1;h.mc=!1;
h.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.i,keyPath:this.keyPath,autoIncrement:this.h,type:this.type,indexes:a}};
function Jk(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ma(f,g))throw new M("Unknown field: "+g+" in "+xh(e));e=new rl(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Ik(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Bl(a,b,c,d,e,f,g){a=Cl(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Gc;a.ya&&(b+=" WHERE "+a.ya);a.group&&(b+=" GROUP BY "+a.group);a.ic&&(b+=" ORDER BY "+a.ic);return b}
function Cl(a,b,c,d,e,f,g){var k={select:"",Gc:"",ya:"",group:"",ic:""},l=a.l,m=a.j,n=null;d!==l&&x(d)&&(n=Nj(a,d));var p=!!n,q=d||l,s=Ia(q),v=p?n.type:a.type,z=p&&n.multiEntry;k.Gc=Dl(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=g?"DISTINCT ":"";l=[];z?(z=Ia("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+z+"."+s+")":3===c||1===c||2===c?"DISTINCT "+Dl(a)+"."+m+", "+z+"."+s+" AS "+q:"DISTINCT "+Dl(a)+".*, "+
z+"."+s+" AS "+q,k.Gc=z+" INNER JOIN "+Dl(a)+" USING ("+m+")",null!=e&&(qj(z+"."+s,v,e,l,b),0<l.length&&(k.ya=k.ya?k.ya+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(qj(s,v,e,l,b),0<l.length&&(k.ya=k.ya?k.ya+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&g&&(k.group=s);a=f?"DESC":"ASC";k.ic=s+" "+a;p&&(k.ic+=", "+m+" "+a);return k}
function El(a,b,c,d,e,f,g,k,l){var m,n,p,q;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=n?(e=rj(k,n),-1==e?(n=k,q=l):0==e&&(q=l||q)):(n=k,q=l):null!=m?(e=rj(k,m),1==e?(m=k,p=l):0==e&&(p=l||p)):(m=k,p=l)):f?(n=k,q=l):(m=k,p=l);e=new T(m,n,!!p,!!q);d=d?Nj(a,d):null;b=Cl(a,c,b,d?d.j:a.l,e,f,g);b="SELECT "+b.select+" FROM "+b.Gc+(b.ya?" WHERE "+b.ya:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.ic;d&&(b+=", "+a.j+(f?"DESC":"ASC"));return b}
function Fl(a,b,c,d,e,f,g,k,l,m){var n=Nj(a,d),p=n.j;d=n.i;var q=a.j,s=l?" <":" >",s=g?s+" ":s+"= ";g=sj(f,n.type);k=sj(k,a.type);n="";e?(a=Cl(a,c,b,p,e,l,m),a.ya+=" AND ",n=d+s+"?",c.push(g)):(e=l?T.upperBound(f,!0):T.lowerBound(f,!0),a=Cl(a,c,b,p,e,l,m),n=a.ya,a.ya="");a.ya+="("+n+" OR ("+d+" = ? AND "+q+s+"?))";c.push(g);c.push(k);return"SELECT "+a.select+" FROM "+a.Gc+" WHERE "+a.ya+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.ic}h.fa=function(){return Jk(this.toJSON())};
h.index=function(a){return this.indexes[a]||null};function Nj(a,b){return Sa(a.indexes,function(a){return a.getName()==b})}function Mj(a,b){for(var c=0;c<a.indexes.length;c++)if(!yl(a.indexes[c].keyPath,b))return a.indexes[c];return null}function Sk(a,b){return b===a.keyPath?!0:Qa(a.indexes,function(a){return a.getName()==b})}function Dl(a){return Ia(a.i)}
function Gl(a,b){if(!b)return a;var c=a.h,d=u(a.keyPath)?Za(a.keyPath):a.keyPath,e=a.type,f=Pa(a.indexes,function(a){return a.fa()});t(b.type)||"TEXT"!=e||(e=void 0);u(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=Za(b.keyPath));for(var g=0,k=b.indexes.length;g<k;g++)if(b.indexes[g].n)for(var l=b.indexes[g].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.indexes[g].fa();break}for(g=0;g<f.length;g++)(k=Nj(b,f[g].getName()))&&(f[g]=f[g].hint(k));return new Ik(b.i,d,c,e,f)}
h.getName=function(){return this.i};function Hl(a){return!!a.keyPath}function Wk(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.s){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(tj(b,a.keyPath[d]));return c}if(a.keyPath)return nc(b,a.n)}}function cl(a,b,c){for(var d=0;d<a.n.length;d++){var e=a.n[d];if(d==a.n.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Il(a,b,c){var d=[],e=[];c=t(c)?c:Wk(a,b);t(c)&&(e.push(a.j),d.push(sj(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var k=ul(g,b);null!=k&&(d.push(sj(k,g.type)),e.push(g.i))}}a.mc?a.mc&&!a.keyPath&&0==a.indexes.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(xh(b)),e.push("_default_")):(d.push(xh(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Lf:e,hg:a,values:d,key:c}}
function Kk(a,b){if(!b)return"missing store: "+a.i;if(a.i!=b.i)return"store name, expect: "+a.i+", but: "+b.i;var c=yl(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.h)&&t(b.h)&&a.h!=b.h)return"autoIncrement, expect:  "+a.h+", but: "+b.h;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(w(a.type)?!db(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=
Nj(b,a.indexes[c].getName()),e;e=a.indexes[c];if(d)if(e.h!=d.h)e="name, expect: "+e.h+", but: "+d.h;else{var f=yl(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(w(e.type)?!db(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e=
"no index for "+e.h;if(0<e.length)return'index "'+a.indexes[c].getName()+'" '+e}return""}function Tk(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.l){var f=d.l(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.g.length-1;g++)A(e[d.g[g]])||(e[d.g[g]]={});e[d.g[d.g.length-1]]=f}}}}function Jl(a,b){a.p.push(b)}function Qk(a,b,c,d,e){for(var f=0;f<a.p.length;f++)d!==f&&a.p[f].call(e,b,c)}
h.toString=function(){return"Store:"+this.i+"["+this.indexes.length+"index]"};function Kl(a,b,c){if(!a||ta(a))throw new M("store_name must be provided for primary full text index");if(!b||ta(b))throw new M("index_name must be provided for primary full text index");this.P=a;this.g=b;this.h=c||1}Kl.prototype.I=function(){return this.P};function Ll(a,b,c,d){this.name=a;this.indexes=b;this.lang=c||"";if(-1==["","en","fr"].indexOf(this.lang))throw new M('Unsupported lang "'+c+" for full text search index "+a);this.h=d||null;this.g=null}Ll.prototype.getName=function(){return this.name};Ll.prototype.count=function(){return this.indexes.length};Ll.prototype.index=function(a){return this.indexes[a]};function Ml(a,b,c){return Sa(a.indexes,function(a){return a.I()==b&&a.g==c})}
function Nl(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M("Unknown field: "+c+" in "+xh(a));if(!u(a.sources))throw new M("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M("Unknown field: "+c+" in "+wh(a));return new Kl(a.storeName,a.keyPath,a.weight)});return new Ll(a.name,
b,a.lang)};function Ol(a,b){var c,d,e=b;if(A(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ma(c,f))throw new M("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new M("stores must be array");for(f=0;f<g.length;f++){var k=Jk(g[f]);if(-1!=Ta(e,function(a){return a.name==k.getName()}))throw new M('duplicate store name "'+k.getName()+'".');e.push(k)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(t(c)){if(!y(c)||0>c)throw new M("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!u(b)||0<b.length&&!(b[0]instanceof Ik)))throw new M("stores");this.version=c;this.h=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Nl(d.fullTextCatalogs[f]),c[f]=e,Y(this,e.getName())||(g=[new rl("k",tl),new rl("v",tl)],e=new Ik(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.i=c}
Ol.prototype.toJSON=function(){var a=Pa(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};Ol.prototype.h=!1;Ol.prototype.g=function(){return!1};function Rk(a){return Pa(a.stores,function(a){return a.getName()})}Ol.prototype.count=function(){return this.stores.length};function Y(a,b){return Sa(a.stores,function(a){return a.getName()==b})}function Pk(a,b){return Qa(a.stores,function(a){return a.getName()==b})}
function Ql(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=Y(b,a.stores[e].getName());if(f){c&&(f=Gl(f,a.stores[e]));if(d)for(var g=f,k=a.stores[e],l=0;l<k.indexes.length;l++){var m=k.indexes[l];Sk(g,m.getName())||"BLOB"!=m.type||(m=new rl(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),g.indexes.push(m))}f=Kk(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""}function Rl(a,b){return Sa(a.i,function(a){return a.getName()==b})};function Lk(a,b){Ol.call(this,a,b)}E(Lk,Ol);Lk.prototype.g=function(){return!0};function Mk(a,b){a.stores.push(b)};function Sl(a){return vh(xh(a))}function zl(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Sa(b,function(b){return zl(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&zl(a[0],b);if(w(b))return 1==b.length&&zl(b[0],a);if(A(a)&&A(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=zl(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=zl(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function Tl(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Ul(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ma(d,e))throw new M('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new M("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!Ua(Vl,c.mechanisms[e]))throw new M('Invalid mechanism "'+c.mechanisms[e]+'"');}this.K=c.mechanisms||Vl;this.D=c.size;this.O=
t(c.connectionTimeout)?c.connectionTimeout:3E4;this.i=null;this.j=[];this.Cd=!1;if(b instanceof Ol)c=b;else if(A(b))for(c=c.autoSchema||!t(b.stores)?new Lk(b):new Ol(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=Y(c,b.stores[e].name);b.stores[e].Sync&&this.Ff(f,b.stores[e].Sync)}else c=new Lk;this.h=c;for(e=0;e<this.h.count();e++)if((this.h.stores[e]||null).H)throw Error("encryption option must be defined");if(t(a)){if(this.i)throw new Rc("Already connected with "+this.s);this.s=a;Nk(this)}this.p=
null;this.n=new F}Ul.prototype.logger=R("ydn.db.con.Storage");function Wl(a,b,c){return(a=Y(a.h,b))?Sk(a,c):!1}function Xl(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.i?a.i.jb(c):Ek(a,function(b){a.i.jb(c,b)},null,Hj)}return a.h?a.h.toJSON():null}Ul.prototype.getName=function(){return this.s};var Vl="indexeddb websql localstorage sessionstorage userdata memory".split(" ");h=Ul.prototype;h.qe=function(){return null};
function Nk(a){function b(b,e){b?(Q(a.logger,a+": ready."),a.ag=NaN,d.cd=function(b){a.Ua(new pl(a,b))},d.be=function(b){a.Ua(new ql(a,b));a.i=null},d.Ld=function(b){a.Ua(b)},setTimeout(function(){Yl(a,e);Zl(a)},10),c.w(e)):(N(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Yl(a,new ql(a,e));if(a.j){a.logger.info("Purging "+a.j.length+" transactions request.");for(var b;b=a.j.shift();)b.Ya&&b.Ya("error",e)}},10),c.A(e))}for(var c=new F,d=null,e=a.K,f=0;f<e.length;f++){var g=
e[f].toLowerCase();if(d=a.qe(g)){d=a.qe(g);break}}null===d?(e=new Gh("No storage mechanism found."),b(!1,new ql(a,e))):(a.init(),d.connect(a.s,a.h).u(function(){this.i=d;b(!0,new ol("ready",this,parseFloat(d.$d())))},function(a){N(this.logger,this+": opening fail");b(!1,a)},a))}function wk(a){if(a.i)return a.i.Dc()}h.mb=function(a,b){this.n.ea(a,b)};function Yl(a,b){setTimeout(function(){b instanceof pl?a.n.A(b.error):a.n.w();a.Ua(b)},4)}function Dk(a){return!!a.i&&a.i.ae()}h.init=function(){};
function $l(a){a.i&&(a.i.Zd(),a.i=null,Q(a.logger,a+" closed"))}h.ag=NaN;function Zl(a){var b=a.j.shift();b&&(Q(a.logger,"pop tx queue["+(a.j.length+1)+"]"),Ek(a,b.rd,b.scopes,b.mode,b.Ya));a.ag=C()}function am(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({rd:b,scopes:c,mode:d,Ya:e});100<a.j.length&&0==a.j.length%100&&N(a.logger,"Transaction queue stack size is "+a.j.length+". It is too large, possibility due to incorrect usage.")}h.Cd=!1;
function Ek(a,b,c,d,e){var f=c;if(x(c))f=[c];else if(null!=c)if(w(c)){if(0==c.length)throw new M("number of store names must more than 0");for(var g=0;g<c.length;g++)if(!x(c[g]))throw new M("store name at "+g+" must be string but found "+typeof c[g]);}else throw new M("store names must be an array");else f=null;if(a.i&&a.i.ae()&&!a.Cd){var k=t(d)?d:Hj;k==Jj&&(a.Cd=!0);a.i.qd(function(a){b(a);b=null},f,k,function(b,c){ga(e)&&(e(b,c),e=void 0);k==Jj&&(a.Cd=!1);Zl(a)})}else am(a,b,f,d,e)}
h.Ff=function(a){N(this.logger,"Synchronization option for "+a.getName()+" ignored.")};h.Ef=function(a){N(this.logger,"Full text indexer option for "+a.getName()+" ignored.")};h.Ua=function(){};h.toString=function(){return"Storage:"+this.i};function bm(a,b,c,d){this.j=a;this.l=b;this.g=Za(c);this.h=d;this.i=[]}bm.prototype.j=null;bm.prototype.onCompleted=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c](a,b);this.i.length=0;this.i=this.g=this.j=null};function cm(a,b,c){if(a.j)c&&a.i.push(c),b(a.j);else throw new Sc("tx committed on ParallelTxExecutor");}bm.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.l+" mode:"+this.h+" scopes:"+xh(this.g)};function dm(a,b,c,d,e,f){tk.call(this,a,b,c,d,e,f);this.j=this.g=null}E(dm,tk);h=dm.prototype;h.logger=R("ydn.db.tr.Parallel");h.abort=function(){P(this.logger,this+": aborting");xk(this.j)};
h.pg=function(a,b){var c;if("multi"==this.l)a:if(c=this.g,!c.g||!c.h||b!=c.h&&(c.h!=Ij||b!=Hj)||a.length>c.g.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.l)a:if(c=this.g,c.g&&c.h&&b==c.h&&c.g.length==a.length){for(d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.l?!0:!1;return c};
h.Qb=function(a,b,c,d){function e(c){l.i++;m=new bm(c,l.i,b,k);g=l.La();cf(l.logger,g+" BEGIN "+xh(b)+" "+k);l.g=m;cm(l.g,a,d)}function f(a,b){cf(l.logger,g+" "+a);if(m)m.onCompleted(a,b);l.h=0}var g;this.$&&(b=this.$);this.U&&(c=this.U);var k=t(c)?c:Hj,l=this,m;if(this.g&&this.g.j&&this.pg(b,k))cm(this.g,a,d);else{if(this.K&&this.i>=this.K)throw new Rc("Exceed maximum number of transactions of "+this.K);Ek(this.L(),e,b,k,f)}};
h.request=function(a,b,c,d){var e=dm.m.request.call(this,a,b,c,d),f=this;this.Qb(function(a){f.h++;ak(e,a,f.La()+"R"+f.h)},b,c||Hj,d);return e};h.nc=function(a,b,c,d,e){var f=this,g;this.Qb(function(c){f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.j=c;g=f.La()+"R"+f.h;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.j=null});b=null;P(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.l+":"+this.La()+(this.j?"*":"")};function em(a,b){dm.call(this,a,b,uk)}E(em,dm);h=em.prototype;h.logger=R("ydn.db.tr.AtomicParallel");h.pg=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=em.m.request.call(this,a,b,c,function(a,b){k.g=null;P(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new pk;U(k,c,!0)}});dk(k,function(a,b,c){f=b;e=a;d=c});return k};
h.nc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});em.m.nc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new pk;a.A(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+em.m.toString.call(this)};function fm(a,b,c){Ul.call(this,a,b,c);this.l=0;a=!0;b=uk;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=gm(this,b,a);this.$a=gm(this,"atomic",!1);this.g=this.Tc(c,this.$a)}E(fm,Ul);fm.prototype.l=0;fm.prototype.Tc=function(a,b){return new Gk(this,this.h,a,b)};
function gm(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==uk)return new zk(a,a.l++,b,d,e,f);if("atomic"==b)return new Fk(a,a.l++);throw new M('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==uk)return new dm(a,a.l++,b,d,e,f);if("atomic"==b)return new em(a,a.l++);throw new M('Invalid requestType "'+b+'"');}
fm.prototype.U=function(a,b,c){if(3<arguments.length)throw new M("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.l++;var d=b||Rk(this.h),e=Hj;if(c)if("readwrite"==c)e=Ij;else if("readonly"!=c)throw new M('Invalid transaction mode "'+c+'"');var f=gm(this,"all",!1,d,e,1),g=this.Tc(f,this.$a),k=new Zj("run"),l=this;f.Qb(function(b){Q(l.logger,"executing run in transaction on "+f);ak(k,b,f.La()+"R0");a(g)},d,e,function(a){k.g=null;U(k,f.i,
"complete"!==a)});return k};function hm(a,b,c){fm.call(this,a,b,c);a=this.h;for(b=0;b<a.i.length;b++){c=a.i[b];var d=Y(a,c.getName());if(d){if(!Sk(d,"k"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if(!Sk(d,"v"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new M('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new M('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Y(a,e.I());if(f)this.Ef(f,c);else throw new M('full text source store "'+e.I()+'" does not exist for full text index "'+c.getName()+'"');}}}E(hm,fm);h=hm.prototype;h.init=function(){hm.m.init.call(this)};h.Tc=function(a,b){return new Ok(this,this.h,a,b)};h.add=function(a,b,c){return this.g.add(a,b,c)};h.count=function(a,b,c,d){return this.g.count(a,b,c,d)};h.get=function(a,b){return this.g.get(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.g.keys(a,b,c,d,e,f,g)};
h.values=function(a,b,c,d,e,f){return this.g.values(a,b,c,d,e,f)};h.list=function(a,b,c,d,e,f,g,k,l){return this.g.list(a,b,c,d,e,f,g,k,l)};h.load=function(a,b,c){return this.g.load(a,b,c)};h.put=function(a,b,c){return this.g.put(a,b,c)};h.clear=function(a,b,c){return this.g.clear(a,b,c)};h.remove=function(a,b,c){return this.g.remove(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Dk(this)&&(a+=" ["+wk(this)+"]");return a};function im(a,b,c){hm.call(this,a,b,c)}E(im,hm);im.prototype.Tc=function(a,b){return new ll(this,this.h,a,b)};im.prototype.map=function(a,b){return this.g.map(a,b)};function jm(a,b,c,d){Lj.call(this,a,b,c,d);this.l=null}E(jm,Lj);h=jm.prototype;h.logger=R("ydn.db.core.req.IDBCursor");h.Nf=function(a){(a=a.target.result)?this.hc(a.key,a.primaryKey,a.value):this.hc()};
h.openCursor=function(a,b){function c(a,b,c){p.l=n;p.l.onsuccess=B(p.Nf,p);p.hc(a,p.j?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");Q(this.logger,d);var e=this.ba,d=this.n.objectStore(this.P),f=x(this.zb)?d.index(this.zb):null;if(t(a))var g=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=jj(this.reverse?new T(k,a,m,g):new T(a,l,g,e));var n;this.Rc?f?n=null!=this.Fb?f.openKeyCursor(e,this.Fb):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.Fb?d.openCursor(e,this.Fb):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.Fb?f.openCursor(e,this.Fb):null!=e?f.openCursor(e):f.openCursor():n=null!=this.Fb?d.openCursor(e,this.Fb):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();p.U(b);Oj(p);p.D=!0};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Kj.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);
else if(null!=b)if(Kj.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.l=n,p.l.onsuccess=B(p.Nf,p))};h.Bd=function(){return!!this.l};h.update=function(a){var b=this.l.result;if(b){var c=new F;a=b.update(a);a.onsuccess=function(a){c.w(a.target.result)};a.onerror=function(a){a.preventDefault();c.A(a)};return c}throw new kk("cursor gone");};
h.clear=function(){var a=this.l.result;if(a){var b=new F,a=a["delete"]();a.onsuccess=function(){b.w(1)};a.onerror=function(a){a.preventDefault();b.A(a)};return b}throw new kk("cursor gone");};h.advance=function(a){var b=this.l.result;if(1==a)b["continue"]();else b.advance(a)};h.md=function(a){var b=this.l.result;if(null!=a)b["continue"](a);else b["continue"]()};h.J=function(){jm.m.J.call(this);this.l=null};h.toString=function(){return"IDB"+jm.m.toString.call(this)};function km(a,b,c,d,e,f){F.call(this,e,f);this.p=a;this.g=[];this.D=!!b;this.Ub=!!c;this.Sa=!!d;for(b=this.ia=0;b<a.length;b++)a[b].u(B(this.K,this,b,!0),B(this.K,this,b,!1));0!=a.length||this.D||this.w(this.g)}E(km,F);km.prototype.K=function(a,b,c){this.ia++;this.g[a]=[b,c];this.h||(this.D&&b?this.w([a,c]):this.Ub&&!b?this.A(c):this.ia==this.p.length&&this.w(this.g));this.Sa&&!b&&(c=null);return c};km.prototype.A=function(a){km.m.A.call(this,a);for(a=0;a<this.p.length;a++)kb(this.p[a])};
function lm(a){return(new km(a,!1,!0)).C(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function mm(a,b){this.g=b}E(mm,sk);h=mm.prototype;h.logger=R("ydn.db.crud.req.IndexedDb");h.od=function(a,b){function c(e){var f=a.g.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?U(a,d):c(e)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}}var d=[];0==b.length?U(a,[]):c(0)};
h.lb=function(a,b,c,d,e,f){function g(s){if(null==e[s])if(Q(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)U(a,k,m);else{var z=s+10;z<e.length&&g(z)}var D,z=e[s];D=null!=f?b?q.put(z,f[s]):q.add(z,f[s]):b?q.put(z):q.add(z);D.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?U(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))};D.onerror=function(b){l++;var f=D.error;Q(n.logger,W(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+wh(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?U(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))}}var k=[],l=0,m=!1,n=this,p=b?"put":"add",q=a.g.objectStore(d);Q(this.logger,W(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)g(s);else U(a,[])};
h.Nd=function(a,b,c){function d(l){var n=c[l],p=n.I(),q=a.g.objectStore(p),s;s=null===q.keyPath?q.put(b[l],n.F()):q.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?U(a,e,g):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;N(k.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+wh(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;g=!0;c.preventDefault();f==b.length?U(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,k=this;Q(this.logger,
W(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else U(a,e,g)};
h.hf=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),J=0;J<p.length;J++){var O=b[J];q[J]&&(q[J]==tl?O=Fa(O,'"'):"INTEGER"==q[J]?O=parseInt(O,10):"NUMERIC"==q[J]&&(O=parseFloat(O)));a[p[J]]=O}var ia=l.put(a);ia.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};ia.onerror=function(a){"DataError"==a.name&&(a=new hk(k+": "+s.substring(0,70)));a.preventDefault();c(ia.error,!0)}}var k=Y(this.g,d),
l=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),q=[];for(a=0;a<p.length;a++){var s=Nj(k,p[a]);s?q[a]=s.type:p[a]==k.keyPath&&(q[a]=k.type)}n++;Q(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
h.Pd=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,W(a)+" clearById: "+b+" "+c);var e=d.openCursor(nj.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){U(a,1)};c.onerror=function(){U(a,c.error,!0)}}else U(a,0)};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};
h.Qd=function(a,b){function c(k){k++;if(k>=b.length)0<g.length?U(a,g,!0):U(a,d);else{b[k].I()!=e&&(e=b[k].I(),f=a.g.objectStore(e));var l=f["delete"](b[k].F());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();g[k]=l.error;c(k)}}}var d=0,e,f;Q(this.logger,W(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
h.Wc=function(a,b,c){var d=a.g.objectStore(b),e=d.count(c);Q(this.logger,W(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){U(a,e)};k.onerror=function(){U(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};h.ne=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,W(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){U(a,void 0)};e.onerror=function(b){b.preventDefault();U(a,e.error,!0)}};
h.jf=function(a,b,c,d){var e=a.g.objectStore(b).index(c);Q(this.logger,W(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),k=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?U(a,f,!0):U(a,k)};g.onerror=function(b){b.preventDefault();U(a,g.error,!0)}};
h.ld=function(a,b){var c=b.length,d=0;Q(this.logger,W(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.g.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&U(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&U(a,f.error,!0)}}};
h.sd=function(a,b,c){var d=this;Q(this.logger,W(a)+b+":"+c);var e=a.g.objectStore(b),f=e.get(c);f.onsuccess=function(b){Q(d.logger,W(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&Kb&&x(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
U(a,new Blob([m.buffer],{type:b}))}else U(a,b.target.result)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}};
h.bf=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)U(a,e);else{var m=b+10;m<k&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?U(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();U(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.g.objectStore(b),k=c.length;Q(this.logger,W(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else U(a,[])};
h.Gd=function(a,b){function c(f){var k=b[f],l=a.g.objectStore(k.I()).get(k.F());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?U(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();U(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;Q(this.logger,W(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else U(a,[])};
h.Fc=function(a,b,c,d,e){if(d&&e)throw new Rc("unique count not available in IndexedDB");e=a.g.objectStore(b);b=W(a)+" "+b+(d?":"+d:"")+(c?":"+xh(c):"");Q(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){U(a,b.target.result)};f.onerror=function(b){b.preventDefault();U(a,f.error,!0)}};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=[],p=a.g.objectStore(c),q=k?l?"prevunique":"prev":l?"nextunique":"next";c=W(a)+" "+b+" "+c+(d?":"+d:"")+(e?xh(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],v=e?e.lower:void 0,z=e?e.upper:void 0,D=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=jj(k?new T(v,s,D,l):new T(s,z,l,e));c+=" starting from "+xh(m[0]);t(m[1])&&(c+=", "+xh(m[1]))}Q(this.logger,c);var G;G=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,
q):d?p.index(d).openCursor(e,q):p.openCursor(e,q);var J=!1;G.onsuccess=function(c){if(c=c.target.result){if(!J){if(0<g){J=!0;c.advance(g);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=Kj.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=Kj.cmp(c.primaryKey,m[1]);if(0==e){J=!0;c["continue"]();return}if(e==l)J=!0;else{c["continue"]();return}}else J=!0}else J=!0;else J=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=Pj(c.key),m[1]=Pj(c.primaryKey)),U(a,n)}else m&&(m[0]=void 0,m[1]=void 0),U(a,n)};G.onerror=function(b){b.preventDefault();U(a,G.error,!0)}};function nm(a,b){this.g=b}E(nm,mm);nm.prototype.logger=R("ydn.db.core.req.IndexedDb");nm.prototype.h=function(a,b,c,d){c=Y(this.g,c);return new jm(a,b,c,d)};function om(){this.g=!1}om.prototype.g=!1;function pm(a,b,c,d){Lj.call(this,a,b,c,d);this.p=this.h=this.g=void 0;this.s=this.l=null;this.K=new om;this.Ud=this.Vb=null}E(pm,Lj);h=pm.prototype;h.logger=R("ydn.db.core.req.SimpleCursor");h.Bd=function(){return!!this.n};h.update=function(a){qm(this.Ud,this.ja(),a);return sb()};h.advance=function(a){function b(b){d++;if(!b||d>=a)return rm(c,b)}var c=this,d=this.l?-1:0;this.reverse?sm(this.Vb,b,this.l):tm(this.Vb,b,this.l)};
h.md=function(a){if(null!=a){var b=this,c=new um(a),d=function(c){b.l=c;if(!c)return rm(b,c);var d=rj(c.value.key,a);if(b.reverse){if(1!=d)return rm(b,c)}else if(-1!=d)return rm(b,c)};this.reverse?sm(this.Vb,d,c):tm(this.Vb,d,c)}else this.advance(1)};function vm(a){setTimeout(function(){a.K.g?(a.K.g=!1,a.hc(a.g,a.h,a.p),vm(a)):(a.s(),a.s=null)},4)}
function rm(a,b){if(a.l=b){var c=b.value;if(a.ba)if(a.reverse||null==a.ba.upper)a.reverse&&null!=a.ba.lower&&(d=rj(c.key,a.ba.lower),-1==d||0==d&&a.ba.lowerOpen)&&(a.l=null);else{var d=rj(c.key,a.ba.upper);if(1==d||0==d&&a.ba.upperOpen)a.l=null}if(a.l){if(a.unique&&null!=a.g&&null!=c.key&&0==rj(a.g,c.key))return;a.g=c.key;a.h=a.j?c.ja():a.g;4==a.ca&&(a.Rc?a.p=a.h:a.p=a.Ud.ka(null,a.h))}}a.l||(a.g=void 0,a.h=void 0,a.p=void 0);return a.K.g=!0}
h.openCursor=function(a,b){var c=null;if(this.ba)if(this.reverse){var d=this.j?"\uffff":void 0;null!=this.ba.upper&&(c=new um(this.ba.upper,d))}else null!=this.ba.lower&&(c=new um(this.ba.lower));null!=a&&(c=this.j?new um(a,b):new um(a));this.s=this.n.L(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==wm(c,e))return}else if(this.ba&&(!this.reverse&&this.ba.lowerOpen&&null!=this.ba.lower&&(e=rj(f,this.ba.lower),0==e)||this.reverse&&this.ba.upperOpen&&null!=this.ba.upper&&
(e=rj(f,this.ba.upper),0==e)))return;return rm(this,b)}this.Ud=xm(b,this.P);this.Vb=ym(this.Ud,this.zb);this.reverse?sm(this.Vb,B(d,this),c):tm(this.Vb,B(d,this),c);vm(this)},this)};h.clear=function(){throw new Qc;};h.toString=function(){return"Simple"+pm.m.toString.call(this)};function zm(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(wj(void 0))));return a.join("^|")};function um(a,b){this.key=a;this.g=b}um.prototype.ja=function(){return this.g};um.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.g?", "+this.g+")":")")};function wm(a,b){var c=rj(a.key,b.key);return 0===c?null!=a.g?null!=b.g?rj(a.g,b.g):1:null!=b.g?-1:0:c};function Am(a){this.Ta=a||Bm}function Bm(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=Am.prototype;h.Ea=null;h.Ta=null;h.Cb=null;h.Ab=null;
h.add=function(a){if(null==this.Ea)return this.Ab=this.Cb=this.Ea=new Cm(a),!0;var b=null;Dm(this,function(c){var d=null;0<this.Ta(c.value,a)?(d=c.left,null==c.left&&(b=new Cm(a,c),c.left=b,c==this.Cb&&(this.Cb=b))):0>this.Ta(c.value,a)&&(d=c.right,null==c.right&&(b=new Cm(a,c),c.right=b,c==this.Ab&&(this.Ab=b)));return d});b&&(Dm(this,function(a){a.count++;return a.parent},b.parent),Em(this,b.parent));return!!b};
h.remove=function(a){var b=null;Dm(this,function(c){var d=null;0<this.Ta(c.value,a)?d=c.left:0>this.Ta(c.value,a)?d=c.right:(b=c.value,Fm(this,c));return d});return b};h.clear=function(){this.Ab=this.Cb=this.Ea=null};h.contains=function(a){var b=!1;Dm(this,function(c){var d=null;0<this.Ta(c.value,a)?d=c.left:0>this.Ta(c.value,a)?d=c.right:b=!0;return d});return b};h.ga=function(){return this.Ea?this.Ea.count:0};h.Aa=function(){var a=[];Gm(this,function(b){a.push(b)});return a};
function Gm(a,b){if(a.Ea){var c,d=c=Hm(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Dm(a,b,c){for(c=c?c:a.Ea;c&&null!=c;)c=b.call(a,c)}
function Em(a,b){Dm(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Im(this,a.left),Jm(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Jm(this,a.right),Im(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Im(a,b){Km(b)?(b.parent.left=b.right,b.right.parent=b.parent):Lm(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.Ea=b.right,a.Ea.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Jm(a,b){Km(b)?(b.parent.left=b.left,b.left.parent=b.parent):Lm(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.Ea=b.left,a.Ea.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Fm(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Mm(a,b.left);Dm(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.Ab&&(a.Ab=d)}else{d=Hm(a,b.right);Dm(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.Cb&&(a.Cb=d)}d.count=b.count;Km(b)?b.parent.left=d:Lm(b)?b.parent.right=d:a.Ea=d;Em(a,c?c:d)}else Dm(a,function(a){a.count--;return a.parent},b.parent),Km(b)?(b.parent.left=null,b==a.Cb&&(a.Cb=b.parent),Em(a,b.parent)):Lm(b)?(b.parent.right=null,b==a.Ab&&(a.Ab=b.parent),Em(a,b.parent)):a.clear()}function Hm(a,b){if(!b)return a.Cb;var c=b;Dm(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Mm(a,b){if(!b)return a.Ab;var c=b;Dm(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Cm(a,b){this.value=a;this.parent=b?b:null;this.count=1}Cm.prototype.left=null;Cm.prototype.right=null;Cm.prototype.height=1;function Lm(a){return!!a.parent&&a.parent.right==a}function Km(a){return!!a.parent&&a.parent.left==a};function Nm(a){this.Ta=a||Bm}E(Nm,Am);function tm(a,b,c){if(a.Ea){var d;if(c instanceof Cm)d=c;else if(c){if(Dm(a,function(a){var b=null;0<this.Ta(a.value,c)?(b=a.left,d=a):0>this.Ta(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Hm(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function sm(a,b,c){if(a.Ea){var d;if(c instanceof Cm)d=c;else if(c){if(Dm(a,B(function(a){var b=null;0<this.Ta(a.value,c)?b=a.left:(0>this.Ta(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Mm(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function Om(a,b,c){this.l=a;this.storage=b;this.h=c;this.g={};a=this.h.keyPath;this.i=u(a)?a.join(","):a||"_ROWID_";this.g[this.i]=null;this.j=zm(this.l,this.h.getName(),this.i)+"^|"}
function ym(a,b){var c=b||a.i;if(!a.g[c]){a.g[c]=new Nm(wm);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&ra(f,a.j)){var g=zj(f.substr(a.j.length));if(c==a.i)a.g[c].add(new um(g));else{var k=a.storage.getItem(f);if(null!==k)if(f=Nj(a.h,c),k=vh(k),k=ul(f,k),f.multiEntry){if(u(k))for(f=0;f<k.length;f++)a.g[c].add(new um(k[f],g))}else a.g[c].add(new um(k,g))}}}}return a.g[c]}
function Pm(a,b,c){for(var d in a.g){var e=a.g[d];if(e)if(d==a.i)e.remove(new um(b));else{var f=Nj(a.h,d),f=tj(c,f.keyPath);e.remove(new um(b,f))}}}function Qm(a){for(var b in a.g){var c=a.g[b];c&&c.clear()}a.g={}}
function qm(a,b,c,d){if(null==b&&(a.h.keyPath&&(b=Wk(a.h,c)),a.h.h&&null==b)){b=a.j+wj(void 0);var e=vh(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,xh(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.j+wj(b)));if(d)return null;a.storage.setItem(a.j+wj(b),xh(c));d=b;for(var f in a.g)if(e=a.g[f])if(f==a.i)e.add(new um(d));else{var g=Nj(a.h,f),g=tj(c,g.keyPath);null!=g&&e.add(new um(d,g))}return b}
function Rm(a,b){var c=a.j+wj(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=vh(d);Pm(a,b,c);return 1}h=Om.prototype;h.clear=function(){Qm(this);Sm(this)};h.ka=function(a,b){if(a&&a!=this.i)throw"impl";var c=this.storage.getItem(this.j+wj(b)),d=void 0;if(null!==c)for(var d=vh(c),c=0,e=this.h.indexes.length;c<e;c++){var f=this.h.index(c);if("DATE"==f.type){var g=ul(f,d);g&&vl(f,d,new Date(g))}}return d};h.getName=function(){return this.h.getName()};
function Tm(a,b,c){b=b||a.i;a=ym(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new um(c.lower)),null!=c.upper&&(e=new um(c.upper)),g=c.lowerOpen,k=c.upperOpen);tm(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=rj(a.key,d.key))){if(null!=e&&(a=rj(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Sm(a,b){var c=ym(a,a.i),d=null,e=null,f=0,g=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new um(b.lower)),null!=b.upper&&(e=new um(b.upper)),l=b.lowerOpen,m=b.upperOpen);tm(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=wm(b,d))){if(null!=e){var c=wm(b,e);if(1===c||0===c&&m)return!0}var c=a.j+wj(b.key),q=a.storage.getItem(c);null!==q&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(vh(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Pm(a,g[c],k[c]);else Qm(a);return f}
h.td=function(a,b,c,d,e,f,g,k){function l(b){if(b&&(z++,!(z<f))){var c=b.value;if(d){if(G&&null!=v&&(b=p?wm(c,v):rj(c.key,v.key),0==b))return;if(null!=s&&(b=p?wm(c,s):rj(c.key,s.key),-1==b||0==b&&D))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(D&&null!=s&&(b=p?wm(c,s):rj(c.key,s.key),0==b))return;if(null!=v&&(b=p?wm(c,v):rj(c.key,v.key),1==b||0==b&&G))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!g||!q||null==n||0!=rj(n,b)){c=q?c.ja():b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=O.ka(null,c);m.push(l)}else m.push([b,c,O.ka(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,p=!!k&&null!=k[0];b=b||this.i;var q=b!=this.i;b=ym(this,b);var s=null,v=null;t(f)||(f=0);var z=-1,D=!1,G=!1;null!=c&&(null!=c.lower&&(s=q&&d?new um(c.lower,"\uffff"):new um(c.lower)),null!=c.upper&&(v=q&&!d?new um(c.upper,"\uffff"):new um(c.upper)),D=!!c.lowerOpen,G=!!c.upperOpen);if(p){d?G=!0:D=!0;c=k[0];var J=t(k[1])?k[1]:"\uffff";d?v=q?new um(c,J):new um(c):
s=q?new um(c,J):new um(c)}var O=this;d?sm(b,l,v):tm(b,l,s);return m};h.Ma=function(a,b,c,d,e){return this.td(2,a,b,c,d,e)};h.toString=function(){return"ydn.db.con.simple.Store:"+this.l+":"+this.h.getName()};function Um(){this.clear()}h=Um.prototype;h.pe=function(){return this};h.setItem=function(a,b){t(this.g[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.g[a]=b};h.getItem=function(a){return t(this.g[a])?this.g[a]:null};h.removeItem=function(a){delete this.g[a];Wa(this.keys,a.toString());this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return t(a)?this.g[a]:null};h.clear=function(){this.g={};this.keys=[];this.length=0};function Vm(a){this.n=a||new Um;this.l={}}function xm(a,b){var c=Y(a.g,b);if(c)a.l[b]||(a.l[b]=new Om(a.i,a.j,c));else throw new Sc('store name "'+b+'" not found.');return a.l[b]}Vm.prototype.jb=function(a){var b=this;setTimeout(function(){var c=zm(b.i),c=b.j.getItem(c),c=new Ol(c);a(c)},10)};function Wm(a,b){this.h=a;this.g=b}Wm.prototype.L=function(a,b){var c=this.h;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.g("complete",null);d.g=null;d.h=null}};function Xm(a,b){this.g=b}E(Xm,sk);h=Xm.prototype;h.logger=R("ydn.db.crud.req.SimpleStore");h.Nd=function(a,b,c){this.lb(a,!0,!1,null,b,c)};
h.lb=function(a,b,c,d,e,f){Q(this.logger,W(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var g=a.g.L(function(k){var l;if(c)l=xm(k,d),k=f?f[0]:void 0,k=qm(l,k,e[0],!b),null!=k?U(a,k):(l=wh(k),l=new gk(l),U(a,l,!0));else{for(var m=d,n=[],p=!1,q=f||{},s=0;s<e.length;s++){var v;d?v=q[s]:(m=f[s],v=m.F(),m=m.I());l&&l.getName()==m||(l=xm(k,m));v=qm(l,v,e[s],!b);null!=v?n.push(v):(p=!0,n.push(new gk))}U(a,n,p)}g();g=null},this)};h.hf=function(){throw new Qc("putData");};
h.sd=function(a,b,c){var d=a.g.L(function(e){e=xm(e,b).ka(null,c);U(a,e);d();d=null},this)};function Ym(a,b,c,d){var e=b.g.L(function(a){for(var g=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof qk&&(k=n,n=k.F(),k=k.I());l&&l.getName()==k||(l=xm(a,k));n=l.ka(null,n);g[m]=n}U(b,g,!1);e();e=null},a)}h.bf=function(a,b,c){Ym(this,a,b,c)};h.Gd=function(a,b){Ym(this,a,null,b)};
h.Pd=function(a,b,c){var d=W(a)+" removeById "+b+" "+c;Q(this.logger,d);var e=this,f=a.g.L(function(g){g=Rm(xm(g,b),c);P(e.logger,"success "+d+(0==g?" [not found]":""));U(a,g);f();f=null},this)};h.Qd=function(a,b){Q(this.logger,W(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.g.L(function(f){for(var g=0;g<b.length;g++){var k=b[g].I(),l=b[g].F();c&&c.getName()==k||(c=xm(f,k));d+=Rm(c,l)}U(a,d);e();e=null},this)};h.ne=function(a,b,c){this.Wc(a,b,c)};
h.Wc=function(a,b,c){var d=W(a)+" removeByKeyRange "+(c?xh(c):"");Q(this.logger,d);var e=this,f=a.g.L(function(g){g=Sm(xm(g,b),c);P(e.logger,d+" deleted "+g+" records.");U(a,g);f();f=null},this)};h.jf=function(a,b,c,d){var e=W(a)+" removeByIndexKeyRange "+(d?xh(d):"");Q(this.logger,e);var f=a.g.L(function(e){e=xm(e,b);for(var k=e.Ma(c,d),l=k.length,m=0;m<l;m++)Rm(e,k[m]);U(a,l);f();f=null},this)};
h.ld=function(a,b){var c=W(a)+" clearByStores";Q(this.logger,c);var d=a.g.L(function(e){for(var f=0;f<b.length;f++)xm(e,b[f]).clear();P(this.logger,"success "+c);U(a,b.length);d();d=null},this)};h.od=function(a,b){var c=a.g.L(function(d){for(var e=[],f=0;f<b.length;f++){var g=xm(d,b[f]);e.push(Tm(g))}U(a,e);c();c=null},this)};
h.Fc=function(a,b,c,d){var e=W(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");Q(this.logger,e);var f=a.g.L(function(g){g=Tm(xm(g,b),d,c);P(this.logger,"success "+e);U(a,g);f();f=null},this)};h.list=function(a,b,c,d,e,f,g,k,l,m){var n=W(a)+" "+c+" "+(e?wh(e):"");Q(this.logger,n);var p=a.g.L(function(q){q=xm(q,c).td(b,d,e,k,f,g,l,m);P(this.logger,n+" "+q.length+" records found.");U(a,q);p();p=null},this)};function Zm(a,b){this.g=b}E(Zm,Xm);Zm.prototype.h=function(a,b,c,d){c=Y(this.g,c);return new pm(a,b,c,d)};function $m(a,b,c,d){Lj.call(this,a,b,c,d);this.K=null;this.s=this.l=void 0}E($m,Lj);h=$m.prototype;h.logger=R("ydn.db.core.req.WebsqlCursor");h.ja=function(){return this.s};h.init=function(a,b,c,d,e){$m.m.init.call(this,a,b,c,d,e);this.K=x(b)?Nj(this.i,b):null};h.V=function(){return this.$};function an(a,b){a.l=void 0;a.s=void 0;a.$=void 0;if(t(b))if(A(b)){var c=wl(b[a.i.l],a.i.type);a.s=c;if(a.j){var d=Nj(a.i,a.zb);a.l=wl(b[a.zb],d.type)}else a.l=c;a.$=a.Rc?c:bn(b,a.i)}else a.$=b}
function cn(a,b,c,d,e,f){var g=!d;d=[];a.j&&null!=f&&null!=c?c=Fl(a.i,a.ca,d,a.K.getName(),a.ba,c,g,f,a.reverse,a.unique):null!=c?(f=a.K?a.K.getName():null,c=El(a.i,a.ca,d,f,a.ba,a.reverse,a.unique,c,g)):(c=Bl(a.i,d,a.ca,a.j?a.K.j:a.i.l,a.ba,a.reverse,a.unique),a.j&&(c+=", "+a.i.j+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);Q(a.logger,a+": continue:  SQL: "+c+" : "+xh(d));a.n.executeSql(c,d,function(c,d){0<d.rows.length?an(a,d.rows.item(0)):an(a);b.call(a,a.l,a.s,a.$);b=null},function(c,d){N(a.logger,
"get error: "+d.message);a.U(d);Oj(a);a.D=!0;an(a);b.call(a,a.s,a.l,a.$);b=null;return!1})}h.Bd=function(){return!!this.n};h.update=function(a){if(!this.Bd())throw new kk;var b=new F,c=this.ja();a=Il(this.i,a,c);var d="REPLACE INTO "+Dl(this.i)+" ("+a.Lf.join(", ")+") VALUES ("+a.hg.join(", ")+")";Q(this.logger,this+': update "'+d+'" : '+xh(a.values));this.n.executeSql(d,a.values,function(){b.w(c)},function(a,c){b.A(c);return!1});return b};
h.advance=function(a){var b=this.l,c=this.s,d=!0;null==this.l||this.j&&null==this.s||(a-=1,d=!1);cn(this,function(a,d,g){var k=null!=b&&null!=a&&0==rj(b,a);if(this.j){var l=null!=d&&null!=c&&0==rj(d,c);if(k&&l)throw new Sc("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new Sc("current: "+b+" next: "+a);this.hc(a,d,g)},this.l,d,a,this.s)};h.md=function(a){null!=a?cn(this,this.hc,a,!0):this.advance(1)};h.openCursor=function(a,b){cn(this,this.hc,a,!1,0,b)};
h.clear=function(){if(!this.Bd())throw new kk;var a=new F,b=this.i.l,b="DELETE FROM "+Dl(this.i)+" WHERE "+b+" = ?",c=[this.ja()];Q(this.logger,this+': clear "'+b+'" : '+xh(c));this.n.executeSql(b,c,function(b,c){a.w(c.rowsAffected)},function(b,c){a.A(c);return!1});return a};h.toString=function(){return"WebSql"+$m.m.toString.call(this)};function dn(a,b){this.g=b}E(dn,sk);h=dn.prototype;h.logger=R("ydn.db.crud.req.WebSql");
function bn(a,b){if(b.mc&&!b.keyPath&&0==b.indexes.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return vh(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?vh(a._default_):{};null!=b.keyPath&&(d=wl(a[b.keyPath],b.type),null!=d&&cl(b,c,d));for(d=0;d<b.indexes.length;d++)e=
b.index(d),f=e.j,"_default_"==f||e.n||e.multiEntry||"DATE"!=e.type&&!b.mc||(f=wl(a[f],e.type),t(f)&&vl(e,c,f));return c}h.hf=function(){throw new Qc("putData");};
h.lb=function(a,b,c,d,e,f){function g(b,d){if(null==e[b])if(Q(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)P(m.logger,q+" success "+q),U(a,n,s);else{var D=b+2;D<e.length&&g(D,d)}var G;G=t(f)?Il(k,e[b],f[b]):Il(k,e[b]);D=l+Dl(k)+" ("+G.Lf.join(", ")+") VALUES ("+G.hg.join(", ")+");";Q(m.logger,W(a)+" SQL: "+D+" PARAMS: "+G.values+" REQ: "+b+" of "+e.length);d.executeSql(D,G.values,function(f,q){function D(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Ia(e)+" ("+k.j+", "+
b.i+") VALUES (?, ?)",f=[sj(I,k.type),sj(c,b.type)];Q(m.logger,W(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){N(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var I=t(G.key)?G.key:q.insertId;1>q.rowsAffected&&(s=!0,I=new gk(I+" no-op"));for(var pc=0,Ci=k.indexes.length;pc<Ci;pc++){var Yc=k.index(pc);if(Yc.multiEntry)for(var Ld=tj(e[b],Yc.keyPath),Ru=(Ld?Ld.length:0)||0,Pl=0;Pl<Ru;Pl++)D(Yc,Ld[Pl])}c?U(a,I):(n[b]=I,p==e.length?U(a,n,s):(pc=b+2,pc<e.length&&
g(pc,f)))},function(d,f){p++;s=!0;6==f.code?f.name="ConstraintError":N(m.logger,"error: "+f.message+" "+q);if(c)U(a,f,!0);else if(n[b]=f,p==e.length)Q(m.logger,"success "+q),U(a,n,s);else{var k=b+2;k<e.length&&g(k,d)}return!1})}b=!b;var k=Y(this.g,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.g;var m=this,n=[],p=0,q=W(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)g(b,d);else P(this.logger,"success"),U(a,[])};
h.Nd=function(a,b,c){if(0==c.length)U(a,[]);else{for(var d=[],e=0,f=0,g=this,k=function(k,l){var m=[];Q(g.logger,"put "+l.length+" objects to "+k);for(var n=Hl(Y(g.g,k)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].F());n=bk(a);n.u(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&U(a,d)},function(){e++;e==f&&U(a,d,!0)});g.lb(n,!1,!1,k,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var q=c[p].I(),s=c[p].F();q!=l?(f++,0<m.length&&k(l,m),m=[p],n=[s],l=q):(m.push(p),n.push(s))}0<
m.length&&k(l,m)}};h.sd=function(a,b,c){var d=a.g,e=Y(this.g,b),f=this;b=e.j;c=[sj(c,e.type)];b="SELECT * FROM "+Dl(e)+" WHERE "+b+" = ?";var g=W(a)+" SQL: "+b+" PARAMS: "+c;Q(this.logger,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=bn(d,e),U(a,d)):(P(f.logger,"success no result: "+g),U(a,void 0))}else P(f.logger,"success no result: "+g),U(a,void 0)},function(b,c){N(f.logger,"error: "+g+" "+c.message);U(a,c,!0);return!1})};
h.bf=function(a,b,c){function d(b,e){var p=l.j,q=[sj(c[b],l.type)],s="SELECT * FROM "+Dl(l)+" WHERE "+p+" = ?";Q(f.logger,"SQL: "+s+" PARAMS: "+q);e.executeSql(s,q,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=bn(n,l))}else g[b]=void 0;k==c.length?U(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;N(f.logger,"error: "+s+" "+l.message);if(k==c.length)U(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.g,f=this,g=[],k=0,l=Y(this.g,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else P(f.logger,"success"),U(a,[])};
h.Gd=function(a,b){function c(d,k){var n=b[d],p=Y(e.g,n.I()),q=u(n.id)?n.id.join("^|"):n.id instanceof Date?+n.id:n.id,n=p.j,q=[sj(q,p.type)],s="SELECT * FROM "+Dl(p)+" WHERE "+n+" = ?";Q(e.logger,"SQL: "+s+" PARAMS: "+q);k.executeSql(s,q,function(k,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=bn(n,p))}else f[d]=void 0;g==b.length?(Q(e.logger,"success "+s),U(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){U(a,c,!0);return!1})}var d=a.g,e=this,f=[],g=0;if(0<b.length)for(var k=0;10>
k&&k<b.length;k++)c(k,d);else Q(this.logger,"success"),U(a,[])};
h.ld=function(a,b){function c(d,g){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Ia(a);Q(e.logger,"SQL: "+a);g.executeSql(a,[])}var l=Y(e.g,b[d]),m="DELETE FROM  "+Dl(l);Q(e.logger,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(Q(e.logger,"success "+m),U(a,b.length)):c(d+1,g)},function(b,c){U(a,c,!0);return!1});for(var n=0,p=l.indexes.length;n<p;n++){var q=l.index(n);q.multiEntry&&k(q)}}var d=a.g,e=this;0<b.length?c(0,d):(Q(this.logger,"success"),
U(a,0))};
h.Qd=function(a,b){function c(k){if(k>=b.length)U(a,f,g);else{var l=Y(e.g,b[k].I()),m=sj(b[k].F(),l.type),n=" WHERE "+l.j+" = ?",p="DELETE FROM "+Dl(l)+n,q=W(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(k)},function(a,b){N(e.logger,"error: "+q+b.message);g=!0;c(k);return!1});k++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+n;Q(e.logger,W(a)+NaN+b);d.executeSql(b,[m])},s=0,v=l.indexes.length;s<v;s++){var z=l.index(s);z.multiEntry&&p(z)}}}
var d=a.g,e=this,f=0,g=!1;Q(this.logger,W(a)+" removeByKeys: "+b.length+" keys");c(0)};
h.Pd=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+l;Q(k.logger,W(a)+NaN+b);e.executeSql(b,[g])}var e=a.g,f=Y(this.g,b),g=sj(c,f.type),k=this,l=" WHERE "+f.j+" = ?";b="DELETE FROM "+Dl(f)+l;Q(this.logger,W(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){U(a,c.rowsAffected)},function(b,c){U(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};h.ne=function(a,b,c){en(this,a,b,void 0,c)};
h.Wc=function(a,b,c){en(this,a,b,void 0,c)};h.jf=function(a,b,c,d){en(this,a,b,c,d)};
function en(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Ia(c)+n;Q(a.logger,W(b)+NaN+c);g.executeSql(c,m)}var g=b.g,k=Y(a.g,c);c="DELETE FROM "+Dl(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=Nj(k,d),qj(d.i,d.type,e,m,l)):qj(k.j,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=W(b)+" SQL: "+c+" PARAMS: "+l;Q(a.logger,p);g.executeSql(c,l,function(c,d){Q(a.logger,"success "+p);U(b,d.rowsAffected)},function(c,d){N(a.logger,"error: "+p+d.message);U(b,d,!0);return!1});
e=0;for(d=k.indexes.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}h.od=function(a,b){function c(g){var k="SELECT COUNT(*) FROM "+Ia(b[g]);Q(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[g]=parseInt(k["COUNT(*)"],10);g++;g==b.length?U(a,f):c(g)},function(b,c){U(a,c,!0);return!1})}var d=a.g,e=this,f=[];0==b.length?(Q(this.logger,"success"),U(a,0)):c(0)};
h.Fc=function(a,b,c,d,e){var f=[];b=Bl(Y(this.g,b),f,6,d,c,!1,e);Q(this.logger,W(a)+" SQL: "+b+" PARAMS: "+f);a.g.executeSql(b,f,function(b,c){var d=c.rows.item(0);U(a,Tl(d))},function(b,c){U(a,c,!0);return!1})};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=this,p=[],q=Y(this.g,c),s=q.l,v=q.type,z=v,D=null!=d&&d!==s?Nj(q,d):null,G=d||s;D&&(z=D.type);c=[];if(m&&t(m[0])){var J=m[0];D&&t(m[1])?(d=m[1],e=Fl(q,b,c,D.getName(),e,J,!0,d,k,l)):e=El(q,b,c,d,e,k,l,J,!0)}else e=Bl(q,c,b,G,e,k,l);y(f)&&(e+=" LIMIT "+f);y(g)&&(e+=" OFFSET "+g);var O=a+" SQL: "+e+" ;params= "+xh(c);Q(this.logger,O);a.g.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=wl(f[s],v):1==b?p[g]=wl(f[G],
z):3==b?p[g]=[wl(f[G],z),wl(f[s],v)]:null!=f&&(p[g]=bn(f,q));P(n.logger,"success "+a);m&&f&&(m[0]=wl(f[G],z),m[1]=wl(f[s],v));U(a,p)},function(b,c){N(n.logger,"error: "+O+c.message);U(a,c,!0);return!1})};function fn(a,b){this.g=b}E(fn,dn);fn.prototype.logger=R("ydn.db.core.req.WebSql");fn.prototype.h=function(a,b,c,d){c=Y(this.g,c);return new $m(a,b,c,d)};im.prototype.H=function(){var a=wk(this);if("indexeddb"==a)return new nm(0,this.h);if("websql"==a)return new fn(0,this.h);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Zm(0,this.h);throw new Sc("No executor for "+a);};function gn(a){return x(a)?a.replace(/\D/g,"").replace(/^0+/,""):null}function hn(a){if(!x(a)||!/[\w\+]+@\w+\.\w+/.test(a))return null;a=a.toLowerCase();return a=a.replace(/\+\w*?@/,"@")};function jn(a){if(!x(a))throw new Ch;this.Za=a;this.j=Ij;this.g=[];kn(this,a);this.bd=""}h=jn.prototype;h.Za="";h.bg=NaN;h.dg=NaN;h.of=!1;h.bd="";
function kn(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.l=c[1].toUpperCase();if("SELECT"==a.l)a.j=Hj;else if("INSERT"==a.l)a.j=Ij;else if("UPDATE"==a.l)a.j=Ij;else if("DELETE"==a.l)a.j=Ij;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.i=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.i=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new ok("missing closing parentheses"));a.H=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.h=d.substring(c),d=d.substring(0,c)):a.h="";c=d.search(/WHERE/i);0<c?(a.n=d.substring(c+6).trim(),d=d.substring(0,c)):a.n="";a.g=d.trim().split(",").map(function(a){a=Fa(a,'"');a=Fa(a,"'");return a.trim()})}}}
h.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Za=this.Za.replace("?",a[b]);kn(this,this.Za)}this.p=ln(this);if(!this.p)return this.bd;a=this.h.length;if(b=/OFFSET\s+(\d+)/i.exec(this.h))this.dg=parseInt(b[1],10),a=this.h.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.h))this.bg=parseInt(b[1],10),b=this.h.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.h.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.of="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.of=!1,this.s=Fa(Fa(a,'"'),"'")):this.s=void 0;return""};function mn(a){if("*"==a.H)return null;a=a.H.split(",");return a=a.map(function(a){return Fa(a.trim(),'"')})}h.toJSON=function(){return{sql:this.Za}};
function ln(a){function b(a){return Ta(c,function(b){return b.Jc()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.n.length)for(var e=a.n.split("AND"),f=0;f<e.length;f++){var g=e[f],k=d.exec(g);if(k){var l=k[1].trim(),l=Fa(l,'"'),l=Fa(l,"'");if(0<l.length){var m=k[3].trim(),m=ra(m,'"')?Fa(m,'"'):ra(m,"'")?Fa(m,"'"):parseFloat(m),k=new Ej(l,k[2],m),l=b(l);if(0<=l){if(c[l]=c[l].le(k),!c[l])return a.bd='where clause "'+g+'" conflict',null}else c.push(k)}else return a.bd='Invalid clause "'+g+'"',null}else return a.bd=
'Invalid clause "'+g+'"',null}return c}h.toString=function(){return"query:"+this.Za};function nn(a,b){this.g=b;this.h=a}nn.prototype.logger=R("ydn.db.sql.req.nosql.Node");nn.prototype.toJSON=function(){return{sql:this.g}};nn.prototype.toString=function(){return"idb.Node:"};
nn.prototype.execute=function(a,b){var c=Za(this.g.g)[0],d=this.g.p,e=this.g.bg,e=isNaN(e)?100:e,f=this.g.dg,f=isNaN(f)?0:f,g=this.g.s,k=mn(this.g),l=null,m=this.g.of;if(0==d.length)l=null;else if(1==d.length)l=kj(d[0].g);else throw new Pc("too many conditions.");null===k||dk(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return tj(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=tj(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].Jc():void 0,n=W(a)+" executing on"+c;d&&(n+=":"+
d);n+=" "+pj(l);P(this.logger,n);g&&g!=this.h.keyPath?b.list(a,4,c,g,l,e,f,m,!1):t(d)&&d!=this.h.keyPath?b.list(a,4,c,d,l,e,f,m,!1):b.list(a,4,c,null,l,e,f,m,!1)};function on(a,b){nn.call(this,a,b)}E(on,nn);
on.prototype.execute=function(a,b){var c,d=Za(this.g.g)[0],e=this.g.p,f=null;if(0==e.length)f=null;else if(1==e.length)f=kj(e[0].g);else throw new Pc("too many conditions.");var g=this.g.i,e=0<e.length?e[0].Jc():void 0,k=W(a)+" executing "+g+" on "+d;e&&(k+=":"+e);k+=" "+pj(f);P(this.logger,k);if("COUNT"==g)f?b.Fc(a,d,f,e,!1):b.Fc(a,d,null,void 0,!1);else{var l,k=mn(this.g);if(!k||0==k.length)throw new Ih("field name require for reduce operation: "+g);k=k[0];if("MIN"==g)l=pn(k);else if("MAX"==g)l=
qn(k);else if("AVG"==g)c=0,l=rn(k);else if("SUM"==g)c=0,l=sn(k);else throw new Dh(g);var m;m=t(e)?new Wj(d,e,f):new Vj(d,f);var d=b.h(a.g,W(a),d,4),n=m.load([d]);n.U=function(b){U(a,b,!0)};var p=0;n.O=function(b){null!=b?(b=m.g?n.ja():n.V(),c=l(b,c,p),n.advance(1),p++):U(a,c)}}};function rn(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function sn(a){return function(b,c){return c+b[a]}}function pn(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function qn(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function tn(a,b){this.g=b}E(tn,nm);tn.prototype.logger=R("ydn.db.sql.req.IndexedDb");tn.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new ok(c);c=Za(b.g);if(1==c.length){var d=Y(this.g,c[0]);if(!d)throw new lk(c[0]);var e=mn(b);if(e)for(var f=0;f<e.length;f++)if(!Sk(d,e[f]))throw new lk('Index "'+e[f]+'" not found in '+c[0]);(b.i?new on(d,b):new nn(d,b)).execute(a,this)}else throw new Dh(b.Za);};function un(a,b){this.h=b;this.i=a;this.g=mn(b)}un.prototype.logger=R("ydn.db.sql.req.websql.Node");un.prototype.toJSON=function(){return{sql:this.h.Za}};un.prototype.toString=function(){return"websql.Node:"};function vn(a,b){if(a.g){if(1==a.g.length){if(A(b))return nc(b,a.g[0]);return}for(var c={},d=0;d<a.g.length;d++)c[a.g[d]]=nc(b,a.g[d]);return c}return bn(b,a.i)}
un.prototype.execute=function(a,b,c){var d=this,e=[];b.executeSql(this.h.Za,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(A(m))var n=vn(d,m);e.push(n)}a(e)},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function wn(a,b){un.call(this,a,b)}E(wn,un);wn.prototype.execute=function(a,b,c){var d=this;b.executeSql(this.h.Za,c,function(b,c){var d=c.rows.length;if(1==d)d=Tl(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new jk;},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function xn(a,b){this.g=b}E(xn,fn);xn.prototype.logger=R("ydn.db.sql.req.WebSql");xn.prototype.executeSql=function(a,b,c){var d=Za(b.g);if(1==d.length){var e=Y(this.g,d[0]);if(!e)throw new lk(d[0]);var f=mn(b);if(f)for(var g=0;g<f.length;g++)if(!Sk(e,f[g]))throw new lk('Index "'+f[g]+'" not found in '+d[0]);(b.i?new wn(e,b):new un(e,b)).execute(function(b,c){U(a,b,c)},a.g,c)}else throw new Dh(b.Za);};function yn(a,b){this.g=b}E(yn,Zm);yn.prototype.logger=R("ydn.db.sql.req.SimpleStore");yn.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new ok(c);c=Za(b.g);if(1==c.length){var d=Y(this.g,c[0]);if(!d)throw new lk(c[0]);var e=mn(b);if(e)for(var f=0;f<e.length;f++)if(!Sk(d,e[f]))throw new M('Index "'+e[f]+'" not found in '+c[0]);(b.i?new on(d,b):new nn(d,b)).execute(a,this)}else throw new Pc(b.Za);};function zn(a,b,c,d){Gk.call(this,a,b,c,d)}E(zn,ll);zn.prototype.executeSql=function(a,b){for(var c=new jn(a),d=Za(c.g),e=0;e<d.length;e++){var f=Y(this.h,d[e]);if(!f)throw new M("store: "+f+" not exists.");}P(this.logger,"executeSql: "+a+" params: "+b);var g=this.g.request("sql",Za(c.g),c.j);V(g,function(){X(this).executeSql(g,c,b||[])},this);return g};function An(a,b,c){hm.call(this,a,b,c)}E(An,im);An.prototype.Tc=function(a,b){return new zn(this,this.h,a,b)};An.prototype.executeSql=function(a,b){return this.g.executeSql(a,b)};An.prototype.H=function(){var a=wk(this);if("indexeddb"==a)return new tn(0,this.h);if("websql"==a)return new xn(0,this.h);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new yn(0,this.h);throw new Sc("No executor for "+a);};function Bn(a,b){t(a)&&5242880<a&&N(this.logger,"storage size request ignored, use Quota Management API instead");this.la=null;this.Yc=b||NaN}h=Bn.prototype;
h.connect=function(a,b){function c(a,c,d){P(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Cn(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)Pk(b,c[d])||(a.deleteObjectStore(c[d]),P(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.h?N(e.logger,"database already set."):t(b)?(N(e.logger,b?b.message:"Error received."),e.la=null,f.A(b)):(e.la=a,e.la.onabort=function(a){Q(e.logger,e+": abort");e.cd(a.target.error)},
e.la.onerror=function(a){Q(e.logger,e+": error");e.cd(a.target.error)},e.la.onversionchange=function(a){Q(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.la&&(e.la.onabort=null,e.la.onblocked=null,e.la.onerror=null,e.la.onversionchange=null,e.Ld(a),!a.defaultPrevented)){e.la.close();e.la=null;var b=Error();b.name=a.type;e.be(b)}},f.w(parseFloat(g)))}var e=this,f=new F,g=void 0,k=b.version;P(e.logger,"Opening database: "+a+" ver: "+(b.h?"auto":k));var l;l=t(k)?Kj.open(a,k):
Kj.open(a);l.onsuccess=function(f){var k=f.target.result;t(g)||(g=k.version);P(e.logger,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.h)e.jb(function(f){if(b instanceof Lk)for(var g=0;g<f.stores.length;g++)Pk(b,f.stores[g].getName())||Mk(b,f.stores[g].fa());f=Ql(b,f,!1,!0);if(0<f.length){P(e.logger,"Schema change require for difference in "+f);var l=y(k.version)?k.version+1:1;if("IDBOpenDBRequest"in r){k.close();var m=Kj.open(a,l);m.onupgradeneeded=function(a){a=a.target.result;P(e.logger,
"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){P(e.logger,e+": fail.");d(null)}}else{var p=k.setVersion(l+"");p.g=function(a){N(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=G;c(k,p.transaction,!0)};var G=function(){var b=Kj.open(a);b.onsuccess=function(a){a=a.target.result;P(e.logger,e+": OK.");d(a)};b.onerror=function(){P(e.logger,e+": fail.");d(null)}};
null!=p.transaction&&(p.transaction.oncomplete=G)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.g=function(a){N(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?P(e.logger,"database version "+k.version+" ready to go"):N(e.logger,"connected database version "+k.version+" is higher than requested version."),e.jb(function(a){a=Ql(b,a,!1,!0);0<a.length?(P(e.logger,a),
d(null,new Gh("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;P(e.logger,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){e.logger.log(Se,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name,void 0);d(null,c)};l.onblocked=function(c){e.logger.log(Se,"database "+a+" "+b.version+" block, close other connections.",void 0);d(null,c)};y(this.Yc)&&!isNaN(this.Yc)&&
setTimeout(function(){"done"!=l.readyState&&(e.logger.log(Se,e+": database state is still "+l.readyState,void 0),d(null,new pk("connection timeout after "+e.Yc)))},this.Yc);return f};h.Yc=18E4;h.be=function(){};h.cd=function(){};h.Ld=function(){};h.Dc=function(){return"indexeddb"};h.ae=function(){return!!this.la};h.logger=R("ydn.db.con.IndexedDb");h.la=null;h.$d=function(){return this.la?parseFloat(this.la.version):void 0};
h.jb=function(a,b,c){c=c||this.la;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Ol(c.version));return}throw new Fh;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Ol(c.version));return}b=c.transaction(b,Hj)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var p=k.index(k.indexNames[m]);l[m]=new rl(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Ik(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new Ol(c.version,f);a(b)};
function Cn(a,b,c,d){function e(){var a={autoIncrement:!!d.h};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}Q(a.logger,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());yl(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),N(a.logger,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):fa(c.autoIncrement)&&fa(d.h)&&c.autoIncrement!=d.h&&(b.deleteObjectStore(d.getName()),
N(a.logger,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0;g<d.indexes.length;g++){var k=d.index(g);!f.contains(k.getName())&&k.l&&(c.clear(),N(a.logger,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,g=0;g<d.indexes.length;g++){var k=d.index(g),p=!1;if(f.contains(k.getName())){var q=c.index(k.getName()),s=null!=q.unique&&null!=k.unique&&q.unique!=k.unique,v=null!=q.multiEntry&&null!=k.multiEntry&&q.multiEntry!=
k.multiEntry,q=null!=q.keyPath&&null!=k.keyPath&&!!yl(q.keyPath,k.keyPath);if(s||v||q)c.deleteIndex(k.getName()),p=!0,l--,n++}else"BLOB"!=k.type&&(p=!0);p&&(k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath),l++)}for(g=0;g<f.length;g++)Sk(d,f[g])||(c.deleteIndex(f[g]),m++);Q(a.logger,"Updated store: "+c.name+", "+l+" index created, "+m+" index deleted, "+n+" modified.")}else{c=e();for(g=0;g<d.indexes.length;g++)k=
d.index(g),"BLOB"==k.type?a.logger.info("Index "+k+" of blob data type ignored."):(Q(a.logger,"Creating index: "+k),k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath));Q(a.logger,"Created store: "+c)}}
h.qd=function(a,b,c,d){var e=this.la;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};h.Zd=function(){Q(this.logger,this+" closing connection");this.la.close()};h.toString=function(){return"IndexedDB:"+(this.la?this.la.name+":"+this.la.version:"")};
fk.push(function(a,b){if(!Kj||b&&"indexeddb"!=b)return null;var c=Kj.deleteDatabase(a),d=new Zj("IDBVersionChangeEvent ");c.onblocked=function(a){Uc(d,a)};c.onerror=function(a){d.A(a)};c.onsuccess=function(a){d.w(a)};return d});function Dn(a){Vm.call(this,a);this.h=NaN}E(Dn,Vm);h=Dn.prototype;h.logger=R("ydn.db.con.SimpleStorage");h.$d=function(){return this.h};
h.connect=function(a,b){function c(a,b){setTimeout(function(){b?(P(d.logger,d+" opening fail"),e.A(b)):(P(d.logger,d+" version "+d.$d()+" open"),e.w(a))},10)}var d=this,e=new F;this.j=this.n.pe(a);this.i=a;this.g=b;var f=zm(this.i);this.h=NaN;var g=vh(this.j.getItem(f));t(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new Ol(g),Ql(this.g,g,!1,!1))if(!this.g.h&&!isNaN(g.version)&&this.g.version>g.version)c(NaN,new ik("existing version "+g.version+" is larger than "+this.g.version));else{var k=
this.g.version;this.h=t(k)?k:g.version+1;for(k=0;k<this.g.count();k++)var l=this.g.stores[k]||null;if(this.g instanceof Lk)for(k=0;k<g.count();k++)l=g.stores[k]||null,Mk(this.g,l);k=this.g.toJSON();k.version=this.h||NaN;this.j.setItem(f,xh(k));c(g.version||NaN)}else{for(k=0;k<this.g.count();k++)l=this.g.stores[k]||null;this.h=g.version||NaN;c(this.h)}else g=b.toJSON(),this.h=1,g.version=this.h,this.j.setItem(f,xh(g)),c(NaN);return e};h.ae=function(){return!!this.i};h.be=function(){};h.cd=function(){};
h.Ld=function(){};h.Dc=function(){return"memory"};h.Zd=function(){};h.qd=function(a,b,c,d){a(new Wm(this,function(a,b){d(a,b)}))};h.toString=function(){return"SimpleStorage:"+this.Dc()+":"+(this.i+":"+this.h)};function En(){Dn.call(this,this)}E(En,Dn);En.prototype.pe=function(){return window.localStorage};En.prototype.Dc=function(){return"localstorage"};fk.push(function(a,b){if(!b||"localstorage"==b){var c=new En,d=new Lk;c.connect(a,d);c.jb(function(a){for(var b=0;b<a.stores.length;b++)xm(c,a.stores[b].getName()).clear()})}});function Fn(){Dn.call(this,this)}E(Fn,Dn);Fn.prototype.pe=function(){return window.sessionStorage};Fn.prototype.Dc=function(){return"sessionstorage"};
fk.push(function(a,b){if(!b||"sessionstorage"==b){var c=new Fn,d=new Lk;c.connect(a,d);c.jb(function(a){for(var b=0;b<a.stores.length;b++)xm(c,a.stores[b].getName()).clear()})}});function Gn(a){this.g=t(a)?a:4194304}h=Gn.prototype;
h.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.h?isNaN(f)?1:f+1:c.version;cf(e.logger,a+": changing version from "+b.version+" to "+g);var k=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.jb(function(b){k=!0;for(var d=0;d<c.count();d++){var f=Y(b,(c.stores[d]||null).getName()),f=f?Gl(f,c.stores[d]||null):null;Hn(e,a,c.stores[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,Pk(c,f.getName())||(c instanceof Lk?Mk(c,f):(f="DROP TABLE "+
Dl(f),P(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){e.logger.log(Se,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a,void 0);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");Q(e.logger,a+":"+b.version+" ready"+f);d(b)}else N(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.Ia=null,g.A(b)):(e.Ia=a,g.w(parseFloat(f)))}var e=this,f=NaN,g=new F,
k=null;try{k=r.openDatabase(a,"",a,this.g)}catch(l){if("SECURITY_ERR"==l.name)N(this.logger,"SECURITY_ERR for opening "+a),k=null,this.pf=new nk(l);else throw l;}if(k){var f=k.version,m="database "+a+(0==k.version.length?"":" version "+k.version);null!=b.version&&b.version==k.version?(cf(e.logger,"Existing "+m+" opened as requested."),d(k)):this.jb(function(a){(a=Ql(b,a,!0,!1))?(0==k.version.length?cf(e.logger,"New "+m+" created."):b.h?cf(e.logger,"Existing "+m+" opened and schema change for "+a):
cf(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(cf(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.pf);return g};h.Dc=function(){return"websql"};h.pf=null;h.Ia=null;h.logger=R("ydn.db.con.WebSql");h.be=function(){};h.cd=function(){};
function In(a){var b=a.D,c="CREATE TABLE IF NOT EXISTS "+Dl(a)+" (",d=a.j,c=c+(d+" "+b+" PRIMARY KEY ");a.h&&(c+=" AUTOINCREMENT ");if(!a.mc||!a.keyPath&&0==a.indexes.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,k=a.indexes.length;g<k;g++){var l=a.index(g),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Ia(m)+" ("+d+" "+b+", "+l.i+" "+l.p+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=l.type&&x(n)&&
(n="CREATE "+m+" INDEX IF NOT EXISTS "+Ia(a.getName()+"-"+l.getName())+" ON "+Dl(a)+" ("+l.i+")",e.push(n)),n=l.i,-1==f.indexOf(n)&&(c+=", "+n+" "+l.p+m,f.push(n))}e.unshift(c+")");return e}h.$d=function(){return this.Ia?parseFloat(this.Ia.version):void 0};
h.jb=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;Q(f.logger,"Parsing table schema from SQL: "+q);for(var s=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),v=void 0,z,q=[],D=!1,G=!1,J=0;J<s.length;J++){var O=s[J].match(/\w+|"[^"]+"/g),ia=Pa(O,function(a){return a.toUpperCase()}),I=
Fa(O[0],'"'),O=sl(ia[1]);if(-1!=ia.indexOf("PRIMARY")&&-1!=ia.indexOf("KEY")){z=O;if(x(I)&&!ta(I)&&"_ROWID_"!=I){var pc=I.split(","),v=I;1<pc.length&&(v=pc,z=void 0)}-1!=ia.indexOf("AUTOINCREMENT")&&(D=!0)}else if("_ROWID_"!=I)if("_default_"==I)G=!0;else{var Ci="UNIQUE"==ia[2];ra(I,e.tbl_name+"-")&&(I=I.substr(e.tbl_name.length+1));ia=new rl(I,O,Ci);q.push(ia)}}if(ra(e.name,"ydn.db.me:")){var Yc=e.name.split(":");if(3<=Yc.length){var Ld=Yc[1],v=new rl(Yc[2],O,Ci,!0),s=Ta(q,function(a){return a.getName()==
Yc[2]});0<=s?q[s]=v:q.push(v);s=Ta(k,function(a){return a.getName()===Ld});0<=s?(J=k[s],k[s]=new Ik(J.getName(),J.keyPath,D,z,q,void 0,!G)):k.push(new Ik(Ld,void 0,!1,void 0,[v]));Q(f.logger,'multi entry index "'+v.getName()+'" found in '+Ld+(-1==s?"*":""))}else N(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else J=Ta(k,function(a){return a.getName()===e.name}),0<=J?(s=k[J].index(0),q.push(s),k[J]=new Ik(e.name,v,D,z,q,void 0,!G)):(q=new Ik(e.name,v,D,z,q,void 0,!G),k.push(q))}}d=new Ol(g,
k);a(d)}}var f=this,g=(c=c||this.Ia)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.jb(a,b,c)},function(a){f.logger.log(Se,"opening tx: "+a.message,void 0);throw a;},e)};
function Hn(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==k.length&&(d(!0),d=null)},function(b,e){g++;g==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new mk(e,f);})}var g=0,k=In(c),l="Create";if(e){e=Kk(c,e);if(0==e.length){Q(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";N(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Ia(c.getName()))}Q(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}h.ae=function(){return!!this.Ia};h.Zd=function(){this.Ia=null};
h.qd=function(a,b,c,d){function e(a){Q(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var k=this;null===this.Ia&&(a(null),d("abort",this.pf));c==Hj?this.Ia.readTransaction(g,e,f):c==Jj?this.Ia.changeVersion(this.Ia.version,this.Ia.version+1+"",g,e,f):this.Ia.transaction(g,e,f)};
fk.push(function(a,b){if(ga(r.openDatabase)&&(!b||"websql"==b)){var c=new Gn,d=new Lk;P(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){c.logger.info("all tables in "+a+" deleted.")};d.C(function(){c.qd(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,Q(c.logger,"deleting table: "+p.name),
b.executeSql("DROP TABLE "+p.name))}P(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],Ij,e)});d.Ec(function(){N(c.logger,"Connecting "+a+" failed.")})}});Gn.prototype.Ld=function(){};Gn.prototype.toString=function(){return"WebSql:"+(this.Ia?":"+this.Ia.version:"")};fm.prototype.qe=function(a){return"indexeddb"==a&&Kj?new Bn(this.D,this.O):"websql"==a&&ga(r.openDatabase)?new Gn(this.D):"localstorage"==a&&window.localStorage?new En:"sessionstorage"==a&&window.sessionStorage?new Fn:"memory"==a?new Dn:null};function Jn(a,b){vb.call(this);this.j=b;this.g=[];if(a>this.j)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.g.push(this.h())}E(Jn,vb);Jn.prototype.Od=function(a){this.g.length<this.j?this.g.push(a):this.i(a)};Jn.prototype.h=function(){return{}};Jn.prototype.i=function(a){if(A(a))if(ga(a.sa))a.sa();else for(var b in a)delete a[b]};Jn.prototype.J=function(){Jn.m.J.call(this);for(var a=this.g;a.length;)this.i(a.pop());delete this.g};function Kn(){this.g=[];this.i=new od;this.j=new od;this.n=1;this.l=new Jn(0,4E3);this.l.h=function(){return new Ln};this.p=new Jn(0,50);this.p.h=function(){return new Mn};var a=this;this.h=new Jn(0,2E3);this.h.h=function(){return String(a.n++)};this.h.i=function(){}}R("goog.debug.Trace");function Mn(){this.time=this.count=0}Mn.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Ln(){}
function Nn(a,b,c){var d=[];-1==b?d.push("    "):d.push(On(a.h-b));d.push(" ",Pn(a.h-0));0==a.g?d.push(" Start        "):1==a.g?(d.push(" Done "),d.push(On(a.l-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.j&&d.push("[VarAlloc ",a.j,"] ");return d.join("")}Ln.prototype.toString=function(){return null==this.type?this.i:"["+this.type+"] "+this.i};
Kn.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.g.length;d++){var e=this.g[d];1==e.g&&c.pop();a.push(" ",Nn(e,b,c.join("")));b=e.h;a.push("\n");0==e.g&&c.push("|  ")}if(0!=this.i.ga()){var f=C();a.push(" Unstopped timers:\n");md(this.i,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Pn(b.startTime),")\n")})}b=this.j.Ma();for(d=0;d<b.length;d++)c=this.j.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function On(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function Pn(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Kn;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Qn(a){a.p||(a.p=new L);return a.p}fm.prototype.removeEventListener=function(a,b,c,d){Jc(Qn(this),a,b,c,d)};fm.prototype.Ua=function(a){Qn(this).dispatchEvent(a)};function Rn(a,b,c){hm.call(this,a,b,c)}E(Rn,An);R("ydn.gdata.base");function Sn(a){this.i=a||null;this.g=this.h=null;a&&Tn(this,a)}Sn.prototype.logger=R("ydn.crm.UserSetting");
var Un={stores:[{name:"general"},{name:"sugar"}]},Vn={stores:[{name:"contact",keyPath:"id.$t",type:"TEXT",indexes:[{name:"updated.$t",type:"TEXT"},{name:"ydn$emails",multiEntry:!0,generator:function(a){var b=[];a=u(a.gd$email)?a.gd$email:A(a.gd$email)?[a.gd$email]:[];for(var c=0;c<a.length;c++){var d=hn(a[c].address);d&&b.push(d)}return b}},{name:"ydn$externalIds",multiEntry:!0,generator:function(a){return(u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:
[]).map(function(a){return a.value})}}]}]};function Tn(a,b){if(!a.i||a.i!=b){r.sessionStorage.setItem("last-user-id",b);var c=b+"-setting",d=b+"-gdata";a.h&&a.h.getName()!=c&&($l(a.h),a.h=null);a.g&&a.g.getName()!=d&&($l(a.g),a.g=null);a.h||(a.h=new Rn(c,Un));a.g||(a.g=new Rn(d,Vn))}}function Wn(a){return a.i?a.i+"-sd":r.sessionStorage.getItem("last-user-id")+"-sd"}function Xn(a){var b=Wn(a),c=new F;chrome.storage.local.get(b,function(a){c.w(a[b])});return c}
function Yn(a,b){var c=Wn(a),d=new F,e={};e[c]=b;chrome.storage.local.set(e,function(){d.w(!0)})};function Zn(){var a=new F;chrome.storage.sync.get("user-setting",function(b){a.w(b["user-setting"])});return a};function $n(){}$n.prototype.logger=R("ydn.crm.Client");function ao(a,b,c){this.client=a;this.g=b;this.h=c}ao.prototype.request=function(a){a=this.g.call(this.h,a);return this.client.request(a)};function bo(a,b,c){this.h=a;this.i=b;this.g=c}bo.prototype.request=function(a){return this.h(a)?this.i.request(a):this.g.request(a)};function co(a,b){this.client=a;this.h=b;this.Uc=NaN;this.i=[];this.g=!1}co.prototype.request=function(a){return new eo(a,this)};function eo(a,b){a.path=b.h+a.path;this.req=b.client.request(a);this.parent=b;this.i=null;this.h=void 0}E(eo,cj);
eo.prototype.execute=function(a,b){if(this.parent.g)this.i=a,this.h=b,this.parent.i.push(this);else{this.parent.g=!0;var c=function(c,d){var g=Zi(d,"retry-after");g?(this.parent.Uc=/[^0-9|\.]/.test(g)?(new Date(g)).getTime():1E3*parseFloat(g)+C(),r.console.info("Next retry "+this.parent.Uc+", now "+C())):this.parent.Uc=NaN;a&&a.call(b,c,d);this.parent.g=!1;if(g=this.parent.i.pop())g.execute(g.i,g.h),g.i=null,g.h=null},d=this.parent.Uc-C();0<d?(r.console.info("Proxy will call after "+d+" ms"),nf(function(){this.parent.Uc=
NaN;this.req.execute(c,this)},d,this)):this.req.execute(c,this)}};function fo(a,b,c,d,e){this.l=t(a)?a:Vi();this.g=b;this.h=c;this.i=d||0;this.j=!!e}fo.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new cj(a,this.l,this.i,this.j)};function go(a,b,c){this.i=t(a)?a:Vi();this.g=b;this.h=c}go.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new cj(a,this.i)};function ho(a){for(var b=Xl(a),c=0;c<b.stores.length;c++);this.g=a;this.g.mb(this.s,this);this.h=1E4;this.j=Ye.value;this.i=0;this.p=B(this.H,this);this.n=!1;this.l={}}function jo(a){if(a.h&&a.i>=a.h){var b=a.h/100;100<b&&(b=100);a.g.keys("db-logger",null,b).C(function(a){a=a.map(function(a){return new qk("db-logger",a)});this.g.remove("db-logger",a).C(function(){this.g.count("db-logger").C(function(a){this.i=a},this)},this)},a)}}function ko(){var a=lo;a.h=1E4;jo(a)}
ho.prototype.s=function(){this.h&&this.g.count("db-logger").C(function(a){this.i=a;jo(this)},this)};function mo(a){var b=lo;if(a!=b.n){var c=gf();a?af(c,b.p):(c=c.g)&&Wa(c,b.p);b.n=a}}ho.prototype.H=function(a){if(!this.l[a.h]){var b=a.j;!b||b.value<=this.j||(a={exception:a.g,level:b.value,logger:a.h,name:b.name,time:a.l,message:a.getMessage(),seq:a.n},this.g.put("db-logger",a),this.i++,jo(this))}};
function no(a,b){var c=lo,d=a||100,e=b||0,f=lj(["INFO"]);return c.g.values("db-logger","name, time",f,d,e,!0)}var lo=null;var oo,po,qo,ro,so=R("ydn.crm");function to(){oo||(oo=new $f(0));return oo}var uo=null;function vo(a,b){b&&"local"!=b||(t(a["logging-captureConsole"])&&ji(!!a["logging-captureConsole"]),t(a["logging-bugReport"])&&mo(!!a["logging-bugReport"]))}
function wo(){r.console.log("ydn.crm version 0.7.7 (dev)");r.console.log("API documentation: http://dev.yathit.com/\nFeedback and suggestion: https://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");Li("ydn.crm","finer");Li("ydn.ds","finer");uo=new Rn("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,indexes:[{name:"level"},{name:"time"},{name:"name"},{name:"name, time",keyPath:["name","time"]}]}]});lo=new ho(uo);ko();lo.j=
300;lo.l["ydn.db.tr.DbOperator"]=!0;mo(!0);so.info("Starting ydn.crm.App:0.7.7");chrome.storage.local.get(["logging-captureConsole","logging-bugReport"],vo);chrome.storage.onChanged.addListener(vo);var a=C();bj=Mi=new xo(uo,function(b){if(!b||b.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==b.HttpRequestData.path)return null;b.uptime=a;return b})}function yo(){po||(po=new go(to()),Ui(po,"default"));return po}
function zo(a){var b=yo();a=new ej(a,oo,!1);Ui(a,"gc");var c=new ao(a,function(a){a.path="https://yathit-app.appspot.com/proxy/"+a.path;return a});Ui(new co(b,"https://yathit-app.appspot.com/proxy/"),"proxy");Ui(new bo(function(a){return"GET"==a.method},a,c),"gse")}function Ao(){ro||(ro=new fo(to(),void 0,"https://yathit-app.appspot.com/a/cm",1,!0),Ui(ro,"auth"));return ro};function Bo(a,b){this.j=b||C();this.type=a;this.i=this.g=this.h=void 0}function Co(a,b){A(b)?a.h=Sl(b):a.h=b}Bo.prototype.toJSON=function(){return{type:this.type,timestamp:this.j,newValue:this.g,oldValue:this.h,meta:this.i}};function Do(a){this.g=a}Do.prototype.add=function(a){this.g.add("history",a.toJSON())};function Eo(a,b){if(a.link){if(u(a.link)){for(var c=0;c<a.link.length;c++)if(a.link[c].rel==b)return a.link[c];return null}return a.link.rel==b?a.link:null}return null};function Fo(a,b){this.entry=a;this.data=b;this.g=!1}Fo.prototype.data=null;Fo.prototype.preventDefault=function(){this.g=!0};function Go(a,b,c,d){K.call(this,a,b);this.status=c;this.entry=d}E(Go,K);Go.prototype.status=NaN;Go.prototype.N=function(){return this.status};Go.prototype.wb=function(){return this.entry.wb()};function Ho(a,b,c){Go.call(this,"conflict",a,b,c.entry)}E(Ho,Go);function Io(a,b){this.g=a;if(b)throw new Pc("optional key paths");}var Jo={Jh:"key",Gh:"date",Kh:"modified",Ih:"expires",Hh:"etag",Lh:"updated",Mh:"uri",NEXT:"next"};Io.prototype.V=function(a,b){return b&&this.g[a]?tj(b,this.g[a]):void 0};function Ko(a,b,c,d){a.g[b]&&uj(c,a.g[b],d)};function Lo(a,b,c,d){this.key=a;this.h=(this.h=d?b[d]:b)||{};this.g=c}function Mo(a){return null!=a.key?a.key:a.g.V("key",a.h)}Lo.prototype.getDate=function(){return this.g.V("date",this.h)};function No(a){return a.g.V("updated",a.h)}function Oo(a){return a.g.V("etag",a.h)}function Po(a){var b={},c=Oo(a);c&&1<c.length?b["if-none-match"]=c:(a=No(a))&&(b["if-modified-since"]=a);return b}
Lo.prototype.toJSON=function(){var a={};Ko(this.g,"key",a,Mo(this));var b=this.getDate();b&&Ko(this.g,"date",a,b);(b=this.g.V("expires",this.h))&&Ko(this.g,"expires",a,b);(b=No(this))&&Ko(this.g,"updated",a,b);(b=Oo(this))&&Ko(this.g,"etag",a,b);return a};function Qo(a,b,c){b.expires&&Ko(c,"expires",b,(new Date(b.expires)).getTime());b["last-updated"]&&Ko(c,"updated",b,(new Date(b["last-updated"])).getTime());b.etag&&Ko(c,"etag",b,(new Date(b.etag)).getTime());Ko(c,"date",b,NaN);Lo.call(this,a,b,c)}E(Qo,Lo);function Ro(a,b,c){this.g=a;this.n=c||null;this.i=this.h=null;this.key=b}h=Ro.prototype;h.logger=R("ydn.db.sync.entry.Rest");h.wb=function(){if(this.i&&this.g.s&&this.j){var a=this.g.H;this.g.U||delete this.i[a]}return this.i||null};h.V=function(){return this.n};h.F=function(){return this.key};h.ce=function(){return this.g.Xe(this.F())};function So(a,b){var c=a.F();return new Qo(c,b.Kc(),a.g.p)}
h.ze=function(a,b){if(a)return a;if(b.Da())return $i(b)&&x(b.body)?JSON.parse(b.body):b.body;try{return $i(b)&&x(b.body)?JSON.parse(b.body):b.body}catch(c){var d=Yi(b);return A(d)?d:{body:d}}};h.save=function(a){var b=this.F();if(a&&!this.g.s)return C(),To(this.g,[this.j.toJSON()]);var c=this.i;if(a&&!c)return sb();a=void 0;null!=this.j&&(C(),a=[this.j.toJSON()]);return Uo(this.g,[c],a,[b])};
h.jc=function(a,b){if(this.g.K&&A(this.h))a.call(b,304),a=null;else{var c=this;Vo(this,function(d){if(d){var e=d.g.V("expires",d.h);if(e&&e>C()){Q(this.logger,this+" not expired");a.call(b,304);a=null;return}}e=c.ce();d=c.gc(e,"GET",d);this.g.ua().request(d).execute(function(d,e){c.j=So(c,e);c.i=c.ze(d,e);a.call(b,e.N());a=null})},this)}};
h.gc=function(a,b,c,d){a=new $h(a,b);if(c){var e;"POST"==a.method||"PUT"==a.method||"DELETE"==a.method?(e={},(b=No(c))&&(e["if-unmodified-since"]=b),(c=Oo(c))&&1<c.length&&(e["if-match"]=c),c=e):c=Po(c);e=c;a.headers?tc(a.headers,e):a.headers=e}a.body=A(d)?JSON.stringify(d):d;Q(this.logger,this+" "+a.method+" "+a.path+" "+wh(e));return a};
function Wo(a,b,c){Vo(a,function(a){var e=this.V();a=this.gc(this.ce(),"PUT",a,e);this.g.ua().request(a).execute(function(a,d){this.j=So(this,d);this.i=a;b&&(b.call(c,d.N()),b=null)},this)},a)}function Vo(a,b,c){a.l?b.call(c,a.l):Xo(a.g,a.F(),function(d){a.l=d;b.call(c,d)})}
h.load=function(a,b){if(this.h&&this.l)a&&(a.call(b,this.h,this.l),a=void 0);else{var c=this.F();this.g.load(c,function(c,e){this.h=c;var f=this.g.H;this.h&&f&&this.h[f]&&(this.l=new Lo(this.key,this.h,this.g.p,f),this.g.U||delete this.h[f]);this.h=c;this.l=e;a&&(a.call(b,c),a=void 0)},this)}};function Yo(a,b){var c=a.ce(),d=a.g.ua();Vo(a,function(a){a=this.gc(c,"DELETE",a);d.request(a).execute(function(a,d){Q(this.logger,"deleted "+c+" "+d.N());b.call(this,d.N())},this)},a)}
h.toString=function(){return"sync.entry{"+this.g.I()+":"+this.key+"}"};function Zo(a,b,c){this.storage=a;this.i=b;this.P=b.getName();a="format readRequestTimeout writeRequestTimeout transport Options fetchStrategies baseUri immutable keepMeta metaStoreName metaDataName prefetch prefetchRefractoryPeriod".split(" ");for(var d in c)if(-1==Ma(a,d))throw new M('Unknown Sync attribute "'+d+'"  in Sync.');this.K=!!c.immutable;this.h=c.baseUri;this.Bb=c.metaStoreName||this.P;this.H=c.metaDataName;this.s=this.Bb==this.P;a=c.Options||{};if(!this.Bb)throw new M("metadata store name required.");
b=this.ub();for(d in a)if(-1==Ma(b,d))throw new M('Unknown Sync.Options attribute "'+d+'" in Sync.Options');this.ia=a.delimiter||"";this.l=a.prefix||"";this.U=!!c.keepMeta;this.O=c.prefetch||y(c.prefetchRefractoryPeriod)?"full":null;this.ca=y(c.prefetchRefractoryPeriod)?c.prefetchRefractoryPeriod:5E3;this.g=$o(c.transport);this.p=new Io(this.tb(),c.metaData);this.n=null;this.D=NaN}h=Zo.prototype;h.tb=function(){var a={},b;for(b in Jo)a[b]=b;return a};h.ub=function(){return[]};h.I=function(){return this.P};
h.logger=R("ydn.db.sync.Rest");h.Gb=function(){return this.h};h.ua=function(){this.g||(this.g=new go);return this.g};h.toString=function(){return"sync:"+this.P};function To(a,b){return el(a.storage.g,a.Bb,b).Ec(function(a){throw a;})}function ap(a,b,c){a.i.keyPath&&null==Wk(a.i,b)&&null!=c&&uj(b,a.i.keyPath,c)}
function Uo(a,b,c,d){d=a.i.keyPath?void 0:d;if(c){if(a.s){for(g=0;g<b.length;g++)null!=c[g]&&tc(b[g],c[g]);return el(a.storage.g,a.P,b,d)}if(b){for(var e=[],f=b.concat(c),g=0;g<b.length;g++){var k=a.i.keyPath?NaN:d[g];e.push(new qk(a.P,k))}for(g=0;g<c.length;g++)e.push(new qk(a.Bb,NaN));return el(a.storage.g,e,f)}return el(a.storage.g,a.Bb,c)}for(g=0;g<b.length;g++)k=d?d[g]:void 0,ap(a,b[g],k);return el(a.storage.g,a.P,b,d)}
function bp(a,b){var c=[new qk(a.P,b)];a.s||c.push(new qk(a.Bb,b));return fl(a.storage.g,c)}h.Xe=function(a){return this.Gb()+a};h.add=function(a,b,c){null!=c?ap(this,b,c):this.i.keyPath&&(c=Wk(this.i,b));var d=this.za(c,b),e=this;Wo(d,function(a){201==a||200==a?(Q(e.logger,d+" created"),d.save(!0)):N(e.logger,"Unexpected respond "+a+" for add "+d)})};
function Xo(a,b,c){var d=new qk(a.Bb,b);il(a.storage.g,[d]).u(function(a){c.call(void 0,new Lo(b,a[0],this.p,this.H))},function(a){N(this.logger,this+" error loading meta data "+a);c.call(void 0,null)},a)}h.Hd=function(a,b){var c=a.map(function(a){return new qk(this.Bb,a)});il(this.storage.g,c).u(function(c){for(var e=[],f=0;f<a.length;f++)e[f]=new Lo(a[f],c[f],this.p,this.H);b(e)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)};
h.load=function(a,b,c){var d=this.Bb,e=[new qk(this.I(),a)];this.s||e.push(new qk(d,a));il(this.storage.g,e).u(function(d){var e=d[0];b.call(c,e,new Lo(a,this.s?e:d[1],this.p,this.H))},function(a){N(this.logger,this+" error loading meta data "+a);b.call(c,null,null)},this)};
h.get=function(a,b){this.D||this.Zb();dk(a,function(c,d,e){if(d)e(c,d);else{Uc(a,c);var f=t(c);if(f&&this.K)e(c);else{var g=this.za(b,c);g.jc(function(a){if(304==a){if(e(c),!f)throw new Sc(g+" not modified, but not exist in server");}else if(200==a)g.save().ea(function(){e(g.wb())});else if(404==a)bp(g.g,g.F()).ea(function(){e(g.wb())});else throw e(g.wb()),new Rc("Invalid HTTP respond "+a+" for GET "+b);},this)}}},this)};
function cp(a,b,c,d,e,f){var g=[],k=a.logger;P(a.logger,d.length+", "+e.length+", "+f.length+", "+g.length+" records to fetch, update, delete, save");var l=d.length+e.length+f.length+g.length;if(0==l)b(c);else{for(var m=!1,n=function(){l--;0==l&&(b(c,m),b=null)},g=0;g<d.length;g++){var p=a.za(d[g]);p.index=g;p.jc(function(a){200==a?(Q(k,"A new "+this+" received from server"),this.save().u(function(){c[this.index]=this.wb();n()},function(){m=!0;n()},this)):304==a?this.save(!0).u(function(){Q(k,this+
" expires date updated");n()},function(){m=!0;n()},this):(N(k,"Invalid status "+a+" for fetching "+this),n())},p)}for(g=0;g<e.length;g++)p=a.za(e[g]),p.index=g,p.load(function(){this.jc(function(a){200==a?(Q(k,this+" updated from server"),this.save().u(function(){c[this.index]=this.wb();n()},function(){m=!0;n()},this)):(N(k,"Invalid status "+a+" for fetching "+this),n())})});for(g=0;g<f.length;g++)p=a.za(f[g]),p.index=g,bp(p.g,p.F()).u(function(){c[this.index]=new Fo(p,null);n()},function(){m=!0;
n()},p)}}function dp(a,b,c){dk(b,function(a,e,f){if(e)f(a,e);else if(Ra(a,function(a){return t(a)})&&this.K)f(a);else{Uc(b,a);var g=a.length;for(e=0;e<c.length;e++)if(this.K&&t(a[e]))g--,0==g&&f(a);else{var k=this.za(c[e],a[e]);k.index=e;k.jc(function(b){200==b?(a[this.index]=this.wb(),this.save()):404==b&&(a[this.index]=void 0);g--;0==g&&f(a)},k)}}},a)}h.za=function(a,b){return new Ro(this,a,b)};h.count=function(a){return a};h.cf=function(){throw new Pc;};
h.values=function(a,b,c){ep(this)?(Q(this.logger,"prefetch queued"),dk(a,function(d,e,f){Uc(a,d);e?f(d,e):fp(this,function(a){a?hl(this.storage.g,this.P,null,null,!1,b,c).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(){N(this.logger,this+" prefetch fail");f(d)},this)},this)):this.cf(a,b,c)};
h.keys=function(a,b,c,d,e,f,g){dk(a,function(k,l,m){Uc(a,k);l?m(k,l):fp(this,function(a){a?jl(this.storage.g,this.P,b,c,d,e,f,g).u(function(a){m(a)},function(a){m(a,!0)},this):m(k)},function(){N(this.logger,this+" prefetch fail");m(k)},this)},this)};h.xe=function(){};
h.put=function(a,b,c){c=t(c)?c:this.i.keyPath?Wk(this.i,b):null;var d=this.za(c,b);V(a,function(){d.load()},this);dk(a,function(c,f,g){Uc(a,c);Wo(d,function(c){409==c?d.jc(function(){var c=new Fo(d,b);Uc(a,c);c.g?g(null,f):g(void 0,f)}):200==c||201==c?(d.save(!0),g(b,f)):(N(this.logger,"Unexpected response for PUT: "+c),g(null,f))},this)},this)};
h.remove=function(a,b){var c=this,d=this.za(b);d.load(function(){dk(a,function(e,f,g){Yo(d,function(f){if(409==f){f=new Fo(d,null);Uc(a,f);var l=new Ho(c.storage,409,f);c.storage.Ua(l)}else 200==f?Q(c.logger,"Successfully deleted object "+b):(N(c.logger,"Unexpected response for DELETE: "+f+" "+b),Uc(a,l));g(e)})})})};
h.Zb=function(){Q(this.logger,this+" starting prefetch");var a=new F;hl(this.storage.g,this.P,"updated.$t",null,!0,1).u(function(b){var c={};if(b=b[0])b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new $h(this.Gb(),"GET",c);d.ua().request(c).execute(function(b,c){if(200==c.N()){if(!b){var g=Yi(c);x(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?u(g)?g:[g]:[];0<g.length?Uo(d,g).ea(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+
c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},function(b){a.A(b)},this);return a};function ep(a){return a.O?a.D?C()-a.D>a.ca:!0:!1}function fp(a,b,c,d){ep(a)?a.n?a.n.u(b,c,d):(a.n=a.Zb(),a.D=C(),a.n.u(b,c,d),a.n.u(function(a){Q(this.logger,"prefetch "+(a?"updated":"no update"));this.n=null},function(a){this.n=null;throw a;},a)):b.call(d,!1)};function gp(a,b,c){Zo.call(this,a,b,c)}E(gp,Zo);gp.prototype.logger=R("ydn.db.sync.Atom");gp.prototype.ub=function(){return gp.m.ub.call(this)};gp.prototype.F=function(a){return a.key};function hp(a){this.data=a}h=hp.prototype;h.F=function(){return this.data.id.$t};h.ad=function(){return this.data.title?this.data.title.$t:void 0};h.Yd=function(a){return Eo(this.data,a)};h.xh=function(){var a=this.Yd("self");return a?a.href:void 0};h.wh=function(){var a=this.Yd("http://schemas.google.com/g/2005#batch");return a?a.href:""};h.ra=function(){return this.data.content||null};function ip(a,b,c){Ro.call(this,a,b,c)}E(ip,Ro);ip.prototype.logger=R("ydn.db.sync.entry.S3");ip.prototype.getName=function(){return this.g.l+this.key};ip.prototype.gc=function(a,b,c,d){b=ip.m.gc.call(this,a,b,c,d);if("PUT"==b.method||"POST"==b.method){c=Hd(new ud(a)).substr(1);if(1>c.length)throw new Rc("invalid url "+a);b.headers.Key=c;a=b.headers["Content-Type"]||"application/json";d instanceof File?a=d.type:x(d)&&(a=/<*DOCTYPE html/i.test(d)?"text/html":"text/plain");b.headers.ContentType=a}return b};function jp(a){this.data=a}E(jp,hp);var kp={atom:"http://www.w3.org/2005/Atom",ydn:"http://www.yathit.com/2012/ydn",app:"http://www.w3.org/2007/app",openSearch:"http://a9.com/-/spec/opensearch/1.1/",gAcl:"http://schemas.google.com/acl/2007",sites:"http://schemas.google.com/sites/2008",gs:"http://schemas.google.com/spreadsheets/2006",dc:"http://purl.org/dc/terms",batch:"http://schemas.google.com/gdata/batch",gd:"http://schemas.google.com/g/2005",gContact:"http://schemas.google.com/contact/2008",thr:"http://purl.org/syndication/thread/1.0",
xhtml:"http://www.w3.org/1999/xhtml"};function lp(a,b){for(var c=a.indexOf(" "),d=0;d<b.length;d++){var e=b[d],e=(0==d?"xmlns":"xmlns:"+e)+'="'+kp[e]+'"';-1==a.indexOf(e)&&(a=a.substring(0,c+1)+e+" "+a.substr(c+1))}return a}R("ydn.xml");function mp(a){return kp[a]||kp.xhtml};function np(a,b,c){c=!!c;if(a.getName()!=b.getName())return!1;var d=op(a),e=op(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;for(d=0;d<e.length;d++)if(a.getAttribute(e[d])!=b.getAttribute(e[d]))return!1;d=pp(a);e=pp(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;if(0==d.length||0==d.length)return a.data.$t===b.data.$t;for(d=0;d<e.length;d++){var f=qp(a,e[d]),g=qp(b,e[d]);if(!c&&f.length!=g.length||c&&g.length>f.length)return!1;for(var k=0;k<g.length;k++)if(-1==Ta(f,function(a){return np(a,
g[k],c)}))return!1}return!0};function rp(a,b,c){if(t(b))sp(this,b),t(c)||(c=a[b]);else for(var d in a)if(a.hasOwnProperty(d)&&A(a[d])&&x(a[d].xmlns)){this.dd=[d].xmlns;sp(this,d);c=a[d];break}this.data=c;this.parent=a}h=rp.prototype;h.dd="http://www.w3.org/2005/Atom";function sp(a,b){var c=b.split(":");1<c.length&&(a.dd=mp(c[0])||rp.prototype.dd,b=c[1]);a.tagName=b}
h.o=function(a,b){var c;c=a;var d=b,e=c;if(t(d))"atom"!=d&&(e=d+"$"+c);else{var f=c.split(":"),e=c.replace(/:/,"$");2==f.length&&(d=f[0],c=f[1])}d=t(d)?mp(d):void 0;c=t(this.data[c])&&t(d)&&this.data[c].xmlns==d?c:e;return u(this.data[c])?new rp(this.data,c,this.data[c][0]):A(this.data[c])?new rp(this.data,c,this.data[c]):null};h.toString=function(){return"JsonElement:"+this.tagName};h.getName=function(){return this.tagName};
function tp(a,b){for(var c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&delete a.data[c];a.data.$t=b}h.getAttribute=function(a){a=a.replace(/:/,"$");return this.data[a]};h.setAttribute=function(a,b){a=a.replace(/:/,"$");this.data[a]=b};h.removeAttribute=function(a){a=a.replace(/:/,"$");delete this.data[a]};function op(a){var b=[],c;for(c in a.data)a.data.hasOwnProperty(c)&&x(a.data[c])&&"$t"!=c&&b.push(c);return b}
function qp(a,b){t(void 0)?b="undefined$"+b:t(b)&&(b=b.replace(/:/,"$"));var c=[];if(t(b)){var d=a.data[b];if(u(d))for(var e=0;e<d.length;e++)c.push(new rp(a.data,b,d[e]));else A(d)&&c.push(new rp(a.data,b,d))}else for(d in a.data)if(u(a.data[d]))for(e=0;e<a.data[d].length;e++)c.push(new rp(a.data,d,a.data[d][e]));else A(a.data[d])&&c.push(new rp(a.data,d,a.data[d]));return c}function pp(a){var b=[],c;for(c in a.data)A(a.data[c])&&b.push(c.replace("$",":"));return b}
h.appendChild=function(a){var b=a.getName();this.data[b]?(u(this.data[b])||(this.data[b]=[this.data[b]]),this.data[b].push(Sl(a.data))):this.data[b]=Sl(a.data)};
h.update=function(a,b,c,d,e){var f=!1;c=c||{};var g=t(b),k=!0===b||!g,l=!1===b,m=op(this),n=op(a);if(!g)for(var p=0;p<m.length;p++)t(e)&&!e[m[p].replace("$",":")]||Ua(n,m[p])||(this.removeAttribute(m[p]),f=!0);for(p=0;p<n.length;p++){var q=a.getAttribute(n[p]);if(!t(e)||e[n[p].replace("$",":")])Ua(m,n[p])?l||q==this.getAttribute(n[p])||(this.setAttribute(n[p],q),f=!0):(this.setAttribute(n[p],q),f=!0)}if(0==up(a)&&k&&(e=this.data.$t,l=a.data.$t,t(l)&&e!=l))return tp(this,l),!0;if(!g)for(var s in this.data)d&&
!d[s.replace("$",":")]||!A(this.data[s])||A(a.data[s])||(delete this.data[s],f=!0);s=pp(a);for(e=0;e<s.length;e++)if(l=s[e],!d||!0==d[l]){var v=qp(a,l),m=qp(this,l),z=l.replace(":","$");if(1==v.length)0==m.length?(this.data[z]=Sl(v[0].data),f=!0):1==m.length?c[l]?k&&!np(m[0],v[0],!0)&&(u(this.data[z])||(this.data[z]=[this.data[z]]),this.data[z].push(Sl(v[0].data)),f=!0):f=m[0].update(v[0],b)||f:g?(l=Ta(m,function(a){return np(a,v[0],!0)}),-1==l&&k&&(this.data[z].push(Sl(v[0].data)),f=!0)):(this.data[z]=
Sl(v[0].data),f=!0);else if(!u(this.data[z]))if(k)this.data[z]=Sl(a.data[z]),f=!0;else{if(g){var m=Sl(a.data[z]),D=this,l=Ta(m,function(a){return zl(D.data[z],a)});-1==l&&(m.push(this.data[z]),this.data[z]=m,f=!0)}}else if(k)for(m.length>v.length&&(this.data[z].splice(v.length,m.length-v.length),f=!0),p=0;p<v.length;p++)t(m[p])?zl(m[p].data,v[p].data)||(this.data[z][p]=Sl(v[p].data),f=!0):(this.data[z][p]=Sl(v[p].data),f=!0);else if(g)for(p=0;p<a.data[z].length;p++)l=Ta(this.data[z],function(b){return zl(a.data[z][p],
b)}),-1==l&&(this.data[z].push(Sl(a.data[z][p])),f=!0)}return f};h.df=function(a,b,c,d,e){t(b)||(b=!1);return this.update(a,b,c,d,e)};h.toJSON=function(){return{data:this.data,tagName:this.tagName}};
function vp(a){function b(a,g){d(g,a);var k,l;for(l in a)if(a.hasOwnProperty(l)&&!x(a[l]))if(x(a[l].$t)&&"xhtml"==a[l].type){k=c(l);d(k,a[l]);var m=Ah(a[l].$t);e.importNode(m.documentElement,!0);k.appendChild(m.documentElement);g.appendChild(k)}else if(x(a[l].$t))k=c(l),k.textContent=a[l].$t,d(k,a[l]),g.appendChild(k);else if(u(a[l])&&a[l][0]&&x(a[l][0].$t))for(m=0;m<a[l].length;m++)k=c(l),k.textContent=a[l][m].$t,d(k,a[l][m]),g.appendChild(k);else if(u(a[l]))for(m=0;m<a[l].length;m++)k=c(l),g.appendChild(k),
b(a[l][m],k);else A(a[l])&&(k=c(l),g.appendChild(k),b(a[l],k))}function c(a){return e.createElement(a.replace("$",":"))}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&"$t"!=c&&x(b[c])&&a.setAttribute(c.replace("$",":"),b[c])}var e=yh(a.getName(),a.dd);b(a.data,e.documentElement);return Bh(e.documentElement)}
function up(a){function b(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&(u(a[c])?b+=a[c].length:A(a[c])&&b++);return b}var c;t(void 0)?c="undefined$"+c:t(c)&&(c=c.replace(/:/,"$"));return t(c)?u(a.data[c])?a.data[c].length:A(a.data[c])?b(a.data[c]):0:b(a.data)}h.fa=function(a){var b={};if(t(a))for(var c in this.data){var d=c.replace("$",":");x(this.data[c])?b[c]=this.data[c]:!0==a[d]&&(b[c]=Sl(this.data[c]))}else b=Sl(this.data);return new rp(null,this.tagName,b)};
function wp(a,b){var c=b.ownerDocument.createElementNS(a.dd,a.getName()),d;for(d in a.data)if(a.data.hasOwnProperty(d)){var e=d.replace("$",":");if(x(a.data[d]))"$t"==d?c.textContent=a.data[d]:(e=c.ownerDocument.createAttribute(e),e.nodeValue=a.data[d],c.setAttributeNode(e));else if(u(a.data[d]))for(var f=0;f<a.data[d].length;f++){var g=new rp(a.data[d],e,a.data[d][f]);wp(g,c)}else A(a.data[d])&&(g=new rp(a.data,e,a.data[d]),wp(g,c))}return b.appendChild(c)};function xp(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.g))b=a.g.$t;else throw new Ch("id or batch:id required.");this.id=b;this.h=void 0;this.data=a}E(xp,jp);h=xp.prototype;h.logger=R("ydn.gdata.Entry");h.qf=function(){return this.kind};h.ad=hp.prototype.ad;h.F=function(){return this.id};h.oc=["link","category"];h.Wf=["id","batch$id","link","category"];h.ra=hp.prototype.ra;
function yp(a,b){if(b)a.data.status=""==b?void 0:b;else{var c=a.data;c.status&&(c.status=b)}}function zp(a){return t(a.gd$deleted)?"gd:deleted":(a=a.status)?a:""}function Ap(a){return"gd:deleted"==zp(a.data)}h.setTitle=function(){throw new Eh;};
h.pc=function(){if(!Bp(this.data))throw Error("nothing to commit");var a=new F;Cp(this,function(b,c){if(c.Da())a.w(b);else{var d=Yi(c);if(x(d)&&/html/.test(Zi(c,"content-type")))try{var e=(new DOMParser).parseFromString(d,"text/html");e.body&&(d=e.body.innerHTML)}catch(f){}a.A(c.N()+" "+c.Ja()+" "+d)}},this);return a};
function Cp(a,b,c){var d=Yh("gse");if(Bp(a.data)){var e={"Content-Type":"application/atom+xml"};a.g&&(e["GData-Version"]=a.g);var f={},g="POST",k,l,m;m="full";t(l)||(l="base"!=m);var n=a.kind||"contact";k=k?"/"+k:"";k=(l?"https":"http")+"://www.google.com/m8/feeds/"+n+"s/"+a.user_id.replace("@","%40")+"/"+m+k;k=k.replace("%40","@");if(l=(l=a.Yd("edit"))?l.href:void 0)g="delete"==zp(a.data)?"DELETE":"PUT",k=l;try{var p=Dp(a)}catch(q){Ni({"class":"ydn.gdata.Entry",method:"ydn.gdata.Entry.commit","entry.data":a.data,
context:"toXmlString",error:{name:q.name,message:q.message,stack:q.stack}})}l=a.type;m=["atom","app","gd","batch","ydn"];if("sites"==l||"site"==l||"content"==l||"webpage"==l)m=m.concat("xhtml","sites");else if("m8"==l||"contact"==l)m=m.concat("gContact");p=lp(p,m);xp.g&&(a.h=[k,f,g,e,p]);d.request(new $h(k,g,f,e,p)).execute(b,c)}else P(a.logger,a+" commit ignore since not modified."),b&&b.call(c,null,null)}function Bp(a){if(null==a.id)return!0;a=zp(a);return"modified"===a||"delete"===a}h.ye=function(){return this.data};
function Dp(a){var b=new rp(null,"entry",a.ye()),c=!1;b.xmlns||(b.xmlns="http://www.w3.org/2005/Atom",c=!0);var d=["atom"],e;for(e in a.data)if(a=e.match(/^(\w+)\$\w+/))a=a[1],a in kp&&(Ua(d,a)||d.push(a));e=vp(b);c&&delete b.xmlns;return lp(e,d)}h.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Ua(b,c)&&!Ua(this.Wf,c)&&(this.data[c]=a.data[c])};h.ef=function(a,b){if(zl(this.data[a],b))return!1;this.data[a]=Sl(b);return!0};
h.df=function(a){if(a.data.updated.$t>=this.data.updated.$t&&Ap(a)){if(Ap(this)||"delete"==zp(this.data))return!1;yp(this,"delete");return!0}var b=!1,c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Ua(this.Wf,c)&&this.ef(c,a.data[c])&&(b=!0);b&&(a=zp(this.data),"delete"==a?N(this.logger,this+" marked for deletion. Cannot mark modify flag."):"committed"==a?this.logger.log(Se,this+" already committed. All changes must wait until updated from the server.",void 0):yp(this,"modified"));return b};function Ep(a,b,c){Ro.call(this,a,b,c)}E(Ep,Ro);Ep.prototype.ce=function(){return this.key};Ep.prototype.gc=function(a,b,c,d){a=Ep.m.gc.call(this,a,b,c,d);this.g.mg(a.method)&&r.gapi&&r.gapi.auth&&(b=gapi.auth.getToken())&&b.access_token&&(a.headers.Authorization=b.token_type+" "+b.access_token);if("GET"==a.method)a.params.alt="json";else if("PUT"==a.method||"POST"==a.method)d=new xp(d),a.body=Dp(d),a.headers["Content-Type"]="application/atom+xml";return a};
Ep.prototype.ze=function(a,b){a=Ep.m.ze.call(this,a,b);a.feed&&(a=a.feed);a.entry&&(a=a.entry);return a};function Fp(a,b,c){Zo.call(this,a,b,c);a=c.Options;this.kind=a.kind;this.version=a.version;this.projection=a.projection;this.j=a.maxResults}E(Fp,gp);h=Fp.prototype;h.projection=null;h.version=null;h.logger=R("ydn.db.sync.GData");h.za=function(a,b){return new Ep(this,a,b)};h.tb=function(){var a=Fp.m.tb.call(this);a.key=["id","$t"];a.etag="gd$etag";a.updated=["updated","$t"];return a};h.ub=function(){var a=Fp.m.ub.call(this);return a=a.concat(["version","projection","kind","maxResults"])};
h.Gb=function(){return"https://www.googleapis.com/"+this.kind+"/"};h.mg=function(){return!1};h.F=function(a){return a?a.id?a.id.$t:"":""};
function Gp(a,b,c){var d=c||a.Gb();c&&Q(a.logger,"continuing "+c);b=new $h(d,"GET",b);var e=new F;a.ua().request(b).execute(function(b,d){if(200==d.N()){if(!b){var k=Yi(d);x(k)&&(b=JSON.parse(k))}var k=b.feed||b,l=k.entry,l=l?u(l)?l:[l]:[];0<l.length&&Uo(a,l);for(var l=null,k=k.link,k=u(k)?k:[k],m=0;m<k.length;m++)"next"==k[m].rel&&(l=k[m].href);l?qb(Gp(a,{},l),e):(Q(a.logger,"prefetch "+a.P+" done"),e.w(!!c))}else 302==d.N()?e.w():(k=a+": Invalid response status "+d.N()+" on prefetching",N(a.logger,
k),e.A(Error(k)))});return e}h.Zb=function(){Q(this.logger,"starting prefetch");var a=new F;hl(this.storage.g,this.P,"updated.$t",null,!0,1).C(function(b){var c={alt:"json",kind:this.kind};this.j&&(c["max-results"]=this.j);(b=b[0])?(b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b,Q(this.logger,this.P+" fetching entries later then "+b)):Q(this.logger,this.P+" fetching entries from beginning");qb(Gp(this,c),a)},this);return a};
h.count=function(a){var b=Mj(this.i,"updated.$t");if(!b)return a;var c=bk(a);a.u(function(a){Uc(c,a);hl(this.storage.g,this.P,b.getName(),null,!1,1).u(function(b){var f={alt:"json"};if(b=u(b)?b[0]:b)b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),f["updated-min"]=b;var g=this,f=new $h(this.Gb(),"GET",f);this.ua().request(f).execute(function(b,e){if(200==e.N()){if(!b){var f=Yi(e);x(f)&&(b=JSON.parse(f))}f=nc(b.feed,"openSearch$totalResults");c.w(a+parseFloat(f||0))}else N(g.logger,
g+":Unexpected respond status "+e.N())})},function(a){c.A(a)},this)},function(a){c.A(a)},this);return c};function Hp(a,b,c){Ro.call(this,a,b,c)}E(Hp,Ep);function Ip(a,b,c){Fp.call(this,a,b,c);this.h=this.h.substr(27);this.Ob=c.Options.prefix}E(Ip,Fp);Ip.prototype.ua=function(){this.g||(this.g=new Jp(gapi.client));return this.g};Ip.prototype.za=function(a,b){return new Hp(this,a,b)};Ip.prototype.Gb=function(){return this.h+this.Ob};
Ip.prototype.Zb=function(){Q(this.logger,"starting prefetch");var a=new F;hl(this.storage.g,this.P,"updated",null,!0,1).u(function(b){var c={alt:"json"};if(b=b[0])b=nc(b,"updated"),b=(new Date(1+ +new Date(b))).toISOString(),c.updatedMin=b;var d=this,c=new $h(this.Gb(),"GET",c);d.ua().request(c).execute(function(b,c){if(b){var g=b.items||[];0<g.length?Uo(d,g).ea(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},
function(b){a.A(b)},this);return a};function Kp(a,b){if(!t(r.AWS))throw new Rc("AWS JS SDK not loaded");this.h=a;this.i=b;this.g=null}Kp.prototype.request=function(a){return new Lp(this,a)};function Mp(a){var b={params:{Bucket:a.h,region:a.i}};if(!a.h)throw new M("bucket name required");a.g||(a.g=new AWS.S3(b));return a.g}function Lp(a,b){this.parent=a;this.g=b}
function Np(a,b,c,d,e){var f=NaN,g="",k={};a=Mp(a.parent)[b](c);a.on("complete",function(a){a.httpResponse&&(f=a.httpResponse.statusCode,x(f)&&(f=parseInt(f,10)),k=a.httpResponse.headers);a.error&&(g=a.error.message,f||(f=400))});a.send(function(a,b){var c=new Wi(f,b,k,g);a?d.call(e,null,c):d.call(e,b,c)})}
Lp.prototype.execute=function(a,b){var c=Hd(new ud(this.g.path)),c="/"==c.charAt(0)?c.substr(1):c,d=this.g.headers||{};c&&(d.Key=c);if(c)if("GET"==this.g.method)Np(this,"getObject",d,a,b);else if("PUT"==this.g.method)Np(this,"putObject",d,a,b);else throw new Pc("HTTP method "+this.g.method);};function Op(a,b){this.g=a;this.prefix=Pp(this,"Prefix")[0];this.h=b.type}Op.prototype.ga=function(){return this.g.documentElement.getElementsByTagName("Contents").length};Op.prototype.keys=function(){var a=Pp(this,"Key");if(this.prefix){var b=this.prefix.length,a=a.map(function(a){return a.substr(b)});"INTEGER"==this.h?a=a.map(function(a){return parseInt(a,10)}):"NUMERIC"==this.h&&(a=a.map(function(a){return parseFloat(a)}))}return a};
function Pp(a,b){for(var c=[],d=a.g.documentElement.getElementsByTagName(b),e=d.length,f=0;f<e;f++)c[f]=d[f].textContent;return c}function Qp(a){return Pp(a,"LastModified").map(function(a){return(new Date(Date.parse(a))).toGMTString()})}
function Rp(a){var b=a.g.documentElement.getElementsByTagName("NextMarker");return 1==b.length?b[0].textContent:"true"==a.g.documentElement.getElementsByTagName("IsTruncated")[0].textContent&&(a=a.g.documentElement.firstElementChild.lastElementChild)&&"Contents"==a.tagName?a.getElementsByTagName("Key")[0]:null};function Sp(a,b,c){Zo.call(this,a,b,c);this.j=c.Options.bucket;if(!x(this.j)||ta(this.j))throw new M("bucket name required.");this.h||(this.h="https://"+this.j+".s3.amazonaws.com/");if(!0===b.h)throw new M('S3 object store "'+b.getName()+'" must not set autoIncrement to true.');}E(Sp,Zo);h=Sp.prototype;h.logger=R("ydn.db.sync.S3");h.ub=function(){var a=Sp.m.ub.call(this);return a=a.concat(["bucket","maxKeys","prefix","delimiter"])};h.ua=function(){this.g||(this.g=new Kp(this.j));return this.g};
h.Xe=function(a){return this.h+this.l+a};h.za=function(a,b){return new ip(this,a,b)};
h.cf=function(a,b){var c=this;dk(a,function(d,e,f){Uc(a,d);c.Hd(d,function(a){var e={},l=a[0]?Mo(a[0]):null;null!=l&&(e.marker=l);0<c.l.length&&(e.prefix=c.l);0<b&&(e["max-keys"]=b);Q(c.logger,c+" querying for newer entries starting from "+l);e=new $h(c.h,"GET",e);c.ua().request(e).execute(function(b,e){if(200==e.N()){for(var k=Yi(e),k=k instanceof Document?k:Ah(k),l=new Op(k,c.i),k=l.keys(),l=Qp(l),s=[],v=[],z=[],D=0,G=0;D<=a.length&&G<k.length;){var J=a[D]?Mo(a[D]):null,O=k[G];if(D==a.length)v.push(O),
G++;else{var ia=J?rj(J,O):-1;0==ia?((O=No(a[D]))&&l[G]&&O!=l[G]&&(l[G]>O?z.push(J):N(c.logger,'record "'+J+'" in database is more recent than server '+O+" vs "+l[G])),D++,G++):1==ia?(s.push(J),D++):(v.push(O),G++)}}cp(c,f,d,v,z,s)}else N(c.logger,"Invalid response status "+e.N())})})},this)};
function Tp(a,b){function c(f){null!=f&&(d.marker=f);Q(a.logger,a+" querying for newer entries starting from "+f);e.request(new $h(a.h,"GET",d)).execute(function(d,e){if(200==e.N()){var f=Yi(e),f=f instanceof Document?f:Ah(f),f=new Op(f,a.i),m=Rp(f),f=f.keys(),n=f.length;if(0==n)b([]),b=null;else for(var p=0,q=0;q<n;q++)a.za(f[q]).jc(function(){p++;p==n&&(m?c(m):b&&(b([this.wb()]),b=null))})}else N(a.logger,"Invalid response status "+e.N())})}var d={};0<a.l.length&&(d.prefix=a.l);var e=a.ua();c();
a.$=!0}function Up(a,b){a.$||dk(b,function(a,b,e){t(a[0])?e(a):Tp(this,e)},a)};function Vp(a,b,c){Ro.call(this,a,b,c)}E(Vp,ip);Vp.prototype.logger=R("ydn.db.sync.entry.Gcs");function Wp(a,b,c){Sp.call(this,a,b,c);this.h="https://"+this.j+".storage.googleapis.com/"}E(Wp,Sp);Wp.prototype.logger=R("ydn.db.sync.Gcs");Wp.prototype.ua=function(){this.g||(this.g=new go);return this.g};Wp.prototype.za=function(a,b){return new Vp(this,a,b)};function Jp(a,b){this.h=a;this.g=!!b}Jp.prototype.request=function(a){var b={path:a.path,method:a.method,headers:a.headers,params:a.params,body:a.body};this.g&&(b.callback=function(a,e){c.w(a,e);b.callback=null});a=this.h.request(b);var c=new Xp(a);return c};function Xp(a){this.h=a||null}Xp.prototype.w=function(a,b){this.i&&(this.i(a,aj(b)),this.i=null);this.g={json:a,zc:b}};
Xp.prototype.execute=function(a){this.h?(this.h.execute(function(b,c){a(b,aj(c))}),this.h=null):this.g?(a(this.g.json,aj(this.g.zc)),this.g=null):this.i=a};function $o(a){if(a){if(a instanceof go)return a;if(ga(a))return new Jp({request:function(b){a(b)}},!0);if("request"in a)return new Jp(a);throw new M(a+" is not a valid HTTP Client");}return null};function Yp(a,b,c){Ro.call(this,a,b,c)}E(Yp,Vp);Yp.prototype.logger=R("ydn.db.sync.entry.GcsJson");Yp.prototype.jc=function(a){var b=this.g,c=this;Vo(this,function(d){var e={method:"GET",path:"storage/v1beta2/b/"+b.j+"/o/"+encodeURIComponent(c.getName())};d&&(e.headers=Po(d));gapi.client.request(e).execute(function(d,e){var k=aj(e);c.j=new Qo(c.F(),k.Kc(),b.p);d?(Q(c.logger,c+": readServer updated"),c.i=d):(Q(c.logger,c+": readServer request fail "+e),c.j=null,c.i=null);a.call(c,200)},e)})};function Zp(a,b,c){Wp.call(this,a,b,c)}E(Zp,Wp);h=Zp.prototype;h.logger=R("ydn.db.sync.GcsJson");h.tb=function(){var a=Zp.m.tb.call(this);a.key="name";return a};h.ua=function(){if(!this.g)if(t(r.gapi))this.g=new Jp(gapi.client);else throw new Rc("gapi not loaded");return Zp.m.ua.call(this)};h.za=function(a,b){return new Yp(this,a,b)};
h.Zb=function(){P(this.logger,"starting prefetch");var a=new F;jl(this.storage.g,this.P,null,null,1,0,!0,!1).u(function(b){var c={bucket:this.j};(b=b[0])&&(c.marker=b);var d=this;if(!r.Hg||r.Hg.client)throw Error("gapi lib not loaded");gapi.client.load("storage","v1beta2",function(){var b=gapi.client.storage.objects.list({bucket:d.j});this.Ob&&(c.prefix=this.Ob);b.execute(function(b,c){if(b&&!b.error){var e=b.items||[];0<e.length?Uo(d,null,e).ea(function(){a.w(!0)}):a.w(!1)}else e=d+": "+c,N(d.logger,
e),a.A(Error(e))})})},function(b){a.A(b)},this);return a};function $p(a,b,c){Wp.call(this,a,b,c);this.O="full"}E($p,Wp);h=$p.prototype;h.logger=R("ydn.db.sync.GcsMeta");h.tb=function(){var a=$p.m.tb.call(this);a.key="name";return a};h.ua=function(){!this.g&&gapi&&(this.g=new Jp(gapi.client));return $p.m.ua.call(this)};h.za=function(a,b){return new Yp(this,a,b)};
h.Zb=function(){P(this.logger,"starting prefetch");var a=new F;if(!r.gapi||!r.gapi.client)throw Error("gapi lib not loaded");var b=this;gapi.client.load("storage","v1beta2",function(){function c(e){e&&(d.pageToken=e);gapi.client.storage.objects.list(d).execute(function(e,g){if(e&&!e.error){var k=e.items||[];if(e.nextPageToken)Q(b.logger,"receiving "+k.length+" meta records, continuing next"),Uo(b,k),c(e.nextPageToken);else if(0<k.length)Uo(b,k).ea(function(){Q(b.logger,"receiving "+k.length+" meta records, prefetching dane.");
a.w(!0)});else{var l=!!d.pageToken;Q(b.logger,"prefetching done");a.w(l)}}else l=b+": "+g,N(b.logger,l),a.A(Error(l))})}var d={bucket:b.j};this.Ob&&(d.prefix=this.Ob);c()});return a};h.Hd=function(a,b){if(0==a.length)b([]);else{var c=this.I(),d=Pa(a,function(a){return new qk(c,a)});il(this.storage.g,d).u(function(d){for(var f=[],g=0;g<a.length;g++)f[g]=new Lo(a[g],d[g],this.p,c);b(f)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)}};function aq(a,b,c){Zo.call(this,a,b,c)}E(aq,Zo);aq.prototype.Xe=function(a){return this.h+this.l+this.P+this.ia+a};aq.prototype.logger=R("ydn.db.sync.Json");
aq.prototype.cf=function(a){function b(a,b){var c=new $h(e);d.ua().request(c).execute(function(c){if(200==c.status){var e=(c.response instanceof Object?c.response:vh(c.responseText)).items;c=Pa(e,function(a){return a.id});for(var e=Pa(e,function(a){return a.updated}),k=[],p=[],q=[],s=0,v=0;s<=a.length&&v<c.length;){var z=Mo(a[s]),D=c[v];if(s==a.length)p.push(D),v++;else{var G=rj(z,D);0==G?((D=No(a[s]))&&e[v]&&D!=e[v]&&(new Date(e[v])>D?q.push(z):N(d.logger,'record "'+z+'" in database is more recent than server '+
D+" vs "+e[v])),s++,v++):1==G?(k.push(z),s++):(p.push(D),v++)}}cp(d,function(){},b,p,q,k)}else N(d.logger,"Invalid response status "+c.status)})}var c=new Tc,d=this,e=this.h+this.l+this.P;a.C(function(a){Uc(c,a);this.Hd(a,function(c){b(c,a)})},this)};function bq(a,b,c){Zo.call(this,a,b,c)}E(bq,gp);function cq(a,b,c){Ro.call(this,a,b,c)}E(cq,ip);cq.prototype.logger=R("ydn.db.sync.entry.S3Meta");function dq(a,b,c){Sp.call(this,a,b,c);this.Ob=c.Options.prefix;if("Key"!=b.keyPath)throw new M('s3-meta store "'+b.getName()+'" must use inline key with keyPath "Key"');this.O="meta"}E(dq,Sp);h=dq.prototype;h.logger=R("ydn.db.sync.S3Meta");h.tb=function(){var a=dq.m.tb.call(this);a.key="Key";a.modified="LastModified";a.etag="ETag";return a};h.za=function(a,b){return new cq(this,a,b)};
h.Zb=function(){function a(f){f&&(e.marker=f);c.listObjects(e).send(function(c,f){if(c){var l=d+": "+wh(c);N(d.logger,l);b.A(c instanceof Error?c:Error(l))}else{var m=f.Contents||[];f.IsTruncated?(Q(d.logger,"receiving "+m.length+" meta records, continuing next"),Uo(d,m),a(m[m.length-1].Key+"\uffff")):0<m.length?Uo(d,m).ea(function(){Q(d.logger,"receiving "+m.length+" meta records, prefetching dane.");b.w(!0)}):(l=!!e.marker,Q(d.logger,"prefetching done"),b.w(l))}})}P(this.logger,"starting prefetch");
var b=new F,c=Mp(this.ua()),d=this,e={};this.Ob&&(e.prefix=this.Ob);a();return b};h.Hd=function(){throw new Rc("loading meta data should not be necessary");};function eq(a,b,c){Ro.call(this,a,b,c)}E(eq,Ep);function fq(a,b,c){Fp.call(this,a,b,c);a=c.Options;this.domain=a.domain;this.$=a.siteName;if(a=Nj(b,"sites$parent"))Al(a,function(a){for(var b=a.link||[],c=0;c<b.length;c++)if("http://schemas.google.com/sites/2008#parent"==b[c].rel)return b[c].href;return a.id.$t.replace(/\w+$/,"0")}),cf(this.logger,"index sites$parent in "+b.getName()+" has set a generator.");if(a=Nj(b,"alternate"))Al(a,function(a){a=a.link||[];for(var b=0;b<a.length;b++)if("alternate"==a[b].rel)return a[b].href}),cf(this.logger,
"index alternate in "+b.getName()+" has set a generator.")}E(fq,Fp);h=fq.prototype;h.za=function(a,b){return new eq(this,a,b)};h.ub=function(){var a=fq.m.ub.call(this);return a=a.concat(["domain","siteName"])};h.Gb=function(){return"https://sites.google.com/feeds/content/"+this.domain+"/"+this.$+"/"};h.mg=function(a){return"GET"!=a};
function gq(a,b,c,d){var e={alt:"json",kind:a.kind};"sites$parent"==c?(c=d.match(/\w+$/)[0],e.parent=c):"alternate"==c&&(c=d.replace(/https:\/\/sites.google.com\/a\/[^\/]+\/[^\/]+/,""),e.path=c);var f={},g=a.Gb();dk(b,function(c,l,m){Uc(b,c);if(l=c[0])l=nc(l,"updated","$t"),l=(new Date(1+ +new Date(l))).toISOString(),e["updated-min"]=l;l=new $h(g,"GET",e,f);a.ua().request(l).execute(function(b,e){if(200==e.N()){if(!b){var f=Yi(e);x(f)&&(b=JSON.parse(f))}var g=(f=(b.feed||b).entry)?u(f)?f:[f]:[];0<
g.length?Uo(a,g).ea(function(){m(g)}):m(c)}else 302==e.N()?m(c):(f=a+": Invalid response status "+e.N()+" for querying pageName: "+d,N(a.logger,f),m(Error(f),!0))})},a)}h.xe=function(a,b,c){if(ep(this))dk(a,function(d,e,f){Uc(a,d);fp(this,function(a){!0===a?hl(this.storage.g,this.P,b,T.only(c),!1,0).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(a){f(a,!0)},this)},this);else return"alternate"==b||"alternate"==b?gq(this,a,b,c):fq.m.xe.call(this,a,b,c)};Ik.prototype.g=null;
hm.prototype.Ff=function(a,b){var c=b.format;if("gdata-sites"==c)a.g=new fq(this,a,b);else if("gdata"==c)a.g=new Fp(this,a,b);else if("gdata-json"==c)a.g=new Ip(this,a,b);else if("odata"==c)a.g=new bq(this,a,b);else if("s3"==c)a.g=new Sp(this,a,b);else if("s3-meta"==c)a.g=new dq(this,a,b);else if("gcs"==c)a.g=new Wp(this,a,b);else if("gcs-json"==c)a.g=new Zp(this,a,b);else if("gcs-meta"==c)a.g=new $p(this,a,b);else if("atom"==c)a.g=new gp(this,a,b);else if("json"==c)a.g=new aq(this,a,b);else if("rest"==
c)a.g=new Zo(this,a,b);else throw new Pc("Sync format: "+c);Jl(a,function(b,c){var f=b.ud();if(!(this instanceof Gk)||this.$a)if(!window.navigator||!t(window.navigator.onLine)||window.navigator.onLine)if("add"==f)f=c[1],a.g.add(b,f);else if("count"==f)c[1]||c[2]||a.g.count(b);else if("put"==f){var f=c[1],g=c[2];a.g.put(b,f,g)}else if("rm:iter"==f)g=c[1],a.g.remove(b,g);else if("values:iter:index"==f){var f=c[1],g=c[2],k=c[3],l=c[4],m=c[5];!k&&!m&&g&&null!=g.lower&&null!=g.upper&&0==rj(g.lower,g.upper)&&
a.g.xe(b,f,g.lower)}else if("keys"==f)g=c[1],l=c[2],k=c[3],m=c[4],a.g.keys(b,null,g,l,k,m,!1);else if("keys:iter:index"==f)f=c[1],g=c[2],l=c[3],k=c[4],m=c[5],a.g.keys(b,f,g,l,k,m,c[6]);else if("values"==f)g=c[1],l=c[2],k=c[3],m=c[4],g||m?g&&g.lower&&x(g.lower)&&g.lower==g.upper||!g&&m&&1==l&&k&&Up(a.g,b):a.g.values(b,l,k);else if(""!=f)if("get"==f)g=c[1],a.g.get(b,g);else if("values:array"==f)dp(a.g,b,c[1]);else throw Error(f);})};var hq="Accounts Contacts Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),iq="Accounts Contacts Leads Notes Opportunities Tasks Teams".split(" "),jq=["Contacts","Leads"];function kq(a,b,c){return"https://"+a+"/index.php?module="+b+"&action=DetailView&record="+c};function lq(a){this.h=a||[]}lq.prototype.g=function(a){return-1==this.h.indexOf(a)?a:null};function mq(){}
mq.prototype.g=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,k;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,k=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f=f+"e":k.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f=f+"e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,k=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!k.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function nq(a){this.h=a}
nq.prototype.g=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a;a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,"$1")}(a);
a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.h&&(a=a.substring(0,this.h));return a=a.toUpperCase()};var oq=new nq(32),pq=new mq,qq=new lq("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function rq(a){this.data=a;this.g=0}rq.prototype.next=function(a){for(var b=this.g,c=this.data[b],c=1,d=0;0<=b&&b<this.data.length;){c=this.data[b];if(c instanceof Array)if(a<c[0])c=-1;else if(a>c[1])c=1;else return this.g=b,!0;else{if(c==a)return this.g=b,!0;c=a<c?-1:1}if(0==d)d=c;else if(d!=c)break;b+=c;if(b>this.data.length||0>b)break}return!1};
function sq(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new rq(categ_letters_numbers_data);if(y(d))d=g.next(d);else{for(var k=0,l=d.length;k<l;++k)if(!1===g.next(d[k])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};function tq(a,b){this.j=b;this.value=a}tq.prototype.V=function(){return this.value};tq.prototype.vb=function(){return 1};var uq=!Lb&&(Rh||Oh);tq.prototype.F=function(){return this.value};tq.prototype.toString=function(){return"Entry:"+this.value};function vq(a,b,c,d,e,f){tq.call(this,d,e);this.P=a;this.h=b;this.i=c;this.Jd=f||[]}E(vq,tq);h=vq.prototype;h.Zc=function(){return{k:this.j,v:this.value.toLowerCase(),id:this.F(),loc:this.Jd}};h.F=function(){var a=[this.P,this.i,this.h,this.value];return uq?a:wj(a)};h.I=function(){return this.P};h.ja=function(){return this.i};h.toString=function(){return["IndexEntry",this.P,this.i,this.value].join(":")};function wq(a,b,c,d,e){tq.call(this,b,c);this.l=d;this.g=e;this.type=a;this.Hf=1}E(wq,tq);wq.prototype.vb=function(){return this.g*this.type*this.Hf};wq.prototype.F=function(){return this.value+"|"+this.l};function xq(a,b){vq.call(this,b.I(),b.h,b.ja(),b.V(),b.j,[]);this.n=a;this.g=[b]}E(xq,vq);h=xq.prototype;h.count=function(){return this.g.length};h.entry=function(a){return this.g[a]};h.df=function(a){a=a.g[0];for(var b=0;b<this.g.length;b++)if(this.g[b].h==a.h&&this.g[b].value==a.value)return;this.g.push(a)};h.vb=function(){for(var a=0,b=0;b<this.g.length;b++)var c=this.g[b],d=Ml(this.n,c.I(),c.h),c=c.vb(),a=a+c*d.h;return a};function hb(a,b){var c=a.vb(),d=b.vb();return c<=d?1:-1}
h.Zc=function(){for(var a={value:this.value,primaryKey:this.i,storeName:this.P,score:this.vb(),tokens:[]},b=0;b<this.g.length;b++)a.tokens[b]=this.g[b].Zc();return a};h.toString=function(){return["RankEntry",this.P,this.i,this.value].join(":")+"["+this.g.length+"]"};function yq(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function al(a,b,c,d,e,f,g){vq.call(this,b,c,d,e,f,g);this.query=a}E(al,vq);al.prototype.vb=function(){var a,b=this.value;a=yq(this.query.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=yq(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,k;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(k=b[f],g==k){c++;delete b[f];break}a=2*c/d;b=Math.log(this.Jd.length+1);c=this.query.vb();return b*a*c};al.prototype.Zc=function(){return{keyPath:this.h,value:this.value,loc:this.Jd.slice()}};
al.prototype.toString=function(){return["ResultEntry",this.P,this.i,this.value].join(":")};function zq(a,b){this.g=a;this.h=b;this.j=[];this.i=0}function $k(a,b){for(var c,d,e=a.g.getName(),f=0;f<a.h.length;f++){var g=a.h[f],k=g.type;0.4==k||0.6==k?(d="v",c=g.V().toLowerCase(),c=lj(c)):(d="v",c=g.V().toLowerCase(),c=T.only(c));b(e,d,c,g);a.i++;0.6==k&&(d="k",c=g.j,c=T.only(c),b(e,d,c,g),a.i++)}}function Zk(a){for(var b=[a.g.getName()],c=0;c<a.g.count();c++){var d=a.g.index(c).I();-1==b.indexOf(d)&&b.push(d)}return b}
function bl(a){for(var b=[],c=[],d=0;d<a.j.length;d++){var e=a.j[d];if(0==e.query.type)-1==Ta(c,function(a){return a.ja()==e.ja()&&a.I()==e.I()})&&c.push(e);else{var f=new xq(a.g,e),g=Ta(b,function(a){return a.ja()==f.ja()&&a.I()==f.I()});if(0<=g){var k=b[g];Xa(b,g);k.df(f);f=k}gb(b,f)}}for(a=0;a<c.length;a++)for(g=c[a],d=b.length-1;0<=d;--d)if(k=b[d],g.ja()==k.ja()&&g.I()==k.I()){b.splice(a,1);break}return b.map(function(a){return a.Zc()})};function Aq(a){this.g=a;if("en"==a.lang){a=a.h||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(oq);else if("stemmer"==a[c])b.push(pq);else if("stop"==a[c])b.push(qq);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.h=a}function Bq(a,b){for(var c=0;c<a.h.length;c++){var d=a.h[c].g(b);if(d)b=d;else return null}return b}Aq.prototype.parse=function(a){var b=[];sq(a,function(c,d){b.push(a.substr(c,d))});return b};
Aq.prototype.query=function(a,b){var c=Cq(this,b);return 0==c.length?null:new zq(this.g,c)};
function Cq(a,b){var c=[],d=[];sq(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=Bq(a,c[f]);for(var g=[],k=0,f=0;f<c.length;f++){var l=c[f],m=e[f],n="*"==b.charAt(d[f]+l.length),p=n?d[f]+l.length+1:d[f]+l.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),q="-"==b.charAt(p?d[f]-2:d[f]-1),s=0.8;n?s=0.4:p?s=1:q?s=0:null!=m&&(s=0.6);l=new wq(s,l,m,d[f],1/(f+2));g.push(l);k+=l.vb()}for(f=0;f<g.length;++f)g[f].Hf=1/k;return g}
function Dq(a,b,c,d){var e=[],f=[];sq(b,function(a,c){e.push(b.substr(a,c));f.push(a)});for(var g=[],k=0;k<e.length;k++)g[k]=Bq(a,e[k]);a=c.I();c=c.g;for(var l=[],k=0;k<e.length;k++){var m=e[k],n=g[k];if(null!=n){var p=Sa(l,function(a){return a.V()==m});p||(p=new vq(a,c,d,m,n),l.push(p));p.Jd.push(f[k])}}return l}function Eq(a,b,c,d){for(var e=[],f=0;f<a.g.count();f++){var g=a.g.index(f);if(g.I()==b){var k=tj(d,g.g);x(k)&&(e=e.concat(Dq(a,k,g,c)))}}return e};hm.prototype.Ef=function(a,b){var c=this;b.g=new Aq(b);Jl(a,function(d,e){function f(b){var e=a.getName();dk(d,function(a,f,g){if(f)g(a,f);else{Uc(d,a);var k=new qk(e,b);fl(c.g,[k]).ea(function(){g(a,f)})}})}function g(b){var e=a.getName();dk(d,function(a,f,g){f?g(a,f):(Uc(d,a),b&&(b=jj(T.bound([e,b.lower],[e,b.upper,"\uffff"]))),gl(c.g,e,b).ea(function(){g(a,f)}))})}function k(e){var f=a.getName();dk(d,function(a,g,k){Uc(d,a);if(g)k(a,g);else{var l=b.getName();u(a)||(a=[a]);for(var z=0;z<a.length;z++){var D=
a[z];rk(D)&&(D=Eq(b.g,f,D,e[z]).map(function(a){return a.Zc()}),D=el(c.g,l,D),z==a.length-1&&D.ea(function(){k(a,g)}))}}})}var l=d.ud();"put"==l?k([e[1]]):"put:array"==l?k(e[1]):"add"==l?k([e[1]]):"add:array"==l?k(e[1]):"rm:iter"==l||"clear"==l?g(e[1]):"rm"==l&&f(e[1])})};
hm.prototype.search=function(a,b,c,d){var e=Rl(this.h,a);if(!e)throw new M('full text index catalog "'+a+'" not found.');a=e.g.query(a,b,c,d);return a?this.g.search(a):(P(this.logger,'query "'+b+'" contains only noise and search is ignored'),ek("search",null))};function Fq(a){this.name=a;this.info=null;this.h={};this.g=null}
var Gq={Accounts:{GeneratorIndex:{ydn$emails:["email","email1","email_addresses_non_primary"],ydn$phones:["phone_office","phone_alternate","phone_fax"]}},Contacts:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home","phone_mobile","phone_work","phone_other","phone_fax"]}},Leads:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home",
"phone_mobile","phone_work","phone_other","phone_fax"]}},Notes:{FullTextIndex:{content:["name","description"]},indexes:[{name:"contact_id"},{name:"parent",keyPath:["parent_type","parent_id"]}]}};
function Hq(a,b){return"ydn$emails"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e))if(x(b[e])){var f=hn(b[e]);f&&d.push(f)}else if(w(b[e])&&b[e][0]&&b[e][0].email_address)for(var g=b[e],k=0;k<g.length;k++)g[k]&&x(g[k].email_address)&&(f=hn(g[k].email_address))&&d.push(f);return d}}:"ydn$phones"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e)){var f=gn(b[e]);f&&d.push(f)}return d}}:null}
function Iq(a,b){if(a.g)for(var c=0;c<a.g.stores.length;c++)if(a.g.stores[c].name==b)return a.g.stores[c];var d={name:b,keyPath:"id",indexes:[{name:"account_id"},{name:"name"},{name:"date_modified"}]},e=["ydn$emails","ydn$phones","ydn$names"],c=a.h[b]||Gq[b]||{};c.indexes&&(d.indexes=d.indexes.concat(c.indexes));for(var f=c.GeneratorIndex||{},c=0;c<e.length;c++){var g=e[c],k=f[g];!k||u(k)&&0==k.length||d.indexes.push(Hq(k,g))}return d}
function Jq(a){if(a.g)return a.g;for(var b={fullTextCatalogs:[],stores:[{name:"history",indexes:[{keyPath:"type"},{keyPath:"timestamp"}]},{name:"Meta"}]},c=0;c<iq.length;c++){var d=iq[c];b.stores.push(Iq(a,d));var e=a.h[d]||Gq[d]||{};if(e.FullTextIndex)for(var f in e.FullTextIndex){var g=e.FullTextIndex[f];if(0<g.length){for(var k={name:"ft-"+d+"-"+f,lang:"en",sources:[]},l=0;l<g.length;l++)k.sources.push({storeName:d,keyPath:g[l]});b.fullTextCatalogs.push(k)}}}a.g=b;Object.freeze(a.g);return a.g}
;function Kq(a,b,c){this.domain=a;this.S=b;this.g=c||null}Kq.prototype.M=function(){return this.domain};Kq.prototype.F=function(){return this.g.id};function Lq(a){if(!a.g)return"";var b=a.g.full_name||a.g.name;if(b)return b;b=(a.g.first_name||"").trim();a=(a.g.last_name||"").trim();return b+" "+a}Kq.prototype.value=function(a){return this.g?this.g[a]:null};Kq.prototype.toString=function(){return"Record:"+this.S+":"+(this.g?this.g.id:void 0)};function Mq(a,b,c){var d=0;if(!b)return d;b.gd$city&&a[c+"_address_city"]!=b.gd$city.$t&&(a[c+"_address_city"]=b.gd$city.$t,d++);b.gd$country&&a[c+"_address_country"]!=b.gd$country.$t&&(a[c+"_address_country"]=b.gd$country.$t,d++);b.gd$postcode&&a[c+"_address_postalcode"]!=b.gd$postcode.$t&&(a[c+"_address_postalcode"]=b.gd$postcode.$t,d++);b.gd$region&&a[c+"_address_state"]!=b.gd$region.$t&&(a[c+"_address_state"]=b.gd$region.$t,d++);b.gd$street&&a[c+"_address_street"]!=b.gd$street.$t&&(a[c+"_address_street"]=
b.gd$street.$t,d++);b.gd$housename&&a[c+"_address_street_2"]!=b.gd$neighborhood.$t&&(a[c+"_address_street_2"]=b.gd$neighborhood.$t,d++);b.gd$neighborhood&&a[c+"_address_street_3"]!=b.gd$city.$t&&(a[c+"_address_street_3"]=b.gd$city.$t,d++);return d}
function Nq(a,b,c){function d(d,g){!a[c+g]||b[d]&&b[d].$t==a[c+g]||(e++,b[d]={$t:a[c+g]})}var e=0;if(!a)return 0;b||(b={});d("gd$city","_address_city");d("gd$country","_address_country");d("gd$postcode","_address_postalcode");d("gd$region","_address_state");d("gd$street","_address_street");d("gd$neighborhood","_address_street_2");d("gd$city","_address_street_3");return e}
function Oq(a,b){var c=0;!a.title||b.name&&b.name==a.title.$t||(b.name=a.title.$t,c++);for(var d=0;a.gd$email&&d<a.gd$email.length;d++){var e=a.gd$email[d];"http://schemas.google.com/g/2005#work"==e.rel?b.email1!=e.address&&(c++,b.email1=e.address):"http://schemas.google.com/g/2005#home"==e.rel?b.email2!=e.address&&(c++,b.email2=e.address):"http://schemas.google.com/g/2005#other"==e.rel&&b.email!=e.address&&(c++,b.email=e.address)}a.gd$name?(a.gd$name.gd$namePrefix&&b.salutation!=a.gd$name.gd$namePrefix.$t&&
(c++,b.salutation=a.gd$name.gd$namePrefix.$t),a.gd$name.gd$givenName&&b.first_name!=a.gd$name.gd$givenName.$t&&(b.first_name=a.gd$name.gd$givenName.$t,c++),a.gd$name.gd$familyName&&b.last_name!=a.gd$name.gd$familyName.$t&&(b.last_name=a.gd$name.gd$familyName.$t,c++),a.gd$name.gd$fullName&&b.full_name!=a.gd$name.gd$fullName.$t&&(b.full_name=a.gd$name.gd$fullName.$t,c++)):b.full_name=a.title.$t;a.gd$organization&&a.gd$organization[0]&&(d=a.gd$organization[0],d.gd$orgTitle&&d.gd$orgTitle.$t!=b.title&&
(b.title=d.gd$orgTitle.$t,c++),d.gd$orgDepartment&&d.gd$orgDepartment.$t!=b.department&&(b.department=d.gd$orgDepartment.$t,c++),d.gd$orgJobDescription&&d.gd$orgJobDescription.$t!=b.description&&(b.description=d.gd$orgJobDescription.$t,c++));if(a.gd$im)for(d=0;d<a.gd$im.length;d++)"Twitter"==a.gd$im[d].label&&b.twitter!=a.gd$im[d].address?(b.twitter=a.gd$im[d].address,c++):"Facebook"==a.gd$im[d].label&&b.facebook!=a.gd$im[d].address?(b.facebook=a.gd$im[d].address,c++):"Google Plus"==a.gd$im[d].label&&
b.googleplus!=a.gd$im[d].address?(b.googleplus=a.gd$im[d].address,c++):"Linkedin"==a.gd$im[d].label&&b.linkedin!=a.gd$im[d].address&&(b.linkedin=a.gd$im[d].address,c++);a.gContact$birthday&&b.birthdate!=a.gContact$birthday.when&&(b.birthdate=a.gContact$birthday.when,c++);for(d=0;a.gd$phoneNumber&&d<a.gd$phoneNumber.length;d++)if(e=a.gd$phoneNumber[d],e.$t)if("http://schemas.google.com/g/2005#mobile"==e.rel)b.phone_mobile!=e.$t&&(b.phone_mobile=e.$t,c++);else if("http://schemas.google.com/g/2005#work"==
e.rel)b.phone_work!=e.$t&&(b.phone_work=e.$t,c++);else if("http://schemas.google.com/g/2005#home"==e.rel)b.phone_home!=e.$t&&(b.phone_home=e.$t,c++);else if("http://schemas.google.com/g/2005#fax"==e.rel||"http://schemas.google.com/g/2005#home_fax"==e.rel||"http://schemas.google.com/g/2005#work_fax"==e.rel)b.phone_fax!=e.$t&&(b.phone_fax=e.$t,c++);else if(b.phone_other=e.$t)b.phone_other=e.$t,c++;if(a.gd$structuredPostalAddress){for(var f=e=-1,d=0;d<a.gd$structuredPostalAddress.length;d++){var g=a.gd$structuredPostalAddress[d];
"http://schemas.google.com/g/2005#work"==g.rel||g.primary?e=d:f=d}-1==e&&(f=-1);c+=Mq(b,a.gd$structuredPostalAddress[e],"primary");c+=Mq(b,a.gd$structuredPostalAddress[f],"alt")}return c}
function Pq(a,b){function c(a,c){if(g[a]){b.gd$phoneNumber||(b.gd$phoneNumber=[]);var d;a:{for(d=0;b.gd$phoneNumber&&d<b.gd$phoneNumber.length;d++)if(b.gd$phoneNumber[d].rel==c){d=b.gd$phoneNumber[d];break a}d=null}d?d.$t!=g[a]&&(d.$t=g[a],k++):(b.gd$phoneNumber.push({rel:c,$t:g[a]}),k++)}}function d(a){b.gd$im||(b.gd$im=[]);for(var c=0;c<b.gd$im.length;c++)if(b.gd$im[c].label==a)return b.gd$im[c];return null}function e(){b.gd$name||(b.gd$name={},k++)}function f(a,c){if(g[a]){b.gd$email||(b.gd$email=
[]);var d;a:{for(d=0;b.gd$email&&d<b.gd$email.length;d++)if(!(0<=l.indexOf(d))&&b.gd$email[d].address==g[a])break a;d=-1}if(0<=d){var e=b.gd$email[d];e.rel!=c&&(k++,e.rel=c);l.push(d)}else b.gd$email.push({rel:c,address:g[a]}),l.push(b.gd$email.length-1),k++}}var g=a.g,k=0;!g.name||b.title&&b.title.$t==g.name||(b.title={$t:g.name},k++);var l=[];f("email1","http://schemas.google.com/g/2005#work");f("email2","http://schemas.google.com/g/2005#home");f("email","http://schemas.google.com/g/2005#other");
g.salutation&&(e(),b.gd$name.gd$namePrefix&&b.gd$name.gd$namePrefix.$t==g.salutation||(b.gd$name.gd$namePrefix={$t:g.salutation},k++));g.first_name&&(e(),b.gd$name.gd$givenName&&b.gd$name.gd$givenName.$t==g.first_name||(b.gd$name.gd$givenName={$t:g.first_name},k++));g.last_name&&(e(),b.gd$name.gd$familyName&&b.gd$name.gd$familyName.$t==g.last_name||(b.gd$name.gd$familyName={$t:g.last_name},k++));g.full_name&&(e(),b.gd$name.gd$fullName&&b.gd$name.gd$fullName.$t==g.full_name||(b.gd$name.gd$fullName=
{$t:g.full_name},k++));if(g.twitter){var m=d("Twitter");m?m.address!=g.twitter&&(m.address=g.twitter,k++):(b.gd$im.push({label:"Twitter",address:g.twitter}),k++)}g.facebook&&((m=d("Facebook"),m)?m.address!=g.facebook&&(m.address=g.facebook,k++):(b.gd$im.push({label:"Facebook",address:g.facebook}),k++));g.googleplus&&((m=d("Google Plus"),m)?m.address!=g.googleplus&&(m.address=g.googleplus,k++):(b.gd$im.push({label:"Google Plus",address:g.googleplus}),k++));g.linkedin&&((m=d("Linkedin"),m)?m.address!=
g.linkedin&&(m.address=g.linkedin,k++):(b.gd$im.push({label:"Linkedin",address:g.linkedin}),k++));!g.birthdate||b.gContact$birthday&&b.gContact$birthday.when==g.birthdate||(b.gContact$birthday={when:g.birthdate},k++);c("phone_mobile","http://schemas.google.com/g/2005#mobile");c("phone_work","http://schemas.google.com/g/2005#work");c("phone_home","http://schemas.google.com/g/2005#home");c("phone_fax","http://schemas.google.com/g/2005#work_fax");c("phone_other","http://schemas.google.com/g/2005#other");
for(var n=-1,m=-1,p=0;b.gd$structuredPostalAddress&&p<b.gd$structuredPostalAddress.length;p++)-1==n&&"true"==b.gd$structuredPostalAddress[p].primary||"http://schemas.google.com/g/2005#work"==b.gd$structuredPostalAddress[p].rel?n=p:-1==m&&(m=p);-1==n&&0<=m&&(n=m,b.gd$structuredPostalAddress[n].primary="true",m=-1);0<=n?k+=Nq(g,b.gd$structuredPostalAddress[n],"primary"):(n={primary:"true",rel:"http://schemas.google.com/g/2005#work"},p=Nq(g,n,"primary"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=
[]),b.gd$structuredPostalAddress.push(n),k+=p));0<=m?k+=Nq(g,b.gd$structuredPostalAddress[m],"alt"):(n={},p=Nq(g,n,"alt"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=[]),b.gd$structuredPostalAddress.push(n),k+=p));return k};function Qq(a){if(u(a))return a.map(function(a){return Qq(a)});if(A(a)){var b={},c;for(c in a.name_value_list)b[c]=a.name_value_list[c].value;return b}throw Error("Invalid name_value_entries");};function Rq(a,b,c,d,e){c=ra(c,"http")?new ud(c):vd(wd(new ud,c),"https");Ad(c,"");zd(c,null);this.n=c.M();this.K=b;this.H=c.toString().replace(/\/$/,"");this.O=this.H+"/service/v4/rest.php";this.i=d;this.l=e;this.g=null;this.j=a;this.U=new Fq(this.n);this.db=new Rn(this.n,Jq(this.U));this.h=null;this.p=this.s=NaN;this.D=!1;this.history=new Do(this.db)}E(Rq,$n);h=Rq.prototype;h.M=function(){return this.n};
h.request=function(a,b,c,d,e,f){function g(){m.execute(function(g,k){this.s=C();var l=g;if(x(l))try{g=JSON.parse(l)}catch(m){}f||!g||11!=g.number&&10!=g.number?d.call(e,g,k):this.Sc().u(function(){this.request(a,b,c,d,e,!0)},function(){d.call(e,null,new Wi(0,null,{},"Login fail"))},this)},this)}for(var k="{",l=0;l<b.length;l++)k+=(0==l?"":",")+'"'+b[l]+'":'+JSON.stringify(c[l]);k+="}";l=new Bd;l.add("method",a);l.add("input_type","json");l.add("response_type","json");l.add("rest_data",k);var m=this.j.request(new $h(this.O,
"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},l.toString())),k=C()-this.s;0<k&&100>k?(this.s=100+this.s,Q(this.logger,"request will call after "+k+" ms."),nf(g,k,this)):g.call(this)};
function Sq(a,b,c){var d=["session","module_name"];a=[a.g?a.g.id:null,c.module_name];var e=[!1,!1];if("get_entry_list"==b)b=c.query||"",d.push("query"),a.push(b),e.push(""==b),d.push("order_by"),b=c.order_by||"",a.push(b),e.push(""==b),b=c.offset||0,d.push("offset"),a.push(b),e.push(0==b),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length),b=c.max_results||25,d.push("max_results"),
a.push(b),e.push(null!=c.max_results),b=c.deleted||0,d.push("deleted"),a.push(b),e.push(0==b),c=!!c.favorites,d.push("favorites"),a.push(c),e.push(!1==c);else if("get_available_modules"==b)c=c.filter||"",d.push("filter"),a.push(c),e.push(0==c.length);else if("get_module_fields"==b)c=c.fields||[],d.push("fields"),a.push(c),e.push(0==c.length);else if("get_entries"==b)b=c.ids||[],d.push("ids"),a.push(b),e.push(!1),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||
[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length);else for(var f in c)"module_name"!=f&&(d.push(f),a.push(c[f]),e.push(!1));for(c=e.length-1;0<=c;c--)if(e[c])d.pop(),a.pop();else break;return{keys:d,values:a}}
function Tq(a,b){var c=b.module_name;a.p=C();return Uq(a,"get_entry_list",b).C(function(a){var e=a.result_count,f=a.offset||0,g=a.entry_list,k=parseInt(a.next_offset,10);if(t(e)&&u(g)){if(0<g.length){a=Qq(g);var l=this.K,m=this.M(),n=a;if(l.h)for(var n=u(n)?n:[n],p=0;p<n.length;p++)n[p]&&Vq(l,new Kq(m,c,n[p]));this.db.put(c,a)}return 0<g.length&&e>=g.length&&k>f?(b.offset=k,Tq(this,b)):k}throw Error("Invalid REST respond on entry list query on "+c+": "+JSON.stringify(a));},a)}
function Wq(a,b){var c={module_name:b},d="module/"+b;return a.db.get("Meta",d).C(function(a){return a?a:Uq(this,"get_module_fields",c).C(function(a){a&&a.module_name&&a.module_fields?this.db.put("Meta",a,d):N(this.logger,"Invalid module for "+b+" "+wh(a));return a},this)},a)}
function Xq(a,b){var c=new Uj(b,"date_modified",null,!0);return a.db.keys(c,1).C(function(a){var c={};a[0]&&(c.query=b.toLowerCase()+".date_modified>'"+a[0]+"'");c.module_name=b;c.order_by="date_modified";a=Tq(this,c);a.u(function(a){this.logger.info(this+" module "+b+" synced, "+a+" records updated.")},function(a){var c=".";a&&(c=" with "+a.name+": "+a.message);N(this.logger,this+" module "+b+" failed"+c)},this);return a},a)}
function Uq(a,b,c,d){var e=d||0,f=new F;if(!a.g||!a.g.id)return 2>e?(Q(a.logger,"Request require login, tried "+e),a.Sc().C(function(){e++;qb(Uq(a,b,c,e),f)})):(P(a.logger,"Cannot do request, not login. Give up after "+e+" retry"),f.A()),f;d=Sq(a,b,c);a.request(b,d.keys,d.values,function(d,k){k.Da()?11==d.number&&/invalid/i.test(d.name)?(this.g=null,qb(Uq(a,b,c,e),f)):f.w(d):f.A(k.N()+" "+k.Ja())},a);return f}
h.list=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=0;c<a.length;c++){var d=a[c];if(!A(d))return tb("invalid query at "+c+"");var e=d.store;if(-1==iq.indexOf(e))return tb("invalid store name at "+c+": "+e);var f=d.index;if(!x(f)||0==f.length)return tb("index name missing in "+e);var g=null;null!=d.key?(g=d.key,"ydn$phones"==f?g=gn(g):"ydn$emails"==f&&(g=g.toLowerCase()),g=d.prefix?lj(g):T.only(g)):null!=d.keyRange&&(g=mj(d.keyRange));"id"==f?b.push(this.db.values(e,
g)):Wl(this.db,e,f)?b.push(this.db.values(e,f,g)):b.push(sb([]))}return(new km(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};
h.search=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=Jq(this.U),d=0;d<a.length;d++){var e=a[d];if(!A(e))return tb("invalid query at "+d+"");var f=e.q;if(!x(f)||0==f.length)return tb("query term missing "+d+"");var g="ft-"+e.store+"-"+(e.index||"name");0<=Ta(c.fullTextCatalogs,function(a){return a.name==g})?(f=this.db.search(g,e.q),e.fetchFull&&(f=f.C(function(a){if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(new qk(a[c].storeName,a[c].primaryKey));return this.db.values(b)}},
this)),b.push(f)):b.push(sb([]))}return(new km(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};function Yq(a,b){var c=b.store;if(!x(c)||0==c.length)return tb("store name required.");var d=b.id;return x(d)&&0!=d.length?a.db.get(c,d):tb("id required.")}
function Zq(a){if(a.h&&a.h.isLogin)return sb(a.h);var b=new F;a.db.get("Meta","info/server").ea(function(a){a&&a.version?(this.h=a,b.w(a)):this.request("get_server_info",[],[],function(a,c){if(0==c.N())this.h=null,b.A("service "+this.O+" not responding");else if(c.Da()){var f=Yi(c);if((!a||!a.version)&&x(f))try{a=JSON.parse(f)}catch(g){a=Yi(c)}a&&a.version?(f=a,this.h=qc(f),b.w({info:f,about:$q(this)}),this.db.put("Meta",f,"info/server")):(this.h=null,b.A("invalid respond "+Yi(c)))}else this.h=null,
b.A("request fail "+c.N()+" "+c.Ja())},this)},a);return b}function ar(a){var b=new F;a.request("get_available_modules",["filter"],["all"],function(a){b.w(a)},a);return b}function $q(a){var b=a.j,b=b instanceof co&&/proxy/.test(b.h);return{baseUrl:a.H,domain:a.M(),userName:a.i,isLogin:a.isLogin(),hostPermission:!b}}function br(a){return(new km([Zq(a),ar(a)])).C(function(a){return{serverInfo:a[0][1],availableModules:a[1][1],about:$q(this)}},a)}
function cr(a,b,c){var d=[],e;for(e in c)d.push({name:e,value:c[e]});c={module_name:b,name_value_list:d};window.console.log("set_entry",c);return Uq(a,"set_entry",c).C(function(a){if(a&&a.id){var c={id:a.id};a=a.entry_list||{};for(var d in a)c[d]=a[d].value;window.console.log("set_entry result",c);this.db.put(b,c);return c}throw Error("creating "+b+" entry fail");},a)}
function dr(a,b,c){window.console.log(b,c);if(c){var d=er(b,a.M(),void 0,c.id),e=d.S,f=new Kq(a.M(),e,c);P(a.logger,"synchronizing "+b+" to "+f);if((f.g?+new Date(f.g.date_modified):NaN)==d.h){var g=new Bo("update-gdata-record");Co(g,c);b=b.data;A(b)&&Sl(b);Oq(b,c)&&cr(a,e,c).u(function(a){A(a)?g.g=Sl(a):g.g=a;this.history.add(g)},function(a){N(this.logger,"Fail to put record "+c.id+" to server "+a.message)},a)}}}
function fr(a,b){for(var c=gr(b),d=0;d<c.length;d++)0<=iq.indexOf(c[d].S)&&a.db.get(c[d].S,c[d].g).C(function(a){dr(this,b,a)},a)}function hr(a,b,c){var d={};Oq(c,d);return cr(a,b,d)}h.isLogin=function(){return!(!this.g||!this.g.id)};
h.update=function(){if(this.j&&this.j instanceof co)this.logger.info(this+" updating skipped since no direct connection is not available.");else{var a;if(this.D)cf(this.logger,"Modules are already updating now at "+a+" / "+iq.length);else{this.D=!0;this.p=C();a=0;var b=this,c=function(){var d=iq[a];d?(P(b.logger,"Syncing module "+d),a++,Xq(b,d).ea(function(){b.p=C();r.setTimeout(function(){c()},500)})):(cf(b.logger,"Updating module done"),b.D=!1)};c();r.setTimeout(function(){2E3<b.p-C()&&c()},2E3)}}};
h.Sc=function(a,b){a&&(this.i=a);b&&(this.l=b);if(!this.i)return tb("username required.");if(!this.l)return tb("password required.");var c=new F;this.request("login",["user_auth","application_name","name_value_list"],[{user_name:this.i,password:this.l},"Yathit CRM",{language:"",notifyonsave:"false"}],function(a,b){if(a&&a.id)this.g=qc(a),c.w(a);else if(a&&a.description)c.A(a.description+" ("+a.name+")");else{var f=b.N()+" "+b.Ja()+" "+Yi(b);c.A("Login fail: "+f.substr(0,200))}},this,!0);return c};
function ir(a){var b=new F;a.request("logout",[],[],function(a,d){this.g=null;d.Da()?(N(this.logger,"Logout request fail with "+d.N()+" "+d.Ja()),b.w(!0)):b.A(d.N()+" "+d.Ja())},a,!0);return b}
function jr(a){function b(){f.request(new $h(e.toString())).execute(function(a,b){/sugarcrm/i.test(Yi(b))?d.A("Look like SugarCRM web site, but REST V4 API is not available."):200==b.N()?d.A("Not a SugarCRM web site"):d.A("Invalid respond, "+b.N())})}function c(a,b){var c=new Bd;c.add("method","get_server_info");c.add("input_type","json");c.add("response_type","json");c.add("rest_data","{}");f.request(new $h(a,"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},c.toString())).execute(b)}
var d=new F;a=a.trim();ra(a,"http")||(a="https://"+a);var e=new ud(a);Ad(e,"");zd(e,null);var f=Yh("proxy"),g=e.fa();a=e.yc;/rest.php$/.test(a)||(/index.php$/.test(a)?yd(g,a.replace("/index.php","")):yd(g,""));var k=g.toString();(function(a,b){c(a+"/service/v4/rest.php",function(a,c){if(200==c.N()){if(!a||!a.version){var d=Yi(c);if(x(d))try{a=JSON.parse(d)}catch(e){b(null,c);return}else a=d}a&&a.version&&b(a,c)}else b(0,c)})})(k,function(a,f){a?(a.isLogin=!1,a.userName=null,a.domain=g.M(),a.baseUrl=
k,d.w(a)):0==a?"https"==e.kc?(vd(g,"http"),setTimeout(function(){c(g.toString(),function(a,c){c.Da()?d.w(a):b()})},100)):d.A(f.N()+" "+f.Ja()+" "+Yi(f)):b()});return d}h.toString=function(){return"SugarClient:"+this.n};function kr(a){Error.captureStackTrace?Error.captureStackTrace(this,kr):this.stack=Error().stack||"";a&&(this.message=String(a))}E(kr,Error);kr.prototype.name="ydn.gdata.error.InvalidAtomFormatError";function lr(a){Error.captureStackTrace?Error.captureStackTrace(this,lr):this.stack=Error().stack||"";a&&(this.message=String(a))}E(lr,Error);lr.prototype.name="ydn.gdata.error.IncompatibleError";var mr="atom app gd xhtml batch openSearch".split(" ");function nr(a){if(!t(this.type))throw new Hh("Abstract class cannot be instantiated.");if(x(a))a={id:{$t:a}};else if(!t(a.id)||!x(a.id.$t))throw new Ch("Invalid GDataFeed");this.id=a.id.$t;this.data=a;t(this.data.entry)?u(this.data.entry)||(this.data.entry=[this.data.entry]):this.data.entry=[];this.j={};this.n={};a=u(this.data.entry)?this.data.entry.length:0;for(var b=0;b<a;b++){var c=this.data.entry[b],c=c.id?c.id.$t:c.Dg?c.Dg.$t:"";if(0==c.length)throw new kr("entry "+b);if(0==c.match(/\w+$/)[0].length)throw new kr("entry "+
b+" of "+c);var d=c.match(/\w+$/)[0];this.j[c]=this.data.entry[b];this.n[d]=this.data.entry[b]}this.i=!0;this.D=[];this.s=new jh(function(){this.dispatchEvent(or)},300,this);this.lg=null;this.h=NaN;this.p=void 0}E(nr,rh);var or="i";h=nr.prototype;h.tf=function(){return this.kind};h.logger=R("ydn.gdata.Feed");
h.mb=function(a){var b=new F;Q(this.logger,this+" receiving a task, ready: "+this.i);var c=this;this.i?(this.i=!1,b.ea(function(){Q(c.logger,c+" finish the task.");c.i=!0;var a=c.D.shift();a&&a.call(this)}),a.call(this,b)):this.D.push(na(B(a,this),b));return b};h.lg=null;function pr(a){var b;if(!(b=a.lg))if(a=a.ee(),t(a)){b=a;for(var c=0;c<Qi.length;c++){var d=(0,Qi[c])(a);if(d){b=d;break}}Q(Oi,"Resolving "+a+" to "+b);b=Pi[b]||null}else b=Pi["default"];return b}h.Ye=function(){this.dispatchEvent("e")};
h.Of=function(){return mr};h.Fg=function(a){a.g()||N(this.logger,"Batch submission failed. "+a.responseText)};
h.pc=function(a,b){var c=this.Of(),d=void 0;t(c)||(c=mr);for(var e="",f=0;f<c.length;f++)var g=c[f],e=0==f?e+(' xmlns="'+kp[g]+'" '):e+(" xmlns:"+g+'="'+kp[g]+'" ');d=t(d)?"<id>"+d+"</id>":"";d=Ah("<feed"+e+">"+d+"</feed>");for(f=c=0;e=this.sc(f);f++)if(Ap(e))yp(e,"");else if(Bp(e.data)){var g="delete"==zp(e.data),k=!(!e.data.id||!e.data.id.$t);yp(e,null);var l=wp(new rp(null,"entry",e.data),d.documentElement),m=l.getElementsByTagNameNS(mp("batch"),"operation"),m=m[0]?m[0]:l.appendChild(d.createElementNS(mp("batch"),
"operation")),l=d.createAttribute("type");l.nodeValue=g?"delete":k?"update":"insert";m.setAttributeNode(l);yp(e,"committed");c++;a&&a.message({id:this.sf(),code:"operation: "+l.nodeValue+" "+e})}if(0==c)return cf(this.logger,this+" Nothing to commit."),0;cf(this.logger,this+" committing "+c+" entries.");d=Bh(d);b?(this.logger.info("Commit ignored for dry run."),window.console.log(d)):(e=B(this.Fg,this),this.K&&this.K.stop(),f=pr(this),g=this.we(),f.send(g,e,{method:"POST",body:d,headers:{"Content-Type":"application/atom+xml"},
params:{}}));return c};h.de=function(a){return new xp(a)};h.sc=function(a){return 0<=a&&a<this.data.entry.length?this.de(this.data.entry[a]):null};h.rf=function(a){return(a=this.j[a])?this.de(a):null};
h.save=function(a){if(this.O){var b=this;this.l||(this.l=new jh(function(){this.mb(function(a){var d=b.toJSON(),e=b.data.entry,f,g,k;b.O.U(function(a){a.put("ydn.gdata.feed",d).Ec(function(a){throw a;}).C(function(){f=!0});a.put("ydn.gdata.entry",e).Ec(function(a){throw a;}).C(function(a){k=a.length;g=!0})},["ydn.gdata.feed","ydn.gdata.entry"],"readwrite").u(function(){f&&g?Q(this.logger,b+": saved "+k+" entries."):Q(this.logger,b+": saved failed"+e.length+" entries.");a.w(!0)},function(a){throw a;
},this)})},1E3,this));a?lh(this.l):kh(this.l)}};
function qr(a,b,c){c=c||new F;var d=pr(a);if(!d)return N(a.logger,a+": No transport available."),c.A(Error("No transport available.")),c;d.send(b,function(b){if(200==b.status){a.h=C();b=b.Q?of(b.Q.responseText):void 0;if(!b.feed)throw new kr("feed missing.");var d=b.feed;if(!t(d))throw b=xh(d),new kr(b.substr(0,50));if(d.id.$t!=a.F())throw new lr(d.id.$t+" is not "+a.F());var g=b=0,k=u(d.entry)?d.entry:d.entry?[d.entry]:[];b=k.length;0==b&&Q(a.logger,a+": fetch return no result.");for(var l=0;l<b;l++){for(var m=
a,n=k[l],p=n instanceof xp?n:m.de(n),q=p,s=0;s<q.oc.length;s++)null!=q.data[q.oc[s]]&&!u(q.data[q.oc[s]])&&(q.data[q.oc[s]]=[q.data[q.oc[s]]]);yp(q,null);q=q.data;q.batch$status&&(q.batch$status=void 0);q.batch$operation&&(q.batch$operation=void 0);var q=p.F(),v=m.rf(q);(s=!!v)?v.update(p):(v=p.id.match(/\w+$/)[0],m.data.entry.push(n),m.j[q]=p.data,m.n[v]=p.data);!s&&g++}cf(a.logger,a+" "+b+" ("+g+" new) entries received");a.Ye();(d=Eo(d,"next"))?(a.save(),kh(a.s),a.p=d.$t,qr(a,d.href,c)):(0<b&&(a.save(),
kh(a.s)),c.w(!0))}else N(a.logger,"Fetching "+b.uri+" failed: "+b.status),c.A(!1)});return c}h.toString=function(){return this.type+":"+this.id};function rr(a,b){a.rg&&b.g.set("v",a.rg);b.g.set("alt","json");b.g.set("showdeleted",!0)}
function sr(a,b){var c="lu",d=!1;if("lf"==c){if(a.h){var d=!0,e=new Date(a.h),e=e.toISOString();b.g.set("updated-min",e)}}else if("lu"==c){for(var e=0,f=-1,g,k=0;g=a.sc(k);k++)g=g.data.updated.$t,e<g&&(e=g,f=k);if(e=a.sc(f))e=new Date(e.data.updated.$t),e=new Date(1+ +e),e=e.toISOString(),b.g.set("updated-min",e)}else"lo"==c?(b.g.set("orderby","lastmodified"),a.h&&b.g.set("max-results","1")):c="no";Q(a.logger,a+" updating "+(d?"continue":"begin")+" by "+c)}h.Dh=hp.prototype.Yd;h.F=hp.prototype.F;
h.Fh=hp.prototype.xh;h.Eh=hp.prototype.wh;h.ee=function(){return this.Fh()||""};h.sf=function(){return this.id};h.we=function(){return this.Eh()};function tr(a){return a.mb(function(a){var c=new ud(this.ee());rr(this,c);sr(this,c);this.T(ph,!1);qr(this,c.toString()).ea(function(c){sh(this);c?a.w(!0):a.A(void 0)},this)})}h.update=function(a){return a||!0!==("undefined"==typeof this.g?null:(this.g&ph)==ph)?tr(this):(Q(this.logger,this+" already loaded."),sb(!1))};
h.count=function(a){if(a){a=0;for(var b,c=0;b=this.sc(c);c++)Ap(b)||"deleted"==zp(b.data)||a++;return a}return this.data.entry.length};h.toJSON=function(){return{id:this.id,key:this.sf(),last_fetch_next_uri:this.p,last_fetch:this.h}};function ur(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{ob:b,eb:a}}function vr(a,b){var c=ur(a),d=ur(b);if(t(c.ob)&&t(d.ob)&&0!=c.ob.length&&0!=d.ob.length&&c.ob!==d.ob)return 0;if(t(c.cb)&&0!=c.cb.length){if(t(d.cb)&&0!=d.cb.length){if(c.cb.length>=d.cb.length){for(var e=0;e<d.cb.length;e++)if(c.cb[e]!=d.cb[e])return 0;return 1}for(e=0;e<c.cb.length;e++)if(c.cb[e]!=d.cb[e])return 0}return-1}return 1}
function wr(a,b){if(!a||!b||0==a.length||0==b.length)return 0;a=a.trim();b=b.trim();var c=ur(a),d=ur(b);return c.ob&&c.eb&&c.ob==d.ob&&c.eb==d.eb?6<=c.eb.length?1:4<=c.eb.length?0.8:0.4:c.eb&&4<=c.eb.length&&c.eb==d.eb?8<=c.eb.length?0.8:4<=c.eb.length?0.6:0.4:0};function xr(a){xp.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{Oh:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}E(xr,xp);xr.prototype.logger=R("ydn.gdata.m8.Entry");xr.prototype.g="3.0";xr.prototype.type="m8";function yr(a){if(!t(this.kind))throw new Hh("Abstract class cannot be instantiated.");nr.call(this,a);this.user_id=this.F()}E(yr,nr);h=yr.prototype;h.tf=function(){return this.kind};h.rg="3.0";h.type="m8";h.toString=function(){return"Feed:"+this.kind+":"+this.user_id};h.ee=function(){return"https://www.google.com/m8/feeds/"+this.tf()+"s/"+this.user_id.replace("@","%40")+"/full?v=3.0"};
h.we=function(){var a=yr.m.we.call(this);return a?a:"https://www.google.com/m8/feeds/"+this.tf()+"s/"+this.user_id.replace("@","%40")+"/full/batch?v=3.0"};var zr=mr.concat(["gContact"]);yr.prototype.Of=function(){return zr};function Ar(a,b,c,d,e,f){this.scheme=a;this.domain=b;this.S=c;this.g=d;this.i=y(e)?e:NaN;this.h=y(f)?f:NaN}function Br(a){if(!A(a)||!x(a.value))return null;var b=Cr(a.value);if(!b)return null;var c=NaN,d=NaN;if(x(a.label)){a=a.label;var e=a.indexOf("#"),f=a.indexOf("-");0<e&&0<f&&f>e&&(c=parseInt(a.substring(e,f),10),d=parseInt(a.substring(f),10))}return new Ar(b[1],b[2],b[3],b[4],c,d)}function Cr(a){return a?a.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null}
Ar.prototype.V=function(){return this.scheme+"://"+this.domain+"/"+this.S+"/"+this.g};function Dr(a){xr.call(this,a)}E(Dr,xr);h=Dr.prototype;h.kind="contact";h.logger=R("ydn.gdata.m8.ContactEntry");h.qf=function(){return"contact"};h.getName=function(a){var b=a?"":this.ad();if(a||0==b.length)a=this.data.gd$name,A(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return va(b)};function Er(a){var b=a.data.gd$email;a=[];for(var b=u(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function Fr(a){a=a.data.gd$phoneNumber;a=u(a)?a:A(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!ta(a[c].$t)&&b.push(a[c].$t);return b}h.ye=function(){var a=Dr.m.ye.call(this);if(a.ydn$emails||a.ydn$xp||a.ydn$externalIds)a==this.data&&(a=Sl(this.data)),delete a.ydn$emails,delete a.ydn$xp,delete a.ydn$externalIds;return a};h.oc="link category gd$email gd$im gd$organization gd$phoneNumber gd$structuredPostalAddress gd$formattedAddress".split(" ");
function Gr(a,b){function c(a){var b=Sa(e,function(b){return b.address===a.address});b?b.rel=t(a.rel)?a.rel:b.rel:d(a)}function d(a){a=Sl(a);f&&delete a.primary;t(void 0)&&(a.rel=void 0);e.push(a)}for(var e=[Sl(a.data.gd$email[0])],f=!!a.data.gd$email[0].primary,g=1;g<a.data.gd$email.length;g++)c(a.data.gd$email[g]);for(g=0;g<b.length;g++)c(b[g]);g=zl(e,a.data.gd$email);g||(a.data.gd$email=e);return!g}
function Hr(a,b){function c(a){var b=Pa(e,function(b){return wr(b.$t,a.$t)}),c=Sh(b);if(0.4<c.value){var b=e[c.index],f=t(a.rel)?a.rel:b.rel;1==c.value?(b.rel=f,b.$t=a.$t):t(a.rel)&&t(b.rel)&&b.rel!==a.rel?d(a,f):(b.rel=f,c=vr(b,a),-1==c?b.$t=a.$t:0==c&&(b.$t=a.$t))}else d(a)}function d(a,b){a=Sl(a);f&&delete a.primary;t(b)&&(a.rel=b);e.push(a)}for(var e=[Sl(a.data.gd$phoneNumber[0])],f=!!a.data.gd$phoneNumber[0].primary,g=1;g<a.data.gd$phoneNumber.length;g++)c(a.data.gd$phoneNumber[g]);for(g=0;g<
b.length;g++)c(b[g]);g=zl(e,a.data.gd$phoneNumber);g||(a.data.gd$phoneNumber=e);return!g}h.ef=function(a,b){if("gd$phoneNumber"==a){if(null!=this.data.gd$phoneNumber)return Hr(this,b);this.data.gd$phoneNumber=Sl(b);return!0}if("gd$email"==a){if(null!=this.data.gd$email)return Gr(this,b);this.data.gd$email=Sl(b);return!0}return Dr.m.ef.call(this,a,b)};
function er(a,b,c,d){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=0;e<a.length;e++){var f=Br(a[e]);if(f&&!("sugarcrm"!=f.scheme||b&&b!=f.domain||d&&d!=f.g||c&&c!=f.S))return f}return null}function gr(a){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var b=[],c=0;c<a.length;c++){var d=Br(a[c]);d&&b.push(d)}return b};function Ir(a){yr.call(this,a)}E(Ir,yr);h=Ir.prototype;h.logger=R("ydn.gdata.m8.ContactFeed");h.kind="contact";h.Ye=function(){Ir.m.Ye.call(this)};h.rf=function(a){return Ir.m.rf.call(this,a)};h.de=function(a){return new Dr(a)};h.sc=function(a){return Ir.m.sc.call(this,a)};h.ee=function(){return"https://www.google.com/m8/feeds/contacts/"+this.F()+"/full"};h.sf=function(){return"http://www.google.com/m8/feeds/contacts/"+this.F().replace("@","%40")};function Jr(a){function b(a){ra(a,"atom:")&&(a=a.substring(5,a.length));return a.replace("#text","$t").replace(/:/g,"$")}x(a)&&(a=Ah(a));var c={};if(1==a.nodeType){if(0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var e=a.attributes.item(d);c[b(e.nodeName)]=e.nodeValue}}else 3==a.nodeType&&(c=a.nodeValue);if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){var e=a.childNodes.item(d),f=b(e.nodeName);if("undefined"==typeof c[f])"content"==f?(c[f]={$t:Bh(e)},e.namespaceURI&&(c[f].xmlns=
e.namespaceURI)):c[f]=Jr(e);else{if("undefined"==typeof c[f].length){var g=c[f];c[f]=[];c[f].push(g)}c[f].push(Jr(e))}}return c};function Kr(a,b){this.id=b.replace("@","%40");this.client=this.g=null;this.i=new mh(function(){cf(this.logger,"updating gdata "+this);Lr(this).u(function(a){this.logger.info(this+" synced, "+a+" new entries updated.")},function(){N(this.logger,this+" update failed.")},this)},6E4,this);this.j=a;this.h=null}h=Kr.prototype;h.logger=R("ydn.ds.gdata.GData");h.update=function(){nh(this.i)};h.L=function(){return this.j};function Mr(a){var b=new F;a.execute(function(a,d){a?b.w(a):b.A(d)});return b}
function Nr(a,b){var c=(a.client?a.client:Yh("gse")).request(b);return Mr(c).u(function(a){a=a.feed;if(!a.entry)return 0;for(var b=(new Ir(a)).Dh("next"),c=a.entry.length,g=!!this.h,k=0;g&&k<c;k++){var l=a.entry[k];l.gContact$externalId&&this.h(l)}return this.L().put(this.I(),a.entry).C(function(){return b?Nr(this,new $h(b.href)).C(function(a){return c+a},this):c},this)},function(a){N(this.logger,"fetching fail "+(a?a.N()+" "+a.Ja():""))},a)}h.getParams=function(){return{alt:"json"}};
h.get=function(a){return x(a)&&0!=a.length?this.L().get(this.I(),a):tb("invalid key")};h.put=function(a){return this.L().put(this.I(),a)};h.qg=function(a){return new xp(a)};function Or(a,b){return a.qg(b).pc().C(function(a){a=Jr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+wh(a));this.L().put(this.I(),b);return b},a)}
function Lr(a){if(!a.L().getName())return tb(Error("database not ready"));if(!a.g){var b=new Uj(a.I(),"updated.$t",null,!0);a.g=a.L().keys(b,1).C(function(a){var b=this.getParams();b.orderby="lastmodified";a[0]?(b.sortorder="descending",a=(new Date(1+ +new Date(a[0]))).toISOString(),b["updated-min"]=a):b.sortorder="ascending";return Nr(this,new $h(Pr(this)+"/full","GET",b)).ea(function(){this.g=null},this)},a)}return a.g}h.toString=function(){return"GData:contact:"+this.id.replace("%40","@")};function Qr(a,b){Kr.call(this,a,b)}E(Qr,Kr);Qr.prototype.I=function(){return"contact"};Qr.prototype.getParams=function(){var a=Qr.m.getParams.call(this);a.v="3.0";return a};function Pr(a){return"https://www.google.com/m8/feeds/contacts/"+a.id}Qr.prototype.qg=function(a){var b=!!a.id;b||(a.id={$t:Pr(this)+"/base/0"});var c=new Dr(a);b||delete a.id;return c};function Rr(a,b){var c=T.only(b.V());return a.L().values(a.I(),"ydn$externalIds",c).C(function(){},a)}
function Sr(a,b,c){return a.L().get(a.I(),b).C(function(a){if(a){if(!c||!c.label||!c.value)return tb("invalid external_id_data");var e=c.label,f=c.value;a.gContact$externalId=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var g=new Dr(a),k=!1,l=0;l<a.gContact$externalId.length;l++)if(a.gContact$externalId[l].value==f){a.gContact$externalId[l].label=e;k=!0;break}k||a.gContact$externalId.push({label:e,value:f});yp(g,"modified");return g.pc().C(function(a){a=
Jr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+wh(a));this.L().put(this.I(),b);return b},this)}throw Error("gdata entry "+b+" not found");},a)};function Tr(a){this.g=a;this.i=0;this.j=[];this.l=[0,0,0,0];this.h=new Kinetic.Layer;a=this.g/2;var b=a/3;this.n=[a,a,b,this.g-b];this.p=[a,b,this.g-b,this.g-b]}Tr.prototype.clear=function(){this.h=new Kinetic.Layer};var Ur=Math.pow(2,2),Vr=Math.pow(2,3),Wr=Math.pow(2,4),Xr=Math.pow(2,5);Tr.prototype.T=function(a,b){this.i=b?this.i|a:this.i&~a};
function Yr(a){a.clear();for(var b=[["#C2C2C2","#6B6B6B","#525252","#3D3D3D"],["#FAFAFA","#D8D8D8","#D8D8D8","#C2C2C2"],["#FCCA03","#DD1812","#0140CA","#16A61E"]],c=["m252,324c0,-59.647 48.354,-108 108,-108c26.90799,0 51.51501,9.843 70.42401,26.121c1.03198,-8.564 1.57599,-17.27901 1.57599,-26.121c0,-119.126 -96.43701,-215.722 -215.49899,-215.994c40.89099,0.137 73.99899,33.321 73.99899,74.244c0,41.007 -33.24301,74.25 -74.25,74.25c-41.008,0 -74.25,-33.243 -74.25,-74.25c0,-40.979 33.19701,-74.203 74.16701,-74.248c-0.05602,0 -0.11201,-0.002 -0.16701,-0.002c-119.294,0 -216,96.707 -216,216c0,8.843 0.544,17.55701 1.577,26.121c18.908,-16.278 43.515,-26.121 70.423,-26.121c59.646,0 108,48.353 108,108c0,37.93399 -19.561,71.29401 -49.14301,90.56c26.127,11.21701 54.90701,17.44 85.14301,17.44s59.01599,-6.22299 85.14301,-17.44c-29.582,-19.26599 -49.14301,-52.62601 -49.14301,-90.56z",
"m142,74.25c0,41.007 33.242,74.25 74.25,74.25c41.00699,0 74.25,-33.243 74.25,-74.25c0,-40.923 -33.108,-74.107 -73.99899,-74.244c-0.112,0 -0.22301,-0.004 -0.334,-0.004c-40.97,0.045 -74.16701,33.269 -74.16701,74.248z","m180,324c0,-59.647 -48.354,-108 -108,-108c-26.908,0 -51.515,9.843 -70.424,26.121c9.366,77.69 59.967,142.67798 129.28099,172.43799c29.582,-19.26498 49.14301,-52.625 49.14301,-90.55899z","m430.42401,242.121c-18.909,-16.278 -43.51602,-26.121 -70.42401,-26.121c-59.646,0 -108,48.353 -108,108c0,37.93399 19.561,71.29401 49.142,90.56c69.315,-29.76199 119.91602,-94.74899 129.28201,-172.439z"],
d=b[0].slice(),e=[Ur,Vr,Wr,Xr],f=0;f<e.length;f++)(a.i&e[f])==e[f]&&(d[f]=b[2][f]);b=new Kinetic.Group({scaleX:a.g/435,scaleY:a.g/435});e=new Kinetic.Group;for(f=0;f<c.length;f++){a.j[f]=new Kinetic.Path({data:c[f],fill:d[f]});if(0<a.l[f]){var g=a.g/19*8,g=new Kinetic.Text({x:a.n[f]-g/4,y:a.p[f]-g/2,text:String(a.l[f]),fontSize:g,fontFamily:"sans-serif",fill:"white"});e.add(g)}b.add(a.j[f])}a.h.add(b);a.h.add(e);return a.h};function Zr(a){this.g=document.createElement("div");this.h=a||19;this.i=new Tr(this.h);this.j=new jh(function(){this.render()},100,this);chrome.runtime.onSuspend&&chrome.runtime.onSuspend.addListener(function(){chrome.browserAction.setTitle({title:"suspended"});this.T(Vr,!1);this.T(Wr,!1);this.T(Xr,!1);this.T(Ur,!1);this.render()}.bind(this))}Zr.prototype.o=function(){return this.g};Zr.prototype.T=function(a,b){this.i.T(a,b);lh(this.j)};
Zr.prototype.render=function(){this.g.parentElement||document.body.appendChild(this.g);(new Kinetic.Stage({container:this.g,width:this.h,height:this.h})).add(Yr(this.i));if(chrome.browserAction){var a=this.g.querySelector("canvas"),b=a.getContext("2d");chrome.browserAction.setIcon({imageData:b.getImageData(0,0,a.width,a.height)})}};function xo(a,b){this.g=a;this.filter=b||null;var c=this;setTimeout(function(){$r(c)},6E5*Math.random())}
function $r(a){var b=a.g.getName(),c={"Content-Type":"application/json"};a.g.values("log",null,20).C(function(a){if(0!=a.length){var e=a.map(function(a){return a.key});a=JSON.stringify(a);a=new $h("https://mhardartway.s3.amazonaws.com/"+(b+"/"+e[0]),"PUT",null,c,a);var f=Yh(),e=e.map(function(a){return new qk("log",a)});f.request(a).execute(function(a,b){b.Da()&&this.g.remove(e).C(function(a){a==e.length&&$r(this)},this)},this)}},a)}xo.prototype.log=function(){};function as(){this.U=null;this.g={};this.h=null;var a=this.K=new Wh,b=chrome.extension.getURL("option-page.html");a.s=b;this.H=new Sn;this.i=this.p=this.l=this.s=null;this.D=new vg(new zg,"XMLHttpRequest"+location.host);this.n=new Zr;chrome.permissions.onAdded.addListener(this.dh.bind(this))}h=as.prototype;h.logger=R("ydn.crm.app.App");
h.dh=function(a){for(var b=(a=a.origins)?a.length:0,c=0;c<b;c++){var d=a[c].match(/https:\/\/([^\/]+)/);if(d){var d=d[1],e=this.g[d];if(e&&(cf(this.logger,"host permission granted to "+e),e.j instanceof co)){var f=Yh("default");this.g[d]=new Rq(f,e.K,e.H,e.i,e.l);this.g[d].update()}}}};h.init=function(){P(this.logger,"init "+this);this.n.T(Ur,!0);qo||(yo(),qo=new fo(to(),void 0,"https://yathit-app.appspot.com",1,!0),Ui(qo,Zh))};
function bs(a,b){function c(a){return a.Sc().C(function(){var b=a.isLogin()?a.i+"@":" (not login) ";this.logger.info("connected to sugarcrm client: "+b+e);a.isLogin()&&(this.g[e]=a,this.D.set(k,l),b=Object.keys(this.g),Yn(this.H,b),a.update(),cs(this));return $q(a)},this)}var d=b.baseUrl,e=b.domain||d;if(!e)return tb("domain or url required.");e=e.trim();ra(e,"http")&&(e=(new ud(e)).M());/\//.test(e)&&(e=(new ud("https://"+e)).M());if(d&&(d=d.trim(),!ra(d,"http"))){var d=d.replace(/:?\/\//,""),f=
new ud("https://"+d);f.yc||yd(f,"/");d=f.toString()}var g=a.g[e],k="sugar-client-"+e,l=a.D.get(k)||{};if(g)return g.isLogin()?sb($q(g)):c.call(a,g);var m=b.userName||l.userName;d||(d=l.base_url);d||(d="https://"+e+"/");if(!m)return P(a.logger,"username not found in "+JSON.stringify(b)),tb("username required");var n=b.password;n?b.hashed||(n=CryptoJS.MD5(n).toString()):n=l.password;if(!n)return P(a.logger,"password not found in "+JSON.stringify(b)),tb("password required.");l.userName=m;l.password=
n;l.base_url=d;var f={origins:[d+"/"]},p=new F;chrome.permissions.contains(f,function(b){b||N(a.logger,"host permission required for "+d);b=b?Yh("default"):Yh("proxy");g=new Rq(b,a,d,m,n);qb(c.call(a,g),p)});return p}
function ds(a,b,c,d){return 0<=hq.indexOf(b)?a.h.get(c).C(function(a){if(a){var f=hq[hq.indexOf(b)];return hr(d,f,a).C(function(a){if(a&&a.id)return a;throw Error("Set Entry to "+f+" failed");},this)}throw Error("contact entry "+c+" not found");},a):tb(new Ch("invalid module name "+b))}function Vq(a,b){var c=new Ar("sugarcrm",b.M(),b.S,b.F());Rr(a.h,c).C(function(a){for(var c=0;c<a.length;c++){var f=a[c];0<Pq(b,f)&&this.h.put(f)}},a)}
function cs(a){var b=!1,c;for(c in a.g)if(a.g[c].isLogin()){b=!0;break}a.n.T(Ur,!0);a.n.T(Xr,a.isLogin());a.n.T(Vr,b)}function es(a,b){if(!b)return tb("domain required");a.D.remove("sugar-client-"+b);return Xn(a.H).C(function(a){a=a||[];var d=a.indexOf(b);0<=d&&(a.splice(d,1),Yn(this.H,a));new F;return this.g[b]?ir(this.g[b]).C(function(){delete this.g[b];this.logger.info("SugarCRM "+b+" removed.");cs(this);return!0},this):!1},a)}
h.lh=function(a){for(var b=u(a.gContact$externalId)?a.gContact$externalId:[a.gContact$externalId],c=0;c<b.length;c++)if(b[c]&&b[c].value&&b[c].label){var d=Cr(b[c].value);d&&"sugarcrm"==d[1]&&(d=d[2],this.g[d]&&fr(this.g[d],new Dr(a)))}};function fs(a){a.h=new Qr(a.H.g,a.i.email);var b=Yh("gse");a.h.client=b;a.h.h=a.lh.bind(a);a.h.update()}
function gs(a,b){var c=new F,d=b.email||"";if(a.i&&a.i.email==d)return P(a.logger,"already running for "+d),c.w(a.i),c;a.i=b;a.i.updated=C();d?(a.logger.info(d+" login to YDN server"),zo(a),Tn(a.H,b.Id.$t),fs(a),Xn(a.H).C(function(a){a=a||[];for(var b=0;b<a.length;b++)a[b]&&bs(this,{domain:a[b]})},a),c.w(a.i),a.isLogin()?(a.n.T(Xr,!0),chrome.browserAction.setTitle({title:"Ready"})):(a.n.T(Xr,!1),chrome.browserAction.setTitle({title:"Login required."}))):(a.logger.info("Not login to YDN server"),c.w(a.i),
a.n.T(Xr,!1),chrome.browserAction.setTitle({title:"Login required."}));return c}function hs(a){var b=new F;Ao().request(new $h("/token","DELETE")).execute(function(a,d){d.Da()?(this.l=this.s=null,b.w(null)):b.A("error "+d.Ja())},a);return b}
function is(a,b){var c=A(b)?b:{last_login:"1"},d=Ao(),c=new $h("/audit","GET",c),e=new F;d.request(c).execute(function(a,b){if(b.Da()){if(a.LastLoginRecord){var c=a.LastLoginRecord;if(c.timestamp){var d;d=c.timestamp-C();d=Math.abs(d);if(6E4>d)d="0 minutes";else{var m=Math.floor(d/864E5);d%=864E5;var n=Math.floor(d/36E5),p=Math.floor(d%36E5/6E4),q=Ud(String(m)),s=Ud(String(n)),v=Ud(String(p));d=m*(n+p)?" ":"";var z=n*p?" ":"",m=Ge("{COUNT, plural, =0 {}=1 {{TEXT} day}other {{TEXT} days}}",m,q),n=
Ge("{COUNT, plural, =0 {}=1 {{TEXT} hour}other {{TEXT} hours}}",n,s),p=Ge("{COUNT, plural, =0 {}=1 {{TEXT} minute}other {{TEXT} minutes}}",p,v);d=m+(d+(n+(z+p)))}c.ago=d}}e.w(a)}else e.A(b)},a);return e}
function hj(a,b){if(a.l)return a.l;if(a.s&&a.s.expires<C())return sb(a.s);a.l=new F;var c={url:b||chrome.extension.getURL("option-page.html")},c=new $h("/token","GET",c);Ao().request(c).execute(function(a,b){if(b.Da()){var c=a.Tokens[0];c.has_token?(c.expires=1E3*c.expires_in+C(),this.s=c,this.l.w(c)):this.l.A(c)}else this.s=null,this.l.A(b);this.l=null},a);return a.l}h.isLogin=function(){return!!this.i&&this.i.is_login};
function js(a,b){if(a.p)return a.p;a.p=Xh(a.K,b).C(function(b){return gs(this,b).C(function(){a.isLogin()?setTimeout(function(){a.p=null},9E5):a.p=null},function(a){this.logger.info("Attamping to login YDN server fail: "+wh(a))})},a);return a.p}function ks(a){a.p=null;a.i=null;a.n.T(Xr,!1)}h.toString=function(){return"SugarApp:0.7.7"};function ls(){as.call(this);this.j={};ms(this)}E(ls,as);ls.prototype.logger=R("ydn.crm.app.EventPage");
function ns(a,b,c){var d=c.req;c.done=!0;var e=null!=c.data?c.data:{};P(a.logger,"service req: "+d+":"+c.id);if("app-setting"==d)c.data=r.localStorage.getItem("app-setting"),b.postMessage(c);else if("echo"==d)P(a.logger,"resp: "+d+":"+c.id),b.postMessage(c);else if("gdata-fetch"==d)e=c.data,"contact"==e?a.h?Lr(a.h).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):(c.error="gdata not ready",b.postMessage(c)):(c.error="invalid kind "+e,b.postMessage(c));
else if("gdata-list-contact-by-email"==d)(c.data&&0!=c.data.length?a.h.L().values(a.h.I(),"ydn$emails",T.only(c.data),100,0,!1,!0):sb([])).C(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token"==d)hj(a,c.data).ea(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("feed-log"==d){var f=e.offset||0,e=e.limit||100;lo.g.values("db-logger",null,e||100,f||0,!0).ea(function(c){P(a.logger,"resp: "+this.req+
":"+this.id);this.data=c;b.postMessage(this)},c)}else if("feed-log-info"==d)f=e.offset||0,e=e.limit||100,no(e,f).ea(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token-revoke"==d)hs(a).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("list-sugarcrm"==d){e=[];for(f in a.g)e.push($q(a.g[f]));P(a.logger,"resp: "+
c.req+":"+c.id);c.data=e;b.postMessage(c)}else"log-bug"==d?(Ni(c.data),b.postMessage(c)):"login-info"==d?js(a,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="invalid login";b.postMessage(this)},c):"logged-in"==d?(js(a,null).C(function(b){os(a,{req:d,info:b})}),b.postMessage(c)):"logout"==d?(ks(a),os(a,{req:d}),b.postMessage(c)):"new-entry"==d?A(c.data)?Or(a.h,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+
this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="failed to create a new entry";b.postMessage(this)},c):(c.error="Invalid gdata entry data",b.postMessage(c)):"new-sugarcrm"==d?bs(a,c.data).u(function(){P(a.logger,"resp: "+this.req+":"+this.id);this.data=!0;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"remove-sugar"==d?es(a,c.data).ea(function(a){this.data=a;b.postMessage(this)},c):"server-audit-log"==d?is(a,e).u(function(a){this.data=a;b.postMessage(this)},
function(a){this.error=a;b.postMessage(this)},c):"sugar-server-info"==d?(e=c.data,e=/https?:/.test(e)?new ud(e):wd(new ud,e),(e=a.g[e.M()])?Zq(e).C(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c):jr(c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},c)):"user-setting"==d?Zn().C(function(a){this.data=a;b.postMessage(this)},
c):N(a.logger,"Main channel unknown req: "+d)}
function ps(a,b,c,d){var e=d.req;d.done=!0;cf(a.logger,"sugar service req: "+c+":"+e+":"+d.id);if(a.isLogin())if("about"==e)d.data=$q(c),b.postMessage(d);else if("details"==e)br(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("echo"==e)b.postMessage(d);else if("get"==e)Yq(c,d.data).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=
a;b.postMessage(this)},d);else if("fetch-module"==e)Xq(c,d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id+" "+c);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("info-module"==e)Wq(c,d.data).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d);else if("import-gdata"==e){var f=d.data,g=f?f["gdata-id"]:"";g?
(c=ds(a,f.module,g,c),c.u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d)):(N(a.logger,"resp error: "+e+":"+d.id),d.error="gdata id required",b.postMessage(d))}else"link"==e?(c=a.h,(e=d.data["gdata-id"])?Sr(c,e,d.data["external-id"]).u(function(a){this.data=a;b.postMessage(this)},function(c){N(a.logger,"error linking gdata "+this.req+":"+this.id);this.error=c.name+": "+c.message;b.postMessage(this)},d):(d.error="gdata-id not required",b.postMessage(d))):
"list"==e?c.list(d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"list-module"==e?ar(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):"login"==e?bs(a,d.data).u(function(c){this.data=c;b.postMessage(this);cs(a)},function(a){this.error=
a;b.postMessage(this)},d):"put-record"==e?(e=d.data.module)?(f=d.data.record,A(f)?cr(c,e,f).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="record object required",b.postMessage(d))):(d.error="module required",b.postMessage(d)):"search"==e?(c=c.search(d.data),c.u(function(c){this.done=!0;P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+
this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d)):"server-info"==e?Zq(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"sync-entry"==e?(e=d.data,a.h.get(e).u(function(c){c?new Dr(c):(c="GData entry "+this.data+" not found.",P(a.logger,c),this.error=c,b.postMessage(this))},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);
this.error=c;b.postMessage(this)},d)):"rest"==e?(g=d.data,A(g)?(f=g.method,g=g.params,x(f)&&0!=f.length?A(g)?Uq(c,f,g).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="REST parameter must be an object",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d)):(d.error="method must be valid string",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d))):(d.error="REST parameter must be an object",P(a.logger,
"resp: error "+e+":"+d.id),b.postMessage(d))):N(a.logger,c+" unknown req: "+e);else d.error="Not login",b.postMessage(d)}function qs(a){var b=!1,c;for(c in a.j)"gmail"==a.j[c].group&&(b=!0);a.n.T(Wr,b)}function os(a,b){for(var c in a.j){var d=a.j[c];"gmail"==d.group&&d.port.postMessage(b)}}ls.prototype.O=function(){return{sugars:this.g,gdata:this.h,ports:this.j,user_info:this.i}};
function ms(a){chrome.runtime.onMessage.addListener(function(b,c,d){var e=c.url;e&&/https?:\/\/mail.google.com/.test(e)?chrome.storage.local.get("ydn-crm-src",function(b){var c=b["ydn-crm-src"];cf(a.logger,"injecting "+c+" to "+e);chrome.tabs.executeScript(null,{file:c},function(){chrome.tabs.executeScript(null,{code:"app = runInjApp();"},function(){cf(a.logger,c+" injected");d(c)})})}):cf(a.logger,"invalid sender "+e)});chrome.runtime.onConnect.addListener(function(b){var c=b.sender.url,d=b.name.substr(0,
b.name.lastIndexOf("-"));Ua(fd,d)?(cf(a.logger,"Channel "+b.name+" connected for "+c),a.j[b.name]={name:b.name,group:d,port:b},qs(a),b.onMessage.addListener(function(c){if(c&&A(c)){if("close"==c.req)a.logger.info("closing "+b.name),delete a.j[b.name],b.disconnect(),qs(a);else if(!c.id){N(a.logger,"Unknown group in pipe info "+b.name);return}if("sugarcrm"==c.group){var d=c.name,g=a.g[d];g?ps(a,b,g,c):N(a.logger,"SugarCRM instance "+d+" not found.")}else if("gmail"==c.group)for(d in a.j)g=a.j[d],g.group!=
d||c.name&&c.name!=g.name||g.port.postMessage(c);else ns(a,b,c)}else N(a.logger,"invalid message package: "+c)}),b.onDisconnect.addListener(function(){cf(a.logger,"disconnected "+b.name);delete a.j[b.name];qs(a)})):N(a.logger,"channel "+b.name+" ignored from "+c)});cf(a.logger,"event page start listening incoming connection")};oa("ydn.debug.log",Li);oa("loadApp",function(a){chrome.storage.local.get("ydn-crm-track",function(b){var c=b["ydn-crm-track"];b="jsc/ydn.crm-0.7.6.js";navigator.onLine&&"Edge"==c?b="https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm-edge.js":"Beta"==c?b="jsc/ydn.crm-0.7.7.js":"RC"==c&&(b="jsc/ydn.crm-0.7.6.js");c=document.createElement("script");c.onload=a;c.type="text/javascript";var d={};d["ydn-crm-src"]=b;chrome.storage.local.set(d);c.src=b;document.getElementsByTagName("head")[0].appendChild(c)})});function rs(a){K.call(this,"navigate");this.g=a}E(rs,K);function ss(a){L.call(this);this.g=a||window;Cc(this.g,"popstate",this.Kd,!1,this);Cc(this.g,"hashchange",this.Kd,!1,this)}E(ss,L);h=ss.prototype;h.Be=!1;h.sh="/";h.setEnabled=function(a){a!=this.Be&&(this.Be=a)&&this.dispatchEvent(new rs(this.getToken()))};h.getToken=function(){var a=this.g.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};h.J=function(){Jc(this.g,"popstate",this.Kd,!1,this);Jc(this.g,"hashchange",this.Kd,!1,this)};h.Kd=function(){this.Be&&this.dispatchEvent(new rs(this.getToken()))};function ts(){}da(ts);ts.prototype.g=0;function us(a){L.call(this);this.g=a||Kg();this.Rd=vs}E(us,L);us.prototype.$=ts.Y();var vs=null;function ws(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}h=us.prototype;h.Ib=null;h.aa=!1;h.X=null;h.Rd=null;h.G=null;h.Ba=null;h.Na=null;
h.ab=null;h.ng=!1;h.F=function(){return this.Ib||(this.Ib="ydn:"+(this.$.g++).toString(36))};function xs(a,b){if(a.Ba&&a.Ba.ab){var c=a.Ba.ab,d=a.Ib;d in c&&delete c[d];oc(a.Ba.ab,b,a)}a.Ib=b}h.o=function(){return this.X};function ys(a){return a.p||(a.p=new hf(a))}function zs(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.Ba&&a.Ib&&a.Ba.ab&&a.Ib&&a.Ib in a.Ba.ab&&a.Ba.ab[a.Ib]&&a.Ba!=b)throw Error("Unable to set parent component");a.Ba=b;us.m.lf.call(a,b)}h.getParent=function(){return this.Ba};
h.lf=function(a){if(this.Ba&&this.Ba!=a)throw Error("Method not supported");us.m.lf.call(this,a)};h.va=function(){this.X=this.g.createElement("div")};h.render=function(a){As(this,a)};function As(a,b,c){if(a.aa)throw Error("Component already rendered");a.X||a.va();b?b.insertBefore(a.X,c||null):a.g.g.body.appendChild(a.X);a.Ba&&!a.Ba.aa||a.R()}
function Bs(a,b){if(a.aa)throw Error("Component already rendered");if(b&&a.Ge(b)){a.ng=!0;var c=Mg(b);a.g&&a.g.g==c||(a.g=Kg(b));a.Xb(b);a.R()}else throw Error("Invalid element to decorate");}h.Ge=function(){return!0};h.Xb=function(a){this.X=a};h.R=function(){this.aa=!0;Cs(this,function(a){!a.aa&&a.o()&&a.R()})};h.rb=function(){Cs(this,function(a){a.aa&&a.rb()});this.p&&this.p.removeAll();this.aa=!1};
h.J=function(){this.aa&&this.rb();this.p&&(this.p.sa(),delete this.p);Cs(this,function(a){a.sa()});!this.ng&&this.X&&Wg(this.X);this.Ba=this.G=this.X=this.ab=this.Na=null;us.m.J.call(this)};h.na=function(a){this.G=a};h.Z=function(a,b){this.he(a,Ds(this),b)};
h.he=function(a,b,c){if(a.aa&&(c||!this.aa))throw Error("Component already rendered");if(0>b||b>Ds(this))throw Error("Child component index out of bounds");this.ab&&this.Na||(this.ab={},this.Na=[]);if(a.getParent()==this){var d=a.F();this.ab[d]=a;Wa(this.Na,a)}else oc(this.ab,a.F(),a);zs(a,this);ab(this.Na,b,0,a);a.aa&&this.aa&&a.getParent()==this?(c=this.wa(),c.insertBefore(a.o(),c.childNodes[b]||null)):c?(this.X||this.va(),b=Z(this,b+1),As(a,this.wa(),b?b.X:null)):this.aa&&!a.aa&&a.X&&a.X.parentNode&&
1==a.X.parentNode.nodeType&&a.R()};h.wa=function(){return this.X};function Es(a){null==a.Rd&&(a.Rd=vi(a.aa?a.X:a.g.g.body));return a.Rd}function Ds(a){return a.Na?a.Na.length:0}function Z(a,b){return a.Na?a.Na[b]||null:null}function Cs(a,b,c){a.Na&&Na(a.Na,b,c)}function Fs(a,b){return a.Na&&b?Ma(a.Na,b):-1};function Gs(a,b,c,d,e){if(!(H||Kb&&Wb("525")))return!0;if(Db&&e)return Hs(a);if(e&&!d)return!1;y(b)&&(b=Is(b));if(!c&&(17==b||18==b||Db&&91==b))return!1;if(Kb&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(H&&d&&b==a)return!1;switch(a){case 13:return!(H&&H&&9<=Yb);case 27:return!Kb}return Hs(a)}
function Hs(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||Kb&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Is(a){if(Jb)a=Js(a);else if(Db&&Kb)a:switch(a){case 93:a=91;break a}return a}
function Js(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Ks(a,b){L.call(this);a&&Ls(this,a,b)}E(Ks,L);h=Ks.prototype;h.tc=null;h.Ed=null;h.Ze=null;h.Fd=null;h.Xa=-1;h.Mb=-1;h.ke=!1;
var Ms={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ns={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Os=H||Kb&&Wb("525"),Ps=Db&&Jb;h=Ks.prototype;
h.Zg=function(a){Kb&&(17==this.Xa&&!a.ctrlKey||18==this.Xa&&!a.altKey||Db&&91==this.Xa&&!a.metaKey)&&(this.Mb=this.Xa=-1);-1==this.Xa&&(a.ctrlKey&&17!=a.g?this.Xa=17:a.altKey&&18!=a.g?this.Xa=18:a.metaKey&&91!=a.g&&(this.Xa=91));Os&&!Gs(a.g,this.Xa,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Mb=Is(a.g),Ps&&(this.ke=a.altKey))};h.$g=function(a){this.Mb=this.Xa=-1;this.ke=a.altKey};
h.handleEvent=function(a){var b=a.h,c,d,e=b.altKey;H&&"keypress"==a.type?c=this.Mb:Kb&&"keypress"==a.type?c=this.Mb:Ib?c=this.Mb:(c=b.keyCode||this.Mb,d=b.charCode||0,Ps&&(e=this.ke),Db&&63==d&&224==c&&(c=191));d=c=Is(c);var f=b.keyIdentifier;c?63232<=c&&c in Ms?d=Ms[c]:25==c&&a.shiftKey&&(d=9):f&&f in Ns&&(d=Ns[f]);this.Xa=d;a=new Qs(d,0,0,b);a.altKey=e;this.dispatchEvent(a)};h.o=function(){return this.tc};
function Ls(a,b,c){a.Fd&&Rs(a);a.tc=b;a.Ed=Cc(a.tc,"keypress",a,c);a.Ze=Cc(a.tc,"keydown",a.Zg,c,a);a.Fd=Cc(a.tc,"keyup",a.$g,c,a)}function Rs(a){a.Ed&&(Kc(a.Ed),Kc(a.Ze),Kc(a.Fd),a.Ed=null,a.Ze=null,a.Fd=null);a.tc=null;a.Xa=-1;a.Mb=-1}h.J=function(){Ks.m.J.call(this);Rs(this)};function Qs(a,b,c,d){cc.call(this,d);this.type="key";this.g=a}E(Qs,cc);var Ss;function Ts(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Us(a,b,c){w(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Ss||(Ss={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Ss,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function Vs(){}var Ws;da(Vs);h=Vs.prototype;h.Jb=function(){};h.W=function(a){var b=a.g.t("div",Xs(this,a).join(" "),a.ra());Ys(this,a,b);return b};h.Ca=function(a){return a};function Zs(a,b,c){if(a=a.o?a.o():a)if(H&&!Wb("7")){var d=$s(Dg(a),b);d.push(b);na(c?Eg:Fg,a).apply(null,d)}else c?Eg(a,b):Fg(a,b)}h.yd=function(){return!0};
h.xa=function(a,b){b.id&&xs(a,b.id);var c=this.Ca(b);c&&c.firstChild?at(a,c.firstChild.nextSibling?Za(c.childNodes):c.firstChild):a.Kb=null;var d=0,e=this.B(),f=this.B(),g=!1,k=!1,c=!1,l=Dg(b);Na(l,function(a){g||a!=e?k||a!=f?d|=this.Ae(a):k=!0:(g=!0,f==e&&(k=!0))},this);a.Lb=d;g||(l.push(e),f==e&&(k=!0));k||l.push(f);var m=a.te;m&&l.push.apply(l,m);if(H&&!Wb("7")){var n=$s(l);0<n.length&&(l.push.apply(l,n),c=!0)}if(!g||!k||m||c)b.className=l.join(" ");Ys(this,a,b);return b};
h.Uf=function(a){Es(a)&&this.Oe(a.o(),!0);a.isEnabled()&&this.vc(a,a.Ha)};function Ys(a,b,c){b.Ha||Us(c,"hidden",!b.Ha);b.isEnabled()||a.Ra(c,1,!b.isEnabled());b.pa&8&&a.Ra(c,8,bt(b,8));b.pa&16&&a.Ra(c,16,bt(b,16));b.pa&64&&a.Ra(c,64,bt(b,64))}h.zd=function(a,b){Bi(a,!b,!H&&!Ib)};h.Oe=function(a,b){Zs(a,this.B()+"-rtl",b)};h.Ne=function(a){var b;return a.pa&32&&(b=a.i.cc(a))?bh(b)&&ch(b):!1};
h.vc=function(a,b){var c;if(a.pa&32&&(c=a.i.cc(a))){if(!b&&bt(a,32)){try{c.blur()}catch(d){}bt(a,32)&&a.Ad(null)}(bh(c)&&ch(c))!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};h.T=function(a,b,c){var d=a.o();if(d){var e=this.Hc(b);e&&Zs(a,e,c);this.Ra(d,b,c)}};h.Ra=function(a,b,c){Ws||(Ws={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Ws[b])&&Us(a,b,c)};
h.uc=function(a,b){var c=this.Ca(a);if(c&&(Ug(c),b))if(x(b))Zg(c,b);else{var d=function(a){if(a){var b=Mg(c);c.appendChild(x(a)?b.createTextNode(a):a)}};u(b)?Na(b,d):!w(b)||"nodeType"in b?d(b):Na(Za(b),d)}};h.cc=function(a){return a.o()};h.B=function(){return"goog-control"};function Xs(a,b){var c=a.B(),d=[c],e=a.B();e!=c&&d.push(e);c=b.Lb;for(e=[];c;){var f=c&-c;e.push(a.Hc(f));c&=~f}d.push.apply(d,e);(c=b.te)&&d.push.apply(d,c);H&&!Wb("7")&&d.push.apply(d,$s(d));return d}
function $s(a,b){var c=[];b&&(a=a.concat([b]));Na([],function(d){!Ra(d,na(Ua,a))||b&&!Ua(d,b)||c.push(d.join("_"))});return c}h.Hc=function(a){this.g||ct(this);return this.g[a]};h.Ae=function(a){this.i||(this.g||ct(this),this.i=rc(this.g));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function ct(a){var b=a.B();a.g={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var dt=!!r.DOMTokenList,et=dt?function(a){return a.classList}:function(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]},ft=dt?function(a,b){return a.classList.contains(b)}:function(a,b){return Ua(et(a),b)},gt=dt?function(a,b){a.classList.add(b)}:function(a,b){ft(a,b)||(a.className+=0<a.className.length?" "+b:b)},ht=dt?function(a,b){Na(b,function(b){gt(a,b)})}:function(a,b){var c={};Na(et(a),function(a){c[a]=!0});Na(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?
" "+d:d},it=dt?function(a,b){a.classList.remove(b)}:function(a,b){ft(a,b)&&(a.className=Oa(et(a),function(a){return a!=b}).join(" "))};function jt(a,b){if(!ga(a))throw Error("Invalid component class "+a);if(!ga(b))throw Error("Invalid renderer class "+b);var c=ha(a);kt[c]=b}function lt(a,b){if(!a)throw Error("Invalid class name "+a);if(!ga(b))throw Error("Invalid decorator function "+b);mt[a]=b}var kt={},mt={};function $(a,b,c){us.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ha(b);if(d=kt[d])break;b=b.m?b.m.constructor:null}b=d?ga(d.Y)?d.Y():new d:null}this.i=b;this.Kb=t(a)?a:null}E($,us);h=$.prototype;h.Kb=null;h.Lb=0;h.pa=39;h.me=255;h.lc=0;h.Ha=!0;h.te=null;h.Te=!0;h.fd=!1;h.gf=null;function nt(a){a.aa&&!1!=a.Te&&ot(a,!1);a.Te=!1}h.va=function(){var a=this.i.W(this);this.X=a;var b=this.gf||this.i.Jb();b&&Ts(a,b);this.fd||this.i.zd(a,!1);this.Ha||(S(a,!1),a&&Us(a,"hidden",!0))};h.wa=function(){return this.i.Ca(this.o())};
h.Ge=function(a){return this.i.yd(a)};h.Xb=function(a){this.X=a=this.i.xa(this,a);var b=this.gf||this.i.Jb();b&&Ts(a,b);this.fd||this.i.zd(a,!1);this.Ha="none"!=a.style.display};h.R=function(){$.m.R.call(this);this.i.Uf(this);if(this.pa&-2&&(this.Te&&ot(this,!0),this.pa&32)){var a=this.i.cc(this);if(a){var b=this.j||(this.j=new Ks);Ls(b,a);ys(this).listen(b,"key",this.bb).listen(a,"focus",this.Ng).listen(a,"blur",this.Ad)}}};
function ot(a,b){var c=ys(a),d=a.o();b?(c.listen(d,"mouseover",a.Ve).listen(d,"mousedown",a.Pc).listen(d,"mouseup",a.ec).listen(d,"mouseout",a.Ue),a.Qc!=ca&&c.listen(d,"contextmenu",a.Qc),H&&c.listen(d,"dblclick",a.Vf)):(c.Fa(d,"mouseover",a.Ve).Fa(d,"mousedown",a.Pc).Fa(d,"mouseup",a.ec).Fa(d,"mouseout",a.Ue),a.Qc!=ca&&c.Fa(d,"contextmenu",a.Qc),H&&c.Fa(d,"dblclick",a.Vf))}h.rb=function(){$.m.rb.call(this);this.j&&Rs(this.j);this.Ha&&this.isEnabled()&&this.i.vc(this,!1)};
h.J=function(){$.m.J.call(this);this.j&&(this.j.sa(),delete this.j);delete this.i;this.te=this.Kb=null};h.ra=function(){return this.Kb};function at(a,b){a.Kb=b}h.sb=function(){var a=this.ra();if(!a)return"";if(!x(a))if(u(a))a=Pa(a,dh).join("");else{if(Cg&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];eh(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Cg||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""))}return ua(a)};
function pt(a){a.fd=!0;var b=a.o();b&&a.i.zd(b,!0)}h.Pe=function(a,b){if(b||this.Ha!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.o();c&&(S(c,a),c&&Us(c,"hidden",!a));this.isEnabled()&&this.i.vc(this,a);this.Ha=a;return!0}return!1};h.isEnabled=function(){return!bt(this,1)};h.setEnabled=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!qt(this,1,!a)||(a||(rt(this,!1),this.hb(!1)),this.Ha&&this.i.vc(this,a),this.T(1,!a))};
h.hb=function(a){qt(this,2,a)&&this.T(2,a)};function rt(a,b){qt(a,4,b)&&a.T(4,b)}h.Ac=function(a){qt(this,8,a)&&this.T(8,a)};h.oa=function(a){qt(this,64,a)&&this.T(64,a)};function bt(a,b){return!!(a.Lb&b)}h.T=function(a,b){this.pa&a&&b!=bt(this,a)&&(this.i.T(this,a,b),this.Lb=b?this.Lb|a:this.Lb&~a)};function st(a,b,c){if(a.aa&&bt(a,b)&&!c)throw Error("Component already rendered");!c&&bt(a,b)&&a.T(b,!1);a.pa=c?a.pa|b:a.pa&~b}function tt(a,b){return!!(a.me&b)&&!!(a.pa&b)}
function ut(a){a.me&=-256}function qt(a,b,c){return!!(a.pa&b)&&bt(a,b)!=c&&(!(a.lc&b)||a.dispatchEvent(ws(b,c)))&&!a.H}h.Ve=function(a){!vt(a,this.o())&&this.dispatchEvent("enter")&&this.isEnabled()&&tt(this,2)&&this.hb(!0)};h.Ue=function(a){!vt(a,this.o())&&this.dispatchEvent("leave")&&(tt(this,4)&&rt(this,!1),tt(this,2)&&this.hb(!1))};h.Qc=ca;function vt(a,b){return!!a.j&&Yg(b,a.j)}
h.Pc=function(a){this.isEnabled()&&(tt(this,2)&&this.hb(!0),!ec(a)||Kb&&Db&&a.ctrlKey||(tt(this,4)&&rt(this,!0),this.i.Ne(this)&&this.i.cc(this).focus()));this.fd||!ec(a)||Kb&&Db&&a.ctrlKey||a.preventDefault()};h.ec=function(a){this.isEnabled()&&(tt(this,2)&&this.hb(!0),bt(this,4)&&this.Pb(a)&&tt(this,4)&&rt(this,!1))};h.Vf=function(a){this.isEnabled()&&this.Pb(a)};
h.Pb=function(a){if(tt(this,16)){var b=!bt(this,16);qt(this,16,b)&&this.T(16,b)}tt(this,8)&&this.Ac(!0);tt(this,64)&&this.oa(!bt(this,64));b=new K("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.l=a.l);return this.dispatchEvent(b)};h.Ng=function(){tt(this,32)&&qt(this,32,!0)&&this.T(32,!0)};h.Ad=function(){tt(this,4)&&rt(this,!1);tt(this,32)&&qt(this,32,!1)&&this.T(32,!1)};
h.bb=function(a){return this.Ha&&this.isEnabled()&&this.wc(a)?(a.preventDefault(),a.Nc(),!0):!1};h.wc=function(a){return 13==a.g&&this.Pb(a)};jt($,Vs);lt("goog-control",function(){return new $(null)});function wt(){}E(wt,Vs);da(wt);h=wt.prototype;h.B=function(){return"goog-tab"};h.Jb=function(){return"tab"};h.W=function(a){var b=wt.m.W.call(this,a);(a=a.xb())&&this.Tb(b,a);return b};h.xa=function(a,b){b=wt.m.xa.call(this,a,b);var c=this.xb(b);c&&a.Sd(c);bt(a,8)&&(c=a.getParent())&&ga(c.Bc)&&(a.T(8,!1),c.Bc(a));return b};h.xb=function(a){return a.title||""};h.Tb=function(a,b){a&&(a.title=b||"")};function xt(a,b,c){$.call(this,a,b||wt.Y(),c);st(this,8,!0);this.lc|=9}E(xt,$);xt.prototype.xb=function(){return this.h};xt.prototype.Tb=function(a){this.i.Tb(this.o(),a);this.Sd(a)};xt.prototype.Sd=function(a){this.h=a};lt("goog-tab",function(){return new xt(null)});function yt(){}da(yt);h=yt.prototype;h.xd=function(){};function zt(a,b){a&&(a.tabIndex=b?0:-1)}h.Ie=function(a){return a.g.t("div",this.Je(a).join(" "))};h.He=function(a){return"DIV"==a.tagName};function At(a,b,c){c.id&&xs(b,c.id);var d=a.B(),e=!1,f=et(c);f&&Na(f,function(a){a==d?e=!0:a&&this.mf(b,a,d)},a);e||gt(c,d);Bt(a,b,c);return c}h.mf=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?Ct(a,Dt):b==c+"-vertical"&&Ct(a,Et)};
function Bt(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.Ic(d);f&&(f.X=d,b.isEnabled()||f.setEnabled(!1),b.Z(f),Bs(f,d))}else d.nodeValue&&""!=va(d.nodeValue)||c.removeChild(d);d=e}}h.Ic=function(a){a:{for(var b=et(a),c=0,d=b.length;c<d;c++)if(a=b[c]in mt?mt[b[c]]():null)break a;a=null}return a};h.Ke=function(a){a=a.o();Bi(a,!0,Jb);H&&(a.hideFocus=!0);var b=this.xd();b&&Ts(a,b)};h.B=function(){return"goog-container"};
h.Je=function(a){var b=this.B(),c=[b,a.Nb==Dt?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};h.Pf=function(){return Et};function Ft(a,b,c){us.call(this,c);this.kb=b||yt.Y();this.Nb=a||this.kb.Pf()}E(Ft,us);var Dt="horizontal",Et="vertical";h=Ft.prototype;h.$e=null;h.bc=null;h.kb=null;h.Nb=null;h.Oa=!0;h.ac=!0;h.qc=!0;h.yb=-1;h.ta=null;h.Db=!1;h.Wb=null;function Gt(a){return a.$e||a.o()}h.va=function(){this.X=this.kb.Ie(this)};h.wa=function(){return this.o()};h.Ge=function(a){return this.kb.He(a)};h.Xb=function(a){this.X=At(this.kb,this,a);"none"==a.style.display&&(this.Oa=!1)};
h.R=function(){Ft.m.R.call(this);Cs(this,function(a){a.aa&&Ht(this,a)},this);var a=this.o();this.kb.Ke(this);this.Oc(this.Oa,!0);ys(this).listen(this,"enter",this.Re).listen(this,"highlight",this.Kg).listen(this,"unhighlight",this.Mg).listen(this,"open",this.eh).listen(this,"close",this.Sg).listen(a,"mousedown",this.Lg).listen(Mg(a),"mouseup",this.Vg).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Rg);this.qc&&It(this,!0)};
function It(a,b){var c=ys(a),d=Gt(a);b?c.listen(d,"focus",a.Le).listen(d,"blur",a.Tf).listen(a.bc||(a.bc=new Ks(Gt(a))),"key",a.bb):c.Fa(d,"focus",a.Le).Fa(d,"blur",a.Tf).Fa(a.bc||(a.bc=new Ks(Gt(a))),"key",a.bb)}h.rb=function(){this.Sb(-1);this.ta&&this.ta.oa(!1);this.Db=!1;Ft.m.rb.call(this)};h.J=function(){Ft.m.J.call(this);this.bc&&(this.bc.sa(),this.bc=null);this.kb=this.ta=this.Wb=this.$e=null};h.Re=function(){return!0};
h.Kg=function(a){var b=Fs(this,a.target);if(-1<b&&b!=this.yb){var c=Jt(this);c&&c.hb(!1);this.yb=b;c=Jt(this);this.Db&&rt(c,!0);this.ta&&c!=this.ta&&(c.pa&64?c.oa(!0):this.ta.oa(!1))}b=this.o();null!=a.target.o()&&Us(b,"activedescendant",a.target.o().id)};h.Mg=function(a){a.target==Jt(this)&&(this.yb=-1);this.o().removeAttribute("aria-activedescendant")};h.eh=function(a){(a=a.target)&&a!=this.ta&&a.getParent()==this&&(this.ta&&this.ta.oa(!1),this.ta=a)};
h.Sg=function(a){a.target==this.ta&&(this.ta=null)};h.Lg=function(a){this.ac&&(this.Db=!0);var b=Gt(this);b&&bh(b)&&ch(b)?b.focus():a.preventDefault()};h.Vg=function(){this.Db=!1};h.Rg=function(a){var b;a:{b=a.target;if(this.Wb)for(var c=this.o();b&&b!==c;){var d=b.id;if(d in this.Wb){b=this.Wb[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Pc(a);break;case "mouseup":b.ec(a);break;case "mouseover":b.Ve(a);break;case "mouseout":b.Ue(a);break;case "contextmenu":b.Qc(a)}};
h.Le=function(){};h.Tf=function(){this.Sb(-1);this.Db=!1;this.ta&&this.ta.oa(!1)};h.bb=function(a){return this.isEnabled()&&this.Oa&&(0!=Ds(this)||this.$e)&&this.Me(a)?(a.preventDefault(),a.Nc(),!0):!1};
h.Me=function(a){var b=Jt(this);if(b&&"function"==typeof b.bb&&b.bb(a)||this.ta&&this.ta!=b&&"function"==typeof this.ta.bb&&this.ta.bb(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.g){case 27:if(this.qc)Gt(this).blur();else return!1;break;case 36:Kt(this);break;case 35:Lt(this);break;case 38:if(this.Nb==Et)Mt(this);else return!1;break;case 37:if(this.Nb==Dt)Es(this)?Nt(this):Mt(this);else return!1;break;case 40:if(this.Nb==Et)Nt(this);else return!1;break;case 39:if(this.Nb==
Dt)Es(this)?Mt(this):Nt(this);else return!1;break;default:return!1}return!0};function Ht(a,b){var c=b.o(),c=c.id||(c.id=b.F());a.Wb||(a.Wb={});a.Wb[c]=b}h.Z=function(a,b){Ft.m.Z.call(this,a,b)};h.he=function(a,b,c){a.lc|=2;a.lc|=64;st(a,32,!1);nt(a);Ft.m.he.call(this,a,b,c);a.aa&&this.aa&&Ht(this,a);b<=this.yb&&this.yb++};function Ct(a,b){if(a.o())throw Error("Component already rendered");a.Nb=b}
h.Oc=function(a,b){if(b||this.Oa!=a&&this.dispatchEvent(a?"show":"hide")){this.Oa=a;var c=this.o();c&&(S(c,a),this.qc&&zt(Gt(this),this.ac&&this.Oa),b||this.dispatchEvent(this.Oa?"aftershow":"afterhide"));return!0}return!1};h.isEnabled=function(){return this.ac};
h.setEnabled=function(a){this.ac!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.ac=!0,Cs(this,function(a){a.og?delete a.og:a.setEnabled(!0)})):(Cs(this,function(a){a.isEnabled()?a.setEnabled(!1):a.og=!0}),this.Db=this.ac=!1),this.qc&&zt(Gt(this),a&&this.Oa))};function Ot(a,b){b!=a.qc&&a.aa&&It(a,b);a.qc=b;a.ac&&a.Oa&&zt(Gt(a),b)}h.Sb=function(a){(a=Z(this,a))?a.hb(!0):-1<this.yb&&Jt(this).hb(!1)};h.hb=function(a){this.Sb(Fs(this,a))};function Jt(a){return Z(a,a.yb)}
function Kt(a){Pt(a,function(a,c){return(a+1)%c},Ds(a)-1)}function Lt(a){Pt(a,function(a,c){a--;return 0>a?c-1:a},0)}function Nt(a){Pt(a,function(a,c){return(a+1)%c},a.yb)}function Mt(a){Pt(a,function(a,c){a--;return 0>a?c-1:a},a.yb)}function Pt(a,b,c){c=0>c?Fs(a,a.ta):c;var d=Ds(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=Z(a,c);if(f&&a.Jf(f)){a.kf(c);break}e++;c=b.call(a,c,d)}}h.Jf=function(a){return a.Ha&&a.isEnabled()&&!!(a.pa&2)};h.kf=function(a){this.Sb(a)};function Qt(){}E(Qt,yt);da(Qt);Qt.prototype.B=function(){return"goog-tab-bar"};Qt.prototype.xd=function(){return"tablist"};Qt.prototype.mf=function(a,b,c){this.h||(this.g||Rt(this),this.h=rc(this.g));var d=this.h[b];d?(Ct(a,d==St||d==Tt?Et:Dt),a.i=d):Qt.m.mf.call(this,a,b,c)};Qt.prototype.Je=function(a){var b=Qt.m.Je.call(this,a);this.g||Rt(this);b.push(this.g[a.i]);return b};function Rt(a){var b=a.B();a.g=uc(Ut,b+"-top",Vt,b+"-bottom",St,b+"-start",Tt,b+"-end")};function Wt(a,b,c){a=a||Ut;Ct(this,a==St||a==Tt?Et:Dt);this.i=a;Ft.call(this,this.Nb,b||Qt.Y(),c);Xt(this)}E(Wt,Ft);var Ut="top",Vt="bottom",St="start",Tt="end";h=Wt.prototype;h.gb=null;h.R=function(){Wt.m.R.call(this);Xt(this)};h.J=function(){Wt.m.J.call(this);this.gb=null};h.kf=function(a){Wt.m.kf.call(this,a);this.Bc(Z(this,a))};h.Bc=function(a){a?a.Ac(!0):this.gb&&this.gb.Ac(!1)};
function Yt(a,b){if(b&&b==a.gb){for(var c=Fs(a,b),d=c-1;b=Z(a,d);d--)if(b.Ha&&b.isEnabled()){a.Bc(b);return}for(c+=1;b=Z(a,c);c++)if(b.Ha&&b.isEnabled()){a.Bc(b);return}a.Bc(null)}}h.ih=function(a){this.gb&&this.gb!=a.target&&this.gb.Ac(!1);this.gb=a.target};h.jh=function(a){a.target==this.gb&&(this.gb=null)};h.gh=function(a){Yt(this,a.target)};h.hh=function(a){Yt(this,a.target)};h.Le=function(){Jt(this)||this.hb(this.gb||Z(this,0))};
function Xt(a){ys(a).listen(a,"select",a.ih).listen(a,"unselect",a.jh).listen(a,"disable",a.gh).listen(a,"hide",a.hh)}lt("goog-tab-bar",function(){return new Wt});function Zt(a,b,c){this.g=a;this.i=b;this.h=c||null}
function $t(a,b){var c=[];a.h&&c.push({$t:a.h,primary:"true"});for(var d=new Dr({id:{$t:"http://www.google.com/m8/feeds/contacts/kts%40gmail.com/base/0"},gd$email:[{address:a.g,primary:"true"}],gd$name:{gd$fullName:{$t:a.i}},gd$phoneNumber:c}),c=[],e=0;e<b.length;e++){for(var f=c,g=e,k=d,l=b[e],m=0,n=Er(k),p=Er(l),q=0;q<n.length;q++)for(var s=n[q],v=0;v<p.length;v++){var z=p[v];s&&s==z&&(m+=1)}n=0;s=k.data.gd$name;v=l.data.gd$name;if(s&&v)for(z=["gd$familyName","gd$givenName","gd$additionalName",
"gd$fullName"],p=[0.06,0.06,0.06,0.12],q=0;4>q;q++){var D=s[z[q]],G=v[z[q]];D&&G==D&&(n+=p[q])}q=0;p=k.ad();s=l.ad();p&&p==s&&(q+=0.2);v=0;k=Fr(k);l=Fr(l);s=k.length;for(p=[];s--;){v=k[s];z=l.length;for(p[s]=0;z--;)D=l[z],v.$t&&D.$t&&(D=0.7*wr(v,D),p[s]=Math.max(p[s],D));v=Sh(p).value}f[g]=m+n+q+v}d=[];for(e=0;e<b.length;e++)f=cb(d,fb,c[e]),0>f?(ab(d,-(f+1),0,c[e]),g=b.splice(e,1),ab(b,-(f+1),0,g[0])):ab(d,f,0,c[e])}Zt.prototype.toString=function(){return"ContactModel:"+this.g};function au(){}E(au,Vs);au.prototype.logger=R("ydn.crm.inj.sugar.FeedPanelRenderer");au.prototype.B=function(){return"feed-panel"};au.prototype.W=function(a){var b=au.m.W.call(this,a);a=a.g.t("div","feed","Feed panel");b.appendChild(a);return b};au.prototype.refresh=function(){};function bu(a,b){$.call(this,null,null,a);this.na(b)}E(bu,$);bu.prototype.refresh=function(){var a=this.G,b=this.o();this.i.refresh(b,a)};jt(bu,au);function cu(a,b){var c=a.type;if(t(c))switch(c.toLowerCase()){case "checkbox":case "radio":a.checked=b?"checked":null;break;case "select-one":a.selectedIndex=-1;if(x(b))for(var d=0;c=a.options[d];d++)if(c.value==b){c.selected=!0;break}break;case "select-multiple":c=b;x(c)&&(c=[c]);for(var e=0;d=a.options[e];e++)if(d.selected=!1,c)for(var f,g=0;f=c[g];g++)d.value==f&&(d.selected=!0);break;default:a.value=null!=b?b:""}};function du(){}E(du,Vs);da(du);du.prototype.B=function(){return"field"};function eu(a){var b=fu(a.parent.S).module_fields[a.g];a="ydnf-"+(a.parent.S.qa()+"-"+a.g);if("enum"==b.type&&b.options&&!document.getElementById(a)){var c=document.createElement("datalist");c.id=a;for(var d in b.options)d&&(b=document.createElement("option"),b.setAttribute("value",d),c.appendChild(b));document.body.appendChild(c)}return a}
du.prototype.W=function(a){var b=du.m.W.call(this,a);a.X=b;var c=a.G;a=a.g;var d,e,f=gu(c);d=fu(c.parent.S).module_fields[c.g].type||"varchar";"bool"==d?(d=a.t("input",{"class":"value",type:"checkbox",disabled:"1"}),e=a.t("span","name")):"enum"==d?(d=a.t("input",{"class":"value enum",type:"text",disabled:"1"}),d.setAttribute("list",eu(c))):(d=a.t("label","value"),e=a.t("sup","name"));b.classList.add(this.B());b.setAttribute("name",c.g);b.appendChild(d);e&&(e.textContent=f,b.appendChild(e));return b};
du.prototype.refresh=function(a,b){S(a,!!b);if(b){var c=hu(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":cu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function iu(a,b,c){$.call(this,null,b,c);nt(this);pt(this);ut(this);st(this,32,!1);st(this,8,!1);this.na(a)}E(iu,$);jt(iu,du);iu.prototype.refresh=function(){this.i.refresh(this.o(),this.G)};jt(iu,du);function ju(){}E(ju,Vs);da(ju);ju.prototype.B=function(){return"record-group"};
ju.prototype.W=function(a){var b=ju.m.W.call(this,a),c=a.g,d=c.t("div"),e=c.t("div","content");b.appendChild(d);b.appendChild(e);a.X=b;b.setAttribute("name",a.G.Va);for(var d=a.G,e=ku(d),f=du.Y(),g=0;g<e.length;g++){var k=lu(d,e[g]),k=new iu(k,f,c);a.Z(k,!0)}a=d.S;c=a.parent.n||null;a=A(c)?nc(c,["modules",a.qa()]):null;((a=A(a)?nc(a,["groups",d.Va]):null)?a.normallyHide:/address/i.test(d.Va)?0:!(0<=["email","name","phone"].indexOf(d.Va)))&&b.classList.add("normally-hide");return b};function mu(a,b){this.parent=a;this.g=b}function hu(a){var b=a.parent.ka();return b?b.value(a.g):null}mu.prototype.Jc=function(){return hu(this)};function gu(a){a=fu(a.parent.S).module_fields[a.g];return x(a.label)?a.label.replace(/:$/,""):a.label}mu.prototype.toString=function(){return this.parent+";Field:"+this.g};function nu(a,b){this.S=a;this.Va=b||"";this.g={}}nu.prototype.M=function(){return this.S.M()};nu.prototype.ka=function(){return this.S.ka()};function ku(a){var b=fu(a.S),c=[],d;for(d in b.module_fields){var e=b.module_fields[d];a.Va&&e.group==a.Va?c.push(d):a.Va||e.group||c.push(d)}return c}function ou(a,b){var c=fu(a.S),d;for(d in c.module_fields)if(d==b)return!0;return!1}function lu(a,b){a.g[b]||(a.g[b]=new mu(a,b));return a.g[b]}
function pu(a){a=a.Va.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};function qu(a,b,c){$.call(this,null,b,c);nt(this);pt(this);ut(this);st(this,32,!1);st(this,8,!1);this.na(a)}E(qu,$);qu.prototype.wa=function(){return Ng("content",this.o())};qu.prototype.refresh=function(){for(var a=0;a<Ds(this);a++)Z(this,a).refresh()};jt(qu,ju);function ru(){}E(ru,du);da(ru);ru.prototype.W=function(a){var b=a.g.t("span",Xs(this,a).join(" "),a.ra());Ys(this,a,b);a.X=b;var c=a.G,d=a.g;a=gu(c);var e=fu(c.parent.S).module_fields[c.g].type||"varchar";"bool"==e?d=d.t("input",{"class":"value",type:"checkbox",disabled:"1"}):"enum"==e?(d=d.t("input",{"class":"value enum",type:"text",disabled:"1"}),d.setAttribute("list",eu(c))):d=d.t("label","value");d.setAttribute("title",a);b.classList.add(this.B());b.setAttribute("name",c.g);b.appendChild(d);return b};
ru.prototype.refresh=function(a,b){S(a,!!b);if(b){var c=hu(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":cu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function su(){}E(su,Vs);da(su);su.prototype.B=function(){return"address"};su.prototype.W=function(a){var b=su.m.W.call(this,a),c=a.G,d=a.g;b.setAttribute("name",c.Va);b.classList.add("record-group");var e=d.t("details"),f=d.t("summary");f.textContent=pu(c);b.appendChild(f);var g=d.t("div","content");e.appendChild(f);e.appendChild(g);b.appendChild(e);a.X=b;e=ku(c);f=ru.Y();for(g=0;g<e.length;g++){var k=lu(c,e[g]),k=new iu(k,f,d);a.Z(k,!0)}return b};function tu(a,b){var c=su.Y();qu.call(this,a,c,b)}E(tu,qu);tu.prototype.wa=function(){return this.o().querySelector("summary").nextElementSibling};tu.prototype.refresh=function(){for(var a=0;a<Ds(this);a++)Z(this,a).refresh()};jt(tu,su);function uu(){}E(uu,Vs);da(uu);uu.prototype.B=function(){return"email"};uu.prototype.W=function(a){var b=uu.m.W.call(this,a),c=a.G,d=a.g;b.setAttribute("name",c.Va);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",pu(c));b.appendChild(e);c=d.t("div","content");b.appendChild(e);b.appendChild(c);return a.X=b};
function vu(a,b,c,d,e,f){b?(a.textContent=c||b,a.setAttribute("name",b),b="",d&&(b+=" primary"),e&&(b+=" optout"),f&&(b+=" deleted"),a.className=b):(a.textContent="",a.className="empty")}
uu.prototype.refresh=function(a){var b=a.o(),c=a.G;S(b,!!c);if(c){var b=a.g,d=lu(c,"email"),e=d?d.Jc():null,d=u(e);a=a.wa();if(d){for(d=0;d<e.length;d++){var c=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));c&&vu(f,c.email_address,void 0,"1"==c.primary_address?!0:!1,"1"==c.opt_out?!0:!1,"1"==c.deleted?!0:!1)}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}else{e=ku(c);for(d=0;d<e.length;d++){var g=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));(g=lu(c,
g))&&vu(f,hu(g))}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}}};function wu(a,b){var c=uu.Y();qu.call(this,a,c,b)}E(wu,qu);wu.prototype.wa=function(){return Ng("content",this.o())};wu.prototype.refresh=function(){this.i.refresh(this)};jt(wu,uu);function xu(){}E(xu,Vs);da(xu);xu.prototype.B=function(){return"list"};xu.prototype.W=function(a){var b=xu.m.W.call(this,a),c=a.G,d=a.g;b.setAttribute("name",c.Va);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",pu(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.X=b;for(var e=ku(c),f=ru.Y(),g=0;g<e.length;g++){var k=lu(c,e[g]),k=new iu(k,f,d);a.Z(k,!0)}return b};function yu(a,b){var c=xu.Y();qu.call(this,a,c,b)}E(yu,qu);yu.prototype.wa=function(){return Ng("content",this.o())};yu.prototype.refresh=function(){for(var a=0;a<Ds(this);a++)Z(this,a).refresh()};jt(yu,xu);function zu(){}E(zu,Vs);da(zu);zu.prototype.B=function(){return"name"};
zu.prototype.W=function(a){var b=zu.m.W.call(this,a),c=a.G,d=a.g;b.setAttribute("name",c.Va);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",pu(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.X=b;ku(c);e=ru.Y();ou(c,"salutation")&&(f=lu(c,"salutation"),f=new iu(f,e,d),a.Z(f,!0));ou(c,"first_name")&&a.Z(new iu(lu(c,"first_name"),e,d),!0);ou(c,"last_name")&&a.Z(new iu(lu(c,"last_name"),e,d),!0);return b};function Au(a,b){var c=zu.Y();qu.call(this,a,c,b)}E(Au,qu);Au.prototype.wa=function(){return Ng("content",this.o())};Au.prototype.refresh=function(){for(var a=0;a<Ds(this);a++)Z(this,a).refresh()};jt(Au,zu);function Bu(a,b){L.call(this);this.parent=a;this.g=b;this.h={}}E(Bu,L);h=Bu.prototype;h.logger=R("ydn.crm.sugar.model.Record");h.M=function(){return this.parent.M()};h.qa=function(){return this.g.S};function fu(a){return a.parent.s[a.qa()]}h.J=function(){Bu.m.J.call(this);this.h=null};h.ka=function(){return this.g};h.Eb=function(a){((a=a?a.g?a:null:null)||this.g)&&a!==this.g&&(this.g=a,this.dispatchEvent(new Cu(this.g?this.g.S:null,0,this)))};
h.toString=function(){return"ydn.crm.sugar.model.Record:"+this.g};function Du(a,b){Bu.call(this,a,new Kq(a.M(),b));this.module_name=b}E(Du,Bu);Du.prototype.qa=function(){return this.module_name};Du.prototype.Eb=function(a){if(a&&a.S!=this.module_name)throw Error("Module name must be "+this.module_name+" but found "+a.S);Du.m.Eb.call(this,a)};Du.prototype.toString=function(){return"ydn.crm.sugar.model.Module:"+this.module_name+(this.g?":"+this.g:"")};function Eu(a,b){Du.call(this,a,b);this.Wa=new hf(this);var c=a.i;c&&Fu(this,c);this.Wa.listen(this.getParent(),Gu,this.Tg)}E(Eu,Du);h=Eu.prototype;h.logger=R("ydn.crm.sugar.model.GDataRecord");h.getParent=function(){return this.parent};function Hu(a){return Iu(a.getParent(),a.qa()).pb}h.Tg=function(a){Fu(this,a.pb)};
function Fu(a,b){a.Eb(null);if(b){var c=b.g;if(c){var d=[{store:a.qa(),index:"ydn$emails",key:c}];Ju(a.parent).send("list",d).C(function(a){var b=a[0],g=b.result?b.result.length:0;P(this.logger,"query "+JSON.stringify(d)+" returns "+g+" results ");window.console.log(this+" receiving sugarcrm "+g+" query result for "+c,a);b.result[0]&&this.Eb(new Kq(this.M(),this.qa(),b.result[0]))},a)}}}
function Ku(a){a.ka();new Tc;var b=Iu(a.getParent(),null).pb,b={module:a.qa(),kind:b.qf(),"gdata-id":b.F()};P(a.logger,"sending import-gdata "+JSON.stringify(b));return Ju(a.parent).send("import-gdata",b).C(function(a){window.console.log(a);a=new Kq(this.M(),this.qa(),a);P(this.logger,a+" created.");this.Eb(a)},a)}
function Lu(a){a.ka();new Tc;var b=Mu(a.getParent()),c=b.i,d={email1:b.g,full_name:c};c&&0<c.length&&(c=c.split(/\s/),c[0]&&(d.first_name=c[0]),c[1]&&(d.last_name=c[c.length-1]));(b=b.h)&&(d.phone_work=b);d={module:a.qa(),record:d};P(a.logger,"sending put-record "+JSON.stringify(d));return Ju(a.parent).send("put-record",d).C(function(a){window.console.log(a);a=new Kq(this.M(),this.qa(),a);P(this.logger,a+" created.");this.Eb(a)},a)}
function Nu(a){var b=a.ka();if(!b)return tb("no Record to link.");b.F();window.console.log(b);var c=Hu(a),c=Iu(a.getParent(),null).pb;if(!c)return tb("Not contact data to link.");b=new Ar("sugarcrm",a.M(),a.qa(),b.F(),+new Date(c.data.updated.$t));c={kind:c.qf(),"gdata-id":c.F(),"external-id":{label:b.S+"#"+b.i+"-"+b.h,value:b.V()}};return Ju(a.parent).send("link",c).C(function(a){window.console.log("link",a);a=new Dr(a);a:{for(var b=this.getParent(),c=this.qa(),g=0;g<b.g.length;g++)if(b.g[g].F()==
a.F()){b.g[g]=a;b.dispatchEvent(new Ou(c,0,0,b));break a}b.g.push(a);b.dispatchEvent(new Ou(c,0,0,b))}},a)}h.save=function(){var a=this.ka();window.console.log(a);var b=Ju(this.parent).send("put-record",a);b.C(function(b){window.console.log(b);a.g=b},this);return b};h.J=function(){Eu.m.J.call(this);this.Wa.sa();this.g=this.Wa=null};h.toString=function(){var a="";this.g&&(a+=":"+this.g);var b=Hu(this);b&&(a+=":"+b);return"RecordModel:"+this.qa()+a};var Gu="context-data-change";function Pu(a,b){K.call(this,a,b)}E(Pu,K);function Qu(a,b){K.call(this,Gu,b);this.pb=a}E(Qu,Pu);function Cu(a,b,c){K.call(this,"record-change",c);this.S=a}E(Cu,Pu);function Ou(a,b,c,d){K.call(this,"gdata-change",d);this.module_name=a}E(Ou,Pu);function Su(a,b){L.call(this);this.h=a;this.s=b;this.info={};this.n=this.l=null;this.Wa=new hf(this)}E(Su,L);h=Su.prototype;h.isLogin=function(){return!!this.h.isLogin};function Ju(a){return gd("sugarcrm",a.M())}h.M=function(){return this.h.domain};function Tu(a,b,c){var d={};d.domain=a.M();d.baseUrl=a.h.baseUrl||null;d.Rh=b;d.password=c;return a.send("login",d).C(function(a){this.h=a},a)}h.send=function(a,b){return gd("sugarcrm",this.M()).send(a,b)};
h.mb=function(){this.l||(this.l=this.send("server-info"),this.l.C(function(a){if(a){var b=a.info;b&&(this.info=b);if(a=a.about)this.h=a}else this.l=null},this));return this.l};function Uu(a,b,c,d){b={store:b};c&&(b.index=c);d&&(d instanceof T?b.range=d.toJSON():b.key=d);b.prefix=!0;return Ju(a).send("list",[b])}function Vu(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return Ju(a).send("search",[c])}
h.J=function(){Su.m.J.call(this);this.n=this.info=null;this.Wa.sa();this.Wa=null};h.toString=function(){return"ydn.crm.sugar.model.Sugar:"+this.M()};function Wu(a,b){Su.call(this,a,b);this.j={};this.g=this.i=null}E(Wu,Su);function Iu(a,b){for(var c=a.g?a.g.length:0,d=0;d<c;d++){var e=a.g[d],f=er(e,a.M(),b);if(b&&f)return{module_name:b,pb:e};if(!b&&!f)return{module_name:null,pb:e}}return{module_name:b,pb:null}}
function Xu(a,b){a.i=b;a.g=null;a.dispatchEvent(new Qu(b,a));a.i&&a.i.g&&gd().send("gdata-list-contact-by-email",a.i.g).C(function(a){this.g=a.map(function(a){return new Dr(a)});$t(this.i,this.g);0<this.g.length&&this.dispatchEvent(new Ou(null,0,0,this))},a)}function Mu(a){return a.i}Wu.prototype.p=function(a){this.dispatchEvent(a)};Wu.prototype.J=function(){Wu.m.J.call(this);for(var a in this.j)this.j[a].sa();this.g=this.i=this.j=null};
Wu.prototype.toString=function(){return"ydn.crm.sugar.model.GDataSugar:"+this.M()};function Yu(){}E(Yu,Vs);da(Yu);Yu.prototype.B=function(){return"record-panel"};
Yu.prototype.W=function(a){var b=Yu.m.W.call(this,a),c=a.g,d=c.t("div","record-header"),e=c.t("div","record-content");b.appendChild(d);b.appendChild(e);a.X=b;e=c.t("a",{name:"detail"},"detail");e.href="#";d.appendChild(e);var d=a.G,e=[],f=fu(d),g;for(g in f.module_fields){var k=f.module_fields[g].group;-1==e.indexOf(k)&&e.push(k)}g=ju.Y();for(f=0;f<e.length;f++){var k=e[f],l;l=d;var m=k;l.h[m]||(l.h[m]=new nu(l,m));l=l.h[m];k=/address/i.test(k)?new tu(l,c):"email"==k?new wu(l,c):"phone"==k?new yu(l,
c):"name"==k?new Au(l,c):new qu(l,g,c);a.Z(k,!0)}return b};function Zu(a){return a.querySelector("a[name=detail]")};function $u(a,b,c){b=b||Yu.Y();$.call(this,null,b,c);nt(this);pt(this);ut(this);this.na(a)}E($u,$);h=$u.prototype;h.logger=R("ydn.crm.inj.sugar.module.Record");h.wa=function(){return Ng("record-content",this.o())};h.R=function(){$u.m.R.call(this);var a=ys(this),b=this.G;b&&a.listen(b,"record-change",this.refresh);a.listen(Zu(this.o()),"click",this.Ah,!1)};
h.Ah=function(a){a.preventDefault();var b=this.o();a=Ng("record-header",b);b=Ng("record-content",b);a=Zu(a);b.classList.contains("detail")?(a.textContent="detail",b.classList.remove("detail")):(a.textContent="less",b.classList.add("detail"))};
h.refresh=function(a){var b=this.G,c=this.o();if(b.ka())for(S(c,!0),a&&"record-change"==a.type&&(a=this.o(),b=Ng("record-header",a),Ng("record-content",a),a=Zu(b),a.textContent="detail",S(a,!0)),a=0;a<Ds(this);a++)b=Z(this,a),b instanceof qu&&b.refresh();else S(c,!1)};jt($u,Yu);function av(){}E(av,Vs);av.prototype.logger=R("ydn.crm.inj.sugar.module.GDataPanelRenderer");av.prototype.B=function(){return"record-panel"};
av.prototype.W=function(a){var b=av.m.W.call(this,a),c=a.G,d=c.qa(),e=a.g,f=e.t("div","record-root");b.appendChild(f);var g=e.t("div","record-header"),k=e.t("div","record-content");f.appendChild(g);f.appendChild(k);a.X=f;f.classList.add(d);f=e.t("span",{"class":"icon"},d.substr(0,2));k=e.t("a",{href:"#","class":"title"});k.target=c.M();var l=e.t("a",{href:"#link","class":"link"},"link"),m=e.t("span","synced");S(l,!1);S(m,!1);f=e.t("div","header",[f,k,l,m]);d=e.t("a",{"class":"import",href:"#import"},
"Add to "+d);d.style.zIndex=1E3;d=e.t("div",{"class":"import"},d);g.appendChild(d);g.appendChild(f);c=new $u(c,null,e);a.Z(c,!0);return b};
av.prototype.refresh=function(a,b){var c=a.querySelector(".import"),d=a.querySelector(".header"),e=a.querySelector(".title"),f=c.nextElementSibling,c=c.querySelector("a"),g=a.querySelector("a.link"),f=f.querySelector(".synced");b.nf||b.Xf?S(a,!0):S(a,!1);S(d,!!b.title);e.textContent=b.title;b.nf?e.href=b.nf:e.removeAttribute("href");c.textContent=b.Xf;c.setAttribute("title",b.Yf);(g.textContent=b.af)?(g.setAttribute("title",b.Yf),g.href="#"+b.af):g.removeAttribute("href");S(f,b.nh)};function bv(){L.call(this);this.h=this.g=null}E(bv,L);bv.prototype.J=function(){this.g&&(this.g.sa(),this.h=this.g=null)};function cv(a,b){a.h=b;a.g=new hf(a);a.g.listen(b,"click",a.i,!0)}bv.prototype.o=function(){return this.h};bv.prototype.i=function(a){a.preventDefault();var b=this.o(),c=this.o();(c.classList.contains("error")?dv:c.href?"n":"v")==dv?(b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):this.dispatchEvent(a)};
var dv="e";function ev(a,b){var c=a.o();c.classList.remove("error");c.removeAttribute("href");b?(c.textContent=b,S(c,!0)):S(c,!1);c.removeAttribute("title")}function fv(a,b,c){a=a.o();a.classList.add("error");a.href="#error";a.textContent="error";a.setAttribute("title","Click to report error"+(c?" for "+c:""));b&&gd().send("log-bug",b)};function gv(a,b){$.call(this,null,null,a);this.na(b);this.h=new bv;this.l=new bv}E(gv,$);h=gv.prototype;h.logger=R("ydn.crm.inj.sugar.module.GDataPanel");h.wa=function(){return Ng("record-content",this.o())};
h.R=function(){gv.m.R.call(this);var a=this.o();cv(this.h,Og(document,"A","import",a)[0]);cv(this.l,Og(document,"A","link",a)[0]);ys(this).listen(this.h,"click",this.Yg,!1);ys(this).listen(this.l,"click",this.ah,!1);a=this.G;ys(this).listen(a,["record-change"],this.refresh);ys(this).listen(a.parent,["gdata-change"],this.refresh)};h.refresh=function(){var a=this.G,b=Ng("record-header",this.o());this.i.refresh(b,hv(this));b=this.wa();S(b,!!a.ka())};
function hv(a){var b=a.G,c=(a=Hu(b))?null:Iu(b.getParent(),null).pb,d=Mu(b.getParent()),e=b.ka(),f=b.qa(),g="",k=null,l=!1,m="",n="",p="",q="";d&&(m="Add to "+f,n="Add current contact "+d.g+" to SugarCRM "+f,e?(g=Lq(e),k=kq(e.domain,e.S,e.F()),n=m="",p="export",q="Export this SugarCRM "+f+" to Gmail My Contacts address book",a&&(c=Hu(b),b.g&&c?(er(c,b.M(),b.qa()),b=!0):b=!1,b?(l=!0,q=p=""):(p="link",q="Link Gmail contact "+a.id.match(/\w+$/)[0]+" with this SugarCRM "+f+" "+e.F()))):c&&(m+=" and sync",
n+=" and then synchronize between the two records.",q=p=""));return{title:g,nf:k,Xf:m,Yf:n,nh:l,af:p,Qh:q}}h.ah=function(){var a=this.G;ev(this.l,"Linking...");Nu(a).u(function(){ev(this.l,"Done.");this.dispatchEvent(new K("record-change"))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?wh(a):a;var c;c=this.o();c=fh(c);fv(this.l,{"class":"RecordHeader",method:"handleLinkClick",context:"link",html:c?c.outerHTML:"",error:a},a)},this)};
h.Yg=function(){var a=this.G;ev(this.h,"Adding... to "+a.qa());var b;Iu(a.getParent(),null).pb?b=Ku(a).C(function(){ev(this.h,"Linking GData and SugarCRM...");return Nu(a)},this):(b=Lu(a),b=b.C(function(){return Nu(a)},this));b.u(function(){ev(this.h,null);this.dispatchEvent(new K("change",this))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?wh(a):a;var b;b=this.o();b=fh(b);fv(this.h,{"class":"RecordHeader",method:"handleImportClick",context:"link",html:b?b.outerHTML:"",error:a},a)},
this)};jt(gv,av);function iv(){}E(iv,yt);da(iv);iv.prototype.logger=R("ydn.crm.inj.sugar.FeedBodyRenderer");iv.prototype.B=function(){return"feed-panel"};
iv.prototype.Ie=function(a){var b=iv.m.Ie.call(this,a),c=a.g,d=c.t("div","feed-header"),e=c.t("div","feed-body");b.appendChild(d);b.appendChild(e);a.X=b;c=c.t("div","feed-title");d.appendChild(c);for(d=0;d<jq.length;d++){a:{for(var c=a,e=jq[d],f=0;f<c.h.length;f++){var g=c.h[f];if(g.G.qa()==e){Xa(c.h,f);c=g;break a}}f=c.G;f.j[e]||(f.j[e]=new Eu(f,e),f.Wa.listen(f.j[e],"record-change",f.p));c=new gv(c.g,f.j[e])}a.Z(c,!0)}return b};iv.prototype.refresh=function(a,b){S(a,!!b.i)};function jv(a,b){var c=iv.Y();Ft.call(this,Et,c,a);this.na(b);this.h=[]}E(jv,Ft);jv.prototype.wa=function(){return Ng("feed-body",this.o())};jv.prototype.R=function(){jv.m.R.call(this);ys(this).listen(this.G,Gu,this.refresh)};jv.prototype.refresh=function(a){var b=this.G,c=this.o();this.kb.refresh(c,b);if(a.type==Gu)for(b=Ds(this)-1;0<=b;b--)Z(this,b).refresh(a)};jt(jv,iv);function kv(){}E(kv,Vs);da(kv);kv.prototype.B=function(){return"goog-menuheader"};function lv(a,b,c){$.call(this,a,c||kv.Y(),b);st(this,1,!1);st(this,2,!1);st(this,4,!1);st(this,32,!1);this.Lb=1}E(lv,$);lt("goog-menuheader",function(){return new lv(null)});function mv(){this.h=[]}E(mv,Vs);da(mv);function nv(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.B()+"-highlight";break;case 1:c=a.B()+"-checkbox";break;case 2:c=a.B()+"-content"}a.h[b]=c}return c}h=mv.prototype;h.Jb=function(){return"menuitem"};h.W=function(a){var b=a.g.t("div",Xs(this,a).join(" "),ov(this,a.ra(),a.g));pv(this,a,b,!!(a.pa&8)||!!(a.pa&16));Ys(this,a,b);return b};h.Ca=function(a){return a&&a.firstChild};
h.xa=function(a,b){var c=Xg(b),d=nv(this,2);c&&ft(c,d)||b.appendChild(ov(this,b.childNodes,a.g));ft(b,"goog-option")&&(st(a,16,!0),(c=a.o())&&qv(a.i,a,c),qv(this,a,b));return mv.m.xa.call(this,a,b)};h.uc=function(a,b){var c=this.Ca(a),d=rv(this,a)?c.firstChild:null;mv.m.uc.call(this,a,b);d&&!rv(this,a)&&c.insertBefore(d,c.firstChild||null)};function ov(a,b,c){a=nv(a,2);return c.t("div",a,b)}function qv(a,b,c){c&&(Ts(c,"menuitemcheckbox"),pv(a,b,c,!0))}
function rv(a,b){var c=a.Ca(b);if(c){var c=c.firstChild,d=nv(a,1);return!!c&&A(c)&&1==c.nodeType&&ft(c,d)}return!1}function pv(a,b,c,d){d!=rv(a,c)&&(d?gt(c,"goog-option"):it(c,"goog-option"),c=a.Ca(c),d?(a=nv(a,1),c.insertBefore(b.g.t("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}h.Hc=function(a){switch(a){case 2:return nv(this,0);case 16:case 8:return"goog-option-selected";default:return mv.m.Hc.call(this,a)}};
h.Ae=function(a){var b=nv(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return mv.m.Ae.call(this,a)}};h.B=function(){return"goog-menuitem"};function sv(a,b,c,d){$.call(this,a,d||mv.Y(),c);this.na(b)}E(sv,$);h=sv.prototype;h.V=function(){var a=this.G;return null!=a?a:this.sb()};h.sb=function(){var a=this.ra();return u(a)?(a=Pa(a,function(a){return A(a)&&1==a.nodeType&&(ft(a,"goog-menuitem-accel")||ft(a,"goog-menuitem-mnemonic-separator"))?"":dh(a)}).join(""),ua(a)):sv.m.sb.call(this)};
h.ec=function(a){var b=this.getParent();if(b){var c=b.h;b.h=null;if(b=c&&y(a.clientX))b=new Hg(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}sv.m.ec.call(this,a)};h.wc=function(a){return a.g==this.cg&&this.Pb(a)?!0:sv.m.wc.call(this,a)};h.Jg=function(){return this.cg};lt("goog-menuitem",function(){return new sv(null)});function tv(){}E(tv,Vs);da(tv);tv.prototype.W=function(a){return a.g.t("div",this.B())};tv.prototype.xa=function(a,b){b.id&&xs(a,b.id);if("HR"==b.tagName){var c=b;b=this.W(a);Vg(b,c);Wg(c)}else gt(b,this.B());return b};tv.prototype.uc=function(){};tv.prototype.B=function(){return"goog-menuseparator"};function uv(a,b){$.call(this,null,a||tv.Y(),b);st(this,1,!1);st(this,2,!1);st(this,4,!1);st(this,32,!1);this.Lb=1}E(uv,$);uv.prototype.R=function(){uv.m.R.call(this);var a=this.o();Ts(a,"separator")};lt("goog-menuseparator",function(){return new uv});function vv(){}E(vv,yt);da(vv);h=vv.prototype;h.xd=function(){return"menu"};h.He=function(a){return"UL"==a.tagName||vv.m.He.call(this,a)};h.Ic=function(a){return"HR"==a.tagName?new uv:vv.m.Ic.call(this,a)};h.B=function(){return"goog-menu"};h.Ke=function(a){vv.m.Ke.call(this,a);a=a.o();Us(a,"haspopup","true")};lt("goog-menuseparator",function(){return new uv});function wv(a,b){Ft.call(this,Et,b||vv.Y(),a);Ot(this,!1)}E(wv,Ft);h=wv.prototype;h.je=!0;h.B=function(){return this.kb.B()};h.td=function(){var a=[];Cs(this,function(b){a.push(b)});return a};h.Oc=function(a,b,c){(b=wv.m.Oc.call(this,a,b))&&a&&this.aa&&this.je&&Gt(this).focus();a&&c&&y(c.clientX)?this.h=new Hg(c.clientX,c.clientY):this.h=null;return b};h.Re=function(a){this.je&&Gt(this).focus();return wv.m.Re.call(this,a)};h.Jf=function(a){return a.isEnabled()&&a.Ha&&!!(a.pa&2)};
h.Xb=function(a){for(var b=this.kb,c=Og(this.g.g,"div",b.B()+"-content",a),d=c.length,e=0;e<d;e++)Bt(b,this,c[e]);wv.m.Xb.call(this,a)};h.Me=function(a){var b=wv.m.Me.call(this,a);b||Cs(this,function(c){!b&&c.Jg&&c.cg==a.g&&(this.isEnabled()&&this.hb(c),b=c.bb(a))},this);return b};
h.Sb=function(a){wv.m.Sb.call(this,a);if(a=Z(this,a)){var b=a.o();a=this.o();var c=ui(b),d=ui(a),e=Hi(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,g=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),g=g+Math.min(c,Math.max(c-d,0)),b=new Hg(e,g);a.scrollLeft=b.x;a.scrollTop=b.y}};function xv(){}E(xv,tv);da(xv);xv.prototype.W=function(a){return a.g.t("div",this.B()+" goog-inline-block","\u00a0")};xv.prototype.xa=function(a,b){b=xv.m.xa.call(this,a,b);gt(b,"goog-inline-block");return b};xv.prototype.B=function(){return"goog-toolbar-separator"};function yv(){}E(yv,yt);da(yv);yv.prototype.xd=function(){return"toolbar"};yv.prototype.Ic=function(a){return"HR"==a.tagName?new uv(xv.Y()):yv.m.Ic.call(this,a)};yv.prototype.B=function(){return"goog-toolbar"};yv.prototype.Pf=function(){return Dt};function zv(a,b,c){Ft.call(this,b,a||yv.Y(),c)}E(zv,Ft);function Av(a,b,c,d,e,f,g,k,l){var m,n;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==qi(m,"position")||(n=ui(m),p||(p=(p=vi(m))&&Jb?-m.scrollLeft:!p||H&&Wb("8")||"visible"==qi(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=Ig(n,new Hg(p,m.scrollTop))))}m=n||new Hg;n=zi(a);if(p=ti(a)){var q=new oi(p.left,p.top,p.right-p.left,p.bottom-p.top),p=Math.max(n.left,q.left),s=Math.min(n.left+n.width,q.left+q.width);if(p<=s){var v=Math.max(n.top,q.top),
q=Math.min(n.top+n.height,q.top+q.height);v<=q&&(n.left=p,n.top=v,n.width=s-p,n.height=q-v)}}p=Kg(a);v=Kg(c);if(p.g!=v.g){var s=p.g.body,v=v.g.parentWindow||v.g.defaultView,q=new Hg(0,0),z=Mg(s)?Mg(s).parentWindow||Mg(s).defaultView:window,D=s;do{var G;if(z==v)G=ui(D);else{var J=D;G=void 0;if(J.getBoundingClientRect)G=ri(J),G=new Hg(G.left,G.top);else{G=ih(Kg(J));var O=ui(J);G=new Hg(O.x-G.x,O.y-G.y)}if(Jb&&!Wb(12)){O=void 0;H?O="-ms-transform":Kb?O="-webkit-transform":Ib?O="-o-transform":Jb&&(O=
"-moz-transform");var ia=void 0;O&&(ia=qi(J,O));ia||(ia=qi(J,"transform"));J=ia?(J=ia.match(Ii))?new Hg(parseFloat(J[1]),parseFloat(J[2])):new Hg(0,0):new Hg(0,0);G=new Hg(G.x+J.x,G.y+J.y)}}q.x+=G.x;q.y+=G.y}while(z&&z!=v&&(D=z.frameElement)&&(z=z.parent));s=Ig(q,ui(s));H&&!hh(p)&&(s=Ig(s,ih(p)));n.left+=s.x;n.top+=s.y}a=(b&4&&vi(a)?b^2:b)&-5;b=new Hg(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=Ig(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var I;if(g)if(l)I=l;else if(I=ti(c))I.top-=
m.y,I.right-=m.x,I.bottom-=m.y,I.left-=m.x;a:{l=b.fa();e=0;a=(d&4&&vi(c)?d^2:d)&-5;d=xi(c);k=k?k.fa():d.fa();if(f||0!=a)a&2?l.x-=k.width+(f?f.right:0):f&&(l.x+=f.left),a&1?l.y-=k.height+(f?f.bottom:0):f&&(l.y+=f.top);if(g&&(I?(f=l,e=0,65==(g&65)&&(f.x<I.left||f.x>=I.right)&&(g&=-2),132==(g&132)&&(f.y<I.top||f.y>=I.bottom)&&(g&=-5),f.x<I.left&&g&1&&(f.x=I.left,e|=1),f.x<I.left&&f.x+k.width>I.right&&g&16&&(k.width=Math.max(k.width-(f.x+k.width-I.right),0),e|=4),f.x+k.width>I.right&&g&1&&(f.x=Math.max(I.right-
k.width,I.left),e|=1),g&2&&(e=e|(f.x<I.left?16:0)|(f.x+k.width>I.right?32:0)),f.y<I.top&&g&4&&(f.y=I.top,e|=2),f.y<=I.top&&f.y+k.height<I.bottom&&g&32&&(k.height=Math.max(k.height-(I.top-f.y),0),f.y=I.top,e|=8),f.y>=I.top&&f.y+k.height>I.bottom&&g&32&&(k.height=Math.max(k.height-(f.y+k.height-I.bottom),0),e|=8),f.y+k.height>I.bottom&&g&4&&(f.y=Math.max(I.bottom-k.height,I.top),e|=2),g&8&&(e=e|(f.y<I.top?64:0)|(f.y+k.height>I.bottom?128:0)),g=e):g=256,e=g,e&496)){c=e;break a}f=Jb&&(Db||Nb)&&Wb("1.9");
l instanceof Hg?(g=l.x,l=l.y):(g=l,l=void 0);c.style.left=wi(g,f);c.style.top=wi(l,f);d==k||d&&k&&d.width==k.width&&d.height==k.height||(f=hh(Kg(Mg(c))),!H||f&&Wb("8")?(c=c.style,Jb?c.MozBoxSizing="border-box":Kb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(k.width,0)+"px",c.height=Math.max(k.height,0)+"px"):(g=c.style,f?(H?(f=Ei(c,"paddingLeft"),d=Ei(c,"paddingRight"),l=Ei(c,"paddingTop"),I=Ei(c,"paddingBottom"),f=new ni(l,d,I,f)):(f=pi(c,"paddingLeft"),d=pi(c,"paddingRight"),
l=pi(c,"paddingTop"),I=pi(c,"paddingBottom"),f=new ni(parseFloat(l),parseFloat(d),parseFloat(I),parseFloat(f))),c=Hi(c),g.pixelWidth=k.width-c.left-f.left-f.right-c.right,g.pixelHeight=k.height-c.top-f.top-f.bottom-c.bottom):(g.pixelWidth=k.width,g.pixelHeight=k.height)));c=e}return c};function Bv(){}Bv.prototype.l=function(){};function Cv(a,b,c){this.g=a;this.h=b;this.p=c}E(Cv,Bv);Cv.prototype.l=function(a,b,c){Av(this.g,this.h,a,b,void 0,c,this.p)};function Dv(a,b,c,d){Cv.call(this,a,b);this.i=c?5:0;this.j=d||void 0}E(Dv,Cv);Dv.prototype.n=function(){return this.i};Dv.prototype.l=function(a,b,c,d){var e=Av(this.g,this.h,a,b,null,c,10,d,this.j);if(e&496){var f=Ev(e,this.h);b=Ev(e,b);e=Av(this.g,f,a,b,null,c,10,d,this.j);e&496&&(f=Ev(e,f),b=Ev(e,b),Av(this.g,f,a,b,null,c,this.i,d,this.j))}};function Ev(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Fv(a,b,c,d){Dv.call(this,a,b,c||d);if(c||d)this.i=65|(d?32:132)}E(Fv,Dv);function Gv(){}E(Gv,Vs);da(Gv);h=Gv.prototype;h.Jb=function(){return"button"};h.Ra=function(a,b,c){switch(b){case 8:case 16:Us(a,"pressed",c);break;default:case 64:case 1:Gv.m.Ra.call(this,a,b,c)}};h.W=function(a){var b=Gv.m.W.call(this,a);this.Tb(b,a.xb());var c=a.V();c&&this.Fe(b,c);a.pa&16&&this.Ra(b,16,bt(a,16));return b};h.xa=function(a,b){b=Gv.m.xa.call(this,a,b);var c=this.V(b);a.U=c;a.Sd(this.xb(b));a.pa&16&&this.Ra(b,16,bt(a,16));return b};h.V=ca;h.Fe=ca;h.xb=function(a){return a.title};
h.Tb=function(a,b){a&&b&&(a.title=b)};h.B=function(){return"goog-button"};function Hv(){}E(Hv,Gv);da(Hv);h=Hv.prototype;h.Jb=function(){};h.W=function(a){nt(a);ut(a);st(a,32,!1);return a.g.t("button",{"class":Xs(this,a).join(" "),disabled:!a.isEnabled(),title:a.xb()||"",value:a.V()||""},a.sb()||"")};h.yd=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};h.xa=function(a,b){nt(a);ut(a);st(a,32,!1);if(b.disabled){var c=this.Hc(1);gt(b,c)}return Hv.m.xa.call(this,a,b)};
h.Uf=function(a){ys(a).listen(a.o(),"click",a.Pb)};h.zd=ca;h.Oe=ca;h.Ne=function(a){return a.isEnabled()};h.vc=ca;h.T=function(a,b,c){Hv.m.T.call(this,a,b,c);(a=a.o())&&1==b&&(a.disabled=c)};h.V=function(a){return a.value};h.Fe=function(a,b){a&&(a.value=b)};h.Ra=ca;function Iv(a,b,c){$.call(this,a,b||Hv.Y(),c)}E(Iv,$);h=Iv.prototype;h.V=function(){return this.U};h.Sf=function(a){this.U=a;this.i.Fe(this.o(),a)};h.xb=function(){return this.O};h.Tb=function(a){this.O=a;this.i.Tb(this.o(),a)};h.Sd=function(a){this.O=a};h.J=function(){Iv.m.J.call(this);delete this.U;delete this.O};h.R=function(){Iv.m.R.call(this);if(this.pa&32){var a=this.i.cc(this);a&&ys(this).listen(a,"keyup",this.wc)}};
h.wc=function(a){return 13==a.g&&"key"==a.type||32==a.g&&"keyup"==a.type?this.Pb(a):32==a.g};lt("goog-button",function(){return new Iv(null)});function Jv(){}E(Jv,Gv);da(Jv);h=Jv.prototype;h.W=function(a){var b=Xs(this,a),b=a.g.t("div",{"class":"goog-inline-block "+b.join(" ")},this.pd(a.ra(),a.g));this.Tb(b,a.xb());Ys(this,a,b);return b};h.Jb=function(){return"button"};h.Ca=function(a){return a&&a.firstChild.firstChild};h.pd=function(a,b){return b.t("div","goog-inline-block "+(this.B()+"-outer-box"),b.t("div","goog-inline-block "+(this.B()+"-inner-box"),a))};h.yd=function(a){return"DIV"==a.tagName};
h.xa=function(a,b){Kv(b,!0);Kv(b,!1);var c;a:{c=a.g.Qf(b);var d=this.B()+"-outer-box";if(c&&ft(c,d)&&(c=a.g.Qf(c),d=this.B()+"-inner-box",c&&ft(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.pd(b.childNodes,a.g));ht(b,["goog-inline-block",this.B()]);return Jv.m.xa.call(this,a,b)};h.B=function(){return"goog-custom-button"};
function Kv(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==va(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Lv(){}E(Lv,Jv);da(Lv);Jb&&(Lv.prototype.uc=function(a,b){var c=Lv.m.Ca.call(this,a&&a.firstChild);if(c){var d;d=Kg(a).t("div","goog-inline-block "+(this.B()+"-caption"),b);var e=c.parentNode;e&&e.replaceChild(d,c)}});h=Lv.prototype;h.Ca=function(a){a=Lv.m.Ca.call(this,a&&a.firstChild);Jb&&a&&a.__goog_wrapper_div&&(a=a.firstChild);return a};h.Ra=function(a,b,c){64!=b&&Lv.m.Ra.call(this,a,b,c)};
h.xa=function(a,b){var c=Og(document,"*","goog-menu",b)[0];if(c){S(c,!1);Mg(c).body.appendChild(c);var d=new wv;Bs(d,c);a.Xc(d)}return Lv.m.xa.call(this,a,b)};h.pd=function(a,b){return Lv.m.pd.call(this,[b.t("div","goog-inline-block "+(this.B()+"-caption"),a),b.t("div","goog-inline-block "+(this.B()+"-dropdown"),"\u00a0")],b)};h.B=function(){return"goog-menu-button"};function Mv(a,b,c,d){Iv.call(this,a,c||Lv.Y(),d);st(this,64,!0);this.s=new Fv(null,5);b&&this.Xc(b);this.da=new kf(500);!Ph&&!Qh||Wb("533.17.9")||(this.Dd=!0)}E(Mv,Iv);h=Mv.prototype;h.Dd=!1;h.R=function(){Mv.m.R.call(this);this.h&&Nv(this,this.h,!0);Us(this.X,"haspopup",!!this.h)};h.rb=function(){Mv.m.rb.call(this);if(this.h){this.oa(!1);this.h.rb();Nv(this,this.h,!1);var a=this.h.o();a&&Wg(a)}};h.J=function(){Mv.m.J.call(this);this.h&&(this.h.sa(),delete this.h);delete this.ca;this.da.sa()};
h.Pc=function(a){Mv.m.Pc.call(this,a);bt(this,4)&&(this.oa(!bt(this,64),a),this.h&&(this.h.Db=bt(this,64)))};h.ec=function(a){Mv.m.ec.call(this,a);this.h&&!bt(this,4)&&(this.h.Db=!1)};h.Pb=function(){rt(this,!1);return!0};h.Ug=function(a){this.h&&this.h.Oa&&!this.Qe(a.target)&&this.oa(!1)};h.Qe=function(a){var b;if(!(b=a&&Yg(this.o(),a))){if(b=this.h)a:if(b=this.h,Yg(b.o(),a))b=!0;else{for(var c=0,d=Ds(b);c<d;c++){var e=Z(b,c);if("function"==typeof e.Qe&&e.Qe(a)){b=!0;break a}}b=!1}b=b||!1}return b};
h.wc=function(a){if(32==a.g){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.Oa){var b=this.h.bb(a);return 27==a.g?(this.oa(!1),!0):b}return 40==a.g||38==a.g||32==a.g||13==a.g?(this.oa(!0),!0):!1};h.Se=function(){this.oa(!1)};h.bh=function(){bt(this,4)||this.oa(!1)};h.Ad=function(a){this.Dd||this.oa(!1);Mv.m.Ad.call(this,a)};
h.Xc=function(a){var b=this.h;if(a!=b&&(b&&(this.oa(!1),this.aa&&Nv(this,b,!1),delete this.h),this.aa&&Us(this.X,"haspopup",!!a),a)){this.h=a;zs(a,this);a.Oc(!1);var c=this.Dd;(a.je=c)&&Ot(a,!0);this.aa&&Nv(this,a,!0)}return b};h.Pe=function(a,b){var c=Mv.m.Pe.call(this,a,b);c&&!this.Ha&&this.oa(!1);return c};h.setEnabled=function(a){Mv.m.setEnabled.call(this,a);this.isEnabled()||this.oa(!1)};
h.oa=function(a,b){Mv.m.oa.call(this,a);if(this.h&&bt(this,64)==a){if(a)this.h.aa||this.h.render(),this.n=ti(this.o()),this.l=zi(this.o()),Ov(this),this.h.Sb(-1);else{rt(this,!1);this.h.Db=!1;var c=this.o();c&&Us(c,"activedescendant","");if(null!=this.D&&(this.D=void 0,c=this.h.o())){var d="",e;d instanceof Jg?(e=d.height,d=d.width):e="";c.style.width=wi(d,!0);c.style.height=wi(e,!0)}}this.h.Oc(a,!1,b);this.H||(c=ys(this),d=a?c.listen:c.Fa,d.call(c,this.g.g,"mousedown",this.Ug,!0),this.Dd&&d.call(c,
this.h,"blur",this.bh),d.call(c,this.da,mf,this.qh),a?lf(this.da):this.da.stop())}};function Ov(a){if(a.h.aa){var b=a.ca||a.o(),c=a.s;a.s.g=b;b=a.h.o();a.h.Oa||(b.style.visibility="hidden",S(b,!0));!a.D&&a.s.n&&a.s.i&32&&(a.D=xi(b));c.l(b,c.h^1,null,a.D);a.h.Oa||(S(b,!1),b.style.visibility="visible")}}
h.qh=function(){var a=zi(this.o()),b=ti(this.o());(this.l==a||this.l&&a&&this.l.left==a.left&&this.l.width==a.width&&this.l.top==a.top&&this.l.height==a.height)&&(this.n==b||this.n&&b&&this.n.top==b.top&&this.n.right==b.right&&this.n.bottom==b.bottom&&this.n.left==b.left)||(this.l=a,this.n=b,Ov(this))};function Nv(a,b,c){var d=ys(a);c=c?d.listen:d.Fa;c.call(d,b,"action",a.Se);c.call(d,b,"highlight",a.Og);c.call(d,b,"unhighlight",a.Pg)}
h.Og=function(a){var b=this.o();null!=a.target.o()&&Us(b,"activedescendant",a.target.o().id)};h.Pg=function(){if(!Jt(this.h)){var a=this.o();Us(a,"activedescendant","")}};lt("goog-menu-button",function(){return new Mv(null)});function Pv(a){L.call(this);this.g=[];Qv(this,a)}E(Pv,L);Pv.prototype.h=null;function Qv(a,b){b&&(Na(b,function(a){Rv(a,!1)},a),$a(a.g,b))}Pv.prototype.td=function(){return Za(this.g)};Pv.prototype.clear=function(){Va(this.g);this.h=null};Pv.prototype.J=function(){Pv.m.J.call(this);delete this.g;this.h=null};function Rv(a,b){a&&"function"==typeof a.Ac&&a.Ac(b)};function Sv(a,b,c,d){Mv.call(this,a,b,c,d);this.K=this.ra()}E(Sv,Mv);h=Sv.prototype;h.ha=null;h.R=function(){Sv.m.R.call(this);Tv(this);Uv(this)};h.Xb=function(a){Sv.m.Xb.call(this,a);(a=this.sb())?(this.K=a,Tv(this)):this.ha&&Vv(this,this.ha.g[0]||null)};h.J=function(){Sv.m.J.call(this);this.ha&&(this.ha.sa(),this.ha=null);this.K=null};h.Se=function(a){Vv(this,a.target);Sv.m.Se.call(this,a);a.Nc();this.dispatchEvent("action")};h.fh=function(){var a=Wv(this);Sv.m.Sf.call(this,a&&a.V());Tv(this)};
h.Xc=function(a){var b=Sv.m.Xc.call(this,a);a!=b&&(this.ha&&this.ha.clear(),a&&(this.ha?Cs(a,function(a){Xv(a);var b=this.ha,e=b.g.length;a&&(Rv(a,!1),ab(b.g,e,0,a))},this):Yv(this,a)));return b};function Vv(a,b){if(a.ha){var c=Wv(a),d=a.ha;b!=d.h&&(Rv(d.h,!1),d.h=b,Rv(b,!0));d.dispatchEvent("select");b!=c&&a.dispatchEvent("change")}}h.Sf=function(a){if(null!=a&&this.ha)for(var b=0,c;c=this.ha.g[b]||null;b++)if(c&&"function"==typeof c.V&&c.V()==a){Vv(this,c);return}Vv(this,null)};
function Wv(a){return a.ha?a.ha.h:null}function Yv(a,b){a.ha=new Pv;b&&Cs(b,function(a){Xv(a);var b=this.ha,e=b.g.length;a&&(Rv(a,!1),ab(b.g,e,0,a))},a);Uv(a)}function Uv(a){a.ha&&ys(a).listen(a.ha,"select",a.fh)}function Tv(a){var b=Wv(a),b=b?b.sb():a.K;a.i.uc(a.o(),b);a.Kb=b}function Xv(a){a.gf=a instanceof sv?"option":"separator"}h.oa=function(a,b){Sv.m.oa.call(this,a,b);bt(this,64)&&(this.h||this.Xc(new wv(this.g)),(this.h||null).Sb(this.ha?this.ha.h?Ma(this.ha.g,this.ha.h):-1:-1))};
lt("goog-select",function(){return new Sv(null)});function Zv(){}E(Zv,Lv);da(Zv);Zv.prototype.B=function(){return"goog-toolbar-menu-button"};function $v(a,b,c,d){Sv.call(this,a,b,c||Zv.Y(),d)}E($v,Sv);lt("goog-toolbar-select",function(){return new $v(null)});function aw(){}E(aw,Vs);da(aw);h=aw.prototype;h.Jb=function(){};function bw(a,b,c,d){var e=d.t("div",a.B()+"-inner-box");a=d.t("div",a.B()+"-outer-box",e);d.appendChild(b,a);d.appendChild(e,c)}h.xa=function(a,b){var c=a.g,d=b;b=c.t("div","goog-inline-block");c.mh(b,d);bw(this,b,d,c);aw.m.xa.call(this,a,b);a.Kb=d.value;return b};h.W=function(a){var b=a.g,c=b.t("div","goog-inline-block "+Xs(this,a).join(" "));a=b.t("input",{type:"text",value:a.ra()||"",disabled:!a.isEnabled()});bw(this,c,a,b);return c};
h.yd=function(a){return"INPUT"==a.tagName&&(!a.type||"TEXT"==a.type.toUpperCase())};h.Ca=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};h.cc=function(a){return this.Ca(a.o())};h.Oe=ca;h.Ne=function(a){return a.isEnabled()};h.vc=ca;h.T=function(a,b,c){aw.m.T.call(this,a,b,c);1==b&&(a=this.Ca(a.o()))&&(a.disabled=c)};h.Ra=ca;
h.uc=function(a,b){var c=this.Ca(a);c&&(c.value=b)};h.ra=function(a){return(a=this.Ca(a))?a.value:null};h.B=function(){return"wgui-textinput"};function cw(a,b,c){$.call(this,a,b||aw.Y(),c);nt(this);pt(this);ut(this);st(this,32,!1);a||(this.Kb="")}E(cw,$);cw.prototype.R=function(){cw.m.R.call(this);var a=this.i.cc(this);if(a){var b=this.j||(this.j=new Ks);Ls(b,a);ys(this).listen(b,"key",this.bb)}};cw.prototype.ra=function(){return this.o()?this.i.ra(this.o()):null};cw.prototype.V=function(){return this.ra()};cw.prototype.sb=function(){return this.ra()||""};function dw(a){L.call(this);this.parent=a;this.result=this.g=null}E(dw,L);h=dw.prototype;h.getParent=function(){return this.parent};h.ka=function(){return this.g};function ew(a){if(a.g)return a.g.qa();if(a.result)return a.result.storeName;throw Error("No module name");}h.M=function(){return this.parent.M()};
function fw(a,b){b.record?a.g=b.record:a.g=null;a.result=b;a.dispatchEvent(new K("change",a));a.g||a.parent.send("list",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]).C(function(a){a=a[0].result;a[0]&&(this.g=new Bu(this.parent,new Kq(this.parent.M(),hq[hq.indexOf(this.result.storeName)],a[0])),this.dispatchEvent(new K("change",this)))},a)}h.clear=function(){if(this.g||this.result)this.result=this.g=null,this.dispatchEvent(new K("change",this))};
h.toString=function(){return"ydn.crm.sugar.model.Result:"+this.g};h.Pa=function(){return!this.g&&!this.result};function gw(){}E(gw,Vs);da(gw);gw.prototype.B=function(){return"search-result"};gw.prototype.W=function(a){var b=gw.m.W.call(this,a),c=a.g,d=c.t("div","record-header"),e=c.t("div","search-body");b.appendChild(d);b.appendChild(e);a=ew(a.G);e=c.t("a","title");c=c.t("span",{"class":"icon"},a.substr(0,2));d.appendChild(c);d.appendChild(e);d.classList.add(a);return b};
gw.prototype.refresh=function(a){var b=a.G,c=a.o();if((b=b.ka())&&b.g&&b.g.g){var d=Ng("record-header",a.o()),e=b.qa();d.className="record-header "+e;a=Ng("title",d);d=Ng("icon",d);a.textContent=Lq(b.ka());d.textContent=e.substring(0,2);e=b.ka();e=kq(e.domain,e.S,e.F());a.href=e;a.target=b.M();S(c,!0)}else S(c,!1)};function hw(a,b){$.call(this,null,null,a);this.na(b);nt(this);pt(this);ut(this);var c=new Kq(b.M(),ew(b)),c=new Bu(b.getParent(),c);this.h=new $u(c,null,a);this.Z(this.h,!0);ys(this).listen(b,"change",this.l,!0)}E(hw,$);hw.prototype.wa=function(){return Ng("search-body",this.o())};hw.prototype.l=function(a){var b=this.h.G,c=this.G.ka();b.Eb(c?c.ka():null);this.i.refresh(this);this.h.refresh(a)};jt(hw,gw);function iw(a,b){us.call(this,a);this.na(b);this.i=new us(a);this.h=null;this.j=[];this.l=0}E(iw,us);h=iw.prototype;h.B=function(){return"search-panel"};
h.va=function(){iw.m.va.call(this);var a=this.g,b=this.o();b.classList.add(this.B());var c=a.t("div","header");b.appendChild(c);this.h=new zv(null,null,a);for(var d=new wv(a),e=0;e<iq.length;e++)d.Z(new sv(iq[e]),!0);d=new $v("Module",d,null,a);this.h.Z(d,!0);this.h.Z(new cw(""),!0);this.h.render(c);d.Pe(!1);a=a.t("div","content");b.appendChild(a);this.Z(this.i,!0)};h.R=function(){iw.m.R.call(this);var a=Z(this.h,1);ys(this).listen(a,"action",this.Ch,!0)};
function jw(a,b){if(b){for(var c=Ds(a.i),d=0;d<c;d++){var e=Z(a.i,d).G;if(e.Pa()){fw(e,b);return}}30<c?fw(Z(a.i,0).G,b):(c=new dw(a.G),fw(c,b),c=new hw(a.g,c),a.i.Z(c,!0))}}function kw(a,b,c,d){Uu(a.G,b,c,d).u(function(a){var b=a[0];if(b.result[0]){a=hq[hq.indexOf(b.store)];var g=new Du(this.G,a),b=new Kq(this.G.M(),a,b.result[0]);g.Eb(b);b=b.F();jw(this,{storeName:a,primaryKey:b,record:g,value:d,tokens:[{keyPath:c}]})}lw(this)},function(a){lw(this);throw a;},a)}
function mw(a){var b=["rgb(255, 255, 255) 0%"];b[1]="rgb(255, 255, 255) "+a.toFixed(1)+"%";b[2]="rgb(135,224,253) "+(a+0.1).toFixed(1)+"%";b[3]="rgb(135,224,253) 100%";return"linear-gradient(to right, "+b.join(", ")+")"}function nw(a,b){0==a.l&&(a.l=b);var c=100*(a.l-b)/a.l,d=Z(a.h,1).o();Og(document,"input",null,d)[0].style.background=mw(c)}
function lw(a){var b=a.j[0];if(b){b.Qa++;nw(a,3*(a.j.length-1)+(3-b.Qa));var c=a.G;0==b.Qa?kw(a,b.S,"ydn$emails",b.fb):1==b.Qa?(c=b.fb.match(/\d/g),3>(c?c.length:0)?lw(a):kw(a,b.S,"ydn$phones",b.fb)):2==b.Qa?Vu(c,b.S,b.fb).u(function(a){a=a[0].result;for(var b=a.length||0,c=0;c<b;c++)jw(this,a[c]);lw(this)},function(a){throw a;},a):(a.j.shift(),0<a.j.length&&lw(a))}}
h.Ch=function(){var a=Z(this.h,1).ra();if(a&&(a=a.trim(),2<=a.length)){var b;b=(b=Wv(Z(this.h,0)))?b.sb():null;this.j.length=0;if(b)this.j[0]={S:b,fb:a,Qa:-1};else for(b=0;b<iq.length;b++)this.j[b]={S:iq[b],fb:a,Qa:-1};for(a=Ds(this.i)-1;0<=a;a--)Z(this.i,a).G.clear();this.l=0;lw(this)}};h.wa=function(){return Ng("content",this.o())};function ow(a,b){us.call(this,a);this.na(b)}E(ow,us);h=ow.prototype;h.logger=R("ydn.crm.inj.sugar.Header");h.B=function(){return"sugar-header"};
h.va=function(){ow.m.va.call(this);var a=this.o(),b=this.G,c=this.g;Eg(a,this.B());var d=c.t("a");d.textContent=b.M();d.href=b.h.baseUrl?b.h.baseUrl:"https://"+b.h.domain;d=c.t("div",{"class":"main-title",title:"SugarCRM"},[d]);a.appendChild(d);var d=[],e=chrome.extension.getURL("option-page.html")+"#credentials",e=c.t("a",{href:e,target:"option-page"},"Setup host permission");e.setAttribute("title","Your permission is required to connect your server from this extension. Without permission request to server will be slow.");
d.push(e);d=c.t("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.t("input",{name:"username",type:"text"}),e=c.t("div",null,[e]),f=c.t("input",{name:"password",type:"password"}),f=c.t("div",null,[f]),g=c.t("div","message"),e=c.t("div","login-form",[e,f,g]);S(d,!1);S(e,!1);a.appendChild(e);b=new iw(c,b);this.Z(b);c=c.t("div");a.appendChild(c);b.render(c)};
h.R=function(){ow.m.R.call(this);var a=this.o(),b=ys(this);this.o().querySelector(".host-permission");a=a.querySelector(".login-form");a=new Ks(a);b.listen(a,"key",this.zh);b.listen(dd(),"post",function(a){a=a.getMessage();if("update-host-permission"==a.req&&(a=a.data)&&a.origins){a=a.origins;for(var b=this.info.M(),e=0;e<a.length;e++)if((new ud(a[e])).M()==b){P(this.logger,"has host permission on "+b);var f=this.G;f.h.hostPermission=!0;this.na(f)}}},!1)};
h.zh=function(a){if(13==a.g){var b=this.o().querySelector(".login-form"),c=this.G;a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";Tu(c,a,d).u(function(){c.isLogin()?(e.textContent="",S(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};h.M=function(){return this.G.M()};
h.refresh=function(){var a=this.G,b=a.M(),c=this.o(),d=c.querySelector(".main-title a"),e=c.querySelector(".login-form"),f=c.querySelector(".host-permission");d.textContent=b;d.href=a.h.baseUrl||null||"https://"+b;e.querySelector("input[name=username]").textContent=a.h.userName||null||"";S(e,!1);S(f,!1);S(c,!0);a.isLogin()||gd("sugarcrm",b).send("about").C(function(a){S(e,!a.isLogin)});a.isLogin()&&!a.h.hostPermission&&(a=chrome.extension.getURL("host-permission.html"),f.querySelector("a").href=a+
"?"+b,S(f,!0))};function pw(a,b,c){us.call(this,a);a=new Wu(b,c);this.na(a)}E(pw,us);pw.prototype.B=function(){return"sugar-panel"};pw.prototype.va=function(){pw.m.va.call(this);var a=this.g,b=this.o();Eg(b,this.B());b=new ow(a,this.G);this.Z(b,!0);a=new jv(a,this.G);this.Z(a,!0)};pw.prototype.R=function(){pw.m.R.call(this)};pw.prototype.logger=R("ydn.crm.inj.SugarPanel");function qw(){this.g=null}var rw;function sw(){rw||(rw=new qw);return rw}qw.prototype.mb=function(a,b){this.g?a.call(b):gd().send("user-setting").C(function(c){this.g=c||tw;a.call(b)},this)};
qw.prototype.h=function(a){a=gd("sugarcrm",a);for(var b=[],c=0;c<iq.length;c++){var d=a.send("info-module",iq[c]).C(function(a){var b="",c="",d;for(d in a.module_fields){var l=a.module_fields[d];if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(d))l.group="name";else if(/^email\d?$/.test(d))l.group="email";else if(/^phone?/.test(d))l.group="phone";else if(!l.group&&ra(d,b)){l.group=c;continue}b=d;c=l.group}},this);b.push(d)}return(new km(b)).C(function(a){for(var b={},c=0;c<
iq.length;c++)b[iq[c]]=a[c][1];return b},this)};var tw={};function uw(a){us.call(this,a)}E(uw,us);uw.prototype.va=function(){uw.m.va.call(this);var a=this.o(),b=this.g;Eg(a,"sugarcrm-link-panel");b=b.createElement("a");b.textContent="Setup SugarCRM";b.href=chrome.extension.getURL("option-page.html")+"#credentials";b.className="sugarcrm-setup-link";a.appendChild(b);S(a,!1)};uw.prototype.na=function(a){uw.m.na.call(this,a);a=u(a)&&0<a.length;S(this.o(),!a)};function vw(a){us.call(this,a);this.i=new kf(400);this.h=0;this.j="";this.l=sw();this.l.mb(ib)}E(vw,us);h=vw.prototype;h.B=function(){return"inj"};h.kh=function(){this.h++;this.j!=location.href&&(N(this.logger,"url already changed"),this.i.stop());40<this.h&&(N(this.logger,"sniff give up after "+this.h),this.i.stop());var a=this.ig(!1);a?(S(this.o(),!0),this.i.stop(),this.na(a)):(N(this.logger,"Could not sniff contact identifier."),S(this.o(),!1))};
h.va=function(){vw.m.va.call(this);var a=this.o();a.classList.add(this.B());var b=new uw;this.Z(b,!0);S(a,!1)};h.R=function(){vw.m.R.call(this);ys(this).listen(this.i,mf,this.kh,!0)};h.logger=R("ydn.crm.inj.SidebarPanel");function ww(a,b){var c=b.domain;return a.l.h(c).C(function(a){a=new pw(this.g,b,a);for(var e=0;e<Ds(this);e++){var f=Z(this,e);if(f instanceof pw&&f.G.M()==c)return}P(this.logger,"sugar panel "+c+" created");this.Z(a,!0)},a)}
h.init=function(){return 1<Ds(this)?sb():gd().send("list-sugarcrm").C(function(a){Z(this,0).na(a);for(var b=[],c=0;c<a.length;c++){var d;a:{for(d=1;d<Ds(this);d++){var e=Z(this,d);if(e instanceof pw&&e.G.M()==a[c]){d=!0;break a}}d=!1}d||b.push(ww(this,a[c]))}return lm(b)},this)};h.update=function(){Q(this.logger,"updating sidebar");this.init();this.h=0;this.j=location.href;lf(this.i)};
h.na=function(a){vw.m.na.call(this,a);var b=Ds(this);1<b?P(this.logger,"setting module to "+b+" children"):N(this.logger,"no sugar instance");for(var c=1;c<b;c++){var d=Z(this,c);if(d instanceof pw){var e=a,f=d.G,d=d.o();e.g?(S(d,!0),Xu(f,e)):S(d,!1)}else N(this.logger,"unknown panel at "+c)}};
h.ig=function(a){var b=this.o();a&&window.console.log("sniff contact "+this.h);var c=document.querySelector('table[role="presentation"]');if(!c)return a&&N(this.logger,"Could not find main view"),null;a&&1!=c.childElementCount&&N(this.logger,"Probably our assumption about layout is wrong");var d=c.querySelector("tr");if(a&&3!=d.childElementCount)return N(this.logger,"Probably our assumption about layout is very wrong"),null;c=d.children[2];a&&!c.style.height&&N(this.logger,"Probably our assumption about layout is wrong");
c=c.querySelector("table");if(!c)return N(this.logger,"No Contact panel found."),null;var e;a:if(e=5<this.h,d=c.querySelector("img[jid]")){for(e=d.getAttribute("jid");d&&"TD"!=d.tagName;)d=d.parentElement;d=d.nextElementSibling.querySelector("span[title]").getAttribute("title");e=new Zt(e,d)}else{if(e&&(e=c.querySelector("span[title]"))&&(d=e.getAttribute("title").trim(),0<d.length&&(e=document.querySelector('span[name="'+d+'"][email]')))){e=e.getAttribute("email");e=new Zt(e,d);break a}e=null}if(!e)return null;
for(var f,d=c,g=0;4>g;g++)if(d.parentElement&&(d=d.parentElement,d.nextElementSibling&&"DIV"==d.nextElementSibling.tagName)){var d=d.parentElement,g=d.lastElementChild,k=!!g.querySelector("a[href]");f=document.createElement("div");k?d.parentElement.insertBefore(f,g):d.appendChild(f);break}f||(a&&N(this.logger,"usual root position is not available, locating on second best position"),f=c.ownerDocument,a=f.createElement("td"),a.setAttribute("colspan","2"),d=f.createElement("tr"),d.className="widget-topraw",
d.appendChild(a),(c.querySelector("tbody")||c).appendChild(d),f=a);b.parentElement&&b.parentElement.removeChild(this.o());f.appendChild(b);S(this.o(),!0);return e};function xw(){this.g=this.h=null}xw.prototype.init=function(a){this.h=a;a=document.getElementById("user-login");Cc(a,"click",function(a){a.preventDefault();window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=400, top="+(screen.height/2-200)+", left="+(screen.width/2-300));return!0},!0,this)};
function yw(a,b){if(!b||b instanceof Error)a.g=null;else if(a.g=b,a.h){var c=document.getElementById("user-login"),d=document.getElementById("user-name"),e=Ng("login-message",a.h);b instanceof Error?(e.textContent=b.message,S(e,!0),S(c,!1)):a.g.is_login?(c.href=a.g.logout_url,c.textContent="logout",d.textContent=a.g.email,S(e,!1),S(c,!1)):(c.href=a.g.login_url,c.textContent="login",c.style.display="",d.textContent="",S(e,!0),S(c,!0))}};function zw(){this.j=document.createElement("div");document.body.appendChild(this.j);ed("gmail");this.i=new vw;this.i.render(this.j);var a=this.history=new ss,b=Hd(new ud(document.location.href))+"/";a.sh=b;Cc(this.history,"navigate",this.Xg,!1,this);this.l=null;this.g=!1;new Wt;this.h=new xw}h=zw.prototype;h.logger=R("ydn.crm.inj.App");h.isLogin=function(){return this.g};h.Xg=function(a){a.g!=this.l&&(this.l=a.g,/^contact/.test(a.g)||/\w+\/[\w\d]{10,18}$/.test(a.g)&&this.i.update())};
h.init=function(){P(this.logger,"init "+this);Aw(this);var a=window.setInterval(function(){document.querySelector('a[href="http://mail.google.com/mail/help/terms.html"]')&&window.clearTimeout(a)},500);window.setTimeout(function(){window.clearTimeout(a)},15E3)};h.toString=function(){return"inj.Main:0.7.7"};
function Aw(a){gd().send("login-info").u(function(a){a:{if(a&&a.email){Q(this.logger,"user "+a.email+" login");this.g=!0;var c=this.h.g;if(c&&c.email==a.email)break a;this.i.init();this.history.setEnabled(!0)}else this.g&&(this.g=!1,this.history.setEnabled(!1));yw(this.h,a)}},function(a){N(this.logger,a.name+" "+a.message);yw(this.h,a)},a)}h.yh=function(){return{sidebar:this.i,setting:this.h}};oa("ydn.crm.version","0.7.7");oa("runInjApp",function(){wo();var a=new zw;a.init();return a});oa("runEventApp",function(){wo();var a=new ls;a.init();js(a);return a});ls.prototype.xp=ls.prototype.O;zw.prototype.xp=zw.prototype.yh;vw.prototype.sniff=vw.prototype.ig;oa("goog.async.Deferred",F);F.prototype.addCallback=F.prototype.C;F.prototype.addErrback=F.prototype.Ec;F.prototype.addBoth=F.prototype.ea;F.prototype.addCallbacks=F.prototype.u;function Bw(a,b){us.call(this,a);this.na(b);this.i=new us(a);this.h=null;this.j=[];this.l=0}E(Bw,us);h=Bw.prototype;h.va=function(){Bw.m.va.call(this);var a=this.g,b=this.o(),c=a.t("div","header");b.appendChild(c);this.h=new zv(null,null,a);for(var d=new wv(a),e=0;e<iq.length;e++)d.Z(new sv(iq[e]),!0);d=new $v("Module",d,null,a);this.h.Z(d,!0);this.h.Z(new cw(""),!0);this.h.render(c);a=a.t("div","content");b.appendChild(a);this.Z(this.i,!0)};
h.R=function(){Bw.m.R.call(this);var a=Z(this.h,1);ys(this).listen(a,"action",this.Bh,!0)};h.B=function(){return"browse-panel"};function Cw(a,b){if(b){for(var c=Ds(a.i),d=0;d<c;d++){var e=Z(a.i,d).G;if(e.Pa()){fw(e,b);return}}30<c?fw(Z(a.i,0).G,b):(c=new dw(a.G),fw(c,b),c=new hw(a.g,c),a.i.Z(c,!0))}}
function Dw(a,b,c,d){Uu(a.G,b,c,d).u(function(a){var b=a[0];if(b.result[0]){a=hq[hq.indexOf(b.store)];var g=new Du(this.G,a),b=new Kq(this.G.M(),a,b.result[0]);g.Eb(b);b=b.F();Cw(this,{storeName:a,primaryKey:b,record:g,value:d,tokens:[{keyPath:c}]})}Ew(this)},function(a){Ew(this);throw a;},a)}function Fw(a,b){0==a.l&&(a.l=b);var c=100*(a.l-b)/a.l,d=Z(a.h,1).o();Og(document,"input",null,d)[0].style.background=mw(c)}
function Ew(a){var b=a.j[0];if(b){b.Qa++;Fw(a,3*(a.j.length-1)+(3-b.Qa));var c=a.G;0==b.Qa?Dw(a,b.S,"ydn$emails",b.fb):1==b.Qa?(c=b.fb.match(/\d/g),3>(c?c.length:0)?Ew(a):Dw(a,b.S,"ydn$phones",b.fb)):2==b.Qa?Vu(c,b.S,b.fb).u(function(a){a=a[0].result;for(var b=a.length||0,c=0;c<b;c++)Cw(this,a[c]);Ew(this)},function(a){throw a;},a):(a.j.shift(),0<a.j.length&&Ew(a))}}
h.Bh=function(){var a=Z(this.h,1).ra();if(a&&(a=a.trim(),2<=a.length)){var b;b=(b=Wv(Z(this.h,0)))?b.sb():null;this.j.length=0;if(b)this.j[0]={S:b,fb:a,Qa:-1};else for(b=0;b<iq.length;b++)this.j[b]={S:iq[b],fb:a,Qa:-1};for(a=Ds(this.i)-1;0<=a;a--)Z(this.i,a).G.clear();this.l=0;Ew(this)}};h.wa=function(){return Ng("content",this.o())};function Gw(a,b,c){sv.call(this,a,b,c);st(this,8,!0);if(a=this.o())b=this.i,a&&(Ts(a,"menuitemradio"),pv(b,this,a,!0))}E(Gw,sv);Gw.prototype.Pb=function(){return this.dispatchEvent("action")};lt("goog-option",function(){return new Gw(null)});function Hw(){}E(Hw,Jv);da(Hw);Hw.prototype.B=function(){return"goog-toolbar-button"};function Iw(a,b,c){Iv.call(this,a,b||Hw.Y(),c)}E(Iw,Iv);lt("goog-toolbar-button",function(){return new Iw(null)});function Jw(a,b,c,d){Mv.call(this,a,b,c||Zv.Y(),d)}E(Jw,Mv);lt("goog-toolbar-menu-button",function(){return new Jw(null)});function Kw(a,b){uv.call(this,a||xv.Y(),b)}E(Kw,uv);lt("goog-toolbar-separator",function(){return new Kw});function Lw(a,b,c){Iv.call(this,a,b||Jv.Y(),c);st(this,16,!0)}E(Lw,Iv);lt("goog-toggle-button",function(){return new Lw(null)});function Mw(a,b,c){Lw.call(this,a,b||Hw.Y(),c)}E(Mw,Lw);lt("goog-toolbar-toggle-button",function(){return new Mw(null)});function Nw(){}E(Nw,Vs);da(Nw);Nw.prototype.B=function(){return"record"};Nw.prototype.W=function(a){return Nw.m.W.call(this,a)};function Ow(a,b){$.call(this,null,null,a);this.na(b)}E(Ow,$);jt(Ow,Nw);function Pw(a,b){us.call(this,a);this.na(b);this.i=new us(a);this.h=new us(a)}E(Pw,us);Pw.prototype.wa=function(){return Ng("content",this.o())};
Pw.prototype.va=function(){Pw.m.va.call(this);var a=this.o(),b;A('<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>')?(Ka('Soy template output is unsafe for use as HTML: <div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>'),
b="zSoyz"):b='<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>';
a.innerHTML=b;Bs(new zv,Ng("goog-toolbar",a));this.Z(this.i,!0);this.Z(this.h,!0);S(this.h.o(),!1)};Pw.prototype.R=function(){Pw.m.R.call(this);this.o()};Pw.prototype.refresh=function(){};oa("ydn.crm.sugar.model.Sugar",Su);oa("ydn.crm.ui.sugar.SyncPanel",Pw);oa("ydn.crm.ui.sugar.SearchPanel",iw);oa("ydn.crm.ui.sugar.BrowsePanel",Bw);oa("ydn.crm.inj.UserSetting",qw);qw.getInstance=sw;qw.prototype.getModuleInfo=qw.prototype.h;oa("ydn.msg.Pipe",Xc);oa("ydn.msg.initPipe",ed);oa("ydn.msg.getChannel",gd);Xc.prototype.listen=Xc.prototype.listen;Xc.prototype.getChannel=Xc.prototype.j;ad.prototype.send=ad.prototype.send;})();

            //# sourceMappingURL=https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm-0.7.7.js.map
        