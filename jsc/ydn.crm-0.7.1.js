(function(){var h,aa=aa||{},r=this;function ba(a){a=a.split(".");for(var b=r,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ca(){}function da(a){a.X=function(){return a.Zf?a.Zf:a.Zf=new a}}
function ea(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return void 0!==a}function u(a){return"array"==ea(a)}function w(a){var b=ea(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function fa(a){return"boolean"==typeof a}function y(a){return"number"==typeof a}function ga(a){return"function"==ea(a)}function A(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ia(a){return a[ja]||(a[ja]=++ka)}
var ja="closure_uid_"+(1E9*Math.random()>>>0),ka=0;function la(a,b,c){return a.call.apply(a.bind,arguments)}function ma(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function B(a,b,c){B=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?la:ma;return B.apply(null,arguments)}function na(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var C=Date.now||function(){return+new Date};
function oa(a,b){var c=a.split("."),d=r;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b}function E(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Mh=function(a,c,f){var g=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,g)}};function pa(a){Error.captureStackTrace?Error.captureStackTrace(this,pa):this.stack=Error().stack||"";a&&(this.message=String(a))}E(pa,Error);pa.prototype.name="CustomError";var qa;function ra(a,b){return 0==a.lastIndexOf(b,0)}function sa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ta(a){return/^[\s\xa0]*$/.test(a)}function ua(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function va(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function wa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}
function xa(a){if(!ya.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(za,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Aa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ba,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ca,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Da,"&#39;"));return a}var za=/&/g,Aa=/</g,Ba=/>/g,Ca=/"/g,Da=/'/g,ya=/[&<>"']/;function Ea(a){return wa(a.replace(/  /g," &#160;"),void 0)}
function Fa(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ga={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ha={"'":"\\'"};
function Ia(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=b,g=c+1,k;if(!(k=Ga[d])){if(!(31<e&&127>e))if(d in Ha)d=Ha[d];else if(d in Ga)d=Ha[d]=Ga[d];else{e=d;k=d.charCodeAt(0);if(31<k&&127>k)e=d;else{if(256>k){if(e="\\x",16>k||256<k)e+="0"}else e="\\u",4096>k&&(e+="0");e+=k.toString(16).toUpperCase()}d=Ha[d]=e}k=d}f[g]=k}b.push('"');return b.join("")};function Ja(a,b){b.unshift(a);pa.call(this,sa.apply(null,b));b.shift()}E(Ja,pa);Ja.prototype.name="AssertionError";function Ka(a,b){throw new Ja("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var La=Array.prototype,Ma=La.indexOf?function(a,b,c){return La.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Na=La.forEach?function(a,b,c){La.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Oa=La.filter?function(a,b,c){return La.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=
0,g=x(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Pa=La.map?function(a,b,c){return La.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},Qa=La.some?function(a,b,c){return La.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Ra=La.every?function(a,b,c){return La.every.call(a,b,c)}:function(a,
b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Sa(a,b){var c=Ta(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}function Ta(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Ua(a,b){return 0<=Ma(a,b)}function Va(a){if(!u(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function Wa(a,b){var c=Ma(a,b),d;(d=0<=c)&&Xa(a,c);return d}
function Xa(a,b){La.splice.call(a,b,1)}function Ya(a){return La.concat.apply(La,arguments)}function Za(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function $a(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(u(d)||(e=w(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,g=d.length,k=0;k<g;k++)a[f+k]=d[k];else a.push(d)}}function ab(a,b,c,d){La.splice.apply(a,bb(arguments,1))}
function bb(a,b,c){return 2>=arguments.length?La.slice.call(a,b):La.slice.call(a,b,c)}function cb(a,b,c){for(var d=0,e=a.length,f;d<e;){var g=d+e>>1,k;k=b(c,a[g]);0<k?d=g+1:(e=g,f=!k)}return f?d:~d}function db(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=eb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function fb(a,b){return a>b?1:a<b?-1:0}function eb(a,b){return a===b}function gb(a,b){var c=cb(a,hb||fb,b);0>c&&ab(a,-(c+1),0,b)};function ib(){return null}function jb(a){return function(){throw a;}};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function F(a,b){this.s=[];this.Ga=a;this.Y=b||null;this.l=this.h=!1;this.j=void 0;this.da=this.If=this.G=!1;this.n=0;this.i=null;this.O=0;this.S=null;if(Error.captureStackTrace){var c={stack:""};Error.captureStackTrace(c,F);"string"==typeof c.stack&&(this.S=c.stack.replace(/^[^\n]*\n/,""))}}function kb(a,b){if(a.h)a.j instanceof F&&kb(a.j);else{if(a.i){var c=a.i;delete a.i;b?kb(c,b):(c.O--,0>=c.O&&kb(c))}a.Ga?a.Ga.call(a.Y,a):a.da=!0;a.h||a.A(new lb)}}h=F.prototype;
h.nd=function(a,b){this.G=!1;mb(this,a,b)};function mb(a,b,c){a.h=!0;a.j=c;a.l=!b;a.ue()}function nb(a){if(a.h){if(!a.da)throw new ob;a.da=!1}}h.w=function(a){nb(this);mb(this,!0,a)};h.A=function(a){nb(this);pb(this,a);mb(this,!1,a)};function pb(a,b){a.S&&A(b)&&b.stack&&/^[^\n]+(\n   [^\n]+)+/.test(b.stack)&&(b.stack=b.stack+"\nDEFERRED OPERATION:\n"+a.S)}h.B=function(a,b){return this.u(a,null,b)};h.Dc=function(a,b){return this.u(null,a,b)};h.fa=function(a,b){return this.u(a,a,b)};
h.u=function(a,b,c){this.s.push([a,b,c]);this.h&&this.ue();return this};function qb(a,b){a.u(b.w,b.A,b)}function rb(a){return Qa(a.s,function(a){return ga(a[1])})}
h.ue=function(){this.n&&this.h&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.i&&(this.i.O--,delete this.i);for(var a=this.j,b=!1,c=!1;this.s.length&&!this.G;){var d=this.s.shift(),e=d[0],f=d[1],d=d[2];if(e=this.l?f:e)try{var g=e.call(d||this.Y,a);t(g)&&(this.l=this.l&&(g==a||g instanceof Error),this.j=a=g);a instanceof F&&(this.G=c=!0)}catch(k){a=k,this.l=!0,pb(this,a),rb(this)||(b=!0)}}this.j=a;c&&(a.u(B(this.nd,this,!0),B(this.nd,this,!1)),a.If=!0);b&&(this.n=r.setTimeout(jb(a),0))};
function sb(a){var b=new F;b.w(a);return b}function tb(a){var b=new F;b.A(a);return b}function ub(a){Error.captureStackTrace?Error.captureStackTrace(this,ub):this.stack=Error().stack||"";a&&(this.message=String(a))}E(ub,Error);function ob(){ub.call(this)}E(ob,ub);ob.prototype.message="Deferred has already fired";ob.prototype.name="AlreadyCalledError";function lb(){ub.call(this)}E(lb,ub);lb.prototype.message="Deferred was canceled";lb.prototype.name="CanceledError";function vb(){0!=wb&&(xb[ia(this)]=this)}var wb=0,xb={};vb.prototype.G=!1;vb.prototype.ra=function(){if(!this.G&&(this.G=!0,this.I(),0!=wb)){var a=ia(this);delete xb[a]}};vb.prototype.I=function(){if(this.Qa)for(;this.Qa.length;)this.Qa.shift()()};var yb,zb,Ab,Bb,Cb,Db;function Eb(){return r.navigator?r.navigator.userAgent:null}function Fb(){return r.navigator}Cb=Bb=Ab=zb=yb=!1;var Gb;if(Gb=Eb()){var Hb=Fb();yb=ra(Gb,"Opera");zb=!yb&&(-1!=Gb.indexOf("MSIE")||-1!=Gb.indexOf("Trident"));Bb=(Ab=!yb&&-1!=Gb.indexOf("WebKit"))&&-1!=Gb.indexOf("Mobile");Cb=!yb&&!Ab&&!zb&&"Gecko"==Hb.product}var Ib=yb,H=zb,Jb=Cb,Kb=Ab,Lb=Bb,Mb=Fb();Db=-1!=(Mb&&Mb.platform||"").indexOf("Mac");var Nb=!!Fb()&&-1!=(Fb().appVersion||"").indexOf("X11");
function Ob(){var a=r.document;return a?a.documentMode:void 0}var Pb;a:{var Qb="",Rb;if(Ib&&r.opera)var Sb=r.opera.version,Qb="function"==typeof Sb?Sb():Sb;else if(Jb?Rb=/rv\:([^\);]+)(\)|;)/:H?Rb=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Kb&&(Rb=/WebKit\/(\S+)/),Rb)var Tb=Rb.exec(Eb()),Qb=Tb?Tb[1]:"";if(H){var Ub=Ob();if(Ub>parseFloat(Qb)){Pb=String(Ub);break a}}Pb=Qb}var Vb={};
function Wb(a){var b;if(!(b=Vb[a])){b=0;for(var c=va(String(Pb)).split("."),d=va(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",l=/(\d*)(\D*)/g,m=/(\d*)(\D*)/g;do{var n=l.exec(g)||["","",""],p=m.exec(k)||["","",""];if(0==n[0].length&&0==p[0].length)break;b=((0==n[1].length?0:parseInt(n[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==n[1].length?0:parseInt(n[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==n[2].length)<(0==p[2].length)?-1:
(0==n[2].length)>(0==p[2].length)?1:0)||(n[2]<p[2]?-1:n[2]>p[2]?1:0)}while(0==b)}b=Vb[a]=0<=b}return b}var Xb=r.document,Yb=Xb&&H?Ob()||("CSS1Compat"==Xb.compatMode?parseInt(Pb,10):5):void 0;var Zb=!H||H&&9<=Yb,$b=!H||H&&9<=Yb,ac=H&&!Wb("9");!Kb||Wb("528");Jb&&Wb("1.9b")||H&&Wb("8")||Ib&&Wb("9.5")||Kb&&Wb("528");Jb&&!Wb("8")||H&&Wb("9");function K(a,b){this.type=a;this.i=this.target=b}h=K.prototype;h.ra=function(){};h.Ob=!1;h.gg=!0;h.Mc=function(){this.Ob=!0};h.preventDefault=function(){this.gg=!1};function bc(a){bc[" "](a);return a}bc[" "]=ca;function cc(a,b){K.call(this,a?a.type:"");this.j=this.i=this.target=null;this.g=this.clientY=this.clientX=0;this.l=this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.h=null;a&&this.init(a,b)}E(cc,K);var dc=[1,4,2];
cc.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.i=b;var d=a.relatedTarget;if(d){if(Jb){var e;a:{try{bc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.j=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.g=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.l=Db?a.metaKey:
a.ctrlKey;this.h=a;a.defaultPrevented&&this.preventDefault();delete this.Ob};function ec(a){return Zb?0==a.h.button:"click"==a.type?!0:!!(a.h.button&dc[0])}cc.prototype.Mc=function(){cc.m.Mc.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};cc.prototype.preventDefault=function(){cc.m.preventDefault.call(this);var a=this.h;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,ac)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var fc="closure_listenable_"+(1E6*Math.random()|0);function gc(a){try{return!(!a||!a[fc])}catch(b){return!1}}var hc=0;function ic(a,b,c,d,e){this.cc=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Ua=e;this.key=++hc;this.removed=this.kd=!1}function jc(a){a.removed=!0;a.cc=null;a.proxy=null;a.src=null;a.Ua=null};function kc(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function lc(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function mc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function nc(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function pc(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function qc(a){var b={},c;for(c in a)b[c]=a[c];return b}function rc(a){var b={},c;for(c in a)b[a[c]]=c;return b}var sc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function tc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<sc.length;f++)c=sc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function uc(a){var b=arguments.length;if(1==b&&u(arguments[0]))return uc.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};function vc(a){this.src=a;this.g={};this.h=0}vc.prototype.add=function(a,b,c,d,e){var f=this.g[a];f||(f=this.g[a]=[],this.h++);var g=wc(f,b,d,e);-1<g?(a=f[g],c||(a.kd=!1)):(a=new ic(b,this.src,a,!!d,e),a.kd=c,f.push(a));return a};vc.prototype.remove=function(a,b,c,d){if(!(a in this.g))return!1;var e=this.g[a];b=wc(e,b,c,d);return-1<b?(jc(e[b]),Xa(e,b),0==e.length&&(delete this.g[a],this.h--),!0):!1};
function xc(a,b){var c=b.type;if(!(c in a.g))return!1;var d=Wa(a.g[c],b);d&&(jc(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d}vc.prototype.removeAll=function(a){var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,jc(d[e]);delete this.g[c];this.h--}return b};function yc(a,b,c,d,e){a=a.g[b];b=-1;a&&(b=wc(a,c,d,e));return-1<b?a[b]:null}function wc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.cc==b&&f.capture==!!c&&f.Ua==d)return e}return-1};var zc="closure_lm_"+(1E6*Math.random()|0),Ac={},Bc=0;function Cc(a,b,c,d,e){if(u(b)){for(var f=0;f<b.length;f++)Cc(a,b[f],c,d,e);return null}c=Dc(c);return gc(a)?a.listen(b,c,d,e):Ec(a,b,c,!1,d,e)}function Ec(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=!!e,k=Fc(a);k||(a[zc]=k=new vc(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=Gc();c.proxy=d;d.src=a;d.cc=c;a.addEventListener?a.addEventListener(b,d,g):a.attachEvent(b in Ac?Ac[b]:Ac[b]="on"+b,d);Bc++;return c}
function Gc(){var a=Hc,b=$b?function(c){return a.call(b.src,b.cc,c)}:function(c){c=a.call(b.src,b.cc,c);if(!c)return c};return b}function Ic(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Ic(a,b[f],c,d,e);else c=Dc(c),gc(a)?a.ob.add(String(b),c,!0,d,e):Ec(a,b,c,!0,d,e)}function Jc(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)Jc(a,b[f],c,d,e);else c=Dc(c),gc(a)?a.Fa(b,c,d,e):a&&(a=Fc(a))&&(b=yc(a,b,c,!!d,e))&&Kc(b)}
function Kc(a){if(y(a)||!a||a.removed)return!1;var b=a.src;if(gc(b))return xc(b.ob,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent&&b.detachEvent(c in Ac?Ac[c]:Ac[c]="on"+c,d);Bc--;(c=Fc(b))?(xc(c,a),0==c.h&&(c.src=null,b[zc]=null)):jc(a);return!0}function Lc(a,b,c,d){var e=1;if(a=Fc(a))if(b=a.g[b])for(b=Za(b),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.removed&&(e&=!1!==Mc(f,d))}return Boolean(e)}
function Mc(a,b){var c=a.cc,d=a.Ua||a.src;a.kd&&Kc(a);return c.call(d,b)}
function Hc(a,b){if(a.removed)return!0;if(!$b){var c=b||ba("window.event"),d=new cc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(g){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.i;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.Ob&&0<=k;k--)d.i=c[k],e&=Lc(c[k],f,!0,d);for(k=0;!d.Ob&&k<c.length;k++)d.i=c[k],e&=Lc(c[k],f,!1,d)}return e}return Mc(a,new cc(b,this))}
function Fc(a){a=a[zc];return a instanceof vc?a:null}var Nc="__closure_events_fn_"+(1E9*Math.random()>>>0);function Dc(a){return ga(a)?a:a[Nc]||(a[Nc]=function(b){return a.handleEvent(b)})};function L(){vb.call(this);this.ob=new vc(this);this.Sb=this}E(L,vb);L.prototype[fc]=!0;h=L.prototype;h.Md=null;h.lf=function(a){this.Md=a};h.removeEventListener=function(a,b,c,d){Jc(this,a,b,c,d)};
h.dispatchEvent=function(a){var b,c=this.Md;if(c)for(b=[];c;c=c.Md)b.push(c);var c=this.Sb,d=a.type||a;if(x(a))a=new K(a,c);else if(a instanceof K)a.target=a.target||c;else{var e=a;a=new K(d,c);tc(a,e)}var e=!0,f;if(b)for(var g=b.length-1;!a.Ob&&0<=g;g--)f=a.i=b[g],e=Oc(f,d,!0,a)&&e;a.Ob||(f=a.i=c,e=Oc(f,d,!0,a)&&e,a.Ob||(e=Oc(f,d,!1,a)&&e));if(b)for(g=0;!a.Ob&&g<b.length;g++)f=a.i=b[g],e=Oc(f,d,!1,a)&&e;return e};h.I=function(){L.m.I.call(this);this.ob&&this.ob.removeAll(void 0);this.Md=null};
h.listen=function(a,b,c,d){return this.ob.add(String(a),b,!1,c,d)};h.Fa=function(a,b,c,d){return this.ob.remove(String(a),b,c,d)};function Oc(a,b,c,d){b=a.ob.g[String(b)];if(!b)return!0;b=Za(b);for(var e=!0,f=0;f<b.length;++f){var g=b[f];if(g&&!g.removed&&g.capture==c){var k=g.cc,l=g.Ua||g.src;g.kd&&xc(a.ob,g);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.gg};function M(a){pa.call(this,a);this.name="ydn.error.ArgumentException"}E(M,pa);function Pc(a){pa.call(this,a);this.name="ydn.error.NotSupportedException"}E(Pc,pa);function Qc(a){pa.call(this,a);this.name="ydn.error.NotImplementedException"}E(Qc,pa);function Rc(a){pa.call(this,a);this.name="ydn.error.InvalidOperationException"}E(Rc,pa);
function Sc(a){Error.captureStackTrace?Error.captureStackTrace(this,Sc):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Sc,Error);Sc.prototype.name="ydn.error.InternalError";function Tc(a,b){F.call(this,a,b);this.o=[]}E(Tc,F);function Uc(a,b){for(var c=0;c<a.o.length;c++)a.o[c][0].call(a.o[c][1],b)}Tc.prototype.w=function(a){this.o.length=0;Tc.m.w.call(this,a)};Tc.prototype.A=function(a){this.o.length=0;Tc.m.A.call(this,a)};function Vc(a){this.id="i"+this.count();this.req=a;this.i=!0;this.g=this.h=null;this.j=new Tc;this.l=NaN}Vc.prototype.F=function(){return this.id};var Wc=0;Vc.prototype.count=function(){Wc++;return Wc};
Vc.prototype.listen=function(a){if(a&&a.id==this.id){this.h=a.data;var b=a.error;b&&(b instanceof Error?this.g=b:A(b)?(this.g=Error(b.message),this.g.name=b.name,this.g.source=b,this.g.result=this.h):(this.g=Error(b),this.g.name="UnknownError"));a.done?(this.i=!1,this.g?this.j.A(this.g):this.j.w(this.h),window.clearTimeout(this.l)):Uc(this.j,a.data);return!0}return!1};Vc.prototype.toString=function(){return"Message:"+this.id+(this.i?"*":"")};
Vc.prototype.toJSON=function(){var a=this;this.l=window.setTimeout(function(){if(a.i){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},5E3);return{id:this.id,req:this.req,group:this.n,name:this.o,data:this.h}};function Yc(a){L.call(this);var b=x(a)?null:a;this.name=x(a)?a:a.name;this.g=[];this.n=b;this.h=null;this.i={}}E(Yc,L);Yc.prototype.I=function(){if(this.h){var a=this;this.h.disconnect(function(){a.h=null;a.g.length=0})}else this.g.length=0};function Zc(a){K.call(this,"post");this.message=a}E(Zc,K);Zc.prototype.getMessage=function(){return this.message};
Yc.prototype.l=function(a){if(a)if(a.id)for(var b=this.g.length-1;0<=b;b--){if(this.g[b].F()==a.id&&this.g[b].listen(a)){this.g[b].i?25<b&&(a=this.g.splice(b,1),this.g.unshift(a[0])):this.g.splice(b,1);break}}else"info"==a.req?(a.data=this.n,this.h.postMessage(a)):this.dispatchEvent(new Zc(a))};Yc.prototype.toString=function(){return"Pipe:"+this.name};Yc.prototype.j=function(a,b){var c=a||$c,d=c+(b?"-"+b:"");this.i[d]||(this.i[d]=new ad(this,c,b||""));return this.i[d]};
function bd(a){if(!a.h){a.h=chrome.runtime.connect({name:a.name});var b=B(a.l,a);a.h.onMessage.addListener(b);a.h.onDisconnect.addListener(function(){a.h.onMessage.removeListener(b);a.h=null;a.g.length=0})}return a.h}var cd=null;function dd(){if(!cd){var a=$c+"-"+C();cd=new Yc(a)}return cd}function ed(a){var b=a;x(a)&&(b={group:a,name:a+"-"+C()});cd=new Yc(b)}var $c="default",fd=["gmail","host-permission","popup","options"];function gd(a,b){return dd().j(a,b)}
function ad(a,b,c){this.g=a;this.h=b;this.i=c}ad.prototype.send=function(a,b){var c=new Vc(a),d=this.i;c.n=this.h;c.o=d;b&&(c.h=b);var d=c.j,e=this.g,f=c.toJSON();bd(e).postMessage(f);e.g.push(c);50<e.g.length&&(e.g.length-=1);return d};function hd(a){if("function"==typeof a.ya)return a.ya();if(x(a))return a.split("");if(w(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return lc(a)}function id(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(w(a)||x(a))Na(a,b,c);else{var d;if("function"==typeof a.Ma)d=a.Ma();else if("function"!=typeof a.ya)if(w(a)||x(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=mc(a);else d=void 0;for(var e=hd(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};var jd="StopIteration"in r?r.StopIteration:Error("StopIteration");function kd(){}kd.prototype.next=function(){throw jd;};kd.prototype.Db=function(){return this};function ld(a){if(a instanceof kd)return a;if("function"==typeof a.Db)return a.Db(!1);if(w(a)){var b=0,c=new kd;c.next=function(){for(;;){if(b>=a.length)throw jd;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function md(a,b){if(w(a))try{Na(a,b,void 0)}catch(c){if(c!==jd)throw c;}else{a=ld(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==jd)throw d;}}}function nd(a){if(w(a))return Za(a);a=ld(a);var b=[];md(a,function(a){b.push(a)});return b};function od(a,b){this.h={};this.g=[];this.j=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof od?(c=a.Ma(),d=a.ya()):(c=mc(a),d=lc(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=od.prototype;h.ha=function(){return this.i};h.ya=function(){pd(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};h.Ma=function(){pd(this);return this.g.concat()};
h.Va=function(){return 0==this.i};h.clear=function(){this.h={};this.j=this.i=this.g.length=0};h.remove=function(a){return qd(this.h,a)?(delete this.h[a],this.i--,this.j++,this.g.length>2*this.i&&pd(this),!0):!1};function pd(a){if(a.i!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];qd(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.i!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],qd(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}h.get=function(a,b){return qd(this.h,a)?this.h[a]:b};
h.set=function(a,b){qd(this.h,a)||(this.i++,this.g.push(a),this.j++);this.h[a]=b};h.ga=function(){return new od(this)};h.Db=function(a){pd(this);var b=0,c=this.g,d=this.h,e=this.j,f=this,g=new kd;g.next=function(){for(;;){if(e!=f.j)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw jd;var g=c[b++];return a?g:d[g]}};return g};function qd(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var rd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function sd(a){if(td){td=!1;var b=r.location;if(b){var c=b.href;if(c&&(c=(c=sd(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw td=!0,Error();}}return a.match(rd)}var td=Kb;function ud(a,b){var c;if(a instanceof ud)this.Yb=t(b)?b:a.Yb,vd(this,a.ic),this.Vd=a.Vd,wd(this,a.M()),xd(this,a.vd),yd(this,a.wc),zd(this,a.g.ga()),Ad(this,a.ve);else if(a&&(c=sd(String(a)))){this.Yb=!!b;vd(this,c[1]||"",!0);var d=c[2]||"";this.Vd=d?decodeURIComponent(d):"";wd(this,c[3]||"",!0);xd(this,c[4]);yd(this,c[5]||"",!0);zd(this,c[6]||"",!0);Ad(this,c[7]||"",!0)}else this.Yb=!!b,this.g=new Bd(null,0,this.Yb)}h=ud.prototype;h.ic="";h.Vd="";h.se="";h.vd=null;h.wc="";h.ve="";h.Yb=!1;
h.toString=function(){var a=[],b=this.ic;b&&a.push(Cd(b,Dd),":");if(b=this.M()){a.push("//");var c=this.Vd;c&&a.push(Cd(c,Dd),"@");a.push(encodeURIComponent(String(b)));b=this.vd;null!=b&&a.push(":",String(b))}if(b=this.wc)this.se&&"/"!=b.charAt(0)&&a.push("/"),a.push(Cd(b,"/"==b.charAt(0)?Ed:Fd));(b=this.g.toString())&&a.push("?",b);(b=this.ve)&&a.push("#",Cd(b,Gd));return a.join("")};h.ga=function(){return new ud(this)};
function vd(a,b,c){a.ic=c?b?decodeURIComponent(b):"":b;a.ic&&(a.ic=a.ic.replace(/:$/,""));return a}h.M=function(){return this.se};function wd(a,b,c){a.se=c?b?decodeURIComponent(b):"":b;return a}function xd(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.vd=b}else a.vd=null}function Hd(a){return a.wc}function yd(a,b,c){a.wc=c?b?decodeURIComponent(b):"":b}function zd(a,b,c){b instanceof Bd?(a.g=b,Id(a.g,a.Yb)):(c||(b=Cd(b,Jd)),a.g=new Bd(b,0,a.Yb))}
function Ad(a,b,c){a.ve=c?b?decodeURIComponent(b):"":b}function Cd(a,b){return x(a)?encodeURI(a).replace(b,Ld):null}function Ld(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Dd=/[#\/\?@]/g,Fd=/[\#\?:]/g,Ed=/[\#\?]/g,Jd=/[\#\?@]/g,Gd=/#/g;function Bd(a,b,c){this.g=a||null;this.h=!!c}
function Md(a){if(!a.ma&&(a.ma=new od,a.Ka=0,a.g))for(var b=a.g.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=Nd(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}h=Bd.prototype;h.ma=null;h.Ka=null;h.ha=function(){Md(this);return this.Ka};h.add=function(a,b){Md(this);this.g=null;a=Nd(this,a);var c=this.ma.get(a);c||this.ma.set(a,c=[]);c.push(b);this.Ka++;return this};
h.remove=function(a){Md(this);a=Nd(this,a);return qd(this.ma.h,a)?(this.g=null,this.Ka-=this.ma.get(a).length,this.ma.remove(a)):!1};h.clear=function(){this.ma=this.g=null;this.Ka=0};h.Va=function(){Md(this);return 0==this.Ka};function Od(a,b){Md(a);b=Nd(a,b);return qd(a.ma.h,b)}h.Ma=function(){Md(this);for(var a=this.ma.ya(),b=this.ma.Ma(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.ya=function(a){Md(this);var b=[];if(x(a))Od(this,a)&&(b=Ya(b,this.ma.get(Nd(this,a))));else{a=this.ma.ya();for(var c=0;c<a.length;c++)b=Ya(b,a[c])}return b};h.set=function(a,b){Md(this);this.g=null;a=Nd(this,a);Od(this,a)&&(this.Ka-=this.ma.get(a).length);this.ma.set(a,[b]);this.Ka++;return this};h.get=function(a,b){var c=a?this.ya(a):[];return 0<c.length?String(c[0]):b};
h.toString=function(){if(this.g)return this.g;if(!this.ma)return"";for(var a=[],b=this.ma.Ma(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ya(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.g=a.join("&")};h.ga=function(){var a=new Bd;a.g=this.g;this.ma&&(a.ma=this.ma.ga(),a.Ka=this.Ka);return a};function Nd(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}
function Id(a,b){b&&!a.h&&(Md(a),a.g=null,id(a.ma,function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.g=null,this.ma.set(Nd(this,e),Za(a)),this.Ka+=a.length))},a));a.h=b};var Pd;
Pd={i:["BC","AD"],h:["Before Christ","Anno Domini"],o:"JFMAMJJASOND".split(""),Y:"JFMAMJJASOND".split(""),n:"January February March April May June July August September October November December".split(" "),S:"January February March April May June July August September October November December".split(" "),C:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),ia:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Sb:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Qa:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
O:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Ga:"Sun Mon Tue Wed Thu Fri Sat".split(" "),s:"SMTWTFS".split(""),da:"SMTWTFS".split(""),J:["Q1","Q2","Q3","Q4"],G:["1st quarter","2nd quarter","3rd quarter","4th quarter"],g:["AM","PM"],uf:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Cf:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],vg:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],j:6,zf:[5,6],l:5};function Qd(a){this.h=[];this.g=Pd;"number"==typeof a?Rd(this,a):Sd(this,a)}var Td=[/^\'(?:[^\']|\'\')*\'/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|w+|z+|Z+)/,/^[^\'GyMkSEahKHcLQdmsvwzZ]+/];function Sd(a,b){for(;b;)for(var c=0;c<Td.length;++c){var d=b.match(Td[c]);if(d){d=d[0];b=b.substring(d.length);0==c&&("''"==d?d="'":(d=d.substring(1,d.length-1),d=d.replace(/\'\'/,"'")));a.h.push({text:d,type:c});break}}}
function Rd(a,b){var c;if(4>b)c=a.g.uf[b];else if(8>b)c=a.g.Cf[b-4];else if(12>b)c=a.g.vg[b-8],c=c.replace("{1}",a.g.uf[b-8]),c=c.replace("{0}",a.g.Cf[b-8]);else{Rd(a,10);return}Sd(a,c)}function Ud(a){var b=Qd.prototype;if(void 0===b.g||void 0===b.g.Cg)return a;for(var c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(b.g.Cg+e-48):a.charAt(d))}return c.join("")};var Vd={tg:{1E3:{other:"0K"},1E4:{other:"00K"},1E5:{other:"000K"},1E6:{other:"0M"},1E7:{other:"00M"},1E8:{other:"000M"},1E9:{other:"0B"},1E10:{other:"00B"},1E11:{other:"000B"},1E12:{other:"0T"},1E13:{other:"00T"},1E14:{other:"000T"}},sg:{1E3:{other:"0 thousand"},1E4:{other:"00 thousand"},1E5:{other:"000 thousand"},1E6:{other:"0 million"},1E7:{other:"00 million"},1E8:{other:"000 million"},1E9:{other:"0 billion"},1E10:{other:"00 billion"},1E11:{other:"000 billion"},1E12:{other:"0 trillion"},1E13:{other:"00 trillion"},
1E14:{other:"000 trillion"}}},Wd=Vd,Wd=Vd;var Xd={wf:".",yf:",",Af:"%",ge:"0",Ag:"+",xg:"-",xf:"E",Bf:"\u2030",fe:"\u221e",yg:"NaN",vf:"#,##0.###",Bg:"#E0",zg:"#,##0%",ug:"\u00a4#,##0.00;(\u00a4#,##0.00)",wg:"USD"},Yd=Xd,Yd=Xd;var Zd={AED:[2,"dh","\u062f.\u0625.","DH"],ALL:[0,"Lek","Lek"],AUD:[2,"$","AU$"],BDT:[2,"\u09f3","Tk"],BGN:[2,"lev","lev"],BRL:[2,"R$","R$"],CAD:[2,"$","C$"],CDF:[2,"FrCD","CDF"],CHF:[2,"CHF","CHF"],CLP:[0,"$","CL$"],CNY:[2,"\u00a5","RMB\u00a5"],COP:[0,"$","COL$"],CRC:[0,"\u20a1","CR\u20a1"],CZK:[50,"K\u010d","K\u010d"],DKK:[18,"kr","kr"],DOP:[2,"$","RD$"],EGP:[2,"\u00a3","LE"],ETB:[2,"Birr","Birr"],EUR:[2,"\u20ac","\u20ac"],GBP:[2,"\u00a3","GB\u00a3"],HKD:[2,"$","HK$"],HRK:[2,"kn","kn"],HUF:[0,"Ft",
"Ft"],IDR:[0,"Rp","Rp"],ILS:[2,"\u20aa","IL\u20aa"],INR:[2,"\u20b9","Rs"],IRR:[0,"Rial","IRR"],ISK:[0,"kr","kr"],JMD:[2,"$","JA$"],JPY:[0,"\u00a5","JP\u00a5"],KRW:[0,"\u20a9","KR\u20a9"],LKR:[2,"Rs","SLRs"],LTL:[2,"Lt","Lt"],LVL:[2,"Ls","Ls"],MNT:[0,"\u20ae","MN\u20ae"],MXN:[2,"$","Mex$"],MYR:[2,"RM","RM"],NOK:[50,"kr","NOkr"],PAB:[2,"B/.","B/."],PEN:[2,"S/.","S/."],PHP:[2,"\u20b1","Php"],PKR:[0,"Rs","PKRs."],PLN:[50,"z\u0142","z\u0142"],RON:[2,"RON","RON"],RSD:[0,"din","RSD"],RUB:[50,"\u0440\u0443\u0431.",
"\u0440\u0443\u0431."],SAR:[2,"Rial","Rial"],SEK:[2,"kr","kr"],SGD:[2,"$","S$"],THB:[2,"\u0e3f","THB"],TRY:[2,"TL","YTL"],TWD:[2,"NT$","NT$"],TZS:[0,"TSh","TSh"],UAH:[2,"\u20b4","UAH"],USD:[2,"$","US$"],UYU:[2,"$","$U"],VND:[0,"\u20ab","VN\u20ab"],YER:[0,"Rial","Rial"],ZAR:[2,"R","ZAR"]};function $d(a,b,c){this.s=b||Yd.wg;this.Qa=c||ae;this.J=40;this.g=1;this.da=0;this.j=3;this.O=this.h=0;this.Ga=!1;this.C=this.l="";this.i="-";this.n="";this.G=1;this.Y=3;this.S=this.ia=!1;this.o=be;if("number"==typeof a)switch(a){case 1:ce(this,Yd.vf);break;case 2:ce(this,Yd.Bg);break;case 3:ce(this,Yd.zg);break;case 4:a=Yd.ug;b=["0"];c=Zd[this.s][0]&7;if(0<c){b.push(".");for(var d=0;d<c;d++)b.push("0")}a=a.replace(/0.00/g,b.join(""));ce(this,a);break;case 5:de(this,1);break;case 6:de(this,2);break;
default:throw Error("Unsupported pattern type.");}else ce(this,a)}var ae=0,be=0;
function ce(a,b){b.replace(/ /g,"\u00a0");var c=[0];a.l=ee(a,b,c);for(var d=c[0],e=-1,f=0,g=0,k=0,l=-1,m=b.length,n=!0;c[0]<m&&n;c[0]++)switch(b.charAt(c[0])){case "#":0<g?k++:f++;0<=l&&0>e&&l++;break;case "0":if(0<k)throw Error('Unexpected "0" in pattern "'+b+'"');g++;0<=l&&0>e&&l++;break;case ",":l=0;break;case ".":if(0<=e)throw Error('Multiple decimal separators in pattern "'+b+'"');e=f+g+k;break;case "E":if(a.S)throw Error('Multiple exponential symbols in pattern "'+b+'"');a.S=!0;a.O=0;c[0]+1<
m&&"+"==b.charAt(c[0]+1)&&(c[0]++,a.Ga=!0);for(;c[0]+1<m&&"0"==b.charAt(c[0]+1);)c[0]++,a.O++;if(1>f+g||1>a.O)throw Error('Malformed exponential pattern "'+b+'"');n=!1;break;default:c[0]--,n=!1}0==g&&0<f&&0<=e&&(g=e,0==g&&g++,k=f-g,f=g-1,g=1);if(0>e&&0<k||0<=e&&(e<f||e>f+g)||0==l)throw Error('Malformed pattern "'+b+'"');k=f+g+k;a.j=0<=e?k-e:0;0<=e&&(a.h=f+g-e,0>a.h&&(a.h=0));a.g=(0<=e?e:k)-f;a.S&&(a.J=f+a.g,0==a.j&&0==a.g&&(a.g=1));a.Y=Math.max(0,l);a.ia=0==e||e==k;d=c[0]-d;a.C=ee(a,b,c);c[0]<b.length&&
b.charAt(c[0])==fe?(c[0]++,a.i=ee(a,b,c),c[0]+=d,a.n=ee(a,b,c)):(a.i=a.l+a.i,a.n+=a.C)}function de(a,b){a.o=b;ce(a,Yd.vf);a.h=0;a.j=2;if(0<a.h)throw Error("Can't combine significant digits and minimum fraction digits");a.da=2}
$d.prototype.parse=function(a,b){var c=b||[0];if(this.o!=be)throw Error("Parsing of compact numbers is unimplemented");var d=NaN;a=a.replace(/ /g,"\u00a0");var e=a.indexOf(this.l,c[0])==c[0],f=a.indexOf(this.i,c[0])==c[0];e&&f&&(this.l.length>this.i.length?f=!1:this.l.length<this.i.length&&(e=!1));e?c[0]+=this.l.length:f&&(c[0]+=this.i.length);if(a.indexOf(Yd.fe,c[0])==c[0])c[0]+=Yd.fe.length,d=Infinity;else{var d=a,g=!1,k=!1,l=!1,m=1,n=Yd.wf,p=Yd.yf,q=Yd.xf;if(this.o!=be)throw Error("Parsing of compact style numbers is not implemented");
for(var s="";c[0]<d.length;c[0]++){var v=d.charAt(c[0]),z=ge(v);if(0<=z&&9>=z)s+=z,l=!0;else if(v==n.charAt(0)){if(g||k)break;s+=".";g=!0}else if(v==p.charAt(0)&&("\u00a0"!=p.charAt(0)||c[0]+1<d.length&&0<=ge(d.charAt(c[0]+1)))){if(g||k)break}else if(v==q.charAt(0)){if(k)break;s+="E";k=!0}else if("+"==v||"-"==v)s+=v;else if(v==Yd.Af.charAt(0)){if(1!=m)break;m=100;if(l){c[0]++;break}}else if(v==Yd.Bf.charAt(0)){if(1!=m)break;m=1E3;if(l){c[0]++;break}}else break}d=parseFloat(s)/m}if(e){if(a.indexOf(this.C,
c[0])!=c[0])return NaN;c[0]+=this.C.length}else if(f){if(a.indexOf(this.n,c[0])!=c[0])return NaN;c[0]+=this.n.length}return f?-d:d};function he(a,b){var c=Math.pow(10,a.j),d=0>=a.da?Math.round(b*c):Math.floor(ie(b*c,a.da,a.j)),e;isFinite(d)?(e=Math.floor(d/c),c=Math.floor(d-e*c)):(e=b,c=0);return{$f:e,Gg:c}}
function je(a,b,c,d){if(a.h>a.j)throw Error("Min value must be less than max value");b=he(a,b);var e=Math.pow(10,a.j),f=b.$f,g=b.Gg,k=0<a.h||0<g||!1;b=a.h;k&&(b=a.h);for(var l="",m=f;1E20<m;)l="0"+l,m=Math.round(m/10);var l=m+l,n=Yd.wf,p=Yd.yf,m=Yd.ge.charCodeAt(0),q=l.length;if(0<f||0<c){for(f=q;f<c;f++)d.push(String.fromCharCode(m));for(f=0;f<q;f++)d.push(String.fromCharCode(m+1*l.charAt(f))),1<q-f&&0<a.Y&&1==(q-f)%a.Y&&d.push(p)}else k||d.push(String.fromCharCode(m));(a.ia||k)&&d.push(n);a=""+
(g+e);for(c=a.length;"0"==a.charAt(c-1)&&c>b+1;)c--;for(f=1;f<c;f++)d.push(String.fromCharCode(m+1*a.charAt(f)))}function ke(a,b,c){c.push(Yd.xf);0>b?(b=-b,c.push(Yd.xg)):a.Ga&&c.push(Yd.Ag);b=""+b;for(var d=Yd.ge,e=b.length;e<a.O;e++)c.push(d);c.push(b)}function ge(a){a=a.charCodeAt(0);if(48<=a&&58>a)return a-48;var b=Yd.ge.charCodeAt(0);return b<=a&&a<b+10?a-b:-1}var fe=";";
function ee(a,b,c){for(var d="",e=!1,f=b.length;c[0]<f;c[0]++){var g=b.charAt(c[0]);if("'"==g)c[0]+1<f&&"'"==b.charAt(c[0]+1)?(c[0]++,d+="'"):e=!e;else if(e)d+=g;else switch(g){case "#":case "0":case ",":case ".":case fe:return d;case "\u00a4":if(c[0]+1<f&&"\u00a4"==b.charAt(c[0]+1))c[0]++,d+=a.s;else switch(a.Qa){case ae:d+=Zd[a.s][1];break;case 2:var g=a.s,k=Zd[g],d=d+(g==k[1]?g:g+" "+k[1]);break;case 1:d+=Zd[a.s][2]}break;case "%":if(1!=a.G)throw Error("Too many percent/permill");a.G=100;d+=Yd.Af;
break;case "\u2030":if(1!=a.G)throw Error("Too many percent/permill");a.G=1E3;d+=Yd.Bf;break;default:d+=g}}return d}var le={prefix:"",jg:"",re:0};function me(a,b){var c=1==a.o?Wd.tg:Wd.sg;if(3>b)return le;b=Math.min(14,b);c=c[Math.pow(10,b)];if(!c)return le;c=c.other;return c&&"0"!=c?(c=/([^0]*)(0+)(.*)/.exec(c))?{prefix:c[1],jg:c[3],re:b-(c[2].length-1)}:le:le}function ne(a){for(var b=0;1<=(a/=10);)b++;return b}
function ie(a,b,c){if(!a)return a;b=b-ne(a)-1;if(b<-c)return c=Math.pow(10,c),Math.round(a/c)*c;c=Math.pow(10,b);return Math.round(a*c)/c};function oe(a){return 1==a%10&&11!=a%100?"one":2==a%10&&12!=a%100?"two":3==a%10&&13!=a%100?"few":"other"}var pe=oe,pe=oe;function qe(a){return 1==a?"one":"other"}var re=qe,re=qe;function se(a){this.g=[];this.i=[];this.j=new $d(1);a&&(a=te(this,a),this.i=ue(this,a))}var ve=/'([{}#].*?)'/g,we=/''/g;
function xe(a,b,c,d,e){for(var f=0;f<b.length;f++)switch(b[f].type){case 4:e.push(b[f].value);break;case 3:var g=b[f].value,k=a,l=e,m=c[g];t(m)?(k.g.push(m),l.push(k.h(k.g))):l.push("Undefined parameter - "+g);break;case 2:g=b[f].value;k=e;l=g.hd;t(c[l])?(l=g[c[l]],t(l)||(l=g.other),xe(a,l,c,d,k)):k.push("Undefined parameter - "+l);break;case 0:g=b[f].value;ye(a,g,c,re,d,e);break;case 1:g=b[f].value;ye(a,g,c,pe,d,e);break;default:Ka("Unrecognized block type.")}}
function ye(a,b,c,d,e,f){var g=b.hd,k=b.Gf,l=+c[g];if(isNaN(l))f.push("Undefined or invalid parameter - "+g);else if(k=l-k,g=b[c[g]],t(g)||(d=d(k),g=b[d],t(g)||(g=b.other)),b=[],xe(a,g,c,e,b),c=b.join(""),e)f.push(c);else{a=a.j;if(isNaN(k))a=Yd.yg;else{e=[];g=d=k;a.o==be?b=le:(d=Math.abs(d),g=Math.abs(g),b=me(a,1>=d?0:ne(d)).re,he(a,g/Math.pow(10,b)),d=he(a,d/Math.pow(10,b)),b=me(a,b+ne(d.$f)));k/=Math.pow(10,b.re);e.push(b.prefix);d=0>k||0==k&&0>1/k;e.push(d?a.i:a.l);if(isFinite(k))if(k=k*(d?-1:
1)*a.G,a.S)if(0==k)je(a,k,a.g,e),ke(a,0,e);else{g=Math.log(k)/Math.log(10);g=Math.floor(g+2E-15);k/=Math.pow(10,g);l=a.g;if(1<a.J&&a.J>a.g){for(;0!=g%a.J;)k*=10,g--;l=1}else 1>a.g?(g++,k/=10):(g-=a.g-1,k*=Math.pow(10,a.g-1));je(a,k,l,e);ke(a,g,e)}else je(a,k,a.g,e);else e.push(Yd.fe);e.push(d?a.n:a.C);e.push(b.jg);a=e.join("")}f.push(c.replace(/#/g,a))}}
function te(a,b){var c=a.g,d=B(a.h,a);b=b.replace(we,function(){c.push("'");return d(c)});return b=b.replace(ve,function(a,b){c.push(b);return d(c)})}function ze(a){var b=0,c=[],d=[],e=/[{}]/g;e.lastIndex=0;for(var f;f=e.exec(a);){var g=f.index;"}"==f[0]?(c.pop(),0==c.length&&(f={type:1},f.value=a.substring(b,g),d.push(f),b=g+1)):(0==c.length&&(b=a.substring(b,g),""!=b&&d.push({type:0,value:b}),b=g+1),c.push("{"))}b=a.substring(b);""!=b&&d.push({type:0,value:b});return d}
var Ae=/^\s*(\w+)\s*,\s*plural\s*,(?:\s*offset:(\d+))?/,Be=/^\s*(\w+)\s*,\s*selectordinal\s*,/,Ce=/^\s*(\w+)\s*,\s*select\s*,/;
function ue(a,b){for(var c=[],d=ze(b),e=0;e<d.length;e++){var f={};if(0==d[e].type)f.type=4,f.value=d[e].value;else if(1==d[e].type)switch(Ae.test(d[e].value)?0:Be.test(d[e].value)?1:Ce.test(d[e].value)?2:/^\s*\w+\s*/.test(d[e].value)?3:5){case 2:f.type=2;f.value=De(a,d[e].value);break;case 0:f.type=0;f.value=Ee(a,d[e].value);break;case 1:f.type=1;f.value=Fe(a,d[e].value);break;case 3:f.type=3;f.value=d[e].value;break;default:Ka("Unknown block type.")}else Ka("Unknown part of the pattern.");c.push(f)}return c}
function De(a,b){var c="";b=b.replace(Ce,function(a,b){c=b;return""});var d={};d.hd=c;for(var e=ze(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=ue(a,e[f].value);else Ka("Expected block type.");d[g.replace(/\s/g,"")]=k;f++}return d}
function Ee(a,b){var c="",d=0;b=b.replace(Ae,function(a,b,e){c=b;e&&(d=parseInt(e,10));return""});var e={};e.hd=c;e.Gf=d;for(var f=ze(b),g=0;g<f.length;){var k=f[g].value;g++;if(1==f[g].type)var l=ue(a,f[g].value);else Ka("Expected block type.");e[k.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=l;g++}return e}
function Fe(a,b){var c="";b=b.replace(Be,function(a,b){c=b;return""});var d={};d.hd=c;d.Gf=0;for(var e=ze(b),f=0;f<e.length;){var g=e[f].value;f++;if(1==e[f].type)var k=ue(a,e[f].value);else Ka("Expected block type.");d[g.replace(/\s*(?:=)?(\w+)\s*/,"$1")]=k;f++}return d}se.prototype.h=function(a){return"\ufddf_"+(a.length-1).toString(10)+"_"};function Ge(a,b,c){a=new se(a);b={COUNT:b,TEXT:c};if(0==a.i.length)a="";else{c=[];xe(a,a.i,b,!1,c);for(b=c.join("");0<a.g.length;)b=b.replace(a.h(a.g),a.g.pop());a=b}return a};function He(a){this.g=new od;if(a){a=hd(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function Ie(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ia(a):b.substr(0,1)+a}h=He.prototype;h.ha=function(){return this.g.ha()};h.add=function(a){this.g.set(Ie(a),a)};h.removeAll=function(a){a=hd(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};h.remove=function(a){return this.g.remove(Ie(a))};h.clear=function(){this.g.clear()};h.Va=function(){return this.g.Va()};
h.contains=function(a){a=Ie(a);return qd(this.g.h,a)};h.ya=function(){return this.g.ya()};h.ga=function(){return new He(this)};h.Db=function(){return this.g.Db(!1)};function Je(a){return Ke(a||arguments.callee.caller,[])}
function Ke(a,b){var c=[];if(Ua(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Le(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Le(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Ke(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Le(a){if(Me[a])return Me[a];a=String(a);if(!Me[a]){var b=/function ([^\(]+)/.exec(a);Me[a]=b?b[1]:"[Anonymous]"}return Me[a]}var Me={};function Ne(a,b,c,d,e){this.n="number"==typeof e?e:Oe++;this.l=d||C();this.j=a;this.o=b;this.h=c;delete this.i;delete this.g}Ne.prototype.n=0;Ne.prototype.i=null;Ne.prototype.g=null;var Oe=0;Ne.prototype.getMessage=function(){return this.o};function Pe(a){this.l=a}Pe.prototype.i=null;Pe.prototype.h=null;Pe.prototype.j=null;Pe.prototype.g=null;function Qe(a,b){this.name=a;this.value=b}Qe.prototype.toString=function(){return this.name};var Re=new Qe("SHOUT",1200),Se=new Qe("SEVERE",1E3),Te=new Qe("WARNING",900),Ue=new Qe("INFO",800),Ve=new Qe("CONFIG",700),We=new Qe("FINE",500),Xe=new Qe("FINER",400),Ye=new Qe("FINEST",300),Ze=[new Qe("OFF",Infinity),Re,Se,Te,Ue,Ve,We,Xe,Ye,new Qe("ALL",0)],$e=null;h=Pe.prototype;h.getName=function(){return this.l};
function af(a,b){a.g||(a.g=[]);a.g.push(b)}h.getParent=function(){return this.i};h.getChildren=function(){this.j||(this.j={});return this.j};function bf(a){if(a.h)return a.h;if(a.i)return bf(a.i);Ka("Root logger has no level set.");return null}
h.log=function(a,b,c){if(a.value>=bf(this).value)for(ga(b)&&(b=b()),a=this.Ig(a,b,c),b="log:"+a.getMessage(),r.console&&(r.console.timeStamp?r.console.timeStamp(b):r.console.markTimeline&&r.console.markTimeline(b)),r.msWriteProfilerMark&&r.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.g)for(var e=0,f=void 0;f=c.g[e];e++)f(d);b=b.getParent()}};
h.Ig=function(a,b,c){var d=new Ne(a,String(b),this.l);if(c){d.i=c;var e;var f=arguments.callee.caller;try{var g;var k=ba("window.location.href");if(x(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var l,m,n=!1;try{l=c.lineNumber||c.Oh||"Not available"}catch(p){l="Not available",n=!0}try{m=c.fileName||c.filename||c.sourceURL||r.$googDebugFname||k}catch(q){m="Not available",n=!0}g=!n&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:l,fileName:m,stack:c.stack||"Not available"}}e="Message: "+xa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+xa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+xa(Je(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.g=e}return d};function N(a,b,c){a.log(Te,b,c)}h.info=function(a,b){this.log(Ue,a,b)};
function cf(a,b,c){a.log(We,b,c)}function P(a,b){a.log(Xe,b,void 0)}function Q(a,b){a.log(Ye,b,void 0)}var df={},ef=null;function ff(){ef||(ef=new Pe(""),df[""]=ef,ef.h=Ve)}function gf(){ff();return ef}function R(a){ff();var b;if(!(b=df[a])){b=new Pe(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=R(a.substr(0,c));c.getChildren()[d]=b;b.i=c;df[a]=b}return b};function hf(a){vb.call(this);this.h=a;this.g={}}E(hf,vb);var jf=[];h=hf.prototype;h.listen=function(a,b,c,d){u(b)||(jf[0]=b,b=jf);for(var e=0;e<b.length;e++){var f=Cc(a,b[e],c||this.handleEvent,d||!1,this.h||this);if(!f)break;this.g[f.key]=f}return this};h.Fa=function(a,b,c,d,e){if(u(b))for(var f=0;f<b.length;f++)this.Fa(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.h||this,c=Dc(c),d=!!d,b=gc(a)?yc(a.ob,String(b),c,d,e):a?(a=Fc(a))?yc(a,b,c,d,e):null:null,b&&(Kc(b),delete this.g[b.key]);return this};
h.removeAll=function(){kc(this.g,Kc);this.g={}};h.I=function(){hf.m.I.call(this);this.removeAll()};h.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function kf(a,b){L.call(this);this.h=a||1;this.g=b||r;this.i=B(this.th,this);this.j=C()}E(kf,L);h=kf.prototype;h.Lc=!1;h.ea=null;h.setInterval=function(a){this.h=a;this.ea&&this.Lc?(this.stop(),lf(this)):this.ea&&this.stop()};h.th=function(){if(this.Lc){var a=C()-this.j;0<a&&a<0.8*this.h?this.ea=this.g.setTimeout(this.i,this.h-a):(this.ea&&(this.g.clearTimeout(this.ea),this.ea=null),this.dispatchEvent(mf),this.Lc&&(this.ea=this.g.setTimeout(this.i,this.h),this.j=C()))}};
function lf(a){a.Lc=!0;a.ea||(a.ea=a.g.setTimeout(a.i,a.h),a.j=C())}h.stop=function(){this.Lc=!1;this.ea&&(this.g.clearTimeout(this.ea),this.ea=null)};h.I=function(){kf.m.I.call(this);this.stop();delete this.g};var mf="tick";function nf(a,b,c){if(ga(a))c&&(a=B(a,c));else if(a&&"function"==typeof a.handleEvent)a=B(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:r.setTimeout(a,b||0)};function of(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return JSON.parse(a)}catch(b){}throw Error("Invalid JSON string: "+a);}function pf(){}function qf(a,b){var c=[];rf(a,b,c);return c.join("")}
function rf(a,b,c){switch(typeof b){case "string":sf(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(u(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),rf(a,b[f],c),e=",";c.push("]");break}c.push("{");d="";for(e in b)Object.prototype.hasOwnProperty.call(b,e)&&(f=b[e],"function"!=typeof f&&(c.push(d),sf(e,c),c.push(":"),rf(a,f,c),d=","));c.push("}");
break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var tf={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},uf=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;function sf(a,b){b.push('"',a.replace(uf,function(a){if(a in tf)return tf[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return tf[a]=e+b.toString(16)}),'"')};function vf(a,b){a&&cf(a,b,void 0)};function wf(){}wf.prototype.g=null;var xf;function yf(){}E(yf,wf);function zf(a){return(a=Af(a))?new ActiveXObject(a):new XMLHttpRequest}function Bf(a){var b={};Af(a)&&(b[0]=!0,b[1]=!0);return b}
function Af(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h}xf=new yf;function Cf(a){L.call(this);this.headers=new od;this.o=a||null;this.h=!1;this.Y=this.Q=null;this.Ga=this.C="";this.n=0;this.s="";this.i=this.ia=this.J=this.da=!1;this.l=0;this.O=null;this.j=Df;this.S=this.Wd=!1}E(Cf,L);var Df="";Cf.prototype.g=R("goog.net.XhrIo");var Ef=/^https?$/i,Ff=["POST","PUT"];h=Cf.prototype;h.Rf=function(){return this.j};
h.send=function(a,b,c,d){if(this.Q)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+a);b=b?b.toUpperCase():"GET";this.C=a;this.s="";this.n=0;this.Ga=b;this.da=!1;this.h=!0;this.Q=this.o?zf(this.o):zf(xf);this.Y=this.o?this.o.g||(this.o.g=Bf(this.o)):xf.g||(xf.g=Bf(xf));this.Q.onreadystatechange=B(this.eg,this);try{vf(this.g,Gf(this,"Opening Xhr")),this.ia=!0,this.Q.open(b,a,!0),this.ia=!1}catch(e){vf(this.g,Gf(this,"Error opening Xhr: "+e.message));Hf(this,
e);return}a=c||"";var f=this.headers.ga();d&&id(d,function(a,b){f.set(b,a)});d=Sa(f.Ma(),If);c=r.FormData&&a instanceof r.FormData;!Ua(Ff,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");id(f,function(a,b){this.Q.setRequestHeader(b,a)},this);this.j&&(this.Q.responseType=this.j);"withCredentials"in this.Q&&(this.Q.withCredentials=this.Wd);try{Jf(this),0<this.l&&(this.S=H&&Wb(9)&&y(this.Q.timeout)&&t(this.Q.ontimeout),vf(this.g,Gf(this,"Will abort after "+this.l+"ms if incomplete, xhr2 "+
this.S)),this.S?(this.Q.timeout=this.l,this.Q.ontimeout=B(this.kg,this)):this.O=nf(this.kg,this.l,this)),vf(this.g,Gf(this,"Sending request")),this.J=!0,this.Q.send(a),this.J=!1}catch(g){vf(this.g,Gf(this,"Send error: "+g.message)),Hf(this,g)}};function If(a){return"content-type"==a.toLowerCase()}h.kg=function(){"undefined"!=typeof aa&&this.Q&&(this.s="Timed out after "+this.l+"ms, aborting",this.n=8,vf(this.g,Gf(this,this.s)),this.dispatchEvent("timeout"),this.abort(8))};
function Hf(a,b){a.h=!1;a.Q&&(a.i=!0,a.Q.abort(),a.i=!1);a.s=b;a.n=5;Kf(a);Lf(a)}function Kf(a){a.da||(a.da=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}h.abort=function(a){this.Q&&this.h&&(vf(this.g,Gf(this,"Aborting")),this.h=!1,this.i=!0,this.Q.abort(),this.i=!1,this.n=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Lf(this))};h.I=function(){this.Q&&(this.h&&(this.h=!1,this.i=!0,this.Q.abort(),this.i=!1),Lf(this,!0));Cf.m.I.call(this)};
h.eg=function(){this.G||(this.ia||this.J||this.i?Mf(this):this.ph())};h.ph=function(){Mf(this)};function Mf(a){if(a.h&&"undefined"!=typeof aa)if(a.Y[1]&&4==Nf(a)&&2==a.N())vf(a.g,Gf(a,"Local request error detected and ignored"));else if(a.J&&4==Nf(a))nf(a.eg,0,a);else if(a.dispatchEvent("readystatechange"),4==Nf(a)){vf(a.g,Gf(a,"Request complete"));a.h=!1;try{a.Da()?(a.dispatchEvent("complete"),a.dispatchEvent("success")):(a.n=6,a.s=a.Ja()+" ["+a.N()+"]",Kf(a))}finally{Lf(a)}}}
function Lf(a,b){if(a.Q){Jf(a);var c=a.Q,d=a.Y[0]?ca:null;a.Q=null;a.Y=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){(c=a.g)&&c.log(Se,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Jf(a){a.Q&&a.S&&(a.Q.ontimeout=null);y(a.O)&&(r.clearTimeout(a.O),a.O=null)}
h.Da=function(){var a=this.N(),b;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:b=!0;break a;default:b=!1}if(!b){if(a=0===a)a=sd(String(this.C))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),a=!Ef.test(a?a.toLowerCase():"");b=a}return b};function Nf(a){return a.Q?a.Q.readyState:0}h.N=function(){try{return 2<Nf(this)?this.Q.status:-1}catch(a){var b=this.g;b&&N(b,"Can not get status: "+a.message,void 0);return-1}};
h.Ja=function(){try{return 2<Nf(this)?this.Q.statusText:""}catch(a){return vf(this.g,"Can not get status: "+a.message),""}};
function Of(a){try{if(!a.Q)return null;if("response"in a.Q)return a.Q.response;switch(a.j){case Df:case "text":return a.Q.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.Q)return a.Q.mozResponseArrayBuffer}var b=a.g;b&&b.log(Se,"Response type "+a.j+" is not supported on this browser",void 0);return null}catch(c){return vf(a.g,"Can not get response: "+c.message),null}}function Gf(a,b){return b+" ["+a.Ga+" "+a.C+" "+a.N()+"]"};function Pf(){this.i=this.h=0;this.g=[]}function Qf(a){if(a.h!=a.i){var b=a.g[a.h];delete a.g[a.h];a.h++;return b}}h=Pf.prototype;h.ha=function(){return this.i-this.h};h.Va=function(){return 0==this.i-this.h};h.clear=function(){this.i=this.h=this.g.length=0};h.contains=function(a){return Ua(this.g,a)};h.remove=function(a){a=Ma(this.g,a);if(0>a)return!1;a==this.h?Qf(this):(Xa(this.g,a),this.i--);return!0};h.ya=function(){return this.g.slice(this.h,this.i)};function Rf(a,b){vb.call(this);this.n=a||0;this.i=b||10;if(this.n>this.i)throw Error(Sf);this.g=new Pf;this.h=new He;this.l=null;this.ed()}E(Rf,vb);var Sf="[goog.structs.Pool] Min can not be greater than max";h=Rf.prototype;h.wd=function(){var a=C();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.g.ha()&&(b=Qf(this.g),!this.ff(b));)this.ed();!b&&this.ha()<this.i&&(b=this.Ee());b&&(this.l=a,this.h.add(b));return b}};h.Od=function(a){return this.h.remove(a)?(this.ie(a),!0):!1};
h.ie=function(a){this.h.remove(a);if(this.ff(a)&&this.ha()<this.i){var b=this.g;b.g[b.i++]=a}else Tf(a)};h.ed=function(){for(var a=this.g;this.ha()<this.n;){var b=this.Ee();a.g[a.i++]=b}for(;this.ha()>this.i&&0<this.g.ha();)Tf(Qf(a))};h.Ee=function(){return{}};function Tf(a){if("function"==typeof a.ra)a.ra();else for(var b in a)a[b]=null}h.ff=function(a){return"function"==typeof a.Eg?a.Eg():!0};h.contains=function(a){return this.g.contains(a)||this.h.contains(a)};
h.ha=function(){return this.g.ha()+this.h.ha()};h.Va=function(){return this.g.Va()&&this.h.Va()};h.I=function(){Rf.m.I.call(this);if(0<this.h.ha())throw Error("[goog.structs.Pool] Objects not released");delete this.h;for(var a=this.g;!a.Va();)Tf(Qf(a));delete this.g};function Uf(a,b){this.g=a;this.h=b}Uf.prototype.U=function(){return this.h};Uf.prototype.ga=function(){return new Uf(this.g,this.h)};function Vf(a){this.g=[];if(a)a:{var b,c;if(a instanceof Vf){if(b=a.Ma(),c=a.ya(),0>=a.ha()){a=this.g;for(var d=0;d<b.length;d++)a.push(new Uf(b[d],c[d]));break a}}else b=mc(a),c=lc(a);for(d=0;d<b.length;d++)Wf(this,b[d],c[d])}}function Wf(a,b,c){var d=a.g;d.push(new Uf(b,c));b=d.length-1;a=a.g;for(c=a[b];0<b;)if(d=b-1>>1,a[d].g>c.g)a[b]=a[d],b=d;else break;a[b]=c}h=Vf.prototype;
h.remove=function(){var a=this.g,b=a.length,c=a[0];if(!(0>=b)){if(1==b)Va(a);else{a[0]=a.pop();for(var a=0,b=this.g,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,g=2*a+2,f=g<d&&b[g].g<b[f].g?g:f;if(b[f].g>e.g)break;b[a]=b[f];a=f}b[a]=e}return c.U()}};h.ya=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].U());return b};h.Ma=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].g);return b};h.ga=function(){return new Vf(this)};h.ha=function(){return this.g.length};
h.Va=function(){return 0==this.g.length};h.clear=function(){Va(this.g)};function Xf(){Vf.call(this)}E(Xf,Vf);function Yf(a,b){this.j=new Xf;Rf.call(this,a,b)}E(Yf,Rf);h=Yf.prototype;h.wd=function(a,b){if(!a)return Yf.m.wd.call(this);Wf(this.j,t(b)?b:100,a);this.We()};h.We=function(){for(var a=this.j;0<a.ha();){var b=this.wd();if(b)a.remove().apply(this,[b]);else break}};h.ie=function(a){Yf.m.ie.call(this,a);this.We()};h.ed=function(){Yf.m.ed.call(this);this.We()};h.I=function(){Yf.m.I.call(this);r.clearTimeout(void 0);this.j.clear();this.j=null};function Zf(a,b,c){Yf.call(this,b,c);this.o=a}E(Zf,Yf);Zf.prototype.Ee=function(){var a=new Cf,b=this.o;b&&id(b,function(b,d){a.headers.set(d,b)});return a};Zf.prototype.ff=function(a){return!a.G&&!a.Q};function $f(a,b,c,d,e){L.call(this);this.i=t(a)?a:1;this.j=t(e)?Math.max(0,e):0;this.Bc=new Zf(b,c,d);this.g=new od;this.h=new hf(this)}E($f,L);var ag="ready complete success error abort timeout".split(" ");h=$f.prototype;h.send=function(a,b,c,d,e,f,g,k,l,m){if(this.g.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new bg(b,B(this.Wg,this,a),c,d,e,g,t(k)?k:this.i,l,m);this.g.set(a,b);a=B(this.Qg,this,a);this.Bc.wd(a,f);return b};
h.abort=function(a,b){var c=this.g.get(a);if(c){var d=c.$c;c.Df=!0;b&&(this.h.Fa(d,ag,c.Xd),Ic(d,"ready",function(){this.Bc.Od(d)},!1,this),this.g.remove(a));d&&d.abort()}};h.Qg=function(a,b){var c=this.g.get(a);c&&!c.$c?(this.h.listen(b,ag,c.Xd),b.l=Math.max(0,this.j),b.j=c.Rf(),c.$c=c.Rh=b,c.$c.Wd=c.Wd,this.dispatchEvent(new cg("ready",this,a,b)),dg(this,a,b),c.Df&&b.abort()):this.Bc.Od(b)};
h.Wg=function(a,b){var c=b.target;switch(b.type){case "ready":dg(this,a,c);break;case "complete":a:{var d=this.g.get(a);if(7==c.n||c.Da()||d.jd>d.Ce)if(this.dispatchEvent(new cg("complete",this,a,c)),d&&(d.Mf=!0,d.oe)){c=d.oe.call(c,b);break a}c=null}return c;case "success":this.dispatchEvent(new cg("success",this,a,c));break;case "timeout":case "error":d=this.g.get(a);d.jd>d.Ce&&this.dispatchEvent(new cg("error",this,a,c));break;case "abort":this.dispatchEvent(new cg("abort",this,a,c))}return null};
function dg(a,b,c){var d=a.g.get(b);!d||d.Mf||d.jd>d.Ce?(d&&(a.h.Fa(c,ag,d.Xd),a.g.remove(b)),a.Bc.Od(c)):(d.jd++,c.send(d.uh,d.ud(),d.sa(),d.Jc()))}h.I=function(){$f.m.I.call(this);this.Bc.ra();this.Bc=null;this.h.ra();this.h=null;var a=this.g;id(a,function(a){a.ra()});a.clear();this.g=null};function cg(a,b,c,d){K.call(this,a,b);this.id=c;this.$c=d}E(cg,K);
function bg(a,b,c,d,e,f,g,k,l){vb.call(this);this.Wd=!!l;this.uh=a;this.i=c||"GET";this.g=d;this.h=e||null;this.Ce=t(g)?g:1;this.jd=0;this.Df=this.Mf=!1;this.Xd=b;this.oe=f;this.j=k||Df;this.$c=null}E(bg,vb);h=bg.prototype;h.ud=function(){return this.i};h.sa=function(){return this.g};h.Jc=function(){return this.h};h.Rf=function(){return this.j};h.I=function(){bg.m.I.call(this);delete this.Xd;delete this.oe};function eg(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b};function fg(){this.i=[];this.h=this.g=0};function gg(){};function hg(){this.g=[];this.j=[];this.n=[];this.i=[];this.i[0]=128;for(var a=1;64>a;++a)this.i[a]=0;this.g[0]=1732584193;this.g[1]=4023233417;this.g[2]=2562383102;this.g[3]=271733878;this.g[4]=3285377520;this.l=this.h=0}E(hg,gg);
function ig(a,b,c){c||(c=0);var d=a.n;if(x(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.g[0];c=a.g[1];for(var g=a.g[2],k=a.g[3],l=a.g[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.g[0]=a.g[0]+b&4294967295;a.g[1]=a.g[1]+c&4294967295;a.g[2]=a.g[2]+g&4294967295;a.g[3]=a.g[3]+k&4294967295;a.g[4]=a.g[4]+l&4294967295}
hg.prototype.update=function(a,b){t(b)||(b=a.length);for(var c=b-64,d=0,e=this.j,f=this.h;d<b;){if(0==f)for(;d<=c;)ig(this,a,d),d+=64;if(x(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,64==f){ig(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,64==f){ig(this,e);f=0;break}}this.h=f;this.l+=b};
function jg(a){var b=[],c=8*a.l;56>a.h?a.update(a.i,56-a.h):a.update(a.i,64-(a.h-56));for(var d=63;56<=d;d--)a.j[d]=c&255,c/=256;ig(a,a.j);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.g[d]>>e&255,++c;return b};var kg=null,lg=null;function mg(a){this.g=a;this.h=new pf}mg.prototype.set=function(a,b){t(b)?this.g.set(a,qf(this.h,b)):this.g.remove(a)};mg.prototype.get=function(a){var b;try{b=this.g.get(a)}catch(c){return}if(null!==b)try{return of(b)}catch(d){throw"Storage: Invalid value was encountered";}};mg.prototype.remove=function(a){this.g.remove(a)};function ng(){};function og(a){mg.call(this,a)}E(og,mg);function pg(a){this.data=a}function qg(a){return!t(a)||a instanceof pg?a:new pg(a)}function rg(a){a=a.data;if(!t(a))throw"Storage: Invalid value was encountered";return a}og.prototype.set=function(a,b){og.m.set.call(this,a,qg(b))};og.prototype.Kc=function(a){a=og.m.get.call(this,a);if(!t(a)||a instanceof Object)return a;throw"Storage: Invalid value was encountered";};og.prototype.get=function(a){return(a=this.Kc(a))?rg(a):void 0};function sg(a){mg.call(this,a)}E(sg,og);sg.prototype.set=function(a,b,c){if(b=qg(b)){if(c){if(c<C()){sg.prototype.remove.call(this,a);return}b.expiration=c}b.creation=C()}sg.m.set.call(this,a,b)};sg.prototype.Kc=function(a,b){var c=sg.m.Kc.call(this,a);if(c){var d;if(d=!b){d=c.creation;var e=c.expiration;d=!!e&&e<C()||!!d&&d>C()}if(d)sg.prototype.remove.call(this,a);else return c}};function tg(a){mg.call(this,a)}E(tg,sg);function ug(){}E(ug,ng);ug.prototype.ha=function(){var a=0;md(this.Db(!0),function(){a++});return a};ug.prototype.clear=function(){var a=nd(this.Db(!0)),b=this;Na(a,function(a){b.remove(a)})};function vg(a,b){mg.call(this,a);this.De=eg(b);this.Kf=new pf}E(vg,tg);h=vg.prototype;h.De=null;h.Kf=null;
function wg(a,b){var c=new hg;c.update(eg(b));c.update(a.De);c=jg(c);if(!w(c))throw Error("encodeByteArray takes an array as a parameter");if(!kg){kg={};lg={};for(var d=0;65>d;d++)kg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d),lg[d]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(d)}for(var d=lg,e=[],f=0;f<c.length;f+=3){var g=c[f],k=f+1<c.length,l=k?c[f+1]:0,m=f+2<c.length,n=m?c[f+2]:0,p=g>>2,g=(g&3)<<4|l>>4,l=(l&15)<<2|n>>6,n=n&63;
m||(n=64,k||(l=64));e.push(d[p],d[g],d[l],d[n])}return e.join("")}
function xg(a,b,c,d){if(!(0<b.length))throw Error("Non-empty salt must be provided");var e=new hg;e.update(eg(c));e.update(b);e.update(a.De);a=new fg;var e=jg(e),f;f||(f=e.length);b=a.i;for(c=0;256>c;++c)b[c]=c;var g=0;for(c=0;256>c;++c){var g=g+b[c]+e[c%f]&255,k=b[c];b[c]=b[g];b[g]=k}a.g=0;a.h=0;f=a.g;e=a.h;b=a.i;for(c=0;1536>c;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=g;a.g=f;a.h=e;d=eg(d);var l;l||(l=d.length);f=a.g;e=a.h;b=a.i;for(c=0;c<l;++c)f=f+1&255,e=e+b[f]&255,g=b[f],b[f]=b[e],b[e]=
g,d[c]^=b[b[f]+b[e]&255];a.g=f;a.h=e;return String.fromCharCode.apply(null,d)}h.set=function(a,b,c){if(t(b)){for(var d=[],e=0;8>e;++e)d[e]=Math.floor(256*Math.random());b=new pg(xg(this,d,a,qf(this.Kf,b)));b.salt=d;vg.m.set.call(this,wg(this,a),b,c)}else vg.prototype.remove.call(this,a)};
h.Kc=function(a,b){var c=vg.m.Kc.call(this,wg(this,a),b);if(c){var d=rg(c),e=c.salt;if(!x(d)||!u(e)||!e.length)throw"Storage: Invalid value was encountered";d=xg(this,e,a,d);try{c.data=of(d)}catch(f){throw"Storage: The value could not be decrypted";}return c}};h.remove=function(a){vg.m.remove.call(this,wg(this,a))};function yg(a){this.g=a}E(yg,ug);h=yg.prototype;h.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};h.get=function(a){a=this.g.getItem(a);if(!x(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};h.remove=function(a){this.g.removeItem(a)};h.ha=function(){return this.g.length};
h.Db=function(a){var b=0,c=this.g,d=new kd;d.next=function(){if(b>=c.length)throw jd;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!x(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){this.g.clear()};h.key=function(a){return this.g.key(a)};function zg(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}E(zg,yg);var Ag=!H||H&&9<=Yb,Bg=!Jb&&!H||H&&H&&9<=Yb||Jb&&Wb("1.9.1"),Cg=H&&!Wb("9");function Dg(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]}function Eg(a,b){for(var c=Dg(a),d=bb(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)Ua(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e}function Fg(a,b){var c=Dg(a),d=bb(arguments,1),e=Gg(c,d);a.className=e.join(" ");return e.length==c.length-d.length}function Gg(a,b){return Oa(a,function(a){return!Ua(b,a)})};function Hg(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}Hg.prototype.ga=function(){return new Hg(this.x,this.y)};Hg.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Ig(a,b){return new Hg(a.x-b.x,a.y-b.y)}Hg.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};Hg.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function Jg(a,b){this.width=a;this.height=b}h=Jg.prototype;h.ga=function(){return new Jg(this.width,this.height)};h.toString=function(){return"("+this.width+" x "+this.height+")"};h.Va=function(){return!(this.width*this.height)};h.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Kg(a){return a?new Lg(Mg(a)):qa||(qa=new Lg)}function Ng(a,b){var c=b||document;c.querySelectorAll&&c.querySelector?c=c.querySelector("."+a):(c=b||document,c=(c.querySelectorAll&&c.querySelector?c.querySelectorAll("."+a):c.getElementsByClassName?c.getElementsByClassName(a):Og(document,"*",a,b))[0]);return c||null}
function Og(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,g;g=a[f];f++)b==g.nodeName&&(d[e++]=g);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;g=a[f];f++)b=g.className,"function"==typeof b.split&&Ua(b.split(/\s+/),c)&&(d[e++]=g);d.length=e;return d}return a}
function Pg(a,b){kc(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Qg?a.setAttribute(Qg[d],b):ra(d,"aria-")||ra(d,"data-")?a.setAttribute(d,b):a[d]=b})}var Qg={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Rg(a){return Kb||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function Sg(a,b,c){function d(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];!w(f)||A(f)&&0<f.nodeType?d(f):Na(Tg(f)?Za(f):f,d)}}function Ug(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Vg(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function Wg(a){a&&a.parentNode&&a.parentNode.removeChild(a)}
function Xg(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Yg(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Mg(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Zg(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else Ug(a),a.appendChild(Mg(a).createTextNode(String(b)))}var $g={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},ah={IMG:" ",BR:"\n"};function bh(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}function ch(a){a=a.tabIndex;return y(a)&&0<=a&&32768>a}
function dh(a){var b=[];eh(a,b,!1);return b.join("")}function eh(a,b,c){if(!(a.nodeName in $g))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in ah)b.push(ah[a.nodeName]);else for(a=a.firstChild;a;)eh(a,b,c),a=a.nextSibling}function Tg(a){if(a&&"number"==typeof a.length){if(A(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return!1}
function fh(a){return gh(a,function(a){return Ua(Dg(a),"sidebar")})}function gh(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Lg(a){this.g=a||r.document||document}h=Lg.prototype;h.p=function(a){return x(a)?this.g.getElementById(a):a};
h.t=function(a,b,c){var d=this.g,e=arguments,f=e[0],g=e[1];if(!Ag&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',xa(g.name),'"');if(g.type){f.push(' type="',xa(g.type),'"');var k={};tc(k,g);delete k.type;g=k}f.push(">");f=f.join("")}f=d.createElement(f);g&&(x(g)?f.className=g:u(g)?Eg.apply(null,[f].concat(g)):Pg(f,g));2<e.length&&Sg(d,f,e);return f};h.createElement=function(a){return this.g.createElement(a)};function hh(a){return"CSS1Compat"==a.g.compatMode}
function ih(a){var b=a.g;a=Rg(b);b=b.parentWindow||b.defaultView;return H&&Wb("10")&&b.pageYOffset!=a.scrollTop?new Hg(a.scrollLeft,a.scrollTop):new Hg(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}h.appendChild=function(a,b){a.appendChild(b)};h.mh=Vg;h.getChildren=function(a){return Bg&&void 0!=a.children?a.children:Oa(a.childNodes,function(a){return 1==a.nodeType})};h.Qf=Xg;h.contains=Yg;H&&Wb(8);function jh(a,b,c){vb.call(this);this.h=a;this.n=b||0;this.i=c;this.l=B(this.j,this)}E(jh,vb);jh.prototype.g=0;jh.prototype.I=function(){jh.m.I.call(this);this.stop();delete this.h;delete this.i};function kh(a){a.stop();a.g=nf(a.l,t(void 0)?void 0:a.n)}jh.prototype.stop=function(){0!=this.g&&r.clearTimeout(this.g);this.g=0};function lh(a){a.stop();a.j()}jh.prototype.j=function(){this.g=0;this.h&&this.h.call(this.i)};function mh(a,b,c){vb.call(this);this.j=a;this.i=b;this.h=c;this.g=B(this.rh,this)}E(mh,vb);h=mh.prototype;h.Td=!1;h.ea=null;function nh(a){a.ea?a.Td=!0:oh(a)}h.stop=function(){this.ea&&(r.clearTimeout(this.ea),this.ea=null,this.Td=!1)};h.I=function(){mh.m.I.call(this);this.stop()};h.rh=function(){this.ea=null;this.Td&&(this.Td=!1,oh(this))};function oh(a){a.ea=nf(a.g,a.i);a.j.call(a.h)};R("ydn");var ph=Math.pow(2,3),qh=Math.pow(2,6);function rh(){L.call(this);this.key=this.g=void 0}E(rh,L);rh.prototype.R=function(a,b){if("boolean"!=typeof b)throw Error("Invalid value");if("number"!=typeof a||0>a)throw Error("Invalid state");"undefined"==typeof this.g&&(this.g=0);this.g=b?this.g|a:this.g&~a};function sh(a){a.R(ph,!0);nf(function(){this.dispatchEvent(th)},0,a)}var th="a";function uh(a,b,c){K.call(this,a,b);this.url=c}E(uh,K);R("ydn");function vh(a){return!x(a)||ta(a)?{}:JSON.parse(a)}function wh(a){var b;try{b=S(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function S(a){return JSON.stringify(a,void 0,void 0)};function xh(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if("undefined"!=typeof ActiveXObject){var c=yh();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function zh(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if("undefined"!=typeof ActiveXObject){var b=yh();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function Ah(a){if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);if(a=a.xml)return a;throw Error("Your browser does not support serializing XML documents");}
function yh(){var a=new ActiveXObject("MSXML2.DOMDocument");if(a){a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}}return a};function Bh(a){Error.captureStackTrace?Error.captureStackTrace(this,Bh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}E(Bh,Error);function Ch(a){Error.captureStackTrace?Error.captureStackTrace(this,Ch):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}E(Bh,Error);Ch.prototype.name="ydn.error.NotSupportedException";
function Dh(a){Error.captureStackTrace?Error.captureStackTrace(this,Dh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}E(Dh,Error);function Eh(a){Error.captureStackTrace?Error.captureStackTrace(this,Eh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}E(Eh,Error);Eh.prototype.name="ydn.InternalError";
function Fh(a){Error.captureStackTrace?Error.captureStackTrace(this,Fh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}E(Fh,Error);Fh.prototype.name="ydn.error.ConstraintError";function Gh(a){Error.captureStackTrace?Error.captureStackTrace(this,Gh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationException"}E(Bh,Error);
function Hh(a){Error.captureStackTrace?Error.captureStackTrace(this,Hh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}E(Hh,Error);var Ih,Jh,Kh,Lh;Lh=Kh=Jh=Ih=!1;var Mh=Eb();Mh&&(-1!=Mh.indexOf("Firefox")?Ih=!0:-1!=Mh.indexOf("Camino")||(-1!=Mh.indexOf("iPhone")||-1!=Mh.indexOf("iPod")?Jh=!0:-1!=Mh.indexOf("iPad")?Kh=!0:-1!=Mh.indexOf("Chrome")&&(Lh=!0)));var Nh=Ih,Oh=Jh,Ph=Kh,Qh=Lh;function Rh(a){if(!u(a))throw new Bh("Array required.");if(t(void 0))return a=Pa(a,function(a){return a[void 0]}),Rh(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};function Sh(){rh.call(this);this.h=null;Cc(this,"user-login",this.fg,!1,this);Cc(this,"user-logout",this.fg,!1,this);this.s=window.top.location.href.replace(/[?#]\S+/,"")}E(Sh,rh);h=Sh.prototype;h.logger=R("ydn.api.AbstractUser");h.fg=function(){this.n?(this.n.i(this.l||""),this.isLogin()?this.j&&this.n.h(this.j):this.i&&this.n.g(this.i),Q(this.logger,"Refreshed.")):Q(this.logger,"No UI refreshed.")};
h.toJSON=function(){return{nickname:this.o,email:this.l,is_login:this.h,login_url:this.i,logout_url:this.j,user_id:this.user_id}};h.isLogin=function(){return!0===this.h};h.toString=function(){return"User:"+(!0===this.h?this.l:!1===this.h?"logout":"?")};h.Uc=0;
function Th(a,b){!b&&a.isLogin()?Q(a.logger,"Already login"):(a.vc||(a.vc=new mh(function(){this.isLogin()?this.vc.stop():1<this.Uc?(N(this.logger,"Cannot login to the API server, tried "+this.Uc+" times."),this.vc.stop(),this.Uc=0):(this.Uc++,this.Rc())},5E3,a)),a.Uc=0,nh(a.vc))}h.refresh=function(a){Th(this,a)};function Uh(a,b,c){uh.call(this,a,b,c)}E(Uh,uh);function Vh(){Sh.call(this)}E(Vh,Sh);Vh.prototype.logger=R("ydn.api.User");
Vh.prototype.load=function(a){cf(this.logger,"getting user info");if(a.logout_url)return this.o=a.nickname,this.l=a.email,this.user_id=a.user_id,this.h=a.is_login,this.j=a.logout_url,this.i=a.login_url,cf(this.logger,a.email+" login"),this.j=a.logout_url,this.user_id=a.Id?a.Id.$t:void 0,this.h=!0,this.i=void 0,this.R(qh,!0),sh(this),!0;a.login_url&&(cf(this.logger,"NO user"),this.i=a.login_url,this.h=!1,this.l=this.user_id=this.j=this.o=void 0,this.R(qh,!0),sh(this));return!1};
Vh.prototype.C=function(a,b){Q(this.logger,"Receiving "+(b.Da()?"":"fail")+" login info from server.");if(b.Da()){var c=a.User;if(c){var d;d=this.load(c)?new Uh("user-login",this,this.j):new Uh("user-logout",this,this.i);nf(function(){this.dispatchEvent(d)},0,this)}}else N(this.logger,"Server return error with: "+b.Ja());this.vc&&this.vc.stop()};
function Wh(a,b){var c=new F,d=Xh(Yh);if(!d)return tb("login server not available.");var e={pm:a.s,state:Math.random().toString().substr(2,6)};if(b)for(var f in b)e[f]=b[f];d.request(new Zh("/rpc_login","GET",e)).execute(function(a,b){a?c.w(a.User):c.A(b)},a);return c}Vh.prototype.Rc=function(){cf(this.logger,"Sending login request.");var a=Xh(Yh),b=window.top.location.href.replace(/[?#]\S+/,"");a.request(new Zh("/rpc_login","GET",{url:b})).execute(B(this.C,this));return!1};function $h(){this.g=C()}var ai=new $h;$h.prototype.set=function(a){this.g=a};$h.prototype.get=function(){return this.g};function bi(a){this.j=a||"";this.l=ai}bi.prototype.g=!0;bi.prototype.h=!1;function ci(a){a=new Date(a.l);return di(a.getFullYear()-2E3)+di(a.getMonth()+1)+di(a.getDate())+" "+di(a.getHours())+":"+di(a.getMinutes())+":"+di(a.getSeconds())+"."+di(Math.floor(a.getMilliseconds()/10))}function di(a){return 10>a?"0"+a:String(a)}function ei(a,b){var c=(a.l-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function fi(a){bi.call(this,a)}E(fi,bi);fi.prototype.h=!0;
fi.prototype.i=function(a){var b;switch(a.j.value){case Re.value:b="dbg-sh";break;case Se.value:b="dbg-sev";break;case Te.value:b="dbg-w";break;case Ue.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.j," ");this.g&&c.push("[",ci(a),"] ");c.push("[",Ea(ei(a,this.l.get())),"s] ");c.push("[",xa(a.h),"] ");c.push('<span class="',b,'">',wa(Ea(xa(a.getMessage()))));this.h&&a.i&&c.push("<br>",wa(Ea(a.g||"")));c.push("</span>");c.push("<br>");return c.join("")};
function gi(a){bi.call(this,a)}E(gi,bi);gi.prototype.i=function(a){var b=[];b.push(this.j," ");this.g&&b.push("[",ci(a),"] ");b.push("[",ei(a,this.l.get()),"s] ");b.push("[",a.h,"] ");b.push(a.getMessage());this.h&&a.i&&b.push("\n",a.g);b.push("\n");return b.join("")};function hi(){this.j=B(this.n,this);this.g=new gi;this.g.g=!1;this.h=this.g.h=!1;this.i="";this.l={}}function ii(a){var b=ji;if(a!=b.h){var c=gf();a?af(c,b.j):(c=c.g)&&Wa(c,b.j);b.h=a}}hi.prototype.n=function(a){if(!this.l[a.h]){var b=this.g.i(a),c=ki;if(c)switch(a.j){case Re:li(c,"info",b);break;case Se:li(c,"error",b);break;case Te:li(c,"warn",b);break;default:li(c,"debug",b)}else window.opera?window.opera.postError(b):this.i+=b}};var ki=window.console;
function li(a,b,c){if(a[b])a[b](c);else a.log(c)};function mi(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}h=mi.prototype;h.ga=function(){return new mi(this.top,this.right,this.bottom,this.left)};h.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};h.contains=function(a){return this&&a?a instanceof mi?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
h.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};h.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function ni(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}h=ni.prototype;h.ga=function(){return new ni(this.left,this.top,this.width,this.height)};h.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};h.contains=function(a){return a instanceof ni?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
h.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function oi(a,b){var c=Mg(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function pi(a,b){return oi(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function qi(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}H&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ri(a){if(H&&!(H&&8<=Yb))return a.offsetParent;var b=Mg(a),c=pi(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=pi(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function si(a){for(var b=new mi(0,Infinity,Infinity,0),c=Kg(a),d=c.g.body,e=c.g.documentElement,f=Rg(c.g);a=ri(a);)if(!(H&&0==a.clientWidth||Kb&&0==a.clientHeight&&a==d||a==d||a==e||"visible"==pi(a,"overflow"))){var g=ti(a),k;k=a;if(Jb&&!Wb("1.9")){var l=parseFloat(oi(k,"borderLeftWidth"));if(ui(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(oi(k,"borderRightWidth")),l=l+m;k=new Hg(l,parseFloat(oi(k,"borderTopWidth")))}else k=new Hg(k.clientLeft,k.clientTop);g.x+=k.x;g.y+=k.y;b.top=Math.max(b.top,
g.y);b.right=Math.min(b.right,g.x+a.clientWidth);b.bottom=Math.min(b.bottom,g.y+a.clientHeight);b.left=Math.max(b.left,g.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=(c.g.parentWindow||c.g.defaultView||window).document;c="CSS1Compat"==c.compatMode?c.documentElement:c.body;c=new Jg(c.clientWidth,c.clientHeight);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function ti(a){var b,c=Mg(a),d=pi(a,"position"),e=Jb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Hg(0,0),g;b=c?Mg(c):document;g=!H||H&&9<=Yb||hh(Kg(b))?b.documentElement:b.body;if(a==g)return f;if(a.getBoundingClientRect)b=qi(a),a=ih(Kg(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(Kb&&"fixed"==pi(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ib||Kb&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=ri(b))&&b!=c.body&&b!=g;)f.x-=b.scrollLeft,Ib&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function vi(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function wi(a){var b=yi;if("none"!=pi(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function yi(a){var b=a.offsetWidth,c=a.offsetHeight,d=Kb&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new Jg(b,c):(a=qi(a),new Jg(a.right-a.left,a.bottom-a.top))}function zi(a){var b=ti(a);a=wi(a);return new ni(b.x,b.y,a.width,a.height)}
function T(a,b){a.style.display=b?"":"none"}function ui(a){return"rtl"==pi(a,"direction")}var Ai=Jb?"MozUserSelect":Kb?"WebkitUserSelect":null;function Bi(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ai){if(b=b?"none":"",a.style[Ai]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ai]=b}}else if(H||Ib)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}
function Ci(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}function Di(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Ci(a,c):0}var Ei={thin:2,medium:4,thick:6};
function Fi(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Ei?Ei[c]:Ci(a,c)}function Gi(a){if(H&&!(H&&9<=Yb)){var b=Fi(a,"borderLeft"),c=Fi(a,"borderRight"),d=Fi(a,"borderTop");a=Fi(a,"borderBottom");return new mi(d,c,a,b)}b=oi(a,"borderLeftWidth");c=oi(a,"borderRightWidth");d=oi(a,"borderTopWidth");a=oi(a,"borderBottomWidth");return new mi(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Hi=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Ii(a){this.l=B(this.n,this);this.h=new fi;this.i=this.h.g=!1;this.g=a;this.j=this.g.ownerDocument||this.g.document;a=Kg(this.g);var b=null,c=a.g;if(H&&c.createStyleSheet)a=b=c.createStyleSheet(),H&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=Og(a.g,"head",void 0,void 0)[0];c||(b=Og(a.g,"body",void 0,void 0)[0],c=a.t("head"),b.parentNode.insertBefore(c,b));var d=b=a.t("style");H&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.g.className+=" logdiv"}
Ii.prototype.n=function(a){var b=100>=this.g.scrollHeight-this.g.scrollTop-this.g.clientHeight,c=this.j.createElement("div");c.className="logmsg";c.innerHTML=this.h.i(a);this.g.appendChild(c);b&&(this.g.scrollTop=this.g.scrollHeight)};Ii.prototype.clear=function(){this.g.innerHTML=""};var ji=null,Ji=null;R("ydn.debug");function Ki(a,b,c){if(y(b))b=new Qe("log",b);else if(x(b)){b=b.toUpperCase();if(!$e){$e={};for(var d=0,e;e=Ze[d];d++)$e[e.value]=e,$e[e.name]=e}b=$e[b]||null}else b=We;R(a||"ydn").h=b;t(c)?Ji||(a=Ji=new Ii(c),!0!=a.i&&(c=gf(),af(c,a.l),a.i=!0),gf().h=Te):ji||Ji||(ji=new hi,ii(!0),gf().h=Te)}var Li=null;function Mi(a){Li&&setTimeout(function(){Li.log(a)},10)};var Yh="login",Ni=R("ydn.http"),Oi={},Pi=[];var Qi,Ri={},Si=[];function Ti(a,b){Ri[b||"default"]=a}function Xh(a){if(!t(a))return Ri["default"];for(var b=a,c=0;c<Si.length;c++){var d=(0,Si[c])(a);if(d){b=d;break}}return Ri[b]||null}function Ui(){Qi||(Qi=new $f);return Qi}function Vi(a,b,c,d){x(a)?this.xc=a:(this.xc=null,this.status=a,this.body=b,this.headers=c||{},this.g=d)}function Wi(a){if(a.xc){var b=vh(a.xc);b.gapiRequest&&(b=b.gapiRequest.data);a.status=b.status;a.g=b.statusText;a.headers=b.headers;a.body=b.body;a.xc=null}}
Vi.prototype.N=function(){Wi(this);return this.status};Vi.prototype.Da=function(){Wi(this);return 200<=this.status&&400>this.status};Vi.prototype.Ja=function(){Wi(this);return this.g||""};function Xi(a){Wi(a);return a.body}function Yi(a,b){Wi(a);return a.headers[b]}Vi.prototype.Jc=function(){Wi(this);return this.headers};
function Zi(a){Wi(a);if("application/json"==Yi(a,"content-type"))return!0;a=a.body;return x(a)&&!ta(a)?/^[\],:{}\s]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")):!1}function $i(a){return a instanceof Vi?a:x(a)?new Vi(a):new Vi(a.status,a.body,a.headers,a.statusText)}function Zh(a,b,c,d,e){this.path=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=e}
var aj=null;function bj(a,b,c,d){this.l=t(b)?b:Ui();this.j="sr"+cj++;this.n=c||0;this.o=!!d;this.g=a}var cj=0;bj.prototype.F=function(){return this.j};
bj.prototype.execute=function(a,b){var c=this.g,d=new ud(c.path),e;for(e in c.params)d.g.set(e,c.params[e]);this.l.send(this.j,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.Q&&4==Nf(d)?d.Q.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=Of(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(A(l))e=l;else if(x(l))try{e=vh(l)}catch(n){e=l}k=new Vi(d.N(),
l,k,d.Ja());aj&&!k.Da()&&aj.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.path,uri:String(d.C),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:k.N(),statusText:k.Ja(),body:Xi(k),headers:k.Jc()}});a&&(a.call(b,e,k),a=null)},this.n,void 0,this.o);this.l=null};bj.prototype.toString=function(){return"HTTPRequest:"+this.j};function dj(a,b,c){this.h=a;this.i=b;this.g=null;this.vh=t(c)?c:!0}dj.prototype.request=function(a){return new ej(a,this)};function ej(a,b){bj.call(this,a,b.i);this.parent=b}E(ej,bj);var fj=new Vi(0,null,null,"No access token");
ej.prototype.execute=function(a,b){function c(){this.vh?d.g.headers.Authorization="Bearer "+d.parent.g.access_token:d.g.params.access_token=d.parent.g.access_token}var d=this;d.parent.g&&d.parent.g.expires>C()?(c(),ej.m.execute.call(this,function(e,f){401==f.N()?gj(d.parent.h).u(function(e){d.parent.g=e;c();ej.m.execute.call(d,a,b)},function(){d.parent.g=null;a.call(b,null,fj)},d):a.call(b,e,f)},this)):gj(this.parent.h).u(function(e){d.parent.g=e;c();ej.m.execute.call(this,a,b)},function(){d.parent.g=
null;a.call(b,null,fj)},this)};function U(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;ga(Object.freeze)&&Object.freeze(this)}U.prototype.lower=void 0;U.prototype.upper=void 0;U.prototype.toJSON=function(){return hj(this)};function ij(a){return jj(a)}U.only=function(a){return new U(a,a,!1,!1)};U.bound=function(a,b,c,d){return new U(a,b,c,d)};U.upperBound=function(a,b){return new U(void 0,a,void 0,!!b)};U.lowerBound=function(a,b){return new U(a,void 0,!!b,void 0)};
function kj(a){var b;if(u(a))b=Za(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(y(a))b=a+2.220460492503131E-16,a=a-2.220460492503131E-16;else return U.only(a);return U.bound(a,b,!1,!0)}function hj(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}function lj(a){if(null==a)return null;if(a instanceof U)return a;if(A(a))return new U(a.lower,a.upper,a.lowerOpen,a.upperOpen);throw new M("Invalid key range: "+a+" of type "+typeof a);}
function jj(a){return null!=a?null!=a.upper&&null!=a.lower?mj.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?mj.upperBound(a.upper,a.upperOpen):null!=a.lower?mj.lowerBound(a.lower,a.lowerOpen):null:null}function nj(a){if(a instanceof U)return"";if(null!=a){if(A(a)){for(var b in a)if(a.hasOwnProperty(b)&&!Ua(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
U.prototype.le=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return U.bound(b,c,d,e)};function oj(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function pj(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==qj(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(rj(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(rj(c.upper,b)))}else d.push(a+" = ?"),e.push(rj(c.lower,b))}var mj=r.IDBKeyRange||r.webkitIDBKeyRange||U;function sj(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function tj(a,b,c){if(a)if(-1==b.indexOf("."))a[b]=c;else{b=b.split(".");for(var d=b.pop(),e;e=b.shift();)A(a[e])||(a[e]={}),a=a[e];a[d]=c}}var uj={};
function vj(a){a=[a];for(var b=new wj,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(uj);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),xj(b,e);else if(e instanceof Date)c+=2,b.write(c),xj(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===uj)b.write(0);else return"";c=0}return b.trim().toString()}function yj(a){for(var b=[],c=b,d=[],e,f,g=new zj(a);null!=g.read();)if(0===g.current)c=d.pop();else{if(null===g.current)break;do{e=g.current/4|0;a=g.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<g.current+4)g.read();else break}while(1);1===a?c.push(Aj(g)):2===a?c.push(new Date(Aj(g))):3===a?c.push(Bj(g)):0===a&&(c=d.pop())}return b[0]}
function xj(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Aj(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function Bj(a){for(var b=[],c=0,d=0,e=0,f,g;;){f=a.read();if(0===f||null==f)break;0===c?(g=f>>6,2>g&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=g,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function zj(a){this.current=null;this.g=a;this.h=this.g.length-1;this.index=-1}
zj.prototype.read=function(){return this.current=this.index<this.h?parseInt(this.g[++this.index]+this.g[++this.index],16):null};function wj(){this.g=[];this.h=void 0}wj.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.h=arguments[b].toString(16),this.g.push(2===this.h.length?this.h:this.h="0"+this.h)};wj.prototype.trim=function(){for(var a=this.g.length;"00"===this.g[--a];);this.g.length=++a;return this};wj.prototype.toString=function(){return this.g.length?this.g.join(""):""};
function Cj(a,b){var c=vj(a),d=vj(b);return c>d?1:c==d?0:-1};function Dj(a,b,c,d,e){if(!(b instanceof U))if(x(b)&&t(c)){var f,g,k,l;if("starts"==b||"^"==b)b=kj(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)g=c,l=">"==b;else if("="==b||"=="==b)f=g=c;else throw new M("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)g=e,l=">"==d;else if(t(d))throw new M("invalid op2: "+d);b=U.bound(g,f,l,k)}}else b=lj(b);this.g=b;this.h=a}Dj.prototype.h="";Dj.prototype.Ic=function(){return this.h};
Dj.prototype.le=function(a){if(this.h!=a.h)return null;a=null!=this.g&&null!=a.g?this.g.le(a.g):this.g||a.g;return new Dj(this.h,a)};var Ej={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},Fj=r.IDBRequest&&"LOADING"in r.IDBRequest?r.IDBTransaction:r.webkitIDBRequest&&"LOADING"in r.webkitIDBRequest&&1===r.webkitIDBTransaction.READ_WRITE?r.webkitIDBTransaction:Ej,Gj=Fj.READ_ONLY,Hj=Fj.READ_WRITE,Ij=Fj.VERSION_CHANGE,Jj=r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.moz_indexedDB||r.msIndexedDB;function Kj(a,b,c,d){vb.call(this);this.i=c;this.P=c.getName();this.wb=void 0;this.j=!1;this.ca=null;this.n=a;this.zf=b;this.Ga=0;this.ia=this.C=!1;this.da=d||4;this.o=this.h=this.g=void 0;this.O=function(){throw new Sc;};this.S=function(){throw new Sc;};this.Sb=function(){}}E(Kj,vb);h=Kj.prototype;
h.init=function(a,b,c,d,e){if(t(b)){a=this.i;var f,g=b;u(b)?(f=Lj(a,b),g=b.join(", ")):f=Mj(a,b);if(!f)throw new M('require index "'+g+'" not found in store "'+a.getName()+'"');this.wb=f.getName()}this.j=x(this.wb);this.ca=c||null;this.Ga=0;this.ia=this.C=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.Bb=d;this.Qc=e;this.o=this.h=this.g=void 0};h.Bb="";h.ca=null;h.unique=!1;h.reverse=!1;h.Qc=!0;h.logger=R("ydn.db.core.req.AbstractCursor");
h.fc=function(a,b,c){null==a&&(P(this.logger,this+" finished."),this.C=!0);this.g=a;this.h=b;this.o=c;this.Ga++;this.C?(Q(this.logger,this+" DONE."),this.O(),Nj(this)):(Q(this.logger,this+" new cursor position {"+(this.j?this.g+", "+this.h:this.g)+"}"),this.O(this.g))};h.I=function(){this.n=null};h.toString=function(){return"Cursor:"+this.P+(t(this.wb)?":"+this.wb:"")+"["+(this.n?"":"~")+this.zf+"]"};
function Nj(a){null!=a.h?a.h=Oj(a.h):a.h=void 0;null!=a.g?a.g=Oj(a.g):a.g=void 0;a.Sb(a.ia,a.g,a.h)}function Pj(a){a.ia=!0;Q(a.logger,a+": exit");Nj(a)}h.ha=function(){return this.Ga};h.ja=function(){return this.j?this.h:this.g};h.U=function(){return this.Qc?this.ja():this.o};h.md=function(){};function Qj(){};function Rj(a,b,c,d,e,f,g){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.i=a;this.h=b;this.n=g;this.o=!!this.h;if(t(d)&&!fa(d))throw new M("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!fa(e))throw new M("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!fa(f))throw new M("key_only value must be a boolean, but "+typeof f+" found");this.g=t(f)?f:!!x(this.h);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.l=
a;if(d=nj(c))throw new M("Invalid key range: "+d);this.j=jj(c);this.s=Sj;this.J=NaN}E(Rj,Qj);Rj.prototype.g=!0;function Tj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Rj.call(this,a,b,c,d,e,!0)}E(Tj,Rj);function Uj(a,b,c){if(3<arguments.length)throw new M("too many argument");Rj.call(this,a,void 0,b,c,void 0,!1)}E(Uj,Rj);function Vj(a,b,c,d,e){if(!x(b))throw new M("index name must be string");Rj.call(this,a,b,c,d,e,!1)}E(Vj,Rj);var Sj="init";h=Rj.prototype;h.logger=R("ydn.db.Iterator");
h.H=function(){return this.i};h.ga=function(){var a=new Rj(this.i,this.h,this.j,Wj(this),Xj(this),this.g,this.n);a.J=this.J;return a};h.unique=function(a){return new Rj(this.i,this.h,this.j,Wj(this),a,this.g,this.n)};h.toJSON=function(){return{store:this.i,index:this.h,keyRange:this.j?hj(this.j):null,direction:this.l}};
h.toString=function(){var a=t(this.n)?":"+this.n.join(","):t(this.h)?":"+this.h:"",a=a+oj(this.j);this.s!=Sj&&(a+=this.s+"{"+this.C,this.o&&(a+=", "+this.G),a+="}");var b=this.o?"Index":"",b=b+(this.g?"Key":"Value");return b+"Iterator:"+this.i+a};h.reverse=function(){return new Rj(this.i,this.h,this.j,!Wj(this),Xj(this),this.g,this.n)};function Wj(a){return"prev"===a.l||"prevunique"===a.l}function Xj(a){return"nextunique"===a.l||"prevunique"===a.l}
h.load=function(a){a=a[0];a.init(this.i,this.n||this.h,this.j,this.l,this.g);this.s="busy";var b=this;a.Sb=function(a,d,e){b.C=d;b.G=e;b.s=a?"rest":"done"};a.openCursor(this.C,this.G);return a};h.ja=function(){return this.G};h.stores=function(){return[this.i]};function Yj(a,b,c){Tc.call(this,b,c);this.J=a;this.o=[];this.C=[];this.Qa=[];this.g=null;this.lb="";this.ia=0}E(Yj,Tc);h=Yj.prototype;h.lb="";h.logger=R("ydn.db.Request");function Zj(a,b,c){a.g=b;a.lb=c;P(a.logger,a+" BEGIN");if(b){for(c=0;c<a.C.length;c++)a.C[c][0].call(a.C[c][1],b);a.C.length=0}P(a.logger,a+" END")}function ak(a){var b=new Yj(a.J);a.ia++;Zj(b,a.g,a.lb+"C"+a.ia);return b}h.ud=function(){return this.J};
h.abort=function(){if(this.g)if(P(this.logger,this+" aborting"),ga(this.g.abort))this.g.abort();else if(ga(this.g.executeSql))this.g.executeSql("ABORT",[],function(){},function(){return!0});else throw new Pc;else throw new bk("No active transaction");};function V(a,b,c){var d=a.Qa.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){V(a,b,c)}):c?a.A(b):a.w(b)}function ck(a,b,c){a.Qa.push([b,c])}function W(a,b,c){a.g?b.call(c,a.g):a.C.push([b,c])}
h.w=function(a){P(this.logger,this+" SUCCESS");Yj.m.w.call(this,a);this.g=null;this.lb=this.lb};h.A=function(a){P(this.logger,this+" ERROR");Yj.m.A.call(this,a);this.g=null;this.lb=this.lb};function X(a){var b="";a.lb&&(b=a.g?"*":"",b="["+a.lb+b+"]");return a.J+b}function dk(a,b){var c=new Yj(a);V(c,b);return c}h.toString=function(){return"Request:"+X(this)};
h.ue=function(){this.n&&this.h&&rb(this)&&(r.clearTimeout(this.n),delete this.n);this.i&&(this.i.O--,delete this.i);for(var a=this.j,b=!1;this.s.length&&!this.G;){var c=this.s.shift(),d=c[0],e=c[1],c=c[2];if(d=this.l?e:d)d=d.call(c||this.Y,a),t(d)&&(this.l=this.l&&(d==a||d instanceof Error),this.j=a=d),a instanceof F&&(this.G=b=!0)}this.j=a;b&&(a.u(B(this.nd,this,!0),B(this.nd,this,!1)),a.If=!0)};
h.toJSON=function(){var a=(this.lb||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.J?this.J.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var qj=Jj&&Jj.cmp?B(Jj.cmp,Jj):Cj,ek=[];(function(a){if(null!=a&&!("push"in a))throw new Bh('output receiver object must have "push" method.');}).prototype.logger=R("ydn.db.algo.AbstractSolver");function fk(a){Error.captureStackTrace?Error.captureStackTrace(this,fk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}E(fk,Error);fk.prototype.name="ConstraintError";fk.prototype.toString=function(){return this.name+": "+this.message};function gk(a){Error.captureStackTrace?Error.captureStackTrace(this,gk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}E(gk,Error);
gk.prototype.toString=function(){return this.name+": "+this.message};function hk(a){Error.captureStackTrace?Error.captureStackTrace(this,hk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}E(hk,Error);hk.prototype.name="ydn.db.VersionError";hk.prototype.toString=function(){return this.name+": "+this.message};function ik(a){Error.captureStackTrace?Error.captureStackTrace(this,ik):this.stack=Error().stack||"";a&&(this.message=String(a))}E(ik,Error);
ik.prototype.name="ydn.db.InternalError";function bk(a){Error.captureStackTrace?Error.captureStackTrace(this,bk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}E(bk,Error);function jk(a){Error.captureStackTrace?Error.captureStackTrace(this,jk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}E(jk,Error);
function kk(a){Error.captureStackTrace?Error.captureStackTrace(this,kk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}E(kk,Error);kk.prototype.name="NotFoundError";kk.prototype.toString=function(){return this.name+": "+this.message};function lk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,lk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}E(lk,Error);
lk.prototype.toString=function(){return this.name+": "+this.message};function mk(a,b){Error.captureStackTrace?Error.captureStackTrace(this,mk):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}E(mk,Error);mk.prototype.toString=function(){return this.name+": "+this.message};function nk(a){Error.captureStackTrace?Error.captureStackTrace(this,nk):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
E(nk,Error);function ok(a){Error.captureStackTrace?Error.captureStackTrace(this,ok):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}E(ok,Error);function pk(a,b,c){var d;if(A(a))d=a.store,b=a.id,null!=a.parent&&(c=new pk(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new pk(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.P=d;this.id=b;this.parent=c||null}h=pk.prototype;h.toJSON=function(){var a={store:this.P,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
h.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.P+"^:"+this.id};h.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};h.H=function(){return this.P};h.F=function(){return this.id};h.getParent=function(){return this.parent};function qk(a){return y(a)||x(a)||u(a)&&Ra(a,qk)||a instanceof Date}function Oj(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function rk(a,b){this.g=b}rk.prototype.logger=R("ydn.db.crud.req.RequestExecuto");rk.prototype.toString=function(){return"RequestExecutor"};function sk(a,b,c,d,e,f){this.ia=a;this.Ga=b;this.h=this.i=0;this.Y=d;this.S=e;this.l=c||tk;this.J=f||0;this.s=!1;this.G=0}h=sk.prototype;h.logger=R("ydn.db.tr.Thread");h.oh=function(a){if("complete"==a||"abort"==a)this.s?(Q(this.logger,"tx "+this.i+" committed"),this.s=!1):(Q(this.logger,"Generator done "+this.s),V(null,this.i,"complete"!=a))};
h.nc=function(){if(t(this.C))if(this.C)Q(this.logger,"Receive to commit tx "+this.i+" on yield "+this.G),this.s=!0;else throw new Rc("Coroutine transaction thread has been ended");else throw new Rc("Transaction thread not running in a generator");};
function uk(a,b){a.s?(Q(a.logger,"waiting tx to be committed for yielding "+a.G),setTimeout(function(){a.Nb(function(){Q(a.logger,"sending result to yield "+a.G);a.C.next(b)},a.Y,a.S,B(a.oh,a))},4)):(Q(a.logger,"sending result to yield "+a.G),a.C.next(b));a.G++}h.request=function(a){a=new Yj(a);this.C&&a.u(function(a){uk(this,a)},function(a){var c=a;a instanceof Error||(c=Error(),c.error=a);uk(this,c)},this);return a};h.type=function(){return vk(this.ia)};h.K=function(){return this.ia};
h.La=function(){return"B"+this.Ga+"T"+this.i};var tk="single";function wk(a){if(a)if(ga(a.abort))a.abort();else if(ga(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Pc;else throw new bk("No active transaction");};function xk(a){this.j=a;this.g=null;this.h=0}xk.prototype.logger=R("ydn.db.tr.Mutex");xk.prototype.gb=null;xk.prototype.Xa=null;xk.prototype.toString=function(){return"Mutex:"+("B"+this.j+"T"+this.h)+(this.g?"*":"")};function yk(a,b,c,d,e,f){sk.call(this,a,b,c,d,e,f);this.j=[];this.n=[];this.o=null;this.g=new xk(b);this.O=f||0;this.da=!1}E(yk,sk);h=yk.prototype;h.logger=R("ydn.db.tr.Serial");
function zk(a,b,c){if("multi"==a.l)a:if(a=a.g,!a.gb||!a.mode||c!=a.mode&&(a.mode!=Hj||c!=Gj)||b.length>a.gb.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.gb.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.l)a:if(a=a.g,a.gb&&a.mode&&c==a.mode&&a.gb.length==b.length){for(c=0;c<b.length;c++)if(-1==a.gb.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.l?!0:!1;return b}
function Ak(a){var b=0<a.j.length?a.j[0].gb:null,c=0<a.j.length?a.j[0].mode:null;return null!=b&&null!=c?zk(a,b,c):!1}function Bk(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({rd:b,gb:c,mode:d,Xa:e})}h.abort=function(){P(this.logger,this+": aborting");wk(this.o)};
h.Nb=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new M("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new M("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.Qa&&!Ua(this.Qa,e[f]))throw new M('store name "'+f+e[f]+'" in scope of '+this);}}else throw new M("store names must be an array");var g=t(c)?c:Gj,k=this;if(this.g.g||!Ck(this.K())&&this.da)Bk(this,a,b,g,d);else{var l=this.La();d&&this.n.push(d);
if(this.O&&this.i>=this.O)throw new Rc("Exceed maximum number of transactions of "+this.O);this.da=!0;Dk(this.K(),function(c){var d=k.g;d.g=c;d.i=!1;d.gb=b;d.mode=g;d.h++;d.Xa=null;l=k.La();cf(k.logger,l+" BEGIN "+S(b)+" "+g);a(k);for(a=null;Ak(k);)c=k.j.shift(),c.Xa&&k.n.push(c.Xa),Q(k.logger,"pop tx queue"+(k.j.length+1)+" reusing T"+k.i),c.rd()},e,g,function(a,b){cf(k.logger,l+" "+a);var c=k.g;c.g?(c.g=null,c.gb=null,c.mode=null,ga(c.Xa)&&c.Xa(a,b),c.Xa=null):N(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.n.length;c++)(0,k.n[c])(a,b);k.n.length=0;(c=k.j.shift())&&k.Nb(c.rd,c.gb,c.mode,c.Xa);k.h=0})}};h.La=function(){return"B"+this.g.j+"T"+this.g.h};h.request=function(a,b,c,d){var e=yk.m.request.call(this,a,b,c,d);a=c||Gj;var f=this;this.g.g&&!this.g.i&&zk(this,b,a)?(b=this.g.g,this.h++,Zj(e,b,this.La()+"R"+this.h),d&&this.n.push(d)):f.Nb(function(){var a=f.g.g;f.h++;Zj(e,a,f.La()+"R"+f.h)},b,a,d);return e};
h.lc=function(a,b,c,d,e){d=d||Gj;var f=this,g;if(f.g.g&&!f.g.i&&zk(this,c,d)){var k=f.g.g;f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(k,g,function(b,c){f.o=k;c?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.o=null});P(f.logger,g+" END");b=null}else f.Nb(function(){var c=f.g.g;f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.o=c;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.o=null});P(f.logger,g+" END");b=null},c,d,e)};h.getName=function(){return this.K().getName()};
h.toString=function(){return"Serial:"+this.La()+(this.o?"*":"")};function Ek(a,b){yk.call(this,a,b)}E(Ek,yk);Ek.prototype.logger=R("ydn.db.tr.AtomicSerial");Ek.prototype.request=function(a,b,c){var d,e,f,g=Ek.m.request.call(this,a,b,c,function(a,b){g.g=null;if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new ok;V(g,c,!0)}});ck(g,function(a,b,c){f=b;e=a;d=c});return g};
Ek.prototype.lc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});Ek.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new ok;a.A(d)}e&&(e(b,c),e=void 0)})};Ek.prototype.toString=function(){return"Atomic"+Ek.m.toString.call(this)};function Fk(a,b,c,d){this.j=a;this.h=b;this.g=c;this.Za=d;this.i=null}h=Fk.prototype;h.logger=R("ydn.db.tr.DbOperator");h.abort=function(){this.g.abort()};function Y(a){a.i||(a.i=a.j.G());return a.i}h.K=function(){return this.j};h.nc=function(){this.g.nc()};
function Gk(a,b){var c=a.K(),d=b instanceof Hk?b:Ik(b),e=b.name,f=Z(c.h,e);if(0==Jk(d,f).length)sb(!1);else if(f=f?"update":"add",c.h instanceof Kk)Lk(c.h,d),c.i?(c.i.Zd(),c.i=null,Mk(c)):sb(!1);else throw new Fh("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}h.toString=function(){return"TxStorage:"+this.K().getName()};function Nk(a,b,c,d){Fk.call(this,a,b,c,d)}E(Nk,Fk);h=Nk.prototype;h.logger=R("ydn.db.crud.DbOperator");
h.count=function(a,b,c,d){var e,f,g,k;if(null!=a)if(u(a)){if(t(c)||t(b))throw new M("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!Ok(this.h,f[l]))throw new M('store name "'+f[l]+'" at '+l+" not found.");P(this.logger,"countStores: "+S(f));e=this.g.request("count",f);W(e,function(){Y(this).od(e,f)},this)}else if(x(a)){l=Z(this.h,a);if(!l)throw new M('store name "'+a+'" not found.');if(t(d)&&!fa(d))throw new M('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(g=
b,A(c)){var m=nj(c);if(m)throw new M("invalid key range: "+wh(c)+" "+m);k=jj(c)}else{if(null!=c)throw new M("invalid key range: "+wh(c)+" of type "+typeof c);k=null}else if(A(b)||null==b)if(A(b)){if(m=nj(b))throw new M("invalid key range: "+wh(b)+" "+m);k=jj(b)}else{if(null!=b)throw new M("key range must be  an object but found "+wh(b)+" of type "+typeof b);k=null}else throw new M('invalid second argument for count "'+wh(c)+'" of type '+typeof b);P(this.logger,"countKeyRange: "+a+" "+(g?g:"")+S(k));
e=this.g.request("count",f);Pk(l,e,arguments);W(e,function(){Y(this).Ec(e,f[0],k,g,!!d)},this)}else throw new M("Invalid store name or store names.");else N(this.logger,"count method requires store name(s)"),l=Qk(this.h),e=this.g.request("count",l),ck(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),W(e,function(){Y(this).od(e,f)},this);return e};
h.get=function(a,b){var c=this,d;if(a instanceof pk){var e=a,f=e.H(),g=Z(this.h,f);if(!g){if(this.h.g()){if(Ck(this.K()))return dk("get",void 0);d=new Yj("get");this.K().kb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M("Store: "+f+" not found.");}var k=e.F();P(this.logger,"getByKey: "+f+":"+k);d=this.g.request("get:key",[f]);Pk(g,d,arguments,void 0,this);W(d,function(){Y(this).sd(d,f,k)},this)}else if(x(a)&&t(b)){var l=a,g=Z(this.h,l);if(!g){if(this.h.g()){if(Ck(this.K()))return dk("get",
void 0);d=new Yj("get");this.K().kb(function(){c.get(a,b).u(function(a){d.w(a)},function(a){d.A(a)})});return d}throw new M('Store name "'+l+'" not found.');}var m=b;P(this.logger,"getById: "+l+":"+m);d=this.g.request("get",[l]);Pk(g,d,arguments,void 0,this);W(d,function(){Y(this).sd(d,l,m)},this)}else throw new M("get require valid input arguments.");return d};
h.keys=function(a,b,c,d,e,f,g){var k,l,m=null,n=!1,p=!1,q=a,s=Z(this.h,q);if(!x(q))throw new M("store name must be a string, but "+q+" of type "+typeof q+" is not.");if(!this.h.g()){if(!s)throw new M('store name "'+q+'" not found.');if(x(b)&&!Mj(s,b))throw new M('index "'+b+'" not found in store "'+q+'".');}if(this.h.g()&&!s)return dk("keys",[]);var v;if(x(b)){var z=b,D=nj(c);if(D)throw new M("invalid key range: "+c+" "+D);m=jj(c);if(y(d))k=d;else{if(t(d))throw new M("limit must be a number");k=100}if(y(e))l=
e;else{if(t(e))throw new M("offset must be a number");l=0}if(t(f))if(fa(f))n=f;else throw new M("reverse must be a boolean");if(t(g))if(fa(g))p=g;else throw new M("unique must be a boolean");P(this.logger,"keysByIndexKeyRange: "+q);v=this.g.request("keys:iter:index",[q]);Pk(s,v,arguments);W(v,function(){Y(this).list(v,2,q,z,m,k,l,n,p)},this)}else{if(A(b)){if(D=nj(b))throw new M("invalid key range: "+wh(b)+" "+D);m=jj(b)}else{if(null!=b)throw new M("invalid key range: "+wh(b)+" of type "+typeof b);
m=null}if(y(c))k=c;else{if(t(c))throw new M("limit must be a number");k=100}if(y(d))l=d;else{if(t(d))throw new M("offset must be a number");l=0}if(t(e))if(fa(e))n=e;else throw new M("reverse must be a boolean");P(this.logger,"keysByKeyRange: "+q);v=this.g.request("keys",[q]);Pk(s,v,arguments);W(v,function(){Y(this).list(v,2,q,null,m,k,l,n,!1)},this)}return v};
h.values=function(a,b,c,d,e,f,g){var k=this,l,m,n,p=!1,q=!1;if(x(a)){var s=a,v=Z(this.h,s);if(!v){if(this.h.g()){if(Ck(this.K()))return dk("values",[]);l=new Yj("values");this.K().kb(function(){k.values(a,b,c,d,e,f).u(function(a){l.w(a)},function(a){l.A(a)})});return l}throw new kk(s);}if(u(b)){if(t(c)||t(d))throw new M("too many input arguments");var z=b;P(this.logger,"listByIds: "+s+" "+z.length+" ids");l=this.g.request("values:array",[s]);Pk(v,l,arguments,void 0,this);W(l,function(){Y(this).bf(l,
s,z)},this)}else if(x(b)){var D=b;if(!Rk(v,D))throw new M('index "'+D+'" not found in store "'+s+'"');var G=nj(c);if(G)throw new M("invalid key range: "+c+" "+G);var J=jj(c);if(t(d))if(y(d))m=d;else throw new M("limit must be a number.");else m=100;if(t(e))if(y(e))n=e;else throw new M("offset must be a number.");else n=0;if(fa(f))p=f;else if(t(f))throw new M("reverse must be a boolean, but "+f);if(t(g))if(fa(g))q=g;else throw new M("unique must be a boolean");P(this.logger,"listByIndexKeyRange: "+
s+":"+D);l=this.g.request("values:iter:index",[s]);Pk(v,l,arguments);W(l,function(){Y(this).list(l,4,s,D,J,m,n,p,q)},this)}else{J=null;if(A(b)){if(G=nj(b))throw new M("invalid key range: "+b+" "+G);J=jj(b)}else if(null!=b)throw new M('expect key range object, but found "'+wh(b)+'" of type '+typeof b);if(t(c))if(y(c))m=c;else throw new M("limit must be a number, but "+c+" is "+typeof c);else m=100;if(t(d))if(y(d))n=d;else throw new M("offset must be a number, but "+d+" is "+typeof d);else n=0;if(t(e))if(fa(e))p=
e;else throw new M("reverse must be a boolean, but "+e+" is "+typeof e);P(this.logger,(J?"listByKeyRange: ":"listByStore: ")+s);l=this.g.request("values",[s]);Pk(v,l,arguments);W(l,function(){Y(this).list(l,4,s,null,J,m,n,p,!1)},this)}}else if(u(a))if(a[0]instanceof pk){for(var v=[],O=a,G=0;G<O.length;G++){var ha=O[G].H();if(!Ok(this.h,ha)){if(this.h.g())return v=[],v[O.length-1]=void 0,dk("get",v);throw new M("Store: "+ha+" not found.");}Ua(v,ha)||v.push(ha)}P(this.logger,"listByKeys: "+S(v)+" "+
O.length+" keys");l=this.g.request("values:keys",v);W(l,function(){Y(this).Gd(l,O)},this)}else throw new M("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new M("first argument "+a+" is invalid.");return l};
h.list=function(a,b,c,d,e,f,g,k,l){var m=Z(this.h,b);if(!m){if(this.h.g())return dk("get",[]);throw new kk(b);}var n;if(c&&!Rk(m,c))throw new M('index "'+c+'" not found in store "'+b+'"');if(m=nj(d))throw new M("invalid key range: "+d+" "+m);var p=jj(d),q=100;if(y(e))q=e;else if(null!=e)throw new M('limit must be a number but "'+e+'" of type '+typeof e+" found.");var s=0;if(y(f))s=f;else if(null!=f)throw new M('offset must be a number but "'+f+'" of type '+typeof f+" found.");var v=!1;if(fa(g))v=
g;else if(null!=g)throw new M('reverse must be a boolean but "'+g+'" of type '+typeof g+" found.");var z=!1;if(fa(k))z=k;else if(null!=k)throw new M('unique must be a boolean but "'+k+'" of type '+typeof k+" found.");if(s&&l&&t(l[0]))throw new M("offset must not given when initial cursor position is defined");P(this.logger,a+": "+b+":"+c);n=this.g.request("values:iter:index",[b]);W(n,function(){Y(this).list(n,a,b,c||null,p,q,s,v,z,l)},this);return n};
h.add=function(a,b,c){var d=x(a)?a:A(a)?a.name:void 0;if(!x(d))throw new M("store name "+d+" must be a string, but "+typeof d);var e=Z(this.h,d);if(!e){if(!this.h.g())throw new M('store name "'+d+'" not found.');e=Ik(A(a)?a:{name:d});P(this.logger,"Adding object store: "+d);Gk(this,e)}else if(this.h.g()&&A(a)&&(a=Ik(a),a=Jk(e,a)))throw new Pc(a);var f;if(!e)throw new M('store name "'+d+'" not found.');if(x(e.keyPath)&&t(c))throw new M("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){P(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Sk(e,b[a]);f=this.g.request("add:array",[d],Hj);W(f,function(){Y(this).jb(f,!1,!1,d,b,c)},this);e.Wb&&f.B(function(a){a=new Tk(Uk,this.K(),e.getName(),a,b);this.K().Sa(a)},this)}else if(A(b))a="store: "+d+" key: "+Vk(e,b,c),P(this.logger,"addObject: "+a),Sk(e,b),f=this.g.request("add",[d],Hj),W(f,function(){Y(this).jb(f,!1,!0,d,[b],[c])},
this),e.Wb&&f.B(function(a){a=new Wk(Uk,this.K(),e.getName(),a,b);this.K().Sa(a)},this);else throw new M("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function Xk(a,b){var c=x(b)?b:A(b)?b.name:void 0;if(!x(c))throw new M("store name must be a string");var d=Z(a.h,c);if(!d){if(!a.h.g())throw new kk(c);d=Ik(A(b)?b:{name:c});P(a.logger,"Adding object store: "+c);Gk(a,d)}else if(a.h.g()&&A(b)){var e=Ik(b);if(e=Jk(d,e))throw new Pc(e);}if(!d)throw new kk(c);return d}h.load=function(a,b,c){var d=c||",",e=Xk(this,a).getName();a=this.g.request("load",[e]);var f=this;this.g.lc(a,function(a,c,l){Y(f).hf(a,c,l,e,b,d)},[e],Hj);return a};
h.search=function(a){var b=Yk(a);Q(this.logger,"query "+a);var c=this.g.request("search",b,Gj);W(c,function(){var b=Y(this);Zk(a,function(e,f,g,k){var l=ak(c);b.list(l,4,e,f,jj(g),100,0,!1,!1);l.fa(function(b){var d=null;b instanceof Array||(d=b,b=[]);for(var e=0;e<b.length;e++){var f;f=b[e];var g=f.id,g=x(g)?yj(g):g,k=g[3];(f=1==this.type&&k!=this.value?null:new $k(this,g[0],g[2],g[1],k,f.k,f.loc))&&a.j.push(f)}a.i--;b=0==a.i?!1:a.h[a.h.length-1].l===this.l?!0:null;!0===b?Uc(c,a):!1===b&&c.w(al(a));
if(d)throw d;},k)})},this);return c};
h.put=function(a,b,c){var d,e=this;if(a instanceof pk){var f=a,g=f.H(),k=Z(this.h,g);if(!k)throw new M('store "'+g+'" not found.');if(k.keyPath){var l=Vk(k,b);if(null!=l){if(0!=qj(l,f.F()))throw new M("Inline key must be "+f+" but "+l+" found.");}else bl(k,b,f.F());return this.put(g,b)}return this.put(g,b,f.F())}if(u(a)){if(t(c))throw new M("too many arguments");var m=a;if(!t(b))throw new M("record values required");for(var n=b,f=[],g=0,k=m.length;g<k;g++){l=m[g].H();-1==Ma(f,l)&&f.push(l);var p=
Z(this.h,l);if(!p)throw new M('store "'+l+'" not found.');p.keyPath&&bl(p,n[g],m[g].F())}P(this.logger,"putByKeys: to "+S(f)+" "+n.length+" objects");for(g=0;g<n.length;g++)Sk(p,n[g]);d=this.g.request("put:keys",f,Hj);Pk(p,d,arguments);W(d,function(){Y(e).Nd(d,n,m)},this)}else if(x(a)||A(a)){var p=Xk(this,a),q=p.getName();if(p.keyPath&&t(c))throw new M("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.h&&!t(c))throw new M("out-of-line key must be provided.");if(u(b)){var s=
b,v=c;P(this.logger,"putObjects: "+q+" "+s.length+" objects");for(g=0;g<s.length;g++)Sk(p,s[g]);d=this.g.request("put:array",[q],Hj);Pk(p,d,arguments);W(d,function(){Y(this).jb(d,!0,!1,q,s,v)},this);p.Wb&&d.B(function(a){a=new Tk(cl,this.K(),q,a,s);this.K().Sa(a)},this)}else if(A(b)){var z=b,D=c;P(this.logger,"putObject: "+q+" "+D);if(t(r.Blob)&&z instanceof Blob&&p.kc&&!p.keyPath&&0==p.indexes.length&&Kb)d=new Yj("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,c=e.g.request("put",
[q],Hj);Pk(p,c,[q,z,D]);W(c,function(){Y(e).jb(c,!0,!0,q,[b],[D])},this);c.u(function(a){d.w(a)},function(a){d.A(a)})},f.onerror=function(a){d.A(a)},f.onabort=function(a){d.A(a)},f.readAsDataURL(z);else{Sk(p,z);d=this.g.request("put",[q],Hj);var G=[q,z,D];Pk(p,d,G);W(d,function(){var a=t(D)?[G[2]]:void 0;Y(e).jb(d,!0,!0,q,[G[1]],a)},this)}p.Wb&&d.B(function(a){a=new Wk(cl,this.K(),q,a,z);this.K().Sa(a)},this)}else throw new M("put record value must be Object or array of Objects");}else throw new M("the first argument of put must be store name, store schema or array of keys.");
return d};
function dl(a,b,c,d){var e=a.Za,f,g;if(x(b)){var k=Z(a.h,b);if(k){if(!k.keyPath&&!k.h&&null==d)throw new M('key required for store "'+b+'"');}else throw new kk(b);for(var l=0;l<c.length;l++)Sk(k,c[l]);f=[b]}else{g=b;f=[];for(var l=0,m=g.length;l<m;l++){var n=g[l].H(),k=Z(a.h,n);-1==Ma(f,n)&&f.push(n);if(!k)throw new kk(n);Sk(k,c[l])}}var p;x(b)?(k=Z(a.h,b),p=e.request("put:array",f,Hj),W(p,function(){Y(this).jb(p,!0,!1,b,c,d)},a)):(p=e.request("put:keys",f,Hj),W(p,function(){Y(this).Nd(p,c,g)},a));
return p}function el(a,b){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d].H();-1==Ma(c,f)&&c.push(f);if(!Ok(a.h,f))throw new kk(f);}var g=a.Za.request("rm:keys",c,Hj);W(g,function(){Y(this).Qd(g,b)},a);return g}function fl(a,b,c){var d=a.Za.request("rm:iter",[b],Hj);W(d,function(){Y(this).Wc(d,b,c||null)},a);return d}
function gl(a,b,c,d,e,f,g){f=f||100;var k,l=g||0;if(g=Z(a.h,b)){if(c&&!Rk(g,c))throw new kk('index "'+c+'" in store "'+b+'"');}else throw new kk(b);var m=jj(d);x(c)?(k=a.Za.request("values:iter:index",[b]),W(k,function(){Y(this).list(k,4,b,c,m,f,l,e,!1)},a)):(k=a.Za.request("values",[b]),W(k,function(){Y(this).list(k,4,b,null,m,f,l,e,!1)},a));return k}
function hl(a,b){var c=[],d=b.length;if(0==d)return dk("keys",[]);for(var e=0;e<d;e++){var f=b[e].H();-1==Ma(c,f)&&c.push(f);if(!Ok(a.h,f))throw new kk(f);}var g=a.Za.request("keys",c);W(g,function(){Y(a).Gd(g,b)},a);return g}
function il(a,b,c,d,e,f,g,k){var l;e=e||100;var m=Z(a.h,b);if(m){if(c&&!Rk(m,c))throw new kk('index "'+c+'" in store "'+b+'"');}else throw new kk(b);x(c)?(l=a.Za.request("keys:iter:index",[b]),W(l,function(){Y(this).list(l,2,b,c,d,e,f,g,k)},a)):(l=a.Za.request("keys",[b]),W(l,function(){Y(this).list(l,2,b,null,d,e,f,g,k)},a));return l}
h.clear=function(a,b,c){if(t(c))throw new M("too many input arguments");var d;if(x(a)){c=Z(this.h,a);if(!c)throw new M('store name "'+a+'" not found.');if(A(b)){var e=jj(b);if(null===e)throw new M("clear method requires a valid non-null KeyRange object.");P(this.logger,"clearByKeyRange: "+a+":"+S(e));d=this.g.request("clear",[a],Hj);Pk(c,d,[a,e]);W(d,function(){Y(this).ne(d,a,e)},this)}else{if(t(b))throw new M("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);P(this.logger,"clearByStore: "+a);d=this.g.request("clear",[a],Hj);W(d,function(){Y(this).ld(d,[a])},this)}}else if(!t(a)||u(a)&&x(a[0])){var f=a||Qk(this.h);P(this.logger,"clearByStores: "+S(f));d=this.g.request("clear",f,Hj);W(d,function(){Y(this).ld(d,f)},this)}else throw new M('first argument "'+a+'" is invalid.');return d};
h.remove=function(a,b,c){var d;if(x(a)){var e=Z(this.h,a);if(!e)throw new M('store name "'+a+'" not found.');if(t(c))if(x(b)){var f=Mj(e,b);if(!f)throw new M("index: "+b+" not found in "+a);if(A(c)||null===c){var g=jj(c);P(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.g.request("rm:iter:index",[a],Hj);W(d,function(){Y(this).jf(d,a,f.getName(),g)},this)}else throw new M("key range "+c+' is invalid type "'+typeof c+'".');}else throw new M('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||y(b)||w(b)||b instanceof Date){P(this.logger,"removeById: "+a+":"+b);d=this.g.request("rm",[a],Hj);var k=[a,b];Pk(e,d,k);W(d,function(){Y(this).Pd(d,a,k[1])},this);e.Wb&&d.B(function(b){b=new Wk(jl,this.K(),a,b,void 0);this.K().Sa(b)},this)}else if(A(b))g=jj(b),P(this.logger,"removeByKeyRange: "+a+":"+S(g)),d=this.g.request("rm:iter",[a],Hj),Pk(e,d,[a,g]),W(d,function(){Y(this).Wc(d,a,g)},this),e.Wb&&d.B(function(b){b=new Tk(jl,this.K(),a,b,void 0);this.K().Sa(b)},
this);else throw new M('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof pk){var l=a.H(),e=Z(this.h,l);d=this.g.request("rm",[l],Hj);var m=[l,a.F()];Pk(e,d,m);W(d,function(){Y(this).Pd(d,l,m[1])},this)}else if(u(a)){b=[];c=0;for(e=a.length;c<e;c++){if(!(a[c]instanceof pk))throw new M("key list element at "+c+" of "+e+' must be yn.db.Key, but "'+wh(a[c])+'" ('+ea(a[c])+") is not ydn.db.Key.");var n=a[c].H();-1==Ma(b,n)&&b.push(n)}if(1>b.length)throw new M('at least one valid key required in key list "'+
wh(a)+'"');d=this.g.request("rm:keys",b,Hj);W(d,function(){Y(this).Qd(d,a)},this)}else throw new M('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+wh(a)+'" ('+ea(a)+") found.");return d};h.toString=function(){return"DbOperator:"+this.K().getName()};function kl(a,b,c,d){Fk.call(this,a,b,c,d)}E(kl,Nk);h=kl.prototype;h.logger=R("ydn.db.core.DbOperator");h.get=function(a,b){if(a instanceof Rj){var c=a.H(),d=Z(this.h,c);if(!d)throw new M('store "'+c+'" not found.');var e=a.h;if(t(e)&&!Rk(d,e))throw new M('index "'+e+'" not found in store "'+c+'".');P(this.logger,"getByIterator:"+a);var f=this.g.request("get:iter",[c]);W(f,function(){ll(this,5,f,a,1)},this);return f}return kl.m.get.call(this,a,b)};
h.keys=function(a,b,c,d,e,f,g){if(a instanceof Rj){var k=100;if(y(b)){if(k=b,1>k)throw new M("limit must be a positive value, but "+b);}else if(t(b))throw new M("limit must be a number,  but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"keysByIterator:"+a);var l=this.g.request("keys:iter",[a.H()]);W(l,function(){a.o?ll(this,1,l,a,k):ll(this,2,l,a,k)},this);return l}return kl.m.keys.call(this,a,b,c,d,e,f,g)};
h.count=function(a,b,c,d){if(a instanceof Rj){if(t(b)||t(c))throw new M("too many arguments.");P(this.logger,"countIterator:"+a);var e=this.g.request("count",[a.H()]);W(e,function(){ll(this,6,e,a)},this);return e}return kl.m.count.call(this,a,b,c,d)};
h.values=function(a,b,c,d,e,f){if(a instanceof Rj){var g;if(y(b)){if(g=b,1>g)throw new M("limit must be a positive value, but "+g);}else if(t(b))throw new M("limit must be a number, but "+b);if(t(c))throw new M("offset must not be specified");P(this.logger,"listByIterator:"+a);var k=this.g.request("values:iter",[a.H()]);W(k,function(){a.g?ll(this,2,k,a,g):ll(this,4,k,a,g)},this);return k}return kl.m.values.call(this,a,b,c,d,e,f)};
h.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new M('Store "'+e+'" not found.');e=this.g.request("map",d);Q(this.logger,"map:"+a);this.g.lc(e,function(d,e,f){Q(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=Y(c).h(d,e,m[p]);var q=a.load(n);q.S=function(a){f(a,!1)};q.O=function(c){null!=c?(c=a.o?a.g?c:q.ja():a.g?c:q.U(),b(c),q.advance(1)):(f(void 0),b=null)}},d,Gj);return e};
function ll(a,b,c,d,e){var f=[],g=c.g,k=X(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);P(a.logger,l);for(var m=Y(a),n=[],p=d.stores(),q=0;q<p.length;q++)n[q]=m.h(g,k,p[q]);var s=d.load(n);s.S=function(a){Pj(s);V(c,a,!0)};var v=0,z=!1;s.O=function(d){z||(Q(a.logger,l+" starting"),z=!0);null!=d?(s.ja(),v++,1==b?f.push(d):2==b?f.push(s.ja()):3==b?f.push([d,s.ja()]):6!=b&&f.push(s.U()),5==b?(Pj(s),V(c,f[0])):6==b||!t(e)||v<e?s.md():(P(a.logger,"success:"+l+" yields "+f.length+" records"),Pj(s),
V(c,f))):(P(a.logger,"success:"+l+" yields "+f.length+" records"),Pj(s),V(c,5==b?f[0]:6==b?v:f))}};var Uk="created",jl="deleted",cl="updated";function ml(a,b){K.call(this,a,b)}E(ml,K);ml.prototype.H=function(){return this.P};function nl(a,b,c){K.call(this,a,b);this.version=c}E(nl,ml);nl.prototype.name="ReadyEvent";nl.prototype.version=NaN;function ol(a,b,c){K.call(this,c||"error",a);this.error=b}E(ol,ml);ol.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};ol.prototype.name="ErrorEvent";ol.prototype.error=null;function pl(a,b){ol.call(this,a,b,"fail")}E(pl,ol);
pl.prototype.name="FailEvent";function Wk(a,b,c,d,e){K.call(this,a,b);this.P=c;this.key=d;this.value=e}E(Wk,ml);Wk.prototype.name="RecordEvent";Wk.prototype.U=function(){return this.value};function Tk(a,b,c,d,e){K.call(this,a,b);this.P=c;this.keys=d;this.values=e}E(Tk,ml);Tk.prototype.name="StoreEvent";Tk.prototype.Ma=function(){return this.keys};Tk.prototype.ya=function(){return this.values};function ql(a,b,c,d,e,f){t(e)||(e=u(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new M("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);u(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.n=w(this.keyPath);this.h=e;this.type=rl(b);if(t(b)){if(!t(this.type))throw new M("type invalid in index: "+this.h);if(u(this.keyPath))throw new M('composite key for store "'+this.h+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.o=x(this.type)?
this.type:sl;this.j=x(e)?e:u(a)?this.keyPath.join(","):a;this.i=Ia(this.j);this.g=this.n?null:this.keyPath.split(".");this.l=f||null}function tl(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=sj(b,a.keyPath[d]);c[d]=f}return c}return sj(b,a.keyPath)}}function ul(a,b,c){for(var d=0;d<a.g.length;d++)d==a.g.length-1?b[a.g[d]]=c:A(b[a.g[d]])||(b[a.g[d]]={})}var sl="TEXT";function rj(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:vj(a)}
function vl(a,b){return"DATE"==b?new Date(a):t(b)?a:yj(a)}var wl=["BLOB","DATE","INTEGER","NUMERIC",sl];function rl(a){if(x(a))return a=Ma(wl,a),wl[a]}h=ql.prototype;h.getName=function(){return this.h};h.toJSON=function(){return{name:this.h,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};h.ga=function(){var a=u(this.keyPath)?Za(this.keyPath):this.keyPath;return new ql(a,this.type,this.unique,this.multiEntry,this.h,this.l)};
function xl(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?db(a,b)?null:"expect: "+a+", but: "+b:yl(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}h.hint=function(a){if(!a)return this;var b=u(this.keyPath)?Za(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new ql(b,c,this.unique,this.multiEntry,a.h)};function zl(a,b){a.l=b}
h.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.g&&1<this.g.length&&(a+="Compound");return a+"Index:"+this.h};function Hk(a,b,c,d,e,f,g,k){this.i=a;if(!x(this.i))throw new M("store name must be a string");this.keyPath=t(b)?b:null;this.s=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.s)throw new M("keyPath must be a string or array");this.h=c;var l;if(null!=d){l=rl(d);if(!t(l))throw new M('type "'+d+'" for primary key in store "'+this.i+'" is invalid.');if(this.s)throw new M('composite key for store "'+this.i+'" must not specified type');}this.type=null!=l?l:this.h?"INTEGER":void 0;this.n=
x(this.keyPath)?this.keyPath.split("."):[];this.indexes=e||[];this.Wb=!!f;this.kc=!!g;this.C=x(this.type)?this.type:sl;this.l=u(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.j=Ia(this.l);if(this.G=!!k){if(this.keyPath)throw new M('encrypted store "'+this.i+'" must not use inline key');if(this.h)throw new M('encrypted store "'+this.i+'" must not use key generator');}this.o=[]}h=Hk.prototype;h.Wb=!1;h.kc=!1;
h.toJSON=function(){for(var a=[],b=0;b<this.indexes.length;b++)a.push(this.indexes[b].toJSON());return{name:this.i,keyPath:this.keyPath,autoIncrement:this.h,type:this.type,indexes:a}};
function Ik(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(u(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),g=void 0;for(g in e)if(e.hasOwnProperty(g)&&-1==Ma(f,g))throw new M("Unknown field: "+g+" in "+S(e));e=new ql(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Hk(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function Al(a,b,c,d,e,f,g){a=Bl(a,b,c,d,e,f,g);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.Fc;a.wa&&(b+=" WHERE "+a.wa);a.group&&(b+=" GROUP BY "+a.group);a.gc&&(b+=" ORDER BY "+a.gc);return b}
function Bl(a,b,c,d,e,f,g){var k={select:"",Fc:"",wa:"",group:"",gc:""},l=a.l,m=a.j,n=null;d!==l&&x(d)&&(n=Mj(a,d));var p=!!n,q=d||l,s=Ia(q),v=p?n.type:a.type,z=p&&n.multiEntry;k.Fc=Cl(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=g?"DISTINCT ":"";l=[];z?(z=Ia("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+z+"."+s+")":3===c||1===c||2===c?"DISTINCT "+Cl(a)+"."+m+", "+z+"."+s+" AS "+q:"DISTINCT "+Cl(a)+".*, "+
z+"."+s+" AS "+q,k.Fc=z+" INNER JOIN "+Cl(a)+" USING ("+m+")",null!=e&&(pj(z+"."+s,v,e,l,b),0<l.length&&(k.wa=k.wa?k.wa+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(pj(s,v,e,l,b),0<l.length&&(k.wa=k.wa?k.wa+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&g&&(k.group=s);a=f?"DESC":"ASC";k.gc=s+" "+a;p&&(k.gc+=", "+m+" "+a);return k}
function Dl(a,b,c,d,e,f,g,k,l){var m,n,p,q;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,q=e.upperOpen,f?null!=n?(e=qj(k,n),-1==e?(n=k,q=l):0==e&&(q=l||q)):(n=k,q=l):null!=m?(e=qj(k,m),1==e?(m=k,p=l):0==e&&(p=l||p)):(m=k,p=l)):f?(n=k,q=l):(m=k,p=l);e=new U(m,n,!!p,!!q);d=d?Mj(a,d):null;b=Bl(a,c,b,d?d.j:a.l,e,f,g);b="SELECT "+b.select+" FROM "+b.Fc+(b.wa?" WHERE "+b.wa:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.gc;d&&(b+=", "+a.j+(f?"DESC":"ASC"));return b}
function El(a,b,c,d,e,f,g,k,l,m){var n=Mj(a,d),p=n.j;d=n.i;var q=a.j,s=l?" <":" >",s=g?s+" ":s+"= ";g=rj(f,n.type);k=rj(k,a.type);n="";e?(a=Bl(a,c,b,p,e,l,m),a.wa+=" AND ",n=d+s+"?",c.push(g)):(e=l?U.upperBound(f,!0):U.lowerBound(f,!0),a=Bl(a,c,b,p,e,l,m),n=a.wa,a.wa="");a.wa+="("+n+" OR ("+d+" = ? AND "+q+s+"?))";c.push(g);c.push(k);return"SELECT "+a.select+" FROM "+a.Fc+" WHERE "+a.wa+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.gc}h.ga=function(){return Ik(this.toJSON())};
h.index=function(a){return this.indexes[a]||null};function Mj(a,b){return Sa(a.indexes,function(a){return a.getName()==b})}function Lj(a,b){for(var c=0;c<a.indexes.length;c++)if(!xl(a.indexes[c].keyPath,b))return a.indexes[c];return null}function Rk(a,b){return b===a.keyPath?!0:Qa(a.indexes,function(a){return a.getName()==b})}function Cl(a){return Ia(a.i)}
function Fl(a,b){if(!b)return a;var c=a.h,d=u(a.keyPath)?Za(a.keyPath):a.keyPath,e=a.type,f=Pa(a.indexes,function(a){return a.ga()});t(b.type)||"TEXT"!=e||(e=void 0);u(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=Za(b.keyPath));for(var g=0,k=b.indexes.length;g<k;g++)if(b.indexes[g].n)for(var l=b.indexes[g].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.indexes[g].ga();break}for(g=0;g<f.length;g++)(k=Mj(b,f[g].getName()))&&(f[g]=f[g].hint(k));return new Hk(b.i,d,c,e,f)}
h.getName=function(){return this.i};function Gl(a){return!!a.keyPath}function Vk(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.s){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(sj(b,a.keyPath[d]));return c}if(a.keyPath)return nc(b,a.n)}}function bl(a,b,c){for(var d=0;d<a.n.length;d++){var e=a.n[d];if(d==a.n.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Hl(a,b,c){var d=[],e=[];c=t(c)?c:Vk(a,b);t(c)&&(e.push(a.j),d.push(rj(c,a.type)));for(var f=0;f<a.indexes.length;f++){var g=a.indexes[f];if(!g.multiEntry&&g.getName()!==a.keyPath&&"_default_"!=g.getName()){var k=tl(g,b);null!=k&&(d.push(rj(k,g.type)),e.push(g.i))}}a.kc?a.kc&&!a.keyPath&&0==a.indexes.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(S(b)),e.push("_default_")):(d.push(S(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Lf:e,hg:a,values:d,key:c}}
function Jk(a,b){if(!b)return"missing store: "+a.i;if(a.i!=b.i)return"store name, expect: "+a.i+", but: "+b.i;var c=xl(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.h)&&t(b.h)&&a.h!=b.h)return"autoIncrement, expect:  "+a.h+", but: "+b.h;if(a.indexes.length!=b.indexes.length)return"indexes length, expect:  "+a.indexes.length+", but: "+b.indexes.length;if(t(a.type)&&t(b.type)&&(w(a.type)?!db(a.type,b.type):a.type!=b.type))return"data type, expect:  "+a.type+", but: "+b.type;for(c=0;c<a.indexes.length;c++){var d=
Mj(b,a.indexes[c].getName()),e;e=a.indexes[c];if(d)if(e.h!=d.h)e="name, expect: "+e.h+", but: "+d.h;else{var f=xl(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(w(e.type)?!db(e.type,d.type):e.type!=d.type)?"data type, expect: "+e.type+", but: "+d.type:""}else e=
"no index for "+e.h;if(0<e.length)return'index "'+a.indexes[c].getName()+'" '+e}return""}function Sk(a,b){if(b)for(var c=0;c<a.indexes.length;c++){var d=a.indexes[c],e=b;if(d.l){var f=d.l(e),g=typeof f;if("string"==g||"number"==g||f instanceof Date||u(f)){for(g=0;g<d.g.length-1;g++)A(e[d.g[g]])||(e[d.g[g]]={});e[d.g[d.g.length-1]]=f}}}}function Il(a,b){a.o.push(b)}function Pk(a,b,c,d,e){for(var f=0;f<a.o.length;f++)d!==f&&a.o[f].call(e,b,c)}
h.toString=function(){return"Store:"+this.i+"["+this.indexes.length+"index]"};function Jl(a,b,c){if(!a||ta(a))throw new M("store_name must be provided for primary full text index");if(!b||ta(b))throw new M("index_name must be provided for primary full text index");this.P=a;this.g=b;this.h=c||1}Jl.prototype.H=function(){return this.P};function Kl(a,b,c,d){this.name=a;this.indexes=b;this.lang=c||"";if(-1==["","en","fr"].indexOf(this.lang))throw new M('Unsupported lang "'+c+" for full text search index "+a);this.h=d||null;this.g=null}Kl.prototype.getName=function(){return this.name};Kl.prototype.count=function(){return this.indexes.length};Kl.prototype.index=function(a){return this.indexes[a]};function Ml(a,b,c){return Sa(a.indexes,function(a){return a.H()==b&&a.g==c})}
function Nl(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M("Unknown field: "+c+" in "+S(a));if(!u(a.sources))throw new M("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ma(b,c))throw new M("Unknown field: "+c+" in "+wh(a));return new Jl(a.storeName,a.keyPath,a.weight)});return new Kl(a.name,
b,a.lang)};function Ol(a,b){var c,d,e=b;if(A(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ma(c,f))throw new M("Unknown field: "+f+" in schema.");c=d.version;var e=[],g=d.stores||[];if(!u(g))throw new M("stores must be array");for(f=0;f<g.length;f++){var k=Ik(g[f]);if(-1!=Ta(e,function(a){return a.name==k.getName()}))throw new M('duplicate store name "'+k.getName()+'".');e.push(k)}}else x(a)?c=0==a.length?void 0:parseFloat(a):y(a)&&(c=a);if(t(c)){if(!y(c)||0>c)throw new M("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!u(b)||0<b.length&&!(b[0]instanceof Hk)))throw new M("stores");this.version=c;this.h=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Nl(d.fullTextCatalogs[f]),c[f]=e,Z(this,e.getName())||(g=[new ql("k",sl),new ql("v",sl)],e=new Hk(e.getName(),"id",!1,void 0,g),this.stores.push(e));this.i=c}
Ol.prototype.toJSON=function(){var a=Pa(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};Ol.prototype.h=!1;Ol.prototype.g=function(){return!1};function Qk(a){return Pa(a.stores,function(a){return a.getName()})}Ol.prototype.count=function(){return this.stores.length};function Z(a,b){return Sa(a.stores,function(a){return a.getName()==b})}function Ok(a,b){return Qa(a.stores,function(a){return a.getName()==b})}
function Pl(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=Z(b,a.stores[e].getName());if(f){c&&(f=Fl(f,a.stores[e]));if(d)for(var g=f,k=a.stores[e],l=0;l<k.indexes.length;l++){var m=k.indexes[l];Rk(g,m.getName())||"BLOB"!=m.type||(m=new ql(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),g.indexes.push(m))}f=Jk(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""}function Ql(a,b){return Sa(a.i,function(a){return a.getName()==b})};function Kk(a,b){Ol.call(this,a,b)}E(Kk,Ol);Kk.prototype.g=function(){return!0};function Lk(a,b){a.stores.push(b)};function Rl(a){return vh(S(a))}function yl(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==Sa(b,function(b){return yl(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&yl(a[0],b);if(w(b))return 1==b.length&&yl(b[0],a);if(A(a)&&A(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=yl(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=yl(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function Sl(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Tl(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ma(d,e))throw new M('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!u(c.mechanisms))throw new M("mechanisms attribute must be an array but "+ea(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!Ua(Ul,c.mechanisms[e]))throw new M('Invalid mechanism "'+c.mechanisms[e]+'"');}this.J=c.mechanisms||Ul;this.C=c.size;this.O=
t(c.connectionTimeout)?c.connectionTimeout:3E4;this.i=null;this.j=[];this.Cd=!1;if(b instanceof Ol)c=b;else if(A(b))for(c=c.autoSchema||!t(b.stores)?new Kk(b):new Ol(b),d=b.stores?b.stores.length:0,e=0;e<d;e++){var f=Z(c,b.stores[e].name);b.stores[e].Sync&&this.Ff(f,b.stores[e].Sync)}else c=new Kk;this.h=c;for(e=0;e<this.h.count();e++)if((this.h.stores[e]||null).G)throw Error("encryption option must be defined");if(t(a)){if(this.i)throw new Rc("Already connected with "+this.s);this.s=a;Mk(this)}this.o=
null;this.n=new F}Tl.prototype.logger=R("ydn.db.con.Storage");function Vl(a,b,c){return(a=Z(a.h,b))?Rk(a,c):!1}function Wl(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.i?a.i.hb(c):Dk(a,function(b){a.i.hb(c,b)},null,Gj)}return a.h?a.h.toJSON():null}Tl.prototype.getName=function(){return this.s};var Ul="indexeddb websql localstorage sessionstorage userdata memory".split(" ");h=Tl.prototype;h.qe=function(){return null};
function Mk(a){function b(b,e){b?(Q(a.logger,a+": ready."),a.ag=NaN,d.cd=function(b){a.Sa(new ol(a,b))},d.be=function(b){a.Sa(new pl(a,b));a.i=null},d.Ld=function(b){a.Sa(b)},setTimeout(function(){Xl(a,e);Yl(a)},10),c.w(e)):(N(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Xl(a,new pl(a,e));if(a.j){a.logger.info("Purging "+a.j.length+" transactions request.");for(var b;b=a.j.shift();)b.Xa&&b.Xa("error",e)}},10),c.A(e))}for(var c=new F,d=null,e=a.J,f=0;f<e.length;f++){var g=
e[f].toLowerCase();if(d=a.qe(g)){d=a.qe(g);break}}null===d?(e=new Fh("No storage mechanism found."),b(!1,new pl(a,e))):(a.init(),d.connect(a.s,a.h).u(function(){this.i=d;b(!0,new nl("ready",this,parseFloat(d.$d())))},function(a){N(this.logger,this+": opening fail");b(!1,a)},a))}function vk(a){if(a.i)return a.i.Cc()}h.kb=function(a,b){this.n.fa(a,b)};function Xl(a,b){setTimeout(function(){b instanceof ol?a.n.A(b.error):a.n.w();a.Sa(b)},4)}function Ck(a){return!!a.i&&a.i.ae()}h.init=function(){};
function Zl(a){a.i&&(a.i.Zd(),a.i=null,Q(a.logger,a+" closed"))}h.ag=NaN;function Yl(a){var b=a.j.shift();b&&(Q(a.logger,"pop tx queue["+(a.j.length+1)+"]"),Dk(a,b.rd,b.scopes,b.mode,b.Xa));a.ag=C()}function $l(a,b,c,d,e){Q(a.logger,"push tx queue["+a.j.length+"]");a.j.push({rd:b,scopes:c,mode:d,Xa:e});100<a.j.length&&0==a.j.length%100&&N(a.logger,"Transaction queue stack size is "+a.j.length+". It is too large, possibility due to incorrect usage.")}h.Cd=!1;
function Dk(a,b,c,d,e){var f=c;if(x(c))f=[c];else if(null!=c)if(w(c)){if(0==c.length)throw new M("number of store names must more than 0");for(var g=0;g<c.length;g++)if(!x(c[g]))throw new M("store name at "+g+" must be string but found "+typeof c[g]);}else throw new M("store names must be an array");else f=null;if(a.i&&a.i.ae()&&!a.Cd){var k=t(d)?d:Gj;k==Ij&&(a.Cd=!0);a.i.qd(function(a){b(a);b=null},f,k,function(b,c){ga(e)&&(e(b,c),e=void 0);k==Ij&&(a.Cd=!1);Yl(a)})}else $l(a,b,f,d,e)}
h.Ff=function(a){N(this.logger,"Synchronization option for "+a.getName()+" ignored.")};h.Ef=function(a){N(this.logger,"Full text indexer option for "+a.getName()+" ignored.")};h.Sa=function(){};h.toString=function(){return"Storage:"+this.i};function am(a,b,c,d){this.j=a;this.l=b;this.g=Za(c);this.h=d;this.i=[]}am.prototype.j=null;am.prototype.onCompleted=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c](a,b);this.i.length=0;this.i=this.g=this.j=null};function bm(a,b,c){if(a.j)c&&a.i.push(c),b(a.j);else throw new Sc("tx committed on ParallelTxExecutor");}am.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.l+" mode:"+this.h+" scopes:"+S(this.g)};function cm(a,b,c,d,e,f){sk.call(this,a,b,c,d,e,f);this.j=this.g=null}E(cm,sk);h=cm.prototype;h.logger=R("ydn.db.tr.Parallel");h.abort=function(){P(this.logger,this+": aborting");wk(this.j)};
h.pg=function(a,b){var c;if("multi"==this.l)a:if(c=this.g,!c.g||!c.h||b!=c.h&&(c.h!=Hj||b!=Gj)||a.length>c.g.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.l)a:if(c=this.g,c.g&&c.h&&b==c.h&&c.g.length==a.length){for(d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.l?!0:!1;return c};
h.Nb=function(a,b,c,d){function e(c){l.i++;m=new am(c,l.i,b,k);g=l.La();cf(l.logger,g+" BEGIN "+S(b)+" "+k);l.g=m;bm(l.g,a,d)}function f(a,b){cf(l.logger,g+" "+a);if(m)m.onCompleted(a,b);l.h=0}var g;this.Y&&(b=this.Y);this.S&&(c=this.S);var k=t(c)?c:Gj,l=this,m;if(this.g&&this.g.j&&this.pg(b,k))bm(this.g,a,d);else{if(this.J&&this.i>=this.J)throw new Rc("Exceed maximum number of transactions of "+this.J);Dk(this.K(),e,b,k,f)}};
h.request=function(a,b,c,d){var e=cm.m.request.call(this,a,b,c,d),f=this;this.Nb(function(a){f.h++;Zj(e,a,f.La()+"R"+f.h)},b,c||Gj,d);return e};h.lc=function(a,b,c,d,e){var f=this,g;this.Nb(function(c){f.h++;g=f.La()+"R"+f.h;P(f.logger,g+" BEGIN");b(c,g,function(b,d){f.j=c;g=f.La()+"R"+f.h;d?(P(f.logger,g+" ERROR"),a.A(b)):(P(f.logger,g+" SUCCESS"),a.w(b));f.j=null});b=null;P(f.logger,g+" END")},c,d,e)};h.toString=function(){return"Parallel:"+this.l+":"+this.La()+(this.j?"*":"")};function dm(a,b){cm.call(this,a,b,tk)}E(dm,cm);h=dm.prototype;h.logger=R("ydn.db.tr.AtomicParallel");h.pg=function(){return!1};h.request=function(a,b,c){var d,e,f,g=this,k=dm.m.request.call(this,a,b,c,function(a,b){k.g=null;P(g.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new ok;V(k,c,!0)}});ck(k,function(a,b,c){f=b;e=a;d=c});return k};
h.lc=function(a,b,c,d,e){var f,g,k=new F;k.u(function(a){g=!1;f=a},function(a){g=!0;f=a});dm.m.lc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.A(c);else if(!0===g)a.A(f);else if(!1===g)a.w(f);else{var d=new ok;a.A(d)}e&&(e(b,c),e=void 0)})};h.toString=function(){return"Atomic"+dm.m.toString.call(this)};function em(a,b,c){Tl.call(this,a,b,c);this.l=0;a=!0;b=tk;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=fm(this,b,a);this.Za=fm(this,"atomic",!1);this.g=this.Sc(c,this.Za)}E(em,Tl);em.prototype.l=0;em.prototype.Sc=function(a,b){return new Fk(this,this.h,a,b)};
function fm(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==tk)return new yk(a,a.l++,b,d,e,f);if("atomic"==b)return new Ek(a,a.l++);throw new M('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==tk)return new cm(a,a.l++,b,d,e,f);if("atomic"==b)return new dm(a,a.l++);throw new M('Invalid requestType "'+b+'"');}
em.prototype.S=function(a,b,c){if(3<arguments.length)throw new M("too many input arguments, run accept not more than 3 input arguments, but "+arguments.length+" found.");this.l++;var d=b||Qk(this.h),e=Gj;if(c)if("readwrite"==c)e=Hj;else if("readonly"!=c)throw new M('Invalid transaction mode "'+c+'"');var f=fm(this,"all",!1,d,e,1),g=this.Sc(f,this.Za),k=new Yj("run"),l=this;f.Nb(function(b){Q(l.logger,"executing run in transaction on "+f);Zj(k,b,f.La()+"R0");a(g)},d,e,function(a){k.g=null;V(k,f.i,
"complete"!==a)});return k};function gm(a,b,c){em.call(this,a,b,c);a=this.h;for(b=0;b<a.i.length;b++){c=a.i[b];var d=Z(a,c.getName());if(d){if(!Rk(d,"k"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if(!Rk(d,"v"))throw new M('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new M('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new M('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Z(a,e.H());if(f)this.Ef(f,c);else throw new M('full text source store "'+e.H()+'" does not exist for full text index "'+c.getName()+'"');}}}E(gm,em);h=gm.prototype;h.init=function(){gm.m.init.call(this)};h.Sc=function(a,b){return new Nk(this,this.h,a,b)};h.add=function(a,b,c){return this.g.add(a,b,c)};h.count=function(a,b,c,d){return this.g.count(a,b,c,d)};h.get=function(a,b){return this.g.get(a,b)};h.keys=function(a,b,c,d,e,f,g){return this.g.keys(a,b,c,d,e,f,g)};
h.values=function(a,b,c,d,e,f){return this.g.values(a,b,c,d,e,f)};h.list=function(a,b,c,d,e,f,g,k,l){return this.g.list(a,b,c,d,e,f,g,k,l)};h.load=function(a,b,c){return this.g.load(a,b,c)};h.put=function(a,b,c){return this.g.put(a,b,c)};h.clear=function(a,b,c){return this.g.clear(a,b,c)};h.remove=function(a,b,c){return this.g.remove(a,b,c)};h.toString=function(){var a="Storage:"+this.getName();Ck(this)&&(a+=" ["+vk(this)+"]");return a};function hm(a,b,c){gm.call(this,a,b,c)}E(hm,gm);hm.prototype.Sc=function(a,b){return new kl(this,this.h,a,b)};hm.prototype.map=function(a,b){return this.g.map(a,b)};function im(a,b,c,d){Kj.call(this,a,b,c,d);this.l=null}E(im,Kj);h=im.prototype;h.logger=R("ydn.db.core.req.IDBCursor");h.Nf=function(a){(a=a.target.result)?this.fc(a.key,a.primaryKey,a.value):this.fc()};
h.openCursor=function(a,b){function c(a,b,c){p.l=n;p.l.onsuccess=B(p.Nf,p);p.fc(a,p.j?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");Q(this.logger,d);var e=this.ca,d=this.n.objectStore(this.P),f=x(this.wb)?d.index(this.wb):null;if(t(a))var g=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=ij(this.reverse?new U(k,a,m,g):new U(a,l,g,e));var n;this.Qc?f?n=null!=this.Bb?f.openKeyCursor(e,this.Bb):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.Bb?d.openCursor(e,this.Bb):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.Bb?f.openCursor(e,this.Bb):null!=e?f.openCursor(e):f.openCursor():n=null!=this.Bb?d.openCursor(e,this.Bb):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();p.S(b);Nj(p);p.C=!0};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Jj.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);
else if(null!=b)if(Jj.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.l=n,p.l.onsuccess=B(p.Nf,p))};h.Bd=function(){return!!this.l};h.update=function(a){var b=this.l.result;if(b){var c=new F;a=b.update(a);a.onsuccess=function(a){c.w(a.target.result)};a.onerror=function(a){a.preventDefault();c.A(a)};return c}throw new jk("cursor gone");};
h.clear=function(){var a=this.l.result;if(a){var b=new F,a=a["delete"]();a.onsuccess=function(){b.w(1)};a.onerror=function(a){a.preventDefault();b.A(a)};return b}throw new jk("cursor gone");};h.advance=function(a){var b=this.l.result;if(1==a)b["continue"]();else b.advance(a)};h.md=function(a){var b=this.l.result;if(null!=a)b["continue"](a);else b["continue"]()};h.I=function(){im.m.I.call(this);this.l=null};h.toString=function(){return"IDB"+im.m.toString.call(this)};function jm(a,b,c,d,e,f){F.call(this,e,f);this.o=a;this.g=[];this.C=!!b;this.Sb=!!c;this.Qa=!!d;for(b=this.ia=0;b<a.length;b++)a[b].u(B(this.J,this,b,!0),B(this.J,this,b,!1));0!=a.length||this.C||this.w(this.g)}E(jm,F);jm.prototype.J=function(a,b,c){this.ia++;this.g[a]=[b,c];this.h||(this.C&&b?this.w([a,c]):this.Sb&&!b?this.A(c):this.ia==this.o.length&&this.w(this.g));this.Qa&&!b&&(c=null);return c};jm.prototype.A=function(a){jm.m.A.call(this,a);for(a=0;a<this.o.length;a++)kb(this.o[a])};
function km(a){return(new jm(a,!1,!0)).B(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function lm(a,b){this.g=b}E(lm,rk);h=lm.prototype;h.logger=R("ydn.db.crud.req.IndexedDb");h.od=function(a,b){function c(e){var f=a.g.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?V(a,d):c(e)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}}var d=[];0==b.length?V(a,[]):c(0)};
h.jb=function(a,b,c,d,e,f){function g(s){if(null==e[s])if(Q(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)V(a,k,m);else{var z=s+10;z<e.length&&g(z)}var D,z=e[s];D=null!=f?b?q.put(z,f[s]):q.add(z,f[s]):b?q.put(z):q.add(z);D.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?V(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))};D.onerror=function(b){l++;var f=D.error;Q(n.logger,X(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+wh(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?V(a,c?k[0]:k,m):(b=s+10,b<e.length&&g(b))}}var k=[],l=0,m=!1,n=this,p=b?"put":"add",q=a.g.objectStore(d);Q(this.logger,X(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)g(s);else V(a,[])};
h.Nd=function(a,b,c){function d(l){var n=c[l],p=n.H(),q=a.g.objectStore(p),s;s=null===q.keyPath?q.put(b[l],n.F()):q.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?V(a,e,g):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;N(k.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+wh(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;g=!0;c.preventDefault();f==b.length?V(a,e,g):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,g=!1,k=this;Q(this.logger,
X(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else V(a,e,g)};
h.hf=function(a,b,c,d,e,f){function g(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),J=0;J<p.length;J++){var O=b[J];q[J]&&(q[J]==sl?O=Fa(O,'"'):"INTEGER"==q[J]?O=parseInt(O,10):"NUMERIC"==q[J]&&(O=parseFloat(O)));a[p[J]]=O}var ha=l.put(a);ha.onsuccess=function(a){m.push(a.target.result);d?c(m):g()};ha.onerror=function(a){"DataError"==a.name&&(a=new gk(k+": "+s.substring(0,70)));a.preventDefault();c(ha.error,!0)}}var k=Z(this.g,d),
l=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),q=[];for(a=0;a<p.length;a++){var s=Mj(k,p[a]);s?q[a]=s.type:p[a]==k.keyPath&&(q[a]=k.type)}n++;Q(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);g()};
h.Pd=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,X(a)+" clearById: "+b+" "+c);var e=d.openCursor(mj.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){V(a,1)};c.onerror=function(){V(a,c.error,!0)}}else V(a,0)};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};
h.Qd=function(a,b){function c(k){k++;if(k>=b.length)0<g.length?V(a,g,!0):V(a,d);else{b[k].H()!=e&&(e=b[k].H(),f=a.g.objectStore(e));var l=f["delete"](b[k].F());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();g[k]=l.error;c(k)}}}var d=0,e,f;Q(this.logger,X(a)+" removeByKeys: "+b.length+" keys");var g=[];c(-1)};
h.Wc=function(a,b,c){var d=a.g.objectStore(b),e=d.count(c);Q(this.logger,X(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){V(a,e)};k.onerror=function(){V(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};h.ne=function(a,b,c){var d=a.g.objectStore(b);Q(this.logger,X(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){V(a,void 0)};e.onerror=function(b){b.preventDefault();V(a,e.error,!0)}};
h.jf=function(a,b,c,d){var e=a.g.objectStore(b).index(c);Q(this.logger,X(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],g=e.openCursor(d),k=0;g.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?V(a,f,!0):V(a,k)};g.onerror=function(b){b.preventDefault();V(a,g.error,!0)}};
h.ld=function(a,b){var c=b.length,d=0;Q(this.logger,X(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.g.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&V(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&V(a,f.error,!0)}}};
h.sd=function(a,b,c){var d=this;Q(this.logger,X(a)+b+":"+c);var e=a.g.objectStore(b),f=e.get(c);f.onsuccess=function(b){Q(d.logger,X(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&Kb&&x(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
V(a,new Blob([m.buffer],{type:b}))}else V(a,b.target.result)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}};
h.bf=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)V(a,e);else{var m=b+10;m<k&&d(m)}var n;n=g.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?V(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();V(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,g=a.g.objectStore(b),k=c.length;Q(this.logger,X(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else V(a,[])};
h.Gd=function(a,b){function c(f){var k=b[f],l=a.g.objectStore(k.H()).get(k.F());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?V(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();V(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;Q(this.logger,X(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else V(a,[])};
h.Ec=function(a,b,c,d,e){if(d&&e)throw new Rc("unique count not available in IndexedDB");e=a.g.objectStore(b);b=X(a)+" "+b+(d?":"+d:"")+(c?":"+S(c):"");Q(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){V(a,b.target.result)};f.onerror=function(b){b.preventDefault();V(a,f.error,!0)}};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=[],p=a.g.objectStore(c),q=k?l?"prevunique":"prev":l?"nextunique":"next";c=X(a)+" "+b+" "+c+(d?":"+d:"")+(e?S(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],v=e?e.lower:void 0,z=e?e.upper:void 0,D=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=ij(k?new U(v,s,D,l):new U(s,z,l,e));c+=" starting from "+S(m[0]);t(m[1])&&(c+=", "+S(m[1]))}Q(this.logger,c);var G;G=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,q):p.openCursor(e,
q):d?p.index(d).openCursor(e,q):p.openCursor(e,q);var J=!1;G.onsuccess=function(c){if(c=c.target.result){if(!J){if(0<g){J=!0;c.advance(g);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=Jj.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=Jj.cmp(c.primaryKey,m[1]);if(0==e){J=!0;c["continue"]();return}if(e==l)J=!0;else{c["continue"]();return}}else J=!0}else J=!0;else J=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=Oj(c.key),m[1]=Oj(c.primaryKey)),V(a,n)}else m&&(m[0]=void 0,m[1]=void 0),V(a,n)};G.onerror=function(b){b.preventDefault();V(a,G.error,!0)}};function mm(a,b){this.g=b}E(mm,lm);mm.prototype.logger=R("ydn.db.core.req.IndexedDb");mm.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new im(a,b,c,d)};function nm(){this.g=!1}nm.prototype.g=!1;function om(a,b,c,d){Kj.call(this,a,b,c,d);this.o=this.h=this.g=void 0;this.s=this.l=null;this.J=new nm;this.Ud=this.Tb=null}E(om,Kj);h=om.prototype;h.logger=R("ydn.db.core.req.SimpleCursor");h.Bd=function(){return!!this.n};h.update=function(a){pm(this.Ud,this.ja(),a);return sb()};h.advance=function(a){function b(b){d++;if(!b||d>=a)return qm(c,b)}var c=this,d=this.l?-1:0;this.reverse?rm(this.Tb,b,this.l):sm(this.Tb,b,this.l)};
h.md=function(a){if(null!=a){var b=this,c=new tm(a),d=function(c){b.l=c;if(!c)return qm(b,c);var d=qj(c.value.key,a);if(b.reverse){if(1!=d)return qm(b,c)}else if(-1!=d)return qm(b,c)};this.reverse?rm(this.Tb,d,c):sm(this.Tb,d,c)}else this.advance(1)};function um(a){setTimeout(function(){a.J.g?(a.J.g=!1,a.fc(a.g,a.h,a.o),um(a)):(a.s(),a.s=null)},4)}
function qm(a,b){if(a.l=b){var c=b.value;if(a.ca)if(a.reverse||null==a.ca.upper)a.reverse&&null!=a.ca.lower&&(d=qj(c.key,a.ca.lower),-1==d||0==d&&a.ca.lowerOpen)&&(a.l=null);else{var d=qj(c.key,a.ca.upper);if(1==d||0==d&&a.ca.upperOpen)a.l=null}if(a.l){if(a.unique&&null!=a.g&&null!=c.key&&0==qj(a.g,c.key))return;a.g=c.key;a.h=a.j?c.ja():a.g;4==a.da&&(a.Qc?a.o=a.h:a.o=a.Ud.ka(null,a.h))}}a.l||(a.g=void 0,a.h=void 0,a.o=void 0);return a.J.g=!0}
h.openCursor=function(a,b){var c=null;if(this.ca)if(this.reverse){var d=this.j?"\uffff":void 0;null!=this.ca.upper&&(c=new tm(this.ca.upper,d))}else null!=this.ca.lower&&(c=new tm(this.ca.lower));null!=a&&(c=this.j?new tm(a,b):new tm(a));this.s=this.n.K(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==vm(c,e))return}else if(this.ca&&(!this.reverse&&this.ca.lowerOpen&&null!=this.ca.lower&&(e=qj(f,this.ca.lower),0==e)||this.reverse&&this.ca.upperOpen&&null!=this.ca.upper&&
(e=qj(f,this.ca.upper),0==e)))return;return qm(this,b)}this.Ud=wm(b,this.P);this.Tb=xm(this.Ud,this.wb);this.reverse?rm(this.Tb,B(d,this),c):sm(this.Tb,B(d,this),c);um(this)},this)};h.clear=function(){throw new Qc;};h.toString=function(){return"Simple"+om.m.toString.call(this)};function ym(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(vj(void 0))));return a.join("^|")};function tm(a,b){this.key=a;this.g=b}tm.prototype.ja=function(){return this.g};tm.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.g?", "+this.g+")":")")};function vm(a,b){var c=qj(a.key,b.key);return 0===c?null!=a.g?null!=b.g?qj(a.g,b.g):1:null!=b.g?-1:0:c};function zm(a){this.Ra=a||Am}function Am(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}h=zm.prototype;h.Ea=null;h.Ra=null;h.zb=null;h.xb=null;
h.add=function(a){if(null==this.Ea)return this.xb=this.zb=this.Ea=new Bm(a),!0;var b=null;Cm(this,function(c){var d=null;0<this.Ra(c.value,a)?(d=c.left,null==c.left&&(b=new Bm(a,c),c.left=b,c==this.zb&&(this.zb=b))):0>this.Ra(c.value,a)&&(d=c.right,null==c.right&&(b=new Bm(a,c),c.right=b,c==this.xb&&(this.xb=b)));return d});b&&(Cm(this,function(a){a.count++;return a.parent},b.parent),Dm(this,b.parent));return!!b};
h.remove=function(a){var b=null;Cm(this,function(c){var d=null;0<this.Ra(c.value,a)?d=c.left:0>this.Ra(c.value,a)?d=c.right:(b=c.value,Em(this,c));return d});return b};h.clear=function(){this.xb=this.zb=this.Ea=null};h.contains=function(a){var b=!1;Cm(this,function(c){var d=null;0<this.Ra(c.value,a)?d=c.left:0>this.Ra(c.value,a)?d=c.right:b=!0;return d});return b};h.ha=function(){return this.Ea?this.Ea.count:0};h.ya=function(){var a=[];Fm(this,function(b){a.push(b)});return a};
function Fm(a,b){if(a.Ea){var c,d=c=Gm(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function Cm(a,b,c){for(c=c?c:a.Ea;c&&null!=c;)c=b.call(a,c)}
function Dm(a,b){Cm(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&Hm(this,a.left),Im(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&Im(this,a.right),Hm(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function Hm(a,b){Jm(b)?(b.parent.left=b.right,b.right.parent=b.parent):Km(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.Ea=b.right,a.Ea.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function Im(a,b){Jm(b)?(b.parent.left=b.left,b.left.parent=b.parent):Km(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.Ea=b.left,a.Ea.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function Em(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=Lm(a,b.left);Cm(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.xb&&(a.xb=d)}else{d=Gm(a,b.right);Cm(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.zb&&(a.zb=d)}d.count=b.count;Jm(b)?b.parent.left=d:Km(b)?b.parent.right=d:a.Ea=d;Dm(a,c?c:d)}else Cm(a,function(a){a.count--;return a.parent},b.parent),Jm(b)?(b.parent.left=null,b==a.zb&&(a.zb=b.parent),Dm(a,b.parent)):Km(b)?(b.parent.right=null,b==a.xb&&(a.xb=b.parent),Dm(a,b.parent)):a.clear()}function Gm(a,b){if(!b)return a.zb;var c=b;Cm(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function Lm(a,b){if(!b)return a.xb;var c=b;Cm(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function Bm(a,b){this.value=a;this.parent=b?b:null;this.count=1}Bm.prototype.left=null;Bm.prototype.right=null;Bm.prototype.height=1;function Km(a){return!!a.parent&&a.parent.right==a}function Jm(a){return!!a.parent&&a.parent.left==a};function Mm(a){this.Ra=a||Am}E(Mm,zm);function sm(a,b,c){if(a.Ea){var d;if(c instanceof Bm)d=c;else if(c){if(Cm(a,function(a){var b=null;0<this.Ra(a.value,c)?(b=a.left,d=a):0>this.Ra(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=Gm(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function rm(a,b,c){if(a.Ea){var d;if(c instanceof Bm)d=c;else if(c){if(Cm(a,B(function(a){var b=null;0<this.Ra(a.value,c)?b=a.left:(0>this.Ra(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=Lm(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function Nm(a,b,c){this.l=a;this.storage=b;this.h=c;this.g={};a=this.h.keyPath;this.i=u(a)?a.join(","):a||"_ROWID_";this.g[this.i]=null;this.j=ym(this.l,this.h.getName(),this.i)+"^|"}
function xm(a,b){var c=b||a.i;if(!a.g[c]){a.g[c]=new Mm(vm);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&ra(f,a.j)){var g=yj(f.substr(a.j.length));if(c==a.i)a.g[c].add(new tm(g));else{var k=a.storage.getItem(f);if(null!==k)if(f=Mj(a.h,c),k=vh(k),k=tl(f,k),f.multiEntry){if(u(k))for(f=0;f<k.length;f++)a.g[c].add(new tm(k[f],g))}else a.g[c].add(new tm(k,g))}}}}return a.g[c]}
function Om(a,b,c){for(var d in a.g){var e=a.g[d];if(e)if(d==a.i)e.remove(new tm(b));else{var f=Mj(a.h,d),f=sj(c,f.keyPath);e.remove(new tm(b,f))}}}function Pm(a){for(var b in a.g){var c=a.g[b];c&&c.clear()}a.g={}}
function pm(a,b,c,d){if(null==b&&(a.h.keyPath&&(b=Vk(a.h,c)),a.h.h&&null==b)){b=a.j+vj(void 0);var e=vh(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,S(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.j+vj(b)));if(d)return null;a.storage.setItem(a.j+vj(b),S(c));d=b;for(var f in a.g)if(e=a.g[f])if(f==a.i)e.add(new tm(d));else{var g=Mj(a.h,f),g=sj(c,g.keyPath);null!=g&&e.add(new tm(d,g))}return b}
function Qm(a,b){var c=a.j+vj(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=vh(d);Om(a,b,c);return 1}h=Nm.prototype;h.clear=function(){Pm(this);Rm(this)};h.ka=function(a,b){if(a&&a!=this.i)throw"impl";var c=this.storage.getItem(this.j+vj(b)),d=void 0;if(null!==c)for(var d=vh(c),c=0,e=this.h.indexes.length;c<e;c++){var f=this.h.index(c);if("DATE"==f.type){var g=tl(f,d);g&&ul(f,d,new Date(g))}}return d};h.getName=function(){return this.h.getName()};
function Sm(a,b,c){b=b||a.i;a=xm(a,b);var d=null,e=null,f=0,g=!1,k=!1;null!=c&&(null!=c.lower&&(d=new tm(c.lower)),null!=c.upper&&(e=new tm(c.upper)),g=c.lowerOpen,k=c.upperOpen);sm(a,function(a){if(null!=a&&(a=a.value,!g||null==d||0!=qj(a.key,d.key))){if(null!=e&&(a=qj(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Rm(a,b){var c=xm(a,a.i),d=null,e=null,f=0,g=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new tm(b.lower)),null!=b.upper&&(e=new tm(b.upper)),l=b.lowerOpen,m=b.upperOpen);sm(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=vm(b,d))){if(null!=e){var c=vm(b,e);if(1===c||0===c&&m)return!0}var c=a.j+vj(b.key),q=a.storage.getItem(c);null!==q&&(a.storage.removeItem(c),f++,10>g.length&&(g.push(b.key),k.push(vh(q))))}},d);if(10>g.length)for(c=0;c<g.length;c++)Om(a,g[c],k[c]);else Pm(a);return f}
h.td=function(a,b,c,d,e,f,g,k){function l(b){if(b&&(z++,!(z<f))){var c=b.value;if(d){if(G&&null!=v&&(b=p?vm(c,v):qj(c.key,v.key),0==b))return;if(null!=s&&(b=p?vm(c,s):qj(c.key,s.key),-1==b||0==b&&D))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(D&&null!=s&&(b=p?vm(c,s):qj(c.key,s.key),0==b))return;if(null!=v&&(b=p?vm(c,v):qj(c.key,v.key),1==b||0==b&&G))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!g||!q||null==n||0!=qj(n,b)){c=q?c.ja():b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=O.ka(null,c);m.push(l)}else m.push([b,c,O.ka(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,p=!!k&&null!=k[0];b=b||this.i;var q=b!=this.i;b=xm(this,b);var s=null,v=null;t(f)||(f=0);var z=-1,D=!1,G=!1;null!=c&&(null!=c.lower&&(s=q&&d?new tm(c.lower,"\uffff"):new tm(c.lower)),null!=c.upper&&(v=q&&!d?new tm(c.upper,"\uffff"):new tm(c.upper)),D=!!c.lowerOpen,G=!!c.upperOpen);if(p){d?G=!0:D=!0;c=k[0];var J=t(k[1])?k[1]:"\uffff";d?v=q?new tm(c,J):new tm(c):
s=q?new tm(c,J):new tm(c)}var O=this;d?rm(b,l,v):sm(b,l,s);return m};h.Ma=function(a,b,c,d,e){return this.td(2,a,b,c,d,e)};h.toString=function(){return"ydn.db.con.simple.Store:"+this.l+":"+this.h.getName()};function Tm(){this.clear()}h=Tm.prototype;h.pe=function(){return this};h.setItem=function(a,b){t(this.g[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.g[a]=b};h.getItem=function(a){return t(this.g[a])?this.g[a]:null};h.removeItem=function(a){delete this.g[a];Wa(this.keys,a.toString());this.length=this.keys.length};h.length=0;h.key=function(a){a=this.keys[a];return t(a)?this.g[a]:null};h.clear=function(){this.g={};this.keys=[];this.length=0};function Um(a){this.n=a||new Tm;this.l={}}function wm(a,b){var c=Z(a.g,b);if(c)a.l[b]||(a.l[b]=new Nm(a.i,a.j,c));else throw new Sc('store name "'+b+'" not found.');return a.l[b]}Um.prototype.hb=function(a){var b=this;setTimeout(function(){var c=ym(b.i),c=b.j.getItem(c),c=new Ol(c);a(c)},10)};function Vm(a,b){this.h=a;this.g=b}Vm.prototype.K=function(a,b){var c=this.h;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.g("complete",null);d.g=null;d.h=null}};function Wm(a,b){this.g=b}E(Wm,rk);h=Wm.prototype;h.logger=R("ydn.db.crud.req.SimpleStore");h.Nd=function(a,b,c){this.jb(a,!0,!1,null,b,c)};
h.jb=function(a,b,c,d,e,f){Q(this.logger,X(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var g=a.g.K(function(k){var l;if(c)l=wm(k,d),k=f?f[0]:void 0,k=pm(l,k,e[0],!b),null!=k?V(a,k):(l=wh(k),l=new fk(l),V(a,l,!0));else{for(var m=d,n=[],p=!1,q=f||{},s=0;s<e.length;s++){var v;d?v=q[s]:(m=f[s],v=m.F(),m=m.H());l&&l.getName()==m||(l=wm(k,m));v=pm(l,v,e[s],!b);null!=v?n.push(v):(p=!0,n.push(new fk))}V(a,n,p)}g();g=null},this)};h.hf=function(){throw new Qc("putData");};
h.sd=function(a,b,c){var d=a.g.K(function(e){e=wm(e,b).ka(null,c);V(a,e);d();d=null},this)};function Xm(a,b,c,d){var e=b.g.K(function(a){for(var g=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof pk&&(k=n,n=k.F(),k=k.H());l&&l.getName()==k||(l=wm(a,k));n=l.ka(null,n);g[m]=n}V(b,g,!1);e();e=null},a)}h.bf=function(a,b,c){Xm(this,a,b,c)};h.Gd=function(a,b){Xm(this,a,null,b)};
h.Pd=function(a,b,c){var d=X(a)+" removeById "+b+" "+c;Q(this.logger,d);var e=this,f=a.g.K(function(g){g=Qm(wm(g,b),c);P(e.logger,"success "+d+(0==g?" [not found]":""));V(a,g);f();f=null},this)};h.Qd=function(a,b){Q(this.logger,X(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.g.K(function(f){for(var g=0;g<b.length;g++){var k=b[g].H(),l=b[g].F();c&&c.getName()==k||(c=wm(f,k));d+=Qm(c,l)}V(a,d);e();e=null},this)};h.ne=function(a,b,c){this.Wc(a,b,c)};
h.Wc=function(a,b,c){var d=X(a)+" removeByKeyRange "+(c?S(c):"");Q(this.logger,d);var e=this,f=a.g.K(function(g){g=Rm(wm(g,b),c);P(e.logger,d+" deleted "+g+" records.");V(a,g);f();f=null},this)};h.jf=function(a,b,c,d){var e=X(a)+" removeByIndexKeyRange "+(d?S(d):"");Q(this.logger,e);var f=a.g.K(function(e){e=wm(e,b);for(var k=e.Ma(c,d),l=k.length,m=0;m<l;m++)Qm(e,k[m]);V(a,l);f();f=null},this)};
h.ld=function(a,b){var c=X(a)+" clearByStores";Q(this.logger,c);var d=a.g.K(function(e){for(var f=0;f<b.length;f++)wm(e,b[f]).clear();P(this.logger,"success "+c);V(a,b.length);d();d=null},this)};h.od=function(a,b){var c=a.g.K(function(d){for(var e=[],f=0;f<b.length;f++){var g=wm(d,b[f]);e.push(Sm(g))}V(a,e);c();c=null},this)};
h.Ec=function(a,b,c,d){var e=X(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");Q(this.logger,e);var f=a.g.K(function(g){g=Sm(wm(g,b),d,c);P(this.logger,"success "+e);V(a,g);f();f=null},this)};h.list=function(a,b,c,d,e,f,g,k,l,m){var n=X(a)+" "+c+" "+(e?wh(e):"");Q(this.logger,n);var p=a.g.K(function(q){q=wm(q,c).td(b,d,e,k,f,g,l,m);P(this.logger,n+" "+q.length+" records found.");V(a,q);p();p=null},this)};function Ym(a,b){this.g=b}E(Ym,Wm);Ym.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new om(a,b,c,d)};function Zm(a,b,c,d){Kj.call(this,a,b,c,d);this.J=null;this.s=this.l=void 0}E(Zm,Kj);h=Zm.prototype;h.logger=R("ydn.db.core.req.WebsqlCursor");h.ja=function(){return this.s};h.init=function(a,b,c,d,e){Zm.m.init.call(this,a,b,c,d,e);this.J=x(b)?Mj(this.i,b):null};h.U=function(){return this.Y};function $m(a,b){a.l=void 0;a.s=void 0;a.Y=void 0;if(t(b))if(A(b)){var c=vl(b[a.i.l],a.i.type);a.s=c;if(a.j){var d=Mj(a.i,a.wb);a.l=vl(b[a.wb],d.type)}else a.l=c;a.Y=a.Qc?c:an(b,a.i)}else a.Y=b}
function bn(a,b,c,d,e,f){var g=!d;d=[];a.j&&null!=f&&null!=c?c=El(a.i,a.da,d,a.J.getName(),a.ca,c,g,f,a.reverse,a.unique):null!=c?(f=a.J?a.J.getName():null,c=Dl(a.i,a.da,d,f,a.ca,a.reverse,a.unique,c,g)):(c=Al(a.i,d,a.da,a.j?a.J.j:a.i.l,a.ca,a.reverse,a.unique),a.j&&(c+=", "+a.i.j+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);Q(a.logger,a+": continue:  SQL: "+c+" : "+S(d));a.n.executeSql(c,d,function(c,d){0<d.rows.length?$m(a,d.rows.item(0)):$m(a);b.call(a,a.l,a.s,a.Y);b=null},function(c,d){N(a.logger,
"get error: "+d.message);a.S(d);Nj(a);a.C=!0;$m(a);b.call(a,a.s,a.l,a.Y);b=null;return!1})}h.Bd=function(){return!!this.n};h.update=function(a){if(!this.Bd())throw new jk;var b=new F,c=this.ja();a=Hl(this.i,a,c);var d="REPLACE INTO "+Cl(this.i)+" ("+a.Lf.join(", ")+") VALUES ("+a.hg.join(", ")+")";Q(this.logger,this+': update "'+d+'" : '+S(a.values));this.n.executeSql(d,a.values,function(){b.w(c)},function(a,c){b.A(c);return!1});return b};
h.advance=function(a){var b=this.l,c=this.s,d=!0;null==this.l||this.j&&null==this.s||(a-=1,d=!1);bn(this,function(a,d,g){var k=null!=b&&null!=a&&0==qj(b,a);if(this.j){var l=null!=d&&null!=c&&0==qj(d,c);if(k&&l)throw new Sc("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new Sc("current: "+b+" next: "+a);this.fc(a,d,g)},this.l,d,a,this.s)};h.md=function(a){null!=a?bn(this,this.fc,a,!0):this.advance(1)};h.openCursor=function(a,b){bn(this,this.fc,a,!1,0,b)};
h.clear=function(){if(!this.Bd())throw new jk;var a=new F,b=this.i.l,b="DELETE FROM "+Cl(this.i)+" WHERE "+b+" = ?",c=[this.ja()];Q(this.logger,this+': clear "'+b+'" : '+S(c));this.n.executeSql(b,c,function(b,c){a.w(c.rowsAffected)},function(b,c){a.A(c);return!1});return a};h.toString=function(){return"WebSql"+Zm.m.toString.call(this)};function cn(a,b){this.g=b}E(cn,rk);h=cn.prototype;h.logger=R("ydn.db.crud.req.WebSql");
function an(a,b){if(b.kc&&!b.keyPath&&0==b.indexes.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return vh(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),g=0;g<e;++g)f[g]=d.charCodeAt(g);return new Blob([f.buffer],{type:c})}c=a._default_?vh(a._default_):{};null!=b.keyPath&&(d=vl(a[b.keyPath],b.type),null!=d&&bl(b,c,d));for(d=0;d<b.indexes.length;d++)e=
b.index(d),f=e.j,"_default_"==f||e.n||e.multiEntry||"DATE"!=e.type&&!b.kc||(f=vl(a[f],e.type),t(f)&&ul(e,c,f));return c}h.hf=function(){throw new Qc("putData");};
h.jb=function(a,b,c,d,e,f){function g(b,d){if(null==e[b])if(Q(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)P(m.logger,q+" success "+q),V(a,n,s);else{var D=b+2;D<e.length&&g(D,d)}var G;G=t(f)?Hl(k,e[b],f[b]):Hl(k,e[b]);D=l+Cl(k)+" ("+G.Lf.join(", ")+") VALUES ("+G.hg.join(", ")+");";Q(m.logger,X(a)+" SQL: "+D+" PARAMS: "+G.values+" REQ: "+b+" of "+e.length);d.executeSql(D,G.values,function(f,q){function D(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Ia(e)+" ("+k.j+", "+
b.i+") VALUES (?, ?)",f=[rj(I,k.type),rj(c,b.type)];Q(m.logger,X(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){N(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var I=t(G.key)?G.key:q.insertId;1>q.rowsAffected&&(s=!0,I=new fk(I+" no-op"));for(var oc=0,xi=k.indexes.length;oc<xi;oc++){var Xc=k.index(oc);if(Xc.multiEntry)for(var Kd=sj(e[b],Xc.keyPath),Mu=(Kd?Kd.length:0)||0,Ll=0;Ll<Mu;Ll++)D(Xc,Kd[Ll])}c?V(a,I):(n[b]=I,p==e.length?V(a,n,s):(oc=b+2,oc<e.length&&
g(oc,f)))},function(d,f){p++;s=!0;6==f.code?f.name="ConstraintError":N(m.logger,"error: "+f.message+" "+q);if(c)V(a,f,!0);else if(n[b]=f,p==e.length)Q(m.logger,"success "+q),V(a,n,s);else{var k=b+2;k<e.length&&g(k,d)}return!1})}b=!b;var k=Z(this.g,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.g;var m=this,n=[],p=0,q=X(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)g(b,d);else P(this.logger,"success"),V(a,[])};
h.Nd=function(a,b,c){if(0==c.length)V(a,[]);else{for(var d=[],e=0,f=0,g=this,k=function(k,l){var m=[];Q(g.logger,"put "+l.length+" objects to "+k);for(var n=Gl(Z(g.g,k)),p=n?void 0:[],q=0;q<l.length;q++)m.push(b[l[q]]),n||p.push(c[l[q]].F());n=ak(a);n.u(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&V(a,d)},function(){e++;e==f&&V(a,d,!0)});g.jb(n,!1,!1,k,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var q=c[p].H(),s=c[p].F();q!=l?(f++,0<m.length&&k(l,m),m=[p],n=[s],l=q):(m.push(p),n.push(s))}0<
m.length&&k(l,m)}};h.sd=function(a,b,c){var d=a.g,e=Z(this.g,b),f=this;b=e.j;c=[rj(c,e.type)];b="SELECT * FROM "+Cl(e)+" WHERE "+b+" = ?";var g=X(a)+" SQL: "+b+" PARAMS: "+c;Q(this.logger,g);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=an(d,e),V(a,d)):(P(f.logger,"success no result: "+g),V(a,void 0))}else P(f.logger,"success no result: "+g),V(a,void 0)},function(b,c){N(f.logger,"error: "+g+" "+c.message);V(a,c,!0);return!1})};
h.bf=function(a,b,c){function d(b,e){var p=l.j,q=[rj(c[b],l.type)],s="SELECT * FROM "+Cl(l)+" WHERE "+p+" = ?";Q(f.logger,"SQL: "+s+" PARAMS: "+q);e.executeSql(s,q,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(g[b]=an(n,l))}else g[b]=void 0;k==c.length?V(a,g):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;N(f.logger,"error: "+s+" "+l.message);if(k==c.length)V(a,g);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.g,f=this,g=[],k=0,l=Z(this.g,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else P(f.logger,"success"),V(a,[])};
h.Gd=function(a,b){function c(d,k){var n=b[d],p=Z(e.g,n.H()),q=u(n.id)?n.id.join("^|"):n.id instanceof Date?+n.id:n.id,n=p.j,q=[rj(q,p.type)],s="SELECT * FROM "+Cl(p)+" WHERE "+n+" = ?";Q(e.logger,"SQL: "+s+" PARAMS: "+q);k.executeSql(s,q,function(k,m){g++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=an(n,p))}else f[d]=void 0;g==b.length?(Q(e.logger,"success "+s),V(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){V(a,c,!0);return!1})}var d=a.g,e=this,f=[],g=0;if(0<b.length)for(var k=0;10>
k&&k<b.length;k++)c(k,d);else Q(this.logger,"success"),V(a,[])};
h.ld=function(a,b){function c(d,g){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Ia(a);Q(e.logger,"SQL: "+a);g.executeSql(a,[])}var l=Z(e.g,b[d]),m="DELETE FROM  "+Cl(l);Q(e.logger,"SQL: "+m+" PARAMS: []");g.executeSql(m,[],function(g){d==b.length-1?(Q(e.logger,"success "+m),V(a,b.length)):c(d+1,g)},function(b,c){V(a,c,!0);return!1});for(var n=0,p=l.indexes.length;n<p;n++){var q=l.index(n);q.multiEntry&&k(q)}}var d=a.g,e=this;0<b.length?c(0,d):(Q(this.logger,"success"),
V(a,0))};
h.Qd=function(a,b){function c(k){if(k>=b.length)V(a,f,g);else{var l=Z(e.g,b[k].H()),m=rj(b[k].F(),l.type),n=" WHERE "+l.j+" = ?",p="DELETE FROM "+Cl(l)+n,q=X(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(k)},function(a,b){N(e.logger,"error: "+q+b.message);g=!0;c(k);return!1});k++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+n;Q(e.logger,X(a)+NaN+b);d.executeSql(b,[m])},s=0,v=l.indexes.length;s<v;s++){var z=l.index(s);z.multiEntry&&p(z)}}}
var d=a.g,e=this,f=0,g=!1;Q(this.logger,X(a)+" removeByKeys: "+b.length+" keys");c(0)};
h.Pd=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Ia(b)+l;Q(k.logger,X(a)+NaN+b);e.executeSql(b,[g])}var e=a.g,f=Z(this.g,b),g=rj(c,f.type),k=this,l=" WHERE "+f.j+" = ?";b="DELETE FROM "+Cl(f)+l;Q(this.logger,X(a)+" SQL: "+b+" PARAMS: "+[g]);e.executeSql(b,[g],function(b,c){V(a,c.rowsAffected)},function(b,c){V(a,c,!0);return!1});b=0;for(c=f.indexes.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};h.ne=function(a,b,c){dn(this,a,b,void 0,c)};
h.Wc=function(a,b,c){dn(this,a,b,void 0,c)};h.jf=function(a,b,c,d){dn(this,a,b,c,d)};
function dn(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Ia(c)+n;Q(a.logger,X(b)+NaN+c);g.executeSql(c,m)}var g=b.g,k=Z(a.g,c);c="DELETE FROM "+Cl(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=Mj(k,d),pj(d.i,d.type,e,m,l)):pj(k.j,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=X(b)+" SQL: "+c+" PARAMS: "+l;Q(a.logger,p);g.executeSql(c,l,function(c,d){Q(a.logger,"success "+p);V(b,d.rowsAffected)},function(c,d){N(a.logger,"error: "+p+d.message);V(b,d,!0);return!1});
e=0;for(d=k.indexes.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}h.od=function(a,b){function c(g){var k="SELECT COUNT(*) FROM "+Ia(b[g]);Q(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[g]=parseInt(k["COUNT(*)"],10);g++;g==b.length?V(a,f):c(g)},function(b,c){V(a,c,!0);return!1})}var d=a.g,e=this,f=[];0==b.length?(Q(this.logger,"success"),V(a,0)):c(0)};
h.Ec=function(a,b,c,d,e){var f=[];b=Al(Z(this.g,b),f,6,d,c,!1,e);Q(this.logger,X(a)+" SQL: "+b+" PARAMS: "+f);a.g.executeSql(b,f,function(b,c){var d=c.rows.item(0);V(a,Sl(d))},function(b,c){V(a,c,!0);return!1})};
h.list=function(a,b,c,d,e,f,g,k,l,m){var n=this,p=[],q=Z(this.g,c),s=q.l,v=q.type,z=v,D=null!=d&&d!==s?Mj(q,d):null,G=d||s;D&&(z=D.type);c=[];if(m&&t(m[0])){var J=m[0];D&&t(m[1])?(d=m[1],e=El(q,b,c,D.getName(),e,J,!0,d,k,l)):e=Dl(q,b,c,d,e,k,l,J,!0)}else e=Al(q,c,b,G,e,k,l);y(f)&&(e+=" LIMIT "+f);y(g)&&(e+=" OFFSET "+g);var O=a+" SQL: "+e+" ;params= "+S(c);Q(this.logger,O);a.g.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,g=0;g<e;g++)f=d.rows.item(g),2==b?p[g]=vl(f[s],v):1==b?p[g]=vl(f[G],
z):3==b?p[g]=[vl(f[G],z),vl(f[s],v)]:null!=f&&(p[g]=an(f,q));P(n.logger,"success "+a);m&&f&&(m[0]=vl(f[G],z),m[1]=vl(f[s],v));V(a,p)},function(b,c){N(n.logger,"error: "+O+c.message);V(a,c,!0);return!1})};function en(a,b){this.g=b}E(en,cn);en.prototype.logger=R("ydn.db.core.req.WebSql");en.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new Zm(a,b,c,d)};hm.prototype.G=function(){var a=vk(this);if("indexeddb"==a)return new mm(0,this.h);if("websql"==a)return new en(0,this.h);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Ym(0,this.h);throw new Sc("No executor for "+a);};function fn(a){return x(a)?a.replace(/\D/g,"").replace(/^0+/,""):null}function gn(a){if(!x(a)||!/[\w\+]+@\w+\.\w+/.test(a))return null;a=a.toLowerCase();return a=a.replace(/\+\w*?@/,"@")};function hn(a){if(!x(a))throw new Bh;this.Ya=a;this.j=Hj;this.g=[];jn(this,a);this.bd=""}h=hn.prototype;h.Ya="";h.bg=NaN;h.dg=NaN;h.of=!1;h.bd="";
function jn(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.l=c[1].toUpperCase();if("SELECT"==a.l)a.j=Gj;else if("INSERT"==a.l)a.j=Hj;else if("UPDATE"==a.l)a.j=Hj;else if("DELETE"==a.l)a.j=Hj;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.i=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.i=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new nk("missing closing parentheses"));a.G=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.h=d.substring(c),d=d.substring(0,c)):a.h="";c=d.search(/WHERE/i);0<c?(a.n=d.substring(c+6).trim(),d=d.substring(0,c)):a.n="";a.g=d.trim().split(",").map(function(a){a=Fa(a,'"');a=Fa(a,"'");return a.trim()})}}}
h.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Ya=this.Ya.replace("?",a[b]);jn(this,this.Ya)}this.o=kn(this);if(!this.o)return this.bd;a=this.h.length;if(b=/OFFSET\s+(\d+)/i.exec(this.h))this.dg=parseInt(b[1],10),a=this.h.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.h))this.bg=parseInt(b[1],10),b=this.h.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.h.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.of="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.of=!1,this.s=Fa(Fa(a,'"'),"'")):this.s=void 0;return""};function ln(a){if("*"==a.G)return null;a=a.G.split(",");return a=a.map(function(a){return Fa(a.trim(),'"')})}h.toJSON=function(){return{sql:this.Ya}};
function kn(a){function b(a){return Ta(c,function(b){return b.Ic()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.n.length)for(var e=a.n.split("AND"),f=0;f<e.length;f++){var g=e[f],k=d.exec(g);if(k){var l=k[1].trim(),l=Fa(l,'"'),l=Fa(l,"'");if(0<l.length){var m=k[3].trim(),m=ra(m,'"')?Fa(m,'"'):ra(m,"'")?Fa(m,"'"):parseFloat(m),k=new Dj(l,k[2],m),l=b(l);if(0<=l){if(c[l]=c[l].le(k),!c[l])return a.bd='where clause "'+g+'" conflict',null}else c.push(k)}else return a.bd='Invalid clause "'+g+'"',null}else return a.bd=
'Invalid clause "'+g+'"',null}return c}h.toString=function(){return"query:"+this.Ya};function mn(a,b){this.g=b;this.h=a}mn.prototype.logger=R("ydn.db.sql.req.nosql.Node");mn.prototype.toJSON=function(){return{sql:this.g}};mn.prototype.toString=function(){return"idb.Node:"};
mn.prototype.execute=function(a,b){var c=Za(this.g.g)[0],d=this.g.o,e=this.g.bg,e=isNaN(e)?100:e,f=this.g.dg,f=isNaN(f)?0:f,g=this.g.s,k=ln(this.g),l=null,m=this.g.of;if(0==d.length)l=null;else if(1==d.length)l=jj(d[0].g);else throw new Pc("too many conditions.");null===k||ck(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return sj(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=sj(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].Ic():void 0,n=X(a)+" executing on"+c;d&&(n+=":"+
d);n+=" "+oj(l);P(this.logger,n);g&&g!=this.h.keyPath?b.list(a,4,c,g,l,e,f,m,!1):t(d)&&d!=this.h.keyPath?b.list(a,4,c,d,l,e,f,m,!1):b.list(a,4,c,null,l,e,f,m,!1)};function nn(a,b){mn.call(this,a,b)}E(nn,mn);
nn.prototype.execute=function(a,b){var c,d=Za(this.g.g)[0],e=this.g.o,f=null;if(0==e.length)f=null;else if(1==e.length)f=jj(e[0].g);else throw new Pc("too many conditions.");var g=this.g.i,e=0<e.length?e[0].Ic():void 0,k=X(a)+" executing "+g+" on "+d;e&&(k+=":"+e);k+=" "+oj(f);P(this.logger,k);if("COUNT"==g)f?b.Ec(a,d,f,e,!1):b.Ec(a,d,null,void 0,!1);else{var l,k=ln(this.g);if(!k||0==k.length)throw new Hh("field name require for reduce operation: "+g);k=k[0];if("MIN"==g)l=on(k);else if("MAX"==g)l=
pn(k);else if("AVG"==g)c=0,l=qn(k);else if("SUM"==g)c=0,l=rn(k);else throw new Ch(g);var m;m=t(e)?new Vj(d,e,f):new Uj(d,f);var d=b.h(a.g,X(a),d,4),n=m.load([d]);n.S=function(b){V(a,b,!0)};var p=0;n.O=function(b){null!=b?(b=m.g?n.ja():n.U(),c=l(b,c,p),n.advance(1),p++):V(a,c)}}};function qn(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function rn(a){return function(b,c){return c+b[a]}}function on(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function pn(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function sn(a,b){this.g=b}E(sn,mm);sn.prototype.logger=R("ydn.db.sql.req.IndexedDb");sn.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new nk(c);c=Za(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new kk(c[0]);var e=ln(b);if(e)for(var f=0;f<e.length;f++)if(!Rk(d,e[f]))throw new kk('Index "'+e[f]+'" not found in '+c[0]);(b.i?new nn(d,b):new mn(d,b)).execute(a,this)}else throw new Ch(b.Ya);};function tn(a,b){this.h=b;this.i=a;this.g=ln(b)}tn.prototype.logger=R("ydn.db.sql.req.websql.Node");tn.prototype.toJSON=function(){return{sql:this.h.Ya}};tn.prototype.toString=function(){return"websql.Node:"};function un(a,b){if(a.g){if(1==a.g.length){if(A(b))return nc(b,a.g[0]);return}for(var c={},d=0;d<a.g.length;d++)c[a.g[d]]=nc(b,a.g[d]);return c}return an(b,a.i)}
tn.prototype.execute=function(a,b,c){var d=this,e=[];b.executeSql(this.h.Ya,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(A(m))var n=un(d,m);e.push(n)}a(e)},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function vn(a,b){tn.call(this,a,b)}E(vn,tn);vn.prototype.execute=function(a,b,c){var d=this;b.executeSql(this.h.Ya,c,function(b,c){var d=c.rows.length;if(1==d)d=Sl(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new ik;},function(b,c){N(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function wn(a,b){this.g=b}E(wn,en);wn.prototype.logger=R("ydn.db.sql.req.WebSql");wn.prototype.executeSql=function(a,b,c){var d=Za(b.g);if(1==d.length){var e=Z(this.g,d[0]);if(!e)throw new kk(d[0]);var f=ln(b);if(f)for(var g=0;g<f.length;g++)if(!Rk(e,f[g]))throw new kk('Index "'+f[g]+'" not found in '+d[0]);(b.i?new vn(e,b):new tn(e,b)).execute(function(b,c){V(a,b,c)},a.g,c)}else throw new Ch(b.Ya);};function xn(a,b){this.g=b}E(xn,Ym);xn.prototype.logger=R("ydn.db.sql.req.SimpleStore");xn.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new nk(c);c=Za(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new kk(c[0]);var e=ln(b);if(e)for(var f=0;f<e.length;f++)if(!Rk(d,e[f]))throw new M('Index "'+e[f]+'" not found in '+c[0]);(b.i?new nn(d,b):new mn(d,b)).execute(a,this)}else throw new Pc(b.Ya);};function yn(a,b,c,d){Fk.call(this,a,b,c,d)}E(yn,kl);yn.prototype.executeSql=function(a,b){for(var c=new hn(a),d=Za(c.g),e=0;e<d.length;e++){var f=Z(this.h,d[e]);if(!f)throw new M("store: "+f+" not exists.");}P(this.logger,"executeSql: "+a+" params: "+b);var g=this.g.request("sql",Za(c.g),c.j);W(g,function(){Y(this).executeSql(g,c,b||[])},this);return g};function zn(a,b,c){gm.call(this,a,b,c)}E(zn,hm);zn.prototype.Sc=function(a,b){return new yn(this,this.h,a,b)};zn.prototype.executeSql=function(a,b){return this.g.executeSql(a,b)};zn.prototype.G=function(){var a=vk(this);if("indexeddb"==a)return new sn(0,this.h);if("websql"==a)return new wn(0,this.h);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new xn(0,this.h);throw new Sc("No executor for "+a);};function An(a,b){t(a)&&5242880<a&&N(this.logger,"storage size request ignored, use Quota Management API instead");this.la=null;this.Yc=b||NaN}h=An.prototype;
h.connect=function(a,b){function c(a,c,d){P(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+g);for(d=0;d<b.stores.length;d++)Bn(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)Ok(b,c[d])||(a.deleteObjectStore(c[d]),P(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.h?N(e.logger,"database already set."):t(b)?(N(e.logger,b?b.message:"Error received."),e.la=null,f.A(b)):(e.la=a,e.la.onabort=function(a){Q(e.logger,e+": abort");e.cd(a.target.error)},
e.la.onerror=function(a){Q(e.logger,e+": error");e.cd(a.target.error)},e.la.onversionchange=function(a){Q(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.la&&(e.la.onabort=null,e.la.onblocked=null,e.la.onerror=null,e.la.onversionchange=null,e.Ld(a),!a.defaultPrevented)){e.la.close();e.la=null;var b=Error();b.name=a.type;e.be(b)}},f.w(parseFloat(g)))}var e=this,f=new F,g=void 0,k=b.version;P(e.logger,"Opening database: "+a+" ver: "+(b.h?"auto":k));var l;l=t(k)?Jj.open(a,k):
Jj.open(a);l.onsuccess=function(f){var k=f.target.result;t(g)||(g=k.version);P(e.logger,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.h)e.hb(function(f){if(b instanceof Kk)for(var g=0;g<f.stores.length;g++)Ok(b,f.stores[g].getName())||Lk(b,f.stores[g].ga());f=Pl(b,f,!1,!0);if(0<f.length){P(e.logger,"Schema change require for difference in "+f);var l=y(k.version)?k.version+1:1;if("IDBOpenDBRequest"in r){k.close();var m=Jj.open(a,l);m.onupgradeneeded=function(a){a=a.target.result;P(e.logger,
"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){P(e.logger,e+": fail.");d(null)}}else{var p=k.setVersion(l+"");p.g=function(a){N(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=G;c(k,p.transaction,!0)};var G=function(){var b=Jj.open(a);b.onsuccess=function(a){a=a.target.result;P(e.logger,e+": OK.");d(a)};b.onerror=function(){P(e.logger,e+": fail.");d(null)}};
null!=p.transaction&&(p.transaction.oncomplete=G)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.g=function(a){N(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?P(e.logger,"database version "+k.version+" ready to go"):N(e.logger,"connected database version "+k.version+" is higher than requested version."),e.hb(function(a){a=Pl(b,a,!1,!0);0<a.length?(P(e.logger,a),
d(null,new Fh("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;g=NaN;P(e.logger,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){e.logger.log(Se,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name,void 0);d(null,c)};l.onblocked=function(c){e.logger.log(Se,"database "+a+" "+b.version+" block, close other connections.",void 0);d(null,c)};y(this.Yc)&&!isNaN(this.Yc)&&
setTimeout(function(){"done"!=l.readyState&&(e.logger.log(Se,e+": database state is still "+l.readyState,void 0),d(null,new ok("connection timeout after "+e.Yc)))},this.Yc);return f};h.Yc=18E4;h.be=function(){};h.cd=function(){};h.Ld=function(){};h.Cc=function(){return"indexeddb"};h.ae=function(){return!!this.la};h.logger=R("ydn.db.con.IndexedDb");h.la=null;h.$d=function(){return this.la?parseFloat(this.la.version):void 0};
h.hb=function(a,b,c){c=c||this.la;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Ol(c.version));return}throw new Eh;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Ol(c.version));return}b=c.transaction(b,Gj)}for(var e=c.objectStoreNames,f=[],g=e.length,d=0;d<g;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var p=k.index(k.indexNames[m]);l[m]=new ql(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Hk(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new Ol(c.version,f);a(b)};
function Bn(a,b,c,d){function e(){var a={autoIncrement:!!d.h};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}Q(a.logger,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());xl(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),N(a.logger,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):fa(c.autoIncrement)&&fa(d.h)&&c.autoIncrement!=d.h&&(b.deleteObjectStore(d.getName()),
N(a.logger,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,g=0;g<d.indexes.length;g++){var k=d.index(g);!f.contains(k.getName())&&k.l&&(c.clear(),N(a.logger,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,g=0;g<d.indexes.length;g++){var k=d.index(g),p=!1;if(f.contains(k.getName())){var q=c.index(k.getName()),s=null!=q.unique&&null!=k.unique&&q.unique!=k.unique,v=null!=q.multiEntry&&null!=k.multiEntry&&q.multiEntry!=
k.multiEntry,q=null!=q.keyPath&&null!=k.keyPath&&!!xl(q.keyPath,k.keyPath);if(s||v||q)c.deleteIndex(k.getName()),p=!0,l--,n++}else"BLOB"!=k.type&&(p=!0);p&&(k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath),l++)}for(g=0;g<f.length;g++)Rk(d,f[g])||(c.deleteIndex(f[g]),m++);Q(a.logger,"Updated store: "+c.name+", "+l+" index created, "+m+" index deleted, "+n+" modified.")}else{c=e();for(g=0;g<d.indexes.length;g++)k=
d.index(g),"BLOB"==k.type?a.logger.info("Index "+k+" of blob data type ignored."):(Q(a.logger,"Creating index: "+k),k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath));Q(a.logger,"Created store: "+c)}}
h.qd=function(a,b,c,d){var e=this.la;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};h.Zd=function(){Q(this.logger,this+" closing connection");this.la.close()};h.toString=function(){return"IndexedDB:"+(this.la?this.la.name+":"+this.la.version:"")};
ek.push(function(a,b){if(!Jj||b&&"indexeddb"!=b)return null;var c=Jj.deleteDatabase(a),d=new Yj("IDBVersionChangeEvent ");c.onblocked=function(a){Uc(d,a)};c.onerror=function(a){d.A(a)};c.onsuccess=function(a){d.w(a)};return d});function Cn(a){Um.call(this,a);this.h=NaN}E(Cn,Um);h=Cn.prototype;h.logger=R("ydn.db.con.SimpleStorage");h.$d=function(){return this.h};
h.connect=function(a,b){function c(a,b){setTimeout(function(){b?(P(d.logger,d+" opening fail"),e.A(b)):(P(d.logger,d+" version "+d.$d()+" open"),e.w(a))},10)}var d=this,e=new F;this.j=this.n.pe(a);this.i=a;this.g=b;var f=ym(this.i);this.h=NaN;var g=vh(this.j.getItem(f));t(g.version)&&!y(g.version)&&(g.version=NaN);if(g)if(g=new Ol(g),Pl(this.g,g,!1,!1))if(!this.g.h&&!isNaN(g.version)&&this.g.version>g.version)c(NaN,new hk("existing version "+g.version+" is larger than "+this.g.version));else{var k=
this.g.version;this.h=t(k)?k:g.version+1;for(k=0;k<this.g.count();k++)var l=this.g.stores[k]||null;if(this.g instanceof Kk)for(k=0;k<g.count();k++)l=g.stores[k]||null,Lk(this.g,l);k=this.g.toJSON();k.version=this.h||NaN;this.j.setItem(f,S(k));c(g.version||NaN)}else{for(k=0;k<this.g.count();k++)l=this.g.stores[k]||null;this.h=g.version||NaN;c(this.h)}else g=b.toJSON(),this.h=1,g.version=this.h,this.j.setItem(f,S(g)),c(NaN);return e};h.ae=function(){return!!this.i};h.be=function(){};h.cd=function(){};
h.Ld=function(){};h.Cc=function(){return"memory"};h.Zd=function(){};h.qd=function(a,b,c,d){a(new Vm(this,function(a,b){d(a,b)}))};h.toString=function(){return"SimpleStorage:"+this.Cc()+":"+(this.i+":"+this.h)};function Dn(){Cn.call(this,this)}E(Dn,Cn);Dn.prototype.pe=function(){return window.localStorage};Dn.prototype.Cc=function(){return"localstorage"};ek.push(function(a,b){if(!b||"localstorage"==b){var c=new Dn,d=new Kk;c.connect(a,d);c.hb(function(a){for(var b=0;b<a.stores.length;b++)wm(c,a.stores[b].getName()).clear()})}});function En(){Cn.call(this,this)}E(En,Cn);En.prototype.pe=function(){return window.sessionStorage};En.prototype.Cc=function(){return"sessionstorage"};
ek.push(function(a,b){if(!b||"sessionstorage"==b){var c=new En,d=new Kk;c.connect(a,d);c.hb(function(a){for(var b=0;b<a.stores.length;b++)wm(c,a.stores[b].getName()).clear()})}});function Fn(a){this.g=t(a)?a:4194304}h=Fn.prototype;
h.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,g=c.h?isNaN(f)?1:f+1:c.version;cf(e.logger,a+": changing version from "+b.version+" to "+g);var k=!1,l=0;b.changeVersion(b.version,g+"",function(a){e.hb(function(b){k=!0;for(var d=0;d<c.count();d++){var f=Z(b,(c.stores[d]||null).getName()),f=f?Fl(f,c.stores[d]||null):null;Gn(e,a,c.stores[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,Ok(c,f.getName())||(c instanceof Kk?Lk(c,f):(f="DROP TABLE "+
Cl(f),P(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){e.logger.log(Se,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+g+" on "+a,void 0);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");Q(e.logger,a+":"+b.version+" ready"+f);d(b)}else N(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.Ia=null,g.A(b)):(e.Ia=a,g.w(parseFloat(f)))}var e=this,f=NaN,g=new F,
k=null;try{k=r.openDatabase(a,"",a,this.g)}catch(l){if("SECURITY_ERR"==l.name)N(this.logger,"SECURITY_ERR for opening "+a),k=null,this.pf=new mk(l);else throw l;}if(k){var f=k.version,m="database "+a+(0==k.version.length?"":" version "+k.version);null!=b.version&&b.version==k.version?(cf(e.logger,"Existing "+m+" opened as requested."),d(k)):this.hb(function(a){(a=Pl(b,a,!0,!1))?(0==k.version.length?cf(e.logger,"New "+m+" created."):b.h?cf(e.logger,"Existing "+m+" opened and schema change for "+a):
cf(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(cf(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.pf);return g};h.Cc=function(){return"websql"};h.pf=null;h.Ia=null;h.logger=R("ydn.db.con.WebSql");h.be=function(){};h.cd=function(){};
function Hn(a){var b=a.C,c="CREATE TABLE IF NOT EXISTS "+Cl(a)+" (",d=a.j,c=c+(d+" "+b+" PRIMARY KEY ");a.h&&(c+=" AUTOINCREMENT ");if(!a.kc||!a.keyPath&&0==a.indexes.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],g=0,k=a.indexes.length;g<k;g++){var l=a.index(g),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Ia(m)+" ("+d+" "+b+", "+l.i+" "+l.o+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=l.type&&x(n)&&
(n="CREATE "+m+" INDEX IF NOT EXISTS "+Ia(a.getName()+"-"+l.getName())+" ON "+Cl(a)+" ("+l.i+")",e.push(n)),n=l.i,-1==f.indexOf(n)&&(c+=", "+n+" "+l.o+m,f.push(n))}e.unshift(c+")");return e}h.$d=function(){return this.Ia?parseFloat(this.Ia.version):void 0};
h.hb=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var q="sql"in e?e.sql:void 0;Q(f.logger,"Parsing table schema from SQL: "+q);for(var s=q.substr(q.indexOf("("),q.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),v=void 0,z,q=[],D=!1,G=!1,J=0;J<s.length;J++){var O=s[J].match(/\w+|"[^"]+"/g),ha=Pa(O,function(a){return a.toUpperCase()}),I=
Fa(O[0],'"'),O=rl(ha[1]);if(-1!=ha.indexOf("PRIMARY")&&-1!=ha.indexOf("KEY")){z=O;if(x(I)&&!ta(I)&&"_ROWID_"!=I){var oc=I.split(","),v=I;1<oc.length&&(v=oc,z=void 0)}-1!=ha.indexOf("AUTOINCREMENT")&&(D=!0)}else if("_ROWID_"!=I)if("_default_"==I)G=!0;else{var xi="UNIQUE"==ha[2];ra(I,e.tbl_name+"-")&&(I=I.substr(e.tbl_name.length+1));ha=new ql(I,O,xi);q.push(ha)}}if(ra(e.name,"ydn.db.me:")){var Xc=e.name.split(":");if(3<=Xc.length){var Kd=Xc[1],v=new ql(Xc[2],O,xi,!0),s=Ta(q,function(a){return a.getName()==
Xc[2]});0<=s?q[s]=v:q.push(v);s=Ta(k,function(a){return a.getName()===Kd});0<=s?(J=k[s],k[s]=new Hk(J.getName(),J.keyPath,D,z,q,void 0,!G)):k.push(new Hk(Kd,void 0,!1,void 0,[v]));Q(f.logger,'multi entry index "'+v.getName()+'" found in '+Kd+(-1==s?"*":""))}else N(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else J=Ta(k,function(a){return a.getName()===e.name}),0<=J?(s=k[J].index(0),q.push(s),k[J]=new Hk(e.name,v,D,z,q,void 0,!G)):(q=new Hk(e.name,v,D,z,q,void 0,!G),k.push(q))}}d=new Ol(g,
k);a(d)}}var f=this,g=(c=c||this.Ia)&&c.version?parseFloat(c.version):void 0,g=isNaN(g)?void 0:g,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.hb(a,b,c)},function(a){f.logger.log(Se,"opening tx: "+a.message,void 0);throw a;},e)};
function Gn(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){g++;g==k.length&&(d(!0),d=null)},function(b,e){g++;g==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new lk(e,f);})}var g=0,k=Hn(c),l="Create";if(e){e=Jk(c,e);if(0==e.length){Q(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";N(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Ia(c.getName()))}Q(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}h.ae=function(){return!!this.Ia};h.Zd=function(){this.Ia=null};
h.qd=function(a,b,c,d){function e(a){Q(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function g(b){a(b)}var k=this;null===this.Ia&&(a(null),d("abort",this.pf));c==Gj?this.Ia.readTransaction(g,e,f):c==Ij?this.Ia.changeVersion(this.Ia.version,this.Ia.version+1+"",g,e,f):this.Ia.transaction(g,e,f)};
ek.push(function(a,b){if(ga(r.openDatabase)&&(!b||"websql"==b)){var c=new Fn,d=new Kk;P(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){c.logger.info("all tables in "+a+" deleted.")};d.B(function(){c.qd(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,Q(c.logger,"deleting table: "+p.name),
b.executeSql("DROP TABLE "+p.name))}P(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],Hj,e)});d.Dc(function(){N(c.logger,"Connecting "+a+" failed.")})}});Fn.prototype.Ld=function(){};Fn.prototype.toString=function(){return"WebSql:"+(this.Ia?":"+this.Ia.version:"")};em.prototype.qe=function(a){return"indexeddb"==a&&Jj?new An(this.C,this.O):"websql"==a&&ga(r.openDatabase)?new Fn(this.C):"localstorage"==a&&window.localStorage?new Dn:"sessionstorage"==a&&window.sessionStorage?new En:"memory"==a?new Cn:null};function In(a,b){vb.call(this);this.j=b;this.g=[];if(a>this.j)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.g.push(this.h())}E(In,vb);In.prototype.Od=function(a){this.g.length<this.j?this.g.push(a):this.i(a)};In.prototype.h=function(){return{}};In.prototype.i=function(a){if(A(a))if(ga(a.ra))a.ra();else for(var b in a)delete a[b]};In.prototype.I=function(){In.m.I.call(this);for(var a=this.g;a.length;)this.i(a.pop());delete this.g};function Jn(){this.g=[];this.i=new od;this.j=new od;this.n=1;this.l=new In(0,4E3);this.l.h=function(){return new Kn};this.o=new In(0,50);this.o.h=function(){return new Ln};var a=this;this.h=new In(0,2E3);this.h.h=function(){return String(a.n++)};this.h.i=function(){}}R("goog.debug.Trace");function Ln(){this.time=this.count=0}Ln.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function Kn(){}
function Mn(a,b,c){var d=[];-1==b?d.push("    "):d.push(Nn(a.h-b));d.push(" ",On(a.h-0));0==a.g?d.push(" Start        "):1==a.g?(d.push(" Done "),d.push(Nn(a.l-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.j&&d.push("[VarAlloc ",a.j,"] ");return d.join("")}Kn.prototype.toString=function(){return null==this.type?this.i:"["+this.type+"] "+this.i};
Jn.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.g.length;d++){var e=this.g[d];1==e.g&&c.pop();a.push(" ",Mn(e,b,c.join("")));b=e.h;a.push("\n");0==e.g&&c.push("|  ")}if(0!=this.i.ha()){var f=C();a.push(" Unstopped timers:\n");md(this.i,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",On(b.startTime),")\n")})}b=this.j.Ma();for(d=0;d<b.length;d++)c=this.j.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function Nn(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function On(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new Jn;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Pn(a){a.o||(a.o=new L);return a.o}em.prototype.removeEventListener=function(a,b,c,d){Jc(Pn(this),a,b,c,d)};em.prototype.Sa=function(a){Pn(this).dispatchEvent(a)};function Qn(a,b,c){gm.call(this,a,b,c)}E(Qn,zn);R("ydn.gdata.base");function Rn(a){this.i=a||null;this.g=this.h=null;a&&Sn(this,a)}Rn.prototype.logger=R("ydn.crm.UserSetting");
var Tn={stores:[{name:"general"},{name:"sugar"}]},Un={stores:[{name:"contact",keyPath:"id.$t",type:"TEXT",indexes:[{name:"updated.$t",type:"TEXT"},{name:"ydn$emails",multiEntry:!0,generator:function(a){var b=[];a=u(a.gd$email)?a.gd$email:A(a.gd$email)?[a.gd$email]:[];for(var c=0;c<a.length;c++){var d=gn(a[c].address);d&&b.push(d)}return b}},{name:"ydn$externalIds",multiEntry:!0,generator:function(a){return(u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:
[]).map(function(a){return a.value})}}]}]};function Sn(a,b){if(!a.i||a.i!=b){r.sessionStorage.setItem("last-user-id",b);var c=b+"-setting",d=b+"-gdata";a.h&&a.h.getName()!=c&&(Zl(a.h),a.h=null);a.g&&a.g.getName()!=d&&(Zl(a.g),a.g=null);a.h||(a.h=new Qn(c,Tn));a.g||(a.g=new Qn(d,Un))}}function Vn(a){return a.i?a.i+"-sd":r.sessionStorage.getItem("last-user-id")+"-sd"}function Wn(a){var b=Vn(a),c=new F;chrome.storage.local.get(b,function(a){c.w(a[b])});return c}
function Xn(a,b){var c=Vn(a),d=new F,e={};e[c]=b;chrome.storage.local.set(e,function(){d.w(!0)})};var Yn="chrome-extension://fmhdpfhfppingdiiefgnanjceieflpkj/"==chrome.extension.getURL("")?"crm-ex/":"",Zn=Yn+"option-page.html",$n=Yn+"host-permission.html";function ao(){var a=new F;chrome.storage.sync.get("user-setting",function(b){a.w(b["user-setting"])});return a};function bo(){}bo.prototype.logger=R("ydn.crm.Client");function co(a,b,c){this.client=a;this.g=b;this.h=c}co.prototype.request=function(a){a=this.g.call(this.h,a);return this.client.request(a)};function eo(a,b,c){this.h=a;this.i=b;this.g=c}eo.prototype.request=function(a){return this.h(a)?this.i.request(a):this.g.request(a)};function fo(a,b){this.client=a;this.h=b;this.Tc=NaN;this.i=[];this.g=!1}fo.prototype.request=function(a){return new go(a,this)};function go(a,b){a.path=b.h+a.path;this.req=b.client.request(a);this.parent=b;this.i=null;this.h=void 0}E(go,bj);
go.prototype.execute=function(a,b){if(this.parent.g)this.i=a,this.h=b,this.parent.i.push(this);else{this.parent.g=!0;var c=function(c,d){var g=Yi(d,"retry-after");g?(this.parent.Tc=/[^0-9|\.]/.test(g)?(new Date(g)).getTime():1E3*parseFloat(g)+C(),r.console.info("Next retry "+this.parent.Tc+", now "+C())):this.parent.Tc=NaN;a&&a.call(b,c,d);this.parent.g=!1;if(g=this.parent.i.pop())g.execute(g.i,g.h),g.i=null,g.h=null},d=this.parent.Tc-C();0<d?(r.console.info("Proxy will call after "+d+" ms"),nf(function(){this.parent.Tc=
NaN;this.req.execute(c,this)},d,this)):this.req.execute(c,this)}};function ho(a,b,c,d,e){this.l=t(a)?a:Ui();this.g=b;this.h=c;this.i=d||0;this.j=!!e}ho.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new bj(a,this.l,this.i,this.j)};function jo(a,b,c){this.i=t(a)?a:Ui();this.g=b;this.h=c}jo.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.path=this.h+a.path);return new bj(a,this.i)};function ko(a){for(var b=Wl(a),c=0;c<b.stores.length;c++);this.g=a;this.g.kb(this.s,this);this.h=1E4;this.j=Ye.value;this.i=0;this.o=B(this.G,this);this.n=!1;this.l={}}function lo(a){if(a.h&&a.i>=a.h){var b=a.h/100;100<b&&(b=100);a.g.keys("db-logger",null,b).B(function(a){a=a.map(function(a){return new pk("db-logger",a)});this.g.remove("db-logger",a).B(function(){this.g.count("db-logger").B(function(a){this.i=a},this)},this)},a)}}function mo(){var a=no;a.h=1E4;lo(a)}
ko.prototype.s=function(){this.h&&this.g.count("db-logger").B(function(a){this.i=a;lo(this)},this)};function oo(a){var b=no;if(a!=b.n){var c=gf();a?af(c,b.o):(c=c.g)&&Wa(c,b.o);b.n=a}}ko.prototype.G=function(a){if(!this.l[a.h]){var b=a.j;!b||b.value<=this.j||(a={exception:a.g,level:b.value,logger:a.h,name:b.name,time:a.l,message:a.getMessage(),seq:a.n},this.g.put("db-logger",a),this.i++,lo(this))}};
function po(a,b){var c=no,d=a||100,e=b||0,f=kj(["INFO"]);return c.g.values("db-logger","name, time",f,d,e,!0)}var no=null;var qo,ro,so,to,uo=R("ydn.crm");function vo(){qo||(qo=new $f(0));return qo}var wo=null;function xo(a,b){b&&"local"!=b||(t(a["logging-captureConsole"])&&ii(!!a["logging-captureConsole"]),t(a["logging-bugReport"])&&oo(!!a["logging-bugReport"]))}
function yo(){r.console.log("ydn.crm version 0.7.1 (dev)");r.console.log("API documentation: http://dev.yathit.com/\nSuggestion: http://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");Ki("ydn.crm","finer");Ki("ydn.ds","finer");wo=new Qn("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,indexes:[{name:"level"},{name:"time"},{name:"name"},{name:"name, time",keyPath:["name","time"]}]}]});no=new ko(wo);mo();no.j=300;no.l["ydn.db.tr.DbOperator"]=
!0;oo(!0);uo.info("Starting ydn.crm.App:0.7.1");chrome.storage.local.get(["logging-captureConsole","logging-bugReport"],xo);chrome.storage.onChanged.addListener(xo);var a=C();aj=Li=new zo(wo,function(b){if(!b||b.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==b.HttpRequestData.path)return null;b.uptime=a;return b})}function Ao(){ro||(ro=new jo(vo()),Ti(ro,"default"));return ro}
function Bo(a){var b=Ao();a=new dj(a,qo,!1);Ti(a,"gc");var c=new co(a,function(a){a.path="https://yathit-app.appspot.com/proxy/"+a.path;return a});Ti(new fo(b,"https://yathit-app.appspot.com/proxy/"),"proxy");Ti(new eo(function(a){return"GET"==a.method},a,c),"gse")}function Co(){to||(to=new ho(vo(),void 0,"https://yathit-app.appspot.com/a/cm",1,!0),Ti(to,"auth"));return to};function Do(a,b){this.j=b||C();this.type=a;this.i=this.g=this.h=void 0}function Eo(a,b){A(b)?a.h=Rl(b):a.h=b}Do.prototype.toJSON=function(){return{type:this.type,timestamp:this.j,newValue:this.g,oldValue:this.h,meta:this.i}};function Fo(a){this.g=a}Fo.prototype.add=function(a){this.g.add("history",a.toJSON())};function Go(a,b){if(a.link){if(u(a.link)){for(var c=0;c<a.link.length;c++)if(a.link[c].rel==b)return a.link[c];return null}return a.link.rel==b?a.link:null}return null};function Ho(a,b){this.entry=a;this.data=b;this.g=!1}Ho.prototype.data=null;Ho.prototype.preventDefault=function(){this.g=!0};function Io(a,b,c,d){K.call(this,a,b);this.status=c;this.entry=d}E(Io,K);Io.prototype.status=NaN;Io.prototype.N=function(){return this.status};Io.prototype.tb=function(){return this.entry.tb()};function Jo(a,b,c){Io.call(this,"conflict",a,b,c.entry)}E(Jo,Io);function Ko(a,b){this.g=a;if(b)throw new Pc("optional key paths");}var Lo={Ih:"key",Fh:"date",Jh:"modified",Hh:"expires",Gh:"etag",Kh:"updated",Lh:"uri",NEXT:"next"};Ko.prototype.U=function(a,b){return b&&this.g[a]?sj(b,this.g[a]):void 0};function Mo(a,b,c,d){a.g[b]&&tj(c,a.g[b],d)};function No(a,b,c,d){this.key=a;this.h=(this.h=d?b[d]:b)||{};this.g=c}function Oo(a){return null!=a.key?a.key:a.g.U("key",a.h)}No.prototype.getDate=function(){return this.g.U("date",this.h)};function Po(a){return a.g.U("updated",a.h)}function Qo(a){return a.g.U("etag",a.h)}function Ro(a){var b={},c=Qo(a);c&&1<c.length?b["if-none-match"]=c:(a=Po(a))&&(b["if-modified-since"]=a);return b}
No.prototype.toJSON=function(){var a={};Mo(this.g,"key",a,Oo(this));var b=this.getDate();b&&Mo(this.g,"date",a,b);(b=this.g.U("expires",this.h))&&Mo(this.g,"expires",a,b);(b=Po(this))&&Mo(this.g,"updated",a,b);(b=Qo(this))&&Mo(this.g,"etag",a,b);return a};function So(a,b,c){b.expires&&Mo(c,"expires",b,(new Date(b.expires)).getTime());b["last-updated"]&&Mo(c,"updated",b,(new Date(b["last-updated"])).getTime());b.etag&&Mo(c,"etag",b,(new Date(b.etag)).getTime());Mo(c,"date",b,NaN);No.call(this,a,b,c)}E(So,No);function To(a,b,c){this.g=a;this.n=c||null;this.i=this.h=null;this.key=b}h=To.prototype;h.logger=R("ydn.db.sync.entry.Rest");h.tb=function(){if(this.i&&this.g.s&&this.j){var a=this.g.G;this.g.S||delete this.i[a]}return this.i||null};h.U=function(){return this.n};h.F=function(){return this.key};h.ce=function(){return this.g.Xe(this.F())};function Uo(a,b){var c=a.F();return new So(c,b.Jc(),a.g.o)}
h.ze=function(a,b){if(a)return a;if(b.Da())return Zi(b)&&x(b.body)?JSON.parse(b.body):b.body;try{return Zi(b)&&x(b.body)?JSON.parse(b.body):b.body}catch(c){var d=Xi(b);return A(d)?d:{body:d}}};h.save=function(a){var b=this.F();if(a&&!this.g.s)return C(),Vo(this.g,[this.j.toJSON()]);var c=this.i;if(a&&!c)return sb();a=void 0;null!=this.j&&(C(),a=[this.j.toJSON()]);return Wo(this.g,[c],a,[b])};
h.hc=function(a,b){if(this.g.J&&A(this.h))a.call(b,304),a=null;else{var c=this;Xo(this,function(d){if(d){var e=d.g.U("expires",d.h);if(e&&e>C()){Q(this.logger,this+" not expired");a.call(b,304);a=null;return}}e=c.ce();d=c.ec(e,"GET",d);this.g.ua().request(d).execute(function(d,e){c.j=Uo(c,e);c.i=c.ze(d,e);a.call(b,e.N());a=null})},this)}};
h.ec=function(a,b,c,d){a=new Zh(a,b);if(c){var e;"POST"==a.method||"PUT"==a.method||"DELETE"==a.method?(e={},(b=Po(c))&&(e["if-unmodified-since"]=b),(c=Qo(c))&&1<c.length&&(e["if-match"]=c),c=e):c=Ro(c);e=c;a.headers?tc(a.headers,e):a.headers=e}a.body=A(d)?JSON.stringify(d):d;Q(this.logger,this+" "+a.method+" "+a.path+" "+wh(e));return a};
function Yo(a,b,c){Xo(a,function(a){var e=this.U();a=this.ec(this.ce(),"PUT",a,e);this.g.ua().request(a).execute(function(a,d){this.j=Uo(this,d);this.i=a;b&&(b.call(c,d.N()),b=null)},this)},a)}function Xo(a,b,c){a.l?b.call(c,a.l):Zo(a.g,a.F(),function(d){a.l=d;b.call(c,d)})}
h.load=function(a,b){if(this.h&&this.l)a&&(a.call(b,this.h,this.l),a=void 0);else{var c=this.F();this.g.load(c,function(c,e){this.h=c;var f=this.g.G;this.h&&f&&this.h[f]&&(this.l=new No(this.key,this.h,this.g.o,f),this.g.S||delete this.h[f]);this.h=c;this.l=e;a&&(a.call(b,c),a=void 0)},this)}};function $o(a,b){var c=a.ce(),d=a.g.ua();Xo(a,function(a){a=this.ec(c,"DELETE",a);d.request(a).execute(function(a,d){Q(this.logger,"deleted "+c+" "+d.N());b.call(this,d.N())},this)},a)}
h.toString=function(){return"sync.entry{"+this.g.H()+":"+this.key+"}"};function ap(a,b,c){this.storage=a;this.i=b;this.P=b.getName();a="format readRequestTimeout writeRequestTimeout transport Options fetchStrategies baseUri immutable keepMeta metaStoreName metaDataName prefetch prefetchRefractoryPeriod".split(" ");for(var d in c)if(-1==Ma(a,d))throw new M('Unknown Sync attribute "'+d+'"  in Sync.');this.J=!!c.immutable;this.h=c.baseUri;this.yb=c.metaStoreName||this.P;this.G=c.metaDataName;this.s=this.yb==this.P;a=c.Options||{};if(!this.yb)throw new M("metadata store name required.");
b=this.rb();for(d in a)if(-1==Ma(b,d))throw new M('Unknown Sync.Options attribute "'+d+'" in Sync.Options');this.ia=a.delimiter||"";this.l=a.prefix||"";this.S=!!c.keepMeta;this.O=c.prefetch||y(c.prefetchRefractoryPeriod)?"full":null;this.da=y(c.prefetchRefractoryPeriod)?c.prefetchRefractoryPeriod:5E3;this.g=bp(c.transport);this.o=new Ko(this.qb(),c.metaData);this.n=null;this.C=NaN}h=ap.prototype;h.qb=function(){var a={},b;for(b in Lo)a[b]=b;return a};h.rb=function(){return[]};h.H=function(){return this.P};
h.logger=R("ydn.db.sync.Rest");h.Cb=function(){return this.h};h.ua=function(){this.g||(this.g=new jo);return this.g};h.toString=function(){return"sync:"+this.P};function Vo(a,b){return dl(a.storage.g,a.yb,b).Dc(function(a){throw a;})}function cp(a,b,c){a.i.keyPath&&null==Vk(a.i,b)&&null!=c&&tj(b,a.i.keyPath,c)}
function Wo(a,b,c,d){d=a.i.keyPath?void 0:d;if(c){if(a.s){for(g=0;g<b.length;g++)null!=c[g]&&tc(b[g],c[g]);return dl(a.storage.g,a.P,b,d)}if(b){for(var e=[],f=b.concat(c),g=0;g<b.length;g++){var k=a.i.keyPath?NaN:d[g];e.push(new pk(a.P,k))}for(g=0;g<c.length;g++)e.push(new pk(a.yb,NaN));return dl(a.storage.g,e,f)}return dl(a.storage.g,a.yb,c)}for(g=0;g<b.length;g++)k=d?d[g]:void 0,cp(a,b[g],k);return dl(a.storage.g,a.P,b,d)}
function dp(a,b){var c=[new pk(a.P,b)];a.s||c.push(new pk(a.yb,b));return el(a.storage.g,c)}h.Xe=function(a){return this.Cb()+a};h.add=function(a,b,c){null!=c?cp(this,b,c):this.i.keyPath&&(c=Vk(this.i,b));var d=this.xa(c,b),e=this;Yo(d,function(a){201==a||200==a?(Q(e.logger,d+" created"),d.save(!0)):N(e.logger,"Unexpected respond "+a+" for add "+d)})};
function Zo(a,b,c){var d=new pk(a.yb,b);hl(a.storage.g,[d]).u(function(a){c.call(void 0,new No(b,a[0],this.o,this.G))},function(a){N(this.logger,this+" error loading meta data "+a);c.call(void 0,null)},a)}h.Hd=function(a,b){var c=a.map(function(a){return new pk(this.yb,a)});hl(this.storage.g,c).u(function(c){for(var e=[],f=0;f<a.length;f++)e[f]=new No(a[f],c[f],this.o,this.G);b(e)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)};
h.load=function(a,b,c){var d=this.yb,e=[new pk(this.H(),a)];this.s||e.push(new pk(d,a));hl(this.storage.g,e).u(function(d){var e=d[0];b.call(c,e,new No(a,this.s?e:d[1],this.o,this.G))},function(a){N(this.logger,this+" error loading meta data "+a);b.call(c,null,null)},this)};
h.get=function(a,b){this.C||this.Xb();ck(a,function(c,d,e){if(d)e(c,d);else{Uc(a,c);var f=t(c);if(f&&this.J)e(c);else{var g=this.xa(b,c);g.hc(function(a){if(304==a){if(e(c),!f)throw new Sc(g+" not modified, but not exist in server");}else if(200==a)g.save().fa(function(){e(g.tb())});else if(404==a)dp(g.g,g.F()).fa(function(){e(g.tb())});else throw e(g.tb()),new Rc("Invalid HTTP respond "+a+" for GET "+b);},this)}}},this)};
function ep(a,b,c,d,e,f){var g=[],k=a.logger;P(a.logger,d.length+", "+e.length+", "+f.length+", "+g.length+" records to fetch, update, delete, save");var l=d.length+e.length+f.length+g.length;if(0==l)b(c);else{for(var m=!1,n=function(){l--;0==l&&(b(c,m),b=null)},g=0;g<d.length;g++){var p=a.xa(d[g]);p.index=g;p.hc(function(a){200==a?(Q(k,"A new "+this+" received from server"),this.save().u(function(){c[this.index]=this.tb();n()},function(){m=!0;n()},this)):304==a?this.save(!0).u(function(){Q(k,this+
" expires date updated");n()},function(){m=!0;n()},this):(N(k,"Invalid status "+a+" for fetching "+this),n())},p)}for(g=0;g<e.length;g++)p=a.xa(e[g]),p.index=g,p.load(function(){this.hc(function(a){200==a?(Q(k,this+" updated from server"),this.save().u(function(){c[this.index]=this.tb();n()},function(){m=!0;n()},this)):(N(k,"Invalid status "+a+" for fetching "+this),n())})});for(g=0;g<f.length;g++)p=a.xa(f[g]),p.index=g,dp(p.g,p.F()).u(function(){c[this.index]=new Ho(p,null);n()},function(){m=!0;
n()},p)}}function fp(a,b,c){ck(b,function(a,e,f){if(e)f(a,e);else if(Ra(a,function(a){return t(a)})&&this.J)f(a);else{Uc(b,a);var g=a.length;for(e=0;e<c.length;e++)if(this.J&&t(a[e]))g--,0==g&&f(a);else{var k=this.xa(c[e],a[e]);k.index=e;k.hc(function(b){200==b?(a[this.index]=this.tb(),this.save()):404==b&&(a[this.index]=void 0);g--;0==g&&f(a)},k)}}},a)}h.xa=function(a,b){return new To(this,a,b)};h.count=function(a){return a};h.cf=function(){throw new Pc;};
h.values=function(a,b,c){gp(this)?(Q(this.logger,"prefetch queued"),ck(a,function(d,e,f){Uc(a,d);e?f(d,e):hp(this,function(a){a?gl(this.storage.g,this.P,null,null,!1,b,c).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(){N(this.logger,this+" prefetch fail");f(d)},this)},this)):this.cf(a,b,c)};
h.keys=function(a,b,c,d,e,f,g){ck(a,function(k,l,m){Uc(a,k);l?m(k,l):hp(this,function(a){a?il(this.storage.g,this.P,b,c,d,e,f,g).u(function(a){m(a)},function(a){m(a,!0)},this):m(k)},function(){N(this.logger,this+" prefetch fail");m(k)},this)},this)};h.xe=function(){};
h.put=function(a,b,c){c=t(c)?c:this.i.keyPath?Vk(this.i,b):null;var d=this.xa(c,b);W(a,function(){d.load()},this);ck(a,function(c,f,g){Uc(a,c);Yo(d,function(c){409==c?d.hc(function(){var c=new Ho(d,b);Uc(a,c);c.g?g(null,f):g(void 0,f)}):200==c||201==c?(d.save(!0),g(b,f)):(N(this.logger,"Unexpected response for PUT: "+c),g(null,f))},this)},this)};
h.remove=function(a,b){var c=this,d=this.xa(b);d.load(function(){ck(a,function(e,f,g){$o(d,function(f){if(409==f){f=new Ho(d,null);Uc(a,f);var l=new Jo(c.storage,409,f);c.storage.Sa(l)}else 200==f?Q(c.logger,"Successfully deleted object "+b):(N(c.logger,"Unexpected response for DELETE: "+f+" "+b),Uc(a,l));g(e)})})})};
h.Xb=function(){Q(this.logger,this+" starting prefetch");var a=new F;gl(this.storage.g,this.P,"updated.$t",null,!0,1).u(function(b){var c={};if(b=b[0])b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b;var d=this,c=new Zh(this.Cb(),"GET",c);d.ua().request(c).execute(function(b,c){if(200==c.N()){if(!b){var g=Xi(c);x(g)&&(b=JSON.parse(g))}g=(g=(b.feed||b).entry)?u(g)?g:[g]:[];0<g.length?Wo(d,g).fa(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+
c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},function(b){a.A(b)},this);return a};function gp(a){return a.O?a.C?C()-a.C>a.da:!0:!1}function hp(a,b,c,d){gp(a)?a.n?a.n.u(b,c,d):(a.n=a.Xb(),a.C=C(),a.n.u(b,c,d),a.n.u(function(a){Q(this.logger,"prefetch "+(a?"updated":"no update"));this.n=null},function(a){this.n=null;throw a;},a)):b.call(d,!1)};function ip(a,b,c){ap.call(this,a,b,c)}E(ip,ap);ip.prototype.logger=R("ydn.db.sync.Atom");ip.prototype.rb=function(){return ip.m.rb.call(this)};ip.prototype.F=function(a){return a.key};function jp(a){this.data=a}h=jp.prototype;h.F=function(){return this.data.id.$t};h.ad=function(){return this.data.title?this.data.title.$t:void 0};h.Yd=function(a){return Go(this.data,a)};h.xh=function(){var a=this.Yd("self");return a?a.href:void 0};h.wh=function(){var a=this.Yd("http://schemas.google.com/g/2005#batch");return a?a.href:""};h.sa=function(){return this.data.content||null};function kp(a,b,c){To.call(this,a,b,c)}E(kp,To);kp.prototype.logger=R("ydn.db.sync.entry.S3");kp.prototype.getName=function(){return this.g.l+this.key};kp.prototype.ec=function(a,b,c,d){b=kp.m.ec.call(this,a,b,c,d);if("PUT"==b.method||"POST"==b.method){c=Hd(new ud(a)).substr(1);if(1>c.length)throw new Rc("invalid url "+a);b.headers.Key=c;a=b.headers["Content-Type"]||"application/json";d instanceof File?a=d.type:x(d)&&(a=/<*DOCTYPE html/i.test(d)?"text/html":"text/plain");b.headers.ContentType=a}return b};function lp(a){this.data=a}E(lp,jp);var mp={atom:"http://www.w3.org/2005/Atom",ydn:"http://www.yathit.com/2012/ydn",app:"http://www.w3.org/2007/app",openSearch:"http://a9.com/-/spec/opensearch/1.1/",gAcl:"http://schemas.google.com/acl/2007",sites:"http://schemas.google.com/sites/2008",gs:"http://schemas.google.com/spreadsheets/2006",dc:"http://purl.org/dc/terms",batch:"http://schemas.google.com/gdata/batch",gd:"http://schemas.google.com/g/2005",gContact:"http://schemas.google.com/contact/2008",thr:"http://purl.org/syndication/thread/1.0",
xhtml:"http://www.w3.org/1999/xhtml"};function np(a,b){for(var c=a.indexOf(" "),d=0;d<b.length;d++){var e=b[d],e=(0==d?"xmlns":"xmlns:"+e)+'="'+mp[e]+'"';-1==a.indexOf(e)&&(a=a.substring(0,c+1)+e+" "+a.substr(c+1))}return a}R("ydn.xml");function op(a){return mp[a]||mp.xhtml};function pp(a,b,c){c=!!c;if(a.getName()!=b.getName())return!1;var d=qp(a),e=qp(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;for(d=0;d<e.length;d++)if(a.getAttribute(e[d])!=b.getAttribute(e[d]))return!1;d=rp(a);e=rp(b);if(!c&&d.length!=e.length||c&&e.length>d.length)return!1;if(0==d.length||0==d.length)return a.data.$t===b.data.$t;for(d=0;d<e.length;d++){var f=sp(a,e[d]),g=sp(b,e[d]);if(!c&&f.length!=g.length||c&&g.length>f.length)return!1;for(var k=0;k<g.length;k++)if(-1==Ta(f,function(a){return pp(a,
g[k],c)}))return!1}return!0};function tp(a,b,c){if(t(b))up(this,b),t(c)||(c=a[b]);else for(var d in a)if(a.hasOwnProperty(d)&&A(a[d])&&x(a[d].xmlns)){this.dd=[d].xmlns;up(this,d);c=a[d];break}this.data=c;this.parent=a}h=tp.prototype;h.dd="http://www.w3.org/2005/Atom";function up(a,b){var c=b.split(":");1<c.length&&(a.dd=op(c[0])||tp.prototype.dd,b=c[1]);a.tagName=b}
h.p=function(a,b){var c;c=a;var d=b,e=c;if(t(d))"atom"!=d&&(e=d+"$"+c);else{var f=c.split(":"),e=c.replace(/:/,"$");2==f.length&&(d=f[0],c=f[1])}d=t(d)?op(d):void 0;c=t(this.data[c])&&t(d)&&this.data[c].xmlns==d?c:e;return u(this.data[c])?new tp(this.data,c,this.data[c][0]):A(this.data[c])?new tp(this.data,c,this.data[c]):null};h.toString=function(){return"JsonElement:"+this.tagName};h.getName=function(){return this.tagName};
function vp(a,b){for(var c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&delete a.data[c];a.data.$t=b}h.getAttribute=function(a){a=a.replace(/:/,"$");return this.data[a]};h.setAttribute=function(a,b){a=a.replace(/:/,"$");this.data[a]=b};h.removeAttribute=function(a){a=a.replace(/:/,"$");delete this.data[a]};function qp(a){var b=[],c;for(c in a.data)a.data.hasOwnProperty(c)&&x(a.data[c])&&"$t"!=c&&b.push(c);return b}
function sp(a,b){t(void 0)?b="undefined$"+b:t(b)&&(b=b.replace(/:/,"$"));var c=[];if(t(b)){var d=a.data[b];if(u(d))for(var e=0;e<d.length;e++)c.push(new tp(a.data,b,d[e]));else A(d)&&c.push(new tp(a.data,b,d))}else for(d in a.data)if(u(a.data[d]))for(e=0;e<a.data[d].length;e++)c.push(new tp(a.data,d,a.data[d][e]));else A(a.data[d])&&c.push(new tp(a.data,d,a.data[d]));return c}function rp(a){var b=[],c;for(c in a.data)A(a.data[c])&&b.push(c.replace("$",":"));return b}
h.appendChild=function(a){var b=a.getName();this.data[b]?(u(this.data[b])||(this.data[b]=[this.data[b]]),this.data[b].push(Rl(a.data))):this.data[b]=Rl(a.data)};
h.update=function(a,b,c,d,e){var f=!1;c=c||{};var g=t(b),k=!0===b||!g,l=!1===b,m=qp(this),n=qp(a);if(!g)for(var p=0;p<m.length;p++)t(e)&&!e[m[p].replace("$",":")]||Ua(n,m[p])||(this.removeAttribute(m[p]),f=!0);for(p=0;p<n.length;p++){var q=a.getAttribute(n[p]);if(!t(e)||e[n[p].replace("$",":")])Ua(m,n[p])?l||q==this.getAttribute(n[p])||(this.setAttribute(n[p],q),f=!0):(this.setAttribute(n[p],q),f=!0)}if(0==wp(a)&&k&&(e=this.data.$t,l=a.data.$t,t(l)&&e!=l))return vp(this,l),!0;if(!g)for(var s in this.data)d&&
!d[s.replace("$",":")]||!A(this.data[s])||A(a.data[s])||(delete this.data[s],f=!0);s=rp(a);for(e=0;e<s.length;e++)if(l=s[e],!d||!0==d[l]){var v=sp(a,l),m=sp(this,l),z=l.replace(":","$");if(1==v.length)0==m.length?(this.data[z]=Rl(v[0].data),f=!0):1==m.length?c[l]?k&&!pp(m[0],v[0],!0)&&(u(this.data[z])||(this.data[z]=[this.data[z]]),this.data[z].push(Rl(v[0].data)),f=!0):f=m[0].update(v[0],b)||f:g?(l=Ta(m,function(a){return pp(a,v[0],!0)}),-1==l&&k&&(this.data[z].push(Rl(v[0].data)),f=!0)):(this.data[z]=
Rl(v[0].data),f=!0);else if(!u(this.data[z]))if(k)this.data[z]=Rl(a.data[z]),f=!0;else{if(g){var m=Rl(a.data[z]),D=this,l=Ta(m,function(a){return yl(D.data[z],a)});-1==l&&(m.push(this.data[z]),this.data[z]=m,f=!0)}}else if(k)for(m.length>v.length&&(this.data[z].splice(v.length,m.length-v.length),f=!0),p=0;p<v.length;p++)t(m[p])?yl(m[p].data,v[p].data)||(this.data[z][p]=Rl(v[p].data),f=!0):(this.data[z][p]=Rl(v[p].data),f=!0);else if(g)for(p=0;p<a.data[z].length;p++)l=Ta(this.data[z],function(b){return yl(a.data[z][p],
b)}),-1==l&&(this.data[z].push(Rl(a.data[z][p])),f=!0)}return f};h.df=function(a,b,c,d,e){t(b)||(b=!1);return this.update(a,b,c,d,e)};h.toJSON=function(){return{data:this.data,tagName:this.tagName}};
function xp(a){function b(a,g){d(g,a);var k,l;for(l in a)if(a.hasOwnProperty(l)&&!x(a[l]))if(x(a[l].$t)&&"xhtml"==a[l].type){k=c(l);d(k,a[l]);var m=zh(a[l].$t);e.importNode(m.documentElement,!0);k.appendChild(m.documentElement);g.appendChild(k)}else if(x(a[l].$t))k=c(l),k.textContent=a[l].$t,d(k,a[l]),g.appendChild(k);else if(u(a[l])&&a[l][0]&&x(a[l][0].$t))for(m=0;m<a[l].length;m++)k=c(l),k.textContent=a[l][m].$t,d(k,a[l][m]),g.appendChild(k);else if(u(a[l]))for(m=0;m<a[l].length;m++)k=c(l),g.appendChild(k),
b(a[l][m],k);else A(a[l])&&(k=c(l),g.appendChild(k),b(a[l],k))}function c(a){return e.createElement(a.replace("$",":"))}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&"$t"!=c&&x(b[c])&&a.setAttribute(c.replace("$",":"),b[c])}var e=xh(a.getName(),a.dd);b(a.data,e.documentElement);return Ah(e.documentElement)}
function wp(a){function b(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&(u(a[c])?b+=a[c].length:A(a[c])&&b++);return b}var c;t(void 0)?c="undefined$"+c:t(c)&&(c=c.replace(/:/,"$"));return t(c)?u(a.data[c])?a.data[c].length:A(a.data[c])?b(a.data[c]):0:b(a.data)}h.ga=function(a){var b={};if(t(a))for(var c in this.data){var d=c.replace("$",":");x(this.data[c])?b[c]=this.data[c]:!0==a[d]&&(b[c]=Rl(this.data[c]))}else b=Rl(this.data);return new tp(null,this.tagName,b)};
function yp(a,b){var c=b.ownerDocument.createElementNS(a.dd,a.getName()),d;for(d in a.data)if(a.data.hasOwnProperty(d)){var e=d.replace("$",":");if(x(a.data[d]))"$t"==d?c.textContent=a.data[d]:(e=c.ownerDocument.createAttribute(e),e.nodeValue=a.data[d],c.setAttributeNode(e));else if(u(a.data[d]))for(var f=0;f<a.data[d].length;f++){var g=new tp(a.data[d],e,a.data[d][f]);yp(g,c)}else A(a.data[d])&&(g=new tp(a.data,e,a.data[d]),yp(g,c))}return b.appendChild(c)};function zp(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.g))b=a.g.$t;else throw new Bh("id or batch:id required.");this.id=b;this.h=void 0;this.data=a}E(zp,lp);h=zp.prototype;h.logger=R("ydn.gdata.Entry");h.qf=function(){return this.kind};h.ad=jp.prototype.ad;h.F=function(){return this.id};h.mc=["link","category"];h.Wf=["id","batch$id","link","category"];h.sa=jp.prototype.sa;
function Ap(a,b){if(b)a.data.status=""==b?void 0:b;else{var c=a.data;c.status&&(c.status=b)}}function Bp(a){return t(a.gd$deleted)?"gd:deleted":(a=a.status)?a:""}function Cp(a){return"gd:deleted"==Bp(a.data)}h.setTitle=function(){throw new Dh;};
h.nc=function(){if(!Dp(this.data))throw Error("nothing to commit");var a=new F;Ep(this,function(b,c){if(c.Da())a.w(b);else{var d=Xi(c);if(x(d)&&/html/.test(Yi(c,"content-type")))try{var e=(new DOMParser).parseFromString(d,"text/html");e.body&&(d=e.body.innerHTML)}catch(f){}a.A(c.N()+" "+c.Ja()+" "+d)}},this);return a};
function Ep(a,b,c){var d=Xh("gse");if(Dp(a.data)){var e={"Content-Type":"application/atom+xml"};a.g&&(e["GData-Version"]=a.g);var f={},g="POST",k,l,m;m="full";t(l)||(l="base"!=m);var n=a.kind||"contact";k=k?"/"+k:"";k=(l?"https":"http")+"://www.google.com/m8/feeds/"+n+"s/"+a.user_id.replace("@","%40")+"/"+m+k;k=k.replace("%40","@");if(l=(l=a.Yd("edit"))?l.href:void 0)g="delete"==Bp(a.data)?"DELETE":"PUT",k=l;try{var p=Fp(a)}catch(q){Mi({"class":"ydn.gdata.Entry",method:"ydn.gdata.Entry.commit","entry.data":a.data,
context:"toXmlString",error:{name:q.name,message:q.message,stack:q.stack}})}l=a.type;m=["atom","app","gd","batch","ydn"];if("sites"==l||"site"==l||"content"==l||"webpage"==l)m=m.concat("xhtml","sites");else if("m8"==l||"contact"==l)m=m.concat("gContact");p=np(p,m);zp.g&&(a.h=[k,f,g,e,p]);d.request(new Zh(k,g,f,e,p)).execute(b,c)}else P(a.logger,a+" commit ignore since not modified."),b&&b.call(c,null,null)}function Dp(a){if(null==a.id)return!0;a=Bp(a);return"modified"===a||"delete"===a}h.ye=function(){return this.data};
function Fp(a){var b=new tp(null,"entry",a.ye()),c=!1;b.xmlns||(b.xmlns="http://www.w3.org/2005/Atom",c=!0);var d=["atom"],e;for(e in a.data)if(a=e.match(/^(\w+)\$\w+/))a=a[1],a in mp&&(Ua(d,a)||d.push(a));e=xp(b);c&&delete b.xmlns;return np(e,d)}h.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Ua(b,c)&&!Ua(this.Wf,c)&&(this.data[c]=a.data[c])};h.ef=function(a,b){if(yl(this.data[a],b))return!1;this.data[a]=Rl(b);return!0};
h.df=function(a){if(a.data.updated.$t>=this.data.updated.$t&&Cp(a)){if(Cp(this)||"delete"==Bp(this.data))return!1;Ap(this,"delete");return!0}var b=!1,c;for(c in a.data)a.data.hasOwnProperty(c)&&A(a.data[c])&&!Ua(this.Wf,c)&&this.ef(c,a.data[c])&&(b=!0);b&&(a=Bp(this.data),"delete"==a?N(this.logger,this+" marked for deletion. Cannot mark modify flag."):"committed"==a?this.logger.log(Se,this+" already committed. All changes must wait until updated from the server.",void 0):Ap(this,"modified"));return b};function Gp(a,b,c){To.call(this,a,b,c)}E(Gp,To);Gp.prototype.ce=function(){return this.key};Gp.prototype.ec=function(a,b,c,d){a=Gp.m.ec.call(this,a,b,c,d);this.g.mg(a.method)&&r.gapi&&r.gapi.auth&&(b=gapi.auth.getToken())&&b.access_token&&(a.headers.Authorization=b.token_type+" "+b.access_token);if("GET"==a.method)a.params.alt="json";else if("PUT"==a.method||"POST"==a.method)d=new zp(d),a.body=Fp(d),a.headers["Content-Type"]="application/atom+xml";return a};
Gp.prototype.ze=function(a,b){a=Gp.m.ze.call(this,a,b);a.feed&&(a=a.feed);a.entry&&(a=a.entry);return a};function Hp(a,b,c){ap.call(this,a,b,c);a=c.Options;this.kind=a.kind;this.version=a.version;this.projection=a.projection;this.j=a.maxResults}E(Hp,ip);h=Hp.prototype;h.projection=null;h.version=null;h.logger=R("ydn.db.sync.GData");h.xa=function(a,b){return new Gp(this,a,b)};h.qb=function(){var a=Hp.m.qb.call(this);a.key=["id","$t"];a.etag="gd$etag";a.updated=["updated","$t"];return a};h.rb=function(){var a=Hp.m.rb.call(this);return a=a.concat(["version","projection","kind","maxResults"])};
h.Cb=function(){return"https://www.googleapis.com/"+this.kind+"/"};h.mg=function(){return!1};h.F=function(a){return a?a.id?a.id.$t:"":""};
function Ip(a,b,c){var d=c||a.Cb();c&&Q(a.logger,"continuing "+c);b=new Zh(d,"GET",b);var e=new F;a.ua().request(b).execute(function(b,d){if(200==d.N()){if(!b){var k=Xi(d);x(k)&&(b=JSON.parse(k))}var k=b.feed||b,l=k.entry,l=l?u(l)?l:[l]:[];0<l.length&&Wo(a,l);for(var l=null,k=k.link,k=u(k)?k:[k],m=0;m<k.length;m++)"next"==k[m].rel&&(l=k[m].href);l?qb(Ip(a,{},l),e):(Q(a.logger,"prefetch "+a.P+" done"),e.w(!!c))}else 302==d.N()?e.w():(k=a+": Invalid response status "+d.N()+" on prefetching",N(a.logger,
k),e.A(Error(k)))});return e}h.Xb=function(){Q(this.logger,"starting prefetch");var a=new F;gl(this.storage.g,this.P,"updated.$t",null,!0,1).B(function(b){var c={alt:"json",kind:this.kind};this.j&&(c["max-results"]=this.j);(b=b[0])?(b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),c["updated-min"]=b,Q(this.logger,this.P+" fetching entries later then "+b)):Q(this.logger,this.P+" fetching entries from beginning");qb(Ip(this,c),a)},this);return a};
h.count=function(a){var b=Lj(this.i,"updated.$t");if(!b)return a;var c=ak(a);a.u(function(a){Uc(c,a);gl(this.storage.g,this.P,b.getName(),null,!1,1).u(function(b){var f={alt:"json"};if(b=u(b)?b[0]:b)b=nc(b,"updated","$t"),b=(new Date(1+ +new Date(b))).toISOString(),f["updated-min"]=b;var g=this,f=new Zh(this.Cb(),"GET",f);this.ua().request(f).execute(function(b,e){if(200==e.N()){if(!b){var f=Xi(e);x(f)&&(b=JSON.parse(f))}f=nc(b.feed,"openSearch$totalResults");c.w(a+parseFloat(f||0))}else N(g.logger,
g+":Unexpected respond status "+e.N())})},function(a){c.A(a)},this)},function(a){c.A(a)},this);return c};function Jp(a,b,c){To.call(this,a,b,c)}E(Jp,Gp);function Kp(a,b,c){Hp.call(this,a,b,c);this.h=this.h.substr(27);this.Lb=c.Options.prefix}E(Kp,Hp);Kp.prototype.ua=function(){this.g||(this.g=new Lp(gapi.client));return this.g};Kp.prototype.xa=function(a,b){return new Jp(this,a,b)};Kp.prototype.Cb=function(){return this.h+this.Lb};
Kp.prototype.Xb=function(){Q(this.logger,"starting prefetch");var a=new F;gl(this.storage.g,this.P,"updated",null,!0,1).u(function(b){var c={alt:"json"};if(b=b[0])b=nc(b,"updated"),b=(new Date(1+ +new Date(b))).toISOString(),c.updatedMin=b;var d=this,c=new Zh(this.Cb(),"GET",c);d.ua().request(c).execute(function(b,c){if(b){var g=b.items||[];0<g.length?Wo(d,g).fa(function(){a.w(!0)}):a.w(!1)}else 302==c.N()?a.w():(g=d+": Invalid response status "+c.N()+" on prefetching",N(d.logger,g),a.A(Error(g)))})},
function(b){a.A(b)},this);return a};function Mp(a,b){if(!t(r.AWS))throw new Rc("AWS JS SDK not loaded");this.h=a;this.i=b;this.g=null}Mp.prototype.request=function(a){return new Np(this,a)};function Op(a){var b={params:{Bucket:a.h,region:a.i}};if(!a.h)throw new M("bucket name required");a.g||(a.g=new AWS.S3(b));return a.g}function Np(a,b){this.parent=a;this.g=b}
function Pp(a,b,c,d,e){var f=NaN,g="",k={};a=Op(a.parent)[b](c);a.on("complete",function(a){a.httpResponse&&(f=a.httpResponse.statusCode,x(f)&&(f=parseInt(f,10)),k=a.httpResponse.headers);a.error&&(g=a.error.message,f||(f=400))});a.send(function(a,b){var c=new Vi(f,b,k,g);a?d.call(e,null,c):d.call(e,b,c)})}
Np.prototype.execute=function(a,b){var c=Hd(new ud(this.g.path)),c="/"==c.charAt(0)?c.substr(1):c,d=this.g.headers||{};c&&(d.Key=c);if(c)if("GET"==this.g.method)Pp(this,"getObject",d,a,b);else if("PUT"==this.g.method)Pp(this,"putObject",d,a,b);else throw new Pc("HTTP method "+this.g.method);};function Qp(a,b){this.g=a;this.prefix=Rp(this,"Prefix")[0];this.h=b.type}Qp.prototype.ha=function(){return this.g.documentElement.getElementsByTagName("Contents").length};Qp.prototype.keys=function(){var a=Rp(this,"Key");if(this.prefix){var b=this.prefix.length,a=a.map(function(a){return a.substr(b)});"INTEGER"==this.h?a=a.map(function(a){return parseInt(a,10)}):"NUMERIC"==this.h&&(a=a.map(function(a){return parseFloat(a)}))}return a};
function Rp(a,b){for(var c=[],d=a.g.documentElement.getElementsByTagName(b),e=d.length,f=0;f<e;f++)c[f]=d[f].textContent;return c}function Sp(a){return Rp(a,"LastModified").map(function(a){return(new Date(Date.parse(a))).toGMTString()})}
function Tp(a){var b=a.g.documentElement.getElementsByTagName("NextMarker");return 1==b.length?b[0].textContent:"true"==a.g.documentElement.getElementsByTagName("IsTruncated")[0].textContent&&(a=a.g.documentElement.firstElementChild.lastElementChild)&&"Contents"==a.tagName?a.getElementsByTagName("Key")[0]:null};function Up(a,b,c){ap.call(this,a,b,c);this.j=c.Options.bucket;if(!x(this.j)||ta(this.j))throw new M("bucket name required.");this.h||(this.h="https://"+this.j+".s3.amazonaws.com/");if(!0===b.h)throw new M('S3 object store "'+b.getName()+'" must not set autoIncrement to true.');}E(Up,ap);h=Up.prototype;h.logger=R("ydn.db.sync.S3");h.rb=function(){var a=Up.m.rb.call(this);return a=a.concat(["bucket","maxKeys","prefix","delimiter"])};h.ua=function(){this.g||(this.g=new Mp(this.j));return this.g};
h.Xe=function(a){return this.h+this.l+a};h.xa=function(a,b){return new kp(this,a,b)};
h.cf=function(a,b){var c=this;ck(a,function(d,e,f){Uc(a,d);c.Hd(d,function(a){var e={},l=a[0]?Oo(a[0]):null;null!=l&&(e.marker=l);0<c.l.length&&(e.prefix=c.l);0<b&&(e["max-keys"]=b);Q(c.logger,c+" querying for newer entries starting from "+l);e=new Zh(c.h,"GET",e);c.ua().request(e).execute(function(b,e){if(200==e.N()){for(var k=Xi(e),k=k instanceof Document?k:zh(k),l=new Qp(k,c.i),k=l.keys(),l=Sp(l),s=[],v=[],z=[],D=0,G=0;D<=a.length&&G<k.length;){var J=a[D]?Oo(a[D]):null,O=k[G];if(D==a.length)v.push(O),
G++;else{var ha=J?qj(J,O):-1;0==ha?((O=Po(a[D]))&&l[G]&&O!=l[G]&&(l[G]>O?z.push(J):N(c.logger,'record "'+J+'" in database is more recent than server '+O+" vs "+l[G])),D++,G++):1==ha?(s.push(J),D++):(v.push(O),G++)}}ep(c,f,d,v,z,s)}else N(c.logger,"Invalid response status "+e.N())})})},this)};
function Vp(a,b){function c(f){null!=f&&(d.marker=f);Q(a.logger,a+" querying for newer entries starting from "+f);e.request(new Zh(a.h,"GET",d)).execute(function(d,e){if(200==e.N()){var f=Xi(e),f=f instanceof Document?f:zh(f),f=new Qp(f,a.i),m=Tp(f),f=f.keys(),n=f.length;if(0==n)b([]),b=null;else for(var p=0,q=0;q<n;q++)a.xa(f[q]).hc(function(){p++;p==n&&(m?c(m):b&&(b([this.tb()]),b=null))})}else N(a.logger,"Invalid response status "+e.N())})}var d={};0<a.l.length&&(d.prefix=a.l);var e=a.ua();c();
a.Y=!0}function Wp(a,b){a.Y||ck(b,function(a,b,e){t(a[0])?e(a):Vp(this,e)},a)};function Xp(a,b,c){To.call(this,a,b,c)}E(Xp,kp);Xp.prototype.logger=R("ydn.db.sync.entry.Gcs");function Yp(a,b,c){Up.call(this,a,b,c);this.h="https://"+this.j+".storage.googleapis.com/"}E(Yp,Up);Yp.prototype.logger=R("ydn.db.sync.Gcs");Yp.prototype.ua=function(){this.g||(this.g=new jo);return this.g};Yp.prototype.xa=function(a,b){return new Xp(this,a,b)};function Lp(a,b){this.h=a;this.g=!!b}Lp.prototype.request=function(a){var b={path:a.path,method:a.method,headers:a.headers,params:a.params,body:a.body};this.g&&(b.callback=function(a,e){c.w(a,e);b.callback=null});a=this.h.request(b);var c=new Zp(a);return c};function Zp(a){this.h=a||null}Zp.prototype.w=function(a,b){this.i&&(this.i(a,$i(b)),this.i=null);this.g={json:a,xc:b}};
Zp.prototype.execute=function(a){this.h?(this.h.execute(function(b,c){a(b,$i(c))}),this.h=null):this.g?(a(this.g.json,$i(this.g.xc)),this.g=null):this.i=a};function bp(a){if(a){if(a instanceof jo)return a;if(ga(a))return new Lp({request:function(b){a(b)}},!0);if("request"in a)return new Lp(a);throw new M(a+" is not a valid HTTP Client");}return null};function $p(a,b,c){To.call(this,a,b,c)}E($p,Xp);$p.prototype.logger=R("ydn.db.sync.entry.GcsJson");$p.prototype.hc=function(a){var b=this.g,c=this;Xo(this,function(d){var e={method:"GET",path:"storage/v1beta2/b/"+b.j+"/o/"+encodeURIComponent(c.getName())};d&&(e.headers=Ro(d));gapi.client.request(e).execute(function(d,e){var k=$i(e);c.j=new So(c.F(),k.Jc(),b.o);d?(Q(c.logger,c+": readServer updated"),c.i=d):(Q(c.logger,c+": readServer request fail "+e),c.j=null,c.i=null);a.call(c,200)},e)})};function aq(a,b,c){Yp.call(this,a,b,c)}E(aq,Yp);h=aq.prototype;h.logger=R("ydn.db.sync.GcsJson");h.qb=function(){var a=aq.m.qb.call(this);a.key="name";return a};h.ua=function(){if(!this.g)if(t(r.gapi))this.g=new Lp(gapi.client);else throw new Rc("gapi not loaded");return aq.m.ua.call(this)};h.xa=function(a,b){return new $p(this,a,b)};
h.Xb=function(){P(this.logger,"starting prefetch");var a=new F;il(this.storage.g,this.P,null,null,1,0,!0,!1).u(function(b){var c={bucket:this.j};(b=b[0])&&(c.marker=b);var d=this;if(!r.Hg||r.Hg.client)throw Error("gapi lib not loaded");gapi.client.load("storage","v1beta2",function(){var b=gapi.client.storage.objects.list({bucket:d.j});this.Lb&&(c.prefix=this.Lb);b.execute(function(b,c){if(b&&!b.error){var e=b.items||[];0<e.length?Wo(d,null,e).fa(function(){a.w(!0)}):a.w(!1)}else e=d+": "+c,N(d.logger,
e),a.A(Error(e))})})},function(b){a.A(b)},this);return a};function bq(a,b,c){Yp.call(this,a,b,c);this.O="full"}E(bq,Yp);h=bq.prototype;h.logger=R("ydn.db.sync.GcsMeta");h.qb=function(){var a=bq.m.qb.call(this);a.key="name";return a};h.ua=function(){!this.g&&gapi&&(this.g=new Lp(gapi.client));return bq.m.ua.call(this)};h.xa=function(a,b){return new $p(this,a,b)};
h.Xb=function(){P(this.logger,"starting prefetch");var a=new F;if(!r.gapi||!r.gapi.client)throw Error("gapi lib not loaded");var b=this;gapi.client.load("storage","v1beta2",function(){function c(e){e&&(d.pageToken=e);gapi.client.storage.objects.list(d).execute(function(e,g){if(e&&!e.error){var k=e.items||[];if(e.nextPageToken)Q(b.logger,"receiving "+k.length+" meta records, continuing next"),Wo(b,k),c(e.nextPageToken);else if(0<k.length)Wo(b,k).fa(function(){Q(b.logger,"receiving "+k.length+" meta records, prefetching dane.");
a.w(!0)});else{var l=!!d.pageToken;Q(b.logger,"prefetching done");a.w(l)}}else l=b+": "+g,N(b.logger,l),a.A(Error(l))})}var d={bucket:b.j};this.Lb&&(d.prefix=this.Lb);c()});return a};h.Hd=function(a,b){if(0==a.length)b([]);else{var c=this.H(),d=Pa(a,function(a){return new pk(c,a)});hl(this.storage.g,d).u(function(d){for(var f=[],g=0;g<a.length;g++)f[g]=new No(a[g],d[g],this.o,c);b(f)},function(a){N(this.logger,this+" error loading meta data "+a);b([])},this)}};function cq(a,b,c){ap.call(this,a,b,c)}E(cq,ap);cq.prototype.Xe=function(a){return this.h+this.l+this.P+this.ia+a};cq.prototype.logger=R("ydn.db.sync.Json");
cq.prototype.cf=function(a){function b(a,b){var c=new Zh(e);d.ua().request(c).execute(function(c){if(200==c.status){var e=(c.response instanceof Object?c.response:vh(c.responseText)).items;c=Pa(e,function(a){return a.id});for(var e=Pa(e,function(a){return a.updated}),k=[],p=[],q=[],s=0,v=0;s<=a.length&&v<c.length;){var z=Oo(a[s]),D=c[v];if(s==a.length)p.push(D),v++;else{var G=qj(z,D);0==G?((D=Po(a[s]))&&e[v]&&D!=e[v]&&(new Date(e[v])>D?q.push(z):N(d.logger,'record "'+z+'" in database is more recent than server '+
D+" vs "+e[v])),s++,v++):1==G?(k.push(z),s++):(p.push(D),v++)}}ep(d,function(){},b,p,q,k)}else N(d.logger,"Invalid response status "+c.status)})}var c=new Tc,d=this,e=this.h+this.l+this.P;a.B(function(a){Uc(c,a);this.Hd(a,function(c){b(c,a)})},this)};function dq(a,b,c){ap.call(this,a,b,c)}E(dq,ip);function eq(a,b,c){To.call(this,a,b,c)}E(eq,kp);eq.prototype.logger=R("ydn.db.sync.entry.S3Meta");function fq(a,b,c){Up.call(this,a,b,c);this.Lb=c.Options.prefix;if("Key"!=b.keyPath)throw new M('s3-meta store "'+b.getName()+'" must use inline key with keyPath "Key"');this.O="meta"}E(fq,Up);h=fq.prototype;h.logger=R("ydn.db.sync.S3Meta");h.qb=function(){var a=fq.m.qb.call(this);a.key="Key";a.modified="LastModified";a.etag="ETag";return a};h.xa=function(a,b){return new eq(this,a,b)};
h.Xb=function(){function a(f){f&&(e.marker=f);c.listObjects(e).send(function(c,f){if(c){var l=d+": "+wh(c);N(d.logger,l);b.A(c instanceof Error?c:Error(l))}else{var m=f.Contents||[];f.IsTruncated?(Q(d.logger,"receiving "+m.length+" meta records, continuing next"),Wo(d,m),a(m[m.length-1].Key+"\uffff")):0<m.length?Wo(d,m).fa(function(){Q(d.logger,"receiving "+m.length+" meta records, prefetching dane.");b.w(!0)}):(l=!!e.marker,Q(d.logger,"prefetching done"),b.w(l))}})}P(this.logger,"starting prefetch");
var b=new F,c=Op(this.ua()),d=this,e={};this.Lb&&(e.prefix=this.Lb);a();return b};h.Hd=function(){throw new Rc("loading meta data should not be necessary");};function gq(a,b,c){To.call(this,a,b,c)}E(gq,Gp);function hq(a,b,c){Hp.call(this,a,b,c);a=c.Options;this.domain=a.domain;this.Y=a.siteName;if(a=Mj(b,"sites$parent"))zl(a,function(a){for(var b=a.link||[],c=0;c<b.length;c++)if("http://schemas.google.com/sites/2008#parent"==b[c].rel)return b[c].href;return a.id.$t.replace(/\w+$/,"0")}),cf(this.logger,"index sites$parent in "+b.getName()+" has set a generator.");if(a=Mj(b,"alternate"))zl(a,function(a){a=a.link||[];for(var b=0;b<a.length;b++)if("alternate"==a[b].rel)return a[b].href}),cf(this.logger,
"index alternate in "+b.getName()+" has set a generator.")}E(hq,Hp);h=hq.prototype;h.xa=function(a,b){return new gq(this,a,b)};h.rb=function(){var a=hq.m.rb.call(this);return a=a.concat(["domain","siteName"])};h.Cb=function(){return"https://sites.google.com/feeds/content/"+this.domain+"/"+this.Y+"/"};h.mg=function(a){return"GET"!=a};
function iq(a,b,c,d){var e={alt:"json",kind:a.kind};"sites$parent"==c?(c=d.match(/\w+$/)[0],e.parent=c):"alternate"==c&&(c=d.replace(/https:\/\/sites.google.com\/a\/[^\/]+\/[^\/]+/,""),e.path=c);var f={},g=a.Cb();ck(b,function(c,l,m){Uc(b,c);if(l=c[0])l=nc(l,"updated","$t"),l=(new Date(1+ +new Date(l))).toISOString(),e["updated-min"]=l;l=new Zh(g,"GET",e,f);a.ua().request(l).execute(function(b,e){if(200==e.N()){if(!b){var f=Xi(e);x(f)&&(b=JSON.parse(f))}var g=(f=(b.feed||b).entry)?u(f)?f:[f]:[];0<
g.length?Wo(a,g).fa(function(){m(g)}):m(c)}else 302==e.N()?m(c):(f=a+": Invalid response status "+e.N()+" for querying pageName: "+d,N(a.logger,f),m(Error(f),!0))})},a)}h.xe=function(a,b,c){if(gp(this))ck(a,function(d,e,f){Uc(a,d);hp(this,function(a){!0===a?gl(this.storage.g,this.P,b,U.only(c),!1,0).u(function(a){f(a)},function(a){f(a,!0)},this):f(d)},function(a){f(a,!0)},this)},this);else return"alternate"==b||"alternate"==b?iq(this,a,b,c):hq.m.xe.call(this,a,b,c)};Hk.prototype.g=null;
gm.prototype.Ff=function(a,b){var c=b.format;if("gdata-sites"==c)a.g=new hq(this,a,b);else if("gdata"==c)a.g=new Hp(this,a,b);else if("gdata-json"==c)a.g=new Kp(this,a,b);else if("odata"==c)a.g=new dq(this,a,b);else if("s3"==c)a.g=new Up(this,a,b);else if("s3-meta"==c)a.g=new fq(this,a,b);else if("gcs"==c)a.g=new Yp(this,a,b);else if("gcs-json"==c)a.g=new aq(this,a,b);else if("gcs-meta"==c)a.g=new bq(this,a,b);else if("atom"==c)a.g=new ip(this,a,b);else if("json"==c)a.g=new cq(this,a,b);else if("rest"==
c)a.g=new ap(this,a,b);else throw new Pc("Sync format: "+c);Il(a,function(b,c){var f=b.ud();if(!(this instanceof Fk)||this.Za)if(!window.navigator||!t(window.navigator.onLine)||window.navigator.onLine)if("add"==f)f=c[1],a.g.add(b,f);else if("count"==f)c[1]||c[2]||a.g.count(b);else if("put"==f){var f=c[1],g=c[2];a.g.put(b,f,g)}else if("rm:iter"==f)g=c[1],a.g.remove(b,g);else if("values:iter:index"==f){var f=c[1],g=c[2],k=c[3],l=c[4],m=c[5];!k&&!m&&g&&null!=g.lower&&null!=g.upper&&0==qj(g.lower,g.upper)&&
a.g.xe(b,f,g.lower)}else if("keys"==f)g=c[1],l=c[2],k=c[3],m=c[4],a.g.keys(b,null,g,l,k,m,!1);else if("keys:iter:index"==f)f=c[1],g=c[2],l=c[3],k=c[4],m=c[5],a.g.keys(b,f,g,l,k,m,c[6]);else if("values"==f)g=c[1],l=c[2],k=c[3],m=c[4],g||m?g&&g.lower&&x(g.lower)&&g.lower==g.upper||!g&&m&&1==l&&k&&Wp(a.g,b):a.g.values(b,l,k);else if(""!=f)if("get"==f)g=c[1],a.g.get(b,g);else if("values:array"==f)fp(a.g,b,c[1]);else throw Error(f);})};var jq="Accounts Contacts Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),kq="Accounts Contacts Leads Notes Opportunities Tasks Teams".split(" "),lq=["Contacts","Leads"];function mq(a,b,c){return"https://"+a+"/index.php?module="+b+"&action=DetailView&record="+c};function nq(a){this.h=a||[]}nq.prototype.g=function(a){return-1==this.h.indexOf(a)?a:null};function oq(){}
oq.prototype.g=function(a){var b={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},c={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""};a=a.toLowerCase();var d,e,f=a;if(3>a.length)return a;var g,k;a=a.substr(0,1);"y"==a&&(f=a.toUpperCase()+f.substr(1));g=/^(.+?)(ss|i)es$/;e=/^(.+?)([^s])s$/;
g.test(f)?f=f.replace(g,"$1$2"):e.test(f)&&(f=f.replace(e,"$1$2"));g=/^(.+?)eed$/;e=/^(.+?)(ed|ing)$/;g.test(f)?(e=g.exec(f),g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(e[1])&&(g=/.$/,f=f.replace(g,""))):e.test(f)&&(e=e.exec(f),d=e[1],e=/^([^aeiou][^aeiouy]*)?[aeiouy]/,e.test(d)&&(f=d,e=/(at|bl|iz)$/,k=/([^aeiouylsz])\1$/,d=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,e.test(f)?f=f+"e":k.test(f)?(g=/.$/,f=f.replace(g,"")):d.test(f)&&(f=f+"e")));g=/^(.+?)y$/;g.test(f)&&(e=g.exec(f),
d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy]/,g.test(d)&&(f=d+"i"));g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+b[e]));g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;g.test(f)&&(e=g.exec(f),d=e[1],e=e[2],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d+c[e]));g=
/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/;e=/^(.+?)(s|t)(ion)$/;g.test(f)?(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,g.test(d)&&(f=d)):e.test(f)&&(e=e.exec(f),d=e[1]+e[2],e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,e.test(d)&&(f=d));g=/^(.+?)e$/;g.test(f)&&(e=g.exec(f),d=e[1],g=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/,
e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*([aeiouy][aeiou]*)?$/,k=/^[^aeiou][^aeiouy]*[aeiouy][^aeiouwxy]$/,g.test(d)||e.test(d)&&!k.test(d))&&(f=d);g=/ll$/;e=/^([^aeiou][^aeiouy]*)?[aeiouy][aeiou]*[^aeiou][^aeiouy]*[aeiouy][aeiou]*[^aeiou][^aeiouy]*/;g.test(f)&&e.test(f)&&(g=/.$/,f=f.replace(g,""));"y"==a&&(f=a.toLowerCase()+f.substr(1));return f};function pq(a){this.h=a}
pq.prototype.g=function(a){a=a.toLowerCase();a=a.replace(/([^c])\1/g,"$1");a=a.match(/^(kn|gn|pn|ae|wr)/)?a.substr(1,a.length-1):a;a=a.replace(/mb$/,"m");a=a.replace(/ck/g,"k");a=function(a){a=a.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim();a=a.replace(/cia/g,"xia");a=a.replace(/c(i|e|y)/g,"s$1");return a=a.replace(/c/g,"k")}(a);a=function(a){a=a.replace(/d(ge|gy|gi)/g,"j$1");return a=a.replace(/d/g,"t")}(a);a=function(a){a=a.replace(/gh(^$|[^aeiou])/g,"h$1");return a=a.replace(/g(n|ned)$/g,"$1")}(a);
a=function(a){a=a.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3");a=a.replace(/gg/g,"g");return a=a.replace(/g/g,"k")}(a);a=a.replace(/([aeiou])h([^aeiou])/g,"$1$2");a=a.replace(/ph/g,"f");a=a.replace(/q/g,"k");a=a.replace(/s(h|io|ia)/g,"x$1");a=function(a){a=a.replace(/^x/,"s");return a=a.replace(/x/g,"ks")}(a);a=function(a){a=a.replace(/t(ia|io)/g,"x$1");return a=a.replace(/th/,"0")}(a);a=a.replace(/tch/g,"ch");a=a.replace(/v/g,"f");a=a.replace(/^wh/,"w");a=a.replace(/w([^aeiou]|$)/g,"$1");a=a.replace(/y([^aeiou]|$)/g,
"$1");a=a.replace(/z/,"s");a=a.charAt(0)+a.substr(1,a.length).replace(/[aeiou]/g,"");a.length>=this.h&&(a=a.substring(0,this.h));return a=a.toUpperCase()};var qq=new pq(32),rq=new oq,sq=new nq("a a's able about above according accordingly across actually after afterwards again against ain't all allow allows almost alone along already also although always am among amongst an and another any anybody anyhow anyone anything anyway anyways anywhere apart appear appreciate appropriate are aren't around as aside ask asking associated at available away awfully b be became because become becomes becoming been before beforehand behind being believe below beside besides best better between beyond both brief but by c c'mon c's came can can't cannot cant cause causes certain certainly changes clearly co com come comes concerning consequently consider considering contain containing contains corresponding could couldn't course currently d definitely described despite did didn't different do does doesn't doing don't done down downwards during e each edu eg eight either else elsewhere enough entirely especially et etc even ever every everybody everyone everything everywhere ex exactly example except f far few fifth first five followed following follows for former formerly forth four from further furthermore g get gets getting given gives go goes going gone got gotten greetings h had hadn't happens hardly has hasn't have haven't having he he's hello help hence her here here's hereafter hereby herein hereupon hers herself hi him himself his hither hopefully how howbeit however i i'd i'll i'm i've ie if ignored immediate in inasmuch inc indeed indicate indicated indicates inner insofar instead into inward is isn't it it'd it'll it's its itself j just k keep keeps kept know knows known l last lately later latter latterly least less lest let let's like liked likely little look looking looks ltd m mainly many may maybe me mean meanwhile merely might more moreover most mostly much must my myself n name namely nd near nearly necessary need needs neither never nevertheless new next nine no nobody non none noone nor normally not nothing novel now nowhere o obviously of off often oh ok okay old on once one ones only onto or other others otherwise ought our ours ourselves out outside over overall own p particular particularly per perhaps placed please plus possible presumably probably provides q que quite qv r rather rd re really reasonably regarding regardless regards relatively respectively right s said same saw say saying says second secondly see seeing seem seemed seeming seems seen self selves sensible sent serious seriously seven several shall she should shouldn't since six so some somebody somehow someone something sometime sometimes somewhat somewhere soon sorry specified specify specifying still sub such sup sure t t's take taken tell tends th than thank thanks thanx that that's thats the their theirs them themselves then thence there there's thereafter thereby therefore therein theres thereupon these they they'd they'll they're they've think third this thorough thoroughly those though three through throughout thru thus to together too took toward towards tried tries truly try trying twice two u un under unfortunately unless unlikely until unto up upon us use used useful uses using usually uucp v value various very via viz vs w want wants was wasn't way we we'd we'll we're we've welcome well went were weren't what what's whatever when whence whenever where where's whereafter whereas whereby wherein whereupon wherever whether which while whither who who's whoever whole whom whose why will willing wish with within without won't wonder would wouldn't x y yes yet you you'd you'll you're you've your yours yourself yourselves z zero".split(" "));function tq(a){this.data=a;this.g=0}tq.prototype.next=function(a){for(var b=this.g,c=this.data[b],c=1,d=0;0<=b&&b<this.data.length;){c=this.data[b];if(c instanceof Array)if(a<c[0])c=-1;else if(a>c[1])c=1;else return this.g=b,!0;else{if(c==a)return this.g=b,!0;c=a<c?-1:1}if(0==d)d=c;else if(d!=c)break;b+=c;if(b>this.data.length||0>b)break}return!1};
function uq(a,b){for(var c=0,d=0,e=a.length,f=0;f<e;++f){a:{var d=a.charCodeAt(f),g=new tq(categ_letters_numbers_data);if(y(d))d=g.next(d);else{for(var k=0,l=d.length;k<l;++k)if(!1===g.next(d[k])){d=!1;break a}d=!0}}d||((d=f-c)&&b(c,d),c=f+1)}(d=e-c)&&b(c,d)};function vq(a,b){this.j=b;this.value=a}vq.prototype.U=function(){return this.value};vq.prototype.sb=function(){return 1};var wq=!Lb&&(Qh||Nh);vq.prototype.F=function(){return this.value};vq.prototype.toString=function(){return"Entry:"+this.value};function xq(a,b,c,d,e,f){vq.call(this,d,e);this.P=a;this.h=b;this.i=c;this.Jd=f||[]}E(xq,vq);h=xq.prototype;h.Zc=function(){return{k:this.j,v:this.value.toLowerCase(),id:this.F(),loc:this.Jd}};h.F=function(){var a=[this.P,this.i,this.h,this.value];return wq?a:vj(a)};h.H=function(){return this.P};h.ja=function(){return this.i};h.toString=function(){return["IndexEntry",this.P,this.i,this.value].join(":")};function yq(a,b,c,d,e){vq.call(this,b,c);this.l=d;this.g=e;this.type=a;this.Hf=1}E(yq,vq);yq.prototype.sb=function(){return this.g*this.type*this.Hf};yq.prototype.F=function(){return this.value+"|"+this.l};function zq(a,b){xq.call(this,b.H(),b.h,b.ja(),b.U(),b.j,[]);this.n=a;this.g=[b]}E(zq,xq);h=zq.prototype;h.count=function(){return this.g.length};h.entry=function(a){return this.g[a]};h.df=function(a){a=a.g[0];for(var b=0;b<this.g.length;b++)if(this.g[b].h==a.h&&this.g[b].value==a.value)return;this.g.push(a)};h.sb=function(){for(var a=0,b=0;b<this.g.length;b++)var c=this.g[b],d=Ml(this.n,c.H(),c.h),c=c.sb(),a=a+c*d.h;return a};function hb(a,b){var c=a.sb(),d=b.sb();return c<=d?1:-1}
h.Zc=function(){for(var a={value:this.value,primaryKey:this.i,storeName:this.P,score:this.sb(),tokens:[]},b=0;b<this.g.length;b++)a.tokens[b]=this.g[b].Zc();return a};h.toString=function(){return["RankEntry",this.P,this.i,this.value].join(":")+"["+this.g.length+"]"};function Aq(a){var b=[],c;a=a.split(/\s+/);for(var d=0;d<a.length;d++){c=a[d];for(var e=c.length-1,f=Array(e),g=0;g<e;g++)f[g]=c.substring(g,g+2);c=f;b.push.apply(b,c)}return b};function $k(a,b,c,d,e,f,g){xq.call(this,b,c,d,e,f,g);this.query=a}E($k,xq);$k.prototype.sb=function(){var a,b=this.value;a=Aq(this.query.value.toLowerCase().replace(/^\s+|\s+$/g,""));var b=Aq(b.toLowerCase().replace(/^\s+|\s+$/g,"")),c=0,d=a.length+b.length,e,f,g,k;for(e=0;e<a.length;e++)for(g=a[e],f=0;f<b.length;f++)if(k=b[f],g==k){c++;delete b[f];break}a=2*c/d;b=Math.log(this.Jd.length+1);c=this.query.sb();return b*a*c};$k.prototype.Zc=function(){return{keyPath:this.h,value:this.value,loc:this.Jd.slice()}};
$k.prototype.toString=function(){return["ResultEntry",this.P,this.i,this.value].join(":")};function Bq(a,b){this.g=a;this.h=b;this.j=[];this.i=0}function Zk(a,b){for(var c,d,e=a.g.getName(),f=0;f<a.h.length;f++){var g=a.h[f],k=g.type;0.4==k||0.6==k?(d="v",c=g.U().toLowerCase(),c=kj(c)):(d="v",c=g.U().toLowerCase(),c=U.only(c));b(e,d,c,g);a.i++;0.6==k&&(d="k",c=g.j,c=U.only(c),b(e,d,c,g),a.i++)}}function Yk(a){for(var b=[a.g.getName()],c=0;c<a.g.count();c++){var d=a.g.index(c).H();-1==b.indexOf(d)&&b.push(d)}return b}
function al(a){for(var b=[],c=[],d=0;d<a.j.length;d++){var e=a.j[d];if(0==e.query.type)-1==Ta(c,function(a){return a.ja()==e.ja()&&a.H()==e.H()})&&c.push(e);else{var f=new zq(a.g,e),g=Ta(b,function(a){return a.ja()==f.ja()&&a.H()==f.H()});if(0<=g){var k=b[g];Xa(b,g);k.df(f);f=k}gb(b,f)}}for(a=0;a<c.length;a++)for(g=c[a],d=b.length-1;0<=d;--d)if(k=b[d],g.ja()==k.ja()&&g.H()==k.H()){b.splice(a,1);break}return b.map(function(a){return a.Zc()})};function Cq(a){this.g=a;if("en"==a.lang){a=a.h||["stop","stemmer","metaphone"];for(var b=[],c=0;c<a.length;c++)if("metaphone"==a[c])b.push(qq);else if("stemmer"==a[c])b.push(rq);else if("stop"==a[c])b.push(sq);else throw Error('Invalid normalizer "'+a[c]+'" for English lang');a=b}else a=[];this.h=a}function Dq(a,b){for(var c=0;c<a.h.length;c++){var d=a.h[c].g(b);if(d)b=d;else return null}return b}Cq.prototype.parse=function(a){var b=[];uq(a,function(c,d){b.push(a.substr(c,d))});return b};
Cq.prototype.query=function(a,b){var c=Eq(this,b);return 0==c.length?null:new Bq(this.g,c)};
function Eq(a,b){var c=[],d=[];uq(b,function(a,e){c.push(b.substr(a,e));d.push(a)});for(var e=[],f=0;f<c.length;f++)e[f]=Dq(a,c[f]);for(var g=[],k=0,f=0;f<c.length;f++){var l=c[f],m=e[f],n="*"==b.charAt(d[f]+l.length),p=n?d[f]+l.length+1:d[f]+l.length,p='"'==b.charAt(d[f]-1)&&'"'==b.charAt(p),q="-"==b.charAt(p?d[f]-2:d[f]-1),s=0.8;n?s=0.4:p?s=1:q?s=0:null!=m&&(s=0.6);l=new yq(s,l,m,d[f],1/(f+2));g.push(l);k+=l.sb()}for(f=0;f<g.length;++f)g[f].Hf=1/k;return g}
function Fq(a,b,c,d){var e=[],f=[];uq(b,function(a,c){e.push(b.substr(a,c));f.push(a)});for(var g=[],k=0;k<e.length;k++)g[k]=Dq(a,e[k]);a=c.H();c=c.g;for(var l=[],k=0;k<e.length;k++){var m=e[k],n=g[k];if(null!=n){var p=Sa(l,function(a){return a.U()==m});p||(p=new xq(a,c,d,m,n),l.push(p));p.Jd.push(f[k])}}return l}function Gq(a,b,c,d){for(var e=[],f=0;f<a.g.count();f++){var g=a.g.index(f);if(g.H()==b){var k=sj(d,g.g);x(k)&&(e=e.concat(Fq(a,k,g,c)))}}return e};gm.prototype.Ef=function(a,b){var c=this;b.g=new Cq(b);Il(a,function(d,e){function f(b){var e=a.getName();ck(d,function(a,f,g){if(f)g(a,f);else{Uc(d,a);var k=new pk(e,b);el(c.g,[k]).fa(function(){g(a,f)})}})}function g(b){var e=a.getName();ck(d,function(a,f,g){f?g(a,f):(Uc(d,a),b&&(b=ij(U.bound([e,b.lower],[e,b.upper,"\uffff"]))),fl(c.g,e,b).fa(function(){g(a,f)}))})}function k(e){var f=a.getName();ck(d,function(a,g,k){Uc(d,a);if(g)k(a,g);else{var l=b.getName();u(a)||(a=[a]);for(var z=0;z<a.length;z++){var D=
a[z];qk(D)&&(D=Gq(b.g,f,D,e[z]).map(function(a){return a.Zc()}),D=dl(c.g,l,D),z==a.length-1&&D.fa(function(){k(a,g)}))}}})}var l=d.ud();"put"==l?k([e[1]]):"put:array"==l?k(e[1]):"add"==l?k([e[1]]):"add:array"==l?k(e[1]):"rm:iter"==l||"clear"==l?g(e[1]):"rm"==l&&f(e[1])})};
gm.prototype.search=function(a,b,c,d){var e=Ql(this.h,a);if(!e)throw new M('full text index catalog "'+a+'" not found.');a=e.g.query(a,b,c,d);return a?this.g.search(a):(P(this.logger,'query "'+b+'" contains only noise and search is ignored'),dk("search",null))};function Hq(a){this.name=a;this.info=null;this.h={};this.g=null}
var Iq={Accounts:{GeneratorIndex:{ydn$emails:["email","email1","email_addresses_non_primary"],ydn$phones:["phone_office","phone_alternate","phone_fax"]}},Contacts:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home","phone_mobile","phone_work","phone_other","phone_fax"]}},Leads:{FullTextIndex:{name:["name","first_name","last_name","full_name"]},GeneratorIndex:{ydn$emails:["email","email1","email2"],ydn$phones:["phone_home",
"phone_mobile","phone_work","phone_other","phone_fax"]}},Notes:{FullTextIndex:{content:["name","description"]},indexes:[{name:"contact_id"},{name:"parent",keyPath:["parent_type","parent_id"]}]}};
function Jq(a,b){return"ydn$emails"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e))if(x(b[e])){var f=gn(b[e]);f&&d.push(f)}else if(w(b[e])&&b[e][0]&&b[e][0].email_address)for(var g=b[e],k=0;k<g.length;k++)g[k]&&x(g[k].email_address)&&(f=gn(g[k].email_address))&&d.push(f);return d}}:"ydn$phones"==b?{name:b,multiEntry:!0,generator:function(b){var d=[],e;for(e in b)if(0<=a.indexOf(e)){var f=fn(b[e]);f&&d.push(f)}return d}}:null}
function Kq(a,b){if(a.g)for(var c=0;c<a.g.stores.length;c++)if(a.g.stores[c].name==b)return a.g.stores[c];var d={name:b,keyPath:"id",indexes:[{name:"account_id"},{name:"name"},{name:"date_modified"}]},e=["ydn$emails","ydn$phones","ydn$names"],c=a.h[b]||Iq[b]||{};c.indexes&&(d.indexes=d.indexes.concat(c.indexes));for(var f=c.GeneratorIndex||{},c=0;c<e.length;c++){var g=e[c],k=f[g];!k||u(k)&&0==k.length||d.indexes.push(Jq(k,g))}return d}
function Lq(a){if(a.g)return a.g;for(var b={fullTextCatalogs:[],stores:[{name:"history",indexes:[{keyPath:"type"},{keyPath:"timestamp"}]},{name:"Meta"}]},c=0;c<kq.length;c++){var d=kq[c];b.stores.push(Kq(a,d));var e=a.h[d]||Iq[d]||{};if(e.FullTextIndex)for(var f in e.FullTextIndex){var g=e.FullTextIndex[f];if(0<g.length){for(var k={name:"ft-"+d+"-"+f,lang:"en",sources:[]},l=0;l<g.length;l++)k.sources.push({storeName:d,keyPath:g[l]});b.fullTextCatalogs.push(k)}}}a.g=b;Object.freeze(a.g);return a.g}
;function Mq(a,b,c){this.domain=a;this.$=b;this.g=c||null}Mq.prototype.M=function(){return this.domain};Mq.prototype.F=function(){return this.g.id};function Nq(a){if(!a.g)return"";var b=a.g.full_name||a.g.name;if(b)return b;b=(a.g.first_name||"").trim();a=(a.g.last_name||"").trim();return b+" "+a}Mq.prototype.value=function(a){return this.g?this.g[a]:null};Mq.prototype.toString=function(){return"Record:"+this.$+":"+(this.g?this.g.id:void 0)};function Oq(a,b,c){var d=0;if(!b)return d;b.gd$city&&a[c+"_address_city"]!=b.gd$city.$t&&(a[c+"_address_city"]=b.gd$city.$t,d++);b.gd$country&&a[c+"_address_country"]!=b.gd$country.$t&&(a[c+"_address_country"]=b.gd$country.$t,d++);b.gd$postcode&&a[c+"_address_postalcode"]!=b.gd$postcode.$t&&(a[c+"_address_postalcode"]=b.gd$postcode.$t,d++);b.gd$region&&a[c+"_address_state"]!=b.gd$region.$t&&(a[c+"_address_state"]=b.gd$region.$t,d++);b.gd$street&&a[c+"_address_street"]!=b.gd$street.$t&&(a[c+"_address_street"]=
b.gd$street.$t,d++);b.gd$housename&&a[c+"_address_street_2"]!=b.gd$neighborhood.$t&&(a[c+"_address_street_2"]=b.gd$neighborhood.$t,d++);b.gd$neighborhood&&a[c+"_address_street_3"]!=b.gd$city.$t&&(a[c+"_address_street_3"]=b.gd$city.$t,d++);return d}
function Pq(a,b,c){function d(d,g){!a[c+g]||b[d]&&b[d].$t==a[c+g]||(e++,b[d]={$t:a[c+g]})}var e=0;if(!a)return 0;b||(b={});d("gd$city","_address_city");d("gd$country","_address_country");d("gd$postcode","_address_postalcode");d("gd$region","_address_state");d("gd$street","_address_street");d("gd$neighborhood","_address_street_2");d("gd$city","_address_street_3");return e}
function Qq(a,b){var c=0;!a.title||b.name&&b.name==a.title.$t||(b.name=a.title.$t,c++);for(var d=0;a.gd$email&&d<a.gd$email.length;d++){var e=a.gd$email[d];"http://schemas.google.com/g/2005#work"==e.rel?b.email1!=e.address&&(c++,b.email1=e.address):"http://schemas.google.com/g/2005#home"==e.rel?b.email2!=e.address&&(c++,b.email2=e.address):"http://schemas.google.com/g/2005#other"==e.rel&&b.email!=e.address&&(c++,b.email=e.address)}a.gd$name?(a.gd$name.gd$namePrefix&&b.salutation!=a.gd$name.gd$namePrefix.$t&&
(c++,b.salutation=a.gd$name.gd$namePrefix.$t),a.gd$name.gd$givenName&&b.first_name!=a.gd$name.gd$givenName.$t&&(b.first_name=a.gd$name.gd$givenName.$t,c++),a.gd$name.gd$familyName&&b.last_name!=a.gd$name.gd$familyName.$t&&(b.last_name=a.gd$name.gd$familyName.$t,c++),a.gd$name.gd$fullName&&b.full_name!=a.gd$name.gd$fullName.$t&&(b.full_name=a.gd$name.gd$fullName.$t,c++)):b.full_name=a.title.$t;a.gd$organization&&a.gd$organization[0]&&(d=a.gd$organization[0],d.gd$orgTitle&&d.gd$orgTitle.$t!=b.title&&
(b.title=d.gd$orgTitle.$t,c++),d.gd$orgDepartment&&d.gd$orgDepartment.$t!=b.department&&(b.department=d.gd$orgDepartment.$t,c++),d.gd$orgJobDescription&&d.gd$orgJobDescription.$t!=b.description&&(b.description=d.gd$orgJobDescription.$t,c++));if(a.gd$im)for(d=0;d<a.gd$im.length;d++)"Twitter"==a.gd$im[d].label&&b.twitter!=a.gd$im[d].address?(b.twitter=a.gd$im[d].address,c++):"Facebook"==a.gd$im[d].label&&b.facebook!=a.gd$im[d].address?(b.facebook=a.gd$im[d].address,c++):"Google Plus"==a.gd$im[d].label&&
b.googleplus!=a.gd$im[d].address?(b.googleplus=a.gd$im[d].address,c++):"Linkedin"==a.gd$im[d].label&&b.linkedin!=a.gd$im[d].address&&(b.linkedin=a.gd$im[d].address,c++);a.gContact$birthday&&b.birthdate!=a.gContact$birthday.when&&(b.birthdate=a.gContact$birthday.when,c++);for(d=0;a.gd$phoneNumber&&d<a.gd$phoneNumber.length;d++)if(e=a.gd$phoneNumber[d],e.$t)if("http://schemas.google.com/g/2005#mobile"==e.rel)b.phone_mobile!=e.$t&&(b.phone_mobile=e.$t,c++);else if("http://schemas.google.com/g/2005#work"==
e.rel)b.phone_work!=e.$t&&(b.phone_work=e.$t,c++);else if("http://schemas.google.com/g/2005#home"==e.rel)b.phone_home!=e.$t&&(b.phone_home=e.$t,c++);else if("http://schemas.google.com/g/2005#fax"==e.rel||"http://schemas.google.com/g/2005#home_fax"==e.rel||"http://schemas.google.com/g/2005#work_fax"==e.rel)b.phone_fax!=e.$t&&(b.phone_fax=e.$t,c++);else if(b.phone_other=e.$t)b.phone_other=e.$t,c++;if(a.gd$structuredPostalAddress){for(var f=e=-1,d=0;d<a.gd$structuredPostalAddress.length;d++){var g=a.gd$structuredPostalAddress[d];
"http://schemas.google.com/g/2005#work"==g.rel||g.primary?e=d:f=d}-1==e&&(f=-1);c+=Oq(b,a.gd$structuredPostalAddress[e],"primary");c+=Oq(b,a.gd$structuredPostalAddress[f],"alt")}return c}
function Rq(a,b){function c(a,c){if(g[a]){b.gd$phoneNumber||(b.gd$phoneNumber=[]);var d;a:{for(d=0;b.gd$phoneNumber&&d<b.gd$phoneNumber.length;d++)if(b.gd$phoneNumber[d].rel==c){d=b.gd$phoneNumber[d];break a}d=null}d?d.$t!=g[a]&&(d.$t=g[a],k++):(b.gd$phoneNumber.push({rel:c,$t:g[a]}),k++)}}function d(a){b.gd$im||(b.gd$im=[]);for(var c=0;c<b.gd$im.length;c++)if(b.gd$im[c].label==a)return b.gd$im[c];return null}function e(){b.gd$name||(b.gd$name={},k++)}function f(a,c){if(g[a]){b.gd$email||(b.gd$email=
[]);var d;a:{for(d=0;b.gd$email&&d<b.gd$email.length;d++)if(!(0<=l.indexOf(d))&&b.gd$email[d].address==g[a])break a;d=-1}if(0<=d){var e=b.gd$email[d];e.rel!=c&&(k++,e.rel=c);l.push(d)}else b.gd$email.push({rel:c,address:g[a]}),l.push(b.gd$email.length-1),k++}}var g=a.g,k=0;!g.name||b.title&&b.title.$t==g.name||(b.title={$t:g.name},k++);var l=[];f("email1","http://schemas.google.com/g/2005#work");f("email2","http://schemas.google.com/g/2005#home");f("email","http://schemas.google.com/g/2005#other");
g.salutation&&(e(),b.gd$name.gd$namePrefix&&b.gd$name.gd$namePrefix.$t==g.salutation||(b.gd$name.gd$namePrefix={$t:g.salutation},k++));g.first_name&&(e(),b.gd$name.gd$givenName&&b.gd$name.gd$givenName.$t==g.first_name||(b.gd$name.gd$givenName={$t:g.first_name},k++));g.last_name&&(e(),b.gd$name.gd$familyName&&b.gd$name.gd$familyName.$t==g.last_name||(b.gd$name.gd$familyName={$t:g.last_name},k++));g.full_name&&(e(),b.gd$name.gd$fullName&&b.gd$name.gd$fullName.$t==g.full_name||(b.gd$name.gd$fullName=
{$t:g.full_name},k++));if(g.twitter){var m=d("Twitter");m?m.address!=g.twitter&&(m.address=g.twitter,k++):(b.gd$im.push({label:"Twitter",address:g.twitter}),k++)}g.facebook&&((m=d("Facebook"),m)?m.address!=g.facebook&&(m.address=g.facebook,k++):(b.gd$im.push({label:"Facebook",address:g.facebook}),k++));g.googleplus&&((m=d("Google Plus"),m)?m.address!=g.googleplus&&(m.address=g.googleplus,k++):(b.gd$im.push({label:"Google Plus",address:g.googleplus}),k++));g.linkedin&&((m=d("Linkedin"),m)?m.address!=
g.linkedin&&(m.address=g.linkedin,k++):(b.gd$im.push({label:"Linkedin",address:g.linkedin}),k++));!g.birthdate||b.gContact$birthday&&b.gContact$birthday.when==g.birthdate||(b.gContact$birthday={when:g.birthdate},k++);c("phone_mobile","http://schemas.google.com/g/2005#mobile");c("phone_work","http://schemas.google.com/g/2005#work");c("phone_home","http://schemas.google.com/g/2005#home");c("phone_fax","http://schemas.google.com/g/2005#work_fax");c("phone_other","http://schemas.google.com/g/2005#other");
for(var n=-1,m=-1,p=0;b.gd$structuredPostalAddress&&p<b.gd$structuredPostalAddress.length;p++)-1==n&&"true"==b.gd$structuredPostalAddress[p].primary||"http://schemas.google.com/g/2005#work"==b.gd$structuredPostalAddress[p].rel?n=p:-1==m&&(m=p);-1==n&&0<=m&&(n=m,b.gd$structuredPostalAddress[n].primary="true",m=-1);0<=n?k+=Pq(g,b.gd$structuredPostalAddress[n],"primary"):(n={primary:"true",rel:"http://schemas.google.com/g/2005#work"},p=Pq(g,n,"primary"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=
[]),b.gd$structuredPostalAddress.push(n),k+=p));0<=m?k+=Pq(g,b.gd$structuredPostalAddress[m],"alt"):(n={},p=Pq(g,n,"alt"),0<p&&(b.gd$structuredPostalAddress||(b.gd$structuredPostalAddress=[]),b.gd$structuredPostalAddress.push(n),k+=p));return k};function Sq(a){if(u(a))return a.map(function(a){return Sq(a)});if(A(a)){var b={},c;for(c in a.name_value_list)b[c]=a.name_value_list[c].value;return b}throw Error("Invalid name_value_entries");};function Tq(a,b,c,d,e){c=ra(c,"http")?new ud(c):vd(wd(new ud,c),"https");Ad(c,"");zd(c,null);this.n=c.M();this.J=b;this.G=c.toString().replace(/\/$/,"");this.O=this.G+"/service/v4/rest.php";this.i=d;this.l=e;this.g=null;this.j=a;this.S=new Hq(this.n);this.db=new Qn(this.n,Lq(this.S));this.h=null;this.o=this.s=NaN;this.C=!1;this.history=new Fo(this.db)}E(Tq,bo);h=Tq.prototype;h.M=function(){return this.n};
h.request=function(a,b,c,d,e,f){function g(){m.execute(function(g,k){this.s=C();var l=g;if(x(l))try{g=JSON.parse(l)}catch(m){}f||!g||11!=g.number&&10!=g.number?d.call(e,g,k):this.Rc().u(function(){this.request(a,b,c,d,e,!0)},function(){d.call(e,null,new Vi(0,null,{},"Login fail"))},this)},this)}for(var k="{",l=0;l<b.length;l++)k+=(0==l?"":",")+'"'+b[l]+'":'+JSON.stringify(c[l]);k+="}";l=new Bd;l.add("method",a);l.add("input_type","json");l.add("response_type","json");l.add("rest_data",k);var m=this.j.request(new Zh(this.O,
"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},l.toString())),k=C()-this.s;0<k&&100>k?(this.s=100+this.s,Q(this.logger,"request will call after "+k+" ms."),nf(g,k,this)):g.call(this)};
function Uq(a,b,c){var d=["session","module_name"];a=[a.g?a.g.id:null,c.module_name];var e=[!1,!1];if("get_entry_list"==b)b=c.query||"",d.push("query"),a.push(b),e.push(""==b),d.push("order_by"),b=c.order_by||"",a.push(b),e.push(""==b),b=c.offset||0,d.push("offset"),a.push(b),e.push(0==b),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length),b=c.max_results||25,d.push("max_results"),
a.push(b),e.push(null!=c.max_results),b=c.deleted||0,d.push("deleted"),a.push(b),e.push(0==b),c=!!c.favorites,d.push("favorites"),a.push(c),e.push(!1==c);else if("get_available_modules"==b)c=c.filter||"",d.push("filter"),a.push(c),e.push(0==c.length);else if("get_module_fields"==b)c=c.fields||[],d.push("fields"),a.push(c),e.push(0==c.length);else if("get_entries"==b)b=c.ids||[],d.push("ids"),a.push(b),e.push(!1),b=c.select_fields||[],d.push("select_fields"),a.push(b),e.push(0==b.length),b=c.link_name_to_fields_array||
[],d.push("link_name_to_fields_array"),a.push(b),e.push(0==b.length);else for(var f in c)"module_name"!=f&&(d.push(f),a.push(c[f]),e.push(!1));for(c=e.length-1;0<=c;c--)if(e[c])d.pop(),a.pop();else break;return{keys:d,values:a}}
function Vq(a,b){var c=b.module_name;a.o=C();return Wq(a,"get_entry_list",b).B(function(a){var e=a.result_count,f=a.offset||0,g=a.entry_list,k=parseInt(a.next_offset,10);if(t(e)&&u(g)){if(0<g.length){a=Sq(g);var l=this.J,m=this.M(),n=a;if(l.h)for(var n=u(n)?n:[n],p=0;p<n.length;p++)n[p]&&Xq(l,new Mq(m,c,n[p]));this.db.put(c,a)}return 0<g.length&&e>=g.length&&k>f?(b.offset=k,Vq(this,b)):k}throw Error("Invalid REST respond on entry list query on "+c+": "+JSON.stringify(a));},a)}
function Yq(a,b){var c={module_name:b},d="module/"+b;return a.db.get("Meta",d).B(function(a){return a?a:Wq(this,"get_module_fields",c).B(function(a){a&&a.module_name&&a.module_fields?this.db.put("Meta",a,d):N(this.logger,"Invalid module for "+b+" "+wh(a));return a},this)},a)}
function Zq(a,b){var c=new Tj(b,"date_modified",null,!0);return a.db.keys(c,1).B(function(a){var c={};a[0]&&(c.query=b.toLowerCase()+".date_modified>'"+a[0]+"'");c.module_name=b;c.order_by="date_modified";a=Vq(this,c);a.u(function(a){this.logger.info(this+" module "+b+" synced, "+a+" records updated.")},function(a){var c=".";a&&(c=" with "+a.name+": "+a.message);N(this.logger,this+" module "+b+" failed"+c)},this);return a},a)}
function Wq(a,b,c,d){var e=d||0,f=new F;if(!a.g||!a.g.id)return 2>e?(Q(a.logger,"Request require login, tried "+e),a.Rc().B(function(){e++;qb(Wq(a,b,c,e),f)})):(P(a.logger,"Cannot do request, not login. Give up after "+e+" retry"),f.A()),f;d=Uq(a,b,c);a.request(b,d.keys,d.values,function(d,k){k.Da()?11==d.number&&/invalid/i.test(d.name)?(this.g=null,qb(Wq(a,b,c,e),f)):f.w(d):f.A(k.N()+" "+k.Ja())},a);return f}
h.list=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=0;c<a.length;c++){var d=a[c];if(!A(d))return tb("invalid query at "+c+"");var e=d.store;if(-1==kq.indexOf(e))return tb("invalid store name at "+c+": "+e);var f=d.index;if(!x(f)||0==f.length)return tb("index name missing in "+e);var g=null;null!=d.key?(g=d.key,"ydn$phones"==f?g=fn(g):"ydn$emails"==f&&(g=g.toLowerCase()),g=d.prefix?kj(g):U.only(g)):null!=d.keyRange&&(g=lj(d.keyRange));"id"==f?b.push(this.db.values(e,
g)):Vl(this.db,e,f)?b.push(this.db.values(e,f,g)):b.push(sb([]))}return(new jm(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};
h.search=function(a){if(!u(a)||0==a.length)return tb("invalid query");for(var b=[],c=Lq(this.S),d=0;d<a.length;d++){var e=a[d];if(!A(e))return tb("invalid query at "+d+"");var f=e.q;if(!x(f)||0==f.length)return tb("query term missing "+d+"");var g="ft-"+e.store+"-"+(e.index||"name");0<=Ta(c.fullTextCatalogs,function(a){return a.name==g})?(f=this.db.search(g,e.q),e.fetchFull&&(f=f.B(function(a){if(0<a.length){for(var b=[],c=0;c<a.length;c++)b.push(new pk(a[c].storeName,a[c].primaryKey));return this.db.values(b)}},
this)),b.push(f)):b.push(sb([]))}return(new jm(b)).u(function(b){for(var c=0;c<b.length;c++)b[c][0]?a[c].result=b[c][1]:(N(this.logger,"query "+c+" failed."),a[c].result=[]);return a},function(b){N(this.logger,"list failed "+b);return a},this)};function $q(a,b){var c=b.store;if(!x(c)||0==c.length)return tb("store name required.");var d=b.id;return x(d)&&0!=d.length?a.db.get(c,d):tb("id required.")}
function ar(a){if(a.h&&a.h.isLogin)return sb(a.h);var b=new F;a.db.get("Meta","info/server").fa(function(a){a&&a.version?(this.h=a,b.w(a)):this.request("get_server_info",[],[],function(a,c){if(0==c.N())this.h=null,b.A("service "+this.O+" not responding");else if(c.Da()){var f=Xi(c);if((!a||!a.version)&&x(f))try{a=JSON.parse(f)}catch(g){a=Xi(c)}a&&a.version?(f=a,this.h=qc(f),b.w({info:f,about:br(this)}),this.db.put("Meta",f,"info/server")):(this.h=null,b.A("invalid respond "+Xi(c)))}else this.h=null,
b.A("request fail "+c.N()+" "+c.Ja())},this)},a);return b}function cr(a){var b=new F;a.request("get_available_modules",["filter"],["all"],function(a){b.w(a)},a);return b}function br(a){var b=a.j,b=b instanceof fo&&/proxy/.test(b.h);return{baseUrl:a.G,domain:a.M(),userName:a.i,isLogin:a.isLogin(),hostPermission:!b}}function dr(a){return(new jm([ar(a),cr(a)])).B(function(a){return{serverInfo:a[0][1],availableModules:a[1][1],about:br(this)}},a)}
function er(a,b,c){var d=[],e;for(e in c)d.push({name:e,value:c[e]});c={module_name:b,name_value_list:d};window.console.log("set_entry",c);return Wq(a,"set_entry",c).B(function(a){if(a&&a.id){var c={id:a.id};a=a.entry_list||{};for(var d in a)c[d]=a[d].value;window.console.log("set_entry result",c);this.db.put(b,c);return c}throw Error("creating "+b+" entry fail");},a)}
function fr(a,b,c){window.console.log(b,c);if(c){var d=gr(b,a.M(),void 0,c.id),e=d.$,f=new Mq(a.M(),e,c);P(a.logger,"synchronizing "+b+" to "+f);if((f.g?+new Date(f.g.date_modified):NaN)==d.h){var g=new Do("update-gdata-record");Eo(g,c);b=b.data;A(b)&&Rl(b);Qq(b,c)&&er(a,e,c).u(function(a){A(a)?g.g=Rl(a):g.g=a;this.history.add(g)},function(a){N(this.logger,"Fail to put record "+c.id+" to server "+a.message)},a)}}}
function hr(a,b){for(var c=ir(b),d=0;d<c.length;d++)0<=kq.indexOf(c[d].$)&&a.db.get(c[d].$,c[d].g).B(function(a){fr(this,b,a)},a)}function jr(a,b,c){var d={};Qq(c,d);return er(a,b,d)}h.isLogin=function(){return!(!this.g||!this.g.id)};
h.update=function(){if(this.j&&this.j instanceof fo)this.logger.info(this+" updating skipped since no direct connection is not available.");else{var a;if(this.C)cf(this.logger,"Modules are already updating now at "+a+" / "+kq.length);else{this.C=!0;this.o=C();a=0;var b=this,c=function(){var d=kq[a];d?(P(b.logger,"Syncing module "+d),a++,Zq(b,d).fa(function(){b.o=C();r.setTimeout(function(){c()},500)})):(cf(b.logger,"Updating module done"),b.C=!1)};c();r.setTimeout(function(){2E3<b.o-C()&&c()},2E3)}}};
h.Rc=function(a,b){a&&(this.i=a);b&&(this.l=b);if(!this.i)return tb("username required.");if(!this.l)return tb("password required.");var c=new F;this.request("login",["user_auth","application_name","name_value_list"],[{user_name:this.i,password:this.l},"Yathit CRM",{language:"",notifyonsave:"false"}],function(a,b){if(a&&a.id)this.g=qc(a),c.w(a);else if(a&&a.description)c.A(a.description+" ("+a.name+")");else{var f=b.N()+" "+b.Ja()+" "+Xi(b);c.A("Login fail: "+f.substr(0,200))}},this,!0);return c};
function kr(a){var b=new F;a.request("logout",[],[],function(a,d){this.g=null;d.Da()?(N(this.logger,"Logout request fail with "+d.N()+" "+d.Ja()),b.w(!0)):b.A(d.N()+" "+d.Ja())},a,!0);return b}
function lr(a){function b(){f.request(new Zh(e.toString())).execute(function(a,b){/sugarcrm/i.test(Xi(b))?d.A("Look like SugarCRM web site, but REST V4 API is not available."):200==b.N()?d.A("Not a SugarCRM web site"):d.A("Invalid respond, "+b.N())})}function c(a,b){var c=new Bd;c.add("method","get_server_info");c.add("input_type","json");c.add("response_type","json");c.add("rest_data","{}");f.request(new Zh(a,"POST",{},{"Content-Type":"application/x-www-form-urlencoded"},c.toString())).execute(b)}
var d=new F;a=a.trim();ra(a,"http")||(a="https://"+a);var e=new ud(a);Ad(e,"");zd(e,null);var f=Xh("proxy"),g=e.ga();a=e.wc;/rest.php$/.test(a)||(/index.php$/.test(a)?yd(g,a.replace("/index.php","")):yd(g,""));var k=g.toString();(function(a,b){c(a+"/service/v4/rest.php",function(a,c){if(200==c.N()){if(!a||!a.version){var d=Xi(c);if(x(d))try{a=JSON.parse(d)}catch(e){b(null,c);return}else a=d}a&&a.version&&b(a,c)}else b(0,c)})})(k,function(a,f){a?(a.isLogin=!1,a.userName=null,a.domain=g.M(),a.baseUrl=
k,d.w(a)):0==a?"https"==e.ic?(vd(g,"http"),setTimeout(function(){c(g.toString(),function(a,c){c.Da()?d.w(a):b()})},100)):d.A(f.N()+" "+f.Ja()+" "+Xi(f)):b()});return d}h.toString=function(){return"SugarClient:"+this.n};function mr(a){Error.captureStackTrace?Error.captureStackTrace(this,mr):this.stack=Error().stack||"";a&&(this.message=String(a))}E(mr,Error);mr.prototype.name="ydn.gdata.error.InvalidAtomFormatError";function nr(a){Error.captureStackTrace?Error.captureStackTrace(this,nr):this.stack=Error().stack||"";a&&(this.message=String(a))}E(nr,Error);nr.prototype.name="ydn.gdata.error.IncompatibleError";var or="atom app gd xhtml batch openSearch".split(" ");function pr(a){if(!t(this.type))throw new Gh("Abstract class cannot be instantiated.");if(x(a))a={id:{$t:a}};else if(!t(a.id)||!x(a.id.$t))throw new Bh("Invalid GDataFeed");this.id=a.id.$t;this.data=a;t(this.data.entry)?u(this.data.entry)||(this.data.entry=[this.data.entry]):this.data.entry=[];this.j={};this.n={};a=u(this.data.entry)?this.data.entry.length:0;for(var b=0;b<a;b++){var c=this.data.entry[b],c=c.id?c.id.$t:c.Dg?c.Dg.$t:"";if(0==c.length)throw new mr("entry "+b);if(0==c.match(/\w+$/)[0].length)throw new mr("entry "+
b+" of "+c);var d=c.match(/\w+$/)[0];this.j[c]=this.data.entry[b];this.n[d]=this.data.entry[b]}this.i=!0;this.C=[];this.s=new jh(function(){this.dispatchEvent(qr)},300,this);this.lg=null;this.h=NaN;this.o=void 0}E(pr,rh);var qr="i";h=pr.prototype;h.tf=function(){return this.kind};h.logger=R("ydn.gdata.Feed");
h.kb=function(a){var b=new F;Q(this.logger,this+" receiving a task, ready: "+this.i);var c=this;this.i?(this.i=!1,b.fa(function(){Q(c.logger,c+" finish the task.");c.i=!0;var a=c.C.shift();a&&a.call(this)}),a.call(this,b)):this.C.push(na(B(a,this),b));return b};h.lg=null;function rr(a){var b;if(!(b=a.lg))if(a=a.ee(),t(a)){b=a;for(var c=0;c<Pi.length;c++){var d=(0,Pi[c])(a);if(d){b=d;break}}Q(Ni,"Resolving "+a+" to "+b);b=Oi[b]||null}else b=Oi["default"];return b}h.Ye=function(){this.dispatchEvent("e")};
h.Of=function(){return or};h.Fg=function(a){a.g()||N(this.logger,"Batch submission failed. "+a.responseText)};
h.nc=function(a,b){var c=this.Of(),d=void 0;t(c)||(c=or);for(var e="",f=0;f<c.length;f++)var g=c[f],e=0==f?e+(' xmlns="'+mp[g]+'" '):e+(" xmlns:"+g+'="'+mp[g]+'" ');d=t(d)?"<id>"+d+"</id>":"";d=zh("<feed"+e+">"+d+"</feed>");for(f=c=0;e=this.pc(f);f++)if(Cp(e))Ap(e,"");else if(Dp(e.data)){var g="delete"==Bp(e.data),k=!(!e.data.id||!e.data.id.$t);Ap(e,null);var l=yp(new tp(null,"entry",e.data),d.documentElement),m=l.getElementsByTagNameNS(op("batch"),"operation"),m=m[0]?m[0]:l.appendChild(d.createElementNS(op("batch"),
"operation")),l=d.createAttribute("type");l.nodeValue=g?"delete":k?"update":"insert";m.setAttributeNode(l);Ap(e,"committed");c++;a&&a.message({id:this.sf(),code:"operation: "+l.nodeValue+" "+e})}if(0==c)return cf(this.logger,this+" Nothing to commit."),0;cf(this.logger,this+" committing "+c+" entries.");d=Ah(d);b?(this.logger.info("Commit ignored for dry run."),window.console.log(d)):(e=B(this.Fg,this),this.J&&this.J.stop(),f=rr(this),g=this.we(),f.send(g,e,{method:"POST",body:d,headers:{"Content-Type":"application/atom+xml"},
params:{}}));return c};h.de=function(a){return new zp(a)};h.pc=function(a){return 0<=a&&a<this.data.entry.length?this.de(this.data.entry[a]):null};h.rf=function(a){return(a=this.j[a])?this.de(a):null};
h.save=function(a){if(this.O){var b=this;this.l||(this.l=new jh(function(){this.kb(function(a){var d=b.toJSON(),e=b.data.entry,f,g,k;b.O.S(function(a){a.put("ydn.gdata.feed",d).Dc(function(a){throw a;}).B(function(){f=!0});a.put("ydn.gdata.entry",e).Dc(function(a){throw a;}).B(function(a){k=a.length;g=!0})},["ydn.gdata.feed","ydn.gdata.entry"],"readwrite").u(function(){f&&g?Q(this.logger,b+": saved "+k+" entries."):Q(this.logger,b+": saved failed"+e.length+" entries.");a.w(!0)},function(a){throw a;
},this)})},1E3,this));a?lh(this.l):kh(this.l)}};
function sr(a,b,c){c=c||new F;var d=rr(a);if(!d)return N(a.logger,a+": No transport available."),c.A(Error("No transport available.")),c;d.send(b,function(b){if(200==b.status){a.h=C();b=b.Q?of(b.Q.responseText):void 0;if(!b.feed)throw new mr("feed missing.");var d=b.feed;if(!t(d))throw b=S(d),new mr(b.substr(0,50));if(d.id.$t!=a.F())throw new nr(d.id.$t+" is not "+a.F());var g=b=0,k=u(d.entry)?d.entry:d.entry?[d.entry]:[];b=k.length;0==b&&Q(a.logger,a+": fetch return no result.");for(var l=0;l<b;l++){for(var m=
a,n=k[l],p=n instanceof zp?n:m.de(n),q=p,s=0;s<q.mc.length;s++)null!=q.data[q.mc[s]]&&!u(q.data[q.mc[s]])&&(q.data[q.mc[s]]=[q.data[q.mc[s]]]);Ap(q,null);q=q.data;q.batch$status&&(q.batch$status=void 0);q.batch$operation&&(q.batch$operation=void 0);var q=p.F(),v=m.rf(q);(s=!!v)?v.update(p):(v=p.id.match(/\w+$/)[0],m.data.entry.push(n),m.j[q]=p.data,m.n[v]=p.data);!s&&g++}cf(a.logger,a+" "+b+" ("+g+" new) entries received");a.Ye();(d=Go(d,"next"))?(a.save(),kh(a.s),a.o=d.$t,sr(a,d.href,c)):(0<b&&(a.save(),
kh(a.s)),c.w(!0))}else N(a.logger,"Fetching "+b.uri+" failed: "+b.status),c.A(!1)});return c}h.toString=function(){return this.type+":"+this.id};function tr(a,b){a.rg&&b.g.set("v",a.rg);b.g.set("alt","json");b.g.set("showdeleted",!0)}
function ur(a,b){var c="lu",d=!1;if("lf"==c){if(a.h){var d=!0,e=new Date(a.h),e=e.toISOString();b.g.set("updated-min",e)}}else if("lu"==c){for(var e=0,f=-1,g,k=0;g=a.pc(k);k++)g=g.data.updated.$t,e<g&&(e=g,f=k);if(e=a.pc(f))e=new Date(e.data.updated.$t),e=new Date(1+ +e),e=e.toISOString(),b.g.set("updated-min",e)}else"lo"==c?(b.g.set("orderby","lastmodified"),a.h&&b.g.set("max-results","1")):c="no";Q(a.logger,a+" updating "+(d?"continue":"begin")+" by "+c)}h.Ch=jp.prototype.Yd;h.F=jp.prototype.F;
h.Eh=jp.prototype.xh;h.Dh=jp.prototype.wh;h.ee=function(){return this.Eh()||""};h.sf=function(){return this.id};h.we=function(){return this.Dh()};function vr(a){return a.kb(function(a){var c=new ud(this.ee());tr(this,c);ur(this,c);this.R(ph,!1);sr(this,c.toString()).fa(function(c){sh(this);c?a.w(!0):a.A(void 0)},this)})}h.update=function(a){return a||!0!==("undefined"==typeof this.g?null:(this.g&ph)==ph)?vr(this):(Q(this.logger,this+" already loaded."),sb(!1))};
h.count=function(a){if(a){a=0;for(var b,c=0;b=this.pc(c);c++)Cp(b)||"deleted"==Bp(b.data)||a++;return a}return this.data.entry.length};h.toJSON=function(){return{id:this.id,key:this.sf(),last_fetch_next_uri:this.o,last_fetch:this.h}};function wr(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{mb:b,cb:a}}function xr(a,b){var c=wr(a),d=wr(b);if(t(c.mb)&&t(d.mb)&&0!=c.mb.length&&0!=d.mb.length&&c.mb!==d.mb)return 0;if(t(c.bb)&&0!=c.bb.length){if(t(d.bb)&&0!=d.bb.length){if(c.bb.length>=d.bb.length){for(var e=0;e<d.bb.length;e++)if(c.bb[e]!=d.bb[e])return 0;return 1}for(e=0;e<c.bb.length;e++)if(c.bb[e]!=d.bb[e])return 0}return-1}return 1}
function yr(a,b){if(!a||!b||0==a.length||0==b.length)return 0;a=a.trim();b=b.trim();var c=wr(a),d=wr(b);return c.mb&&c.cb&&c.mb==d.mb&&c.cb==d.cb?6<=c.cb.length?1:4<=c.cb.length?0.8:0.4:c.cb&&4<=c.cb.length&&c.cb==d.cb?8<=c.cb.length?0.8:4<=c.cb.length?0.6:0.4:0};function zr(a){zp.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{Nh:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}E(zr,zp);zr.prototype.logger=R("ydn.gdata.m8.Entry");zr.prototype.g="3.0";zr.prototype.type="m8";function Ar(a){if(!t(this.kind))throw new Gh("Abstract class cannot be instantiated.");pr.call(this,a);this.user_id=this.F()}E(Ar,pr);h=Ar.prototype;h.tf=function(){return this.kind};h.rg="3.0";h.type="m8";h.toString=function(){return"Feed:"+this.kind+":"+this.user_id};h.ee=function(){return"https://www.google.com/m8/feeds/"+this.tf()+"s/"+this.user_id.replace("@","%40")+"/full?v=3.0"};
h.we=function(){var a=Ar.m.we.call(this);return a?a:"https://www.google.com/m8/feeds/"+this.tf()+"s/"+this.user_id.replace("@","%40")+"/full/batch?v=3.0"};var Br=or.concat(["gContact"]);Ar.prototype.Of=function(){return Br};function Cr(a,b,c,d,e,f){this.scheme=a;this.domain=b;this.$=c;this.g=d;this.i=y(e)?e:NaN;this.h=y(f)?f:NaN}function Dr(a){if(!A(a)||!x(a.value))return null;var b=Er(a.value);if(!b)return null;var c=NaN,d=NaN;if(x(a.label)){a=a.label;var e=a.indexOf("#"),f=a.indexOf("-");0<e&&0<f&&f>e&&(c=parseInt(a.substring(e,f),10),d=parseInt(a.substring(f),10))}return new Cr(b[1],b[2],b[3],b[4],c,d)}function Er(a){return a?a.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null}
Cr.prototype.U=function(){return this.scheme+"://"+this.domain+"/"+this.$+"/"+this.g};function Fr(a){zr.call(this,a)}E(Fr,zr);h=Fr.prototype;h.kind="contact";h.logger=R("ydn.gdata.m8.ContactEntry");h.qf=function(){return"contact"};h.getName=function(a){var b=a?"":this.ad();if(a||0==b.length)a=this.data.gd$name,A(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return va(b)};function Gr(a){var b=a.data.gd$email;a=[];for(var b=u(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function Hr(a){a=a.data.gd$phoneNumber;a=u(a)?a:A(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!ta(a[c].$t)&&b.push(a[c].$t);return b}h.ye=function(){var a=Fr.m.ye.call(this);if(a.ydn$emails||a.ydn$xp||a.ydn$externalIds)a==this.data&&(a=Rl(this.data)),delete a.ydn$emails,delete a.ydn$xp,delete a.ydn$externalIds;return a};h.mc="link category gd$email gd$im gd$organization gd$phoneNumber gd$structuredPostalAddress gd$formattedAddress".split(" ");
function Ir(a,b){function c(a){var b=Sa(e,function(b){return b.address===a.address});b?b.rel=t(a.rel)?a.rel:b.rel:d(a)}function d(a){a=Rl(a);f&&delete a.primary;t(void 0)&&(a.rel=void 0);e.push(a)}for(var e=[Rl(a.data.gd$email[0])],f=!!a.data.gd$email[0].primary,g=1;g<a.data.gd$email.length;g++)c(a.data.gd$email[g]);for(g=0;g<b.length;g++)c(b[g]);g=yl(e,a.data.gd$email);g||(a.data.gd$email=e);return!g}
function Jr(a,b){function c(a){var b=Pa(e,function(b){return yr(b.$t,a.$t)}),c=Rh(b);if(0.4<c.value){var b=e[c.index],f=t(a.rel)?a.rel:b.rel;1==c.value?(b.rel=f,b.$t=a.$t):t(a.rel)&&t(b.rel)&&b.rel!==a.rel?d(a,f):(b.rel=f,c=xr(b,a),-1==c?b.$t=a.$t:0==c&&(b.$t=a.$t))}else d(a)}function d(a,b){a=Rl(a);f&&delete a.primary;t(b)&&(a.rel=b);e.push(a)}for(var e=[Rl(a.data.gd$phoneNumber[0])],f=!!a.data.gd$phoneNumber[0].primary,g=1;g<a.data.gd$phoneNumber.length;g++)c(a.data.gd$phoneNumber[g]);for(g=0;g<
b.length;g++)c(b[g]);g=yl(e,a.data.gd$phoneNumber);g||(a.data.gd$phoneNumber=e);return!g}h.ef=function(a,b){if("gd$phoneNumber"==a){if(null!=this.data.gd$phoneNumber)return Jr(this,b);this.data.gd$phoneNumber=Rl(b);return!0}if("gd$email"==a){if(null!=this.data.gd$email)return Ir(this,b);this.data.gd$email=Rl(b);return!0}return Fr.m.ef.call(this,a,b)};
function gr(a,b,c,d){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=0;e<a.length;e++){var f=Dr(a[e]);if(f&&!("sugarcrm"!=f.scheme||b&&b!=f.domain||d&&d!=f.g||c&&c!=f.$))return f}return null}function ir(a){a=a.data;a=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var b=[],c=0;c<a.length;c++){var d=Dr(a[c]);d&&b.push(d)}return b};function Kr(a){Ar.call(this,a)}E(Kr,Ar);h=Kr.prototype;h.logger=R("ydn.gdata.m8.ContactFeed");h.kind="contact";h.Ye=function(){Kr.m.Ye.call(this)};h.rf=function(a){return Kr.m.rf.call(this,a)};h.de=function(a){return new Fr(a)};h.pc=function(a){return Kr.m.pc.call(this,a)};h.ee=function(){return"https://www.google.com/m8/feeds/contacts/"+this.F()+"/full"};h.sf=function(){return"http://www.google.com/m8/feeds/contacts/"+this.F().replace("@","%40")};function Lr(a){function b(a){ra(a,"atom:")&&(a=a.substring(5,a.length));return a.replace("#text","$t").replace(/:/g,"$")}x(a)&&(a=zh(a));var c={};if(1==a.nodeType){if(0<a.attributes.length)for(var d=0;d<a.attributes.length;d++){var e=a.attributes.item(d);c[b(e.nodeName)]=e.nodeValue}}else 3==a.nodeType&&(c=a.nodeValue);if(a.hasChildNodes())for(d=0;d<a.childNodes.length;d++){var e=a.childNodes.item(d),f=b(e.nodeName);if("undefined"==typeof c[f])"content"==f?(c[f]={$t:Ah(e)},e.namespaceURI&&(c[f].xmlns=
e.namespaceURI)):c[f]=Lr(e);else{if("undefined"==typeof c[f].length){var g=c[f];c[f]=[];c[f].push(g)}c[f].push(Lr(e))}}return c};function Mr(a,b){this.id=b.replace("@","%40");this.client=this.g=null;this.i=new mh(function(){cf(this.logger,"updating gdata "+this);Nr(this).u(function(a){this.logger.info(this+" synced, "+a+" new entries updated.")},function(){N(this.logger,this+" update failed.")},this)},6E4,this);this.j=a;this.h=null}h=Mr.prototype;h.logger=R("ydn.ds.gdata.GData");h.update=function(){nh(this.i)};h.K=function(){return this.j};function Or(a){var b=new F;a.execute(function(a,d){a?b.w(a):b.A(d)});return b}
function Pr(a,b){var c=(a.client?a.client:Xh("gse")).request(b);return Or(c).u(function(a){a=a.feed;if(!a.entry)return 0;for(var b=(new Kr(a)).Ch("next"),c=a.entry.length,g=!!this.h,k=0;g&&k<c;k++){var l=a.entry[k];l.gContact$externalId&&this.h(l)}return this.K().put(this.H(),a.entry).B(function(){return b?Pr(this,new Zh(b.href)).B(function(a){return c+a},this):c},this)},function(a){N(this.logger,"fetching fail "+(a?a.N()+" "+a.Ja():""))},a)}h.getParams=function(){return{alt:"json"}};
h.get=function(a){return x(a)&&0!=a.length?this.K().get(this.H(),a):tb("invalid key")};h.put=function(a){return this.K().put(this.H(),a)};h.qg=function(a){return new zp(a)};function Qr(a,b){return a.qg(b).nc().B(function(a){a=Lr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+wh(a));this.K().put(this.H(),b);return b},a)}
function Nr(a){if(!a.K().getName())return tb(Error("database not ready"));if(!a.g){var b=new Tj(a.H(),"updated.$t",null,!0);a.g=a.K().keys(b,1).B(function(a){var b=this.getParams();b.orderby="lastmodified";a[0]?(b.sortorder="descending",a=(new Date(1+ +new Date(a[0]))).toISOString(),b["updated-min"]=a):b.sortorder="ascending";return Pr(this,new Zh(Rr(this)+"/full","GET",b)).fa(function(){this.g=null},this)},a)}return a.g}h.toString=function(){return"GData:contact:"+this.id.replace("%40","@")};function Sr(a,b){Mr.call(this,a,b)}E(Sr,Mr);Sr.prototype.H=function(){return"contact"};Sr.prototype.getParams=function(){var a=Sr.m.getParams.call(this);a.v="3.0";return a};function Rr(a){return"https://www.google.com/m8/feeds/contacts/"+a.id}Sr.prototype.qg=function(a){var b=!!a.id;b||(a.id={$t:Rr(this)+"/base/0"});var c=new Fr(a);b||delete a.id;return c};function Tr(a,b){var c=U.only(b.U());return a.K().values(a.H(),"ydn$externalIds",c).B(function(){},a)}
function Ur(a,b,c){return a.K().get(a.H(),b).B(function(a){if(a){if(!c||!c.label||!c.value)return tb("invalid external_id_data");var e=c.label,f=c.value;a.gContact$externalId=u(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var g=new Fr(a),k=!1,l=0;l<a.gContact$externalId.length;l++)if(a.gContact$externalId[l].value==f){a.gContact$externalId[l].label=e;k=!0;break}k||a.gContact$externalId.push({label:e,value:f});Ap(g,"modified");return g.nc().B(function(a){a=
Lr(a);var b=a.entry;if(!b||!b.id)throw Error("Invalid respond on saving gdata "+wh(a));this.K().put(this.H(),b);return b},this)}throw Error("gdata entry "+b+" not found");},a)};function Vr(a){this.g=a;this.i=0;this.j=[];this.l=[0,0,0,0];this.h=new Kinetic.Layer;a=this.g/2;var b=a/3;this.n=[a,a,b,this.g-b];this.o=[a,b,this.g-b,this.g-b]}Vr.prototype.clear=function(){this.h=new Kinetic.Layer};var Wr=Math.pow(2,2),Xr=Math.pow(2,3),Yr=Math.pow(2,4),Zr=Math.pow(2,5);Vr.prototype.R=function(a,b){this.i=b?this.i|a:this.i&~a};
function $r(a){a.clear();for(var b=[["#C2C2C2","#6B6B6B","#525252","#3D3D3D"],["#FAFAFA","#D8D8D8","#D8D8D8","#C2C2C2"],["#FCCA03","#DD1812","#0140CA","#16A61E"]],c=["m252,324c0,-59.647 48.354,-108 108,-108c26.90799,0 51.51501,9.843 70.42401,26.121c1.03198,-8.564 1.57599,-17.27901 1.57599,-26.121c0,-119.126 -96.43701,-215.722 -215.49899,-215.994c40.89099,0.137 73.99899,33.321 73.99899,74.244c0,41.007 -33.24301,74.25 -74.25,74.25c-41.008,0 -74.25,-33.243 -74.25,-74.25c0,-40.979 33.19701,-74.203 74.16701,-74.248c-0.05602,0 -0.11201,-0.002 -0.16701,-0.002c-119.294,0 -216,96.707 -216,216c0,8.843 0.544,17.55701 1.577,26.121c18.908,-16.278 43.515,-26.121 70.423,-26.121c59.646,0 108,48.353 108,108c0,37.93399 -19.561,71.29401 -49.14301,90.56c26.127,11.21701 54.90701,17.44 85.14301,17.44s59.01599,-6.22299 85.14301,-17.44c-29.582,-19.26599 -49.14301,-52.62601 -49.14301,-90.56z",
"m142,74.25c0,41.007 33.242,74.25 74.25,74.25c41.00699,0 74.25,-33.243 74.25,-74.25c0,-40.923 -33.108,-74.107 -73.99899,-74.244c-0.112,0 -0.22301,-0.004 -0.334,-0.004c-40.97,0.045 -74.16701,33.269 -74.16701,74.248z","m180,324c0,-59.647 -48.354,-108 -108,-108c-26.908,0 -51.515,9.843 -70.424,26.121c9.366,77.69 59.967,142.67798 129.28099,172.43799c29.582,-19.26498 49.14301,-52.625 49.14301,-90.55899z","m430.42401,242.121c-18.909,-16.278 -43.51602,-26.121 -70.42401,-26.121c-59.646,0 -108,48.353 -108,108c0,37.93399 19.561,71.29401 49.142,90.56c69.315,-29.76199 119.91602,-94.74899 129.28201,-172.439z"],
d=b[0].slice(),e=[Wr,Xr,Yr,Zr],f=0;f<e.length;f++)(a.i&e[f])==e[f]&&(d[f]=b[2][f]);b=new Kinetic.Group({scaleX:a.g/435,scaleY:a.g/435});e=new Kinetic.Group;for(f=0;f<c.length;f++){a.j[f]=new Kinetic.Path({data:c[f],fill:d[f]});if(0<a.l[f]){var g=a.g/19*8,g=new Kinetic.Text({x:a.n[f]-g/4,y:a.o[f]-g/2,text:String(a.l[f]),fontSize:g,fontFamily:"sans-serif",fill:"white"});e.add(g)}b.add(a.j[f])}a.h.add(b);a.h.add(e);return a.h};function as(a){this.g=document.createElement("div");this.h=a||19;this.i=new Vr(this.h);this.j=new jh(function(){this.render()},100,this);chrome.runtime.onSuspend&&chrome.runtime.onSuspend.addListener(function(){chrome.browserAction.setTitle({title:"suspended"});this.R(Xr,!1);this.R(Yr,!1);this.R(Zr,!1);this.R(Wr,!1);this.render()}.bind(this))}as.prototype.p=function(){return this.g};as.prototype.R=function(a,b){this.i.R(a,b);lh(this.j)};
as.prototype.render=function(){this.g.parentElement||document.body.appendChild(this.g);(new Kinetic.Stage({container:this.g,width:this.h,height:this.h})).add($r(this.i));if(chrome.browserAction){var a=this.g.querySelector("canvas"),b=a.getContext("2d");chrome.browserAction.setIcon({imageData:b.getImageData(0,0,a.width,a.height)})}};function zo(a,b){this.g=a;this.filter=b||null;var c=this;setTimeout(function(){bs(c)},6E5*Math.random())}
function bs(a){var b=a.g.getName(),c={"Content-Type":"application/json"};a.g.values("log",null,20).B(function(a){if(0!=a.length){var e=a.map(function(a){return a.key});a=JSON.stringify(a);a=new Zh("https://mhardartway.s3.amazonaws.com/"+(b+"/"+e[0]),"PUT",null,c,a);var f=Xh(),e=e.map(function(a){return new pk("log",a)});f.request(a).execute(function(a,b){b.Da()&&this.g.remove(e).B(function(a){a==e.length&&bs(this)},this)},this)}},a)}zo.prototype.log=function(){};function cs(){this.S=null;this.g={};this.h=null;var a=this.J=new Vh,b=chrome.extension.getURL(Zn);a.s=b;this.G=new Rn;this.i=this.o=this.l=this.s=null;this.C=new vg(new zg,"XMLHttpRequest"+location.host);this.n=new as;chrome.permissions.onAdded.addListener(this.dh.bind(this))}h=cs.prototype;h.logger=R("ydn.crm.app.App");
h.dh=function(a){for(var b=(a=a.origins)?a.length:0,c=0;c<b;c++){var d=a[c].match(/https:\/\/([^\/]+)/);if(d){var d=d[1],e=this.g[d];if(e&&(cf(this.logger,"host permission granted to "+e),e.j instanceof fo)){var f=Xh("default");this.g[d]=new Tq(f,e.J,e.G,e.i,e.l);this.g[d].update()}}}};h.init=function(){P(this.logger,"init "+this);this.n.R(Wr,!0);so||(Ao(),so=new ho(vo(),void 0,"https://yathit-app.appspot.com",1,!0),Ti(so,Yh))};
function ds(a,b){function c(a){return a.Rc().B(function(){var b=a.isLogin()?a.i+"@":" (not login) ";this.logger.info("connected to sugarcrm client: "+b+e);a.isLogin()&&(this.g[e]=a,this.C.set(k,l),b=Object.keys(this.g),Xn(this.G,b),a.update(),es(this));return br(a)},this)}var d=b.baseUrl,e=b.domain||d;if(!e)return tb("domain or url required.");e=e.trim();ra(e,"http")&&(e=(new ud(e)).M());/\//.test(e)&&(e=(new ud("https://"+e)).M());if(d&&(d=d.trim(),!ra(d,"http"))){var d=d.replace(/:?\/\//,""),f=
new ud("https://"+d);f.wc||yd(f,"/");d=f.toString()}var g=a.g[e],k="sugar-client-"+e,l=a.C.get(k)||{};if(g)return g.isLogin()?sb(br(g)):c.call(a,g);var m=b.userName||l.userName;d||(d=l.base_url);d||(d="https://"+e+"/");if(!m)return P(a.logger,"username not found in "+JSON.stringify(b)),tb("username required");var n=b.password;n?b.hashed||(n=CryptoJS.MD5(n).toString()):n=l.password;if(!n)return P(a.logger,"password not found in "+JSON.stringify(b)),tb("password required.");l.userName=m;l.password=
n;l.base_url=d;var f={origins:[d+"/"]},p=new F;chrome.permissions.contains(f,function(b){b||N(a.logger,"host permission required for "+d);b=b?Xh("default"):Xh("proxy");g=new Tq(b,a,d,m,n);qb(c.call(a,g),p)});return p}
function fs(a,b,c,d){return 0<=jq.indexOf(b)?a.h.get(c).B(function(a){if(a){var f=jq[jq.indexOf(b)];return jr(d,f,a).B(function(a){if(a&&a.id)return a;throw Error("Set Entry to "+f+" failed");},this)}throw Error("contact entry "+c+" not found");},a):tb(new Bh("invalid module name "+b))}function Xq(a,b){var c=new Cr("sugarcrm",b.M(),b.$,b.F());Tr(a.h,c).B(function(a){for(var c=0;c<a.length;c++){var f=a[c];0<Rq(b,f)&&this.h.put(f)}},a)}
function es(a){var b=!1,c;for(c in a.g)if(a.g[c].isLogin()){b=!0;break}a.n.R(Wr,!0);a.n.R(Zr,a.isLogin());a.n.R(Xr,b)}function gs(a,b){if(!b)return tb("domain required");a.C.remove("sugar-client-"+b);return Wn(a.G).B(function(a){a=a||[];var d=a.indexOf(b);0<=d&&(a.splice(d,1),Xn(this.G,a));new F;return this.g[b]?kr(this.g[b]).B(function(){delete this.g[b];this.logger.info("SugarCRM "+b+" removed.");es(this);return!0},this):!1},a)}
h.lh=function(a){for(var b=u(a.gContact$externalId)?a.gContact$externalId:[a.gContact$externalId],c=0;c<b.length;c++)if(b[c]&&b[c].value&&b[c].label){var d=Er(b[c].value);d&&"sugarcrm"==d[1]&&(d=d[2],this.g[d]&&hr(this.g[d],new Fr(a)))}};function hs(a){a.h=new Sr(a.G.g,a.i.email);var b=Xh("gse");a.h.client=b;a.h.h=a.lh.bind(a);a.h.update()}
function is(a,b){var c=new F,d=b.email||"";if(a.i&&a.i.email==d)return P(a.logger,"already running for "+d),c.w(a.i),c;a.i=b;a.i.updated=C();d?(a.logger.info(d+" login to YDN server"),Bo(a),Sn(a.G,b.Id.$t),hs(a),Wn(a.G).B(function(a){a=a||[];for(var b=0;b<a.length;b++)a[b]&&ds(this,{domain:a[b]})},a),c.w(a.i),a.isLogin()?(a.n.R(Zr,!0),chrome.browserAction.setTitle({title:"Ready"})):(a.n.R(Zr,!1),chrome.browserAction.setTitle({title:"Login required."}))):(a.logger.info("Not login to YDN server"),c.w(a.i),
a.n.R(Zr,!1),chrome.browserAction.setTitle({title:"Login required."}));return c}function js(a){var b=new F;Co().request(new Zh("/token","DELETE")).execute(function(a,d){d.Da()?(this.l=this.s=null,b.w(null)):b.A("error "+d.Ja())},a);return b}
function ks(a,b){var c=A(b)?b:{last_login:"1"},d=Co(),c=new Zh("/audit","GET",c),e=new F;d.request(c).execute(function(a,b){if(b.Da()){if(a.LastLoginRecord){var c=a.LastLoginRecord;if(c.timestamp){var d;d=c.timestamp-C();d=Math.abs(d);if(6E4>d)d="0 minutes";else{var m=Math.floor(d/864E5);d%=864E5;var n=Math.floor(d/36E5),p=Math.floor(d%36E5/6E4),q=Ud(String(m)),s=Ud(String(n)),v=Ud(String(p));d=m*(n+p)?" ":"";var z=n*p?" ":"",m=Ge("{COUNT, plural, =0 {}=1 {{TEXT} day}other {{TEXT} days}}",m,q),n=
Ge("{COUNT, plural, =0 {}=1 {{TEXT} hour}other {{TEXT} hours}}",n,s),p=Ge("{COUNT, plural, =0 {}=1 {{TEXT} minute}other {{TEXT} minutes}}",p,v);d=m+(d+(n+(z+p)))}c.ago=d}}e.w(a)}else e.A(b)},a);return e}
function gj(a,b){if(a.l)return a.l;if(a.s&&a.s.expires<C())return sb(a.s);a.l=new F;var c={url:b||chrome.extension.getURL(Zn)},c=new Zh("/token","GET",c);Co().request(c).execute(function(a,b){if(b.Da()){var c=a.Tokens[0];c.has_token?(c.expires=1E3*c.expires_in+C(),this.s=c,this.l.w(c)):this.l.A(c)}else this.s=null,this.l.A(b);this.l=null},a);return a.l}h.isLogin=function(){return!!this.i&&this.i.is_login};
function ls(a,b){if(a.o)return a.o;a.o=Wh(a.J,b).B(function(b){return is(this,b).B(function(){a.isLogin()?setTimeout(function(){a.o=null},9E5):a.o=null},function(a){this.logger.info("Attamping to login YDN server fail: "+wh(a))})},a);return a.o}function ms(a){a.o=null;a.i=null;a.n.R(Zr,!1)}h.toString=function(){return"SugarApp:0.7.1"};function ns(){cs.call(this);this.j={};os(this)}E(ns,cs);ns.prototype.logger=R("ydn.crm.app.EventPage");
function ps(a,b,c){var d=c.req;c.done=!0;var e=null!=c.data?c.data:{};P(a.logger,"service req: "+d+":"+c.id);if("app-setting"==d)c.data=r.localStorage.getItem("app-setting"),b.postMessage(c);else if("echo"==d)P(a.logger,"resp: "+d+":"+c.id),b.postMessage(c);else if("gdata-fetch"==d)e=c.data,"contact"==e?a.h?Nr(a.h).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):(c.error="gdata not ready",b.postMessage(c)):(c.error="invalid kind "+e,b.postMessage(c));
else if("gdata-list-contact-by-email"==d)(c.data&&0!=c.data.length?a.h.K().values(a.h.H(),"ydn$emails",U.only(c.data),100,0,!1,!0):sb([])).B(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token"==d)gj(a,c.data).fa(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("feed-log"==d){var f=e.offset||0,e=e.limit||100;no.g.values("db-logger",null,e||100,f||0,!0).fa(function(c){P(a.logger,"resp: "+this.req+
":"+this.id);this.data=c;b.postMessage(this)},c)}else if("feed-log-info"==d)f=e.offset||0,e=e.limit||100,po(e,f).fa(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("gdata-token-revoke"==d)js(a).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c);else if("list-sugarcrm"==d){e=[];for(f in a.g)e.push(br(a.g[f]));P(a.logger,"resp: "+
c.req+":"+c.id);c.data=e;b.postMessage(c)}else"log-bug"==d?(Mi(c.data),b.postMessage(c)):"login-info"==d?ls(a,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="invalid login";b.postMessage(this)},c):"logged-in"==d?(ls(a,null).B(function(b){qs(a,{req:d,info:b})}),b.postMessage(c)):"logout"==d?(ms(a),qs(a,{req:d}),b.postMessage(c)):"new-entry"==d?A(c.data)?Qr(a.h,c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+
this.id);this.data=c;b.postMessage(this)},function(a){this.data=a;this.error="failed to create a new entry";b.postMessage(this)},c):(c.error="Invalid gdata entry data",b.postMessage(c)):"new-sugarcrm"==d?ds(a,c.data).u(function(){P(a.logger,"resp: "+this.req+":"+this.id);this.data=!0;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},c):"remove-sugar"==d?gs(a,c.data).fa(function(a){this.data=a;b.postMessage(this)},c):"server-audit-log"==d?ks(a,e).u(function(a){this.data=a;b.postMessage(this)},
function(a){this.error=a;b.postMessage(this)},c):"sugar-server-info"==d?(e=c.data,e=/https?:/.test(e)?new ud(e):wd(new ud,e),(e=a.g[e.M()])?ar(e).B(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},c):lr(c.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},c)):"user-setting"==d?ao().B(function(a){this.data=a;b.postMessage(this)},
c):N(a.logger,"Main channel unknown req: "+d)}
function rs(a,b,c,d){var e=d.req;d.done=!0;cf(a.logger,"sugar service req: "+c+":"+e+":"+d.id);if(a.isLogin())if("about"==e)d.data=br(c),b.postMessage(d);else if("details"==e)dr(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("echo"==e)b.postMessage(d);else if("get"==e)$q(c,d.data).u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=
a;b.postMessage(this)},d);else if("fetch-module"==e)Zq(c,d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id+" "+c);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d);else if("info-module"==e)Yq(c,d.data).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d);else if("import-gdata"==e){var f=d.data,g=f?f["gdata-id"]:"";g?
(c=fs(a,f.module,g,c),c.u(function(a){this.data=a;b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d)):(N(a.logger,"resp error: "+e+":"+d.id),d.error="gdata id required",b.postMessage(d))}else"link"==e?(c=a.h,(e=d.data["gdata-id"])?Ur(c,e,d.data["external-id"]).u(function(a){this.data=a;b.postMessage(this)},function(c){N(a.logger,"error linking gdata "+this.req+":"+this.id);this.error=c.name+": "+c.message;b.postMessage(this)},d):(d.error="gdata-id not required",b.postMessage(d))):
"list"==e?c.list(d.data).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"list-module"==e?cr(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):"login"==e?ds(a,d.data).u(function(c){this.data=c;b.postMessage(this);es(a)},function(a){this.error=
a;b.postMessage(this)},d):"put-record"==e?(e=d.data.module)?(f=d.data.record,A(f)?er(c,e,f).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="record object required",b.postMessage(d))):(d.error="module required",b.postMessage(d)):"search"==e?(c=c.search(d.data),c.u(function(c){this.done=!0;P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+
this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d)):"server-info"==e?ar(c).u(function(c){P(a.logger,"resp: "+this.req+":"+this.id);this.data=c;b.postMessage(this)},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);this.error=c;b.postMessage(this)},d):"sync-entry"==e?(e=d.data,a.h.get(e).u(function(c){c?new Fr(c):(c="GData entry "+this.data+" not found.",P(a.logger,c),this.error=c,b.postMessage(this))},function(c){P(a.logger,"resp error: "+this.req+":"+this.id+" "+c);
this.error=c;b.postMessage(this)},d)):"rest"==e?(g=d.data,A(g)?(f=g.method,g=g.params,x(f)&&0!=f.length?A(g)?Wq(c,f,g).u(function(c){this.data=c;P(a.logger,"resp: "+this.req+":"+this.id);b.postMessage(this)},function(a){this.error=a;b.postMessage(this)},d):(d.error="REST parameter must be an object",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d)):(d.error="method must be valid string",P(a.logger,"resp: error "+e+":"+d.id),b.postMessage(d))):(d.error="REST parameter must be an object",P(a.logger,
"resp: error "+e+":"+d.id),b.postMessage(d))):N(a.logger,c+" unknown req: "+e);else d.error="Not login",b.postMessage(d)}function ss(a){var b=!1,c;for(c in a.j)"gmail"==a.j[c].group&&(b=!0);a.n.R(Yr,b)}function qs(a,b){for(var c in a.j){var d=a.j[c];"gmail"==d.group&&d.port.postMessage(b)}}ns.prototype.O=function(){return{sugars:this.g,gdata:this.h,ports:this.j,user_info:this.i}};
function os(a){chrome.runtime.onConnect.addListener(function(b){var c=b.sender.url,d=b.name.substr(0,b.name.lastIndexOf("-"));Ua(fd,d)?(cf(a.logger,"Channel "+b.name+" connected for "+c),a.j[b.name]={name:b.name,group:d,port:b},ss(a),b.onMessage.addListener(function(c){if(c&&A(c)){if("close"==c.req)a.logger.info("closing "+b.name),delete a.j[b.name],b.disconnect(),ss(a);else if(!c.id){N(a.logger,"Unknown group in pipe info "+b.name);return}if("sugarcrm"==c.group){var d=c.name,g=a.g[d];g?rs(a,b,g,
c):N(a.logger,"SugarCRM instance "+d+" not found.")}else if("gmail"==c.group)for(d in a.j)g=a.j[d],g.group!=d||c.name&&c.name!=g.name||g.port.postMessage(c);else ps(a,b,c)}else N(a.logger,"invalid message package: "+c)}),b.onDisconnect.addListener(function(){cf(a.logger,"disconnected "+b.name);delete a.j[b.name];ss(a)})):N(a.logger,"channel "+b.name+" ignored from "+c)});cf(a.logger,"event page start listening incoming connection")};oa("ydn.debug.log",Ki);function ts(a){K.call(this,"navigate");this.g=a}E(ts,K);function us(a){L.call(this);this.g=a||window;Cc(this.g,"popstate",this.Kd,!1,this);Cc(this.g,"hashchange",this.Kd,!1,this)}E(us,L);h=us.prototype;h.Be=!1;h.sh="/";h.setEnabled=function(a){a!=this.Be&&(this.Be=a)&&this.dispatchEvent(new ts(this.getToken()))};h.getToken=function(){var a=this.g.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};h.I=function(){Jc(this.g,"popstate",this.Kd,!1,this);Jc(this.g,"hashchange",this.Kd,!1,this)};h.Kd=function(){this.Be&&this.dispatchEvent(new ts(this.getToken()))};function vs(){}da(vs);vs.prototype.g=0;function ws(a){L.call(this);this.g=a||Kg();this.Rd=xs}E(ws,L);ws.prototype.Y=vs.X();var xs=null;function ys(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}h=ws.prototype;h.Fb=null;h.aa=!1;h.W=null;h.Rd=null;h.L=null;h.Ba=null;h.Na=null;
h.$a=null;h.ng=!1;h.F=function(){return this.Fb||(this.Fb="ydn:"+(this.Y.g++).toString(36))};function zs(a,b){if(a.Ba&&a.Ba.$a){var c=a.Ba.$a,d=a.Fb;d in c&&delete c[d];pc(a.Ba.$a,b,a)}a.Fb=b}h.p=function(){return this.W};function As(a){return a.o||(a.o=new hf(a))}function Bs(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.Ba&&a.Fb&&a.Ba.$a&&a.Fb&&a.Fb in a.Ba.$a&&a.Ba.$a[a.Fb]&&a.Ba!=b)throw Error("Unable to set parent component");a.Ba=b;ws.m.lf.call(a,b)}h.getParent=function(){return this.Ba};
h.lf=function(a){if(this.Ba&&this.Ba!=a)throw Error("Method not supported");ws.m.lf.call(this,a)};h.za=function(){this.W=this.g.createElement("div")};h.render=function(a){Cs(this,a)};function Cs(a,b,c){if(a.aa)throw Error("Component already rendered");a.W||a.za();b?b.insertBefore(a.W,c||null):a.g.g.body.appendChild(a.W);a.Ba&&!a.Ba.aa||a.T()}
function Ds(a,b){if(a.aa)throw Error("Component already rendered");if(b&&a.Ge(b)){a.ng=!0;var c=Mg(b);a.g&&a.g.g==c||(a.g=Kg(b));a.Vb(b);a.T()}else throw Error("Invalid element to decorate");}h.Ge=function(){return!0};h.Vb=function(a){this.W=a};h.T=function(){this.aa=!0;Es(this,function(a){!a.aa&&a.p()&&a.T()})};h.pb=function(){Es(this,function(a){a.aa&&a.pb()});this.o&&this.o.removeAll();this.aa=!1};
h.I=function(){this.aa&&this.pb();this.o&&(this.o.ra(),delete this.o);Es(this,function(a){a.ra()});!this.ng&&this.W&&Wg(this.W);this.Ba=this.L=this.W=this.$a=this.Na=null;ws.m.I.call(this)};h.pa=function(a){this.L=a};h.ba=function(a,b){this.he(a,Fs(this),b)};
h.he=function(a,b,c){if(a.aa&&(c||!this.aa))throw Error("Component already rendered");if(0>b||b>Fs(this))throw Error("Child component index out of bounds");this.$a&&this.Na||(this.$a={},this.Na=[]);if(a.getParent()==this){var d=a.F();this.$a[d]=a;Wa(this.Na,a)}else pc(this.$a,a.F(),a);Bs(a,this);ab(this.Na,b,0,a);a.aa&&this.aa&&a.getParent()==this?(c=this.Aa(),c.insertBefore(a.p(),c.childNodes[b]||null)):c?(this.W||this.za(),b=Gs(this,b+1),Cs(a,this.Aa(),b?b.W:null)):this.aa&&!a.aa&&a.W&&a.W.parentNode&&
1==a.W.parentNode.nodeType&&a.T()};h.Aa=function(){return this.W};function Hs(a){null==a.Rd&&(a.Rd=ui(a.aa?a.W:a.g.g.body));return a.Rd}function Fs(a){return a.Na?a.Na.length:0}function Gs(a,b){return a.Na?a.Na[b]||null:null}function Es(a,b,c){a.Na&&Na(a.Na,b,c)}function Is(a,b){return a.Na&&b?Ma(a.Na,b):-1};function Js(a,b,c,d,e){if(!(H||Kb&&Wb("525")))return!0;if(Db&&e)return Ks(a);if(e&&!d)return!1;y(b)&&(b=Ls(b));if(!c&&(17==b||18==b||Db&&91==b))return!1;if(Kb&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(H&&d&&b==a)return!1;switch(a){case 13:return!(H&&H&&9<=Yb);case 27:return!Kb}return Ks(a)}
function Ks(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||Kb&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function Ls(a){if(Jb)a=Ms(a);else if(Db&&Kb)a:switch(a){case 93:a=91;break a}return a}
function Ms(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function Ns(a,b){L.call(this);a&&Os(this,a,b)}E(Ns,L);h=Ns.prototype;h.qc=null;h.Ed=null;h.Ze=null;h.Fd=null;h.Wa=-1;h.Jb=-1;h.ke=!1;
var Ps={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Qs={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Rs=H||Kb&&Wb("525"),Ss=Db&&Jb;h=Ns.prototype;
h.Zg=function(a){Kb&&(17==this.Wa&&!a.ctrlKey||18==this.Wa&&!a.altKey||Db&&91==this.Wa&&!a.metaKey)&&(this.Jb=this.Wa=-1);-1==this.Wa&&(a.ctrlKey&&17!=a.g?this.Wa=17:a.altKey&&18!=a.g?this.Wa=18:a.metaKey&&91!=a.g&&(this.Wa=91));Rs&&!Js(a.g,this.Wa,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Jb=Ls(a.g),Ss&&(this.ke=a.altKey))};h.$g=function(a){this.Jb=this.Wa=-1;this.ke=a.altKey};
h.handleEvent=function(a){var b=a.h,c,d,e=b.altKey;H&&"keypress"==a.type?c=this.Jb:Kb&&"keypress"==a.type?c=this.Jb:Ib?c=this.Jb:(c=b.keyCode||this.Jb,d=b.charCode||0,Ss&&(e=this.ke),Db&&63==d&&224==c&&(c=191));d=c=Ls(c);var f=b.keyIdentifier;c?63232<=c&&c in Ps?d=Ps[c]:25==c&&a.shiftKey&&(d=9):f&&f in Qs&&(d=Qs[f]);this.Wa=d;a=new Ts(d,0,0,b);a.altKey=e;this.dispatchEvent(a)};h.p=function(){return this.qc};
function Os(a,b,c){a.Fd&&Us(a);a.qc=b;a.Ed=Cc(a.qc,"keypress",a,c);a.Ze=Cc(a.qc,"keydown",a.Zg,c,a);a.Fd=Cc(a.qc,"keyup",a.$g,c,a)}function Us(a){a.Ed&&(Kc(a.Ed),Kc(a.Ze),Kc(a.Fd),a.Ed=null,a.Ze=null,a.Fd=null);a.qc=null;a.Wa=-1;a.Jb=-1}h.I=function(){Ns.m.I.call(this);Us(this)};function Ts(a,b,c,d){cc.call(this,d);this.type="key";this.g=a}E(Ts,cc);var Vs;function Ws(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function Xs(a,b,c){w(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Vs||(Vs={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Vs,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function Ys(){}var Zs;da(Ys);h=Ys.prototype;h.Gb=function(){};h.V=function(a){var b=a.g.t("div",$s(this,a).join(" "),a.sa());at(this,a,b);return b};h.Ca=function(a){return a};function bt(a,b,c){if(a=a.p?a.p():a)if(H&&!Wb("7")){var d=ct(Dg(a),b);d.push(b);na(c?Eg:Fg,a).apply(null,d)}else c?Eg(a,b):Fg(a,b)}h.yd=function(){return!0};
h.va=function(a,b){b.id&&zs(a,b.id);var c=this.Ca(b);c&&c.firstChild?dt(a,c.firstChild.nextSibling?Za(c.childNodes):c.firstChild):a.Hb=null;var d=0,e=this.D(),f=this.D(),g=!1,k=!1,c=!1,l=Dg(b);Na(l,function(a){g||a!=e?k||a!=f?d|=this.Ae(a):k=!0:(g=!0,f==e&&(k=!0))},this);a.Ib=d;g||(l.push(e),f==e&&(k=!0));k||l.push(f);var m=a.te;m&&l.push.apply(l,m);if(H&&!Wb("7")){var n=ct(l);0<n.length&&(l.push.apply(l,n),c=!0)}if(!g||!k||m||c)b.className=l.join(" ");at(this,a,b);return b};
h.Uf=function(a){Hs(a)&&this.Oe(a.p(),!0);a.isEnabled()&&this.tc(a,a.Ha)};function at(a,b,c){b.Ha||Xs(c,"hidden",!b.Ha);b.isEnabled()||a.Pa(c,1,!b.isEnabled());b.oa&8&&a.Pa(c,8,et(b,8));b.oa&16&&a.Pa(c,16,et(b,16));b.oa&64&&a.Pa(c,64,et(b,64))}h.zd=function(a,b){Bi(a,!b,!H&&!Ib)};h.Oe=function(a,b){bt(a,this.D()+"-rtl",b)};h.Ne=function(a){var b;return a.oa&32&&(b=a.i.ac(a))?bh(b)&&ch(b):!1};
h.tc=function(a,b){var c;if(a.oa&32&&(c=a.i.ac(a))){if(!b&&et(a,32)){try{c.blur()}catch(d){}et(a,32)&&a.Ad(null)}(bh(c)&&ch(c))!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}};h.R=function(a,b,c){var d=a.p();if(d){var e=this.Gc(b);e&&bt(a,e,c);this.Pa(d,b,c)}};h.Pa=function(a,b,c){Zs||(Zs={1:"disabled",8:"selected",16:"checked",64:"expanded"});(b=Zs[b])&&Xs(a,b,c)};
h.sc=function(a,b){var c=this.Ca(a);if(c&&(Ug(c),b))if(x(b))Zg(c,b);else{var d=function(a){if(a){var b=Mg(c);c.appendChild(x(a)?b.createTextNode(a):a)}};u(b)?Na(b,d):!w(b)||"nodeType"in b?d(b):Na(Za(b),d)}};h.ac=function(a){return a.p()};h.D=function(){return"goog-control"};function $s(a,b){var c=a.D(),d=[c],e=a.D();e!=c&&d.push(e);c=b.Ib;for(e=[];c;){var f=c&-c;e.push(a.Gc(f));c&=~f}d.push.apply(d,e);(c=b.te)&&d.push.apply(d,c);H&&!Wb("7")&&d.push.apply(d,ct(d));return d}
function ct(a,b){var c=[];b&&(a=a.concat([b]));Na([],function(d){!Ra(d,na(Ua,a))||b&&!Ua(d,b)||c.push(d.join("_"))});return c}h.Gc=function(a){this.g||ft(this);return this.g[a]};h.Ae=function(a){this.i||(this.g||ft(this),this.i=rc(this.g));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function ft(a){var b=a.D();a.g={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};var gt=!!r.DOMTokenList,ht=gt?function(a){return a.classList}:function(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]},it=gt?function(a,b){return a.classList.contains(b)}:function(a,b){return Ua(ht(a),b)},jt=gt?function(a,b){a.classList.add(b)}:function(a,b){it(a,b)||(a.className+=0<a.className.length?" "+b:b)},kt=gt?function(a,b){Na(b,function(b){jt(a,b)})}:function(a,b){var c={};Na(ht(a),function(a){c[a]=!0});Na(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?
" "+d:d},lt=gt?function(a,b){a.classList.remove(b)}:function(a,b){it(a,b)&&(a.className=Oa(ht(a),function(a){return a!=b}).join(" "))};function mt(a,b){if(!ga(a))throw Error("Invalid component class "+a);if(!ga(b))throw Error("Invalid renderer class "+b);var c=ia(a);nt[c]=b}function ot(a,b){if(!a)throw Error("Invalid class name "+a);if(!ga(b))throw Error("Invalid decorator function "+b);pt[a]=b}var nt={},pt={};function $(a,b,c){ws.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ia(b);if(d=nt[d])break;b=b.m?b.m.constructor:null}b=d?ga(d.X)?d.X():new d:null}this.i=b;this.Hb=t(a)?a:null}E($,ws);h=$.prototype;h.Hb=null;h.Ib=0;h.oa=39;h.me=255;h.jc=0;h.Ha=!0;h.te=null;h.Te=!0;h.fd=!1;h.gf=null;function qt(a){a.aa&&!1!=a.Te&&rt(a,!1);a.Te=!1}h.za=function(){var a=this.i.V(this);this.W=a;var b=this.gf||this.i.Gb();b&&Ws(a,b);this.fd||this.i.zd(a,!1);this.Ha||(T(a,!1),a&&Xs(a,"hidden",!0))};h.Aa=function(){return this.i.Ca(this.p())};
h.Ge=function(a){return this.i.yd(a)};h.Vb=function(a){this.W=a=this.i.va(this,a);var b=this.gf||this.i.Gb();b&&Ws(a,b);this.fd||this.i.zd(a,!1);this.Ha="none"!=a.style.display};h.T=function(){$.m.T.call(this);this.i.Uf(this);if(this.oa&-2&&(this.Te&&rt(this,!0),this.oa&32)){var a=this.i.ac(this);if(a){var b=this.j||(this.j=new Ns);Os(b,a);As(this).listen(b,"key",this.ab).listen(a,"focus",this.Ng).listen(a,"blur",this.Ad)}}};
function rt(a,b){var c=As(a),d=a.p();b?(c.listen(d,"mouseover",a.Ve).listen(d,"mousedown",a.Oc).listen(d,"mouseup",a.bc).listen(d,"mouseout",a.Ue),a.Pc!=ca&&c.listen(d,"contextmenu",a.Pc),H&&c.listen(d,"dblclick",a.Vf)):(c.Fa(d,"mouseover",a.Ve).Fa(d,"mousedown",a.Oc).Fa(d,"mouseup",a.bc).Fa(d,"mouseout",a.Ue),a.Pc!=ca&&c.Fa(d,"contextmenu",a.Pc),H&&c.Fa(d,"dblclick",a.Vf))}h.pb=function(){$.m.pb.call(this);this.j&&Us(this.j);this.Ha&&this.isEnabled()&&this.i.tc(this,!1)};
h.I=function(){$.m.I.call(this);this.j&&(this.j.ra(),delete this.j);delete this.i;this.te=this.Hb=null};h.sa=function(){return this.Hb};function dt(a,b){a.Hb=b}h.Eb=function(){var a=this.sa();if(!a)return"";if(!x(a))if(u(a))a=Pa(a,dh).join("");else{if(Cg&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];eh(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Cg||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""))}return ua(a)};
function st(a){a.fd=!0;var b=a.p();b&&a.i.zd(b,!0)}h.Pe=function(a,b){if(b||this.Ha!=a&&this.dispatchEvent(a?"show":"hide")){var c=this.p();c&&(T(c,a),c&&Xs(c,"hidden",!a));this.isEnabled()&&this.i.tc(this,a);this.Ha=a;return!0}return!1};h.isEnabled=function(){return!et(this,1)};h.setEnabled=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!tt(this,1,!a)||(a||(ut(this,!1),this.fb(!1)),this.Ha&&this.i.tc(this,a),this.R(1,!a))};
h.fb=function(a){tt(this,2,a)&&this.R(2,a)};function ut(a,b){tt(a,4,b)&&a.R(4,b)}h.yc=function(a){tt(this,8,a)&&this.R(8,a)};h.na=function(a){tt(this,64,a)&&this.R(64,a)};function et(a,b){return!!(a.Ib&b)}h.R=function(a,b){this.oa&a&&b!=et(this,a)&&(this.i.R(this,a,b),this.Ib=b?this.Ib|a:this.Ib&~a)};function vt(a,b,c){if(a.aa&&et(a,b)&&!c)throw Error("Component already rendered");!c&&et(a,b)&&a.R(b,!1);a.oa=c?a.oa|b:a.oa&~b}function wt(a,b){return!!(a.me&b)&&!!(a.oa&b)}
function xt(a){a.me&=-256}function tt(a,b,c){return!!(a.oa&b)&&et(a,b)!=c&&(!(a.jc&b)||a.dispatchEvent(ys(b,c)))&&!a.G}h.Ve=function(a){!yt(a,this.p())&&this.dispatchEvent("enter")&&this.isEnabled()&&wt(this,2)&&this.fb(!0)};h.Ue=function(a){!yt(a,this.p())&&this.dispatchEvent("leave")&&(wt(this,4)&&ut(this,!1),wt(this,2)&&this.fb(!1))};h.Pc=ca;function yt(a,b){return!!a.j&&Yg(b,a.j)}
h.Oc=function(a){this.isEnabled()&&(wt(this,2)&&this.fb(!0),!ec(a)||Kb&&Db&&a.ctrlKey||(wt(this,4)&&ut(this,!0),this.i.Ne(this)&&this.i.ac(this).focus()));this.fd||!ec(a)||Kb&&Db&&a.ctrlKey||a.preventDefault()};h.bc=function(a){this.isEnabled()&&(wt(this,2)&&this.fb(!0),et(this,4)&&this.Mb(a)&&wt(this,4)&&ut(this,!1))};h.Vf=function(a){this.isEnabled()&&this.Mb(a)};
h.Mb=function(a){if(wt(this,16)){var b=!et(this,16);tt(this,16,b)&&this.R(16,b)}wt(this,8)&&this.yc(!0);wt(this,64)&&this.na(!et(this,64));b=new K("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.l=a.l);return this.dispatchEvent(b)};h.Ng=function(){wt(this,32)&&tt(this,32,!0)&&this.R(32,!0)};h.Ad=function(){wt(this,4)&&ut(this,!1);wt(this,32)&&tt(this,32,!1)&&this.R(32,!1)};
h.ab=function(a){return this.Ha&&this.isEnabled()&&this.uc(a)?(a.preventDefault(),a.Mc(),!0):!1};h.uc=function(a){return 13==a.g&&this.Mb(a)};mt($,Ys);ot("goog-control",function(){return new $(null)});function zt(){}E(zt,Ys);da(zt);h=zt.prototype;h.D=function(){return"goog-tab"};h.Gb=function(){return"tab"};h.V=function(a){var b=zt.m.V.call(this,a);(a=a.ub())&&this.Rb(b,a);return b};h.va=function(a,b){b=zt.m.va.call(this,a,b);var c=this.ub(b);c&&a.Sd(c);et(a,8)&&(c=a.getParent())&&ga(c.zc)&&(a.R(8,!1),c.zc(a));return b};h.ub=function(a){return a.title||""};h.Rb=function(a,b){a&&(a.title=b||"")};function At(a,b,c){$.call(this,a,b||zt.X(),c);vt(this,8,!0);this.jc|=9}E(At,$);At.prototype.ub=function(){return this.h};At.prototype.Rb=function(a){this.i.Rb(this.p(),a);this.Sd(a)};At.prototype.Sd=function(a){this.h=a};ot("goog-tab",function(){return new At(null)});function Bt(){}da(Bt);h=Bt.prototype;h.xd=function(){};function Ct(a,b){a&&(a.tabIndex=b?0:-1)}h.Ie=function(a){return a.g.t("div",this.Je(a).join(" "))};h.He=function(a){return"DIV"==a.tagName};function Dt(a,b,c){c.id&&zs(b,c.id);var d=a.D(),e=!1,f=ht(c);f&&Na(f,function(a){a==d?e=!0:a&&this.mf(b,a,d)},a);e||jt(c,d);Et(a,b,c);return c}h.mf=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?Ft(a,Gt):b==c+"-vertical"&&Ft(a,Ht)};
function Et(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.Hc(d);f&&(f.W=d,b.isEnabled()||f.setEnabled(!1),b.ba(f),Ds(f,d))}else d.nodeValue&&""!=va(d.nodeValue)||c.removeChild(d);d=e}}h.Hc=function(a){a:{for(var b=ht(a),c=0,d=b.length;c<d;c++)if(a=b[c]in pt?pt[b[c]]():null)break a;a=null}return a};h.Ke=function(a){a=a.p();Bi(a,!0,Jb);H&&(a.hideFocus=!0);var b=this.xd();b&&Ws(a,b)};h.D=function(){return"goog-container"};
h.Je=function(a){var b=this.D(),c=[b,a.Kb==Gt?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};h.Pf=function(){return Ht};function It(a,b,c){ws.call(this,c);this.ib=b||Bt.X();this.Kb=a||this.ib.Pf()}E(It,ws);var Gt="horizontal",Ht="vertical";h=It.prototype;h.$e=null;h.$b=null;h.ib=null;h.Kb=null;h.Oa=!0;h.Zb=!0;h.oc=!0;h.vb=-1;h.ta=null;h.Ab=!1;h.Ub=null;function Jt(a){return a.$e||a.p()}h.za=function(){this.W=this.ib.Ie(this)};h.Aa=function(){return this.p()};h.Ge=function(a){return this.ib.He(a)};h.Vb=function(a){this.W=Dt(this.ib,this,a);"none"==a.style.display&&(this.Oa=!1)};
h.T=function(){It.m.T.call(this);Es(this,function(a){a.aa&&Kt(this,a)},this);var a=this.p();this.ib.Ke(this);this.Nc(this.Oa,!0);As(this).listen(this,"enter",this.Re).listen(this,"highlight",this.Kg).listen(this,"unhighlight",this.Mg).listen(this,"open",this.eh).listen(this,"close",this.Sg).listen(a,"mousedown",this.Lg).listen(Mg(a),"mouseup",this.Vg).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Rg);this.oc&&Lt(this,!0)};
function Lt(a,b){var c=As(a),d=Jt(a);b?c.listen(d,"focus",a.Le).listen(d,"blur",a.Tf).listen(a.$b||(a.$b=new Ns(Jt(a))),"key",a.ab):c.Fa(d,"focus",a.Le).Fa(d,"blur",a.Tf).Fa(a.$b||(a.$b=new Ns(Jt(a))),"key",a.ab)}h.pb=function(){this.Pb(-1);this.ta&&this.ta.na(!1);this.Ab=!1;It.m.pb.call(this)};h.I=function(){It.m.I.call(this);this.$b&&(this.$b.ra(),this.$b=null);this.ib=this.ta=this.Ub=this.$e=null};h.Re=function(){return!0};
h.Kg=function(a){var b=Is(this,a.target);if(-1<b&&b!=this.vb){var c=Mt(this);c&&c.fb(!1);this.vb=b;c=Mt(this);this.Ab&&ut(c,!0);this.ta&&c!=this.ta&&(c.oa&64?c.na(!0):this.ta.na(!1))}b=this.p();null!=a.target.p()&&Xs(b,"activedescendant",a.target.p().id)};h.Mg=function(a){a.target==Mt(this)&&(this.vb=-1);this.p().removeAttribute("aria-activedescendant")};h.eh=function(a){(a=a.target)&&a!=this.ta&&a.getParent()==this&&(this.ta&&this.ta.na(!1),this.ta=a)};
h.Sg=function(a){a.target==this.ta&&(this.ta=null)};h.Lg=function(a){this.Zb&&(this.Ab=!0);var b=Jt(this);b&&bh(b)&&ch(b)?b.focus():a.preventDefault()};h.Vg=function(){this.Ab=!1};h.Rg=function(a){var b;a:{b=a.target;if(this.Ub)for(var c=this.p();b&&b!==c;){var d=b.id;if(d in this.Ub){b=this.Ub[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Oc(a);break;case "mouseup":b.bc(a);break;case "mouseover":b.Ve(a);break;case "mouseout":b.Ue(a);break;case "contextmenu":b.Pc(a)}};
h.Le=function(){};h.Tf=function(){this.Pb(-1);this.Ab=!1;this.ta&&this.ta.na(!1)};h.ab=function(a){return this.isEnabled()&&this.Oa&&(0!=Fs(this)||this.$e)&&this.Me(a)?(a.preventDefault(),a.Mc(),!0):!1};
h.Me=function(a){var b=Mt(this);if(b&&"function"==typeof b.ab&&b.ab(a)||this.ta&&this.ta!=b&&"function"==typeof this.ta.ab&&this.ta.ab(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.g){case 27:if(this.oc)Jt(this).blur();else return!1;break;case 36:Nt(this);break;case 35:Ot(this);break;case 38:if(this.Kb==Ht)Pt(this);else return!1;break;case 37:if(this.Kb==Gt)Hs(this)?Qt(this):Pt(this);else return!1;break;case 40:if(this.Kb==Ht)Qt(this);else return!1;break;case 39:if(this.Kb==
Gt)Hs(this)?Pt(this):Qt(this);else return!1;break;default:return!1}return!0};function Kt(a,b){var c=b.p(),c=c.id||(c.id=b.F());a.Ub||(a.Ub={});a.Ub[c]=b}h.ba=function(a,b){It.m.ba.call(this,a,b)};h.he=function(a,b,c){a.jc|=2;a.jc|=64;vt(a,32,!1);qt(a);It.m.he.call(this,a,b,c);a.aa&&this.aa&&Kt(this,a);b<=this.vb&&this.vb++};function Ft(a,b){if(a.p())throw Error("Component already rendered");a.Kb=b}
h.Nc=function(a,b){if(b||this.Oa!=a&&this.dispatchEvent(a?"show":"hide")){this.Oa=a;var c=this.p();c&&(T(c,a),this.oc&&Ct(Jt(this),this.Zb&&this.Oa),b||this.dispatchEvent(this.Oa?"aftershow":"afterhide"));return!0}return!1};h.isEnabled=function(){return this.Zb};
h.setEnabled=function(a){this.Zb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Zb=!0,Es(this,function(a){a.og?delete a.og:a.setEnabled(!0)})):(Es(this,function(a){a.isEnabled()?a.setEnabled(!1):a.og=!0}),this.Ab=this.Zb=!1),this.oc&&Ct(Jt(this),a&&this.Oa))};function Rt(a,b){b!=a.oc&&a.aa&&Lt(a,b);a.oc=b;a.Zb&&a.Oa&&Ct(Jt(a),b)}h.Pb=function(a){(a=Gs(this,a))?a.fb(!0):-1<this.vb&&Mt(this).fb(!1)};h.fb=function(a){this.Pb(Is(this,a))};function Mt(a){return Gs(a,a.vb)}
function Nt(a){St(a,function(a,c){return(a+1)%c},Fs(a)-1)}function Ot(a){St(a,function(a,c){a--;return 0>a?c-1:a},0)}function Qt(a){St(a,function(a,c){return(a+1)%c},a.vb)}function Pt(a){St(a,function(a,c){a--;return 0>a?c-1:a},a.vb)}function St(a,b,c){c=0>c?Is(a,a.ta):c;var d=Fs(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=Gs(a,c);if(f&&a.Jf(f)){a.kf(c);break}e++;c=b.call(a,c,d)}}h.Jf=function(a){return a.Ha&&a.isEnabled()&&!!(a.oa&2)};h.kf=function(a){this.Pb(a)};function Tt(){}E(Tt,Bt);da(Tt);Tt.prototype.D=function(){return"goog-tab-bar"};Tt.prototype.xd=function(){return"tablist"};Tt.prototype.mf=function(a,b,c){this.h||(this.g||Ut(this),this.h=rc(this.g));var d=this.h[b];d?(Ft(a,d==Vt||d==Wt?Ht:Gt),a.i=d):Tt.m.mf.call(this,a,b,c)};Tt.prototype.Je=function(a){var b=Tt.m.Je.call(this,a);this.g||Ut(this);b.push(this.g[a.i]);return b};function Ut(a){var b=a.D();a.g=uc(Xt,b+"-top",Yt,b+"-bottom",Vt,b+"-start",Wt,b+"-end")};function Zt(a,b,c){a=a||Xt;Ft(this,a==Vt||a==Wt?Ht:Gt);this.i=a;It.call(this,this.Kb,b||Tt.X(),c);$t(this)}E(Zt,It);var Xt="top",Yt="bottom",Vt="start",Wt="end";h=Zt.prototype;h.eb=null;h.T=function(){Zt.m.T.call(this);$t(this)};h.I=function(){Zt.m.I.call(this);this.eb=null};h.kf=function(a){Zt.m.kf.call(this,a);this.zc(Gs(this,a))};h.zc=function(a){a?a.yc(!0):this.eb&&this.eb.yc(!1)};
function au(a,b){if(b&&b==a.eb){for(var c=Is(a,b),d=c-1;b=Gs(a,d);d--)if(b.Ha&&b.isEnabled()){a.zc(b);return}for(c+=1;b=Gs(a,c);c++)if(b.Ha&&b.isEnabled()){a.zc(b);return}a.zc(null)}}h.ih=function(a){this.eb&&this.eb!=a.target&&this.eb.yc(!1);this.eb=a.target};h.jh=function(a){a.target==this.eb&&(this.eb=null)};h.gh=function(a){au(this,a.target)};h.hh=function(a){au(this,a.target)};h.Le=function(){Mt(this)||this.fb(this.eb||Gs(this,0))};
function $t(a){As(a).listen(a,"select",a.ih).listen(a,"unselect",a.jh).listen(a,"disable",a.gh).listen(a,"hide",a.hh)}ot("goog-tab-bar",function(){return new Zt});function bu(a,b,c){this.g=a;this.i=b;this.h=c||null}
function cu(a,b){var c=[];a.h&&c.push({$t:a.h,primary:"true"});for(var d=new Fr({id:{$t:"http://www.google.com/m8/feeds/contacts/kts%40gmail.com/base/0"},gd$email:[{address:a.g,primary:"true"}],gd$name:{gd$fullName:{$t:a.i}},gd$phoneNumber:c}),c=[],e=0;e<b.length;e++){for(var f=c,g=e,k=d,l=b[e],m=0,n=Gr(k),p=Gr(l),q=0;q<n.length;q++)for(var s=n[q],v=0;v<p.length;v++){var z=p[v];s&&s==z&&(m+=1)}n=0;s=k.data.gd$name;v=l.data.gd$name;if(s&&v)for(z=["gd$familyName","gd$givenName","gd$additionalName",
"gd$fullName"],p=[0.06,0.06,0.06,0.12],q=0;4>q;q++){var D=s[z[q]],G=v[z[q]];D&&G==D&&(n+=p[q])}q=0;p=k.ad();s=l.ad();p&&p==s&&(q+=0.2);v=0;k=Hr(k);l=Hr(l);s=k.length;for(p=[];s--;){v=k[s];z=l.length;for(p[s]=0;z--;)D=l[z],v.$t&&D.$t&&(D=0.7*yr(v,D),p[s]=Math.max(p[s],D));v=Rh(p).value}f[g]=m+n+q+v}d=[];for(e=0;e<b.length;e++)f=cb(d,fb,c[e]),0>f?(ab(d,-(f+1),0,c[e]),g=b.splice(e,1),ab(b,-(f+1),0,g[0])):ab(d,f,0,c[e])}bu.prototype.toString=function(){return"ContactModel:"+this.g};function du(){}E(du,Ys);du.prototype.logger=R("ydn.crm.inj.sugar.FeedPanelRenderer");du.prototype.D=function(){return"feed-panel"};du.prototype.V=function(a){var b=du.m.V.call(this,a);a=a.g.t("div","feed","Feed panel");b.appendChild(a);return b};du.prototype.refresh=function(){};function eu(a,b){$.call(this,null,null,a);this.pa(b)}E(eu,$);eu.prototype.refresh=function(){var a=this.L,b=this.p();this.i.refresh(b,a)};mt(eu,du);function fu(a,b){var c=a.type;if(t(c))switch(c.toLowerCase()){case "checkbox":case "radio":a.checked=b?"checked":null;break;case "select-one":a.selectedIndex=-1;if(x(b))for(var d=0;c=a.options[d];d++)if(c.value==b){c.selected=!0;break}break;case "select-multiple":c=b;x(c)&&(c=[c]);for(var e=0;d=a.options[e];e++)if(d.selected=!1,c)for(var f,g=0;f=c[g];g++)d.value==f&&(d.selected=!0);break;default:a.value=null!=b?b:""}};function gu(){}E(gu,Ys);da(gu);gu.prototype.D=function(){return"field"};
gu.prototype.V=function(a){var b=gu.m.V.call(this,a);a.W=b;var c=a.L;a=a.g;var d,e,f=hu(c);d=iu(c).type||"varchar";if("bool"==d)d=a.t("input",{"class":"value",type:"checkbox",disabled:"1"}),e=a.t("span","name");else if("enum"==d){d=a.t("select",{"class":"value",disabled:"1"});var g=iu(c).options||{},k;for(k in g){var l=a.t("option",{name:g[k].name},g[k].value);d.appendChild(l)}d.setAttribute("title",f)}else d=a.t("label","value"),e=a.t("sup","name");b.classList.add(this.D());b.setAttribute("name",
c.g);b.appendChild(d);e&&(e.textContent=f,b.appendChild(e));return b};gu.prototype.refresh=function(a,b){T(a,!!b);if(b){var c=ju(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":fu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function ku(a,b,c){$.call(this,null,b,c);qt(this);st(this);xt(this);vt(this,32,!1);vt(this,8,!1);this.pa(a)}E(ku,$);mt(ku,gu);ku.prototype.refresh=function(){this.i.refresh(this.p(),this.L)};mt(ku,gu);function lu(){}E(lu,Ys);da(lu);lu.prototype.D=function(){return"record-group"};
lu.prototype.V=function(a){var b=lu.m.V.call(this,a),c=a.g,d=c.t("div"),e=c.t("div","content");b.appendChild(d);b.appendChild(e);a.W=b;b.setAttribute("name",a.L.Ta);for(var d=a.L,e=mu(d),f=gu.X(),g=0;g<e.length;g++){var k=nu(d,e[g]),k=new ku(k,f,c);a.ba(k,!0)}a=d.$;c=a.parent.n||null;a=A(c)?nc(c,["modules",a.qa()]):null;((a=A(a)?nc(a,["groups",d.Ta]):null)?a.normallyHide:/address/i.test(d.Ta)?0:!(0<=["email","name","phone"].indexOf(d.Ta)))&&b.classList.add("normally-hide");return b};function ou(a,b){this.parent=a;this.g=b}function iu(a){return pu(a.parent.$).module_fields[a.g]}function ju(a){var b=a.parent.ka();return b?b.value(a.g):null}ou.prototype.Ic=function(){return ju(this)};function hu(a){a=iu(a);return x(a.label)?a.label.replace(/:$/,""):a.label}ou.prototype.toString=function(){return this.parent+";Field:"+this.g};function qu(a,b){this.$=a;this.Ta=b||"";this.g={}}qu.prototype.M=function(){return this.$.M()};qu.prototype.ka=function(){return this.$.ka()};function mu(a){var b=pu(a.$),c=[],d;for(d in b.module_fields){var e=b.module_fields[d];a.Ta&&e.group==a.Ta?c.push(d):a.Ta||e.group||c.push(d)}return c}function ru(a,b){var c=pu(a.$),d;for(d in c.module_fields)if(d==b)return!0;return!1}function nu(a,b){a.g[b]||(a.g[b]=new ou(a,b));return a.g[b]}
function su(a){a=a.Ta.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};function tu(a,b,c){$.call(this,null,b,c);qt(this);st(this);xt(this);vt(this,32,!1);vt(this,8,!1);this.pa(a)}E(tu,$);tu.prototype.Aa=function(){return Ng("content",this.p())};tu.prototype.refresh=function(){for(var a=0;a<Fs(this);a++)Gs(this,a).refresh()};mt(tu,lu);function uu(){}E(uu,gu);da(uu);
uu.prototype.V=function(a){var b=a.g.t("span",$s(this,a).join(" "),a.sa());at(this,a,b);a.W=b;var c=a.L;a=a.g;var d,e=hu(c);d=iu(c).type||"varchar";if("bool"==d)d=a.t("input",{"class":"value",type:"checkbox",disabled:"1"});else if("enum"==d){d=a.t("select",{"class":"value",disabled:"1"});var f=iu(c).options||{},g;for(g in f){var k=a.t("option",{name:f[g].name},f[g].value);d.appendChild(k)}}else d=a.t("label","value");d.setAttribute("title",e);b.classList.add(this.D());b.setAttribute("name",c.g);b.appendChild(d);
return b};uu.prototype.refresh=function(a,b){T(a,!!b);if(b){var c=ju(b),d=x(c)?!ta(c):null!=c,e=a.querySelector(".value");"LABEL"==e.tagName?e.textContent=d?c:"":fu(e,c);d?a.classList.remove("empty"):a.classList.add("empty")}};function vu(){}E(vu,Ys);da(vu);vu.prototype.D=function(){return"address"};vu.prototype.V=function(a){var b=vu.m.V.call(this,a),c=a.L,d=a.g;b.setAttribute("name",c.Ta);b.classList.add("record-group");var e=d.t("details"),f=d.t("summary");f.textContent=su(c);b.appendChild(f);var g=d.t("div","content");e.appendChild(f);e.appendChild(g);b.appendChild(e);a.W=b;e=mu(c);f=uu.X();for(g=0;g<e.length;g++){var k=nu(c,e[g]),k=new ku(k,f,d);a.ba(k,!0)}return b};function wu(a,b){var c=vu.X();tu.call(this,a,c,b)}E(wu,tu);wu.prototype.Aa=function(){return this.p().querySelector("summary").nextElementSibling};wu.prototype.refresh=function(){for(var a=0;a<Fs(this);a++)Gs(this,a).refresh()};mt(wu,vu);function xu(){}E(xu,Ys);da(xu);xu.prototype.D=function(){return"email"};xu.prototype.V=function(a){var b=xu.m.V.call(this,a),c=a.L,d=a.g;b.setAttribute("name",c.Ta);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",su(c));b.appendChild(e);c=d.t("div","content");b.appendChild(e);b.appendChild(c);return a.W=b};
function yu(a,b,c,d,e,f){b?(a.textContent=c||b,a.setAttribute("name",b),b="",d&&(b+=" primary"),e&&(b+=" optout"),f&&(b+=" deleted"),a.className=b):(a.textContent="",a.className="empty")}
xu.prototype.refresh=function(a){var b=a.p(),c=a.L;T(b,!!c);if(c){var b=a.g,d=nu(c,"email"),e=d?d.Ic():null,d=u(e);a=a.Aa();if(d){for(d=0;d<e.length;d++){var c=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));c&&yu(f,c.email_address,void 0,"1"==c.primary_address?!0:!1,"1"==c.opt_out?!0:!1,"1"==c.deleted?!0:!1)}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}else{e=mu(c);for(d=0;d<e.length;d++){var g=e[d],f=a.children[d];f||(f=b.t("SPAN"),a.appendChild(f));(g=nu(c,
g))&&yu(f,ju(g))}for(d=a.childElementCount-1;d>=e.length;d--)a.removeChild(a.children[d])}}};function zu(a,b){var c=xu.X();tu.call(this,a,c,b)}E(zu,tu);zu.prototype.Aa=function(){return Ng("content",this.p())};zu.prototype.refresh=function(){this.i.refresh(this)};mt(zu,xu);function Au(){}E(Au,Ys);da(Au);Au.prototype.D=function(){return"list"};Au.prototype.V=function(a){var b=Au.m.V.call(this,a),c=a.L,d=a.g;b.setAttribute("name",c.Ta);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",su(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.W=b;for(var e=mu(c),f=uu.X(),g=0;g<e.length;g++){var k=nu(c,e[g]),k=new ku(k,f,d);a.ba(k,!0)}return b};function Bu(a,b){var c=Au.X();tu.call(this,a,c,b)}E(Bu,tu);Bu.prototype.Aa=function(){return Ng("content",this.p())};Bu.prototype.refresh=function(){for(var a=0;a<Fs(this);a++)Gs(this,a).refresh()};mt(Bu,Au);function Cu(){}E(Cu,Ys);da(Cu);Cu.prototype.D=function(){return"name"};
Cu.prototype.V=function(a){var b=Cu.m.V.call(this,a),c=a.L,d=a.g;b.setAttribute("name",c.Ta);b.classList.add("record-group");var e=d.t("div");e.setAttribute("title",su(c));b.appendChild(e);var f=d.t("div","content");b.appendChild(e);b.appendChild(f);a.W=b;mu(c);e=uu.X();ru(c,"salutation")&&(f=nu(c,"salutation"),f=new ku(f,e,d),a.ba(f,!0));ru(c,"first_name")&&a.ba(new ku(nu(c,"first_name"),e,d),!0);ru(c,"last_name")&&a.ba(new ku(nu(c,"last_name"),e,d),!0);return b};function Du(a,b){var c=Cu.X();tu.call(this,a,c,b)}E(Du,tu);Du.prototype.Aa=function(){return Ng("content",this.p())};Du.prototype.refresh=function(){for(var a=0;a<Fs(this);a++)Gs(this,a).refresh()};mt(Du,Cu);function Eu(a,b){L.call(this);this.parent=a;this.g=b;this.h={}}E(Eu,L);h=Eu.prototype;h.logger=R("ydn.crm.sugar.model.Record");h.M=function(){return this.parent.M()};h.qa=function(){return this.g.$};function pu(a){return a.parent.s[a.qa()]}h.I=function(){Eu.m.I.call(this);this.h=null};h.ka=function(){return this.g};h.Qb=function(a){((a=a?a.g?a:null:null)||this.g)&&a!==this.g&&(this.g=a,this.dispatchEvent(new Fu(this.g?this.g.$:null,0,this)))};
h.toString=function(){return"ydn.crm.sugar.model.Record:"+this.g};function Gu(a,b){Eu.call(this,a,new Mq(a.M(),b));this.module_name=b}E(Gu,Eu);Gu.prototype.qa=function(){return this.module_name};Gu.prototype.Qb=function(a){if(a&&a.$!=this.module_name)throw Error("Module name must be "+this.module_name+" but found "+a.$);Gu.m.Qb.call(this,a)};Gu.prototype.toString=function(){return"ydn.crm.sugar.model.Module:"+this.module_name+(this.g?":"+this.g:"")};function Hu(a,b){Gu.call(this,a,b);this.Ua=new hf(this);var c=a.i;c&&Iu(this,c);this.Ua.listen(this.getParent(),Ju,this.Tg)}E(Hu,Gu);h=Hu.prototype;h.logger=R("ydn.crm.sugar.model.GDataRecord");h.getParent=function(){return this.parent};function Ku(a){return Lu(a.getParent(),a.qa()).nb}h.Tg=function(a){Iu(this,a.nb)};
function Iu(a,b){a.Qb(null);if(b){var c=b.g;if(c){var d=[{store:a.qa(),index:"ydn$emails",key:c}];Nu(a.parent).send("list",d).B(function(a){var b=a[0],g=b.result?b.result.length:0;P(this.logger,"query "+JSON.stringify(d)+" returns "+g+" results ");window.console.log(this+" receiving sugarcrm "+g+" query result for "+c,a);b.result[0]&&this.Qb(new Mq(this.M(),this.qa(),b.result[0]))},a)}}}
function Ou(a){a.ka();new Tc;var b=Lu(a.getParent(),null).nb,b={module:a.qa(),kind:b.qf(),"gdata-id":b.F()};P(a.logger,"sending import-gdata "+JSON.stringify(b));return Nu(a.parent).send("import-gdata",b).B(function(a){window.console.log(a);a=new Mq(this.M(),this.qa(),a);P(this.logger,a+" created.");this.Qb(a)},a)}
function Pu(a){a.ka();new Tc;var b=Qu(a.getParent()),c=b.i,d={email1:b.g,full_name:c};c&&0<c.length&&(c=c.split(/\s/),c[0]&&(d.first_name=c[0]),c[1]&&(d.last_name=c[c.length-1]));(b=b.h)&&(d.phone_work=b);d={module:a.qa(),record:d};P(a.logger,"sending put-record "+JSON.stringify(d));return Nu(a.parent).send("put-record",d).B(function(a){window.console.log(a);a=new Mq(this.M(),this.qa(),a);P(this.logger,a+" created.");this.Qb(a)},a)}
function Ru(a){var b=a.ka();if(!b)return tb("no Record to link.");b.F();window.console.log(b);var c=Ku(a),c=Lu(a.getParent(),null).nb;if(!c)return tb("Not contact data to link.");b=new Cr("sugarcrm",a.M(),a.qa(),b.F(),+new Date(c.data.updated.$t));c={kind:c.qf(),"gdata-id":c.F(),"external-id":{label:b.$+"#"+b.i+"-"+b.h,value:b.U()}};return Nu(a.parent).send("link",c).B(function(a){window.console.log("link",a);a=new Fr(a);a:{for(var b=this.getParent(),c=this.qa(),g=0;g<b.g.length;g++)if(b.g[g].F()==
a.F()){b.g[g]=a;b.dispatchEvent(new Su(c,0,0,b));break a}b.g.push(a);b.dispatchEvent(new Su(c,0,0,b))}},a)}h.save=function(){var a=this.ka();window.console.log(a);var b=Nu(this.parent).send("put-record",a);b.B(function(b){window.console.log(b);a.g=b},this);return b};h.I=function(){Hu.m.I.call(this);this.Ua.ra();this.g=this.Ua=null};h.toString=function(){var a="";this.g&&(a+=":"+this.g);var b=Ku(this);b&&(a+=":"+b);return"RecordModel:"+this.qa()+a};var Ju="context-data-change";function Tu(a,b){K.call(this,a,b)}E(Tu,K);function Uu(a,b){K.call(this,Ju,b);this.nb=a}E(Uu,Tu);function Fu(a,b,c){K.call(this,"record-change",c);this.$=a}E(Fu,Tu);function Su(a,b,c,d){K.call(this,"gdata-change",d);this.module_name=a}E(Su,Tu);function Vu(a,b){L.call(this);this.h=a;this.s=b;this.info={};this.n=this.l=null;this.Ua=new hf(this)}E(Vu,L);h=Vu.prototype;h.isLogin=function(){return!!this.h.isLogin};function Nu(a){return gd("sugarcrm",a.M())}h.M=function(){return this.h.domain};function Wu(a,b,c){var d={};d.domain=a.M();d.baseUrl=a.h.baseUrl||null;d.Qh=b;d.password=c;return a.send("login",d).B(function(a){this.h=a},a)}h.send=function(a,b){return gd("sugarcrm",this.M()).send(a,b)};
h.kb=function(){this.l||(this.l=this.send("server-info"),this.l.B(function(a){if(a){var b=a.info;b&&(this.info=b);if(a=a.about)this.h=a}else this.l=null},this));return this.l};function Xu(a,b,c,d){b={store:b};c&&(b.index=c);d&&(d instanceof U?b.range=d.toJSON():b.key=d);b.prefix=!0;return Nu(a).send("list",[b])}function Yu(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return Nu(a).send("search",[c])}
h.I=function(){Vu.m.I.call(this);this.n=this.info=null;this.Ua.ra();this.Ua=null};h.toString=function(){return"ydn.crm.sugar.model.Sugar:"+this.M()};function Zu(a,b){Vu.call(this,a,b);this.j={};this.g=this.i=null}E(Zu,Vu);function Lu(a,b){for(var c=a.g?a.g.length:0,d=0;d<c;d++){var e=a.g[d],f=gr(e,a.M(),b);if(b&&f)return{module_name:b,nb:e};if(!b&&!f)return{module_name:null,nb:e}}return{module_name:b,nb:null}}
function $u(a,b){a.i=b;a.g=null;a.dispatchEvent(new Uu(b,a));a.i&&a.i.g&&gd().send("gdata-list-contact-by-email",a.i.g).B(function(a){this.g=a.map(function(a){return new Fr(a)});cu(this.i,this.g);0<this.g.length&&this.dispatchEvent(new Su(null,0,0,this))},a)}function Qu(a){return a.i}Zu.prototype.o=function(a){this.dispatchEvent(a)};Zu.prototype.I=function(){Zu.m.I.call(this);for(var a in this.j)this.j[a].ra();this.g=this.i=this.j=null};
Zu.prototype.toString=function(){return"ydn.crm.sugar.model.GDataSugar:"+this.M()};function av(){}E(av,Ys);da(av);av.prototype.D=function(){return"record-body"};
av.prototype.V=function(a){var b=av.m.V.call(this,a),c=a.g,d=c.t("div","record-body-header"),e=c.t("div","record-body-content");b.appendChild(d);b.appendChild(e);a.W=b;e=c.t("a",{name:"view"},"view");e.href="#";var f=c.t("a",{name:"detail"},"detail");f.href="#";a.h?T(e,!1):T(f,!1);d.appendChild(e);d.appendChild(f);var d=a.L,e=[],f=pu(d),g;for(g in f.module_fields){var k=f.module_fields[g].group;-1==e.indexOf(k)&&e.push(k)}g=lu.X();for(f=0;f<e.length;f++){var k=e[f],l;l=d;var m=k;l.h[m]||(l.h[m]=new qu(l,
m));l=l.h[m];k=/address/i.test(k)?new wu(l,c):"email"==k?new zu(l,c):"phone"==k?new Bu(l,c):"name"==k?new Du(l,c):new tu(l,g,c);a.ba(k,!0)}return b};function bv(a){return a.querySelector("a[name=view]")}function cv(a){return a.querySelector("a[name=detail]")};function dv(a,b,c){b=b||av.X();$.call(this,null,b,c);qt(this);st(this);xt(this);this.pa(a);this.h=!1}E(dv,$);h=dv.prototype;h.logger=R("ydn.crm.inj.sugar.module.Record");h.Aa=function(){return Ng("record-body-content",this.p())};h.T=function(){dv.m.T.call(this);var a=As(this),b=this.L;b&&a.listen(b,"record-change",this.refresh);a.listen(bv(this.p()),"click",this.Bh,!1);a.listen(cv(this.p()),"click",this.Ah,!1)};
h.Bh=function(a){a.preventDefault();var b=this.p();a=Ng("record-body-header",b);var b=Ng("record-body-content",b),c=bv(a);a=cv(a);"hide"==c.textContent?(c.textContent="view",T(b,!1),T(a,!1)):(c.textContent="hide",T(b,!0),T(a,!0))};h.Ah=function(a){a.preventDefault();var b=this.p();a=Ng("record-body-header",b);b=Ng("record-body-content",b);a=cv(a);b.classList.contains("detail")?(a.textContent="detail",b.classList.remove("detail")):(a.textContent="less",b.classList.add("detail"))};
h.refresh=function(a){var b=this.L,c=this.p();if(b.ka())for(T(c,!0),a&&"record-change"==a.type&&(b=this.p(),a=Ng("record-body-header",b),b=Ng("record-body-content",b),c=bv(a),a=cv(a),this.h?(a.textContent="detail",T(c,!1),T(a,!0)):(c.textContent="view",T(b,!1),T(c,!0),T(a,!1))),a=0;a<Fs(this);a++)b=Gs(this,a),b instanceof tu&&b.refresh();else T(c,!1)};mt(dv,av);function ev(){}E(ev,Ys);ev.prototype.logger=R("ydn.crm.inj.sugar.module.GDataPanelRenderer");ev.prototype.D=function(){return"record-panel"};
ev.prototype.V=function(a){var b=ev.m.V.call(this,a),c=a.L,d=c.qa(),e=a.g,f=e.t("div","record-root");b.appendChild(f);var g=e.t("div","record-header"),k=e.t("div","record-content");f.appendChild(g);f.appendChild(k);a.W=f;f.classList.add(d);f=e.t("span",{"class":"icon"},d.substr(0,2));k=e.t("a",{href:"#","class":"title"});k.target=c.M();var l=e.t("a",{href:"#link","class":"link"},"link"),m=e.t("span","synced");T(l,!1);T(m,!1);f=e.t("div","header",[f,k,l,m]);d=e.t("a",{"class":"import",href:"#import"},
"Add to "+d);d.style.zIndex=1E3;d=e.t("div",{"class":"import"},d);g.appendChild(d);g.appendChild(f);c=new dv(c,null,e);a.ba(c,!0);return b};
ev.prototype.refresh=function(a,b){var c=a.querySelector(".import"),d=a.querySelector(".header"),e=a.querySelector(".title"),f=c.nextElementSibling,c=c.querySelector("a"),g=a.querySelector("a.link"),f=f.querySelector(".synced");b.nf||b.Xf?T(a,!0):T(a,!1);T(d,!!b.title);e.textContent=b.title;b.nf?e.href=b.nf:e.removeAttribute("href");c.textContent=b.Xf;c.setAttribute("title",b.Yf);(g.textContent=b.af)?(g.setAttribute("title",b.Yf),g.href="#"+b.af):g.removeAttribute("href");T(f,b.nh)};function fv(){L.call(this);this.h=this.g=null}E(fv,L);fv.prototype.I=function(){this.g&&(this.g.ra(),this.h=this.g=null)};function gv(a,b){a.h=b;a.g=new hf(a);a.g.listen(b,"click",a.i,!0)}fv.prototype.p=function(){return this.h};fv.prototype.i=function(a){a.preventDefault();var b=this.p(),c=this.p();(c.classList.contains("error")?hv:c.href?"n":"v")==hv?(b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):this.dispatchEvent(a)};
var hv="e";function iv(a,b){var c=a.p();c.classList.remove("error");c.removeAttribute("href");b?(c.textContent=b,T(c,!0)):T(c,!1);c.removeAttribute("title")}function jv(a,b,c){a=a.p();a.classList.add("error");a.href="#error";a.textContent="error";a.setAttribute("title","Click to report error"+(c?" for "+c:""));b&&gd().send("log-bug",b)};function kv(a,b){$.call(this,null,null,a);this.pa(b);this.h=new fv;this.l=new fv}E(kv,$);h=kv.prototype;h.logger=R("ydn.crm.inj.sugar.module.GDataPanel");h.Aa=function(){return Ng("record-content",this.p())};
h.T=function(){kv.m.T.call(this);var a=this.p();gv(this.h,Og(document,"A","import",a)[0]);gv(this.l,Og(document,"A","link",a)[0]);As(this).listen(this.h,"click",this.Yg,!1);As(this).listen(this.l,"click",this.ah,!1);a=this.L;As(this).listen(a,["record-change"],this.refresh);As(this).listen(a.parent,["gdata-change"],this.refresh)};h.refresh=function(){var a=this.L,b=Ng("record-header",this.p());this.i.refresh(b,lv(this));b=this.Aa();T(b,!!a.ka())};
function lv(a){var b=a.L,c=(a=Ku(b))?null:Lu(b.getParent(),null).nb,d=Qu(b.getParent()),e=b.ka(),f=b.qa(),g="",k=null,l=!1,m="",n="",p="",q="";d&&(m="Add to "+f,n="Add current contact "+d.g+" to SugarCRM "+f,e?(g=Nq(e),k=mq(e.domain,e.$,e.F()),n=m="",p="export",q="Export this SugarCRM "+f+" to Gmail My Contacts address book",a&&(c=Ku(b),b.g&&c?(gr(c,b.M(),b.qa()),b=!0):b=!1,b?(l=!0,q=p=""):(p="link",q="Link Gmail contact "+a.id.match(/\w+$/)[0]+" with this SugarCRM "+f+" "+e.F()))):c&&(m+=" and sync",
n+=" and then synchronize between the two records.",q=p=""));return{title:g,nf:k,Xf:m,Yf:n,nh:l,af:p,Ph:q}}h.ah=function(){var a=this.L;iv(this.l,"Linking...");Ru(a).u(function(){iv(this.l,"Done.");this.dispatchEvent(new K("record-change"))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?wh(a):a;var c;c=this.p();c=fh(c);jv(this.l,{"class":"RecordHeader",method:"handleLinkClick",context:"link",html:c?c.outerHTML:"",error:a},a)},this)};
h.Yg=function(){var a=this.L;iv(this.h,"Adding... to "+a.qa());var b;Lu(a.getParent(),null).nb?b=Ou(a).B(function(){iv(this.h,"Linking GData and SugarCRM...");return Ru(a)},this):(b=Pu(a),b=b.B(function(){return Ru(a)},this));b.u(function(){iv(this.h,null);this.dispatchEvent(new K("change",this))},function(a){a=a instanceof Error?a.name+" "+a.message:A(a)?wh(a):a;var b;b=this.p();b=fh(b);jv(this.h,{"class":"RecordHeader",method:"handleImportClick",context:"link",html:b?b.outerHTML:"",error:a},a)},
this)};mt(kv,ev);function mv(){}E(mv,Bt);da(mv);mv.prototype.logger=R("ydn.crm.inj.sugar.FeedBodyRenderer");mv.prototype.D=function(){return"feed-panel"};
mv.prototype.Ie=function(a){var b=mv.m.Ie.call(this,a),c=a.g,d=c.t("div","feed-header"),e=c.t("div","feed-body");b.appendChild(d);b.appendChild(e);a.W=b;c=c.t("div","feed-title");d.appendChild(c);for(d=0;d<lq.length;d++){a:{for(var c=a,e=lq[d],f=0;f<c.h.length;f++){var g=c.h[f];if(g.L.qa()==e){Xa(c.h,f);c=g;break a}}f=c.L;f.j[e]||(f.j[e]=new Hu(f,e),f.Ua.listen(f.j[e],"record-change",f.o));c=new kv(c.g,f.j[e])}a.ba(c,!0)}return b};mv.prototype.refresh=function(a,b){T(a,!!b.i)};function nv(a,b){var c=mv.X();It.call(this,Ht,c,a);this.pa(b);this.h=[]}E(nv,It);nv.prototype.Aa=function(){return Ng("feed-body",this.p())};nv.prototype.T=function(){nv.m.T.call(this);As(this).listen(this.L,Ju,this.refresh)};nv.prototype.refresh=function(a){var b=this.L,c=this.p();this.ib.refresh(c,b);if(a.type==Ju)for(b=Fs(this)-1;0<=b;b--)Gs(this,b).refresh(a)};mt(nv,mv);function ov(){}E(ov,Ys);da(ov);ov.prototype.D=function(){return"goog-menuheader"};function pv(a,b,c){$.call(this,a,c||ov.X(),b);vt(this,1,!1);vt(this,2,!1);vt(this,4,!1);vt(this,32,!1);this.Ib=1}E(pv,$);ot("goog-menuheader",function(){return new pv(null)});function qv(){this.h=[]}E(qv,Ys);da(qv);function rv(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.D()+"-highlight";break;case 1:c=a.D()+"-checkbox";break;case 2:c=a.D()+"-content"}a.h[b]=c}return c}h=qv.prototype;h.Gb=function(){return"menuitem"};h.V=function(a){var b=a.g.t("div",$s(this,a).join(" "),sv(this,a.sa(),a.g));tv(this,a,b,!!(a.oa&8)||!!(a.oa&16));at(this,a,b);return b};h.Ca=function(a){return a&&a.firstChild};
h.va=function(a,b){var c=Xg(b),d=rv(this,2);c&&it(c,d)||b.appendChild(sv(this,b.childNodes,a.g));it(b,"goog-option")&&(vt(a,16,!0),(c=a.p())&&uv(a.i,a,c),uv(this,a,b));return qv.m.va.call(this,a,b)};h.sc=function(a,b){var c=this.Ca(a),d=vv(this,a)?c.firstChild:null;qv.m.sc.call(this,a,b);d&&!vv(this,a)&&c.insertBefore(d,c.firstChild||null)};function sv(a,b,c){a=rv(a,2);return c.t("div",a,b)}function uv(a,b,c){c&&(Ws(c,"menuitemcheckbox"),tv(a,b,c,!0))}
function vv(a,b){var c=a.Ca(b);if(c){var c=c.firstChild,d=rv(a,1);return!!c&&A(c)&&1==c.nodeType&&it(c,d)}return!1}function tv(a,b,c,d){d!=vv(a,c)&&(d?jt(c,"goog-option"):lt(c,"goog-option"),c=a.Ca(c),d?(a=rv(a,1),c.insertBefore(b.g.t("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}h.Gc=function(a){switch(a){case 2:return rv(this,0);case 16:case 8:return"goog-option-selected";default:return qv.m.Gc.call(this,a)}};
h.Ae=function(a){var b=rv(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return qv.m.Ae.call(this,a)}};h.D=function(){return"goog-menuitem"};function wv(a,b,c,d){$.call(this,a,d||qv.X(),c);this.pa(b)}E(wv,$);h=wv.prototype;h.U=function(){var a=this.L;return null!=a?a:this.Eb()};h.Eb=function(){var a=this.sa();return u(a)?(a=Pa(a,function(a){return A(a)&&1==a.nodeType&&(it(a,"goog-menuitem-accel")||it(a,"goog-menuitem-mnemonic-separator"))?"":dh(a)}).join(""),ua(a)):wv.m.Eb.call(this)};
h.bc=function(a){var b=this.getParent();if(b){var c=b.h;b.h=null;if(b=c&&y(a.clientX))b=new Hg(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}wv.m.bc.call(this,a)};h.uc=function(a){return a.g==this.cg&&this.Mb(a)?!0:wv.m.uc.call(this,a)};h.Jg=function(){return this.cg};ot("goog-menuitem",function(){return new wv(null)});function xv(){}E(xv,Ys);da(xv);xv.prototype.V=function(a){return a.g.t("div",this.D())};xv.prototype.va=function(a,b){b.id&&zs(a,b.id);if("HR"==b.tagName){var c=b;b=this.V(a);Vg(b,c);Wg(c)}else jt(b,this.D());return b};xv.prototype.sc=function(){};xv.prototype.D=function(){return"goog-menuseparator"};function yv(a,b){$.call(this,null,a||xv.X(),b);vt(this,1,!1);vt(this,2,!1);vt(this,4,!1);vt(this,32,!1);this.Ib=1}E(yv,$);yv.prototype.T=function(){yv.m.T.call(this);var a=this.p();Ws(a,"separator")};ot("goog-menuseparator",function(){return new yv});function zv(){}E(zv,Bt);da(zv);h=zv.prototype;h.xd=function(){return"menu"};h.He=function(a){return"UL"==a.tagName||zv.m.He.call(this,a)};h.Hc=function(a){return"HR"==a.tagName?new yv:zv.m.Hc.call(this,a)};h.D=function(){return"goog-menu"};h.Ke=function(a){zv.m.Ke.call(this,a);a=a.p();Xs(a,"haspopup","true")};ot("goog-menuseparator",function(){return new yv});function Av(a,b){It.call(this,Ht,b||zv.X(),a);Rt(this,!1)}E(Av,It);h=Av.prototype;h.je=!0;h.D=function(){return this.ib.D()};h.td=function(){var a=[];Es(this,function(b){a.push(b)});return a};h.Nc=function(a,b,c){(b=Av.m.Nc.call(this,a,b))&&a&&this.aa&&this.je&&Jt(this).focus();a&&c&&y(c.clientX)?this.h=new Hg(c.clientX,c.clientY):this.h=null;return b};h.Re=function(a){this.je&&Jt(this).focus();return Av.m.Re.call(this,a)};h.Jf=function(a){return a.isEnabled()&&a.Ha&&!!(a.oa&2)};
h.Vb=function(a){for(var b=this.ib,c=Og(this.g.g,"div",b.D()+"-content",a),d=c.length,e=0;e<d;e++)Et(b,this,c[e]);Av.m.Vb.call(this,a)};h.Me=function(a){var b=Av.m.Me.call(this,a);b||Es(this,function(c){!b&&c.Jg&&c.cg==a.g&&(this.isEnabled()&&this.fb(c),b=c.ab(a))},this);return b};
h.Pb=function(a){Av.m.Pb.call(this,a);if(a=Gs(this,a)){var b=a.p();a=this.p();var c=ti(b),d=ti(a),e=Gi(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,g=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),g=g+Math.min(c,Math.max(c-d,0)),b=new Hg(e,g);a.scrollLeft=b.x;a.scrollTop=b.y}};function Bv(){}E(Bv,xv);da(Bv);Bv.prototype.V=function(a){return a.g.t("div",this.D()+" goog-inline-block","\u00a0")};Bv.prototype.va=function(a,b){b=Bv.m.va.call(this,a,b);jt(b,"goog-inline-block");return b};Bv.prototype.D=function(){return"goog-toolbar-separator"};function Cv(){}E(Cv,Bt);da(Cv);Cv.prototype.xd=function(){return"toolbar"};Cv.prototype.Hc=function(a){return"HR"==a.tagName?new yv(Bv.X()):Cv.m.Hc.call(this,a)};Cv.prototype.D=function(){return"goog-toolbar"};Cv.prototype.Pf=function(){return Gt};function Dv(a,b,c){It.call(this,b,a||Cv.X(),c)}E(Dv,It);function Ev(a,b,c,d,e,f,g,k,l){var m,n;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==pi(m,"position")||(n=ti(m),p||(p=(p=ui(m))&&Jb?-m.scrollLeft:!p||H&&Wb("8")||"visible"==pi(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=Ig(n,new Hg(p,m.scrollTop))))}m=n||new Hg;n=zi(a);if(p=si(a)){var q=new ni(p.left,p.top,p.right-p.left,p.bottom-p.top),p=Math.max(n.left,q.left),s=Math.min(n.left+n.width,q.left+q.width);if(p<=s){var v=Math.max(n.top,q.top),
q=Math.min(n.top+n.height,q.top+q.height);v<=q&&(n.left=p,n.top=v,n.width=s-p,n.height=q-v)}}p=Kg(a);v=Kg(c);if(p.g!=v.g){var s=p.g.body,v=v.g.parentWindow||v.g.defaultView,q=new Hg(0,0),z=Mg(s)?Mg(s).parentWindow||Mg(s).defaultView:window,D=s;do{var G;if(z==v)G=ti(D);else{var J=D;G=void 0;if(J.getBoundingClientRect)G=qi(J),G=new Hg(G.left,G.top);else{G=ih(Kg(J));var O=ti(J);G=new Hg(O.x-G.x,O.y-G.y)}if(Jb&&!Wb(12)){O=void 0;H?O="-ms-transform":Kb?O="-webkit-transform":Ib?O="-o-transform":Jb&&(O=
"-moz-transform");var ha=void 0;O&&(ha=pi(J,O));ha||(ha=pi(J,"transform"));J=ha?(J=ha.match(Hi))?new Hg(parseFloat(J[1]),parseFloat(J[2])):new Hg(0,0):new Hg(0,0);G=new Hg(G.x+J.x,G.y+J.y)}}q.x+=G.x;q.y+=G.y}while(z&&z!=v&&(D=z.frameElement)&&(z=z.parent));s=Ig(q,ti(s));H&&!hh(p)&&(s=Ig(s,ih(p)));n.left+=s.x;n.top+=s.y}a=(b&4&&ui(a)?b^2:b)&-5;b=new Hg(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=Ig(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var I;if(g)if(l)I=l;else if(I=si(c))I.top-=
m.y,I.right-=m.x,I.bottom-=m.y,I.left-=m.x;a:{l=b.ga();e=0;a=(d&4&&ui(c)?d^2:d)&-5;d=wi(c);k=k?k.ga():d.ga();if(f||0!=a)a&2?l.x-=k.width+(f?f.right:0):f&&(l.x+=f.left),a&1?l.y-=k.height+(f?f.bottom:0):f&&(l.y+=f.top);if(g&&(I?(f=l,e=0,65==(g&65)&&(f.x<I.left||f.x>=I.right)&&(g&=-2),132==(g&132)&&(f.y<I.top||f.y>=I.bottom)&&(g&=-5),f.x<I.left&&g&1&&(f.x=I.left,e|=1),f.x<I.left&&f.x+k.width>I.right&&g&16&&(k.width=Math.max(k.width-(f.x+k.width-I.right),0),e|=4),f.x+k.width>I.right&&g&1&&(f.x=Math.max(I.right-
k.width,I.left),e|=1),g&2&&(e=e|(f.x<I.left?16:0)|(f.x+k.width>I.right?32:0)),f.y<I.top&&g&4&&(f.y=I.top,e|=2),f.y<=I.top&&f.y+k.height<I.bottom&&g&32&&(k.height=Math.max(k.height-(I.top-f.y),0),f.y=I.top,e|=8),f.y>=I.top&&f.y+k.height>I.bottom&&g&32&&(k.height=Math.max(k.height-(f.y+k.height-I.bottom),0),e|=8),f.y+k.height>I.bottom&&g&4&&(f.y=Math.max(I.bottom-k.height,I.top),e|=2),g&8&&(e=e|(f.y<I.top?64:0)|(f.y+k.height>I.bottom?128:0)),g=e):g=256,e=g,e&496)){c=e;break a}f=Jb&&(Db||Nb)&&Wb("1.9");
l instanceof Hg?(g=l.x,l=l.y):(g=l,l=void 0);c.style.left=vi(g,f);c.style.top=vi(l,f);d==k||d&&k&&d.width==k.width&&d.height==k.height||(f=hh(Kg(Mg(c))),!H||f&&Wb("8")?(c=c.style,Jb?c.MozBoxSizing="border-box":Kb?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(k.width,0)+"px",c.height=Math.max(k.height,0)+"px"):(g=c.style,f?(H?(f=Di(c,"paddingLeft"),d=Di(c,"paddingRight"),l=Di(c,"paddingTop"),I=Di(c,"paddingBottom"),f=new mi(l,d,I,f)):(f=oi(c,"paddingLeft"),d=oi(c,"paddingRight"),
l=oi(c,"paddingTop"),I=oi(c,"paddingBottom"),f=new mi(parseFloat(l),parseFloat(d),parseFloat(I),parseFloat(f))),c=Gi(c),g.pixelWidth=k.width-c.left-f.left-f.right-c.right,g.pixelHeight=k.height-c.top-f.top-f.bottom-c.bottom):(g.pixelWidth=k.width,g.pixelHeight=k.height)));c=e}return c};function Fv(){}Fv.prototype.l=function(){};function Gv(a,b,c){this.g=a;this.h=b;this.o=c}E(Gv,Fv);Gv.prototype.l=function(a,b,c){Ev(this.g,this.h,a,b,void 0,c,this.o)};function Hv(a,b,c,d){Gv.call(this,a,b);this.i=c?5:0;this.j=d||void 0}E(Hv,Gv);Hv.prototype.n=function(){return this.i};Hv.prototype.l=function(a,b,c,d){var e=Ev(this.g,this.h,a,b,null,c,10,d,this.j);if(e&496){var f=Iv(e,this.h);b=Iv(e,b);e=Ev(this.g,f,a,b,null,c,10,d,this.j);e&496&&(f=Iv(e,f),b=Iv(e,b),Ev(this.g,f,a,b,null,c,this.i,d,this.j))}};function Iv(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Jv(a,b,c,d){Hv.call(this,a,b,c||d);if(c||d)this.i=65|(d?32:132)}E(Jv,Hv);function Kv(){}E(Kv,Ys);da(Kv);h=Kv.prototype;h.Gb=function(){return"button"};h.Pa=function(a,b,c){switch(b){case 8:case 16:Xs(a,"pressed",c);break;default:case 64:case 1:Kv.m.Pa.call(this,a,b,c)}};h.V=function(a){var b=Kv.m.V.call(this,a);this.Rb(b,a.ub());var c=a.U();c&&this.Fe(b,c);a.oa&16&&this.Pa(b,16,et(a,16));return b};h.va=function(a,b){b=Kv.m.va.call(this,a,b);var c=this.U(b);a.S=c;a.Sd(this.ub(b));a.oa&16&&this.Pa(b,16,et(a,16));return b};h.U=ca;h.Fe=ca;h.ub=function(a){return a.title};
h.Rb=function(a,b){a&&b&&(a.title=b)};h.D=function(){return"goog-button"};function Lv(){}E(Lv,Kv);da(Lv);h=Lv.prototype;h.Gb=function(){};h.V=function(a){qt(a);xt(a);vt(a,32,!1);return a.g.t("button",{"class":$s(this,a).join(" "),disabled:!a.isEnabled(),title:a.ub()||"",value:a.U()||""},a.Eb()||"")};h.yd=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};h.va=function(a,b){qt(a);xt(a);vt(a,32,!1);if(b.disabled){var c=this.Gc(1);jt(b,c)}return Lv.m.va.call(this,a,b)};
h.Uf=function(a){As(a).listen(a.p(),"click",a.Mb)};h.zd=ca;h.Oe=ca;h.Ne=function(a){return a.isEnabled()};h.tc=ca;h.R=function(a,b,c){Lv.m.R.call(this,a,b,c);(a=a.p())&&1==b&&(a.disabled=c)};h.U=function(a){return a.value};h.Fe=function(a,b){a&&(a.value=b)};h.Pa=ca;function Mv(a,b,c){$.call(this,a,b||Lv.X(),c)}E(Mv,$);h=Mv.prototype;h.U=function(){return this.S};h.Sf=function(a){this.S=a;this.i.Fe(this.p(),a)};h.ub=function(){return this.O};h.Rb=function(a){this.O=a;this.i.Rb(this.p(),a)};h.Sd=function(a){this.O=a};h.I=function(){Mv.m.I.call(this);delete this.S;delete this.O};h.T=function(){Mv.m.T.call(this);if(this.oa&32){var a=this.i.ac(this);a&&As(this).listen(a,"keyup",this.uc)}};
h.uc=function(a){return 13==a.g&&"key"==a.type||32==a.g&&"keyup"==a.type?this.Mb(a):32==a.g};ot("goog-button",function(){return new Mv(null)});function Nv(){}E(Nv,Kv);da(Nv);h=Nv.prototype;h.V=function(a){var b=$s(this,a),b=a.g.t("div",{"class":"goog-inline-block "+b.join(" ")},this.pd(a.sa(),a.g));this.Rb(b,a.ub());at(this,a,b);return b};h.Gb=function(){return"button"};h.Ca=function(a){return a&&a.firstChild.firstChild};h.pd=function(a,b){return b.t("div","goog-inline-block "+(this.D()+"-outer-box"),b.t("div","goog-inline-block "+(this.D()+"-inner-box"),a))};h.yd=function(a){return"DIV"==a.tagName};
h.va=function(a,b){Ov(b,!0);Ov(b,!1);var c;a:{c=a.g.Qf(b);var d=this.D()+"-outer-box";if(c&&it(c,d)&&(c=a.g.Qf(c),d=this.D()+"-inner-box",c&&it(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.pd(b.childNodes,a.g));kt(b,["goog-inline-block",this.D()]);return Nv.m.va.call(this,a,b)};h.D=function(){return"goog-custom-button"};
function Ov(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==va(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function Pv(){}E(Pv,Nv);da(Pv);Jb&&(Pv.prototype.sc=function(a,b){var c=Pv.m.Ca.call(this,a&&a.firstChild);if(c){var d;d=Kg(a).t("div","goog-inline-block "+(this.D()+"-caption"),b);var e=c.parentNode;e&&e.replaceChild(d,c)}});h=Pv.prototype;h.Ca=function(a){a=Pv.m.Ca.call(this,a&&a.firstChild);Jb&&a&&a.__goog_wrapper_div&&(a=a.firstChild);return a};h.Pa=function(a,b,c){64!=b&&Pv.m.Pa.call(this,a,b,c)};
h.va=function(a,b){var c=Og(document,"*","goog-menu",b)[0];if(c){T(c,!1);Mg(c).body.appendChild(c);var d=new Av;Ds(d,c);a.Xc(d)}return Pv.m.va.call(this,a,b)};h.pd=function(a,b){return Pv.m.pd.call(this,[b.t("div","goog-inline-block "+(this.D()+"-caption"),a),b.t("div","goog-inline-block "+(this.D()+"-dropdown"),"\u00a0")],b)};h.D=function(){return"goog-menu-button"};function Qv(a,b,c,d){Mv.call(this,a,c||Pv.X(),d);vt(this,64,!0);this.s=new Jv(null,5);b&&this.Xc(b);this.ea=new kf(500);!Oh&&!Ph||Wb("533.17.9")||(this.Dd=!0)}E(Qv,Mv);h=Qv.prototype;h.Dd=!1;h.T=function(){Qv.m.T.call(this);this.h&&Rv(this,this.h,!0);Xs(this.W,"haspopup",!!this.h)};h.pb=function(){Qv.m.pb.call(this);if(this.h){this.na(!1);this.h.pb();Rv(this,this.h,!1);var a=this.h.p();a&&Wg(a)}};h.I=function(){Qv.m.I.call(this);this.h&&(this.h.ra(),delete this.h);delete this.da;this.ea.ra()};
h.Oc=function(a){Qv.m.Oc.call(this,a);et(this,4)&&(this.na(!et(this,64),a),this.h&&(this.h.Ab=et(this,64)))};h.bc=function(a){Qv.m.bc.call(this,a);this.h&&!et(this,4)&&(this.h.Ab=!1)};h.Mb=function(){ut(this,!1);return!0};h.Ug=function(a){this.h&&this.h.Oa&&!this.Qe(a.target)&&this.na(!1)};h.Qe=function(a){var b;if(!(b=a&&Yg(this.p(),a))){if(b=this.h)a:if(b=this.h,Yg(b.p(),a))b=!0;else{for(var c=0,d=Fs(b);c<d;c++){var e=Gs(b,c);if("function"==typeof e.Qe&&e.Qe(a)){b=!0;break a}}b=!1}b=b||!1}return b};
h.uc=function(a){if(32==a.g){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.Oa){var b=this.h.ab(a);return 27==a.g?(this.na(!1),!0):b}return 40==a.g||38==a.g||32==a.g||13==a.g?(this.na(!0),!0):!1};h.Se=function(){this.na(!1)};h.bh=function(){et(this,4)||this.na(!1)};h.Ad=function(a){this.Dd||this.na(!1);Qv.m.Ad.call(this,a)};
h.Xc=function(a){var b=this.h;if(a!=b&&(b&&(this.na(!1),this.aa&&Rv(this,b,!1),delete this.h),this.aa&&Xs(this.W,"haspopup",!!a),a)){this.h=a;Bs(a,this);a.Nc(!1);var c=this.Dd;(a.je=c)&&Rt(a,!0);this.aa&&Rv(this,a,!0)}return b};h.Pe=function(a,b){var c=Qv.m.Pe.call(this,a,b);c&&!this.Ha&&this.na(!1);return c};h.setEnabled=function(a){Qv.m.setEnabled.call(this,a);this.isEnabled()||this.na(!1)};
h.na=function(a,b){Qv.m.na.call(this,a);if(this.h&&et(this,64)==a){if(a)this.h.aa||this.h.render(),this.n=si(this.p()),this.l=zi(this.p()),Sv(this),this.h.Pb(-1);else{ut(this,!1);this.h.Ab=!1;var c=this.p();c&&Xs(c,"activedescendant","");if(null!=this.C&&(this.C=void 0,c=this.h.p())){var d="",e;d instanceof Jg?(e=d.height,d=d.width):e="";c.style.width=vi(d,!0);c.style.height=vi(e,!0)}}this.h.Nc(a,!1,b);this.G||(c=As(this),d=a?c.listen:c.Fa,d.call(c,this.g.g,"mousedown",this.Ug,!0),this.Dd&&d.call(c,
this.h,"blur",this.bh),d.call(c,this.ea,mf,this.qh),a?lf(this.ea):this.ea.stop())}};function Sv(a){if(a.h.aa){var b=a.da||a.p(),c=a.s;a.s.g=b;b=a.h.p();a.h.Oa||(b.style.visibility="hidden",T(b,!0));!a.C&&a.s.n&&a.s.i&32&&(a.C=wi(b));c.l(b,c.h^1,null,a.C);a.h.Oa||(T(b,!1),b.style.visibility="visible")}}
h.qh=function(){var a=zi(this.p()),b=si(this.p());(this.l==a||this.l&&a&&this.l.left==a.left&&this.l.width==a.width&&this.l.top==a.top&&this.l.height==a.height)&&(this.n==b||this.n&&b&&this.n.top==b.top&&this.n.right==b.right&&this.n.bottom==b.bottom&&this.n.left==b.left)||(this.l=a,this.n=b,Sv(this))};function Rv(a,b,c){var d=As(a);c=c?d.listen:d.Fa;c.call(d,b,"action",a.Se);c.call(d,b,"highlight",a.Og);c.call(d,b,"unhighlight",a.Pg)}
h.Og=function(a){var b=this.p();null!=a.target.p()&&Xs(b,"activedescendant",a.target.p().id)};h.Pg=function(){if(!Mt(this.h)){var a=this.p();Xs(a,"activedescendant","")}};ot("goog-menu-button",function(){return new Qv(null)});function Tv(a){L.call(this);this.g=[];Uv(this,a)}E(Tv,L);Tv.prototype.h=null;function Uv(a,b){b&&(Na(b,function(a){Vv(a,!1)},a),$a(a.g,b))}Tv.prototype.td=function(){return Za(this.g)};Tv.prototype.clear=function(){Va(this.g);this.h=null};Tv.prototype.I=function(){Tv.m.I.call(this);delete this.g;this.h=null};function Vv(a,b){a&&"function"==typeof a.yc&&a.yc(b)};function Wv(a,b,c,d){Qv.call(this,a,b,c,d);this.J=this.sa()}E(Wv,Qv);h=Wv.prototype;h.Z=null;h.T=function(){Wv.m.T.call(this);Xv(this);Yv(this)};h.Vb=function(a){Wv.m.Vb.call(this,a);(a=this.Eb())?(this.J=a,Xv(this)):this.Z&&Zv(this,this.Z.g[0]||null)};h.I=function(){Wv.m.I.call(this);this.Z&&(this.Z.ra(),this.Z=null);this.J=null};h.Se=function(a){Zv(this,a.target);Wv.m.Se.call(this,a);a.Mc();this.dispatchEvent("action")};h.fh=function(){var a=this.Z?this.Z.h:null;Wv.m.Sf.call(this,a&&a.U());Xv(this)};
h.Xc=function(a){var b=Wv.m.Xc.call(this,a);a!=b&&(this.Z&&this.Z.clear(),a&&(this.Z?Es(a,function(a){$v(a);var b=this.Z,e=b.g.length;a&&(Vv(a,!1),ab(b.g,e,0,a))},this):aw(this,a)));return b};function Zv(a,b){if(a.Z){var c=a.Z?a.Z.h:null,d=a.Z;b!=d.h&&(Vv(d.h,!1),d.h=b,Vv(b,!0));d.dispatchEvent("select");b!=c&&a.dispatchEvent("change")}}h.Sf=function(a){if(null!=a&&this.Z)for(var b=0,c;c=this.Z.g[b]||null;b++)if(c&&"function"==typeof c.U&&c.U()==a){Zv(this,c);return}Zv(this,null)};
function aw(a,b){a.Z=new Tv;b&&Es(b,function(a){$v(a);var b=this.Z,e=b.g.length;a&&(Vv(a,!1),ab(b.g,e,0,a))},a);Yv(a)}function Yv(a){a.Z&&As(a).listen(a.Z,"select",a.fh)}function Xv(a){var b=a.Z?a.Z.h:null,b=b?b.Eb():a.J;a.i.sc(a.p(),b);a.Hb=b}function $v(a){a.gf=a instanceof wv?"option":"separator"}h.na=function(a,b){Wv.m.na.call(this,a,b);et(this,64)&&(this.h||this.Xc(new Av(this.g)),(this.h||null).Pb(this.Z?this.Z.h?Ma(this.Z.g,this.Z.h):-1:-1))};ot("goog-select",function(){return new Wv(null)});function bw(){}E(bw,Pv);da(bw);bw.prototype.D=function(){return"goog-toolbar-menu-button"};function cw(a,b,c,d){Wv.call(this,a,b,c||bw.X(),d)}E(cw,Wv);ot("goog-toolbar-select",function(){return new cw(null)});function dw(){}E(dw,Ys);da(dw);h=dw.prototype;h.Gb=function(){};function ew(a,b,c,d){var e=d.t("div",a.D()+"-inner-box");a=d.t("div",a.D()+"-outer-box",e);d.appendChild(b,a);d.appendChild(e,c)}h.va=function(a,b){var c=a.g,d=b;b=c.t("div","goog-inline-block");c.mh(b,d);ew(this,b,d,c);dw.m.va.call(this,a,b);a.Hb=d.value;return b};h.V=function(a){var b=a.g,c=b.t("div","goog-inline-block "+$s(this,a).join(" "));a=b.t("input",{type:"text",value:a.sa()||"",disabled:!a.isEnabled()});ew(this,c,a,b);return c};
h.yd=function(a){return"INPUT"==a.tagName&&(!a.type||"TEXT"==a.type.toUpperCase())};h.Ca=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};h.ac=function(a){return this.Ca(a.p())};h.Oe=ca;h.Ne=function(a){return a.isEnabled()};h.tc=ca;h.R=function(a,b,c){dw.m.R.call(this,a,b,c);1==b&&(a=this.Ca(a.p()))&&(a.disabled=c)};h.Pa=ca;
h.sc=function(a,b){var c=this.Ca(a);c&&(c.value=b)};h.sa=function(a){return(a=this.Ca(a))?a.value:null};h.D=function(){return"wgui-textinput"};function fw(a,b,c){$.call(this,a,b||dw.X(),c);qt(this);st(this);xt(this);vt(this,32,!1);a||(this.Hb="")}E(fw,$);fw.prototype.T=function(){fw.m.T.call(this);var a=this.i.ac(this);if(a){var b=this.j||(this.j=new Ns);Os(b,a);As(this).listen(b,"key",this.ab)}};fw.prototype.sa=function(){return this.p()?this.i.sa(this.p()):null};fw.prototype.U=function(){return this.sa()};fw.prototype.Eb=function(){return this.sa()||""};function gw(a){L.call(this);this.parent=a;this.result=this.g=null}E(gw,L);h=gw.prototype;h.getParent=function(){return this.parent};h.ka=function(){return this.g};function hw(a){if(a.g)return a.g.qa();if(a.result)return a.result.storeName;throw Error("No module name");}h.M=function(){return this.parent.M()};
function iw(a,b){b.record?a.g=b.record:a.g=null;a.result=b;a.dispatchEvent(new K("change",a));a.g||a.parent.send("list",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]).B(function(a){a=a[0].result;a[0]&&(this.g=new Eu(this.parent,new Mq(this.parent.M(),jq[jq.indexOf(this.result.storeName)],a[0])),this.dispatchEvent(new K("change",this)))},a)}h.clear=function(){if(this.g||this.result)this.result=this.g=null,this.dispatchEvent(new K("change",this))};
h.toString=function(){return"ydn.crm.sugar.model.Result:"+this.g};h.Va=function(){return!this.g&&!this.result};function jw(){}E(jw,Ys);da(jw);jw.prototype.D=function(){return"search-result sugar-panel"};jw.prototype.V=function(a){var b=jw.m.V.call(this,a),c=a.g,d=c.t("div","record-header"),e=c.t("div","record-body");b.appendChild(d);b.appendChild(e);a=hw(a.L);e=c.t("a","title");c=c.t("span",{"class":"icon"},a.substr(0,2));d.appendChild(c);d.appendChild(e);d.classList.add(a);return b};
jw.prototype.refresh=function(a){var b=a.L,c=a.p();if((b=b.ka())&&b.g&&b.g.g){var d=Ng("record-header",a.p()),e=b.qa();d.className="record-header "+e;a=Ng("title",d);d=Ng("icon",d);a.textContent=Nq(b.ka());d.textContent=e.substring(0,2);e=b.ka();e=mq(e.domain,e.$,e.F());a.href=e;a.target=b.M();T(c,!0)}else T(c,!1)};function kw(a,b,c){$.call(this,null,null,a);this.pa(b);qt(this);st(this);xt(this);var d=new Mq(b.M(),hw(b)),d=new Eu(b.getParent(),d);this.h=new dv(d,null,a);this.h.h=!c;this.ba(this.h,!0);As(this).listen(b,"change",this.l,!0)}E(kw,$);kw.prototype.l=function(a){var b=this.h.L,c=this.L.ka();b.Qb(c?c.ka():null);this.i.refresh(this);this.h.refresh(a)};mt(kw,jw);function lw(a,b,c){ws.call(this,a);this.pa(b);this.i=new ws(a);this.h=null;this.j=[];this.l=0;this.n=!!c;this.s=!this.n}E(lw,ws);lw.prototype.za=function(){lw.m.za.call(this);var a=this.g,b=this.p(),c=a.t("div","header");b.appendChild(c);this.h=new Dv(null,null,a);for(var d=new Av(a),e=0;e<kq.length;e++)d.ba(new wv(kq[e]),!0);d=new cw("Module",d,null,a);this.h.ba(d,!0);this.h.ba(new fw(""),!0);this.h.render(c);this.n&&d.Pe(!1);a=a.t("div","content");b.appendChild(a);this.ba(this.i,!0)};
lw.prototype.T=function(){lw.m.T.call(this);var a=Gs(this.h,1);As(this).listen(a,"action",this.C,!0)};function mw(a,b){if(b){for(var c=Fs(a.i),d=0;d<c;d++){var e=Gs(a.i,d).L;if(e.Va()){iw(e,b);return}}30<c?iw(Gs(a.i,0).L,b):(c=new gw(a.L),iw(c,b),c=new kw(a.g,c,!a.s),a.i.ba(c,!0))}}
function nw(a,b,c,d){Xu(a.L,b,c,d).u(function(a){var b=a[0];if(b.result[0]){a=jq[jq.indexOf(b.store)];var g=new Gu(this.L,a),b=new Mq(this.L.M(),a,b.result[0]);g.Qb(b);b=b.F();mw(this,{storeName:a,primaryKey:b,record:g,value:d,tokens:[{keyPath:c}]})}ow(this)},function(a){ow(this);throw a;},a)}
function pw(a,b){0==a.l&&(a.l=b);var c=100*(a.l-b)/a.l,d=Gs(a.h,1).p(),d=Og(document,"input",null,d)[0].style,e=["rgb(255, 255, 255) 0%"];e[1]="rgb(255, 255, 255) "+c.toFixed(1)+"%";e[2]="rgb(135,224,253) "+(c+0.1).toFixed(1)+"%";e[3]="rgb(135,224,253) 100%";d.background="linear-gradient(to right, "+e.join(", ")+")"}
function ow(a){var b=a.j[0];if(b){b.Ac++;pw(a,3*(a.j.length-1)+(3-b.Ac));var c=a.L;0==b.Ac?nw(a,b.$,"ydn$emails",b.Vc):1==b.Ac?(c=b.Vc.match(/\d/g),3>(c?c.length:0)?ow(a):nw(a,b.$,"ydn$phones",b.Vc)):2==b.Ac?Yu(c,b.$,b.Vc).u(function(a){a=a[0].result;for(var b=a.length||0,c=0;c<b;c++)mw(this,a[c]);ow(this)},function(a){throw a;},a):(a.j.shift(),0<a.j.length&&ow(a))}}
lw.prototype.C=function(){var a=Gs(this.h,1).sa();if(a&&(a=a.trim(),2<=a.length)){var b;b=(b=Gs(this.h,0).Z?Gs(this.h,0).Z.h:null)?b.Eb():null;this.j.length=0;if(b)this.j[0]={$:b,Vc:a,Ac:-1};else for(b=0;b<kq.length;b++)this.j[b]={$:kq[b],Vc:a,Ac:-1};for(a=Fs(this.i)-1;0<=a;a--)Gs(this.i,a).L.clear();this.l=0;ow(this)}};lw.prototype.Aa=function(){return Ng("content",this.p())};function qw(a,b){ws.call(this,a);this.pa(b)}E(qw,ws);h=qw.prototype;h.logger=R("ydn.crm.inj.sugar.Header");h.D=function(){return"sugar-header"};
h.za=function(){qw.m.za.call(this);var a=this.p(),b=this.L,c=this.g;Eg(a,this.D());var d=c.t("a");d.textContent=b.M();d.href=b.h.baseUrl?b.h.baseUrl:"https://"+b.h.domain;d=c.t("div",{"class":"main-title",title:"SugarCRM"},[d]);a.appendChild(d);var d=[],e=chrome.extension.getURL(Zn)+"#credentials",e=c.t("a",{href:e,target:"option-page"},"Setup host permission");e.setAttribute("title","Your permission is required to connect your server from this extension. Without permission request to server will be slow.");
d.push(e);d=c.t("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.t("input",{name:"username",type:"text"}),e=c.t("div",null,[e]),f=c.t("input",{name:"password",type:"password"}),f=c.t("div",null,[f]),g=c.t("div","message"),e=c.t("div","login-form",[e,f,g]);T(d,!1);T(e,!1);a.appendChild(e);b=new lw(c,b,!0);this.ba(b);c=c.t("div");a.appendChild(c);b.render(c)};
h.T=function(){qw.m.T.call(this);var a=this.p(),b=As(this);this.p().querySelector(".host-permission");a=a.querySelector(".login-form");a=new Ns(a);b.listen(a,"key",this.zh);b.listen(dd(),"post",function(a){a=a.getMessage();if("update-host-permission"==a.req&&(a=a.data)&&a.origins){a=a.origins;for(var b=this.info.M(),e=0;e<a.length;e++)if((new ud(a[e])).M()==b){P(this.logger,"has host permission on "+b);var f=this.L;f.h.hostPermission=!0;this.pa(f)}}},!1)};
h.zh=function(a){if(13==a.g){var b=this.p().querySelector(".login-form"),c=this.L;a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";Wu(c,a,d).u(function(){c.isLogin()?(e.textContent="",T(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};h.M=function(){return this.L.M()};
h.refresh=function(){var a=this.L,b=a.M(),c=this.p(),d=c.querySelector(".main-title a"),e=c.querySelector(".login-form"),f=c.querySelector(".host-permission");d.textContent=b;d.href=a.h.baseUrl||null||"https://"+b;e.querySelector("input[name=username]").textContent=a.h.userName||null||"";T(e,!1);T(f,!1);T(c,!0);a.isLogin()||gd("sugarcrm",b).send("about").B(function(a){T(e,!a.isLogin)});a.isLogin()&&!a.h.hostPermission&&(a=chrome.extension.getURL($n),f.querySelector("a").href=a+"?"+b,T(f,!0))};function rw(a,b,c){ws.call(this,a);a=new Zu(b,c);this.pa(a)}E(rw,ws);rw.prototype.D=function(){return"sugar-panel"};rw.prototype.za=function(){rw.m.za.call(this);var a=this.g,b=this.p();Eg(b,this.D());b=new qw(a,this.L);this.ba(b,!0);a=new nv(a,this.L);this.ba(a,!0)};rw.prototype.T=function(){rw.m.T.call(this)};rw.prototype.logger=R("ydn.crm.inj.SugarPanel");function sw(){this.g=null}var tw;function uw(){tw||(tw=new sw);return tw}sw.prototype.kb=function(a,b){this.g?a.call(b):gd().send("user-setting").B(function(c){this.g=c||vw;a.call(b)},this)};
sw.prototype.h=function(a){a=gd("sugarcrm",a);for(var b=[],c=0;c<kq.length;c++){var d=a.send("info-module",kq[c]).B(function(a){var b="",c="",d;for(d in a.module_fields){var l=a.module_fields[d];if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(d))l.group="name";else if(/^email\d?$/.test(d))l.group="email";else if(/^phone?/.test(d))l.group="phone";else if(!l.group&&ra(d,b)){l.group=c;continue}b=d;c=l.group}},this);b.push(d)}return(new jm(b)).B(function(a){for(var b={},c=0;c<
kq.length;c++)b[kq[c]]=a[c][1];return b},this)};var vw={};function ww(a){ws.call(this,a)}E(ww,ws);ww.prototype.za=function(){ww.m.za.call(this);var a=this.p(),b=this.g;Eg(a,"sugarcrm-link-panel");b=b.createElement("a");b.textContent="Setup SugarCRM";b.href=chrome.extension.getURL(Zn)+"#credentials";b.className="sugarcrm-setup-link";a.appendChild(b);T(a,!1)};ww.prototype.pa=function(a){ww.m.pa.call(this,a);a=u(a)&&0<a.length;T(this.p(),!a)};function xw(a){ws.call(this,a);this.i=new kf(400);this.h=0;this.j="";this.l=uw();this.l.kb(ib)}E(xw,ws);h=xw.prototype;h.D=function(){return"inj"};h.kh=function(){this.h++;this.j!=location.href&&(N(this.logger,"url already changed"),this.i.stop());40<this.h&&(N(this.logger,"sniff give up after "+this.h),this.i.stop());var a=this.ig(!1);a?(T(this.p(),!0),this.i.stop(),this.pa(a)):(N(this.logger,"Could not sniff contact identifier."),T(this.p(),!1))};
h.za=function(){xw.m.za.call(this);var a=this.p();a.classList.add(this.D());var b=new ww;this.ba(b,!0);T(a,!1)};h.T=function(){xw.m.T.call(this);As(this).listen(this.i,mf,this.kh,!0)};h.logger=R("ydn.crm.inj.SidebarPanel");function yw(a,b){var c=b.domain;return a.l.h(c).B(function(a){a=new rw(this.g,b,a);for(var e=0;e<Fs(this);e++){var f=Gs(this,e);if(f instanceof rw&&f.L.M()==c)return}P(this.logger,"sugar panel "+c+" created");this.ba(a,!0)},a)}
h.init=function(){return 1<Fs(this)?sb():gd().send("list-sugarcrm").B(function(a){Gs(this,0).pa(a);for(var b=[],c=0;c<a.length;c++){var d;a:{for(d=1;d<Fs(this);d++){var e=Gs(this,d);if(e instanceof rw&&e.L.M()==a[c]){d=!0;break a}}d=!1}d||b.push(yw(this,a[c]))}return km(b)},this)};h.update=function(){Q(this.logger,"updating sidebar");this.init();this.h=0;this.j=location.href;lf(this.i)};
h.pa=function(a){xw.m.pa.call(this,a);var b=Fs(this);1<b?P(this.logger,"setting module to "+b+" children"):N(this.logger,"no sugar instance");for(var c=1;c<b;c++){var d=Gs(this,c);if(d instanceof rw){var e=a,f=d.L,d=d.p();e.g?(T(d,!0),$u(f,e)):T(d,!1)}else N(this.logger,"unknown panel at "+c)}};
h.ig=function(a){var b=this.p();a&&window.console.log("sniff contact "+this.h);var c=document.querySelector('table[role="presentation"]');if(!c)return a&&N(this.logger,"Could not find main view"),null;a&&1!=c.childElementCount&&N(this.logger,"Probably our assumption about layout is wrong");var d=c.querySelector("tr");if(a&&3!=d.childElementCount)return N(this.logger,"Probably our assumption about layout is very wrong"),null;c=d.children[2];a&&!c.style.height&&N(this.logger,"Probably our assumption about layout is wrong");
c=c.querySelector("table");if(!c)return N(this.logger,"No Contact panel found."),null;var e;a:if(e=5<this.h,d=c.querySelector("img[jid]")){for(e=d.getAttribute("jid");d&&"TD"!=d.tagName;)d=d.parentElement;d=d.nextElementSibling.querySelector("span[title]").getAttribute("title");e=new bu(e,d)}else{if(e&&(e=c.querySelector("span[title]"))&&(d=e.getAttribute("title").trim(),0<d.length&&(e=document.querySelector('span[name="'+d+'"][email]')))){e=e.getAttribute("email");e=new bu(e,d);break a}e=null}if(!e)return null;
for(var f,d=c,g=0;4>g;g++)if(d.parentElement&&(d=d.parentElement,d.nextElementSibling&&"DIV"==d.nextElementSibling.tagName)){var d=d.parentElement,g=d.lastElementChild,k=!!g.querySelector("a[href]");f=document.createElement("div");k?d.parentElement.insertBefore(f,g):d.appendChild(f);break}f||(a&&N(this.logger,"usual root position is not available, locating on second best position"),f=c.ownerDocument,a=f.createElement("td"),a.setAttribute("colspan","2"),d=f.createElement("tr"),d.className="widget-topraw",
d.appendChild(a),(c.querySelector("tbody")||c).appendChild(d),f=a);b.parentElement&&b.parentElement.removeChild(this.p());f.appendChild(b);T(this.p(),!0);return e};function zw(){this.g=this.h=null}zw.prototype.init=function(a){this.h=a;a=document.getElementById("user-login");Cc(a,"click",function(a){a.preventDefault();window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=600, height=400, top="+(screen.height/2-200)+", left="+(screen.width/2-300));return!0},!0,this)};
function Aw(a,b){if(!b||b instanceof Error)a.g=null;else if(a.g=b,a.h){var c=document.getElementById("user-login"),d=document.getElementById("user-name"),e=Ng("login-message",a.h);b instanceof Error?(e.textContent=b.message,T(e,!0),T(c,!1)):a.g.is_login?(c.href=a.g.logout_url,c.textContent="logout",d.textContent=a.g.email,T(e,!1),T(c,!1)):(c.href=a.g.login_url,c.textContent="login",c.style.display="",d.textContent="",T(e,!0),T(c,!0))}};function Bw(){this.j=document.createElement("div");document.body.appendChild(this.j);ed("gmail");this.i=new xw;this.i.render(this.j);var a=this.history=new us,b=Hd(new ud(document.location.href))+"/";a.sh=b;Cc(this.history,"navigate",this.Xg,!1,this);this.l=null;this.g=!1;new Zt;this.h=new zw}h=Bw.prototype;h.logger=R("ydn.crm.inj.App");h.isLogin=function(){return this.g};h.Xg=function(a){a.g!=this.l&&(this.l=a.g,/^contact/.test(a.g)||/\w+\/[\w\d]{10,18}$/.test(a.g)&&this.i.update())};
h.init=function(){P(this.logger,"init "+this);Cw(this);var a=window.setInterval(function(){document.querySelector('a[href="http://mail.google.com/mail/help/terms.html"]')&&window.clearTimeout(a)},500);window.setTimeout(function(){window.clearTimeout(a)},15E3)};h.toString=function(){return"inj.Main:0.7.1"};
function Cw(a){gd().send("login-info").u(function(a){a:{if(a&&a.email){Q(this.logger,"user "+a.email+" login");this.g=!0;var c=this.h.g;if(c&&c.email==a.email)break a;this.i.init();this.history.setEnabled(!0)}else this.g&&(this.g=!1,this.history.setEnabled(!1));Aw(this.h,a)}},function(a){N(this.logger,a.name+" "+a.message);Aw(this.h,a)},a)}h.yh=function(){return{sidebar:this.i,setting:this.h}};oa("ydn.crm.version","0.7.1");oa("runInjApp",function(){yo();var a=new Bw;a.init();return a});oa("runEventApp",function(){yo();var a=new ns;a.init();ls(a);return a});ns.prototype.xp=ns.prototype.O;Bw.prototype.xp=Bw.prototype.yh;xw.prototype.sniff=xw.prototype.ig;oa("goog.async.Deferred",F);F.prototype.addCallback=F.prototype.B;F.prototype.addErrback=F.prototype.Dc;F.prototype.addBoth=F.prototype.fa;F.prototype.addCallbacks=F.prototype.u;function Dw(a,b,c){wv.call(this,a,b,c);vt(this,8,!0);if(a=this.p())b=this.i,a&&(Ws(a,"menuitemradio"),tv(b,this,a,!0))}E(Dw,wv);Dw.prototype.Mb=function(){return this.dispatchEvent("action")};ot("goog-option",function(){return new Dw(null)});function Ew(){}E(Ew,Nv);da(Ew);Ew.prototype.D=function(){return"goog-toolbar-button"};function Fw(a,b,c){Mv.call(this,a,b||Ew.X(),c)}E(Fw,Mv);ot("goog-toolbar-button",function(){return new Fw(null)});function Gw(a,b,c,d){Qv.call(this,a,b,c||bw.X(),d)}E(Gw,Qv);ot("goog-toolbar-menu-button",function(){return new Gw(null)});function Hw(a,b){yv.call(this,a||Bv.X(),b)}E(Hw,yv);ot("goog-toolbar-separator",function(){return new Hw});function Iw(a,b,c){Mv.call(this,a,b||Nv.X(),c);vt(this,16,!0)}E(Iw,Mv);ot("goog-toggle-button",function(){return new Iw(null)});function Jw(a,b,c){Iw.call(this,a,b||Ew.X(),c)}E(Jw,Iw);ot("goog-toolbar-toggle-button",function(){return new Jw(null)});function Kw(){}E(Kw,Ys);da(Kw);Kw.prototype.D=function(){return"record"};Kw.prototype.V=function(a){return Kw.m.V.call(this,a)};function Lw(a,b){$.call(this,null,null,a);this.pa(b)}E(Lw,$);mt(Lw,Kw);function Mw(a,b){ws.call(this,a);this.pa(b);this.i=new ws(a);this.h=new ws(a)}E(Mw,ws);Mw.prototype.Aa=function(){return Ng("content",this.p())};
Mw.prototype.za=function(){Mw.m.za.call(this);var a=this.p(),b;A('<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>')?(Ka('Soy template output is unsafe for use as HTML: <div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>'),
b="zSoyz"):b='<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>';
a.innerHTML=b;Ds(new Dv,Ng("goog-toolbar",a));this.ba(this.i,!0);this.ba(this.h,!0);T(this.h.p(),!1)};Mw.prototype.T=function(){Mw.m.T.call(this);this.p()};Mw.prototype.refresh=function(){};oa("ydn.crm.sugar.model.Sugar",Vu);oa("ydn.crm.ui.sugar.SyncPanel",Mw);oa("ydn.crm.ui.sugar.SearchPanel",lw);oa("ydn.crm.inj.UserSetting",sw);sw.getInstance=uw;sw.prototype.getModuleInfo=sw.prototype.h;oa("ydn.msg.Pipe",Yc);oa("ydn.msg.initPipe",ed);oa("ydn.msg.getChannel",gd);Yc.prototype.listen=Yc.prototype.listen;Yc.prototype.getChannel=Yc.prototype.j;ad.prototype.send=ad.prototype.send;})();

            //# sourceMappingURL=ydn.crm-0.7.1.js.map
        