(function(){var g,aa=aa||{},q=this;function t(a){return void 0!==a}function ba(a){a=a.split(".");for(var b=q,c;c=a.shift();)if(null!=b[c])b=b[c];else return null;return b}function ca(){}function u(a){a.w=function(){return a.eg?a.eg:a.eg=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function v(a){return"array"==da(a)}function w(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function x(a){return"string"==typeof a}function ea(a){return"boolean"==typeof a}function A(a){return"number"==typeof a}function fa(a){return"function"==da(a)}function B(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ga(a){return a[ha]||(a[ha]=++ia)}
var ha="closure_uid_"+(1E9*Math.random()>>>0),ia=0;function ja(a,b,c){return a.call.apply(a.bind,arguments)}function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function C(a,b,c){C=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return C.apply(null,arguments)}function la(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var ma=Date.now||function(){return+new Date};
function na(a,b){var c=a.split("."),d=q;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&t(b)?d[e]=b:d[e]?d=d[e]:d=d[e]={}}function D(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ii=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function oa(a){if(Error.captureStackTrace)Error.captureStackTrace(this,oa);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}D(oa,Error);oa.prototype.name="CustomError";var pa;function qa(a,b){return 0==a.lastIndexOf(b,0)}function ra(a){var b=a.length-8;return 0<=b&&a.indexOf("#archive",b)==b}function sa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function ta(a){return/^[\s\xa0]*$/.test(a)}function va(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}function wa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}
function xa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function ya(a){if(!za.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Aa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ba,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Ca,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Da,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Ea,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Fa,"&#0;"));return a}var Aa=/&/g,Ba=/</g,Ca=/>/g,Da=/"/g,Ea=/'/g,Fa=/\x00/g,za=/[\x00&<>"']/;
function Ga(a){return xa(a.replace(/  /g," &#160;"),void 0)}function Ha(a,b){for(var c=b.length,d=0;d<c;d++){var e=1==c?b:b.charAt(d);if(a.charAt(0)==e&&a.charAt(a.length-1)==e)return a.substring(1,a.length-1)}return a}var Ia={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\"},Ja={"'":"\\'"};
function Ka(a){a=String(a);if(a.quote)return a.quote();for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,h;if(!(h=Ia[d])){if(!(31<e&&127>e))if(d in Ja)d=Ja[d];else if(d in Ia)d=Ja[d]=Ia[d];else{e=d;h=d.charCodeAt(0);if(31<h&&127>h)e=d;else{if(256>h){if(e="\\x",16>h||256<h)e+="0"}else e="\\u",4096>h&&(e+="0");e+=h.toString(16).toUpperCase()}d=Ja[d]=e}h=d}b[f]=h}b.push('"');return b.join("")}function La(a,b){return-1!=a.indexOf(b)}
function Ma(a,b){for(var c=0,d=wa(String(a)).split("."),e=wa(String(b)).split("."),f=Math.max(d.length,e.length),h=0;0==c&&h<f;h++){var k=d[h]||"",l=e[h]||"",m=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var p=m.exec(k)||["","",""],r=n.exec(l)||["","",""];if(0==p[0].length&&0==r[0].length)break;c=Na(0==p[1].length?0:parseInt(p[1],10),0==r[1].length?0:parseInt(r[1],10))||Na(0==p[2].length,0==r[2].length)||Na(p[2],r[2])}while(0==c)}return c}function Na(a,b){return a<b?-1:a>b?1:0}
function Oa(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Pa(a){var b=x(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};function Qa(a,b){b.unshift(a);oa.call(this,sa.apply(null,b));b.shift()}D(Qa,oa);Qa.prototype.name="AssertionError";function Ra(a,b){throw new Qa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var Sa=Array.prototype,Ta=Sa.indexOf?function(a,b,c){return Sa.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(x(a))return x(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ua=Sa.lastIndexOf?function(a,b,c){return Sa.lastIndexOf.call(a,b,null==c?a.length-1:c)}:function(a,b,c){c=null==c?a.length-1:c;0>c&&(c=Math.max(0,a.length+c));if(x(a))return x(b)&&1==b.length?a.lastIndexOf(b,c):-1;for(;0<=c;c--)if(c in a&&a[c]===b)return c;
return-1},Va=Sa.forEach?function(a,b,c){Sa.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Wa=Sa.filter?function(a,b,c){return Sa.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=x(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Xa=Sa.map?function(a,b,c){return Sa.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=x(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=
b.call(c,f[h],h,a));return e},Ya=Sa.some?function(a,b,c){return Sa.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return!0;return!1},Za=Sa.every?function(a,b,c){return Sa.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function $a(a,b){var c=ab(a,b,void 0);return 0>c?null:x(a)?a.charAt(c):a[c]}
function ab(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function bb(a,b){return 0<=Ta(a,b)}function cb(a){if(!v(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function db(a,b){var c=Ta(a,b),d;(d=0<=c)&&Sa.splice.call(a,c,1);return d}function eb(a){return Sa.concat.apply(Sa,arguments)}function fb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function gb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;if(v(d)||(e=w(d))&&Object.prototype.hasOwnProperty.call(d,"callee"))a.push.apply(a,d);else if(e)for(var f=a.length,h=d.length,k=0;k<h;k++)a[f+k]=d[k];else a.push(d)}}function hb(a,b,c,d){Sa.splice.apply(a,ib(arguments,1))}function ib(a,b,c){return 2>=arguments.length?Sa.slice.call(a,b):Sa.slice.call(a,b,c)}
function jb(a,b){if(!w(a)||!w(b)||a.length!=b.length)return!1;for(var c=a.length,d=kb,e=0;e<c;e++)if(!d(a[e],b[e]))return!1;return!0}function lb(a,b){return a>b?1:a<b?-1:0}function kb(a,b){return a===b};var mb;a:{var nb=q.navigator;if(nb){var ob=nb.userAgent;if(ob){mb=ob;break a}}mb=""};var pb,qb;function rb(){return q.navigator||null}var sb=La(mb,"Opera")||La(mb,"OPR"),G=La(mb,"Trident")||La(mb,"MSIE"),tb=La(mb,"Gecko")&&!La(mb.toLowerCase(),"webkit")&&!(La(mb,"Trident")||La(mb,"MSIE")),ub=La(mb.toLowerCase(),"webkit");ub&&La(mb,"Mobile");var vb,wb=rb();vb=wb&&wb.platform||"";pb=La(vb,"Mac");La(vb,"Win");La(vb,"Linux");qb=!!rb()&&La(rb().appVersion||"","X11");var xb=mb;xb&&La(xb,"Android");xb&&La(xb,"iPhone");xb&&La(xb,"iPad");
function yb(){var a=q.document;return a?a.documentMode:void 0}var zb=function(){var a="",b;if(sb&&q.opera)return a=q.opera.version,fa(a)?a():a;tb?b=/rv\:([^\);]+)(\)|;)/:G?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:ub&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(mb))?a[1]:"");return G&&(b=yb(),b>parseFloat(a))?String(b):a}(),Ab={};function Bb(a){return Ab[a]||(Ab[a]=0<=Ma(zb,a))}var Cb=q.document,Db=Cb&&G?yb()||("CSS1Compat"==Cb.compatMode?parseInt(zb,10):5):void 0;var Eb=!G||G&&9<=Db,Fb=!tb&&!G||G&&G&&9<=Db||tb&&Bb("1.9.1"),Gb=G&&!Bb("9");function Hb(a,b){this.x=t(a)?a:0;this.y=t(b)?b:0}g=Hb.prototype;g.clone=function(){return new Hb(this.x,this.y)};g.toString=function(){return"("+this.x+", "+this.y+")"};function Ib(a,b){return new Hb(a.x-b.x,a.y-b.y)}g.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};g.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function Jb(a,b){this.width=a;this.height=b}g=Jb.prototype;g.clone=function(){return new Jb(this.width,this.height)};g.toString=function(){return"("+this.width+" x "+this.height+")"};g.Ia=function(){return!(this.width*this.height)};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Kb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function Lb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function Mb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function Nb(a,b){for(var c=w(b),d=c?b:arguments,c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}function Ob(a,b,c){if(b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function Pb(a,b){return b in a?a[b]:void 0}function Qb(a){var b={},c;for(c in a)b[a[c]]=c;return b}var Rb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Sb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Rb.length;f++)c=Rb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function Tb(a){var b=arguments.length;if(1==b&&v(arguments[0]))return Tb.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c}
function Ub(a){var b=arguments.length;if(1==b&&v(arguments[0]))return Ub.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Vb(a){return a?new Wb(Xb(a)):pa||(pa=new Wb)}function Yb(a,b){var c=b||document,d=null;c.querySelectorAll&&c.querySelector?d=c.querySelector("."+a):d=Zb(document,"*",a,b)[0];return d||null}
function Zb(a,b,c,d){a=d||a;b=b&&"*"!=b?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)b==h.nodeName&&(d[e++]=h);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++)b=h.className,"function"==typeof b.split&&bb(b.split(/\s+/),c)&&(d[e++]=h);d.length=e;return d}return a}
function $b(a,b){Kb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ac?a.setAttribute(ac[d],b):qa(d,"aria-")||qa(d,"data-")?a.setAttribute(d,b):a[d]=b})}var ac={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function bc(a){a=(a||window).document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Jb(a.clientWidth,a.clientHeight)}function cc(a){return ub||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement}function dc(a){return a?ec(a):window}function ec(a){return a.parentWindow||a.defaultView}function fc(a,b,c){return gc(document,arguments)}
function gc(a,b){var c=b[0],d=b[1];if(!Eb&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',ya(d.name),'"');if(d.type){c.push(' type="',ya(d.type),'"');var e={};Sb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(x(d)?c.className=d:v(d)?c.className=d.join(" "):$b(c,d));2<b.length&&hc(a,c,b,2);return c}function hc(a,b,c,d){function e(c){c&&b.appendChild(x(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!w(f)||B(f)&&0<f.nodeType?e(f):Va(ic(f)?fb(f):f,e)}}
function jc(a,b){hc(Xb(a),a,arguments,1)}function kc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function lc(a,b){b.parentNode&&b.parentNode.insertBefore(a,b)}function mc(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function nc(a){if(void 0!=a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function oc(a){return B(a)&&1==a.nodeType}
function pc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function qc(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else kc(a),a.appendChild(Xb(a).createTextNode(String(b)))}var rc={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},sc={IMG:" ",BR:"\n"};function tc(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}function uc(a){a=a.getAttributeNode("tabindex");return null!=a&&a.specified}
function vc(a){a=a.tabIndex;return A(a)&&0<=a&&32768>a}function wc(a){if(Gb&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];xc(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Gb||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function yc(a){var b=[];xc(a,b,!1);return b.join("")}
function xc(a,b,c){if(!(a.nodeName in rc))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in sc)b.push(sc[a.nodeName]);else for(a=a.firstChild;a;)xc(a,b,c),a=a.nextSibling}function ic(a){if(a&&"number"==typeof a.length){if(B(a))return"function"==typeof a.item||"string"==typeof a.item;if(fa(a))return"function"==typeof a.item}return!1}
function zc(a,b,c){if(!b&&!c)return null;var d=b?b.toUpperCase():null;return Ac(a,function(a){return(!d||a.nodeName==d)&&(!c||x(a.className)&&bb(a.className.split(/\s+/),c))})}function Ac(a,b){for(var c=0;a;){if(b(a))return a;a=a.parentNode;c++}return null}function Wb(a){this.g=a||q.document||document}g=Wb.prototype;g.k=function(a){return x(a)?this.g.getElementById(a):a};g.o=function(a,b,c){return gc(this.g,arguments)};g.createElement=function(a){return this.g.createElement(a)};
function Bc(a,b){return a.g.createTextNode(String(b))}function Cc(a){return"CSS1Compat"==a.g.compatMode}function Dc(a){var b=a.g;a=cc(b);b=ec(b);return G&&Bb("10")&&b.pageYOffset!=a.scrollTop?new Hb(a.scrollLeft,a.scrollTop):new Hb(b.pageXOffset||a.scrollLeft,b.pageYOffset||a.scrollTop)}g.appendChild=function(a,b){a.appendChild(b)};g.cf=lc;g.Zf=mc;g.getChildren=function(a){return Fb&&void 0!=a.children?a.children:Wa(a.childNodes,function(a){return 1==a.nodeType})};g.Vf=nc;g.zh=oc;g.contains=pc;var Ec=!G||G&&9<=Db,Fc=!G||G&&9<=Db,Gc=G&&!Bb("9");!ub||Bb("528");tb&&Bb("1.9b")||G&&Bb("8")||sb&&Bb("9.5")||ub&&Bb("528");tb&&!Bb("8")||G&&Bb("9");function Hc(){0!=Ic&&(Jc[ga(this)]=this)}var Ic=0,Jc={};Hc.prototype.P=!1;Hc.prototype.T=function(){if(!this.P&&(this.P=!0,this.B(),0!=Ic)){var a=ga(this);delete Jc[a]}};Hc.prototype.B=function(){if(this.Ta)for(;this.Ta.length;)this.Ta.shift()()};function Kc(a){a&&"function"==typeof a.T&&a.T()};function I(a,b){this.type=a;this.i=this.target=b;this.n=this.j=!1;this.qg=!0}I.prototype.T=function(){};I.prototype.stopPropagation=function(){this.j=!0};I.prototype.preventDefault=function(){this.n=!0;this.qg=!1};function Lc(a){Lc[" "](a);return a}Lc[" "]=ca;function Mc(a,b){I.call(this,a?a.type:"");this.l=this.i=this.target=null;this.g=this.clientY=this.clientX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.s=!1;this.h=null;a&&this.init(a,b)}D(Mc,I);var Nc=[1,4,2];
Mc.prototype.init=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.i=b;var d=a.relatedTarget;if(d){if(tb){var e;a:{try{Lc(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.l=d;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;this.g=a.keyCode||0;this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.s=pb?a.metaKey:
a.ctrlKey;this.state=a.state;this.h=a;a.defaultPrevented&&this.preventDefault()};function Oc(a){return(Ec?0==a.h.button:"click"==a.type?!0:!!(a.h.button&Nc[0]))&&!(ub&&pb&&a.ctrlKey)}Mc.prototype.stopPropagation=function(){Mc.m.stopPropagation.call(this);this.h.stopPropagation?this.h.stopPropagation():this.h.cancelBubble=!0};
Mc.prototype.preventDefault=function(){Mc.m.preventDefault.call(this);var a=this.h;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Gc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Pc="closure_listenable_"+(1E6*Math.random()|0);function Rc(a){return!(!a||!a[Pc])}var Sc=0;function Tc(a,b,c,d,e){this.cc=a;this.proxy=null;this.src=b;this.type=c;this.nd=!!d;this.Ib=e;this.key=++Sc;this.removed=this.md=!1}function Uc(a){a.removed=!0;a.cc=null;a.proxy=null;a.src=null;a.Ib=null};function Vc(a){this.src=a;this.g={};this.h=0}Vc.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.h++);var h=Wc(a,b,d,e);-1<h?(b=a[h],c||(b.md=!1)):(b=new Tc(b,this.src,f,!!d,e),b.md=c,a.push(b));return b};Vc.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=Wc(e,b,c,d);return-1<b?(Uc(e[b]),Sa.splice.call(e,b,1),0==e.length&&(delete this.g[a],this.h--),!0):!1};
function Xc(a,b){var c=b.type;if(!(c in a.g))return!1;var d=db(a.g[c],b);d&&(Uc(b),0==a.g[c].length&&(delete a.g[c],a.h--));return d}Vc.prototype.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,Uc(d[e]);delete this.g[c];this.h--}return b};function Yc(a,b,c,d,e){a=a.g[b.toString()];b=-1;a&&(b=Wc(a,c,d,e));return-1<b?a[b]:null}
function Wc(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.removed&&f.cc==b&&f.nd==!!c&&f.Ib==d)return e}return-1};var Zc="closure_lm_"+(1E6*Math.random()|0),$c={},ad=0;function bd(a,b,c,d,e){if(v(b)){for(var f=0;f<b.length;f++)bd(a,b[f],c,d,e);return null}c=cd(c);return Rc(a)?a.listen(b,c,d,e):dd(a,b,c,!1,d,e)}function dd(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,k=ed(a);k||(a[Zc]=k=new Vc(a));c=k.add(b,c,d,e,f);if(c.proxy)return c;d=fd();c.proxy=d;d.src=a;d.cc=c;a.addEventListener?a.addEventListener(b.toString(),d,h):a.attachEvent(gd(b.toString()),d);ad++;return c}
function fd(){var a=hd,b=Fc?function(c){return a.call(b.src,b.cc,c)}:function(c){c=a.call(b.src,b.cc,c);if(!c)return c};return b}function id(a,b,c,d,e){if(v(b)){for(var f=0;f<b.length;f++)id(a,b[f],c,d,e);return null}c=cd(c);return Rc(a)?a.ob.add(String(b),c,!0,d,e):dd(a,b,c,!0,d,e)}function jd(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)jd(a,b[f],c,d,e);else c=cd(c),Rc(a)?a.ca(b,c,d,e):a&&(a=ed(a))&&(b=Yc(a,b,c,!!d,e))&&kd(b)}
function kd(a){if(A(a)||!a||a.removed)return!1;var b=a.src;if(Rc(b))return Xc(b.ob,a);var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.nd):b.detachEvent&&b.detachEvent(gd(c),d);ad--;(c=ed(b))?(Xc(c,a),0==c.h&&(c.src=null,b[Zc]=null)):Uc(a);return!0}function gd(a){return a in $c?$c[a]:$c[a]="on"+a}function ld(a,b,c,d){var e=1;if(a=ed(a))if(b=a.g[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.nd==c&&!f.removed&&(e&=!1!==md(f,d))}return Boolean(e)}
function md(a,b){var c=a.cc,d=a.Ib||a.src;a.md&&kd(a);return c.call(d,b)}
function hd(a,b){if(a.removed)return!0;if(!Fc){var c=b||ba("window.event"),d=new Mc(c,this),e=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var f=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==c.returnValue)c.returnValue=!0}c=[];for(f=d.i;f;f=f.parentNode)c.push(f);for(var f=a.type,k=c.length-1;!d.j&&0<=k;k--)d.i=c[k],e&=ld(c[k],f,!0,d);for(k=0;!d.j&&k<c.length;k++)d.i=c[k],e&=ld(c[k],f,!1,d)}return e}return md(a,new Mc(b,this))}
function ed(a){a=a[Zc];return a instanceof Vc?a:null}var nd="__closure_events_fn_"+(1E9*Math.random()>>>0);function cd(a){return fa(a)?a:a[nd]||(a[nd]=function(b){return a.handleEvent(b)})};function od(){Hc.call(this);this.ob=new Vc(this);this.Gf=this;this.R=null}D(od,Hc);od.prototype[Pc]=!0;g=od.prototype;g.Zd=function(a){this.R=a};g.addEventListener=function(a,b,c,d){bd(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){jd(this,a,b,c,d)};
function J(a,b){var c,d=a.R;if(d)for(c=[];d;d=d.R)c.push(d);var d=a.Gf,e=b,f=e.type||e;if(x(e))e=new I(e,d);else if(e instanceof I)e.target=e.target||d;else{var h=e,e=new I(f,d);Sb(e,h)}var h=!0,k;if(c)for(var l=c.length-1;!e.j&&0<=l;l--)k=e.i=c[l],h=pd(k,f,!0,e)&&h;e.j||(k=e.i=d,h=pd(k,f,!0,e)&&h,e.j||(h=pd(k,f,!1,e)&&h));if(c)for(l=0;!e.j&&l<c.length;l++)k=e.i=c[l],h=pd(k,f,!1,e)&&h;return h}g.B=function(){od.m.B.call(this);this.ob&&this.ob.removeAll(void 0);this.R=null};
g.listen=function(a,b,c,d){return this.ob.add(String(a),b,!1,c,d)};g.ca=function(a,b,c,d){return this.ob.remove(String(a),b,c,d)};function pd(a,b,c,d){b=a.ob.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.removed&&h.nd==c){var k=h.cc,l=h.Ib||h.src;h.md&&Xc(a.ob,h);e=!1!==k.call(l,d)&&e}}return e&&!1!=d.qg};function qd(a){I.call(this,"navigate");this.h=a}D(qd,I);function rd(a){od.call(this);this.g=a||window;bd(this.g,"popstate",this.Ud,!1,this);bd(this.g,"hashchange",this.Ud,!1,this)}D(rd,od);g=rd.prototype;g.Me=!1;g.Mh="/";g.setEnabled=function(a){a!=this.Me&&(this.Me=a)&&J(this,new qd(this.getToken()))};g.getToken=function(){var a=this.g.location.href,b=a.indexOf("#");return 0>b?"":a.substring(b+1)};g.B=function(){jd(this.g,"popstate",this.Ud,!1,this);jd(this.g,"hashchange",this.Ud,!1,this)};g.Ud=function(){this.Me&&J(this,new qd(this.getToken()))};function sd(){return ub?"Webkit":tb?"Moz":G?"ms":sb?"O":null};function td(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}g=td.prototype;g.clone=function(){return new td(this.top,this.right,this.bottom,this.left)};g.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};g.contains=function(a){return this&&a?a instanceof td?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
g.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};g.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};g.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};function vd(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}g=vd.prototype;g.clone=function(){return new vd(this.left,this.top,this.width,this.height)};g.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};g.contains=function(a){return a instanceof vd?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};
g.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};g.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function wd(a,b){var c=Xb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))?c[b]||c.getPropertyValue(b)||"":""}function xd(a,b){return wd(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function yd(a){return xd(a,"position")}function zd(a,b,c){var d,e=tb&&(pb||qb)&&Bb("1.9");b instanceof Hb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Ad(d,e);a.style.top=Ad(b,e)}
function Bd(a){var b;try{b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}G&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Cd(a){if(G&&!(G&&8<=Db))return a.offsetParent;var b=Xb(a),c=xd(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=xd(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function Dd(a){for(var b=new td(0,Infinity,Infinity,0),c=Vb(a),d=c.g.body,e=c.g.documentElement,f=cc(c.g);a=Cd(a);)if(!(G&&0==a.clientWidth||ub&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=xd(a,"overflow")){var h=Ed(a),k;k=a;if(tb&&!Bb("1.9")){var l=parseFloat(wd(k,"borderLeftWidth"));if(Fd(k))var m=k.offsetWidth-k.clientWidth-l-parseFloat(wd(k,"borderRightWidth")),l=l+m;k=new Hb(l,parseFloat(wd(k,"borderTopWidth")))}else k=new Hb(k.clientLeft,k.clientTop);h.x+=k.x;h.y+=k.y;b.top=Math.max(b.top,
h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=bc(ec(c.g));b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}
function Ed(a){var b,c=Xb(a),d=xd(a,"position"),e=tb&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new Hb(0,0),h;b=c?Xb(c):document;h=!G||G&&9<=Db||Cc(Vb(b))?b.documentElement:b.body;if(a==h)return f;if(a.getBoundingClientRect)b=Bd(a),a=Dc(Vb(c)),f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(h),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=
b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(ub&&"fixed"==yd(b)){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(sb||ub&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=Cd(b))&&b!=c.body&&b!=h;)f.x-=b.scrollLeft,sb&&"TR"==b.tagName||(f.y-=b.scrollTop)}return f}function Gd(a,b,c){if(b instanceof Jb)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=Ad(b,!0);a.style.height=Ad(c,!0)}
function Ad(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Hd(a){var b=Id;if("none"!=xd(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function Id(a){var b=a.offsetWidth,c=a.offsetHeight,d=ub&&!b&&!c;return t(b)&&!d||!a.getBoundingClientRect?new Jb(b,c):(a=Bd(a),new Jb(a.right-a.left,a.bottom-a.top))}
function Jd(a){var b=Ed(a);a=Hd(a);return new vd(b.x,b.y,a.width,a.height)}function Kd(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function L(a,b){a.style.display=b?"":"none"}function Fd(a){return"rtl"==xd(a,"direction")}var Ld=tb?"MozUserSelect":ub?"WebkitUserSelect":null;
function Md(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ld){if(b=b?"none":"",a.style[Ld]=b,c){a=0;for(var d;d=c[a];a++)d.style[Ld]=b}}else if(G||sb)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Nd(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var e=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return e}
function Od(a,b){var c=a.currentStyle?a.currentStyle[b]:null;return c?Nd(a,c):0}var Pd={thin:2,medium:4,thick:6};function Qd(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;var c=a.currentStyle?a.currentStyle[b+"Width"]:null;return c in Pd?Pd[c]:Nd(a,c)}
function Rd(a){if(G&&!(G&&9<=Db)){var b=Qd(a,"borderLeft"),c=Qd(a,"borderRight"),d=Qd(a,"borderTop");a=Qd(a,"borderBottom");return new td(d,c,a,b)}b=wd(a,"borderLeftWidth");c=wd(a,"borderRightWidth");d=wd(a,"borderTopWidth");a=wd(a,"borderBottomWidth");return new td(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Sd=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function Td(a){Hc.call(this);this.g=a;this.h={}}D(Td,Hc);var Ud=[];g=Td.prototype;g.listen=function(a,b,c,d){v(b)||(b&&(Ud[0]=b.toString()),b=Ud);for(var e=0;e<b.length;e++){var f=bd(a,b[e],c||this.handleEvent,d||!1,this.g||this);if(!f)break;this.h[f.key]=f}return this};function Vd(a,b,c){Wd(a,b,"hide",c,!1)}function Wd(a,b,c,d,e,f){if(v(c))for(var h=0;h<c.length;h++)Wd(a,b,c[h],d,e,f);else(b=id(b,c,d||a.handleEvent,e,f||a.g||a))&&(a.h[b.key]=b)}
g.ca=function(a,b,c,d,e){if(v(b))for(var f=0;f<b.length;f++)this.ca(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.g||this,c=cd(c),d=!!d,b=Rc(a)?Yc(a.ob,String(b),c,d,e):a?(a=ed(a))?Yc(a,b,c,d,e):null:null,b&&(kd(b),delete this.h[b.key]);return this};g.removeAll=function(){Kb(this.h,kd);this.h={}};g.B=function(){Td.m.B.call(this);this.removeAll()};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Xd(){}u(Xd);Xd.prototype.g=0;function Yd(a){return":"+(a.g++).toString(36)};function M(a){od.call(this);this.g=a||Vb();this.Da=Zd;this.G=null;this.Q=!1;this.v=null;this.Db=void 0;this.s=this.n=this.j=this.l=null;this.oe=!1}D(M,od);M.prototype.Hf=Xd.w();var Zd=null;
function $d(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}g=M.prototype;g.C=function(){return this.G||(this.G=Yd(this.Hf))};function ae(a,b){if(a.j&&a.j.s){var c=a.j.s,d=a.G;d in c&&delete c[d];Ob(a.j.s,b,a)}a.G=b}g.k=function(){return this.v};
function N(a){a.Db||(a.Db=new Td(a));return a.Db}function be(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.j&&a.G&&ce(a.j,a.G)&&a.j!=b)throw Error("Unable to set parent component");a.j=b;M.m.Zd.call(a,b)}g.Zd=function(a){if(this.j&&this.j!=a)throw Error("Method not supported");M.m.Zd.call(this,a)};g.D=function(){this.v=this.g.createElement("div")};g.render=function(a){de(this,a)};
function de(a,b,c){if(a.Q)throw Error("Component already rendered");a.v||a.D();b?b.insertBefore(a.v,c||null):a.g.g.body.appendChild(a.v);a.j&&!a.j.Q||a.A()}function ee(a,b){if(a.Q)throw Error("Component already rendered");if(b&&a.Hd(b)){a.oe=!0;var c=Xb(b);a.g&&a.g.g==c||(a.g=Vb(b));a.Ua(b);a.A()}else throw Error("Invalid element to decorate");}g.Hd=function(){return!0};g.Ua=function(a){this.v=a};g.A=function(){this.Q=!0;fe(this,function(a){!a.Q&&a.k()&&a.A()})};
g.ia=function(){fe(this,function(a){a.Q&&a.ia()});this.Db&&this.Db.removeAll();this.Q=!1};g.B=function(){this.Q&&this.ia();this.Db&&(this.Db.T(),delete this.Db);fe(this,function(a){a.T()});!this.oe&&this.v&&mc(this.v);this.j=this.l=this.v=this.s=this.n=null;M.m.B.call(this)};g.p=function(){return this.l};g.O=function(a,b){this.fd(a,ge(this),b)};
g.fd=function(a,b,c){if(a.Q&&(c||!this.Q))throw Error("Component already rendered");if(0>b||b>ge(this))throw Error("Child component index out of bounds");this.s&&this.n||(this.s={},this.n=[]);if(a.j==this){var d=a.C();this.s[d]=a;db(this.n,a)}else Ob(this.s,a.C(),a);be(a,this);hb(this.n,b,0,a);a.Q&&this.Q&&a.j==this?(c=this.F(),c.insertBefore(a.k(),c.childNodes[b]||null)):c?(this.v||this.D(),b=O(this,b+1),de(a,this.F(),b?b.v:null)):this.Q&&!a.Q&&a.v&&a.v.parentNode&&1==a.v.parentNode.nodeType&&a.A()};
g.F=function(){return this.v};function ie(a){null==a.Da&&(a.Da=Fd(a.Q?a.v:a.g.g.body));return a.Da}function ge(a){return a.n?a.n.length:0}function ce(a,b){return a.s&&b?Pb(a.s,b)||null:null}function O(a,b){return a.n?a.n[b]||null:null}function fe(a,b,c){a.n&&Va(a.n,b,c)}function je(a,b){return a.n&&b?Ta(a.n,b):-1}
g.removeChild=function(a,b){if(a){var c=x(a)?a:a.C();a=ce(this,c);if(c&&a){var d=this.s;c in d&&delete d[c];db(this.n,a);b&&(a.ia(),a.v&&mc(a.v));be(a,null)}}if(!a)throw Error("Child is not in parent component");return a};function ke(a,b,c,d,e){if(!(G||ub&&Bb("525")))return!0;if(pb&&e)return le(a);if(e&&!d)return!1;A(b)&&(b=me(b));if(!c&&(17==b||18==b||pb&&91==b))return!1;if(ub&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(G&&d&&b==a)return!1;switch(a){case 13:return!(G&&G&&9<=Db);case 27:return!ub}return le(a)}
function le(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||ub&&0==a)return!0;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function me(a){if(tb)a=ne(a);else if(pb&&ub)a:switch(a){case 93:a=91;break a}return a}
function ne(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function oe(a,b){od.call(this);a&&pe(this,a,b)}D(oe,od);g=oe.prototype;g.v=null;g.Pd=null;g.ef=null;g.Qd=null;g.Pa=-1;g.Jb=-1;g.re=!1;
var qe={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},re={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},se=G||ub&&Bb("525"),te=pb&&tb;g=oe.prototype;
g.hh=function(a){ub&&(17==this.Pa&&!a.ctrlKey||18==this.Pa&&!a.altKey||pb&&91==this.Pa&&!a.metaKey)&&(this.Jb=this.Pa=-1);-1==this.Pa&&(a.ctrlKey&&17!=a.g?this.Pa=17:a.altKey&&18!=a.g?this.Pa=18:a.metaKey&&91!=a.g&&(this.Pa=91));se&&!ke(a.g,this.Pa,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.Jb=me(a.g),te&&(this.re=a.altKey))};g.ih=function(a){this.Jb=this.Pa=-1;this.re=a.altKey};
g.handleEvent=function(a){var b=a.h,c,d,e=b.altKey;G&&"keypress"==a.type?c=this.Jb:ub&&"keypress"==a.type?c=this.Jb:sb?c=this.Jb:(c=b.keyCode||this.Jb,d=b.charCode||0,te&&(e=this.re),pb&&63==d&&224==c&&(c=191));d=c=me(c);var f=b.keyIdentifier;c?63232<=c&&c in qe?d=qe[c]:25==c&&a.shiftKey&&(d=9):f&&f in re&&(d=re[f]);this.Pa=d;a=new ue(d,0,0,b);a.altKey=e;J(this,a)};g.k=function(){return this.v};
function pe(a,b,c){a.Qd&&ve(a);a.v=b;a.Pd=bd(a.v,"keypress",a,c);a.ef=bd(a.v,"keydown",a.hh,c,a);a.Qd=bd(a.v,"keyup",a.ih,c,a)}function ve(a){a.Pd&&(kd(a.Pd),kd(a.ef),kd(a.Qd),a.Pd=null,a.ef=null,a.Qd=null);a.v=null;a.Pa=-1;a.Jb=-1}g.B=function(){oe.m.B.call(this);ve(this)};function ue(a,b,c,d){Mc.call(this,d);this.type="key";this.g=a}D(ue,Mc);var we;function xe(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function ye(a,b,c){w(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(we||(we={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=we,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function ze(a,b){var c=a.getAttribute("aria-"+b);return null==c||void 0==c?"":String(c)};function Ae(a){if(a.classList)return a.classList;a=a.className;return x(a)&&a.match(/\S+/g)||[]}function Be(a,b){return a.classList?a.classList.contains(b):bb(Ae(a),b)}function Ce(a,b){a.classList?a.classList.add(b):Be(a,b)||(a.className+=0<a.className.length?" "+b:b)}function De(a,b){if(a.classList)Va(b,function(b){Ce(a,b)});else{var c={};Va(Ae(a),function(a){c[a]=!0});Va(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function Ee(a,b){a.classList?a.classList.remove(b):Be(a,b)&&(a.className=Wa(Ae(a),function(a){return a!=b}).join(" "))}function Fe(a,b){a.classList?Va(b,function(b){Ee(a,b)}):a.className=Wa(Ae(a),function(a){return!bb(b,a)}).join(" ")};function Ge(){}var He;u(Ge);var Ie={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};g=Ge.prototype;g.Yb=function(){};g.ma=function(a){var b=a.g.o("div",Je(this,a).join(" "),a.W());Ke(this,a,b);return b};g.da=function(a){return a};function Le(a,b,c){if(a=a.k?a.k():a){var d=[b];G&&!Bb("7")&&(d=Me(Ae(a),b),d.push(b));(c?De:Fe)(a,d)}}g.Xb=function(){return!0};
g.aa=function(a,b){b.id&&ae(a,b.id);var c=this.da(b);c&&c.firstChild?a.Nb(c.firstChild.nextSibling?fb(c.childNodes):c.firstChild):a.Nb(null);var d=0,e=this.t(),f=this.t(),h=!1,k=!1,c=!1,l=fb(Ae(b));Va(l,function(a){h||a!=e?k||a!=f?d|=this.Ke(a):k=!0:(h=!0,f==e&&(k=!0))},this);a.Gb=d;h||(l.push(e),f==e&&(k=!0));k||l.push(f);var m=a.Be;m&&l.push.apply(l,m);if(G&&!Bb("7")){var n=Me(l);0<n.length&&(l.push.apply(l,n),c=!0)}if(!h||!k||m||c)b.className=l.join(" ");Ke(this,a,b);return b};
g.oc=function(a){ie(a)&&this.Ue(a.k(),!0);a.isEnabled()&&this.pc(a,a.va)};function Ne(a,b,c){if(a=c||a.Yb())c=b.getAttribute("role")||null,a!=c&&xe(b,a)}function Ke(a,b,c){b.va||ye(c,"hidden",!b.va);b.isEnabled()||a.ab(c,1,!b.isEnabled());Oe(b,8)&&a.ab(c,8,Pe(b,8));Oe(b,16)&&a.ab(c,16,Pe(b,16));Oe(b,64)&&a.ab(c,64,Pe(b,64))}g.Jd=function(a,b){Md(a,!b,!G&&!sb)};g.Ue=function(a,b){Le(a,this.t()+"-rtl",b)};g.Te=function(a){var b;return Oe(a,32)&&(b=Qe(a))?uc(b)&&vc(b):!1};
g.pc=function(a,b){var c;if(Oe(a,32)&&(c=Qe(a))){if(!b&&Pe(a,32)){try{c.blur()}catch(d){}Pe(a,32)&&a.Kd(null)}(uc(c)&&vc(c))!=b&&tc(c,b)}};g.Pc=function(a,b,c){var d=a.k();if(d){var e=this.Jc(b);e&&Le(a,e,c);this.ab(d,b,c)}};g.ab=function(a,b,c){He||(He={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=He[b];var d=a.getAttribute("role")||null;d&&(d=Ie[d]||b,b="checked"==b||"selected"==b?d:b);b&&ye(a,b,c)};
g.Fb=function(a,b){var c=this.da(a);if(c&&(kc(c),b))if(x(b))qc(c,b);else{var d=function(a){if(a){var b=Xb(c);c.appendChild(x(a)?b.createTextNode(a):a)}};v(b)?Va(b,d):!w(b)||"nodeType"in b?d(b):Va(fb(b),d)}};g.ag=function(a){return a.k()};g.t=function(){return"goog-control"};function Je(a,b){var c=a.t(),d=[c],e=a.t();e!=c&&d.push(e);c=b.Gb;for(e=[];c;){var f=c&-c;e.push(a.Jc(f));c&=~f}d.push.apply(d,e);(c=b.Be)&&d.push.apply(d,c);G&&!Bb("7")&&d.push.apply(d,Me(d));return d}
function Me(a,b){var c=[];b&&(a=a.concat([b]));Va([],function(d){!Za(d,la(bb,a))||b&&!bb(d,b)||c.push(d.join("_"))});return c}g.Jc=function(a){this.g||Re(this);return this.g[a]};g.Ke=function(a){this.i||(this.g||Re(this),this.i=Qb(this.g));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function Re(a){var b=a.t();La(b.replace(/\xa0|\s/g," ")," ");a.g={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Se(a,b){if(!fa(a))throw Error("Invalid component class "+a);if(!fa(b))throw Error("Invalid renderer class "+b);var c=ga(a);Te[c]=b}function Ue(a,b){if(!a)throw Error("Invalid class name "+a);if(!fa(b))throw Error("Invalid decorator function "+b);Ve[a]=b}var Te={},Ve={};function We(a,b,c){M.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=ga(b);if(d=Te[d])break;b=b.m?b.m.constructor:null}b=d?fa(d.w)?d.w():new d:null}this.i=b;this.Nb(t(a)?a:null)}D(We,M);g=We.prototype;g.Ve=null;g.Gb=0;g.Yc=39;g.kb=255;g.yb=0;g.va=!0;g.Be=null;g.Ze=!0;g.jd=!1;g.We=null;function Xe(a,b){a.Q&&b!=a.Ze&&Ye(a,b);a.Ze=b}function Qe(a){return a.i.ag(a)}g.D=function(){var a=this.i.ma(this);this.v=a;Ne(this.i,a,this.Qc());this.jd||this.i.Jd(a,!1);this.va||(L(a,!1),a&&ye(a,"hidden",!0))};
g.Qc=function(){return this.We};g.F=function(){return this.i.da(this.k())};g.Hd=function(a){return this.i.Xb(a)};g.Ua=function(a){this.v=a=this.i.aa(this,a);Ne(this.i,a,this.Qc());this.jd||this.i.Jd(a,!1);this.va="none"!=a.style.display};g.A=function(){We.m.A.call(this);this.i.oc(this);if(this.Yc&-2&&(this.Ze&&Ye(this,!0),Oe(this,32))){var a=Qe(this);if(a){var b=this.u||(this.u=new oe);pe(b,a);N(this).listen(b,"key",this.Ba).listen(a,"focus",this.Mg).listen(a,"blur",this.Kd)}}};
function Ye(a,b){var c=N(a),d=a.k();b?(c.listen(d,"mouseover",a.ac).listen(d,"mousedown",a.Zb).listen(d,"mouseup",a.bc).listen(d,"mouseout",a.$e),a.Tc!=ca&&c.listen(d,"contextmenu",a.Tc),G&&c.listen(d,"dblclick",a.cg)):(c.ca(d,"mouseover",a.ac).ca(d,"mousedown",a.Zb).ca(d,"mouseup",a.bc).ca(d,"mouseout",a.$e),a.Tc!=ca&&c.ca(d,"contextmenu",a.Tc),G&&c.ca(d,"dblclick",a.cg))}g.ia=function(){We.m.ia.call(this);this.u&&ve(this.u);this.va&&this.isEnabled()&&this.i.pc(this,!1)};
g.B=function(){We.m.B.call(this);this.u&&(this.u.T(),delete this.u);delete this.i;this.Be=this.Ve=null};g.W=function(){return this.Ve};function Ze(a,b){a.i.Fb(a.k(),b);a.Nb(b)}g.Nb=function(a){this.Ve=a};g.pb=function(){var a=this.W();if(!a)return"";a=x(a)?a:v(a)?Xa(a,yc).join(""):wc(a);return va(a)};g.sc=function(a,b){if(b||this.va!=a&&J(this,a?"show":"hide")){var c=this.k();c&&(L(c,a),c&&ye(c,"hidden",!a));this.isEnabled()&&this.i.pc(this,a);this.va=a;return!0}return!1};
g.isEnabled=function(){return!Pe(this,1)};g.setEnabled=function(a){var b=this.j;b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!$e(this,1,!a)||(a||(af(this,!1),this.na(!1)),this.va&&this.i.pc(this,a),bf(this,1,!a))};g.na=function(a){$e(this,2,a)&&bf(this,2,a)};function af(a,b){$e(a,4,b)&&bf(a,4,b)}g.yc=function(a){$e(this,8,a)&&bf(this,8,a)};g.ba=function(a){$e(this,64,a)&&bf(this,64,a)};function Pe(a,b){return!!(a.Gb&b)}
function bf(a,b,c){Oe(a,b)&&c!=Pe(a,b)&&(a.i.Pc(a,b,c),a.Gb=c?a.Gb|b:a.Gb&~b)}function Oe(a,b){return!!(a.Yc&b)}g.ha=function(a,b){if(this.Q&&Pe(this,a)&&!b)throw Error("Component already rendered");!b&&Pe(this,a)&&bf(this,a,!1);this.Yc=b?this.Yc|a:this.Yc&~a};function cf(a,b){return!!(a.kb&b)&&Oe(a,b)}function $e(a,b,c){return Oe(a,b)&&Pe(a,b)!=c&&(!(a.yb&b)||J(a,$d(b,c)))&&!a.P}g.ac=function(a){!df(a,this.k())&&J(this,"enter")&&this.isEnabled()&&cf(this,2)&&this.na(!0)};
g.$e=function(a){!df(a,this.k())&&J(this,"leave")&&(cf(this,4)&&af(this,!1),cf(this,2)&&this.na(!1))};g.Tc=ca;function df(a,b){return!!a.l&&pc(b,a.l)}g.Zb=function(a){this.isEnabled()&&(cf(this,2)&&this.na(!0),Oc(a)&&(cf(this,4)&&af(this,!0),this.i.Te(this)&&Qe(this).focus()));!this.jd&&Oc(a)&&a.preventDefault()};g.bc=function(a){this.isEnabled()&&(cf(this,2)&&this.na(!0),Pe(this,4)&&this.Ja(a)&&cf(this,4)&&af(this,!1))};g.cg=function(a){this.isEnabled()&&this.Ja(a)};
g.Ja=function(a){if(cf(this,16)){var b=!Pe(this,16);$e(this,16,b)&&bf(this,16,b)}cf(this,8)&&this.yc(!0);cf(this,64)&&this.ba(!Pe(this,64));b=new I("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.s=a.s);return J(this,b)};g.Mg=function(){cf(this,32)&&$e(this,32,!0)&&bf(this,32,!0)};g.Kd=function(){cf(this,4)&&af(this,!1);cf(this,32)&&$e(this,32,!1)&&bf(this,32,!1)};
g.Ba=function(a){return this.va&&this.isEnabled()&&this.qc(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};g.qc=function(a){return 13==a.g&&this.Ja(a)};Se(We,Ge);Ue("goog-control",function(){return new We(null)});function ef(){}D(ef,Ge);u(ef);g=ef.prototype;g.t=function(){return"goog-tab"};g.Yb=function(){return"tab"};g.ma=function(a){var b=ef.m.ma.call(this,a);(a=a.eb())&&this.ra(b,a);return b};g.aa=function(a,b){b=ef.m.aa.call(this,a,b);var c=this.eb(b);c&&a.$d(c);Pe(a,8)&&(c=a.j)&&fa(c.zc)&&(bf(a,8,!1),c.zc(a));return b};g.eb=function(a){return a.title||""};g.ra=function(a,b){a&&(a.title=b||"")};function ff(a,b,c){We.call(this,a,b||ef.w(),c);this.ha(8,!0);this.yb|=9}D(ff,We);ff.prototype.eb=function(){return this.h};ff.prototype.ra=function(a){this.i.ra(this.k(),a);this.$d(a)};ff.prototype.$d=function(a){this.h=a};Ue("goog-tab",function(){return new ff(null)});function gf(a){this.g=a}u(gf);function hf(a,b){a&&(a.tabIndex=b?0:-1)}g=gf.prototype;g.Pe=function(a){return"DIV"==a.tagName};function jf(a,b,c){c.id&&ae(b,c.id);var d=a.t(),e=!1,f=Ae(c);f&&Va(f,function(a){a==d?e=!0:a&&this.xf(b,a,d)},a);e||Ce(c,d);kf(a,b,c);return c}g.xf=function(a,b,c){b==c+"-disabled"?a.setEnabled(!1):b==c+"-horizontal"?lf(a,mf):b==c+"-vertical"&&lf(a,nf)};
function kf(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.Kc(d);f&&(f.v=d,b.isEnabled()||f.setEnabled(!1),b.O(f),ee(f,d))}else d.nodeValue&&""!=wa(d.nodeValue)||c.removeChild(d);d=e}}g.Kc=function(a){a:{var b;a=Ae(a);for(var c=0,d=a.length;c<d;c++)if(b=a[c],b=b in Ve?Ve[b]():null){a=b;break a}a=null}return a};g.Re=function(a){a=a.k();Md(a,!0,tb);G&&(a.hideFocus=!0);var b=this.g;b&&xe(a,b)};g.t=function(){return"goog-container"};
g.Qe=function(a){var b=this.t(),c=[b,a.Lb==mf?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};g.Uf=function(){return nf};function of(a,b,c){M.call(this,c);this.fb=b||gf.w();this.Lb=a||this.fb.Uf()}D(of,M);var mf="horizontal",nf="vertical";g=of.prototype;g.ff=null;g.Vb=null;g.fb=null;g.Lb=null;g.pa=!0;g.Ub=!0;g.lc=!0;g.Ha=-1;g.ka=null;g.Xa=!1;g.lb=null;function pf(a){return a.ff||a.k()}g.D=function(){this.v=this.g.o("div",this.fb.Qe(this).join(" "))};g.F=function(){return this.k()};g.Hd=function(a){return this.fb.Pe(a)};g.Ua=function(a){this.v=jf(this.fb,this,a);"none"==a.style.display&&(this.pa=!1)};
g.A=function(){of.m.A.call(this);fe(this,function(a){a.Q&&qf(this,a)},this);var a=this.k();this.fb.Re(this);this.Wb(this.pa,!0);N(this).listen(this,"enter",this.Ye).listen(this,"highlight",this.Jg).listen(this,"unhighlight",this.Lg).listen(this,"open",this.oh).listen(this,"close",this.Xg).listen(a,"mousedown",this.Kg).listen(Xb(a),"mouseup",this.$g).listen(a,["mousedown","mouseup","mouseover","mouseout","contextmenu"],this.Wg);this.lc&&rf(this,!0)};
function rf(a,b){var c=N(a),d=pf(a);b?c.listen(d,"focus",a.Oc).listen(d,"blur",a.$f).listen(a.Vb||(a.Vb=new oe(pf(a))),"key",a.Ba):c.ca(d,"focus",a.Oc).ca(d,"blur",a.$f).ca(a.Vb||(a.Vb=new oe(pf(a))),"key",a.Ba)}g.ia=function(){this.sb(-1);this.ka&&this.ka.ba(!1);this.Xa=!1;of.m.ia.call(this)};g.B=function(){of.m.B.call(this);this.Vb&&(this.Vb.T(),this.Vb=null);this.fb=this.ka=this.lb=this.ff=null};g.Ye=function(){return!0};
g.Jg=function(a){var b=je(this,a.target);if(-1<b&&b!=this.Ha){var c=sf(this);c&&c.na(!1);this.Ha=b;c=sf(this);this.Xa&&af(c,!0);this.ka&&c!=this.ka&&(Oe(c,64)?c.ba(!0):this.ka.ba(!1))}b=this.k();null!=a.target.k()&&ye(b,"activedescendant",a.target.k().id)};g.Lg=function(a){a.target==sf(this)&&(this.Ha=-1);this.k().removeAttribute("aria-activedescendant")};g.oh=function(a){(a=a.target)&&a!=this.ka&&a.j==this&&(this.ka&&this.ka.ba(!1),this.ka=a)};g.Xg=function(a){a.target==this.ka&&(this.ka=null)};
g.Kg=function(a){this.Ub&&(this.Xa=!0);var b=pf(this);b&&uc(b)&&vc(b)?b.focus():a.preventDefault()};g.$g=function(){this.Xa=!1};g.Wg=function(a){var b;a:{b=a.target;if(this.lb)for(var c=this.k();b&&b!==c;){var d=b.id;if(d in this.lb){b=this.lb[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case "mousedown":b.Zb(a);break;case "mouseup":b.bc(a);break;case "mouseover":b.ac(a);break;case "mouseout":b.$e(a);break;case "contextmenu":b.Tc(a)}};g.Oc=function(){};
g.$f=function(){this.sb(-1);this.Xa=!1;this.ka&&this.ka.ba(!1)};g.Ba=function(a){return this.isEnabled()&&this.pa&&(0!=ge(this)||this.ff)&&this.Se(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
g.Se=function(a){var b=sf(this);if(b&&"function"==typeof b.Ba&&b.Ba(a)||this.ka&&this.ka!=b&&"function"==typeof this.ka.Ba&&this.ka.Ba(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.g){case 27:if(this.lc)pf(this).blur();else return!1;break;case 36:tf(this);break;case 35:uf(this);break;case 38:if(this.Lb==nf)vf(this);else return!1;break;case 37:if(this.Lb==mf)ie(this)?wf(this):vf(this);else return!1;break;case 40:if(this.Lb==nf)wf(this);else return!1;break;case 39:if(this.Lb==
mf)ie(this)?vf(this):wf(this);else return!1;break;default:return!1}return!0};function qf(a,b){var c=b.k(),c=c.id||(c.id=b.C());a.lb||(a.lb={});a.lb[c]=b}g.O=function(a,b){of.m.O.call(this,a,b)};g.fd=function(a,b,c){a.yb|=2;a.yb|=64;a.ha(32,!1);Xe(a,!1);of.m.fd.call(this,a,b,c);a.Q&&this.Q&&qf(this,a);b<=this.Ha&&this.Ha++};
g.removeChild=function(a,b){if(a=x(a)?ce(this,a):a){var c=je(this,a);-1!=c&&(c==this.Ha?(a.na(!1),this.Ha=-1):c<this.Ha&&this.Ha--);var d=a.k();d&&d.id&&this.lb&&(c=this.lb,d=d.id,d in c&&delete c[d])}a=of.m.removeChild.call(this,a,b);Xe(a,!0);return a};function lf(a,b){if(a.k())throw Error("Component already rendered");a.Lb=b}
g.Wb=function(a,b){if(b||this.pa!=a&&J(this,a?"show":"hide")){this.pa=a;var c=this.k();c&&(L(c,a),this.lc&&hf(pf(this),this.Ub&&this.pa),b||J(this,this.pa?"aftershow":"afterhide"));return!0}return!1};g.isEnabled=function(){return this.Ub};g.setEnabled=function(a){this.Ub!=a&&J(this,a?"enable":"disable")&&(a?(this.Ub=!0,fe(this,function(a){a.yg?delete a.yg:a.setEnabled(!0)})):(fe(this,function(a){a.isEnabled()?a.setEnabled(!1):a.yg=!0}),this.Xa=this.Ub=!1),this.lc&&hf(pf(this),a&&this.pa))};
function xf(a,b){b!=a.lc&&a.Q&&rf(a,b);a.lc=b;a.Ub&&a.pa&&hf(pf(a),b)}g.sb=function(a){(a=O(this,a))?a.na(!0):-1<this.Ha&&sf(this).na(!1)};g.na=function(a){this.sb(je(this,a))};function sf(a){return O(a,a.Ha)}function tf(a){yf(a,function(a,c){return(a+1)%c},ge(a)-1)}function uf(a){yf(a,function(a,c){a--;return 0>a?c-1:a},0)}function wf(a){yf(a,function(a,c){return(a+1)%c},a.Ha)}function vf(a){yf(a,function(a,c){a--;return 0>a?c-1:a},a.Ha)}
function yf(a,b,c){c=0>c?je(a,a.ka):c;var d=ge(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=O(a,c);if(f&&a.Kf(f)){a.vf(c);break}e++;c=b.call(a,c,d)}}g.Kf=function(a){return a.va&&a.isEnabled()&&Oe(a,2)};g.vf=function(a){this.sb(a)};function zf(){this.g="tablist"}D(zf,gf);u(zf);zf.prototype.t=function(){return"goog-tab-bar"};zf.prototype.xf=function(a,b,c){this.i||(this.h||Af(this),this.i=Qb(this.h));var d=this.i[b];d?(lf(a,d==Bf||d==Cf?nf:mf),a.i=d):zf.m.xf.call(this,a,b,c)};zf.prototype.Qe=function(a){var b=zf.m.Qe.call(this,a);this.h||Af(this);b.push(this.h[a.i]);return b};function Af(a){var b=a.t();a.h=Tb(Df,b+"-top",Ef,b+"-bottom",Bf,b+"-start",Cf,b+"-end")};function Ff(a,b,c){a=a||Df;lf(this,a==Bf||a==Cf?nf:mf);this.i=a;of.call(this,this.Lb,b||zf.w(),c);Gf(this)}D(Ff,of);var Df="top",Ef="bottom",Bf="start",Cf="end";g=Ff.prototype;g.Ra=null;g.A=function(){Ff.m.A.call(this);Gf(this)};g.B=function(){Ff.m.B.call(this);this.Ra=null};g.removeChild=function(a,b){Hf(this,a);return Ff.m.removeChild.call(this,a,b)};g.vf=function(a){Ff.m.vf.call(this,a);this.zc(O(this,a))};g.zc=function(a){a?a.yc(!0):this.Ra&&this.Ra.yc(!1)};
function Hf(a,b){if(b&&b==a.Ra){for(var c=je(a,b),d=c-1;b=O(a,d);d--)if(b.va&&b.isEnabled()){a.zc(b);return}for(c+=1;b=O(a,c);c++)if(b.va&&b.isEnabled()){a.zc(b);return}a.zc(null)}}g.th=function(a){this.Ra&&this.Ra!=a.target&&this.Ra.yc(!1);this.Ra=a.target};g.wh=function(a){a.target==this.Ra&&(this.Ra=null)};g.rh=function(a){Hf(this,a.target)};g.sh=function(a){Hf(this,a.target)};g.Oc=function(){sf(this)||this.na(this.Ra||O(this,0))};
function Gf(a){N(a).listen(a,"select",a.th).listen(a,"unselect",a.wh).listen(a,"disable",a.rh).listen(a,"hide",a.sh)}Ue("goog-tab-bar",function(){return new Ff});G&&Bb(8);Ub("area base br col command embed hr img input keygen link meta param source track wbr".split(" "));function If(){this.g="";this.h=Jf;this.i=null}If.prototype.toString=function(){return"SafeHtml{"+this.g+"}"};function Kf(a){if(a instanceof If&&a.constructor===If&&a.h===Jf)return a.g;Ra("expected object of type SafeHtml, got '"+a+"'");return"type_error:SafeHtml"}Ub("action","cite","data","formaction","href","manifest","poster","src");Ub("link","script","style");var Jf={};function Lf(a,b){var c=new If;c.g=a;c.i=b;return c}var Mf=Lf("",0);var Nf={mi:!0},Of={ni:!0};function Pf(a,b,c){a.innerHTML=Qf(b(c||Rf,void 0,void 0))}function Qf(a){if(!B(a))return String(a);Ra("Soy template output is unsafe for use as HTML: "+a);return"zSoyz"}var Sf=/^<(body|caption|col|colgroup|head|html|tr|td|tbody|thead|tfoot)>/i,Rf={};function Tf(a){return a&&a.ye&&a.ye===Nf?a.content:String(a).replace(Uf,Vf)}var Wf={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function Vf(a){return Wf[a]}var Uf=/[\x00\x22\x26\x27\x3c\x3e]/g;function Xf(a){return'<div id="sticky-hud-base"><div class="hud-button"><div class="logo-box"></div><div class="arrow-box"></div></div><div class="hud-popup"><div class="popup-container"><div class="popup-content"></div><div class="popup-footer"><div class="popup-footer-bar"><span class="left-item"><a href="'+Tf(a.Lh)+'" title="Extension options" target="option-page">Options</a></span><span class="center-item"></span><span class="right-item"><a href="https://yathit.uservoice.com/" target="yathit.uservoice.com">Feedback</a> |&nbsp;<a href="https://sites.google.com/a/yathit.com/ydn-crm-wiki/" target="help">Help</a></span></div><div class="status-bar"><span class="status-bar-message"></span></div></div></div></div>'}
Xf.g="templ.ydn.crm.inj.hub";function Yf(a){return"<div>Current you are login as "+Tf(a.ci)+" to Yathit server.</div>"}Yf.g="templ.ydn.crm.inj.wrongLogin";function Zf(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function $f(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function ag(a){q.setTimeout(function(){throw a;},0)}var bg;
function cg(){if(q.Promise&&q.Promise.resolve){var a=q.Promise.resolve();return function(b){a.then(function(){try{b()}catch(a){ag(a)}})}}var b=q.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var a=document.createElement("iframe");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d=b.location.protocol+
"//"+b.location.host,a=C(function(a){if(a.origin==d||a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof b){var c=new b,d={},e=d;c.port1.onmessage=function(){d=d.next;var a=d.Lf;d.Lf=null;a()};return function(a){e.next={Lf:a};e=e.next;c.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(a){var b=document.createElement("script");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){q.setTimeout(a,0)}};function dg(a,b){if(!eg){var c=fg;fa(q.setImmediate)?q.setImmediate(c):(bg||(bg=cg()),bg(c));eg=!0}gg.push(new hg(a,b))}var eg=!1,gg=[];[].push(function(){eg=!1;gg=[]});function fg(){for(;gg.length;){var a=gg;gg=[];for(var b=0;b<a.length;b++){var c=a[b];try{c.g.call(c.h)}catch(d){ag(d)}}}eg=!1}function hg(a,b){this.g=a;this.h=b};function ig(a,b){this.h=jg;this.n=void 0;this.g=this.i=null;this.j=this.l=!1;try{var c=this;a.call(b,function(a){kg(c,lg,a)},function(a){kg(c,mg,a)})}catch(d){kg(this,mg,d)}}var jg=0,lg=2,mg=3;ig.prototype.then=function(a,b,c){return ng(this,fa(a)?a:null,fa(b)?b:null,c)};Zf(ig);function og(a){a.h==jg&&dg(function(){var a=new pg(void 0);qg(this,a)},a)}
function qg(a,b){if(a.h==jg)if(a.i){var c=a.i;if(c.g){for(var d=0,e=-1,f=0,h;h=c.g[f];f++)if(h=h.od)if(d++,h==a&&(e=f),0<=e&&1<d)break;0<=e&&(c.h==jg&&1==d?qg(c,b):(d=c.g.splice(e,1)[0],rg(c,d,mg,b)))}}else kg(a,mg,b)}function sg(a,b){a.g&&a.g.length||a.h!=lg&&a.h!=mg||tg(a);a.g||(a.g=[]);a.g.push(b)}
function ng(a,b,c,d){var e={od:null,jg:null,ng:null};e.od=new ig(function(a,h){e.jg=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){h(m)}}:a;e.ng=c?function(b){try{var e=c.call(d,b);!t(e)&&b instanceof pg?h(b):a(e)}catch(m){h(m)}}:h});e.od.i=a;sg(a,e);return e.od}ig.prototype.s=function(a){this.h=jg;kg(this,lg,a)};ig.prototype.u=function(a){this.h=jg;kg(this,mg,a)};
function kg(a,b,c){if(a.h==jg){if(a==c)b=mg,c=new TypeError("Promise cannot resolve to itself");else{if($f(c)){a.h=1;c.then(a.s,a.u,a);return}if(B(c))try{var d=c.then;if(fa(d)){ug(a,c,d);return}}catch(e){b=mg,c=e}}a.n=c;a.h=b;tg(a);b!=mg||c instanceof pg||vg(a,c)}}function ug(a,b,c){function d(b){f||(f=!0,a.u(b))}function e(b){f||(f=!0,a.s(b))}a.h=1;var f=!1;try{c.call(b,e,d)}catch(h){d(h)}}function tg(a){a.l||(a.l=!0,dg(a.P,a))}
ig.prototype.P=function(){for(;this.g&&this.g.length;){var a=this.g;this.g=[];for(var b=0;b<a.length;b++)rg(this,a[b],this.h,this.n)}this.l=!1};function rg(a,b,c,d){if(c==lg)b.jg(d);else{for(;a&&a.j;a=a.i)a.j=!1;b.ng(d)}}function vg(a,b){a.j=!0;dg(function(){a.j&&wg.call(null,b)})}var wg=ag;function pg(a){oa.call(this,a)}D(pg,oa);pg.prototype.name="cancel";/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function P(a,b){this.u=[];this.ga=a;this.N=b||null;this.l=this.h=!1;this.j=void 0;this.J=this.S=this.P=!1;this.n=0;this.i=null;this.H=0}function xg(a,b){if(a.h)a.j instanceof P&&xg(a.j);else{if(a.i){var c=a.i;delete a.i;b?xg(c,b):(c.H--,0>=c.H&&xg(c))}a.ga?a.ga.call(a.N,a):a.J=!0;a.h||a.I(new yg)}}g=P.prototype;g.rd=function(a,b){this.P=!1;zg(this,a,b)};function zg(a,b,c){a.h=!0;a.j=c;a.l=!b;a.Ce()}function Ag(a){if(a.h){if(!a.J)throw new Bg;a.J=!1}}g.callback=function(a){Ag(this);zg(this,!0,a)};
g.I=function(a){Ag(this);zg(this,!1,a)};g.K=function(a,b){return this.M(a,null,b)};g.pe=function(a,b){return this.M(null,a,b)};g.ed=function(a,b){return this.M(a,a,b)};g.M=function(a,b,c){this.u.push([a,b,c]);this.h&&this.Ce();return this};g.then=function(a,b,c){var d,e,f=new ig(function(a,b){d=a;e=b});this.M(d,function(a){a instanceof yg?og(f):e(a)});return f.then(a,b,c)};Zf(P);function Cg(a){var b=new P;a.M(b.callback,b.I,b);return b}function Dg(a){return Ya(a.u,function(a){return fa(a[1])})}
P.prototype.Ce=function(){this.n&&this.h&&Dg(this)&&(Eg(this.n),this.n=0);this.i&&(this.i.H--,delete this.i);for(var a=this.j,b=!1,c=!1;this.u.length&&!this.P;){var d=this.u.shift(),e=d[0],f=d[1],d=d[2];if(e=this.l?f:e)try{var h=e.call(d||this.N,a);t(h)&&(this.l=this.l&&(h==a||h instanceof Error),this.j=a=h);$f(a)&&(this.P=c=!0)}catch(k){a=k,this.l=!0,Dg(this)||(b=!0)}}this.j=a;c&&(c=C(this.rd,this,!0),h=C(this.rd,this,!1),a instanceof P?(a.M(c,h),a.S=!0):a.then(c,h));b&&(a=new Fg(a),Gg[a.Fd]=a,this.n=
a.Fd)};function Hg(a){var b=new P;b.callback(a);return b}function Ig(a){var b=new P;b.I(a);return b}function Bg(){oa.call(this)}D(Bg,oa);Bg.prototype.message="Deferred has already fired";Bg.prototype.name="AlreadyCalledError";function yg(){oa.call(this)}D(yg,oa);yg.prototype.message="Deferred was canceled";yg.prototype.name="CanceledError";function Fg(a){this.Fd=q.setTimeout(C(this.h,this),0);this.g=a}Fg.prototype.h=function(){delete Gg[this.Fd];throw this.g;};var Gg={};
function Eg(a){var b=Gg[a];b&&(q.clearTimeout(b.Fd),delete Gg[a])};function Jg(a){a.preventDefault();var b=200,c=100,d=a.target.getAttribute("data-window-height"),e=a.target.getAttribute("data-window-width");e&&(b=parseInt(e,10));d&&(c=parseInt(d,10));window.open(a.target.href,void 0,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+b+", height="+c+", top="+(window.innerWidth/2-c/2+window.screenTop)+", left="+(window.innerWidth/2-b/2+window.screenLeft))};function Kg(a,b,c,d,e,f,h,k,l){var m,n;if(m=c.offsetParent){var p="HTML"==m.tagName||"BODY"==m.tagName;p&&"static"==yd(m)||(n=Ed(m),p||(p=(p=Fd(m))&&tb?-m.scrollLeft:!p||G&&Bb("8")||"visible"==xd(m,"overflowX")?m.scrollLeft:m.scrollWidth-m.clientWidth-m.scrollLeft,n=Ib(n,new Hb(p,m.scrollTop))))}m=n||new Hb;n=Jd(a);if(p=Dd(a)){var r=new vd(p.left,p.top,p.right-p.left,p.bottom-p.top),p=Math.max(n.left,r.left),s=Math.min(n.left+n.width,r.left+r.width);if(p<=s){var y=Math.max(n.top,r.top),r=Math.min(n.top+
n.height,r.top+r.height);y<=r&&(n.left=p,n.top=y,n.width=s-p,n.height=r-y)}}p=Vb(a);y=Vb(c);if(p.g!=y.g){var s=p.g.body,y=ec(y.g),r=new Hb(0,0),z=dc(Xb(s)),E=s;do{var H;if(z==y)H=Ed(E);else{var K=E;H=void 0;if(K.getBoundingClientRect)H=Bd(K),H=new Hb(H.left,H.top);else{H=Dc(Vb(K));var V=Ed(K);H=new Hb(V.x-H.x,V.y-H.y)}if(tb&&!Bb(12)){b:{var V=K,ua=Oa("transform");if(void 0===V.style[ua]&&(ua=sd()+Pa(ua),void 0!==V.style[ua])){V=(ub?"-webkit":tb?"-moz":G?"-ms":sb?"-o":null)+"-transform";break b}V=
"transform"}K=(K=xd(K,V)||xd(K,"transform"))?(K=K.match(Sd))?new Hb(parseFloat(K[1]),parseFloat(K[2])):new Hb(0,0):new Hb(0,0);H=new Hb(H.x+K.x,H.y+K.y)}}r.x+=H.x;r.y+=H.y}while(z&&z!=y&&(E=z.frameElement)&&(z=z.parent));s=Ib(r,Ed(s));G&&!Cc(p)&&(s=Ib(s,Dc(p)));n.left+=s.x;n.top+=s.y}a=Lg(a,b);b=new Hb(a&2?n.left+n.width:n.left,a&1?n.top+n.height:n.top);b=Ib(b,m);e&&(b.x+=(a&2?-1:1)*e.x,b.y+=(a&1?-1:1)*e.y);var F;if(h)if(l)F=l;else if(F=Dd(c))F.top-=m.y,F.right-=m.x,F.bottom-=m.y,F.left-=m.x;a:{l=
b.clone();e=0;a=Lg(c,d);d=Hd(c);k=k?k.clone():d.clone();if(f||0!=a)a&2?l.x-=k.width+(f?f.right:0):f&&(l.x+=f.left),a&1?l.y-=k.height+(f?f.bottom:0):f&&(l.y+=f.top);if(h&&(F?(f=l,e=0,65==(h&65)&&(f.x<F.left||f.x>=F.right)&&(h&=-2),132==(h&132)&&(f.y<F.top||f.y>=F.bottom)&&(h&=-5),f.x<F.left&&h&1&&(f.x=F.left,e|=1),f.x<F.left&&f.x+k.width>F.right&&h&16&&(k.width=Math.max(k.width-(f.x+k.width-F.right),0),e|=4),f.x+k.width>F.right&&h&1&&(f.x=Math.max(F.right-k.width,F.left),e|=1),h&2&&(e=e|(f.x<F.left?
16:0)|(f.x+k.width>F.right?32:0)),f.y<F.top&&h&4&&(f.y=F.top,e|=2),f.y<=F.top&&f.y+k.height<F.bottom&&h&32&&(k.height=Math.max(k.height-(F.top-f.y),0),f.y=F.top,e|=8),f.y>=F.top&&f.y+k.height>F.bottom&&h&32&&(k.height=Math.max(k.height-(f.y+k.height-F.bottom),0),e|=8),f.y+k.height>F.bottom&&h&4&&(f.y=Math.max(F.bottom-k.height,F.top),e|=2),h&8&&(e=e|(f.y<F.top?64:0)|(f.y+k.height>F.bottom?128:0)),h=e):h=256,e=h,e&496)){c=e;break a}zd(c,l);d==k||d&&k&&d.width==k.width&&d.height==k.height||(f=Cc(Vb(Xb(c))),
!G||f&&Bb("8")?(c=c.style,tb?c.MozBoxSizing="border-box":ub?c.WebkitBoxSizing="border-box":c.boxSizing="border-box",c.width=Math.max(k.width,0)+"px",c.height=Math.max(k.height,0)+"px"):(h=c.style,f?(G?(f=Od(c,"paddingLeft"),d=Od(c,"paddingRight"),l=Od(c,"paddingTop"),F=Od(c,"paddingBottom"),f=new td(l,d,F,f)):(f=wd(c,"paddingLeft"),d=wd(c,"paddingRight"),l=wd(c,"paddingTop"),F=wd(c,"paddingBottom"),f=new td(parseFloat(l),parseFloat(d),parseFloat(F),parseFloat(f))),c=Rd(c),h.pixelWidth=k.width-c.left-
f.left-f.right-c.right,h.pixelHeight=k.height-c.top-f.top-f.bottom-c.bottom):(h.pixelWidth=k.width,h.pixelHeight=k.height)));c=e}return c}function Lg(a,b){return(b&4&&Fd(a)?b^2:b)&-5};function Mg(){}Mg.prototype.i=function(){};function Ng(a,b,c){this.g=a;this.h=b;this.s=c}D(Ng,Mg);Ng.prototype.i=function(a,b,c){Kg(this.g,this.h,a,b,void 0,c,this.s)};function Og(a,b,c,d){Ng.call(this,a,b);this.j=c?5:0;this.l=d||void 0}D(Og,Ng);Og.prototype.n=function(){return this.j};Og.prototype.i=function(a,b,c,d){var e=Kg(this.g,this.h,a,b,null,c,10,d,this.l);if(e&496){var f=Pg(e,this.h);b=Pg(e,b);e=Kg(this.g,f,a,b,null,c,10,d,this.l);e&496&&(f=Pg(e,f),b=Pg(e,b),Kg(this.g,f,a,b,null,c,this.j,d,this.l))}};function Pg(a,b){a&48&&(b^=2);a&192&&(b^=1);return b};function Qg(a,b){od.call(this);this.h=a||1;this.g=b||q;this.i=C(this.Qh,this);this.j=ma()}D(Qg,od);g=Qg.prototype;g.Mc=!1;g.Ma=null;g.setInterval=function(a){this.h=a;this.Ma&&this.Mc?(this.stop(),Rg(this)):this.Ma&&this.stop()};g.Qh=function(){if(this.Mc){var a=ma()-this.j;0<a&&a<.8*this.h?this.Ma=this.g.setTimeout(this.i,this.h-a):(this.Ma&&(this.g.clearTimeout(this.Ma),this.Ma=null),J(this,Sg),this.Mc&&(this.Ma=this.g.setTimeout(this.i,this.h),this.j=ma()))}};
function Rg(a){a.Mc=!0;a.Ma||(a.Ma=a.g.setTimeout(a.i,a.h),a.j=ma())}g.stop=function(){this.Mc=!1;this.Ma&&(this.g.clearTimeout(this.Ma),this.Ma=null)};g.B=function(){Qg.m.B.call(this);this.stop();delete this.g};var Sg="tick";function Tg(a,b,c){if(fa(a))c&&(a=C(a,c));else if(a&&"function"==typeof a.handleEvent)a=C(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:q.setTimeout(a,b||0)};function Q(a){oa.call(this,a);this.name="ydn.error.ArgumentException"}D(Q,oa);function Ug(a){oa.call(this,a);this.name="ydn.error.NotSupportedException"}D(Ug,oa);function Vg(a){oa.call(this,a);this.name="ydn.error.NotImplementedException"}D(Vg,oa);function Wg(a){oa.call(this,a);this.name="ydn.error.InvalidOperationException"}D(Wg,oa);
function Xg(a){Error.captureStackTrace?Error.captureStackTrace(this,Xg):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(Xg,Error);Xg.prototype.name="ydn.error.InternalError";function Yg(a){if("function"==typeof a.ta)return a.ta();if(x(a))return a.split("");if(w(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Lb(a)}
function Zg(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(w(a)||x(a))Va(a,b,void 0);else{var c;if("function"==typeof a.za)c=a.za();else if("function"!=typeof a.ta)if(w(a)||x(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=Mb(a);else c=void 0;for(var d=Yg(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};var $g="StopIteration"in q?q.StopIteration:Error("StopIteration");function ah(){}ah.prototype.next=function(){throw $g;};ah.prototype.Ec=function(){return this};function bh(a){if(a instanceof ah)return a;if("function"==typeof a.Ec)return a.Ec(!1);if(w(a)){var b=0,c=new ah;c.next=function(){for(;;){if(b>=a.length)throw $g;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function ch(a,b){if(w(a))try{Va(a,b,void 0)}catch(c){if(c!==$g)throw c;}else{a=bh(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(d){if(d!==$g)throw d;}}}function dh(a){try{return bh(a).next()}catch(b){if(b!=$g)throw b;return null}};function eh(a,b){this.h={};this.g=[];this.j=this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof eh?(c=a.za(),d=a.ta()):(c=Mb(a),d=Lb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=eh.prototype;g.ja=function(){return this.i};g.ta=function(){fh(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.h[this.g[b]]);return a};g.za=function(){fh(this);return this.g.concat()};
g.Ia=function(){return 0==this.i};g.clear=function(){this.h={};this.j=this.i=this.g.length=0};g.remove=function(a){return gh(this.h,a)?(delete this.h[a],this.i--,this.j++,this.g.length>2*this.i&&fh(this),!0):!1};function fh(a){if(a.i!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];gh(a.h,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.i!=a.g.length){for(var e={},c=b=0;b<a.g.length;)d=a.g[b],gh(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}g.get=function(a,b){return gh(this.h,a)?this.h[a]:b};
g.set=function(a,b){gh(this.h,a)||(this.i++,this.g.push(a),this.j++);this.h[a]=b};g.forEach=function(a,b){for(var c=this.za(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new eh(this)};g.Ec=function(a){fh(this);var b=0,c=this.g,d=this.h,e=this.j,f=this,h=new ah;h.next=function(){for(;;){if(e!=f.j)throw Error("The map has changed since the iterator was created");if(b>=c.length)throw $g;var h=c[b++];return a?h:d[h]}};return h};
function gh(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function hh(a){this.g=new eh;if(a){a=Yg(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])}}function ih(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+ga(a):b.substr(0,1)+a}g=hh.prototype;g.ja=function(){return this.g.ja()};g.add=function(a){this.g.set(ih(a),a)};g.removeAll=function(a){a=Yg(a);for(var b=a.length,c=0;c<b;c++)this.remove(a[c])};g.remove=function(a){return this.g.remove(ih(a))};g.clear=function(){this.g.clear()};g.Ia=function(){return this.g.Ia()};
g.contains=function(a){a=ih(a);return gh(this.g.h,a)};g.ta=function(){return this.g.ta()};g.clone=function(){return new hh(this)};g.Ec=function(){return this.g.Ec(!1)};function jh(a){var b;b||(b=kh(a||arguments.callee.caller,[]));return b}
function kh(a,b){var c=[];if(bb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(lh(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=lh(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(kh(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function lh(a){if(mh[a])return mh[a];a=String(a);if(!mh[a]){var b=/function ([^\(]+)/.exec(a);mh[a]=b?b[1]:"[Anonymous]"}return mh[a]}var mh={};function nh(a,b,c,d,e){this.n="number"==typeof e?e:oh++;this.l=d||ma();this.j=a;this.s=b;this.h=c;delete this.i;delete this.g}nh.prototype.n=0;nh.prototype.i=null;nh.prototype.g=null;var oh=0;nh.prototype.getMessage=function(){return this.s};function ph(a){this.n=a;this.g=this.j=this.h=this.i=null}function qh(a,b){this.name=a;this.value=b}qh.prototype.toString=function(){return this.name};var rh=new qh("SHOUT",1200),sh=new qh("SEVERE",1E3),th=new qh("WARNING",900),uh=new qh("INFO",800),vh=new qh("CONFIG",700),wh=new qh("FINE",500),xh=new qh("FINER",400),yh=new qh("FINEST",300),zh=[new qh("OFF",Infinity),rh,sh,th,uh,vh,wh,xh,yh,new qh("ALL",0)],Ah=null;ph.prototype.getName=function(){return this.n};
function Bh(a,b){a.g||(a.g=[]);a.g.push(b)}ph.prototype.getChildren=function(){this.j||(this.j={});return this.j};function Ch(a){if(a.h)return a.h;if(a.i)return Ch(a.i);Ra("Root logger has no level set.");return null}
ph.prototype.log=function(a,b,c){if(a.value>=Ch(this).value)for(fa(b)&&(b=b()),a=this.l(a,b,c,ph.prototype.log),b="log:"+a.getMessage(),q.console&&(q.console.timeStamp?q.console.timeStamp(b):q.console.markTimeline&&q.console.markTimeline(b)),q.msWriteProfilerMark&&q.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.g)for(var e=0,f=void 0;f=c.g[e];e++)f(d);b=b.i}};
ph.prototype.l=function(a,b,c,d){a=new nh(a,String(b),this.n);if(c){a.i=c;var e;d=d||ph.prototype.l;try{var f;var h=ba("window.location.href");if(x(c))f={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var k,l;b=!1;try{k=c.lineNumber||c.li||"Not available"}catch(m){k="Not available",b=!0}try{l=c.fileName||c.filename||c.sourceURL||q.$googDebugFname||h}catch(n){l="Not available",b=!0}f=!b&&c.lineNumber&&c.fileName&&c.stack&&c.message&&c.name?c:{message:c.message||
"Not available",name:c.name||"UnknownError",lineNumber:k,fileName:l,stack:c.stack||"Not available"}}e="Message: "+ya(f.message)+'\nUrl: <a href="view-source:'+f.fileName+'" target="_new">'+f.fileName+"</a>\nLine: "+f.lineNumber+"\n\nBrowser stack:\n"+ya(f.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+ya(jh(d)+"-> ")}catch(p){e="Exception trying to expose exception! You win, we lose. "+p}a.g=e}return a};function Dh(a,b,c){a.log(th,b,c)}var Eh={},Fh=null;
function Gh(){Fh||(Fh=new ph(""),Eh[""]=Fh,Fh.h=vh)}function Hh(){Gh();return Fh}function R(a){Gh();var b;if(!(b=Eh[a])){b=new ph(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=R(a.substr(0,c));c.getChildren()[d]=b;b.i=c;Eh[a]=b}return b};function Ih(a,b,c){a&&a.log(b,c,void 0)}function Jh(a,b){a&&a.log(sh,b,void 0)}function Kh(a,b){a&&Dh(a,b,void 0)}function Lh(a,b){a&&a.log(wh,b,void 0)};function S(a,b){a&&a.log(yh,b,void 0)}function T(a,b){a&&a.log(xh,b,void 0)};function Mh(a,b){P.call(this,a,b);this.s=[]}D(Mh,P);function Nh(a,b){for(var c=0;c<a.s.length;c++)a.s[c][0].call(a.s[c][1],b)}Mh.prototype.callback=function(a){this.s.length=0;Mh.m.callback.call(this,a)};Mh.prototype.I=function(a){this.s.length=0;Mh.m.I.call(this,a)};function Oh(a){Error.captureStackTrace?Error.captureStackTrace(this,Oh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ArgumentException"}D(Oh,Error);function Ph(a){Error.captureStackTrace?Error.captureStackTrace(this,Ph):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotSupportedException"}D(Oh,Error);Ph.prototype.name="ydn.error.NotSupportedException";
function Qh(a){Error.captureStackTrace?Error.captureStackTrace(this,Qh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.NotImplementedException"}D(Qh,Error);function Rh(a){Error.captureStackTrace?Error.captureStackTrace(this,Rh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InternalError"}D(Rh,Error);Rh.prototype.name="ydn.InternalError";
function Sh(a){Error.captureStackTrace?Error.captureStackTrace(this,Sh):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.ConstraintError"}D(Sh,Error);Sh.prototype.name="ydn.error.ConstraintError";D(Oh,Error);function Th(a){Error.captureStackTrace?Error.captureStackTrace(this,Th):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.error.InvalidOperationError"}D(Th,Error);function Uh(a){this.data=a}Uh.prototype.C=function(){return this.data.id.$t};Uh.prototype.ad=function(){return this.data.title?this.data.title.$t:void 0};Uh.prototype.W=function(){return this.data.content||null};function Vh(a){this.data=a}D(Vh,Uh);function Wh(){}Wh.prototype.g=null;function Xh(a){var b;(b=a.g)||(b={},Yh(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var Zh;function $h(){}D($h,Wh);function ai(a){return(a=Yh(a))?new ActiveXObject(a):new XMLHttpRequest}function Yh(a){if(!a.h&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.h=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.h}Zh=new $h;var bi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function ci(a){if(di){di=!1;var b=q.location;if(b){var c=b.href;if(c&&(c=(c=ci(c)[3]||null)&&decodeURIComponent(c))&&c!=b.hostname)throw di=!0,Error();}}return a.match(bi)}var di=ub;function ei(a){od.call(this);this.headers=new eh;this.V=a||null;this.i=!1;this.S=this.g=null;this.La=this.G="";this.s=0;this.u="";this.j=this.Da=this.H=this.ga=!1;this.n=0;this.N=null;this.l=fi;this.J=this.ee=!1}D(ei,od);var fi="";ei.prototype.h=R("goog.net.XhrIo");var gi=/^https?$/i,hi=["POST","PUT"];g=ei.prototype;g.Yf=function(){return this.l};
g.send=function(a,b,c,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.G+"; newUri="+a);b=b?b.toUpperCase():"GET";this.G=a;this.u="";this.s=0;this.La=b;this.ga=!1;this.i=!0;this.g=this.V?ai(this.V):ai(Zh);this.S=this.V?Xh(this.V):Xh(Zh);this.g.onreadystatechange=C(this.mg,this);try{Lh(this.h,ii(this,"Opening Xhr")),this.Da=!0,this.g.open(b,String(a),!0),this.Da=!1}catch(e){Lh(this.h,ii(this,"Error opening Xhr: "+e.message));ji(this,e);return}a=c||"";var f=this.headers.clone();
d&&Zg(d,function(a,b){f.set(b,a)});d=$a(f.za(),ki);c=q.FormData&&a instanceof q.FormData;!bb(hi,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.g.setRequestHeader(b,a)},this);this.l&&(this.g.responseType=this.l);"withCredentials"in this.g&&(this.g.withCredentials=this.ee);try{li(this),0<this.n&&(this.J=mi(this.g),Lh(this.h,ii(this,"Will abort after "+this.n+"ms if incomplete, xhr2 "+this.J)),this.J?(this.g.timeout=this.n,this.g.ontimeout=
C(this.wg,this)):this.N=Tg(this.wg,this.n,this)),Lh(this.h,ii(this,"Sending request")),this.H=!0,this.g.send(a),this.H=!1}catch(h){Lh(this.h,ii(this,"Send error: "+h.message)),ji(this,h)}};function mi(a){return G&&Bb(9)&&A(a.timeout)&&t(a.ontimeout)}function ki(a){return"content-type"==a.toLowerCase()}g.wg=function(){"undefined"!=typeof aa&&this.g&&(this.u="Timed out after "+this.n+"ms, aborting",this.s=8,Lh(this.h,ii(this,this.u)),J(this,"timeout"),this.abort(8))};
function ji(a,b){a.i=!1;a.g&&(a.j=!0,a.g.abort(),a.j=!1);a.u=b;a.s=5;ni(a);oi(a)}function ni(a){a.ga||(a.ga=!0,J(a,"complete"),J(a,"error"))}g.abort=function(a){this.g&&this.i&&(Lh(this.h,ii(this,"Aborting")),this.i=!1,this.j=!0,this.g.abort(),this.j=!1,this.s=a||7,J(this,"complete"),J(this,"abort"),oi(this))};g.B=function(){this.g&&(this.i&&(this.i=!1,this.j=!0,this.g.abort(),this.j=!1),oi(this,!0));ei.m.B.call(this)};g.mg=function(){this.P||(this.Da||this.H||this.j?pi(this):this.Gh())};g.Gh=function(){pi(this)};
function pi(a){if(a.i&&"undefined"!=typeof aa)if(a.S[1]&&4==qi(a)&&2==ri(a))Lh(a.h,ii(a,"Local request error detected and ignored"));else if(a.H&&4==qi(a))Tg(a.mg,0,a);else if(J(a,"readystatechange"),4==qi(a)){Lh(a.h,ii(a,"Request complete"));a.i=!1;try{si(a)?(J(a,"complete"),J(a,"success")):(a.s=6,a.u=ti(a)+" ["+ri(a)+"]",ni(a))}finally{oi(a)}}}
function oi(a,b){if(a.g){li(a);var c=a.g,d=a.S[0]?ca:null;a.g=null;a.S=null;b||J(a,"ready");try{c.onreadystatechange=d}catch(e){Jh(a.h,"Problem encountered resetting onreadystatechange: "+e.message)}}}function li(a){a.g&&a.J&&(a.g.ontimeout=null);A(a.N)&&(q.clearTimeout(a.N),a.N=null)}
function si(a){var b=ri(a),c;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!c){if(b=0===b)a=ci(String(a.G))[1]||null,!a&&self.location&&(a=self.location.protocol,a=a.substr(0,a.length-1)),b=!gi.test(a?a.toLowerCase():"");c=b}return c}function qi(a){return a.g?a.g.readyState:0}function ri(a){try{return 2<qi(a)?a.g.status:-1}catch(b){return-1}}
function ti(a){try{return 2<qi(a)?a.g.statusText:""}catch(b){return Lh(a.h,"Can not get status: "+b.message),""}}function ui(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.l){case fi:case "text":return a.g.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}Jh(a.h,"Response type "+a.l+" is not supported on this browser");return null}catch(b){return Lh(a.h,"Can not get response: "+b.message),null}}
function ii(a,b){return b+" ["+a.La+" "+a.G+" "+ri(a)+"]"};function vi(){this.g=[];this.h=[]}function wi(a){0==a.g.length&&(a.g=a.h,a.g.reverse(),a.h=[]);return a.g.pop()}g=vi.prototype;g.ja=function(){return this.g.length+this.h.length};g.Ia=function(){return 0==this.g.length&&0==this.h.length};g.clear=function(){this.g=[];this.h=[]};g.contains=function(a){return bb(this.g,a)||bb(this.h,a)};g.remove=function(a){var b=Ua(this.g,a);if(0>b)return db(this.h,a);Sa.splice.call(this.g,b,1);return!0};
g.ta=function(){for(var a=[],b=this.g.length-1;0<=b;--b)a.push(this.g[b]);for(var c=this.h.length,b=0;b<c;++b)a.push(this.h[b]);return a};function xi(a,b){Hc.call(this);this.n=a||0;this.i=b||10;if(this.n>this.i)throw Error(yi);this.g=new vi;this.h=new hh;this.l=null;this.gd()}D(xi,Hc);var yi="[goog.structs.Pool] Min can not be greater than max";g=xi.prototype;g.Gd=function(){var a=ma();if(!(null!=this.l&&0>a-this.l)){for(var b;0<this.g.ja()&&(b=wi(this.g),!this.of(b));)this.gd();!b&&this.ja()<this.i&&(b=this.Oe());b&&(this.l=a,this.h.add(b));return b}};
g.Fc=function(a){this.h.remove(a);this.of(a)&&this.ja()<this.i?this.g.h.push(a):zi(a)};g.gd=function(){for(var a=this.g;this.ja()<this.n;){var b=this.Oe();a.h.push(b)}for(;this.ja()>this.i&&0<this.g.ja();)zi(wi(a))};g.Oe=function(){return{}};function zi(a){if("function"==typeof a.T)a.T();else for(var b in a)a[b]=null}g.of=function(a){return"function"==typeof a.Fg?a.Fg():!0};g.contains=function(a){return this.g.contains(a)||this.h.contains(a)};g.ja=function(){return this.g.ja()+this.h.ja()};
g.Ia=function(){return this.g.Ia()&&this.h.Ia()};g.B=function(){xi.m.B.call(this);if(0<this.h.ja())throw Error("[goog.structs.Pool] Objects not released");delete this.h;for(var a=this.g;!a.Ia();)zi(wi(a));delete this.g};function Ai(a,b){this.g=a;this.h=b}Ai.prototype.U=function(){return this.h};Ai.prototype.clone=function(){return new Ai(this.g,this.h)};function Bi(a){this.g=[];if(a)a:{var b,c;if(a instanceof Bi){if(b=a.za(),c=a.ta(),0>=a.ja()){a=this.g;for(var d=0;d<b.length;d++)a.push(new Ai(b[d],c[d]));break a}}else b=Mb(a),c=Lb(a);for(d=0;d<b.length;d++)Ci(this,b[d],c[d])}}function Ci(a,b,c){var d=a.g;d.push(new Ai(b,c));b=d.length-1;a=a.g;for(c=a[b];0<b;)if(d=b-1>>1,a[d].g>c.g)a[b]=a[d],b=d;else break;a[b]=c}g=Bi.prototype;
g.remove=function(){var a=this.g,b=a.length,c=a[0];if(!(0>=b)){if(1==b)cb(a);else{a[0]=a.pop();for(var a=0,b=this.g,d=b.length,e=b[a];a<d>>1;){var f=2*a+1,h=2*a+2,f=h<d&&b[h].g<b[f].g?h:f;if(b[f].g>e.g)break;b[a]=b[f];a=f}b[a]=e}return c.U()}};g.ta=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].U());return b};g.za=function(){for(var a=this.g,b=[],c=a.length,d=0;d<c;d++)b.push(a[d].g);return b};g.clone=function(){return new Bi(this)};g.ja=function(){return this.g.length};
g.Ia=function(){return 0==this.g.length};g.clear=function(){cb(this.g)};function Di(){Bi.call(this)}D(Di,Bi);function Ei(a,b){this.j=new Di;xi.call(this,a,b)}D(Ei,xi);g=Ei.prototype;g.Gd=function(a,b){if(!a)return Ei.m.Gd.call(this);Ci(this.j,t(b)?b:100,a);this.af()};g.af=function(){for(var a=this.j;0<a.ja();){var b=this.Gd();if(b)a.remove().apply(this,[b]);else break}};g.Fc=function(a){Ei.m.Fc.call(this,a);this.af()};g.gd=function(){Ei.m.gd.call(this);this.af()};g.B=function(){Ei.m.B.call(this);q.clearTimeout(void 0);this.j.clear();this.j=null};function Fi(a,b,c){Ei.call(this,b,c);this.s=a}D(Fi,Ei);Fi.prototype.Oe=function(){var a=new ei,b=this.s;b&&b.forEach(function(b,d){a.headers.set(d,b)});return a};Fi.prototype.of=function(a){return!a.P&&!a.g};function Gi(a,b,c,d,e){od.call(this);this.j=t(a)?a:1;this.l=t(e)?Math.max(0,e):0;this.i=new Fi(b,c,d);this.h=new eh;this.g=new Td(this)}D(Gi,od);var Hi="ready complete success error abort timeout".split(" ");g=Gi.prototype;g.send=function(a,b,c,d,e,f,h,k,l,m){if(this.h.get(a))throw Error("[goog.net.XhrManager] ID in use");b=new Ii(b,C(this.ah,this,a),c,d,e,h,t(k)?k:this.j,l,m);this.h.set(a,b);a=C(this.Ug,this,a);this.i.Gd(a,f);return b};
g.abort=function(a,b){var c=this.h.get(a);if(c){var d=c.$c;c.Jf=!0;b&&(d&&(this.g.ca(d,Hi,c.Cf),id(d,"ready",function(){var a=this.i;a.h.remove(d)&&a.Fc(d)},!1,this)),this.h.remove(a));d&&d.abort()}};g.Ug=function(a,b){var c=this.h.get(a);c&&!c.$c?(this.g.listen(b,Hi,c.Cf),b.n=Math.max(0,this.l),b.l=c.Yf(),c.$c=b,c.$c.ee=c.ee,J(this,new Ji("ready",this,a,b)),Ki(this,a,b),c.Jf&&b.abort()):(c=this.i,c.h.remove(b)&&c.Fc(b))};
g.ah=function(a,b){var c=b.target;switch(b.type){case "ready":Ki(this,a,c);break;case "complete":a:{var d=this.h.get(a);if(7==c.s||si(c)||d.kd>d.Ne)if(J(this,new Ji("complete",this,a,c)),d&&(d.Of=!0,d.Nf)){c=d.Nf.call(c,b);break a}c=null}return c;case "success":J(this,new Ji("success",this,a,c));break;case "timeout":case "error":d=this.h.get(a);d.kd>d.Ne&&J(this,new Ji("error",this,a,c));break;case "abort":J(this,new Ji("abort",this,a,c))}return null};
function Ki(a,b,c){var d=a.h.get(b);!d||d.Of||d.kd>d.Ne?(d&&(a.g.ca(c,Hi,d.Cf),a.h.remove(b)),a=a.i,a.h.remove(c)&&a.Fc(c)):(d.kd++,c.send(d.Th,d.Wf(),d.W(),d.He()))}g.B=function(){Gi.m.B.call(this);this.i.T();this.i=null;this.g.T();this.g=null;this.h.clear();this.h=null};function Ji(a,b,c,d){I.call(this,a,b);this.id=c;this.$c=d}D(Ji,I);
function Ii(a,b,c,d,e,f,h,k,l){this.ee=!!l;this.Th=a;this.i=c||"GET";this.g=d;this.h=e||null;this.Ne=t(h)?h:1;this.kd=0;this.Jf=this.Of=!1;this.Cf=b;this.Nf=f;this.j=k||fi;this.$c=null}Ii.prototype.Wf=function(){return this.i};Ii.prototype.W=function(){return this.g};Ii.prototype.He=function(){return this.h};Ii.prototype.Yf=function(){return this.j};function Li(){this.g=ma()}var Mi=new Li;Li.prototype.set=function(a){this.g=a};Li.prototype.get=function(){return this.g};function Ni(a){this.j=a||"";this.l=Mi}Ni.prototype.g=!0;Ni.prototype.h=!1;function Oi(a){a=new Date(a.l);return Pi(a.getFullYear()-2E3)+Pi(a.getMonth()+1)+Pi(a.getDate())+" "+Pi(a.getHours())+":"+Pi(a.getMinutes())+":"+Pi(a.getSeconds())+"."+Pi(Math.floor(a.getMilliseconds()/10))}function Pi(a){return 10>a?"0"+a:String(a)}function Qi(a,b){var c=(a.l-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d}function Ri(a){Ni.call(this,a)}D(Ri,Ni);Ri.prototype.h=!0;
Ri.prototype.i=function(a){var b;switch(a.j.value){case rh.value:b="dbg-sh";break;case sh.value:b="dbg-sev";break;case th.value:b="dbg-w";break;case uh.value:b="dbg-i";break;default:b="dbg-f"}var c=[];c.push(this.j," ");this.g&&c.push("[",Oi(a),"] ");c.push("[",Ga(Qi(a,this.l.get())),"s] ");c.push("[",ya(a.h),"] ");c.push('<span class="',b,'">',xa(Ga(ya(a.getMessage()))));this.h&&a.i&&c.push("<br>",xa(Ga(a.g||"")));c.push("</span>");c.push("<br>");return c.join("")};
function Si(a){Ni.call(this,a)}D(Si,Ni);Si.prototype.i=function(a){var b=[];b.push(this.j," ");this.g&&b.push("[",Oi(a),"] ");b.push("[",Qi(a,this.l.get()),"s] ");b.push("[",a.h,"] ");b.push(a.getMessage());this.h&&a.i&&b.push("\n",a.g);b.push("\n");return b.join("")};function Ti(){this.j=C(this.n,this);this.g=new Si;this.g.g=!1;this.h=this.g.h=!1;this.i="";this.l={}}function Ui(a){var b=Vi;if(a!=b.h){var c=Hh();a?Bh(c,b.j):(c=c.g)&&db(c,b.j);b.h=a}}Ti.prototype.n=function(a){if(!this.l[a.h]){var b=this.g.i(a),c=Wi;if(c)switch(a.j){case rh:Xi(c,"info",b);break;case sh:Xi(c,"error",b);break;case th:Xi(c,"warn",b);break;default:Xi(c,"debug",b)}else window.opera?window.opera.postError(b):this.i+=b}};var Wi=window.console;
function Xi(a,b,c){if(a[b])a[b](c);else a.log(c)};function Yi(a){this.j=C(this.l,this);this.g=new Ri;this.h=this.g.g=!1;this.v=a;this.i=this.v.ownerDocument||this.v.document;a=Vb(this.v);var b=null,c=a.g;if(G&&c.createStyleSheet)a=b=c.createStyleSheet(),G&&t(a.cssText)?a.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
a.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";else{c=Zb(a.g,"head",void 0,void 0)[0];c||(b=Zb(a.g,"body",void 0,void 0)[0],c=a.o("head"),b.parentNode.insertBefore(c,b));var d=b=a.o("style");G&&t(d.cssText)?d.cssText=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}":
d.innerHTML=".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}";a.appendChild(c,b)}this.v.className+=" logdiv"}
Yi.prototype.l=function(a){var b=100>=this.v.scrollHeight-this.v.scrollTop-this.v.clientHeight,c=this.i.createElement("div");c.className="logmsg";c.innerHTML=this.g.i(a);this.v.appendChild(c);b&&(this.v.scrollTop=this.v.scrollHeight)};Yi.prototype.clear=function(){this.v.innerHTML=""};var Vi=null,Zi=null;R("ydn.debug");function $i(a,b){var c;if(A(b))c=new qh("log",b);else if(x(b)){c=b.toUpperCase();if(!Ah){Ah={};for(var d=0,e;e=zh[d];d++)Ah[e.value]=e,Ah[e.name]=e}c=Ah[c]||null}else c=wh;R(a||"ydn").h=c;t(void 0)?Zi||(c=Zi=new Yi(void 0),!0!=c.h&&(d=Hh(),Bh(d,c.j),c.h=!0),Hh().h=th):Vi||Zi||(Vi=new Ti,Ui(!0),Hh().h=th)}var aj=null;function bj(a){aj&&setTimeout(function(){aj.log(a)},10)};function cj(a,b){var c;if(a instanceof cj)this.Tb=t(b)?b:a.Tb,dj(this,a.xc),this.de=a.de,this.Ic=a.Ic,ej(this,a.Ed),this.Xc=a.Xc,fj(this,a.g.clone()),this.Ad=a.Ad;else if(a&&(c=ci(String(a)))){this.Tb=!!b;dj(this,c[1]||"",!0);var d=c[2]||"";this.de=d?decodeURIComponent(d):"";this.Ic=(d=c[3]||"")?decodeURIComponent(d):"";ej(this,c[4]);this.Xc=(d=c[5]||"")?decodeURIComponent(d):"";fj(this,c[6]||"",!0);this.Ad=(c=c[7]||"")?decodeURIComponent(c):""}else this.Tb=!!b,this.g=new gj(null,0,this.Tb)}g=cj.prototype;
g.xc="";g.de="";g.Ic="";g.Ed=null;g.Xc="";g.Ad="";g.Tb=!1;g.toString=function(){var a=[],b=this.xc;b&&a.push(ij(b,jj),":");if(b=this.Ic){a.push("//");var c=this.de;c&&a.push(ij(c,jj),"@");a.push(encodeURIComponent(String(b)));b=this.Ed;null!=b&&a.push(":",String(b))}if(b=this.Xc)this.Ic&&"/"!=b.charAt(0)&&a.push("/"),a.push(ij(b,"/"==b.charAt(0)?kj:lj));(b=this.g.toString())&&a.push("?",b);(b=this.Ad)&&a.push("#",ij(b,mj));return a.join("")};g.clone=function(){return new cj(this)};
function dj(a,b,c){a.xc=c?b?decodeURIComponent(b):"":b;a.xc&&(a.xc=a.xc.replace(/:$/,""))}function ej(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ed=b}else a.Ed=null}function fj(a,b,c){b instanceof gj?(a.g=b,nj(a.g,a.Tb)):(c||(b=ij(b,oj)),a.g=new gj(b,0,a.Tb))}function ij(a,b){return x(a)?encodeURI(a).replace(b,pj):null}function pj(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}
var jj=/[#\/\?@]/g,lj=/[\#\?:]/g,kj=/[\#\?]/g,oj=/[\#\?@]/g,mj=/#/g;function gj(a,b,c){this.g=a||null;this.h=!!c}function qj(a){if(!a.fa&&(a.fa=new eh,a.Aa=0,a.g))for(var b=a.g.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;0<=d?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c];e=decodeURIComponent(e.replace(/\+/g," "));e=rj(a,e);a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}g=gj.prototype;g.fa=null;g.Aa=null;g.ja=function(){qj(this);return this.Aa};
g.add=function(a,b){qj(this);this.g=null;a=rj(this,a);var c=this.fa.get(a);c||this.fa.set(a,c=[]);c.push(b);this.Aa++;return this};g.remove=function(a){qj(this);a=rj(this,a);return gh(this.fa.h,a)?(this.g=null,this.Aa-=this.fa.get(a).length,this.fa.remove(a)):!1};g.clear=function(){this.fa=this.g=null;this.Aa=0};g.Ia=function(){qj(this);return 0==this.Aa};function sj(a,b){qj(a);b=rj(a,b);return gh(a.fa.h,b)}
g.za=function(){qj(this);for(var a=this.fa.ta(),b=this.fa.za(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.ta=function(a){qj(this);var b=[];if(x(a))sj(this,a)&&(b=eb(b,this.fa.get(rj(this,a))));else{a=this.fa.ta();for(var c=0;c<a.length;c++)b=eb(b,a[c])}return b};g.set=function(a,b){qj(this);this.g=null;a=rj(this,a);sj(this,a)&&(this.Aa-=this.fa.get(a).length);this.fa.set(a,[b]);this.Aa++;return this};
g.get=function(a,b){var c=a?this.ta(a):[];return 0<c.length?String(c[0]):b};g.toString=function(){if(this.g)return this.g;if(!this.fa)return"";for(var a=[],b=this.fa.za(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.ta(d),f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}return this.g=a.join("&")};g.clone=function(){var a=new gj;a.g=this.g;this.fa&&(a.fa=this.fa.clone(),a.Aa=this.Aa);return a};
function rj(a,b){var c=String(b);a.h&&(c=c.toLowerCase());return c}function nj(a,b){b&&!a.h&&(qj(a),a.g=null,a.fa.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.g=null,this.fa.set(rj(this,e),fb(a)),this.Aa+=a.length))},a));a.h=b};R("ydn");function tj(a){return!x(a)||ta(a)?{}:JSON.parse(a)}function uj(a){var b;try{b=vj(a)}catch(c){b=""}return b?b.substr(0,70)+(70<b.length?"...":""):""}function vj(a){return JSON.stringify(a,void 0,void 0)};R("ydn.http");var wj,xj={},yj=[];function zj(){var a=Aj;xj["default"]=a}function Bj(a){if(!t(a))return xj["default"];for(var b=a,c=0;c<yj.length;c++){var d=(0,yj[c])(a);if(d){b=d;break}}return xj[b]||null}function Cj(){wj||(wj=new Gi);return wj}function Dj(a,b,c,d){x(a)?this.raw=a:(this.raw=null,this.g=a,this.body=b,this.headers=c||{},this.h=d)}function Ej(a){if(a.raw){var b=tj(a.raw);b.gapiRequest&&(b=b.gapiRequest.data);a.g=b.status;a.h=b.statusText;a.headers=b.headers;a.body=b.body;a.raw=null}}
function Fj(a){Ej(a);return a.g}function Gj(a){Ej(a);return 200<=a.g&&400>a.g}function Hj(a){Ej(a);return a.h||""}function Ij(a){Ej(a);return a.body}Dj.prototype.He=function(){Ej(this);return this.headers};function Jj(a,b,c,d,e){this.g=a;this.method=b?b.toUpperCase():"GET";this.params=c||{};this.headers=d||{};this.body=e}var Kj=null;R("ydn.gdata.base");function Lj(a){return tj(vj(a))}function Mj(a,b){var c;c=c||{};if(null!=a&&null!=b){if(w(a)&&w(b)){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(-1==$a(b,function(b){return Mj(b,a[d])}))return!1;return!0}if(w(a))return 1==a.length&&Mj(a[0],b);if(w(b))return 1==b.length&&Mj(b[0],a);if(B(a)&&B(a)){for(var e in a)if(a.hasOwnProperty(e)&&!c[e]){var f=Mj(a[e],b[e]);if(!f)return!1}for(e in b)if(b.hasOwnProperty(e)&&!c[e]&&(f=Mj(a[e],b[e]),!f))return!1;return!0}return a===b}return!1}
function Nj(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return a[b]};R("ydn");var Oj,Pj;Pj=Oj=!1;var Qj=mb;Qj&&(-1!=Qj.indexOf("Firefox")||-1!=Qj.indexOf("Camino")||(-1!=Qj.indexOf("iPhone")||-1!=Qj.indexOf("iPod")?Oj=!0:-1!=Qj.indexOf("iPad")?Pj=!0:-1!=Qj.indexOf("Chrome")||-1!=Qj.indexOf("Android")||Qj.indexOf("Safari")));var Rj=Oj,Sj=Pj;function Tj(a){if(!v(a))throw new Oh("Array required.");if(t(void 0))return a=Xa(a,function(a){return a[void 0]}),Tj(a);for(var b=Number.NaN,c=-1,d=0;d<a.length;d++)!isNaN(a[d])&&(isNaN(b)||a[d]>b)&&(b=a[d],c=d);return{value:b,index:c}};R("ydn.xml");function Uj(a){var b;if(t(a.id))b=a.id.$t;else if(t(a.batch$id))b=a.batch$id.$t;else if(t(a.g))b=a.g.$t;else throw new Oh("id or batch:id required.");this.id=b;this.data=a}D(Uj,Vh);g=Uj.prototype;g.logger=R("ydn.gdata.Entry");g.Dd=function(){return this.kind};g.getData=function(){return this.data};g.ad=Uh.prototype.ad;g.C=function(){return this.id};function Vj(a){return a.id.match(/\w+$/)[0]}g.yh=["id","batch$id","link","category"];g.W=Uh.prototype.W;g.setTitle=function(){throw new Qh;};
g.update=function(a){var b=["batch$status","batch$operation","status"],c;for(c in a.data)a.data.hasOwnProperty(c)&&B(a.data[c])&&!bb(b,c)&&!bb(this.yh,c)&&(this.data[c]=a.data[c])};function Wj(a){var b,c=a.match(/^\D*0*(\d{1,2}\D)?\D*0*(.+)/);c?(b=c[1].replace(/\D/g,""),a=c[2].replace(/\D/g,"")):a=a.replace(/\D/g,"");return{ve:b,Ya:a}};function Xj(a){Uj.call(this,a);a=(a=this.id.match(/https?:\/\/www.google.com\/m8\/feeds\/(group|contact|batch)s?\/([^\/]+)\/?(\w+)\/?(\w*)?/))?{ki:"m8",kind:a[1],user_id:a[2]?a[2].replace("%40","@"):"",projection:a[3],id:a[4]}:null;window.console.assert(!!a,"Invalid m8 entry: "+this.id);this.user_id=a.user_id;window.console.assert(a.kind==this.kind,"Invalid kind: "+a.kind+" vs "+this.kind)}D(Xj,Uj);Xj.prototype.logger=R("ydn.gdata.m8.Entry");Xj.prototype.type="m8";
Xj.prototype.toString=function(){var a=this.id?Vj(this):void 0;return"m8.Entry."+this.kind+":"+a};function Yj(a,b,c,d,e,f){this.h=a;this.domain=b;this.module=c;this.g=d;this.i=A(e)?e:NaN;this.j=A(f)?f:NaN}Yj.prototype.U=function(){return this.h+"://"+this.domain+"/"+this.module+"/"+this.g};function Zj(a){Xj.call(this,a)}D(Zj,Xj);Zj.prototype.kind="contact";Zj.prototype.logger=R("ydn.gdata.m8.ContactEntry");Zj.prototype.Dd=function(){return"contact"};Zj.prototype.getName=function(a){var b=a?"":this.ad();if(a||0==b.length)a=this.getData().gd$name,B(a)&&(b=a.gd$fullName.$t||"",0==b.length&&(b=(a.gd$givenName.$t||"")+" "+(a.gd$familyName.$t||"")));return wa(b)};function ak(a){var b=a.data.gd$email;a=[];for(var b=v(b)?b:b?[b]:[],c=0;c<b.length;c++)a.push(b[c].address);return a}
function bk(a){a=a.data.gd$phoneNumber;a=v(a)?a:B(a)?[a]:[];for(var b=[],c=0;c<a.length;c++)a[c].$t&&!ta(a[c].$t)&&b.push(a[c].$t);return b}
function ck(a,b,c,d){a=a.getData();a=v(a.gContact$externalId)?a.gContact$externalId:a.gContact$externalId?[a.gContact$externalId]:[];for(var e=0;e<a.length;e++){var f;var h=a[e];if(B(h)&&x(h.value))if(f=(f=h.value)?f.match(/(\w+):\/\/([^\/]+)\/([^\/]+)\/(.*)/):null){var k=NaN,l=NaN;if(x(h.label)){var h=h.label,m=h.indexOf("#"),n=h.indexOf("-");0<m&&0<n&&n>m&&(k=parseInt(h.substring(m,n),10),l=parseInt(h.substring(n),10))}f=new Yj(f[1],f[2],f[3],f[4],k,l)}else f=null;else f=null;if(f&&!("sugarcrm"!=
f.h||b&&b!=f.domain||d&&d!=f.g||c&&c!=f.module))return f}return null};function dk(a,b){var c;c=a.replace("@","%40");c="http://www.google.com/m8/feeds/contacts/"+c+"/base/"+ ++ek;b.id={$t:c};Xj.call(this,b)}D(dk,Zj);var ek=0;function fk(a,b,c){this.i=a;this.g=b;this.h=c;this.kind=gk}var gk="d";
function hk(a,b){var c,d={gd$email:[{address:a.g}]};a.h&&(d.gd$name={gd$fullName:{$t:a.h}});c=new dk(a.i,d);for(var d=[],e=0;e<b.length;e++){for(var f=e,h=c,k=b[e],l=0,m=ak(h),n=ak(k),p=0;p<m.length;p++)for(var r=m[p],s=0;s<n.length;s++){var y=n[s];r&&r==y&&(l+=1)}m=0;r=h.data.gd$name;s=k.data.gd$name;if(r&&s)for(y=["gd$familyName","gd$givenName","gd$additionalName","gd$fullName"],n=[.06,.06,.06,.12],p=0;4>p;p++){var z=r[y[p]],E=s[y[p]];z&&E==z&&(m+=n[p])}p=0;n=h.ad();r=k.ad();n&&n==r&&(p+=.2);s=
0;h=bk(h);k=bk(k);r=h.length;for(n=[];r--;){s=h[r];y=k.length;for(n[r]=0;y--;)E=k[y],s.$t&&E.$t&&((z=s)&&E&&0!=z.length&&0!=E.length?(z=z.trim(),E=E.trim(),z=Wj(z),E=Wj(E),z=z.ve&&z.Ya&&z.ve==E.ve&&z.Ya==E.Ya?6<=z.Ya.length?1:4<=z.Ya.length?.8:.4:z.Ya&&4<=z.Ya.length&&z.Ya==E.Ya?8<=z.Ya.length?.8:4<=z.Ya.length?.6:.4:0):z=0,n[r]=Math.max(n[r],.7*z));s=Tj(n).value}d[f]=l+m+p+s}c=[];for(e=0;e<b.length;e++){f=c;l=d[e];m=lb;n=0;k=f.length;for(h=void 0;n<k;)p=n+k>>1,r=m(l,f[p]),0<r?n=p+1:(k=p,h=!r);f=
h?n:~n;0>f?(hb(c,-(f+1),0,d[e]),l=b.splice(e,1),hb(b,-(f+1),0,l[0])):hb(c,f,0,d[e])}}fk.prototype.toString=function(){return"ContactModel:"+this.g};function ik(a,b,c){this.i=a;this.h=b;this.g=c;this.id=this.h+(this.g?"-"+this.g:"")}ik.prototype.send=function(a,b){var c=new jk(a),d=this.g;c.n=this.h;c.s=d;b&&(c.h=b);var d=c.j,e=this.i,f=c.toJSON();kk(e).postMessage(f);e.g.push(c);50<e.g.length&&(e.g.length-=1);return d};function lk(a){I.call(this,a.req||"event");this.h=a}D(lk,I);lk.prototype.getMessage=function(){return this.h};lk.prototype.getData=function(){return this.h.data};function jk(a){this.id="i"+this.count();this.req=a;this.i=!0;this.g=this.h=null;this.j=new Mh;this.l=NaN}jk.prototype.C=function(){return this.id};var mk=0;g=jk.prototype;g.count=function(){mk++;return mk};
g.listen=function(a){if(a&&a.id==this.id){this.h=a.data;var b=a.error;b&&(b instanceof Error?this.g=b:B(b)?(this.g=Error(b.message),this.g.name=b.name,this.g.source=b,this.g.result=this.h):(this.g=Error(b),this.g.name="UnknownError"));a.done?(this.i=!1,this.g?this.j.I(this.g):this.j.callback(this.h),window.clearTimeout(this.l)):Nh(this.j,a.data);return!0}return!1};g.toString=function(){return"Message:"+this.id+(this.i?"*":"")};g.getData=function(){return this.h};
g.toJSON=function(){var a=this;this.l=window.setTimeout(function(){if(a.i){var b=Error("message timeout");b.name="TimeOutError";a.listen({id:a.id,req:a.req,error:b})}},1E4);return{id:this.id,req:this.req,group:this.n,name:this.s,data:this.h}};function nk(a){od.call(this);var b=x(a)?null:a;this.name=x(a)?a:a.name;this.g=[];this.n=b;this.h=null;this.i={}}D(nk,od);nk.prototype.B=function(){if(this.h){var a=this;this.h.disconnect(function(){a.h=null;a.g.length=0})}else this.g.length=0};
nk.prototype.l=function(a){if(a)if(a.id)for(var b=this.g.length-1;0<=b;b--){if(this.g[b].C()==a.id){if(this.g[b].listen(a)){this.g[b].i?25<b&&(a=this.g.splice(b,1),this.g.unshift(a[0])):this.g.splice(b,1);break}break}}else"info"==a.req?(a.data=this.n,this.h.postMessage(a)):"html-body-inner"==a.req?(window.console.log("html",a),a.req="",a.done=!0,a.data=document&&document.body?document.body.innerHTML:"",this.h.postMessage(a)):J(this,new lk(a))};nk.prototype.toString=function(){return"Pipe:"+this.name};
nk.prototype.j=function(a,b){var c=a||ok,d=c+(b?"-"+b:"");this.i[d]||(this.i[d]=new ik(this,c,b||""));return this.i[d]};function kk(a){if(!a.h){a.h=chrome.runtime.connect({name:a.name});var b=C(a.l,a);a.h.onMessage.addListener(b);a.h.onDisconnect.addListener(function(){a.h.onMessage.removeListener(b);a.h=null;a.g.length=0})}return a.h}var pk=null;function qk(){if(!pk){var a=ok+"-"+ma();pk=new nk(a)}return pk}function rk(a){var b=a;x(a)&&(b={group:a,name:a+"-"+ma()});return pk=new nk(b)}var ok="default";
function sk(a,b){return qk().j(a,b)};var tk="Accounts Calls Campaigns Contacts Documents Meetings Emails EmailTemplates Employees Leads Notes Opportunities Tasks Teams TeamSets Users".split(" "),uk="Accounts Contacts EmailTemplates Leads Notes Tasks Meetings Calls Opportunities Emails".split(" "),vk=["Accounts","Contacts","Leads"],wk=["Contacts","Leads","Accounts"],xk=["Meetings","Calls","Tasks","Opportunities"];function yk(a){a=tk.indexOf(a);return tk[a]};function zk(a,b,c){this.domain=a;this.module=b;this.g=c||{}}function Ak(a){return null!=a.g.id}g=zk.prototype;g.getData=function(){return this.g};g.C=function(){return this.g.id};function Bk(a){return a.g?+Ck(a.g.date_modified):NaN}function Dk(a){return"Tasks"==a?"date_due":"Opportunities"==a?"date_closed":"date_start"}
function Ek(a){if(!a.g)return"";if(a.g.name)return a.g.name;var b=a.g.full_name||a.g.name;return b?b:a.g.first_name||a.g.last_name?(b=(a.g.first_name||"").trim(),a=(a.g.last_name||"").trim(),b+" "+a):a.g.id}g.value=function(a){return this.g[a]};g.toJSON=function(){return{domain:this.domain,module:this.module,obj:this.g}};g.toString=function(){return"Record:"+this.module+":"+(this.g?this.g.id:void 0)};function Fk(a,b){this.parent=a;this.g=b}Fk.prototype.i=function(){return Gk(this.parent.module).module_fields[this.g]};function Hk(a){return(a=a.i())?a.group:""}Fk.prototype.h=function(){return this.parent.module.value(this.g)};Fk.prototype.Lc=function(){return this.h()};function Ik(a){a=a.i();return x(a.label)?a.label.replace(/:$/,""):a.label}function Jk(a){return(a=a.i())?a.type||"varchar":"varchar"}function Kk(a){return(a=a.i())?!!a.calculated:!1}
var Lk={di:"add",ei:"edit",fi:"optout",gi:"primary",hi:"remove"};Fk.prototype.j=function(){return[]};Fk.prototype.toString=function(){return this.parent+";Field:"+this.g};Fk.prototype.l=function(a){if(Kk(this)||a===this.h())return null;var b={};b[this.g]=a;return b};function Mk(a,b){Fk.call(this,a,b)}D(Mk,Fk);Mk.prototype.h=function(){var a;a:{var b=this.parent;a=this.g;var c=b.module.value("email");if(v(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a=d.email_address;break a}}a=null}else a=b.module.value(a)}return a};Mk.prototype.i=function(){return Gk(this.parent.module).module_fields[this.g]||Gk(this.parent.module).module_fields.email};
Mk.prototype.l=function(a){if(!a)return null;var b=this.parent;if(Nk(b)){for(var b=Ok(b),c=0;c<b.length;c++){var d=b[c];if(b[c].email_address_id==this.g){if(d.email_address==a)return null;b[c].email_address=a;b[c].email_address_caps=a.toUpperCase();return{email:b}}}b={};b[this.g]=a;return b}if(b.module.value(this.g)==a)return null;b={};b[this.g]=a;return b};
function Pk(a){var b=a.parent;if(Nk(b)){for(var c=Ok(b),b=0;b<c.length;b++)if(c[b].email_address_id==a.g)return a=Lj(c),a.splice(b,1),{email:a};return null}return b.module.value(a.g)?(b={},b[a.g]=void 0,b):null}
Mk.prototype.j=function(){var a;a:{var b=this.parent;a=this.g;var c=b.module.value("email");if(v(c)){for(b=0;b<c.length;b++){var d=c[b];if(d.email_address_id==a){a="1"==d.opt_out;break a}}a=null}else a="email"==a?"1"==b.module.value("email_opt_out"):null}return[{name:"remove",label:"Remove"},{name:"optout",label:"Opt out",type:"bool",value:a}]};function Qk(a,b){this.jb=null;this.g=a||{};this.df=Lj(b||[])}Qk.prototype.render=function(a){this.jb=document.createElement("div");this.jb.className="more-menu";var b=Rk(this.g.className||"more-vert"),c=document.createElement("div");c.className="svg-button";c.appendChild(b);b=Sk(this.df);b.classList.add("flyout-menu");this.jb.appendChild(c);this.jb.appendChild(b);a.appendChild(this.jb)};
function Tk(a){var b=zc(a.target,null,"goog-menuitem");if(b){a.preventDefault();a.stopPropagation();a=b.getAttribute("name");var c=b.classList.contains("goog-menuitem-disabled"),d=zc(b,null,"flyout-menu");L(d,!1);setTimeout(function(){L(d,!0)},1E3);return c?null:a}return null}Qk.prototype.k=function(){return this.jb};
function Sk(a){for(var b=Vb(),c=[],d=0;d<a.length;d++){var e=a[d];if(e){var f=[b.o("div",{"class":"goog-menuitem-content"},e.label)];if("bool"==e.type){var h=b.o("div",{"class":"goog-menuitem-checkbox",role:"menuitem"});f.unshift(h)}e.children&&(h=Rk("arrow-drop-right"),h.classList.add("left-arrow"),f.unshift(h));f=b.o("div",{"class":"goog-menuitem",role:"bool"==e.type?"goog-menuitem-checkbox":"menuitem"},f);f.setAttribute("name",e.name);e.value&&f.classList.add("goog-option-selected");e.children&&
(h=Sk(e.children),f.appendChild(h));e.disabled&&f.classList.add("goog-menuitem-disabled");c.push(f)}else e=b.o("div",{"class":"goog-menuseparator",role:"separator"}),c.push(e)}return b.o("div",{"class":"goog-menu goog-menu-vertical",role:"menu"},c)}function Uk(a,b){var c=document.createElement("span");c.className="flyout-button";var d=Rk("more-vert"),e=Sk(b);e.classList.add("flyout-menu");c.appendChild(d);c.appendChild(e);a.appendChild(c)}
function Vk(a,b,c){(a=a.k().querySelector('div.goog-menuitem[name="'+b+'"]'))&&(c?a.classList.remove("goog-menuitem-disabled"):a.classList.add("goog-menuitem-disabled"))}function Wk(a,b){var c=a.k().querySelector('div.goog-menuitem[name="sync"]');c&&(c.querySelector(".goog-menuitem-content").textContent=b)};function Xk(a,b){this.module=a;this.g=b||""}g=Xk.prototype;g.Ab=function(a){var b=Gk(this.module),c;for(c in b.module_fields)if(c==a)return!0;return!1};g.hg=function(){var a=Gk(this.module),b=[],c;for(c in a.module_fields){var d=a.module_fields[c];this.g&&d.group==this.g?b.push(c):this.g||d.group||b.push(c)}return b};function Yk(a,b){var c=a.module.value(b);return x(c)?c:""}g.Ge=function(){var a=this.g.replace("_"," ");return a=a.charAt(0).toUpperCase()+a.substr(1)};g.bd=function(){return null};
g.Ee=function(){return null};function Zk(a,b){Xk.call(this,a,b)}D(Zk,Xk);function $k(a,b){return a.module.value(a.g+"_"+b)}function al(a,b,c,d,e,f){var h="";a&&(h+=a);c?h=d?c+" "+d+", "+h:h+(" "+c):d&&(h+=" "+d);h||(h=e||"");h||(h=f||"");b&&(h=b+" "+h);return h}Zk.prototype.bd=function(){var a=$k(this,"country"),b=$k(this,"city"),c=$k(this,"state"),d=$k(this,"postalcode"),e=$k(this,"street")||"",f=$k(this,"street_2")||"";return al(a,b,c,d,e,f)};Zk.prototype.Ee=function(){return{label:"Edit",name:"edit",type:"text"}};function bl(a,b){Xk.call(this,a,b);this.Ga=[]}D(bl,Xk);bl.prototype.h=function(a){var b=cl(this,a);if(b)return b;b=new Fk(this,a);this.Ga.push(b);return b};function cl(a,b){for(var c=0;c<a.Ga.length;c++)if(a.Ga[c].g==b)return a.Ga[c];return null};function dl(a){bl.call(this,a,"email")}D(dl,bl);dl.prototype.hg=function(){var a=this.module.value("email");if(v(a))return a.map(function(a){return a.email_address_id});var a=Nk(this),b=Gk(this.module),c=[],d;for(d in b.module_fields)"email"!=b.module_fields[d].group||a&&"email"==d||c.push(d);return c};dl.prototype.h=function(a){var b=cl(this,a);if(b)return b;b=new Mk(this,a);this.Ga.push(b);return b};function Nk(a){var b=a.module.value("email");return t(b)?v(b):!!el(a.module.parent)}
dl.prototype.Ab=function(a){var b=this.module.value("email");return v(b)?b.some(function(b){return b.email_address_id==a}):dl.m.Ab.call(this,a)};function Ok(a){var b=a.module.value("email");if(v(b))return b;a=Gk(a.module);var c=[],d;for(d in a.module_fields)"email"==a.module_fields[d].group&&c.push({email_address_id:d,email_address:b,primary_address:"0"});return c};function fl(a){Xk.call(this,a,"name")}D(fl,Xk);
function gl(a,b){b=b.trim();if(!a.Ab("last_name"))return{full_name:b?b:void 0};var c={salutation:void 0,full_name:void 0,first_name:void 0,last_name:void 0};if(!b)return c;var d=b.split(/\s+/);if(!a.Ab("last_name"))return{name:b};var e=a.module.value("salutation"),f=a.module.value("first_name"),h=a.module.value("last_name");d[0]==e&&(c.salutation=d.shift(),b=b.substr(e.length+1).trim());if((e=a.Ab("salutation"))&&!(e=f&&d[1]==f)&&(e=2<=d.length))if(e=d[0]){"."!=e.charAt(e.length-1)&&(e+=".");var k=
Gk(a.module).module_fields.salutation,e=0<=(k.options?Object.keys(k.options):["Mrs.","Mr."]).indexOf(e)}else e=!1;e&&(c.salutation=d.shift(),b=b.substr(c.salutation.length+1).trim());e=b.indexOf(h);h&&0<=e?(c.first_name=b.substr(0,e-1).trim(),c.last_name=b.substr(e).trim()):(h=b.indexOf(f),f&&0<=h?(c.first_name=f,c.last_name=b.substr(h+f.length+1,b.length).trim()):(c.first_name=d.shift(),c.last_name=d.join(" ")));c.first_name&&(c.full_name=c.first_name);c.last_name&&(c.full_name=c.full_name?c.full_name+
(" "+c.last_name):c.last_name);return c}fl.prototype.Ge=function(){return"Name"};fl.prototype.bd=function(){var a;if(this.Ab("full_name")){a="";var b=this.module.value("full_name");b?a+=b:(a+=this.module.value("first_name")||"",(b=this.module.value("last_name"))&&(a+=" "+b))}else a=this.module.value("name")||"";return a};fl.prototype.Ee=function(){return{label:"Edit",name:"edit",type:"text"}};function hl(a,b){Fk.call(this,a,b)}D(hl,Fk);hl.prototype.j=function(){return[{name:"remove",label:"Remove"}]};function il(a){bl.call(this,a,"phone")}D(il,bl);il.prototype.h=function(a){var b=this.Ga.indexOf(a);if(0<=b)return this.Ga[b];a=new hl(this,a);this.Ga.push(a);return a};function jl(a,b){od.call(this);this.parent=a;this.g=b;this.h={}}D(jl,od);g=jl.prototype;g.logger=R("ydn.crm.sugarcrm.model.Record");g.C=function(){return this.g.C()};g.value=function(a){return this.g.value(a)};function kl(a){return a.g.module}function Gk(a){return a.parent.s[kl(a)]}
function ll(a,b){if(!b||0==Object.keys(b))return Hg(!1);var c=Lj(a.g.getData()),d;for(d in b)c[d]=b[d];return ml(a.parent,new zk(U(a.parent),kl(a),c)).K(function(a){Ak(this.g)&&this.g.C();var b=this.g;if(a){b.g||(b.g={});for(var c in a)b.g[c]=a[c]}Ak(this.g)?J(this,new nl):J(this,new ol)},a)}g.B=function(){jl.m.B.call(this);this.h=null};
function pl(a,b){if(b!=a.g)if(b)if(b.module!=a.g.module){var c=a.g.module;a.g=b;J(a,new ql(c,a))}else Ak(b)?Ak(a.g)?b.C()!=a.g.C()?(a.g.C(),a.g=b,J(a,new ol(0,a))):(a.g=b,J(a,new nl(a))):Ak(b)&&(a.g=b,J(a,new ol(0,a))):Ak(a.g)&&(a.g.C(),a.g=b,J(a,new ol(0,a)));else Ak(a.g)&&(a.g.g={},J(a,new ol(0,a)))}g.toString=function(){return"ydn.crm.sugarcrm.model.Record:"+this.g};function rl(a,b){I.call(this,a,b)}D(rl,I);function sl(a,b,c,d){I.call(this,"context-change",d);this.h=a;this.u=b||null;this.l=c||null}D(sl,rl);function ol(a,b){I.call(this,"record-change",b)}D(ol,rl);function ql(a,b){I.call(this,"module-change",b);this.module=a}D(ql,rl);function nl(a){I.call(this,"record-update",a)}D(nl,rl);function tl(a,b,c){od.call(this);this.about=a;a={};if(v(b))for(var d=0;d<b.length;d++)a[b[d].module_name]=b[d];else a=b;this.s=a;this.l=c||{};this.Ib=new Td(this);this.j=new zk(U(this),"Users");ul(this);b=qk();this.Ib.listen(b,["login","host-permission"],this.lh);this.n=null}D(tl,od);g=tl.prototype;g.lh=function(a){"login"==a.type?(a=a.getData())&&a.domain==U(this)&&vl(this,a):"host-permission"==a.type&&this.about&&(a=a.getData(),a.grant&&a.grant==U(this)&&(this.about.hostPermission=!0,J(this,new I("hag"))))};
function el(a){if(null==a.n&&a.l){var b;b=0<=Ma(a.l?a.l.version||"":"","7");a.n=b}return a.n}function vl(a,b){if(b){var c=a.about.isLogin,d=!!b&&b.isLogin;a.about=b;!c&&d?J(a,new I("login",a)):c&&!d&&J(a,new I("logout",a))}}g.isLogin=function(){return!!this.about.isLogin};function ul(a){a.about&&a.about.userName&&a.send("login-user").K(function(a){a&&a.id&&(this.j.g=a||{})},a)}function wl(a){return a.send("about").K(function(a){vl(this,a)},a)}function xl(a){return sk("sugarcrm",U(a))}
function U(a){return a.about.domain}function yl(a){return a.about.baseUrl?a.about.baseUrl:"https://"+a.about.domain}function zl(a,b,c){return el(a)?yl(a)+"#"+b+"/"+c:yl(a)+"/index.php?module="+b+"&action=DetailView&record="+c}function Al(a,b,c){var d={};d.domain=U(a);d.baseUrl=a.about.baseUrl||null;d.username=b;d.password=c;return a.send("login",d).K(function(a){vl(this,a)},a)}g.send=function(a,b){return sk("sugarcrm",U(this)).send(a,b)};
function Bl(a,b,c,d,e,f){b={store:b};c&&(b.index=c);d&&(d instanceof Cl?b.range=d.toJSON():b.key=d);b.prefix=!!e;f&&(b.limit=void 0);return xl(a).send("query",[b])}function Dl(a,b,c){c={store:b,index:"name",q:c,fetchFull:!1};"Notes"==b&&(c.index="content");return xl(a).send("search",[c])}
function El(a,b,c,d){var e=document.createElement("div");e.innerHTML=b.bf;var f=b.Rf,f=f&&f instanceof Date&&!isNaN(f.getTime())?Fl(b.Rf):"",h=a.about?a.about.userName||"":"",k;k=a.j.value("name")||a.about.userName||null;return a.send("new-record",{module:"Emails",record:{assigned_user_id:h,assigned_user_name:k,type:"archived",date_sent:f,description:e.textContent,description_html:b.bf,name:b.Ph,from_addr:b.Gg,to_addrs:b.Rh,parent_id:d||"",parent_type:c||"",mailbox_id:b.Ah||"",message_id:b.lf||"",
status:"read"}})}function ml(a,b){var c={module:b.module,record:b.getData()};return a.send("put-record",c)}g.clone=function(){return new tl(this.about,this.s)};g.B=function(){tl.m.B.call(this);this.l=null;this.Ib.T();this.Ib=null};g.toString=function(){return"ydn.crm.sugarcrm.model.Sugar:"+U(this)};function Gl(a,b,c,d){tl.call(this,a,b,d);this.g=this.h=this.i=null}D(Gl,tl);Gl.prototype.rb=function(){return this.g};
function Hl(a){if(!a.g)return Ig("No SugarCRM Record to link with Gmail contact.");a.g.C();var b=a.g.module,c=a.h;if(!c)return Ig("Not Gmail contact data to link.");var d=ck(c,U(a),b);if(d)return Ig("Contact "+Vj(c)+" already link to "+d.g+" with the module "+b);b=new Yj("sugarcrm",U(a),b,a.g.C(),+new Date(c.data.updated.$t),Bk(a.g));c={kind:c.Dd(),"gdata-id":c.C(),"external-id":{label:b.module+"#"+b.i+"-"+b.j,value:b.U()}};return xl(a).send("link",c).K(function(a){this.h=new Zj(a);J(this,new sl(this.i,
this.h,this.g))},a)}function Il(a){if(!a.g)return Ig("No SugarCRM Record to unlink with Gmail contact.");var b=a.g.C(),c=a.g.module,d=a.h;if(!d)return Ig("Not Gmail contact data to link.");var e=ck(d,U(a),c,b);if(!e)return Ig("No link exists between SugarCRM "+c+" "+b+" and Gmail Contact "+Vj(d));b={kind:d.Dd(),"gdata-id":d.C(),"external-id":e.U()};return xl(a).send("unlink",b).K(function(a){this.h=new Zj(a);J(this,new sl(this.i,this.h,this.g))},a)}
function Jl(a,b){if(a.g)return Ig("already imported as "+a.g.C()+" in "+a.g.module);var c=a.h;if(!c)return Ig("no contact gdata to import?");c={module:b,kind:c.Dd(),"gdata-id":c.C()};return xl(a).send("import-gdata",c).K(function(a){this.g=new zk(U(this),b,a);J(this,new sl(this.i,this.h,this.g));return this.g},a)}Gl.prototype.update=function(a){return this.isLogin()?Kl(this,a):wl(this).ed(function(){return Kl(this,a)},this)};
function Ll(a,b,c){for(var d=b.g,e=[],f=0;f<wk.length;f++)e[f]={store:wk[f],index:"ydn$emails",key:d};return xl(a).send("query",e).K(function(a){for(var d=0;d<a.length;d++){var e=a[d];if(e.result[0])return new sl(b,c,new zk(U(this),e.store,e.result[0]))}return new sl(b,c)},a)}function Ml(a){return a.h&&a.g?!!ck(a.h,U(a),a.g.module,a.g.C()):!1}
function Nl(a,b,c){var d=ck(c,U(a));if(d){var e=[{store:d.module,index:"id",key:d.g}];return xl(a).send("query",e).K(function(a){if((a=a[0])&&a.result[0])return new sl(b,c,new zk(U(this),a.store,a.result[0]));window.console.warn("link id: "+d.g+" no longer available, deleting..");window.console.error("Removing external id not implemented");Ll(this,b,c)},a)}return Ll(a,b,c)}
function Ol(a,b){if(b){var c=b.g;return sk().send("gdata-list-contact-by-email",c).K(function(a){a=a.map(function(a){return new Zj(a)});hk(b,a);return a[0]?Nl(this,b,a[0]):Ll(this,b)},a)}return Hg(new sl(null))}function Kl(a,b){return Ol(a,b).M(function(a){this.h=a.u;this.i=a.h;this.g=a.l;J(this,a)},function(a){window.console.error(a.stack||a)},a)}
function Pl(a,b){if(a.g)return Ig("already exist as "+a.g.C()+" in "+a.g.module);var c=a.i.g;if(!c)return Ig("No data to import.");new Mh;var d=a.i.h,c={email1:c,full_name:d};d&&0<d.length&&(d=d.split(/\s/),d[0]&&(c.first_name=d[0]),d[1]&&(c.last_name=d[d.length-1]));d={module:b,record:c};return xl(a).send("put-record",d).K(function(a){this.g=new zk(U(this),b,a);J(this,new sl(this.i,this.h,this.g))},a)};function Ql(){}D(Ql,Ge);u(Ql);Ql.prototype.t=function(){return"goog-menuheader"};function Rl(a,b,c){We.call(this,a,c||Ql.w(),b);this.ha(1,!1);this.ha(2,!1);this.ha(4,!1);this.ha(32,!1);this.Gb=1}D(Rl,We);Ue("goog-menuheader",function(){return new Rl(null)});function Sl(){this.h=[]}D(Sl,Ge);u(Sl);function Tl(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.t()+"-highlight";break;case 1:c=a.t()+"-checkbox";break;case 2:c=a.t()+"-content"}a.h[b]=c}return c}g=Sl.prototype;g.Yb=function(){return"menuitem"};g.ma=function(a){var b=a.g.o("div",Je(this,a).join(" "),Ul(this,a.W(),a.g));Vl(this,a,b,Oe(a,8)||Oe(a,16));return b};g.da=function(a){return a&&a.firstChild};
g.aa=function(a,b){var c=nc(b),d=Tl(this,2);c&&Be(c,d)||b.appendChild(Ul(this,b.childNodes,a.g));Be(b,"goog-option")&&(a.ha(16,!0),a&&b&&Vl(this,a,b,!0));return Sl.m.aa.call(this,a,b)};g.Fb=function(a,b){var c=this.da(a),d=Wl(this,a)?c.firstChild:null;Sl.m.Fb.call(this,a,b);d&&!Wl(this,a)&&c.insertBefore(d,c.firstChild||null)};function Ul(a,b,c){a=Tl(a,2);return c.o("div",a,b)}function Wl(a,b){var c=a.da(b);if(c){var c=c.firstChild,d=Tl(a,1);return!!c&&oc(c)&&Be(c,d)}return!1}
function Vl(a,b,c,d){Ne(a,c,b.Qc());Ke(a,b,c);d!=Wl(a,c)&&(d?Ce(c,"goog-option"):Ee(c,"goog-option"),c=a.da(c),d?(a=Tl(a,1),c.insertBefore(b.g.o("div",a),c.firstChild||null)):c.removeChild(c.firstChild))}g.Jc=function(a){switch(a){case 2:return Tl(this,0);case 16:case 8:return"goog-option-selected";default:return Sl.m.Jc.call(this,a)}};g.Ke=function(a){var b=Tl(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return Sl.m.Ke.call(this,a)}};g.t=function(){return"goog-menuitem"};function Xl(a,b,c,d){We.call(this,a,d||Sl.w(),c);this.l=b}D(Xl,We);g=Xl.prototype;g.U=function(){var a=this.p();return null!=a?a:this.pb()};g.ha=function(a,b){Xl.m.ha.call(this,a,b);switch(a){case 8:Pe(this,16)&&!b&&$e(this,16,!1)&&bf(this,16,!1);var c=this.k();c&&this&&c&&Vl(this.i,this,c,b);break;case 16:(c=this.k())&&this&&c&&Vl(this.i,this,c,b)}};
g.pb=function(){var a=this.W();return v(a)?(a=Xa(a,function(a){return oc(a)&&(Be(a,"goog-menuitem-accel")||Be(a,"goog-menuitem-mnemonic-separator"))?"":yc(a)}).join(""),va(a)):Xl.m.pb.call(this)};g.bc=function(a){var b=this.j;if(b){var c=b.h;b.h=null;if(b=c&&A(a.clientX))b=new Hb(a.clientX,a.clientY),b=c==b?!0:c&&b?c.x==b.x&&c.y==b.y:!1;if(b)return}Xl.m.bc.call(this,a)};g.qc=function(a){return a.g==this.mf&&this.Ja(a)?!0:Xl.m.qc.call(this,a)};g.Ig=function(){return this.mf};Ue("goog-menuitem",function(){return new Xl(null)});
Xl.prototype.Qc=function(){return Oe(this,16)?"menuitemcheckbox":Oe(this,8)?"menuitemradio":Xl.m.Qc.call(this)};function Yl(){}D(Yl,Ge);u(Yl);Yl.prototype.ma=function(a){return a.g.o("div",this.t())};Yl.prototype.aa=function(a,b){b.id&&ae(a,b.id);if("HR"==b.tagName){var c=b;b=this.ma(a);lc(b,c);mc(c)}else Ce(b,this.t());return b};Yl.prototype.Fb=function(){};Yl.prototype.t=function(){return"goog-menuseparator"};function Zl(a,b){We.call(this,null,a||Yl.w(),b);this.ha(1,!1);this.ha(2,!1);this.ha(4,!1);this.ha(32,!1);this.Gb=1}D(Zl,We);Zl.prototype.A=function(){Zl.m.A.call(this);var a=this.k();xe(a,"separator")};Ue("goog-menuseparator",function(){return new Zl});function $l(a){this.g=a||"menu"}D($l,gf);u($l);g=$l.prototype;g.Pe=function(a){return"UL"==a.tagName||$l.m.Pe.call(this,a)};g.Kc=function(a){return"HR"==a.tagName?new Zl:$l.m.Kc.call(this,a)};g.mb=function(a,b){return pc(a.k(),b)};g.t=function(){return"goog-menu"};g.Re=function(a){$l.m.Re.call(this,a);a=a.k();ye(a,"haspopup","true")};function am(a){Zl.call(this,Yl.w(),a)}D(am,Zl);Ue("goog-menuseparator",function(){return new Zl});function bm(a,b){of.call(this,nf,b||$l.w(),a);xf(this,!1)}D(bm,of);g=bm.prototype;g.hd=!0;g.t=function(){return this.fb.t()};g.mb=function(a){if(this.fb.mb(this,a))return!0;for(var b=0,c=ge(this);b<c;b++){var d=O(this,b);if("function"==typeof d.mb&&d.mb(a))return!0}return!1};g.nc=function(){var a=[];fe(this,function(b){a.push(b)});return a};g.Wb=function(a,b,c){(b=bm.m.Wb.call(this,a,b))&&a&&this.Q&&this.hd&&pf(this).focus();a&&c&&A(c.clientX)?this.h=new Hb(c.clientX,c.clientY):this.h=null;return b};
g.Ye=function(a){this.hd&&pf(this).focus();return bm.m.Ye.call(this,a)};g.Kf=function(a){return a.isEnabled()&&a.va&&Oe(a,2)};g.Ua=function(a){for(var b=this.fb,c=Zb(this.g.g,"div",b.t()+"-content",a),d=c.length,e=0;e<d;e++)kf(b,this,c[e]);bm.m.Ua.call(this,a)};g.Se=function(a){var b=bm.m.Se.call(this,a);b||fe(this,function(c){!b&&c.Ig&&c.mf==a.g&&(this.isEnabled()&&this.na(c),b=c.Ba(a))},this);return b};
g.sb=function(a){bm.m.sb.call(this,a);if(a=O(this,a)){var b=a.k();a=this.k();var c=Ed(b),d=Ed(a),e=Rd(a),f=c.x-d.x-e.left,c=c.y-d.y-e.top,d=a.clientHeight-b.offsetHeight,e=a.scrollLeft,h=a.scrollTop,e=e+Math.min(f,Math.max(f-(a.clientWidth-b.offsetWidth),0)),h=h+Math.min(c,Math.max(c-d,0)),b=new Hb(e,h);a.scrollLeft=b.x;a.scrollTop=b.y}};function cm(a,b,c,d){Og.call(this,a,b,c||d);if(c||d)this.j=65|(d?32:132)}D(cm,Og);function dm(){}D(dm,Ge);u(dm);g=dm.prototype;g.Yb=function(){return"button"};g.ab=function(a,b,c){switch(b){case 8:case 16:ye(a,"pressed",c);break;default:case 64:case 1:dm.m.ab.call(this,a,b,c)}};g.ma=function(a){var b=dm.m.ma.call(this,a);this.ra(b,a.eb());var c=a.U();c&&this.Nc(b,c);Oe(a,16)&&this.ab(b,16,Pe(a,16));return b};g.aa=function(a,b){b=dm.m.aa.call(this,a,b);var c=this.U(b);a.ga=c;a.$d(this.eb(b));Oe(a,16)&&this.ab(b,16,Pe(a,16));return b};g.U=ca;g.Nc=ca;g.eb=function(a){return a.title};
g.ra=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};g.t=function(){return"goog-button"};function em(){}D(em,dm);u(em);g=em.prototype;g.Yb=function(){};g.ma=function(a){Xe(a,!1);a.kb&=-256;a.ha(32,!1);return a.g.o("button",{"class":Je(this,a).join(" "),disabled:!a.isEnabled(),title:a.eb()||"",value:a.U()||""},a.pb()||"")};g.Xb=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};g.aa=function(a,b){Xe(a,!1);a.kb&=-256;a.ha(32,!1);if(b.disabled){var c=this.Jc(1);Ce(b,c)}return em.m.aa.call(this,a,b)};
g.oc=function(a){N(a).listen(a.k(),"click",a.Ja)};g.Jd=ca;g.Ue=ca;g.Te=function(a){return a.isEnabled()};g.pc=ca;g.Pc=function(a,b,c){em.m.Pc.call(this,a,b,c);(a=a.k())&&1==b&&(a.disabled=c)};g.U=function(a){return a.value};g.Nc=function(a,b){a&&(a.value=b)};g.ab=ca;function fm(a,b,c){We.call(this,a,b||em.w(),c)}D(fm,We);g=fm.prototype;g.U=function(){return this.ga};g.Eb=function(a){this.ga=a;this.i.Nc(this.k(),a)};g.eb=function(){return this.V};g.ra=function(a){this.V=a;this.i.ra(this.k(),a)};g.$d=function(a){this.V=a};g.B=function(){fm.m.B.call(this);delete this.ga;delete this.V};g.A=function(){fm.m.A.call(this);if(Oe(this,32)){var a=Qe(this);a&&N(this).listen(a,"keyup",this.qc)}};
g.qc=function(a){return 13==a.g&&"key"==a.type||32==a.g&&"keyup"==a.type?this.Ja(a):32==a.g};Ue("goog-button",function(){return new fm(null)});function gm(){}D(gm,dm);u(gm);g=gm.prototype;g.ma=function(a){var b=Je(this,a),b=a.g.o("div",{"class":"goog-inline-block "+b.join(" ")},this.Hc(a.W(),a.g));this.ra(b,a.eb());Ke(this,a,b);return b};g.Yb=function(){return"button"};g.da=function(a){return a&&a.firstChild.firstChild};g.Hc=function(a,b){return b.o("div","goog-inline-block "+(this.t()+"-outer-box"),b.o("div","goog-inline-block "+(this.t()+"-inner-box"),a))};g.Xb=function(a){return"DIV"==a.tagName};
g.aa=function(a,b){hm(b,!0);hm(b,!1);var c;a:{c=a.g.Vf(b);var d=this.t()+"-outer-box";if(c&&Be(c,d)&&(c=a.g.Vf(c),d=this.t()+"-inner-box",c&&Be(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.Hc(b.childNodes,a.g));De(b,["goog-inline-block",this.t()]);return gm.m.aa.call(this,a,b)};g.t=function(){return"goog-custom-button"};
function hm(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==wa(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function im(){}D(im,gm);u(im);g=im.prototype;g.da=function(a){return im.m.da.call(this,a&&a.firstChild)};g.aa=function(a,b){var c=Zb(document,"*","goog-menu",b)[0];if(c){L(c,!1);Xb(c).body.appendChild(c);var d=new bm;ee(d,c);a.tc(d)}return im.m.aa.call(this,a,b)};g.Hc=function(a,b){return im.m.Hc.call(this,[this.Xe(a,b),b.o("div","goog-inline-block "+(this.t()+"-dropdown"),"\u00a0")],b)};g.Xe=function(a,b){return b.o("div","goog-inline-block "+(this.t()+"-caption"),a)};g.t=function(){return"goog-menu-button"};function jm(a,b,c,d,e){fm.call(this,a,c||im.w(),d);this.ha(64,!0);this.N=new cm(null,5);b&&this.tc(b);this.H=new Qg(500);!Rj&&!Sj||Bb("533.17.9")||(this.Od=!0);this.If=e||$l.w()}D(jm,fm);g=jm.prototype;g.Od=!1;g.A=function(){jm.m.A.call(this);km(this,!0);this.h&&lm(this,this.h,!0);ye(this.v,"haspopup",!!this.h)};g.ia=function(){jm.m.ia.call(this);km(this,!1);if(this.h){this.ba(!1);this.h.ia();lm(this,this.h,!1);var a=this.h.k();a&&mc(a)}};
g.B=function(){jm.m.B.call(this);this.h&&(this.h.T(),delete this.h);delete this.Dg;this.H.T()};g.Zb=function(a){jm.m.Zb.call(this,a);Pe(this,4)&&(this.ba(!Pe(this,64),a),this.h&&(this.h.Xa=Pe(this,64)))};g.bc=function(a){jm.m.bc.call(this,a);this.h&&!Pe(this,4)&&(this.h.Xa=!1)};g.Ja=function(){af(this,!1);return!0};g.Zg=function(a){this.h&&this.h.pa&&!this.mb(a.target)&&this.ba(!1)};g.mb=function(a){return a&&pc(this.k(),a)||this.h&&this.h.mb(a)||!1};
g.qc=function(a){if(32==a.g){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.pa){var b=this.h.Ba(a);return 27==a.g?(this.ba(!1),!0):b}return 40==a.g||38==a.g||32==a.g||13==a.g?(this.ba(!0,a),!0):!1};g.Rc=function(){this.ba(!1)};g.kh=function(){Pe(this,4)||this.ba(!1)};g.Kd=function(a){this.Od||this.ba(!1);jm.m.Kd.call(this,a)};
g.tc=function(a){var b=this.h;if(a!=b&&(b&&(this.ba(!1),this.Q&&lm(this,b,!1),delete this.h),this.Q&&ye(this.v,"haspopup",!!a),a)){this.h=a;be(a,this);a.Wb(!1);var c=this.Od;(a.hd=c)&&xf(a,!0);this.Q&&lm(this,a,!0)}return b};g.sc=function(a,b){var c=jm.m.sc.call(this,a,b);c&&!this.va&&this.ba(!1);return c};g.setEnabled=function(a){jm.m.setEnabled.call(this,a);this.isEnabled()||this.ba(!1)};
g.ba=function(a,b){jm.m.ba.call(this,a);if(this.h&&Pe(this,64)==a){if(a)this.h.Q||this.h.render(),this.Pb=Dd(this.k()),this.Ob=Jd(this.k()),mm(this),this.h.sb(!b||40!=b.g&&38!=b.g?-1:0);else{af(this,!1);this.h.Xa=!1;var c=this.k();c&&(ye(c,"activedescendant",""),ye(c,"owns",""));null!=this.J&&(this.J=void 0,(c=this.h.k())&&Gd(c,"",""))}this.h.Wb(a,!1,b);if(!this.P){var c=N(this),d=a?c.listen:c.ca;d.call(c,this.g.g,"mousedown",this.Zg,!0);this.Od&&d.call(c,this.h,"blur",this.kh);d.call(c,this.H,Sg,
this.Jh);a?Rg(this.H):this.H.stop()}}};function mm(a){if(a.h.Q){var b=a.Dg||a.k(),c=a.N;a.N.g=b;b=a.h.k();a.h.pa||(b.style.visibility="hidden",L(b,!0));!a.J&&a.N.n&&a.N.j&32&&(a.J=Hd(b));c.i(b,c.h^1,null,a.J);a.h.pa||(L(b,!1),b.style.visibility="visible")}}
g.Jh=function(){var a=Jd(this.k()),b=Dd(this.k()),c=this.Ob;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.Pb,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.Ob=a,this.Pb=b,mm(this))};function lm(a,b,c){var d=N(a);c=c?d.listen:d.ca;c.call(d,b,"action",a.Rc);c.call(d,b,"highlight",a.Ng);c.call(d,b,"unhighlight",a.Og)}function km(a,b){var c=N(a);(b?c.listen:c.ca).call(c,a.k(),"keydown",a.gh)}
g.Ng=function(a){var b=this.k();if(a=a.target.k()){var c=ze(a,"activedescendant");a=Xb(a).getElementById(c)||a;a.id||(c=Xd.w(),a.id=Yd(c));c="";a&&(c=a.id);ye(b,"activedescendant",c);ye(b,"owns",a.id)}};g.gh=function(a){Oe(this,32)&&Qe(this)&&this.h&&this.h.pa&&a.stopPropagation()};g.Og=function(){if(!sf(this.h)){var a=this.k();ye(a,"activedescendant","");ye(a,"owns","")}};Ue("goog-menu-button",function(){return new jm(null)});function nm(a,b,c){od.call(this);this.target=a;this.j=b||a;this.i=c||new vd(NaN,NaN,NaN,NaN);this.h=Xb(a);this.g=new Td(this);a=la(Kc,this.g);this.Ta||(this.Ta=[]);this.Ta.push(t(void 0)?C(a,void 0):a);bd(this.j,["touchstart","mousedown"],this.sg,!1,this)}D(nm,od);var om=G||tb&&Bb("1.9.3");g=nm.prototype;g.clientX=0;g.clientY=0;g.tg=0;g.ug=0;g.jc=0;g.kc=0;g.Le=!0;g.Sb=!1;g.setEnabled=function(a){this.Le=a};
g.B=function(){nm.m.B.call(this);jd(this.j,["touchstart","mousedown"],this.sg,!1,this);this.g.removeAll();om&&this.h.releaseCapture();this.j=this.target=null};
g.sg=function(a){var b="mousedown"==a.type;if(!this.Le||this.Sb||b&&!Oc(a))J(this,"earlycancel");else if(pm(a),J(this,new qm("start",this,a.clientX,a.clientY))){this.Sb=!0;a.preventDefault();var b=this.h,c=b.documentElement,d=!om;this.g.listen(b,["touchmove","mousemove"],this.nh,d);this.g.listen(b,["touchend","mouseup"],this.wd,d);om?(c.setCapture(!1),this.g.listen(c,"losecapture",this.wd)):this.g.listen(dc(b),"blur",this.wd);this.n&&this.g.listen(this.n,"scroll",this.Ih,d);this.clientX=this.tg=a.clientX;
this.clientY=this.ug=a.clientY;this.jc=this.target.offsetLeft;this.kc=this.target.offsetTop;this.l=Dc(Vb(this.h));ma()}};g.wd=function(a){this.g.removeAll();om&&this.h.releaseCapture();if(this.Sb){pm(a);this.Sb=!1;var b=rm(this,this.jc),c=sm(this,this.kc);J(this,new qm("end",this,a.clientX,a.clientY,0,b,c))}else J(this,"earlycancel")};function pm(a){var b=a.type;"touchstart"==b||"touchmove"==b?a.init(a.h.targetTouches[0],a.i):"touchend"!=b&&"touchcancel"!=b||a.init(a.h.changedTouches[0],a.i)}
g.nh=function(a){if(this.Le){pm(a);var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;if(!this.Sb){var d=this.tg-this.clientX,e=this.ug-this.clientY;if(0<d*d+e*e)if(J(this,new qm("start",this,a.clientX,a.clientY)))this.Sb=!0;else{this.P||this.wd(a);return}}c=tm(this,b,c);b=c.x;c=c.y;this.Sb&&J(this,new qm("beforedrag",this,a.clientX,a.clientY,0,b,c))&&(um(this,a,b,c),a.preventDefault())}};
function tm(a,b,c){var d=Dc(Vb(a.h));b+=d.x-a.l.x;c+=d.y-a.l.y;a.l=d;a.jc+=b;a.kc+=c;b=rm(a,a.jc);a=sm(a,a.kc);return new Hb(b,a)}g.Ih=function(a){var b=tm(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;um(this,a,b.x,b.y)};function um(a,b,c,d){a.target.style.left=c+"px";a.target.style.top=d+"px";J(a,new qm("drag",a,b.clientX,b.clientY,0,c,d))}
function rm(a,b){var c=a.i,d=isNaN(c.left)?null:c.left,c=isNaN(c.width)?0:c.width;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function sm(a,b){var c=a.i,d=isNaN(c.top)?null:c.top,c=isNaN(c.height)?0:c.height;return Math.min(null!=d?d+c:Infinity,Math.max(null!=d?d:-Infinity,b))}function qm(a,b,c,d,e,f,h){I.call(this,a);this.clientX=c;this.clientY=d;this.left=t(f)?f:b.jc;this.top=t(h)?h:b.kc}D(qm,I);function vm(a){od.call(this);this.v=a;a=G?"focusout":"blur";this.g=bd(this.v,G?"focusin":"focus",this,!G);this.h=bd(this.v,a,this,!G)}D(vm,od);vm.prototype.handleEvent=function(a){var b=new Mc(a.h);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";J(this,b)};vm.prototype.B=function(){vm.m.B.call(this);kd(this.g);kd(this.h);delete this.v};function wm(a,b){M.call(this,b);this.La=!!a;this.ga=null}D(wm,M);g=wm.prototype;g.De=null;g.$b=!1;g.Ea=null;g.sa=null;g.$a=null;g.te=!1;g.t=function(){return"goog-modalpopup"};g.Bd=function(){return this.Ea};g.D=function(){wm.m.D.call(this);var a=this.k(),b=wa(this.t()).split(" ");De(a,b);tc(a,!0);L(a,!1);xm(this);zm(this)};
function xm(a){if(a.La&&!a.sa){var b;b=a.g.o("iframe",{frameborder:0,style:"border:0;vertical-align:bottom;",src:'javascript:""'});a.sa=b;a.sa.className=a.t()+"-bg";L(a.sa,!1);Kd(a.sa,0)}a.Ea||(a.Ea=a.g.o("div",a.t()+"-bg"),L(a.Ea,!1))}function zm(a){a.$a||(a.$a=a.g.createElement("span"),L(a.$a,!1),tc(a.$a,!0),a.$a.style.position="absolute")}g.pg=function(){this.te=!1};g.Hd=function(a){return!!a&&"DIV"==a.tagName};
g.Ua=function(a){wm.m.Ua.call(this,a);a=wa(this.t()).split(" ");De(this.k(),a);xm(this);zm(this);L(this.k(),!1)};g.A=function(){this.sa&&lc(this.sa,this.k());lc(this.Ea,this.k());wm.m.A.call(this);var a=this.k();a.parentNode&&a.parentNode.insertBefore(this.$a,a.nextSibling);this.De=new vm(this.g.g);N(this).listen(this.De,"focusin",this.onFocus);Am(this,!1)};g.ia=function(){this.$b&&this.Na(!1);Kc(this.De);wm.m.ia.call(this);mc(this.sa);mc(this.Ea);mc(this.$a)};
g.Na=function(a){if(a!=this.$b)if(this.N&&this.N.stop(),this.V&&this.V.stop(),this.H&&this.H.stop(),this.S&&this.S.stop(),this.Q&&Am(this,a),a){if(J(this,"beforeshow")){try{this.ga=this.g.g.activeElement}catch(b){}this.tf();var c=dc(this.g.g)||window;if("fixed"==yd(this.k()))var d=a=0;else d=Dc(this.g),a=d.x,d=d.y;var e;e=this.k();e=Hd(e);c=bc(c);a=Math.max(a+c.width/2-e.width/2,0);d=Math.max(d+c.height/2-e.height/2,0);zd(this.k(),a,d);zd(this.$a,a,d);N(this).listen(ec(this.g.g),"resize",this.tf);
Bm(this,!0);this.Tf();this.$b=!0;this.N&&this.V?(id(this.N,"end",this.Vd,!1,this),this.V.play(),this.N.play()):this.Vd()}}else if(J(this,"beforehide")){N(this).ca(ec(this.g.g),"resize",this.tf);this.$b=!1;this.H&&this.S?(id(this.H,"end",this.Td,!1,this),this.S.play(),this.H.play()):this.Td();try{d=this.g.g.body,c=this.g.g.activeElement||d,this.ga&&c==d&&this.ga!=d&&this.ga.focus()}catch(f){}this.ga=null}};
function Am(a,b){if(b){a.u||(a.u=[]);for(var c=a.g,c=c.getChildren(c.g.body),d=0;d<c.length;d++){var e=c[d];e==a.v||ze(e,"hidden")||(ye(e,"hidden",!0),a.u.push(e))}}else if(a.u){for(d=0;d<a.u.length;d++)a.u[d].removeAttribute("aria-hidden");a.u=null}}function Bm(a,b){a.sa&&L(a.sa,b);a.Ea&&L(a.Ea,b);L(a.k(),b);L(a.$a,b)}g.Vd=function(){J(this,"show")};g.Td=function(){Bm(this,!1);J(this,"hide")};
g.tf=function(){this.sa&&L(this.sa,!1);this.Ea&&L(this.Ea,!1);var a=this.g.g,b=bc(dc(a)||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth)),a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.sa&&(L(this.sa,!0),Gd(this.sa,c,a));this.Ea&&(L(this.Ea,!0),Gd(this.Ea,c,a))};g.onFocus=function(a){this.te?this.pg():a.target==this.$a&&Tg(this.Tf,0,this)};g.Tf=function(){try{G&&this.g.g.body.focus(),this.k().focus()}catch(a){}};
g.B=function(){Kc(this.N);this.N=null;Kc(this.H);this.H=null;Kc(this.V);this.V=null;Kc(this.S);this.S=null;wm.m.B.call(this)};function Cm(a,b,c){wm.call(this,b,c);this.i=a||"modal-dialog";this.h=Dm()}D(Cm,wm);g=Cm.prototype;g.xd=!0;g.Uc=!0;g.nf=!0;g.ld=.5;g.Bf="";g.Hb=null;g.Cb=null;g.ud=!1;g.Ca=null;g.ya=null;g.be=null;g.wa=null;g.Fa=null;g.oa=null;g.t=function(){return this.i};g.setTitle=function(a){this.Bf=a;this.ya&&qc(this.ya,a)};g.W=function(){return null!=this.Hb?Kf(this.Hb):""};g.F=function(){this.k()||this.render();return this.Fa};g.Bd=function(){this.k()||this.render();return Cm.m.Bd.call(this)};
function Em(a,b){a.ld=b;if(a.k()){var c=a.Bd();c&&Kd(c,a.ld)}}function Fm(a){!0!=a.nf&&Gm(a,!0)}function Gm(a,b){a.nf=b;if(a.Q){var c=a.g,d=a.Bd(),e=a.sa;b?(e&&c.cf(e,a.k()),c.cf(d,a.k())):(c.Zf(e),c.Zf(d))}a.$b&&Am(a,b)}function Hm(a,b){var c=wa(a.i+"-title-draggable").split(" ");a.k()&&(b?De(a.Ca,c):Fe(a.Ca,c));if(b&&!a.Cb){var d;d=new nm(a.k(),a.Ca);a.Cb=d;De(a.Ca,c);bd(a.Cb,"start",a.Nh,!1,a)}else!b&&a.Cb&&(a.Cb.T(),a.Cb=null)}
g.D=function(){Cm.m.D.call(this);var a=this.k(),b=this.g;this.Ca=b.o("div",this.i+"-title",this.ya=b.o("span",{className:this.i+"-title-text",id:this.C()},this.Bf),this.wa=b.o("span",this.i+"-title-close"));jc(a,this.Ca,this.Fa=b.o("div",this.i+"-content"),this.oa=b.o("div",this.i+"-buttons"));xe(this.ya,"heading");xe(this.wa,"button");tc(this.wa,!0);ye(this.wa,"label",Im);this.be=this.ya.id;xe(a,"dialog");ye(a,"labelledby",this.be||"");this.Hb&&(this.Fa.innerHTML=Kf(this.Hb));L(this.wa,this.Uc);
this.h&&(a=this.h,a.v=this.oa,a.render());L(this.oa,!!this.h);Em(this,this.ld)};
g.Ua=function(a){Cm.m.Ua.call(this,a);a=this.k();var b=this.i+"-content";this.Fa=Zb(document,null,b,a)[0];this.Fa||(this.Fa=this.g.o("div",b),this.Hb&&(this.Fa.innerHTML=Kf(this.Hb)),a.appendChild(this.Fa));var b=this.i+"-title",c=this.i+"-title-text",d=this.i+"-title-close";(this.Ca=Zb(document,null,b,a)[0])?(this.ya=Zb(document,null,c,this.Ca)[0],this.wa=Zb(document,null,d,this.Ca)[0]):(this.Ca=this.g.o("div",b),a.insertBefore(this.Ca,this.Fa));this.ya?(this.Bf=wc(this.ya),this.ya.id||(this.ya.id=
this.C())):(this.ya=fc("span",{className:c,id:this.C()}),this.Ca.appendChild(this.ya));this.be=this.ya.id;ye(a,"labelledby",this.be||"");this.wa||(this.wa=this.g.o("span",d),this.Ca.appendChild(this.wa));L(this.wa,this.Uc);b=this.i+"-buttons";if(this.oa=Zb(document,null,b,a)[0]){if(a=this.h=new Jm(this.g),(b=this.oa)&&1==b.nodeType){a.v=b;for(var b=a.v.getElementsByTagName("button"),c=0,e,f;d=b[c];c++)if(e=d.name||d.id,f=wc(d)||d.value,e){var h=0==c;a.set(e,f,h,d.name==Km);h&&Ce(d,"goog-buttonset-default")}}}else this.oa=
this.g.o("div",b),a.appendChild(this.oa),this.h&&(a=this.h,a.v=this.oa,a.render()),L(this.oa,!!this.h);Em(this,this.ld)};g.A=function(){Cm.m.A.call(this);N(this).listen(this.k(),"keydown",this.kg).listen(this.k(),"keypress",this.kg);N(this).listen(this.oa,"click",this.Bh);Hm(this,!0);N(this).listen(this.wa,"click",this.Kh);var a=this.k();xe(a,"dialog");""!==this.ya.id&&ye(a,"labelledby",this.ya.id);this.nf||Gm(this,!1)};g.ia=function(){this.$b&&this.Na(!1);Hm(this,!1);Cm.m.ia.call(this)};
g.Na=function(a){a!=this.$b&&(this.Q||this.render(),Cm.m.Na.call(this,a))};g.Vd=function(){Cm.m.Vd.call(this);J(this,Lm)};g.Td=function(){Cm.m.Td.call(this);J(this,Mm);this.ud&&this.T()};
g.Nh=function(){var a=this.g.g,b=bc(dc(a)||window),c=Math.max(a.body.scrollWidth,b.width),a=Math.max(a.body.scrollHeight,b.height),d;d=this.k();d=Hd(d);"fixed"==yd(this.k())?(b=new vd(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height)),this.Cb.i=b||new vd(NaN,NaN,NaN,NaN)):this.Cb.i=new vd(0,0,c-d.width,a-d.height)||new vd(NaN,NaN,NaN,NaN)};g.Kh=function(){Nm(this)};function Nm(a){if(a.Uc){var b=a.h,c=b&&b.ue;c?(b=b.get(c),J(a,new Om(c,b))&&a.Na(!1)):a.Na(!1)}}
function Pm(a,b){a.Uc=b;a.wa&&L(a.wa,a.Uc)}g.B=function(){this.oa=this.wa=null;Cm.m.B.call(this)};function Qm(a,b){a.h=b;if(a.oa){if(a.h){var c=a.h;c.v=a.oa;c.render()}else a.oa.innerHTML=Kf(Mf);L(a.oa,!!a.h)}}g.Bh=function(a){a:{for(a=a.target;null!=a&&a!=this.oa;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.h.get(a);J(this,new Om(a,b))&&this.Na(!1)}};
g.kg=function(a){var b=!1,c=!1,d=this.h,e=a.target;if("keydown"==a.type)if(this.xd&&27==a.g){var f=d&&d.ue,e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=J(this,new Om(f,b))):e||(b=!0)}else{if(9==a.g&&a.shiftKey&&e==this.k()){this.te=!0;try{this.$a.focus()}catch(h){}Tg(this.pg,0,this)}}else if(13==a.g){if("BUTTON"==e.tagName&&!e.disabled)f=e.name;else if(e==this.wa)Nm(this);else if(d){var k=d.Ae,l;if(l=k)a:{l=d.v.getElementsByTagName("BUTTON");for(var m=0,n;n=l[m];m++)if(n.name==k||n.id==
k){l=n;break a}l=null}e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&!e.disabled;!l||l.disabled||e||(f=k)}f&&d&&(c=!0,b=J(this,new Om(f,String(d.get(f)))))}else e==this.wa&&32==a.g&&Nm(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.Na(!1)};function Om(a,b){this.type=Rm;this.key=a;this.caption=b}D(Om,I);var Rm="dialogselect",Mm="afterhide",Lm="aftershow";function Jm(a){a||Vb();eh.call(this)}D(Jm,eh);g=Jm.prototype;g.Ae=null;g.v=null;g.ue=null;
g.set=function(a,b,c,d){eh.prototype.set.call(this,a,b);c&&(this.Ae=a);d&&(this.ue=a);return this};function Sm(a,b,c,d){return a.set(b.key,b.caption,c,d)}g.render=function(){if(this.v){this.v.innerHTML=Kf(Mf);var a=Vb(this.v);this.forEach(function(b,c){var d=a.o("button",{name:c},b);c==this.Ae&&(d.className="goog-buttonset-default");this.v.appendChild(d)},this)}};g.k=function(){return this.v};
var Km="cancel",Im="Close",Tm={key:"ok",caption:"OK"},Um={key:Km,caption:"Cancel"},Vm={key:"yes",caption:"Yes"},Wm={key:"no",caption:"No"},Xm={key:"save",caption:"Save"},Ym={key:"continue",caption:"Continue"};function Dm(){return Sm(Sm(new Jm,Tm,!0),Um,!1,!0)}"undefined"!=typeof document&&(Sm(new Jm,Tm,!0,!0),Dm(),Sm(Sm(new Jm,Vm,!0),Wm,!1,!0),Sm(Sm(Sm(new Jm,Vm),Wm,!0),Um,!1,!0),Sm(Sm(Sm(new Jm,Ym),Xm),Um,!0,!0));function Zm(){this.h=[]}D(Zm,Sl);u(Zm);Zm.prototype.ma=function(a){var b=Zm.m.ma.call(this,a);Ce(b,"goog-submenu");$m(this,a,b);return b};Zm.prototype.aa=function(a,b){b=Zm.m.aa.call(this,a,b);Ce(b,"goog-submenu");$m(this,a,b);var c=Zb(document,"div","goog-menu",b);if(c.length){var d=new bm(a.g),c=c[0];L(c,!1);a.g.g.body.appendChild(c);ee(d,c);an(a,d)}return b};Zm.prototype.Fb=function(a,b){var c=this.da(a),d=c&&c.lastChild;Zm.m.Fb.call(this,a,b);d&&c.lastChild!=d&&Be(d,"goog-submenu-arrow")&&c.appendChild(d)};
Zm.prototype.oc=function(a){Zm.m.oc.call(this,a);var b=a.F(),c=Zb(a.g.g,"span","goog-submenu-arrow",b)[0];bn(a,c);c!=b.lastChild&&b.appendChild(c);a=a.k();ye(a,"haspopup","true")};function $m(a,b,c){var d=b.g.o("span");d.className="goog-submenu-arrow";bn(b,d);a.da(c).appendChild(d)}function bn(a,b){ie(a)?(Ce(b,"goog-submenu-arrow-rtl"),qc(b,"\u25c4")):(Ee(b,"goog-submenu-arrow-rtl"),qc(b,"\u25ba"))};function cn(a,b,c,d){Xl.call(this,a,b,c,d||Zm.w())}D(cn,Xl);g=cn.prototype;g.Sc=null;g.zf=null;g.kf=!1;g.la=null;g.yd=!1;g.A=function(){cn.m.A.call(this);N(this).listen(this.j,"hide",this.lg);this.la&&dn(this,this.la,!0)};g.ia=function(){N(this).ca(this.j,"hide",this.lg);this.la&&(dn(this,this.la,!1),this.yd||(this.la.ia(),mc(this.la.k())));cn.m.ia.call(this)};g.B=function(){this.la&&!this.yd&&this.la.T();this.la=null;cn.m.B.call(this)};
g.na=function(a,b){cn.m.na.call(this,a);b&&(en(this).Xa=!0);a||(this.Sc&&q.clearTimeout(this.Sc),this.Sc=Tg(this.nb,218,this))};g.yf=function(){var a=this.j;a&&sf(a)==this&&(fn(this,!0),gn(this))};g.nb=function(){var a=this.la;a&&a.j==this&&(fn(this,!1),fe(a,function(a){"function"==typeof a.nb&&a.nb()}))};function hn(a){a.Sc&&q.clearTimeout(a.Sc);a.zf&&q.clearTimeout(a.zf)}g.sc=function(a,b){var c=cn.m.sc.call(this,a,b);c&&!this.va&&this.nb();return c};
function gn(a){fe(a.j,function(a){a!=this&&"function"==typeof a.nb&&(a.nb(),hn(a))},a)}g.Ba=function(a){var b=a.g,c=ie(this)?37:39,d=ie(this)?39:37;if(!this.kf){if(!this.isEnabled()||b!=c&&b!=this.mf)return!1;this.yf();tf(en(this));hn(this)}else if(!en(this).Ba(a))if(b==d)this.nb();else return!1;a.preventDefault();return!0};g.Ch=function(){this.la.j==this&&(hn(this),this.R.na(this),gn(this))};g.lg=function(a){a.target==this.R&&(this.nb(),hn(this))};
g.ac=function(a){this.isEnabled()&&(hn(this),this.zf=Tg(this.yf,218,this));cn.m.ac.call(this,a)};g.Ja=function(a){hn(this);if(Oe(this,8))return cn.m.Ja.call(this,a);this.yf();return!0};
function fn(a,b){J(a,$d(64,b));var c=en(a);if(b!=a.kf){var d=a.k();b?Ce(d,"goog-submenu-open"):Ee(d,"goog-submenu-open")}if(b!=c.pa&&(b&&(c.Q||c.render(),c.sb(-1)),c.Wb(b),b)){var c=new Og(a.k(),6,!1),d=en(a),e=d.k();d.pa||(e.style.visibility="hidden",L(e,!0));c.i(e,4);d.pa||(L(e,!1),e.style.visibility="visible")}a.kf=b}function dn(a,b,c){var d=N(a);(c?d.listen:d.ca).call(d,b,"enter",a.Ch)}g.nc=function(){return en(this).nc()};
function en(a){a.la?a.yd&&a.la.j!=a&&be(a.la,a):an(a,new bm(a.g));a.la.k()||a.la.D();return a.la}function an(a,b){var c=a.la;b!=c&&(c&&(a.nb(),a.Q&&dn(a,c,!1)),a.la=b,a.yd=!1,b&&(be(b,a),b.Wb(!1,!0),b.hd=!1,xf(b,!1),a.Q&&dn(a,b,!0)))}g.mb=function(a){return en(this).mb(a)};Ue("goog-submenu",function(){return new cn(null)});function jn(a,b,c,d){this.i=t(b)?b:Cj();this.g="sr"+kn++;this.l=c||0;this.n=!!d;this.j=a}var kn=0;jn.prototype.C=function(){return this.g};
jn.prototype.h=function(a,b){var c=this.j,d=new cj(c.g),e;for(e in c.params)d.g.set(e,c.params[e]);this.i.send(this.g,d.toString(),c.method,c.body,c.headers,void 0,function(d){d=d.target;for(var e=(d.g&&4==qi(d)?d.g.getAllResponseHeaders():"").split("\n"),k={},l=0;l<e.length;l++){var m=e[l].indexOf(":");0<m&&(k[e[l].substr(0,m).toLowerCase()]=e[l].substr(m+1).trim())}e=l=ui(d);if(k["content-type"]&&/json/.test(k["content-type"]))if(B(l))e=l;else if(x(l))try{e=tj(l)}catch(n){e=l}k=new Dj(ri(d),l,k,
ti(d));Kj&&!Gj(k)&&Kj.log({"class":"ydn.gdata.Entry",method:"commit",context:"HTTP request",HttpRequestData:{path:c.g,uri:String(d.G),method:c.method,params:c.params,headers:c.headers,body:c.body},HttpRespondData:{status:Fj(k),statusText:Hj(k),body:Ij(k),headers:k.He()}});a&&(a.call(b,e,k),a=null)},this.l,void 0,this.n);this.i=null};jn.prototype.toString=function(){return"HTTPRequest:"+this.g};function ln(a,b,c){this.i=t(a)?a:Cj();this.g=b;this.h=c}ln.prototype.request=function(a){if(this.g){a.headers||(a.headers={});for(var b in this.g)a.headers[b]=this.g[b]}this.h&&(a.g=this.h+a.g);return new jn(a,this.i)};function Cl(a,b,c,d){this.lower=a;this.upper=b;this.lowerOpen=!!c;this.upperOpen=!!d;fa(Object.freeze)&&Object.freeze(this)}Cl.prototype.lower=void 0;Cl.prototype.upper=void 0;Cl.prototype.toJSON=function(){return mn(this)};function nn(a){return on(a)}Cl.only=function(a){return new Cl(a,a,!1,!1)};Cl.bound=function(a,b,c,d){return new Cl(a,b,c,d)};Cl.upperBound=function(a,b){return new Cl(void 0,a,void 0,!!b)};Cl.lowerBound=function(a,b){return new Cl(a,void 0,!!b,void 0)};
function pn(a){var b;if(v(a))b=fb(a),b.push("\uffff");else if(x(a))b=a+"\uffff";else if(A(a))b=a+2.220460492503131E-16,a-=2.220460492503131E-16;else return Cl.only(a);return Cl.bound(a,b,!1,!0)}function mn(a){a=a||{};return{lower:a.lower,upper:a.upper,lowerOpen:a.lowerOpen,upperOpen:a.upperOpen}}
function on(a){return null!=a?null!=a.upper&&null!=a.lower?qn.bound(a.lower,a.upper,!!a.lowerOpen,!!a.upperOpen):null!=a.upper?qn.upperBound(a.upper,a.upperOpen):null!=a.lower?qn.lowerBound(a.lower,a.lowerOpen):null:null}function rn(a){if(a instanceof Cl)return"";if(null!=a){if(B(a)){for(var b in a)if(a.hasOwnProperty(b)&&!bb(["lower","upper","lowerOpen","upperOpen"],b))return'invalid attribute "'+b+'" in key range object';return""}return"key range must be an object"}return""}
Cl.prototype.se=function(a){var b=this.lower,c=this.upper,d=this.lowerOpen,e=this.upperOpen;null!=a.lower&&(null==this.lower||a.lower>=this.lower)&&(b=a.lower,d=a.lowerOpen||this.lowerOpen);null!=a.upper&&(null==this.upper||a.upper<=this.upper)&&(c=a.upper,e=a.upperOpen||this.upperOpen);return Cl.bound(b,c,d,e)};function sn(a){if(!a)return"";var b=a.lowerOpen?"(":"[";null!=a.lower&&(b+=a.lower+", ");null!=a.upper&&(b+=a.upper);return b+=a.upperOpen?")":"]"}
function tn(a,b,c,d,e){if(c)if(c.lowerOpen||c.upperOpen||null==c.lower||null==c.upper||0!==un(c.lower,c.upper)){if(null!=c.lower){var f=c.lowerOpen?" > ":" >= ";d.push(a+f+"?");e.push(vn(c.lower,b))}null!=c.upper&&(f=c.upperOpen?" < ":" <= ",d.push(a+f+"?"),e.push(vn(c.upper,b)))}else d.push(a+" = ?"),e.push(vn(c.lower,b))}var qn=q.IDBKeyRange||q.webkitIDBKeyRange||Cl;function wn(a,b){var c,d;2==arguments.length&&x(arguments[1])?(c=!0,d=arguments[1].split(".")):d=(c=w(b))?b:arguments;for(c=c?0:1;c<d.length&&(a=a[d[c]],t(a));c++);return a}var xn={};
function yn(a){a=[a];for(var b=new zn,c=0,d,e;void 0!==(e=a.pop());){0===c%4&&12<c+4&&(b.write(c),c=0);d=typeof e;if(e instanceof Array)if(c+=4,0<e.length){a.push(xn);for(d=e.length;d--;)a.push(e[d]);continue}else b.write(c);else if("number"===d)c+=1,b.write(c),An(b,e);else if(e instanceof Date)c+=2,b.write(c),An(b,e.valueOf());else if("string"===d){c+=3;b.write(c);c=b;for(d=0;d<e.length;d++){var f=e.charCodeAt(d);126>=f?c.write(f+1):16510>=f?(f-=127,c.write(128|f>>8,f&255)):c.write(192|f>>10,f>>
2|255,(f|3)<<6)}c.write(0)}else if(e===xn)b.write(0);else return"";c=0}return b.trim().toString()}function Bn(a){for(var b=[],c=b,d=[],e,f,h=new Cn(a);null!=h.read();)if(0===h.current)c=d.pop();else{if(null===h.current)break;do{e=h.current/4|0;a=h.current%4;for(var k=0;k<e;k++)f=[],c.push(f),d.push(c),c=f;if(0===a&&12<h.current+4)h.read();else break}while(1);1===a?c.push(Dn(h)):2===a?c.push(new Date(Dn(h))):3===a?c.push(En(h)):0===a&&(c=d.pop())}return b[0]}
function An(a,b){var c,d,e;c=b;var f=e=d=0;if(0!==c)if(isFinite(c)){0>c&&(d=1,c=-c);f=0;if(2.2250738585072014E-308<=c){for(e=c;1>e;)f--,e*=2;for(;2<=e;)f++,e/=2;e=f+1023}f=e?Math.floor(4503599627370496*(c/Math.pow(2,f)-1)):Math.floor(c/4.9E-324)}else e=2047,isNaN(c)?f=0x8000000000000:-Infinity===c&&(d=1);c=d;d=e;e=f;c&&(e=0xfffffffffffff-e,d=2047-d);a.write((c?0:128)|d>>4);a.write((d&15)<<4|0|e/281474976710656);e%=281474976710656;c=0|e/4294967296;a.write(c>>8,c&255);e%=4294967296;c=0|e/65536;a.write(c>>
8,c&255);c=e%65536;a.write(c>>8,c&255)}function Dn(a){var b=a.read()|0,c=b>>7?!1:!0,d=c?-1:1,e=(b&127)<<4,b=a.read()|0,e=e+(b>>4);c&&(e=2047-e);for(var b=[c?15-(b&15):b&15],f=6;f--;)b.push(c?255-(a.read()|0):a.read()|0);a=0;for(f=7;f--;)a=a/256+b[f];a/=16;return 0===a&&0===e?0:(a+1)*Math.pow(2,e-1023)*d}
function En(a){for(var b=[],c=0,d=0,e=0,f,h;;){f=a.read();if(0===f||null==f)break;0===c?(h=f>>6,2>h&&!isNaN(f)?b.push(String.fromCharCode(f-1)):(c=h,d=f<<10,e++)):2===c?(b.push(String.fromCharCode(d+f+127)),c=d=e=0):2===e?(d+=f<<2,e++):(b.push(String.fromCharCode(d|f>>6)),c=d=e=0)}return b.join("")}function Cn(a){this.current=null;this.g=a;this.h=this.g.length-1;this.index=-1}
Cn.prototype.read=function(){return this.current=this.index<this.h?parseInt(this.g[++this.index]+this.g[++this.index],16):null};function zn(){this.g=[];this.h=void 0}zn.prototype.write=function(a){for(var b=0;b<arguments.length;b++)this.h=arguments[b].toString(16),this.g.push(2===this.h.length?this.h:this.h="0"+this.h)};zn.prototype.trim=function(){for(var a=this.g.length;"00"===this.g[--a];);this.g.length=++a;return this};zn.prototype.toString=function(){return this.g.length?this.g.join(""):""};
function Fn(a,b){var c=yn(a),d=yn(b);return c>d?1:c==d?0:-1};function Gn(a,b,c,d,e){if(!(b instanceof Cl))if(x(b)&&t(c)){var f,h,k,l;if("starts"==b||"^"==b)b=pn(c);else{if("<"==b||"<="==b)f=c,k="<"==b;else if(">"==b||">="==b)h=c,l=">"==b;else if("="==b||"=="==b)f=h=c;else throw new Q("invalid op: "+b);if("<"==d||"<="==d)f=e,k="<"==d;else if(">"==d||">="==d)h=e,l=">"==d;else if(t(d))throw new Q("invalid op2: "+d);b=Cl.bound(h,f,l,k)}}else if(null!=b){if(!(b instanceof Cl))if(B(b))b=new Cl(b.lower,b.upper,b.lowerOpen,b.upperOpen);else throw new Q("Invalid key range: "+
b+" of type "+typeof b);}else b=null;this.g=b;this.h=a}Gn.prototype.h="";Gn.prototype.Lc=function(){return this.h};Gn.prototype.se=function(a){if(this.h!=a.h)return null;a=null!=this.g&&null!=a.g?this.g.se(a.g):this.g||a.g;return new Gn(this.h,a)};var Hn={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange"},In=q.IDBRequest&&"LOADING"in q.IDBRequest?q.IDBTransaction:q.webkitIDBRequest&&"LOADING"in q.webkitIDBRequest&&1===q.webkitIDBTransaction.READ_WRITE?q.webkitIDBTransaction:Hn,Jn=In.READ_ONLY,Kn=In.READ_WRITE,Ln=In.VERSION_CHANGE,Mn=q.indexedDB||q.mozIndexedDB||q.webkitIndexedDB||q.moz_indexedDB||q.msIndexedDB;function Nn(a,b,c,d){Hc.call(this);this.h=c;this.X=c.getName();this.Wa=void 0;this.j=!1;this.Y=null;this.n=a;this.La=b;this.ga=0;this.J=this.R=!1;this.N=d||4;this.u=this.i=this.g=void 0;this.H=function(){throw new Xg;};this.V=function(){throw new Xg;};this.Da=function(){}}D(Nn,Hc);g=Nn.prototype;
g.init=function(a,b,c,d,e){if(t(b)){a=this.h;var f,h=b;if(v(b)){a:{for(f=0;f<a.g.length;f++)if(!On(a.g[f].keyPath,b)){f=a.g[f];break a}f=null}h=b.join(", ")}else f=Pn(a,b);if(!f)throw new Q('require index "'+h+'" not found in store "'+a.getName()+'"');this.Wa=f.getName()}this.j=x(this.Wa);this.Y=c||null;this.ga=0;this.J=this.R=!1;this.reverse="prev"==d||"prevunique"==d;this.unique="nextunique"==d||"prevunique"==d;this.hb=d;this.Vc=e;this.u=this.i=this.g=void 0};g.hb="";g.Y=null;g.unique=!1;
g.reverse=!1;g.Vc=!0;g.logger=R("ydn.db.core.req.AbstractCursor");function Qn(a,b){a.V(b);Rn(a);a.R=!0}g.gb=function(a,b,c){null==a&&(T(this.logger,this+" finished."),this.R=!0);this.g=a;this.i=b;this.u=c;this.ga++;this.R?(S(this.logger,this+" DONE."),this.H(),Rn(this)):(S(this.logger,this+" new cursor position {"+(this.j?this.g+", "+this.i:this.g)+"}"),this.H(this.g))};g.B=function(){this.n=null};
g.toString=function(){return"Cursor:"+this.X+(t(this.Wa)?":"+this.Wa:"")+"["+(this.n?"":"~")+this.La+"]"};function Rn(a){null!=a.i?a.i=Sn(a.i):a.i=void 0;null!=a.g?a.g=Sn(a.g):a.g=void 0;a.Da(a.J,a.g,a.i)}g.open=function(a,b,c,d){this.n=a;this.La=b;this.R=this.J=!1;this.g=c;this.i=d;this.openCursor(this.g,this.i)};function Tn(a){a.J=!0;S(a.logger,a+": exit");Rn(a)}g.ja=function(){return this.ga};g.ib=function(){return this.j?this.i:this.g};g.U=function(){return this.Vc?this.ib():this.u};g.qd=function(){};
g.ic=function(){};g.restart=function(a,b){S(this.logger,this+" restarting");this.J=this.R=!1;this.openCursor(b,a)};function Un(){};function Vn(a,b,c,d,e,f,h){if(!x(a))throw new TypeError("store name must be a string, but "+a+" found.");this.g=a;this.i=b;this.n=h;this.s=!!this.i;if(t(d)&&!ea(d))throw new Q("reverse value must be a boolean, but "+typeof d+" found");if(t(e)&&!ea(e))throw new Q("unique value must be a boolean, but "+typeof e+" found");if(t(f)&&!ea(f))throw new Q("key_only value must be a boolean, but "+typeof f+" found");this.h=t(f)?f:!!x(this.i);a="next";d&&e?a="prevunique":d?a="prev":e&&(a="nextunique");this.l=
a;if(d=rn(c))throw new Q("Invalid key range: "+d);this.j=on(c);this.u=Wn;this.R=NaN}D(Vn,Un);Vn.prototype.h=!0;function Xn(a,b,c){if(3<arguments.length)throw new Q("too many argument");Vn.call(this,a,void 0,b,c,void 0,!1)}D(Xn,Vn);function Yn(a,b,c,d,e){if(!x(b))throw new Q("index name must be string");Vn.call(this,a,b,c,d,e,!1)}D(Yn,Vn);var Wn="init";g=Vn.prototype;g.logger=R("ydn.db.Iterator");g.clone=function(){var a=new Vn(this.g,this.i,this.j,Zn(this),$n(this),this.h,this.n);a.R=this.R;return a};
g.unique=function(a){return new Vn(this.g,this.i,this.j,Zn(this),a,this.h,this.n)};g.toJSON=function(){return{store:this.g,index:this.i,keyRange:this.j?mn(this.j):null,direction:this.l}};g.toString=function(){var a=t(this.n)?":"+this.n.join(","):t(this.i)?":"+this.i:"",a=a+sn(this.j);this.u!=Wn&&(a+=this.u+"{"+this.P,this.s&&(a+=", "+this.G),a+="}");var b=this.s?"Index":"",b=b+(this.h?"Key":"Value");return b+"Iterator:"+this.g+a};
g.reverse=function(){return new Vn(this.g,this.i,this.j,!Zn(this),$n(this),this.h,this.n)};function Zn(a){return"prev"===a.l||"prevunique"===a.l}function $n(a){return"nextunique"===a.l||"prevunique"===a.l}g.load=function(a){a=a[0];a.init(this.g,this.n||this.i,this.j,this.l,this.h);this.u="busy";var b=this;a.Da=function(a,d,e){b.P=d;b.G=e;b.u=a?"rest":"done"};a.openCursor(this.P,this.G);return a};g.stores=function(){return[this.g]};function ao(a,b,c){Mh.call(this,b,c);this.R=a;this.s=[];this.G=[];this.Ta=[];this.g=null;this.Ac="";this.V=0}D(ao,Mh);g=ao.prototype;g.Ac="";g.logger=R("ydn.db.Request");function bo(a,b,c){a.g=b;a.Ac=c;T(a.logger,a+" BEGIN");if(b){for(c=0;c<a.G.length;c++)a.G[c][0].call(a.G[c][1],b);a.G.length=0}}function co(a){var b=new ao(a.R);a.V++;bo(b,a.g,a.Ac+"C"+a.V);return b}function eo(a){T(a.logger,a+" END");a.g=null}g.Wf=function(){return this.R};
g.abort=function(){T(this.logger,this+" aborting "+this.g);if(this.g)if(fa(this.g.abort))this.g.abort();else if(fa(this.g.executeSql))this.g.executeSql("ABORT",[],function(){},function(){return!0});else throw new Ug;else throw new fo(this+" No active transaction");};function W(a,b,c){var d=a.Ta.shift();c=!!c;d?d[0].call(d[1],b,c,function(b,c){W(a,b,c)}):c?a.I(b):a.callback(b)}function go(a,b,c){a.Ta.push([b,c])}function X(a,b,c){a.g?b.call(c,a.g):a.G.push([b,c])}
g.callback=function(a){T(this.logger,this+" SUCCESS");ao.m.callback.call(this,a)};g.I=function(a){T(this.logger,this+" ERROR");ao.m.I.call(this,a)};g.state=function(){return this.h?this.l?"rejected":"resolved":"pending"};function Y(a){var b="";a.Ac&&(b=a.g?"*":"",b="["+a.Ac+b+"]");return a.R+b}function ho(a,b){var c=new ao(a);W(c,b);return c}g.toString=function(){return"Request:"+Y(this)};
g.Ce=function(){this.n&&this.h&&Dg(this)&&(Eg(this.n),this.n=0);this.i&&(this.i.H--,delete this.i);for(var a=this.j,b=!1;this.u.length&&!this.P;){var c=this.u.shift(),d=c[0],e=c[1],c=c[2];if(d=this.l?e:d)d=d.call(c||this.N,a),t(d)&&(this.l=this.l&&(d==a||d instanceof Error),this.j=a=d),$f(a)&&(this.P=b=!0)}this.j=a;b&&(b=C(this.rd,this,!0),d=C(this.rd,this,!1),a instanceof P?(a.M(b,d),a.S=!0):a.then(b,d))};
g.toJSON=function(){var a=(this.Ac||"").match(/B(\d+)T(\d+)(?:Q(\d+?))?(?:R(\d+))?/)||[];return{method:this.R?this.R.split(":"):[],branchNo:parseFloat(a[1]),transactionNo:parseFloat(a[2]),queueNo:parseFloat(a[3]),requestNo:parseFloat(a[4])}};var un=Mn&&Mn.cmp?C(Mn.cmp,Mn):Fn,jo=[];(function(a){if(null!=a&&!("push"in a))throw new Oh('output receiver object must have "push" method.');}).prototype.logger=R("ydn.db.algo.AbstractSolver");function ko(a){Error.captureStackTrace?Error.captureStackTrace(this,ko):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ConstraintError"}D(ko,Error);ko.prototype.name="ConstraintError";ko.prototype.toString=function(){return this.name+": "+this.message};function lo(a){Error.captureStackTrace?Error.captureStackTrace(this,lo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.InvalidKeyException"}D(lo,Error);
lo.prototype.toString=function(){return this.name+": "+this.message};function mo(a){Error.captureStackTrace?Error.captureStackTrace(this,mo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.VersionError"}D(mo,Error);mo.prototype.name="ydn.db.VersionError";mo.prototype.toString=function(){return this.name+": "+this.message};function no(a){Error.captureStackTrace?Error.captureStackTrace(this,no):this.stack=Error().stack||"";a&&(this.message=String(a))}D(no,Error);
no.prototype.name="ydn.db.InternalError";function fo(a){Error.captureStackTrace?Error.captureStackTrace(this,fo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidStateError"}D(fo,Error);function oo(a){Error.captureStackTrace?Error.captureStackTrace(this,oo):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="InvalidAccessError"}D(oo,Error);
function po(a){Error.captureStackTrace?Error.captureStackTrace(this,po):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="NotFoundError"}D(po,Error);po.prototype.name="NotFoundError";po.prototype.toString=function(){return this.name+": "+this.message};function qo(a,b){Error.captureStackTrace?Error.captureStackTrace(this,qo):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message+" ["+a.code+"]";this.name="SQLError"}D(qo,Error);
qo.prototype.toString=function(){return this.name+": "+this.message};function ro(a,b){Error.captureStackTrace?Error.captureStackTrace(this,ro):this.stack=Error().stack||"";b&&(this.message=String(b));this.message+=" :"+a.message;this.name="SecurityError"}D(ro,Error);ro.prototype.toString=function(){return this.name+": "+this.message};function so(a){Error.captureStackTrace?Error.captureStackTrace(this,so):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.SqlParseError"}
D(so,Error);function to(a){Error.captureStackTrace?Error.captureStackTrace(this,to):this.stack=Error().stack||"";a&&(this.message=String(a));this.name="ydn.db.TimeoutError"}D(to,Error);function uo(a,b,c){var d;if(B(a))d=a.store,b=a.id,null!=a.parent&&(c=new uo(a.parent));else if(t(b))d=a;else if(d=a.lastIndexOf("^|"),b=a,0<d&&(b=a.substr(d),c=new uo(a.substring(0,d))),b=b.split("^:"),d=b[0],b=b[1],!t(b))throw Error("Invalid key value: "+a);this.X=d;this.id=b;this.parent=c||null}uo.prototype.toJSON=function(){var a={store:this.X,id:this.id};this.parent&&(a.parent=this.parent.toJSON());return a};
uo.prototype.valueOf=function(){return(this.parent?this.parent.valueOf()+"^|":"")+this.X+"^:"+this.id};uo.prototype.toString=function(){return this.valueOf().replace("^|","|").replace("^:",":")};uo.prototype.C=function(){return this.id};function vo(a){return v(a.id)?a.id.join("^|"):a.id instanceof Date?+a.id:a.id}function Sn(a){if(w(a)){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}return a};function wo(a,b){this.g=b}wo.prototype.logger=R("ydn.db.crud.req.RequestExecuto");wo.prototype.toString=function(){return"RequestExecutor"};function xo(a){this.i=a;this.g=null;this.h=0}xo.prototype.logger=R("ydn.db.tr.Mutex");xo.prototype.Za=null;function yo(a){return!!a.g&&!a.j}xo.prototype.Qa=null;xo.prototype.toString=function(){return"Mutex:"+("B"+this.i+"T"+this.h)+(this.g?"*":"")};function zo(a,b,c,d,e,f){this.N=a;this.J=b;this.g=this.s=0;this.H=d;this.R=e;this.j=c||Ao;this.u=f||0}zo.prototype.logger=R("ydn.db.tr.Thread");zo.prototype.type=function(){return Bo(this.N)};zo.prototype.L=function(){return this.N};zo.prototype.Ka=function(){return"B"+this.J+"T"+this.s};var Ao="single";function Co(a){if(a)if(fa(a.abort))a.abort();else if(fa(a.executeSql))a.executeSql("ABORT",[],null,function(){return!0});else throw new Ug;else throw new fo("No active transaction");};function Do(a,b,c,d,e,f){zo.call(this,a,b,c,d,e,f);this.i=[];this.l=[];this.n=null;this.h=new xo(b);this.P=f||0;this.G=!1}D(Do,zo);g=Do.prototype;g.logger=R("ydn.db.tr.Serial");
function Eo(a,b,c){if("multi"==a.j)a:if(a=a.h,!a.Za||!a.mode||c!=a.mode&&(a.mode!=Kn||c!=Jn)||b.length>a.Za.length)b=!1;else{for(c=0;c<b.length;c++)if(-1==a.Za.indexOf(b[c])){b=!1;break a}b=!0}else if("repeat"==a.j)a:if(a=a.h,a.Za&&a.mode&&c==a.mode&&a.Za.length==b.length){for(c=0;c<b.length;c++)if(-1==a.Za.indexOf(b[c])){b=!1;break a}b=!0}else b=!1;else b="all"==a.j?!0:!1;return b}
function Fo(a){var b=0<a.i.length?a.i[0].Za:null,c=0<a.i.length?a.i[0].mode:null;return null!=b&&null!=c?Eo(a,b,c):!1}function Go(a,b,c,d,e){S(a.logger,"push tx queue["+a.i.length+"]");a.i.push({zd:b,Za:c,mode:d,Qa:e})}g.abort=function(){T(this.logger,this+": aborting");Co(this.n)};
g.vc=function(a,b,c,d){var e=x(b)?[b]:b;if(w(e)){if(0==e.length)throw new Q("number of store names must more than 0");for(var f=0;f<e.length;f++){if(!x(e[f]))throw new Q("store name at "+f+" must be string but found "+e[f]+" of type "+typeof e[f]);if(this.S&&!bb(this.S,e[f]))throw new Q('store name "'+f+e[f]+'" in scope of '+this);}}else throw new Q("store names must be an array");var h=t(c)?c:Jn,k=this;if(this.h.g||!Ho(this.L())&&this.G)Go(this,a,b,h,d);else{var l=this.Ka();d&&this.l.push(d);if(this.P&&
this.s>=this.P)throw new Wg("Exceed maximum number of transactions of "+this.P);this.G=!0;this.L().transaction(function(c){var d=k.h;d.g=c;d.j=!1;d.Za=b;d.mode=h;d.h++;d.Qa=null;l=k.Ka();Lh(k.logger,l+" BEGIN "+vj(b)+" "+h);a(k);for(a=null;Fo(k);)c=k.i.shift(),c.Qa&&k.l.push(c.Qa),S(k.logger,"pop tx queue"+(k.i.length+1)+" reusing T"+k.s),c.zd()},e,h,function(a,b){Lh(k.logger,l+" "+a);var c=k.h;c.g?(c.g=null,c.Za=null,c.mode=null,fa(c.Qa)&&c.Qa(a,b),c.Qa=null):Kh(c.logger,c+" has no TX to be unlocked for "+
a);for(c=0;c<k.l.length;c++)(0,k.l[c])(a,b);k.l.length=0;(c=k.i.shift())&&k.vc(c.zd,c.Za,c.mode,c.Qa);k.g=0})}};g.Ka=function(){var a=this.h;return"B"+a.i+"T"+a.h};g.request=function(a,b,c,d){function e(a,b){eo(f);d&&d(a,b)}var f=new ao(a);a=c||Jn;var h=this;yo(this.h)&&Eo(this,b,a)?(b=this.h.g,this.g++,bo(f,b,this.Ka()+"R"+this.g),this.l.push(e)):h.vc(function(){var a=h.h.g;h.g++;bo(f,a,h.Ka()+"R"+h.g)},b,a,e);return f};
g.hc=function(a,b,c,d,e){d=d||Jn;var f=this,h;if(yo(f.h)&&Eo(this,c,d)){var k=f.h.g;f.g++;h=f.Ka()+"R"+f.g;T(f.logger,h+" BEGIN");b(k,h,function(b,c){f.n=k;c?(T(f.logger,h+" ERROR"),a.I(b)):(T(f.logger,h+" SUCCESS"),a.callback(b));f.n=null});T(f.logger,h+" END");b=null}else f.vc(function(){var c=f.h.g;f.g++;h=f.Ka()+"R"+f.g;T(f.logger,h+" BEGIN");b(c,h,function(b,d){f.n=c;d?(T(f.logger,h+" ERROR"),a.I(b)):(T(f.logger,h+" SUCCESS"),a.callback(b));f.n=null});T(f.logger,h+" END");b=null},c,d,e)};
g.getName=function(){return this.L().getName()};g.toString=function(){return"Serial:"+this.Ka()+(this.n?"*":"")};function Io(a,b){Do.call(this,a,b)}D(Io,Do);Io.prototype.logger=R("ydn.db.tr.AtomicSerial");Io.prototype.request=function(a,b,c){var d,e,f,h=Io.m.request.call(this,a,b,c,function(a,b){eo(h);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new to;W(h,c,!0)}});go(h,function(a,b,c){f=b;e=a;d=c});return h};
Io.prototype.hc=function(a,b,c,d,e){var f,h,k=new P;k.M(function(a){h=!1;f=a},function(a){h=!0;f=a});Io.m.hc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.I(c);else if(!0===h)a.I(f);else if(!1===h)a.callback(f);else{var d=new to;a.I(d)}e&&(e(b,c),e=void 0)})};Io.prototype.toString=function(){return"Atomic"+Io.m.toString.call(this)};function Jo(a,b,c){this.j=a;this.h=b;this.g=c;this.i=null}Jo.prototype.logger=R("ydn.db.tr.DbOperator");Jo.prototype.abort=function(){this.g.abort()};function Ko(a){a.i||(a.i=a.j.G());return a.i}Jo.prototype.L=function(){return this.j};
function Lo(a,b){var c=a.L(),d=b instanceof Mo?b:No(b),e=b.name,f=Z(c.h,e);if(0==Oo(d,f).length)Hg(!1);else if(f=f?"update":"add",c.h instanceof Po)Qo(c.h,d),c.g?(c.g.close(),c.g=null,Ro(c)):Hg(!1);else throw new Sh("Cannot "+f+" store: "+e+". Not auto schema generation mode.");}Jo.prototype.toString=function(){return"TxStorage:"+this.L().getName()};function So(a,b,c){Jo.call(this,a,b,c)}D(So,Jo);g=So.prototype;g.logger=R("ydn.db.crud.DbOperator");
g.count=function(a,b,c,d){var e,f,h,k;if(null!=a)if(v(a)){if(t(c)||t(b))throw new Q("too many arguments.");f=a;for(var l=0;l<f.length;l++)if(!To(this.h,f[l]))throw new Q('store name "'+f[l]+'" at '+l+" not found.");T(this.logger,"countStores: "+vj(f));e=this.g.request("count",f);X(e,function(){Ko(this).sd(e,f)},this)}else if(x(a)){l=Z(this.h,a);if(!l)throw new Q('store name "'+a+'" not found.');if(t(d)&&!ea(d))throw new Q('unique value "'+d+'" must be boolean, but found '+typeof d+".");f=[a];if(x(b))if(h=
b,B(c)){var m=rn(c);if(m)throw new Q("invalid key range: "+uj(c)+" "+m);k=on(c)}else{if(null!=c)throw new Q("invalid key range: "+uj(c)+" of type "+typeof c);k=null}else if(B(b)||null==b)if(B(b)){if(m=rn(b))throw new Q("invalid key range: "+uj(b)+" "+m);k=on(b)}else{if(null!=b)throw new Q("key range must be  an object but found "+uj(b)+" of type "+typeof b);k=null}else throw new Q('invalid second argument for count "'+uj(c)+'" of type '+typeof b);T(this.logger,"countKeyRange: "+a+" "+(h?h:"")+vj(k));
e=this.g.request("count",f);Uo(l,e,arguments);X(e,function(){Ko(this).Gc(e,f[0],k,h,!!d)},this)}else throw new Q("Invalid store name or store names.");else Kh(this.logger,"count method requires store name(s)"),l=Vo(this.h),e=this.g.request("count",l),go(e,function(a,b,c){if(b)c(a,!0);else{for(var d=b=0;d<a.length;d++)b+=a[d];c(b,!1)}},this),X(e,function(){Ko(this).sd(e,f)},this);return e};
g.get=function(a,b){var c=this,d;if(a instanceof uo){var e=a,f=e.X,h=Z(this.h,f);if(!h){if(this.h.g()){if(Ho(this.L()))return ho("get",void 0);d=new ao("get");Wo(this.L(),function(){c.get(a,b).M(function(a){d.callback(a)},function(a){d.I(a)})});return d}throw new Q("Store: "+f+" not found.");}var k=e.C();T(this.logger,"getByKey: "+f+":"+k);d=this.g.request("get:key",[f]);Uo(h,d,arguments,void 0,this);X(d,function(){Ko(this).Cd(d,f,k)},this)}else if(x(a)&&t(b)){var l=a,h=Z(this.h,l);if(!h){if(this.h.g()){if(Ho(this.L()))return ho("get",
void 0);d=new ao("get");Wo(this.L(),function(){c.get(a,b).M(function(a){d.callback(a)},function(a){d.I(a)})});return d}throw new Q('Store name "'+l+'" not found.');}var m=b;T(this.logger,"getById: "+l+":"+m);d=this.g.request("get",[l]);Uo(h,d,arguments,void 0,this);X(d,function(){Ko(this).Cd(d,l,m)},this)}else throw new Q("get require valid input arguments.");return d};
g.keys=function(a,b,c,d,e,f,h){var k,l,m=null,n=!1,p=!1,r=a,s=Z(this.h,r);if(!x(r))throw new Q("store name must be a string, but "+r+" of type "+typeof r+" is not.");if(!this.h.g()){if(!s)throw new Q('store name "'+r+'" not found.');if(x(b)&&!Pn(s,b))throw new Q('index "'+b+'" not found in store "'+r+'".');}if(this.h.g()&&!s)return ho("keys",[]);var y;if(x(b)){var z=b,E=rn(c);if(E)throw new Q("invalid key range: "+c+" "+E);m=on(c);if(A(d))k=d;else{if(t(d))throw new Q("limit must be a number");k=100}if(A(e))l=
e;else{if(t(e))throw new Q("offset must be a number");l=0}if(t(f))if(ea(f))n=f;else throw new Q("reverse must be a boolean");if(t(h))if(ea(h))p=h;else throw new Q("unique must be a boolean");T(this.logger,"keysByIndexKeyRange: "+r);y=this.g.request("keys:iter:index",[r]);Uo(s,y,arguments);X(y,function(){Ko(this).Bb(y,2,r,z,m,k,l,n,p)},this)}else{if(B(b)){if(E=rn(b))throw new Q("invalid key range: "+uj(b)+" "+E);m=on(b)}else{if(null!=b)throw new Q("invalid key range: "+uj(b)+" of type "+typeof b);
m=null}if(A(c))k=c;else{if(t(c))throw new Q("limit must be a number");k=100}if(A(d))l=d;else{if(t(d))throw new Q("offset must be a number");l=0}if(t(e))if(ea(e))n=e;else throw new Q("reverse must be a boolean");T(this.logger,"keysByKeyRange: "+r);y=this.g.request("keys",[r]);Uo(s,y,arguments);X(y,function(){Ko(this).Bb(y,2,r,null,m,k,l,n,!1)},this)}return y};
g.values=function(a,b,c,d,e,f,h){var k=this,l,m,n,p=!1,r=!1;if(x(a)){var s=a,y=Z(this.h,s);if(!y){if(this.h.g()){if(Ho(this.L()))return ho("values",[]);l=new ao("values");Wo(this.L(),function(){k.values(a,b,c,d,e,f).M(function(a){l.callback(a)},function(a){l.I(a)})});return l}throw new po(s);}if(v(b)){if(t(c)||t(d))throw new Q("too many input arguments");var z=b;T(this.logger,"listByIds: "+s+" "+z.length+" ids");l=this.g.request("values:array",[s]);Uo(y,l,arguments,void 0,this);X(l,function(){Ko(this).hf(l,
s,z)},this)}else if(x(b)){var E=b;if(!Xo(y,E))throw new Q('index "'+E+'" not found in store "'+s+'"');var H=rn(c);if(H)throw new Q("invalid key range: "+c+" "+H);var K=on(c);if(t(d))if(A(d))m=d;else throw new Q("limit must be a number.");else m=100;if(t(e))if(A(e))n=e;else throw new Q("offset must be a number.");else n=0;if(ea(f))p=f;else if(t(f))throw new Q("reverse must be a boolean, but "+f);if(t(h))if(ea(h))r=h;else throw new Q("unique must be a boolean");T(this.logger,"listByIndexKeyRange: "+
s+":"+E);l=this.g.request("values:iter:index",[s]);Uo(y,l,arguments);X(l,function(){Ko(this).Bb(l,4,s,E,K,m,n,p,r)},this)}else{K=null;if(B(b)){if(H=rn(b))throw new Q("invalid key range: "+b+" "+H);K=on(b)}else if(null!=b)throw new Q('expect key range object, but found "'+uj(b)+'" of type '+typeof b);if(t(c))if(A(c))m=c;else throw new Q("limit must be a number, but "+c+" is "+typeof c);else m=100;if(t(d))if(A(d))n=d;else throw new Q("offset must be a number, but "+d+" is "+typeof d);else n=0;if(t(e))if(ea(e))p=
e;else throw new Q("reverse must be a boolean, but "+e+" is "+typeof e);T(this.logger,(K?"listByKeyRange: ":"listByStore: ")+s);l=this.g.request("values",[s]);Uo(y,l,arguments);X(l,function(){Ko(this).Bb(l,4,s,null,K,m,n,p,!1)},this)}}else if(v(a))if(a[0]instanceof uo){for(var y=[],V=a,H=0;H<V.length;H++){var ua=V[H].X;if(!To(this.h,ua)){if(this.h.g())return y=[],y[V.length-1]=void 0,ho("get",y);throw new Q("Store: "+ua+" not found.");}bb(y,ua)||y.push(ua)}T(this.logger,"listByKeys: "+vj(y)+" "+V.length+
" keys");l=this.g.request("values:keys",y);X(l,function(){Ko(this).jf(l,V)},this)}else throw new Q("first argumentmust be array of ydn.db.Key, but "+a[0]+" of "+typeof a[0]+" found.");else throw new Q("first argument "+a+" is invalid.");return l};
g.add=function(a,b,c){var d=x(a)?a:B(a)?a.name:void 0;if(!x(d))throw new Q("store name "+d+" must be a string, but "+typeof d);var e=Z(this.h,d);if(!e){if(!this.h.g())throw new Q('store name "'+d+'" not found.');e=No(B(a)?a:{name:d});T(this.logger,"Adding object store: "+d);Lo(this,e)}else if(this.h.g()&&B(a)&&(a=No(a),a=Oo(e,a)))throw new Ug(a);var f;if(!e)throw new Q('store name "'+d+'" not found.');if(x(e.keyPath)&&t(c))throw new Q("key must not be provided while the store uses in-line key.");
if(!e.keyPath&&!e.autoIncrement&&!t(c))throw new Q("out-of-line key must be provided.");if(v(b)){T(this.logger,"addObjects: "+d+" "+b.length+" objects");for(a=0;a<b.length;a++)Yo(e,b[a]);f=this.g.request("add:array",[d],Kn);X(f,function(){Ko(this).ub(f,!1,!1,d,b,c)},this);e.Rb&&f.K(function(a){a=new Zo($o,this.L(),e.getName(),a,b);this.L().Va(a)},this)}else if(B(b))a="store: "+d+" key: "+ap(e,b,c),T(this.logger,"addObject: "+a),Yo(e,b),f=this.g.request("add",[d],Kn),X(f,function(){Ko(this).ub(f,!1,
!0,d,[b],[c])},this),e.Rb&&f.K(function(a){a=new bp($o,this.L(),e.getName(),a,b);this.L().Va(a)},this);else throw new Q("record must be an object or array list of objects, but "+b+" of type "+typeof b+" found.");return f};
function cp(a,b){var c=x(b)?b:B(b)?b.name:void 0;if(!x(c))throw new Q("store name must be a string");var d=Z(a.h,c);if(!d){if(!a.h.g())throw new po(c);d=No(B(b)?b:{name:c});T(a.logger,"Adding object store: "+c);Lo(a,d)}else if(a.h.g()&&B(b)){var e=No(b);if(e=Oo(d,e))throw new Ug(e);}if(!d)throw new po(c);return d}g.load=function(a,b,c){var d=c||",",e=cp(this,a).getName();a=this.g.request("load",[e]);var f=this;this.g.hc(a,function(a,c,l){Ko(f).qf(a,c,l,e,b,d)},[e],Kn);return a};
g.search=function(a){var b=a.g();S(this.logger,"query "+a);a=this.g.request("search",b,Jn);X(a,function(){Ko(this)},this);return a};
g.put=function(a,b,c){var d,e=this;if(a instanceof uo){var f=a,h=f.X,k=Z(this.h,h);if(!k)throw new Q('store "'+h+'" not found.');if(k.keyPath){var l=ap(k,b);if(null!=l){if(0!=un(l,f.C()))throw new Q("Inline key must be "+f+" but "+l+" found.");}else dp(k,b,f.C());return this.put(h,b)}return this.put(h,b,f.C())}if(v(a)){if(t(c))throw new Q("too many arguments");var m=a;if(!t(b))throw new Q("record values required");for(var n=b,f=[],h=0,k=m.length;h<k;h++){l=m[h].X;-1==Ta(f,l)&&f.push(l);var p=Z(this.h,
l);if(!p)throw new Q('store "'+l+'" not found.');p.keyPath&&dp(p,n[h],m[h].C())}T(this.logger,"putByKeys: to "+vj(f)+" "+n.length+" objects");for(h=0;h<n.length;h++)Yo(p,n[h]);d=this.g.request("put:keys",f,Kn);Uo(p,d,arguments);X(d,function(){Ko(e).pf(d,n,m)},this)}else if(x(a)||B(a)){var p=cp(this,a),r=p.getName();if(p.keyPath&&t(c))throw new Q("key must not be provided while the store uses in-line key.");if(!p.keyPath&&!p.autoIncrement&&!t(c))throw new Q("out-of-line key must be provided.");if(v(b)){var s=
b,y=c;T(this.logger,"putObjects: "+r+" "+s.length+" objects");for(h=0;h<s.length;h++)Yo(p,s[h]);d=this.g.request("put:array",[r],Kn);Uo(p,d,arguments);X(d,function(){Ko(this).ub(d,!0,!1,r,s,y)},this);p.Rb&&d.K(function(a){a=new Zo(ep,this.L(),r,a,s);this.L().Va(a)},this)}else if(B(b)){var z=b,E=c;T(this.logger,"putObject: "+r+" "+(t(E)?E:"(without-key)"));if(t(q.Blob)&&z instanceof Blob&&p.gc&&!p.keyPath&&0==p.g.length&&ub)d=new ao("put"),f=new FileReader,f.onload=function(a){var b=a.target.result,
c=e.g.request("put",[r],Kn);Uo(p,c,[r,z,E]);X(c,function(){Ko(e).ub(c,!0,!0,r,[b],[E])},this);c.M(function(a){d.callback(a)},function(a){d.I(a)})},f.onerror=function(a){d.I(a)},f.onabort=function(a){d.I(a)},f.readAsDataURL(z);else{Yo(p,z);d=this.g.request("put",[r],Kn);var H=[r,z,E];Uo(p,d,H);X(d,function(){var a=t(E)?[H[2]]:void 0;Ko(e).ub(d,!0,!0,r,[H[1]],a)},this)}p.Rb&&d.K(function(a){a=new bp(ep,this.L(),r,a,z);this.L().Va(a)},this)}else throw new Q("put record value must be Object or array of Objects");
}else throw new Q("the first argument of put must be store name, store schema or array of keys.");return d};
g.clear=function(a,b,c){if(t(c))throw new Q("too many input arguments");var d;if(x(a)){c=Z(this.h,a);if(!c)throw new Q('store name "'+a+'" not found.');if(B(b)){var e=on(b);if(null===e)throw new Q("clear method requires a valid non-null KeyRange object.");T(this.logger,"clearByKeyRange: "+a+":"+vj(e));d=this.g.request("clear",[a],Kn);Uo(c,d,[a,e]);X(d,function(){Ko(this).we(d,a,e)},this)}else{if(t(b))throw new Q("clear method requires a valid KeyRange object as second argument, but found "+b+" of type "+
typeof b);T(this.logger,"clearByStore: "+a);d=this.g.request("clear",[a],Kn);X(d,function(){Ko(this).pd(d,[a])},this)}}else if(!t(a)||v(a)&&x(a[0])){var f=a||Vo(this.h);T(this.logger,"clearByStores: "+vj(f));d=this.g.request("clear",f,Kn);X(d,function(){Ko(this).pd(d,f)},this)}else throw new Q('first argument "'+a+'" is invalid.');return d};
g.remove=function(a,b,c){var d;if(x(a)){var e=Z(this.h,a);if(!e)throw new Q('store name "'+a+'" not found.');if(t(c))if(x(b)){var f=Pn(e,b);if(!f)throw new Q("index: "+b+" not found in "+a);if(B(c)||null===c){var h=on(c);T(this.logger,"removeByIndexKeyRange: "+a+":"+f.getName()+" "+a);d=this.g.request("rm:iter:index",[a],Kn);X(d,function(){Ko(this).rf(d,a,f.getName(),h)},this)}else throw new Q("key range "+c+' is invalid type "'+typeof c+'".');}else throw new Q('index name "'+b+'" must be a string, but '+
typeof b+" found.");else if(x(b)||A(b)||w(b)||b instanceof Date){T(this.logger,"removeById: "+a+":"+b);d=this.g.request("rm",[a],Kn);var k=[a,b];Uo(e,d,k);X(d,function(){Ko(this).Xd(d,a,k[1])},this);e.Rb&&d.K(function(c){c=1==c?b:void 0;c=new bp(fp,this.L(),a,c,void 0);this.L().Va(c)},this)}else if(B(b))h=on(b),T(this.logger,"removeByKeyRange: "+a+":"+vj(h)),d=this.g.request("rm:iter",[a],Kn),Uo(e,d,[a,h]),X(d,function(){Ko(this).Yd(d,a,h)},this),e.Rb&&d.K(function(b){var c=[];c.length=b;b=new Zo(fp,
this.L(),a,c,void 0);this.L().Va(b)},this);else throw new Q('Invalid key or key range "'+b+'" of type '+typeof b);}else if(a instanceof uo){var l=a.X,e=Z(this.h,l);d=this.g.request("rm",[l],Kn);var m=[l,a.C()];Uo(e,d,m);X(d,function(){Ko(this).Xd(d,l,m[1])},this)}else if(v(a)){c=[];for(var e=0,n=a.length;e<n;e++){if(!(a[e]instanceof uo))throw new Q("key list element at "+e+" of "+n+' must be yn.db.Key, but "'+uj(a[e])+'" ('+da(a[e])+") is not ydn.db.Key.");var p=a[e].X;-1==Ta(c,p)&&c.push(p)}if(1>
c.length)throw new Q('at least one valid key required in key list "'+uj(a)+'"');d=this.g.request("rm:keys",c,Kn);X(d,function(){Ko(this).sf(d,a)},this)}else throw new Q('first argument requires store name, key (ydn.db.Key) or list of keys (array) , but "'+uj(a)+'" ('+da(a)+") found.");return d};g.toString=function(){return"DbOperator:"+this.L().getName()};function gp(a,b,c){Jo.call(this,a,b,c)}D(gp,So);g=gp.prototype;g.logger=R("ydn.db.core.DbOperator");g.get=function(a,b){if(a instanceof Vn){var c=a.g,d=Z(this.h,c);if(!d)throw new Q('store "'+c+'" not found.');var e=a.i;if(t(e)&&!Xo(d,e))throw new Q('index "'+e+'" not found in store "'+c+'".');T(this.logger,"getByIterator:"+a);var f=this.g.request("get:iter",[c]);X(f,function(){hp(this,5,f,a,1)},this);return f}return gp.m.get.call(this,a,b)};
g.keys=function(a,b,c,d,e,f,h){if(a instanceof Vn){var k=100;if(A(b)){if(k=b,1>k)throw new Q("limit must be a positive value, but "+b);}else if(t(b))throw new Q("limit must be a number,  but "+b);if(t(c))throw new Q("offset must not be specified");T(this.logger,"keysByIterator:"+a);var l=this.g.request("keys:iter",[a.g]);X(l,function(){a.s?hp(this,1,l,a,k):hp(this,2,l,a,k)},this);return l}return gp.m.keys.call(this,a,b,c,d,e,f,h)};
g.count=function(a,b,c,d){if(a instanceof Vn){if(t(b)||t(c))throw new Q("too many arguments.");T(this.logger,"countIterator:"+a);var e=this.g.request("count",[a.g]);X(e,function(){hp(this,6,e,a)},this);return e}return gp.m.count.call(this,a,b,c,d)};
g.values=function(a,b,c,d,e,f){if(a instanceof Vn){var h;if(A(b)){if(h=b,1>h)throw new Q("limit must be a positive value, but "+h);}else if(t(b))throw new Q("limit must be a number, but "+b);if(t(c))throw new Q("offset must not be specified");T(this.logger,"listByIterator:"+a);var k=this.g.request("values:iter",[a.g]);X(k,function(){a.h?hp(this,2,k,a,h):hp(this,4,k,a,h)},this);return k}return gp.m.values.call(this,a,b,c,d,e,f)};
g.open=function(a,b,c,d){if(!(b instanceof Vn))throw new Q("Second argument must be cursor range iterator.");for(var e=b.stores(),f=0;f<e.length;f++)if(!Z(this.h,e[f]))throw new Q('Store "'+e[f]+'" not found.');c=c||Jn;var h=this,k=this.g.request("open",b.stores(),c);T(this.logger,"open:"+c+" "+b);X(k,function(c){var e=Y(k);T(h.logger,e+" iterating "+b);for(var f=b.stores(),p=[],r=0;r<f.length;r++)p[r]=Ko(h).h(c,e,f[r]);var s=b.load(p);s.V=function(a){W(k,a,!0)};s.H=function(b){null!=b?(b=a.call(d,
s),!0===b?s.restart():B(b)?!0===b.restart?s.restart(b["continue"],b.continuePrimary):null!=b["continue"]?s.ic(b["continue"]):null!=b.continuePrimary?s.qd(b.continuePrimary):(Tn(s),W(k,void 0)):null===b?(Tn(s),W(k,void 0)):null!=b?s.ic(b):s.advance(1)):(Tn(s),W(k,void 0))}},this);return k};
g.map=function(a,b){for(var c=this,d=a.stores(),e,f=0;e=d[f];f++)if(!e)throw new Q('Store "'+e+'" not found.');e=this.g.request("map",d);S(this.logger,"map:"+a);this.g.hc(e,function(d,e,f){S(c.logger,e+" iterating "+a);for(var m=a.stores(),n=[],p=0;p<m.length;p++)n[p]=Ko(c).h(d,e,m[p]);var r=a.load(n);r.V=function(a){f(a,!1)};r.H=function(c){if(null!=c){var d;a.s?a.h?d=c:d=r.ib():a.h?d=c:d=r.U();b(d);r.advance(1)}else f(void 0),b=null}},d,Jn);return e};
function hp(a,b,c,d,e){var f=[],h=c.g,k=Y(c),l=k+" "+b+"ByIterator "+d;0<e&&(l+=" limit "+e);T(a.logger,l);for(var m=Ko(a),n=[],p=d.stores(),r=0;r<p.length;r++)n[r]=m.h(h,k,p[r]);var s=d.load(n);s.V=function(a){Tn(s);W(c,a,!0)};var y=0,z=!1;s.H=function(d){z||(S(a.logger,l+" starting"),z=!0);null!=d?(s.ib(),y++,1==b?f.push(d):2==b?f.push(s.ib()):3==b?f.push([d,s.ib()]):6!=b&&f.push(s.U()),5==b?(Tn(s),W(c,f[0])):6==b||!t(e)||y<e?s.ic():(T(a.logger,"success:"+l+" yields "+f.length+" records"),Tn(s),
W(c,f))):(T(a.logger,"success:"+l+" yields "+f.length+" records"),Tn(s),W(c,5==b?f[0]:6==b?y:f))}};var $o="created",fp="deleted",ep="updated";function ip(a,b){I.call(this,a,b)}D(ip,I);function jp(a,b,c){I.call(this,a,b);this.version=c}D(jp,ip);jp.prototype.name="ReadyEvent";jp.prototype.version=NaN;function kp(a,b,c){I.call(this,c||"error",a);this.error=b}D(kp,ip);kp.prototype.toString=function(){return this.name+":"+(this.error?this.error:"")};kp.prototype.name="ErrorEvent";kp.prototype.error=null;function lp(a,b){kp.call(this,a,b,"fail")}D(lp,kp);lp.prototype.name="FailEvent";
function bp(a,b,c,d,e){I.call(this,a,b);this.X=c;this.key=d;this.value=e}D(bp,ip);bp.prototype.name="RecordEvent";bp.prototype.U=function(){return this.value};function Zo(a,b,c,d,e){I.call(this,a,b);this.X=c;this.keys=d;this.values=e}D(Zo,ip);Zo.prototype.name="StoreEvent";Zo.prototype.za=function(){return this.keys};Zo.prototype.ta=function(){return this.values};function mp(a,b,c,d,e,f){t(e)||(e=v(a)?a.join(", "):a);if(null!=a&&!x(a)&&!w(a))throw new Q("index keyPath for "+e+" must be a string or array, but "+a+" is "+typeof a);v(a)&&Object.freeze&&Object.freeze(a);!t(a)&&t(e)&&(a=e);this.keyPath=a;this.n=w(this.keyPath);this.h=e;this.type=np(b);if(t(b)){if(!t(this.type))throw new Q("type invalid in index: "+this.h);if(v(this.keyPath))throw new Q('composite key for store "'+this.h+'" must not specified type');}this.unique=!!c;this.multiEntry=!!d;this.s=x(this.type)?
this.type:op;this.j=x(e)?e:v(a)?this.keyPath.join(","):a;this.i=Ka(this.j);this.g=this.n?null:this.keyPath.split(".");this.l=f||null}function pp(a,b){if(null!=b){if(w(a.keyPath)){for(var c=[],d=0,e=a.keyPath.length;d<e;d++){var f=wn(b,a.keyPath[d]);c[d]=f}return c}return wn(b,a.keyPath)}}function qp(a,b,c){for(var d=0;d<a.g.length;d++)d==a.g.length-1?b[a.g[d]]=c:B(b[a.g[d]])||(b[a.g[d]]={})}var op="TEXT";function vn(a,b){if("DATE"==b){if(a instanceof Date)return+a}else return null!=b?a:yn(a)}
function rp(a,b){return"DATE"==b?new Date(a):t(b)?a:Bn(a)}var sp=["BLOB","DATE","INTEGER","NUMERIC",op];function np(a){if(x(a))return a=Ta(sp,a),sp[a]}g=mp.prototype;g.getName=function(){return this.h};g.toJSON=function(){return{name:this.h,keyPath:this.keyPath,type:this.type,unique:this.unique,multiEntry:this.multiEntry}};g.clone=function(){var a=v(this.keyPath)?fb(this.keyPath):this.keyPath;return new mp(a,this.type,this.unique,this.multiEntry,this.h,this.l)};
function On(a,b){return null!=a||null!=b?null!=a?null!=b?w(a)&&w(b)?jb(a,b)?null:"expect: "+a+", but: "+b:Mj(a,b)?null:"expect: "+a+", but: "+b:"keyPath: "+a+" no longer defined":"newly define "+b:null}g.hint=function(a){if(!a)return this;var b=v(this.keyPath)?fb(this.keyPath):this.keyPath,c=this.type;t(a.type)||"TEXT"!=c||(c=void 0);return new mp(b,c,this.unique,this.multiEntry,a.h)};
g.toString=function(){var a=this.multiEntry?"MultiEntry":"";this.g&&1<this.g.length&&(a+="Compound");return a+"Index:"+this.h};function Mo(a,b,c,d,e,f,h,k){this.h=a;if(!x(this.h))throw new Q("store name must be a string");this.keyPath=t(b)?b:null;this.n=w(this.keyPath);if(null!==this.keyPath&&!x(this.keyPath)&&!this.n)throw new Q("keyPath must be a string or array");this.autoIncrement=c;var l;if(null!=d){l=np(d);if(!t(l))throw new Q('type "'+d+'" for primary key in store "'+this.h+'" is invalid.');if(this.n)throw new Q('composite key for store "'+this.h+'" must not specified type');}this.type=null!=l?l:this.autoIncrement?
"INTEGER":void 0;this.l=x(this.keyPath)?this.keyPath.split("."):[];this.g=e||[];this.Rb=!!f;this.gc=!!h;this.P=x(this.type)?this.type:op;this.j=v(this.keyPath)?this.keyPath.join(","):x(this.keyPath)?this.keyPath:"_ROWID_";this.i=Ka(this.j);if(this.u=!!k){if(this.keyPath)throw new Q('encrypted store "'+this.h+'" must not use inline key');if(this.autoIncrement)throw new Q('encrypted store "'+this.h+'" must not use key generator');}this.s=[]}g=Mo.prototype;g.Rb=!1;g.gc=!1;
g.toJSON=function(){for(var a=[],b=0;b<this.g.length;b++)a.push(this.g[b].toJSON());return{name:this.h,keyPath:this.keyPath,autoIncrement:this.autoIncrement,type:this.type,indexes:a}};
function No(a){var b="name keyPath autoIncrement type indexes dispatchEvents fixed Sync encrypted".split(" "),c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ta(b,c))throw new Q('Unknown attribute "'+c+'"');b=[];c=a.indexes||[];if(v(c))for(var d=0;d<c.length;d++){var e;e=c[d];var f="name unique type keyPath multiEntry generator".split(" "),h=void 0;for(h in e)if(e.hasOwnProperty(h)&&-1==Ta(f,h))throw new Q("Unknown field: "+h+" in "+vj(e));e=new mp(e.keyPath,e.type,e.unique,e.multiEntry,e.name,e.generator);
t(e.keyPath)&&e.keyPath===a.keyPath||b.push(e)}return new Mo(a.name,a.keyPath,a.autoIncrement,"undefined"===a.type||"null"===a.type?void 0:a.type,b,a.dispatchEvents,a.fixed,a.encrypted)}function tp(a,b,c,d,e,f,h){a=up(a,b,c,d,e,f,h);b="";0!=c&&(b+="SELECT "+a.select);b+=" FROM "+a.mc;a.$&&(b+=" WHERE "+a.$);a.group&&(b+=" GROUP BY "+a.group);a.Kb&&(b+=" ORDER BY "+a.Kb);return b}
function up(a,b,c,d,e,f,h){var k={select:"",mc:"",$:"",group:"",Kb:""},l=a.j,m=a.i,n=null;d!==l&&x(d)&&(n=Pn(a,d));var p=!!n,r=d||l,s=Ka(r),y=p?n.type:a.type,z=p&&n.multiEntry;k.mc=vp(a);6===c?k.select="COUNT("+m+")":3===c||1===c||2===c?(k.select=m,null!=d&&d!=l&&(k.select+=", "+s)):k.select="*";d=h?"DISTINCT ":"";l=[];z?(z=Ka("ydn.db.me:"+a.getName()+":"+n.getName()),k.select=6===c?"COUNT("+d+z+"."+s+")":3===c||1===c||2===c?"DISTINCT "+vp(a)+"."+m+", "+z+"."+s+" AS "+r:"DISTINCT "+vp(a)+".*, "+z+
"."+s+" AS "+r,k.mc=z+" INNER JOIN "+vp(a)+" USING ("+m+")",null!=e&&(tn(z+"."+s,y,e,l,b),0<l.length&&(k.$=k.$?k.$+(" AND "+l.join(" AND ")):l.join(" AND ")))):null!=e&&(tn(s,y,e,l,b),0<l.length&&(k.$=k.$?k.$+(" AND "+l.join(" AND ")):l.join(" AND ")));p&&!n.unique&&h&&(k.group=s);a=f?"DESC":"ASC";k.Kb=s+" "+a;p&&(k.Kb+=", "+m+" "+a);return k}
function wp(a,b,c,d,e,f,h,k,l){var m,n,p,r;null!=e?(m=e.lower,n=e.upper,p=e.lowerOpen,r=e.upperOpen,f?null!=n?(e=un(k,n),-1==e?(n=k,r=l):0==e&&(r=l||r)):(n=k,r=l):null!=m?(e=un(k,m),1==e?(m=k,p=l):0==e&&(p=l||p)):(m=k,p=l)):f?(n=k,r=l):(m=k,p=l);e=new Cl(m,n,!!p,!!r);d=d?Pn(a,d):null;b=up(a,c,b,d?d.j:a.j,e,f,h);b="SELECT "+b.select+" FROM "+b.mc+(b.$?" WHERE "+b.$:"")+(b.group?" GROUP BY "+b.group:"")+" ORDER BY "+b.Kb;d&&(b+=", "+a.i+(f?"DESC":"ASC"));return b}
function xp(a,b,c,d,e,f,h,k,l,m){var n=Pn(a,d),p=n.j;d=n.i;var r=a.i,s=l?" <":" >",s=h?s+" ":s+"= ";h=vn(f,n.type);k=vn(k,a.type);n="";e?(a=up(a,c,b,p,e,l,m),a.$+=" AND ",n=d+s+"?",c.push(h)):(e=l?Cl.upperBound(f,!0):Cl.lowerBound(f,!0),a=up(a,c,b,p,e,l,m),n=a.$,a.$="");a.$+="("+n+" OR ("+d+" = ? AND "+r+s+"?))";c.push(h);c.push(k);return"SELECT "+a.select+" FROM "+a.mc+" WHERE "+a.$+(a.group?" GROUP BY "+a.group:"")+" ORDER BY "+a.Kb}g.clone=function(){return No(this.toJSON())};
g.index=function(a){return this.g[a]||null};function Pn(a,b){return $a(a.g,function(a){return a.getName()==b})}function Xo(a,b){return b===a.keyPath?!0:Ya(a.g,function(a){return a.getName()==b})}function vp(a){return Ka(a.h)}
function yp(a,b){if(!b)return a;var c=a.autoIncrement,d=v(a.keyPath)?fb(a.keyPath):a.keyPath,e=a.type,f=Xa(a.g,function(a){return a.clone()});t(b.type)||"TEXT"!=e||(e=void 0);v(b.keyPath)&&x(d)&&d==b.keyPath.join(",")&&(d=fb(b.keyPath));for(var h=0,k=b.g.length;h<k;h++)if(b.g[h].n)for(var l=b.g[h].getName(),m=f.length-1;0<=m;m--)if(0<=l.indexOf(f[m].getName())){f[m]=b.g[h].clone();break}for(h=0;h<f.length;h++)(k=Pn(b,f[h].getName()))&&(f[h]=f[h].hint(k));return new Mo(b.h,d,c,e,f)}g.getName=function(){return this.h};
function zp(a){return!!a.keyPath}function ap(a,b,c){if(b){if(!a.keyPath&&null!=c)return c;if(a.n){c=[];for(var d=0;d<a.keyPath.length;d++)c.push(wn(b,a.keyPath[d]));return c}if(a.keyPath)return Nb(b,a.l)}}function dp(a,b,c){for(var d=0;d<a.l.length;d++){var e=a.l[d];if(d==a.l.length-1){b[e]=c;break}t(b[e])||(b[e]={});b=b[e]}}
function Ap(a,b,c){var d=[],e=[];c=t(c)?c:ap(a,b);t(c)&&(e.push(a.i),d.push(vn(c,a.type)));for(var f=0;f<a.g.length;f++){var h=a.g[f];if(!h.multiEntry&&h.getName()!==a.keyPath&&"_default_"!=h.getName()){var k=pp(h,b);null!=k&&(d.push(vn(k,h.type)),e.push(h.i))}}a.gc?a.gc&&!a.keyPath&&0==a.g.length&&(x(b)&&-1==b.indexOf(";base64,")?d.push(b):d.push(vj(b)),e.push("_default_")):(d.push(vj(b)),e.push("_default_"));a=[];for(f=d.length-1;0<=f;f--)a[f]="?";return{Mf:e,rg:a,values:d,key:c}}
function Oo(a,b){if(!b)return"missing store: "+a.h;if(a.h!=b.h)return"store name, expect: "+a.h+", but: "+b.h;var c=On(a.keyPath,b.keyPath);if(c)return"keyPath, "+c;if(t(a.autoIncrement)&&t(b.autoIncrement)&&a.autoIncrement!=b.autoIncrement)return"autoIncrement, expect:  "+a.autoIncrement+", but: "+b.autoIncrement;if(a.g.length!=b.g.length)return"indexes length, expect:  "+a.g.length+", but: "+b.g.length;if(t(a.type)&&t(b.type)&&(w(a.type)?!jb(a.type,b.type):a.type!=b.type))return"data type, expect:  "+
a.type+", but: "+b.type;for(c=0;c<a.g.length;c++){var d=Pn(b,a.g[c].getName()),e;e=a.g[c];if(d)if(e.h!=d.h)e="name, expect: "+e.h+", but: "+d.h;else{var f=On(e.keyPath,d.keyPath);e=f?"keyPath, "+f:null!=e.unique&&null!=d.unique&&e.unique!=d.unique?"unique, expect: "+e.unique+", but: "+d.unique:null!=e.multiEntry&&null!=d.multiEntry&&e.multiEntry!=d.multiEntry?"multiEntry, expect: "+e.multiEntry+", but: "+d.multiEntry:t(e.type)&&t(d.type)&&(w(e.type)?!jb(e.type,d.type):e.type!=d.type)?"data type, expect: "+
e.type+", but: "+d.type:""}else e="no index for "+e.h;if(0<e.length)return'index "'+a.g[c].getName()+'" '+e}return""}function Yo(a,b){if(b)for(var c=0;c<a.g.length;c++){var d=a.g[c],e=b;if(d.l){var f=d.l(e),h=typeof f;if("string"==h||"number"==h||f instanceof Date||v(f)){for(h=0;h<d.g.length-1;h++)B(e[d.g[h]])||(e[d.g[h]]={});e[d.g[d.g.length-1]]=f}}}}function Uo(a,b,c,d,e){for(var f=0;f<a.s.length;f++)d!==f&&a.s[f].call(e,b,c)}g.toString=function(){return"Store:"+this.h+"["+this.g.length+"index]"};function Bp(a,b){if(!a||ta(a))throw new Q("store_name must be provided for primary full text index");if(!b||ta(b))throw new Q("index_name must be provided for primary full text index");this.X=a};function Cp(a,b,c){this.name=a;this.g=b;this.h=c||"";if(-1==["","en","fr"].indexOf(this.h))throw new Q('Unsupported lang "'+c+" for full text search index "+a);}Cp.prototype.getName=function(){return this.name};Cp.prototype.count=function(){return this.g.length};Cp.prototype.index=function(a){return this.g[a]};
function Dp(a){var b=["name","sources","lang"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ta(b,c))throw new Q("Unknown field: "+c+" in "+vj(a));if(!v(a.sources))throw new Q("indexes require for full text search index "+a.name+", but "+a.sources+" of type "+typeof a.sources+" found.");b=a.sources.map(function(a){var b=["storeName","keyPath","weight"],c;for(c in a)if(a.hasOwnProperty(c)&&-1==Ta(b,c))throw new Q("Unknown field: "+c+" in "+uj(a));return new Bp(a.storeName,a.keyPath)});return new Cp(a.name,
b,a.lang)};function Ep(a,b){var c,d,e=b;if(B(a)){d=a;c=["version","stores","fullTextCatalogs"];for(var f in d)if(d.hasOwnProperty(f)&&-1==Ta(c,f))throw new Q("Unknown field: "+f+" in schema.");c=d.version;var e=[],h=d.stores||[];if(!v(h))throw new Q("stores must be array");for(f=0;f<h.length;f++){var k=No(h[f]);if(-1!=ab(e,function(a){return a.name==k.getName()}))throw new Q('duplicate store name "'+k.getName()+'".');e.push(k)}}else x(a)?c=0==a.length?void 0:parseFloat(a):A(a)&&(c=a);if(t(c)){if(!A(c)||0>c)throw new Q("Invalid version: "+
c+" ("+a+")");isNaN(c)&&(c=void 0)}if(t(b)&&(!v(b)||0<b.length&&!(b[0]instanceof Mo)))throw new Q("stores");this.version=c;this.h=!t(this.version);this.stores=e||[];c=[];if(d&&d.fullTextCatalogs)for(f=0;f<d.fullTextCatalogs.length;f++)e=Dp(d.fullTextCatalogs[f]),c[f]=e,Z(this,e.getName())||(h=[new mp("k",op),new mp("v",op)],e=new Mo(e.getName(),"id",!1,void 0,h,!1,!1,!1),this.stores.push(e));this.i=c}
Ep.prototype.toJSON=function(){var a=Xa(this.stores,function(a){return a.toJSON()}),b={};b.stores=a;t(this.version)&&(b.version=this.version);return b};Ep.prototype.h=!1;Ep.prototype.g=function(){return!1};function Vo(a){return Xa(a.stores,function(a){return a.getName()})}Ep.prototype.count=function(){return this.stores.length};function Z(a,b){return $a(a.stores,function(a){return a.getName()==b})}function To(a,b){return Ya(a.stores,function(a){return a.getName()==b})}
function Fp(a,b,c,d){if(!b||a.stores.length!=b.stores.length)return"Number of store: "+a.stores.length+" vs "+b.stores.length;for(var e=0;e<a.stores.length;e++){var f=Z(b,a.stores[e].getName());if(f){c&&(f=yp(f,a.stores[e]));if(d)for(var h=f,k=a.stores[e],l=0;l<k.g.length;l++){var m=k.g[l];Xo(h,m.getName())||"BLOB"!=m.type||(m=new mp(m.keyPath,m.type,m.unique,m.multiEntry,m.getName()),h.g.push(m))}f=Oo(a.stores[e],f);if(0<f.length)return'store: "'+a.stores[e].getName()+'" '+f}else return'missing object store "'+
a.stores[e].getName()+'"'}return""};function Po(a,b){Ep.call(this,a,b)}D(Po,Ep);Po.prototype.g=function(){return!0};function Qo(a,b){a.stores.push(b)};/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function Gp(a,b,c){c=c||{};var d="autoSchema connectionTimeout size mechanisms policy isSerial Encryption".split(" "),e;for(e in c)if(c.hasOwnProperty(e)&&-1==Ta(d,e))throw new Q('Unknown attribute "'+e+'" in options.');if(c.mechanisms){if(!v(c.mechanisms))throw new Q("mechanisms attribute must be an array but "+da(c.mechanisms)+" found.");for(e=0;e<c.mechanisms.length;e++)if(!bb(Hp,c.mechanisms[e]))throw new Q('Invalid mechanism "'+c.mechanisms[e]+'"');}this.H=c.mechanisms||Hp;this.P=c.size;this.N=
t(c.connectionTimeout)?c.connectionTimeout:3E3;this.g=null;this.j=[];this.Nd=!1;var f;if(b instanceof Ep)f=b;else if(B(b))for(c.autoSchema||!t(b.stores)?f=new Po(b):f=new Ep(b),c=b.stores?b.stores.length:0,e=0;e<c;e++)d=Z(f,b.stores[e].name),b.stores[e].Sync&&Kh(this.logger,"Synchronization option for "+d.getName()+" ignored.");else f=new Po;this.h=f;for(e=0;e<this.h.count();e++)if((this.h.stores[e]||null).u)throw Error("encryption option must be defined");if(t(a)){if(this.g)throw new Wg("Already connected with "+
this.u);this.u=a;Ro(this)}this.s=null;this.n=new P}Gp.prototype.logger=R("ydn.db.con.Storage");function Ip(a){var b;if(t(b)){var c=function(a){b(a.toJSON());b=void 0};a.g?a.g.bb(c):a.transaction(function(b){a.g.bb(c,b)},null,Jn)}return a.h?a.h.toJSON():null}Gp.prototype.getName=function(){return this.u};var Hp="indexeddb sqlite websql localstorage sessionstorage userdata memory".split(" ");g=Gp.prototype;g.ze=function(){return null};
function Ro(a){function b(b,e){b?(S(a.logger,a+": ready."),a.fg=NaN,d.dd=function(b){a.Va(new kp(a,b))},d.me=function(b){a.Va(new lp(a,b));a.g=null},d.Wd=function(b){a.Va(b)},setTimeout(function(){Jp(a,e);Kp(a)},10),c.callback(e)):(Kh(a.logger,a+": database connection fail "+e.name),setTimeout(function(){Jp(a,new lp(a,e));if(a.j){var b=a.logger;for(b&&b.log(uh,"Purging "+a.j.length+" transactions request.",void 0);b=a.j.shift();)b.Qa&&b.Qa("error",e)}},10),c.I(e))}for(var c=new P,d=null,e=a.H,f=0;f<
e.length;f++){var h=e[f].toLowerCase();if(d=a.ze(h)){d=a.ze(h);break}}null===d?(e=new Sh("No storage mechanism found."),b(!1,new lp(a,e))):(a.init(),d.connect(a.u,a.h).M(function(){this.g=d;b(!0,new jp("ready",this,parseFloat(d.ke())))},function(a){Kh(this.logger,this+": opening fail");b(!1,a)},a))}function Bo(a){if(a.g)return a.g.Dc()}function Wo(a,b,c){a.n.ed(b,c)}function Jp(a,b){setTimeout(function(){a.h.h&&a.n.h||(b instanceof kp?a.n.I(b.error):a.n.callback(),a.Va(b))},4)}
function Ho(a){return!!a.g&&a.g.le()}g.init=function(){};g.close=function(){this.g&&(this.g.close(),this.g=null,S(this.logger,this+" closed"))};g.fg=NaN;function Kp(a){var b=a.j.shift();b&&(S(a.logger,"pop tx queue["+(a.j.length+1)+"]"),a.transaction(b.zd,b.scopes,b.mode,b.Qa));a.fg=ma()}
function Lp(a,b,c,d,e){S(a.logger,"push tx queue["+a.j.length+"]");a.j.push({zd:b,scopes:c,mode:d,Qa:e});100<a.j.length&&0==a.j.length%100&&Kh(a.logger,"Transaction queue stack size is "+a.j.length+". It is too large, possibility due to incorrect usage.")}g.Nd=!1;
g.transaction=function(a,b,c,d){var e=b;if(x(b))e=[b];else if(null!=b)if(w(b)){if(0==b.length)throw new Q("number of store names must more than 0");for(var f=0;f<b.length;f++)if(!x(b[f]))throw new Q("store name at "+f+" must be string but found "+typeof b[f]);}else throw new Q("store names must be an array");else e=null;if(this.g&&this.g.le()&&!this.Nd){var h=this,k=t(c)?c:Jn;k==Ln&&(this.Nd=!0);this.g.vd(function(b){a(b);a=null},e,k,function(a,b){fa(d)&&(d(a,b),d=void 0);k==Ln&&(h.Nd=!1);Kp(h)})}else Lp(this,
a,e,c,d)};g.Va=function(){};g.toString=function(){return"Storage:"+this.g};function Mp(a,b,c,d){this.j=a;this.l=b;this.g=fb(c);this.h=d;this.i=[]}Mp.prototype.j=null;Mp.prototype.onCompleted=function(a,b){for(var c=0;c<this.i.length;c++)this.i[c](a,b);this.i.length=0;this.i=this.g=this.j=null};function Np(a,b,c){if(a.j)c&&a.i.push(c),b(a.j);else throw new Xg("tx committed on ParallelTxExecutor");}Mp.prototype.toString=function(){return"ParallelTxExecutor: txNo:"+this.l+" mode:"+this.h+" scopes:"+vj(this.g)};function Op(a,b,c,d,e,f){zo.call(this,a,b,c,d,e,f);this.i=this.h=null}D(Op,zo);g=Op.prototype;g.logger=R("ydn.db.tr.Parallel");g.abort=function(){T(this.logger,this+": aborting");Co(this.i)};
g.Cg=function(a,b){var c;if("multi"==this.j)a:if(c=this.h,!c.g||!c.h||b!=c.h&&(c.h!=Kn||b!=Jn)||a.length>c.g.length)c=!1;else{for(var d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else if("repeat"==this.j)a:if(c=this.h,c.g&&c.h&&b==c.h&&c.g.length==a.length){for(d=0;d<a.length;d++)if(-1==c.g.indexOf(a[d])){c=!1;break a}c=!0}else c=!1;else c="all"==this.j?!0:!1;return c};
g.vc=function(a,b,c,d){function e(c){l.s++;m=new Mp(c,l.s,b,k);h=l.Ka();Lh(l.logger,h+" BEGIN "+vj(b)+" "+k);l.h=m;Np(l.h,a,d)}function f(a,b){Lh(l.logger,h+" "+a);if(m)m.onCompleted(a,b);l.g=0}var h;this.H&&(b=this.H);this.R&&(c=this.R);var k=t(c)?c:Jn,l=this,m;if(this.h&&this.h.j&&this.Cg(b,k))Np(this.h,a,d);else{if(this.u&&this.s>=this.u)throw new Wg("Exceed maximum number of transactions of "+this.u);this.L().transaction(e,b,k,f)}};
g.request=function(a,b,c,d){var e=new ao(a),f=this;this.vc(function(a){f.g++;bo(e,a,f.Ka()+"R"+f.g)},b,c||Jn,function(a,b){eo(e);d&&d(a,b)});return e};g.hc=function(a,b,c,d,e){var f=this,h;this.vc(function(c){f.g++;h=f.Ka()+"R"+f.g;T(f.logger,h+" BEGIN");b(c,h,function(b,d){f.i=c;h=f.Ka()+"R"+f.g;d?(T(f.logger,h+" ERROR"),a.I(b)):(T(f.logger,h+" SUCCESS"),a.callback(b));f.i=null});b=null;T(f.logger,h+" END")},c,d,e)};g.toString=function(){return"Parallel:"+this.j+":"+this.Ka()+(this.i?"*":"")};function Pp(a,b){Op.call(this,a,b,Ao)}D(Pp,Op);g=Pp.prototype;g.logger=R("ydn.db.tr.AtomicParallel");g.Cg=function(){return!1};g.request=function(a,b,c){var d,e,f,h=this,k=Pp.m.request.call(this,a,b,c,function(a,b){eo(k);T(h.logger,"transaction "+a);if(d)"complete"!=a&&(f=!0,e=b),d(e,f);else{var c=new to;W(k,c,!0)}});go(k,function(a,b,c){f=b;e=a;d=c});return k};
g.hc=function(a,b,c,d,e){var f,h,k=new P;k.M(function(a){h=!1;f=a},function(a){h=!0;f=a});Pp.m.hc.call(this,k,b,c,d,function(b,c){if("complete"!=b)a.I(c);else if(!0===h)a.I(f);else if(!1===h)a.callback(f);else{var d=new to;a.I(d)}e&&(e(b,c),e=void 0)})};g.toString=function(){return"Atomic"+Pp.m.toString.call(this)};function Qp(a,b,c){Gp.call(this,a,b,c);this.l=0;a=!0;b=Ao;c&&(t(c.isSerial)&&(a=!!c.isSerial),c.policy&&(b=c.policy));c=Rp(this,b,a);this.R=Rp(this,"atomic",!1);this.i=this.Wc(c,this.R)}D(Qp,Gp);Qp.prototype.l=0;Qp.prototype.Wc=function(a){return new Jo(this,this.h,a)};
function Rp(a,b,c,d,e,f){if(c){if("multi"==b||"repeat"==b||"all"==b||b==Ao)return new Do(a,a.l++,b,d,e,f);if("atomic"==b)return new Io(a,a.l++);throw new Q('Invalid requestType "'+b+'"');}if("multi"==b||"repeat"==b||"all"==b||b==Ao)return new Op(a,a.l++,b,d,e,f);if("atomic"==b)return new Pp(a,a.l++);throw new Q('Invalid requestType "'+b+'"');};function Sp(a,b,c){Qp.call(this,a,b,c);a=this.h;for(b=0;b<a.i.length;b++){c=a.i[b];var d=Z(a,c.getName());if(d){if(!Xo(d,"k"))throw new Q('full text index store "'+d.getName()+'" must have "keyword" index');if(!Xo(d,"v"))throw new Q('full text index store "'+d.getName()+'" must have "keyword" index');if("id"!=d.keyPath)throw new Q('full text index store "'+d.getName()+'" must use "id" as key path.');}else throw new Q('full text index store "'+c.getName()+'" required.');for(d=0;d<c.count();d++){var e=
c.index(d),f=Z(a,e.X);if(f)Kh(this.logger,"Full text indexer option for "+f.getName()+" ignored.");else throw new Q('full text source store "'+e.X+'" does not exist for full text index "'+c.getName()+'"');}}}D(Sp,Qp);g=Sp.prototype;g.init=function(){Sp.m.init.call(this)};g.Wc=function(a){return new So(this,this.h,a)};g.add=function(a,b,c){return this.i.add(a,b,c)};g.count=function(a,b,c,d){return this.i.count(a,b,c,d)};g.get=function(a,b){return this.i.get(a,b)};
g.keys=function(a,b,c,d,e,f,h){return this.i.keys(a,b,c,d,e,f,h)};g.values=function(a,b,c,d,e,f){return this.i.values(a,b,c,d,e,f)};g.load=function(a,b,c){return this.i.load(a,b,c)};g.put=function(a,b,c){return this.i.put(a,b,c)};g.clear=function(a,b,c){return this.i.clear(a,b,c)};g.remove=function(a,b,c){return this.i.remove(a,b,c)};g.toString=function(){var a="Storage:"+this.getName();Ho(this)&&(a+=" ["+Bo(this)+"]");return a};function Tp(a,b,c){Sp.call(this,a,b,c)}D(Tp,Sp);Tp.prototype.Wc=function(a){return new gp(this,this.h,a)};Tp.prototype.open=function(a,b,c,d){return this.i.open(a,b,c,d)};Tp.prototype.map=function(a,b){return this.i.map(a,b)};function Up(a,b,c,d){Nn.call(this,a,b,c,d);this.l=null}D(Up,Nn);g=Up.prototype;g.logger=R("ydn.db.core.req.IDBCursor");g.td=function(a){(a=a.target.result)?this.gb(a.key,a.primaryKey,a.value):this.gb()};
g.openCursor=function(a,b){function c(a,b,c){p.l=n;p.l.onsuccess=C(p.td,p);p.gb(a,p.j?b:void 0,c);n=null}var d=this+" opening ";null!=a&&(d+="{"+a,d=null!=b?d+(";"+b+"}"):d+"}");S(this.logger,d);var e=this.Y,d=this.n.objectStore(this.X),f=x(this.Wa)?d.index(this.Wa):null;if(t(a))var h=f?!t(b):!0,k=e?e.lower:void 0,l=e?e.upper:void 0,m=e?!!e.lowerOpen:!1,e=e?!!e.upperOpen:!1,e=nn(this.reverse?new Cl(k,a,m,h):new Cl(a,l,h,e));var n;this.Vc?f?n=null!=this.hb?f.openKeyCursor(e,this.hb):null!=e?f.openKeyCursor(e):
f.openKeyCursor():n=null!=this.hb?d.openCursor(e,this.hb):null!=e?d.openCursor(e):d.openCursor():f?n=null!=this.hb?f.openCursor(e,this.hb):null!=e?f.openCursor(e):f.openCursor():n=null!=this.hb?d.openCursor(e,this.hb):null!=e?d.openCursor(e):d.openCursor();var p=this;n.onerror=function(a){var b=n.error;a.preventDefault();Qn(p,b)};null!=a?n.onsuccess=function(d){if(d=d.target.result){var e=Mn.cmp(d.key,a),f=p.reverse?-1:1;if(e==f)c(d.key,d.primaryKey,d.value);else if(e==-f)d["continue"](a);else if(null!=
b)if(Mn.cmp(d.primaryKey,b)==f)c(d.key,d.primaryKey,d.value);else d["continue"]();else d["continue"]()}else c()}:(p.l=n,p.l.onsuccess=C(p.td,p))};g.Ld=function(){return!!this.l};g.update=function(a){var b=this.l.result;if(b){var c=new P;a=b.update(a);a.onsuccess=function(a){c.callback(a.target.result)};a.onerror=function(a){a.preventDefault();c.I(a)};return c}throw new oo("cursor gone");};
g.clear=function(){var a=this.l.result;if(a){var b=new P,a=a["delete"]();a.onsuccess=function(){b.callback(1)};a.onerror=function(a){a.preventDefault();b.I(a)};return b}throw new oo("cursor gone");};g.advance=function(a){var b=this.l.result;if(1==a)b["continue"]();else b.advance(a)};
g.qd=function(a){var b=this.l.result,c=Mn.cmp(a,b.primaryKey);if(c!=(this.reverse?-1:1))throw new Xg('continuing primary key "'+a+'" must '+(this.reverse?"lower":"higher")+' than current primary key "'+b.primaryKey+'"');var d=this;this.l.onsuccess=function(e){if(b=e.target.result)if(c=Mn.cmp(b.primaryKey,a),0==c||1==c&&!d.reverse||-1==c&&d.reverse)d.l.onsuccess=C(d.td,d),d.gb(b.key,d.j?b.primaryKey:void 0,b.value);else b["continue"]();else d.l.onsuccess=C(d.td,d),d.gb()};b["continue"]()};
g.ic=function(a){var b=this.l.result;if(null!=a)b["continue"](a);else b["continue"]()};g.B=function(){Up.m.B.call(this);this.l=null};g.toString=function(){return"IDB"+Up.m.toString.call(this)};function Vp(a,b,c,d,e,f){P.call(this,e,f);this.s=a;this.g=[];this.G=!!b;this.Da=!!c;this.Ta=!!d;for(b=this.V=0;b<a.length;b++)a[b].M(C(this.R,this,b,!0),C(this.R,this,b,!1));0!=a.length||this.G||this.callback(this.g)}D(Vp,P);Vp.prototype.R=function(a,b,c){this.V++;this.g[a]=[b,c];this.h||(this.G&&b?this.callback([a,c]):this.Da&&!b?this.I(c):this.V==this.s.length&&this.callback(this.g));this.Ta&&!b&&(c=null);return c};Vp.prototype.I=function(a){Vp.m.I.call(this,a);for(a=0;a<this.s.length;a++)xg(this.s[a])};
function Wp(a){return(new Vp(a,!1,!0)).K(function(a){for(var c=[],d=0;d<a.length;d++)c[d]=a[d][1];return c})};function Xp(a,b){this.g=b}D(Xp,wo);g=Xp.prototype;g.logger=R("ydn.db.crud.req.IndexedDb");g.sd=function(a,b){function c(e){var f=a.g.objectStore(b[e]).count();f.onsuccess=function(f){d[e]=f.target.result;e++;e==b.length?W(a,d):c(e)};f.onerror=function(b){b.preventDefault();W(a,f.error,!0)}}var d=[];0==b.length?W(a,[]):c(0)};
g.ub=function(a,b,c,d,e,f){function h(s){if(null==e[s])if(S(n.logger,"empty object at "+s+" of "+e.length),l++,l==e.length)W(a,k,m);else{var z=s+10;z<e.length&&h(z)}var E,z=e[s];E=f&&null!=f[s]?b?r.put(z,f[s]):r.add(z,f[s]):b?r.put(z):r.add(z);E.onsuccess=function(b){l++;k[s]=b.target.result;l==e.length?W(a,c?k[0]:k,m):(b=s+10,b<e.length&&h(b))};E.onerror=function(b){l++;var f=E.error;S(n.logger,Y(a)+p+' request to "'+d+'" cause '+f.name+' for object "'+uj(e[s])+'" at index '+s+" of "+e.length+" objects.");
k[s]=f;m=!0;b.preventDefault();l==e.length?W(a,c?k[0]:k,m):(b=s+10,b<e.length&&h(b))}}var k=[],l=0,m=!1,n=this,p=b?"put":"add",r=a.g.objectStore(d);S(this.logger,Y(a)+" "+p+" "+e.length+' objects to store "'+d+'"');if(0<e.length)for(var s=0;10>s&&s<e.length;s++)h(s);else W(a,[])};
g.pf=function(a,b,c){function d(l){var n=c[l],p=n.X,r=a.g.objectStore(p),s;s=null===r.keyPath?r.put(b[l],n.C()):r.put(b[l]);s.onsuccess=function(c){f++;e[l]=c.target.result;f==b.length?W(a,e,h):(c=l+10,c<b.length&&d(c))};s.onerror=function(c){f++;Kh(k.logger,"request result "+c.name+' error when put keys to "'+p+'" for object "'+uj(b[l])+'" at index '+l+" of "+b.length+" objects.");e[l]=s.error;h=!0;c.preventDefault();f==b.length?W(a,e,h):(c=l+10,c<b.length&&d(c))}}var e=[],f=0,h=!1,k=this;S(this.logger,
Y(a)+" putByKeys: of "+b.length+" objects");if(0<b.length)for(var l=0;10>l&&l<b.length;l++)d(l);else W(a,e,h)};
g.qf=function(a,b,c,d,e,f){function h(){var a={},b=e.indexOf("\n",n),d=!1,s;-1==b?(d=!0,s=e.substring(n)):(s=e.substring(n,b),n=b+1);for(var b=s.split(f),K=0;K<p.length;K++){var V=b[K];r[K]&&(r[K]==op?V=Ha(V,'"'):"INTEGER"==r[K]?V=parseInt(V,10):"NUMERIC"==r[K]&&(V=parseFloat(V)));a[p[K]]=V}var ua=l.put(a);ua.onsuccess=function(a){m.push(a.target.result);d?c(m):h()};ua.onerror=function(a){"DataError"==a.name&&(a=new lo(k+": "+s.substring(0,70)));a.preventDefault();c(ua.error,!0)}}var k=Z(this.g,d),
l=a.objectStore(d),m=[],n=e.indexOf("\n"),p=e.substr(0,n).split(f),r=[];for(a=0;a<p.length;a++){var s=Pn(k,p[a]);s?r[a]=s.type:p[a]==k.keyPath&&(r[a]=k.type)}n++;S(this.logger,b+" Loading data  of "+p.length+"-fields record to "+d);h()};
g.Xd=function(a,b,c){var d=a.g.objectStore(b);S(this.logger,Y(a)+" clearById: "+b+" "+c);var e=d.openCursor(qn.only(c));e.onsuccess=function(b){if(b=b.target.result){var c=b["delete"]();c.onsuccess=function(){W(a,1)};c.onerror=function(){W(a,c.error,!0)}}else W(a,0)};e.onerror=function(b){b.preventDefault();W(a,e.error,!0)}};
g.sf=function(a,b){function c(k){k++;if(k>=b.length)0<h.length?W(a,h,!0):W(a,d);else{b[k].X!=e&&(e=b[k].X,f=a.g.objectStore(e));var l=f["delete"](b[k].C());l.onsuccess=function(){d++;c(k)};l.onerror=function(a){a.preventDefault();h[k]=l.error;c(k)}}}var d=0,e,f;S(this.logger,Y(a)+" removeByKeys: "+b.length+" keys");var h=[];c(-1)};
g.Yd=function(a,b,c){var d=a.g.objectStore(b),e=d.count(c);S(this.logger,Y(a)+" clearByKeyRange: "+b+" "+c);e.onsuccess=function(b){var e=b.target.result,k=d["delete"](c);k.onsuccess=function(){W(a,e)};k.onerror=function(){W(a,k.error,!0)}};e.onerror=function(b){b.preventDefault();W(a,e.error,!0)}};g.we=function(a,b,c){var d=a.g.objectStore(b);S(this.logger,Y(a)+" "+b+" "+c);var e=d["delete"](c);e.onsuccess=function(){W(a,void 0)};e.onerror=function(b){b.preventDefault();W(a,e.error,!0)}};
g.rf=function(a,b,c,d){var e=a.g.objectStore(b).index(c);S(this.logger,Y(a)+" clearByIndexKeyRange: "+b+":"+c+" "+d);var f=[],h=e.openCursor(d),k=0;h.onsuccess=function(b){var c=b.target.result;if(c){var d=c["delete"]();d.onsuccess=function(){k++;c["continue"]()};d.onerror=function(a){f.push(d.error);a.preventDefault();c["continue"]()}}else 0<f.length?W(a,f,!0):W(a,k)};h.onerror=function(b){b.preventDefault();W(a,h.error,!0)}};
g.pd=function(a,b){var c=b.length,d=0;S(this.logger,Y(a)+" clearByStores: "+b);for(var e=0;e<c;e++){var f=a.g.objectStore(b[e]).clear();f.onsuccess=function(){d++;d==c&&W(a,d)};f.onerror=function(b){d++;b.preventDefault();d==c&&W(a,f.error,!0)}}};
g.Cd=function(a,b,c){var d=this;S(this.logger,Y(a)+b+":"+c);var e=a.g.objectStore(b),f=e.get(c);f.onsuccess=function(b){S(d.logger,Y(a)+" record "+c+(null!=b.target.result?" ":" not ")+" exists.");var f=b.target.result;if(!e.keyPath&&0==e.indexNames.length&&ub&&x(f)&&0<=f.indexOf(";base64,")){'"'==f.charAt(0)&&'"'==f.charAt(f.length-1)&&(f=f.substr(1,f.length-2));f=f.split(";base64,");b=f[0].split(":")[1];for(var f=window.atob(f[1]),l=f.length,m=new Uint8Array(l),n=0;n<l;++n)m[n]=f.charCodeAt(n);
W(a,new Blob([m.buffer],{type:b}))}else W(a,b.target.result)};f.onerror=function(b){b.preventDefault();W(a,f.error,!0)}};
g.hf=function(a,b,c){function d(b){if(null==c[b])if(f++,e[b]=void 0,f==k)W(a,e);else{var m=b+10;m<k&&d(m)}var n;n=h.get(c[b]);n.onsuccess=function(c){f++;e[b]=c.target.result;f==k?W(a,e):(c=b+10,c<k&&d(c))};n.onerror=function(b){f++;b.preventDefault();W(a,n.error,!0)}}var e=[];e.length=c.length;var f=0,h=a.g.objectStore(b),k=c.length;S(this.logger,Y(a)+" "+b+":"+k+" ids");if(0<k)for(b=0;10>b&&b<k;b++)d(b);else W(a,[])};
g.jf=function(a,b){function c(f){var k=b[f],l=a.g.objectStore(k.X).get(k.C());l.onsuccess=function(k){e++;d[f]=k.target.result;e==b.length?W(a,d):(k=f+10,k<b.length&&c(k))};l.onerror=function(b){e++;b.preventDefault();W(a,l.error,!0)}}var d=[];d.length=b.length;var e=0;S(this.logger,Y(a)+" "+b.length+" ids");if(0<b.length)for(var f=0;10>f&&f<b.length;f++)c(f);else W(a,[])};
g.Gc=function(a,b,c,d,e){if(d&&e)throw new Wg("unique count not available in IndexedDB");e=a.g.objectStore(b);b=Y(a)+" "+b+(d?":"+d:"")+(c?":"+vj(c):"");S(this.logger,b);var f;null!=d?(d=e.index(d),f=null!=c?d.count(c):d.count()):f=null!=c?e.count(c):e.count();f.onsuccess=function(b){W(a,b.target.result)};f.onerror=function(b){b.preventDefault();W(a,f.error,!0)}};
g.Bb=function(a,b,c,d,e,f,h,k,l,m){var n=[],p=a.g.objectStore(c),r=k?l?"prevunique":"prev":l?"nextunique":"next";c=Y(a)+" "+b+" "+c+(d?":"+d:"")+(e?vj(e):"");k&&(c+=" reverse");l&&(c+=" unique");if(m&&t(m[0])){l=d?!t(m[1]):!0;var s=m[0],y=e?e.lower:void 0,z=e?e.upper:void 0,E=e?!!e.lowerOpen:!1;e=e?!!e.upperOpen:!1;e=nn(k?new Cl(y,s,E,l):new Cl(s,z,l,e));c+=" starting from "+vj(m[0]);t(m[1])&&(c+=", "+vj(m[1]))}S(this.logger,c);var H;H=1==b||2==b||3==b?d?p.index(d).openKeyCursor(e,r):p.openCursor(e,
r):d?p.index(d).openCursor(e,r):p.openCursor(e,r);var K=!1;H.onsuccess=function(c){if(c=c.target.result){if(!K){if(0<h){K=!0;c.advance(h);return}if(m&&d&&t(m[0]))if(t(m[1])){var e=Mn.cmp(c.key,m[0]),l=k?-1:1;if(0==e){e=Mn.cmp(c.primaryKey,m[1]);if(0==e){K=!0;c["continue"]();return}if(e==l)K=!0;else{c["continue"]();return}}else K=!0}else K=!0;else K=!0}1==b?n.push(c.key):2==b?n.push(c.primaryKey):3==b?(l={},d&&(l[d]=c.key),p.keyPath?l[p.keyPath]=c.primaryKey:l._ROWID_=c.primaryKey,n.push(l)):4==b?
n.push(c.value):n.push([c.key,c.primaryKey,c.value]);if(n.length<f)c["continue"]();else m&&(m[0]=Sn(c.key),m[1]=Sn(c.primaryKey)),W(a,n)}else m&&(m[0]=void 0,m[1]=void 0),W(a,n)};H.onerror=function(b){b.preventDefault();W(a,H.error,!0)}};function Yp(a,b){this.g=b}D(Yp,Xp);Yp.prototype.logger=R("ydn.db.core.req.IndexedDb");Yp.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new Up(a,b,c,d)};function Zp(){this.g=!1}Zp.prototype.g=!1;Zp.prototype.state=function(){return this.g};function $p(a,b,c,d){Nn.call(this,a,b,c,d);this.u=this.i=this.g=void 0;this.s=this.l=null;this.G=new Zp;this.ae=this.Qb=null}D($p,Nn);g=$p.prototype;g.logger=R("ydn.db.core.req.SimpleCursor");g.Ld=function(){return!!this.n};g.update=function(a){aq(this.ae,this.ib(),a);return Hg()};g.advance=function(a){function b(b){d++;if(!b||d>=a)return bq(c,b)}var c=this,d=this.l?-1:0;this.reverse?cq(this.Qb,b,this.l):dq(this.Qb,b,this.l)};
g.ic=function(a){if(null!=a){var b=this,c=new eq(a),d=function(c){b.l=c;if(!c)return bq(b,c);var d=un(c.value.key,a);if(b.reverse){if(1!=d)return bq(b,c)}else if(-1!=d)return bq(b,c)};this.reverse?cq(this.Qb,d,c):dq(this.Qb,d,c)}else this.advance(1)};function fq(a){setTimeout(function(){a.G.state()?(a.G.g=!1,a.gb(a.g,a.i,a.u),fq(a)):(a.s(),a.s=null)},4)}
function bq(a,b){if(a.l=b){var c=b.value;if(a.Y)if(a.reverse||null==a.Y.upper)a.reverse&&null!=a.Y.lower&&(d=un(c.key,a.Y.lower),-1==d||0==d&&a.Y.lowerOpen)&&(a.l=null);else{var d=un(c.key,a.Y.upper);if(1==d||0==d&&a.Y.upperOpen)a.l=null}if(a.l){if(a.unique&&null!=a.g&&null!=c.key&&0==un(a.g,c.key))return;a.g=c.key;a.i=a.j?c.g:a.g;4==a.N&&(a.Vc?a.u=a.i:a.u=a.ae.rb(null,a.i))}}a.l||(a.g=void 0,a.i=void 0,a.u=void 0);return a.G.g=!0}
g.openCursor=function(a,b){var c=null;if(this.Y)if(this.reverse){var d=this.j?"\uffff":void 0;null!=this.Y.upper&&(c=new eq(this.Y.upper,d))}else null!=this.Y.lower&&(c=new eq(this.Y.lower));null!=a&&(c=this.j?new eq(a,b):new eq(a));this.s=this.n.L(function(b){function d(b){var e=b.value,f=e.key;if(b&&null!=f)if(null!=a){if(0==gq(c,e))return}else if(this.Y&&(!this.reverse&&this.Y.lowerOpen&&null!=this.Y.lower&&(e=un(f,this.Y.lower),0==e)||this.reverse&&this.Y.upperOpen&&null!=this.Y.upper&&(e=un(f,
this.Y.upper),0==e)))return;return bq(this,b)}this.ae=hq(b,this.X);this.Qb=iq(this.ae,this.Wa);this.reverse?cq(this.Qb,C(d,this),c):dq(this.Qb,C(d,this),c);fq(this)},this)};g.clear=function(){throw new Vg;};g.qd=function(){throw new Vg;};g.toString=function(){return"Simple"+$p.m.toString.call(this)};function jq(a,b,c){a=["ydn.db",a];t(b)&&(a.push(b),t(c)&&(a.push(c),t(void 0)&&a.push(yn(void 0))));return a.join("^|")};function eq(a,b){this.key=a;this.g=b}eq.prototype.toString=function(){return"ydn.db.con.simple.Node("+this.key+(null!=this.g?", "+this.g+")":")")};function gq(a,b){var c=un(a.key,b.key);return 0===c?null!=a.g?null!=b.g?un(a.g,b.g):1:null!=b.g?-1:0:c};function kq(a){this.cb=a||lq}function lq(a,b){return String(a)<String(b)?-1:String(a)>String(b)?1:0}g=kq.prototype;g.ua=null;g.cb=null;g.wb=null;g.vb=null;
g.add=function(a){if(null==this.ua)return this.vb=this.wb=this.ua=new mq(a),!0;var b=null;nq(this,function(c){var d=null,e=this.cb(c.value,a);0<e?(d=c.left,null==c.left&&(b=new mq(a,c),c.left=b,c==this.wb&&(this.wb=b))):0>e&&(d=c.right,null==c.right&&(b=new mq(a,c),c.right=b,c==this.vb&&(this.vb=b)));return d});b&&(nq(this,function(a){a.count++;return a.parent},b.parent),oq(this,b.parent));return!!b};
g.remove=function(a){var b=null;nq(this,function(c){var d=null,e=this.cb(c.value,a);0<e?d=c.left:0>e?d=c.right:(b=c.value,pq(this,c));return d});return b};g.clear=function(){this.vb=this.wb=this.ua=null};g.contains=function(a){var b=!1;nq(this,function(c){var d=null,e=this.cb(c.value,a);0<e?d=c.left:0>e?d=c.right:b=!0;return d});return b};
g.indexOf=function(a){var b=-1,c=0;nq(this,function(d){var e=this.cb(d.value,a);if(0<e)return d.left;d.left&&(c+=d.left.count);if(0>e)return c++,d.right;b=c;return null});return b};g.ja=function(){return this.ua?this.ua.count:0};g.ta=function(){var a=[];qq(this,function(b){a.push(b)});return a};
function qq(a,b){if(a.ua){var c,d=c=rq(a);for(c=c.left?c.left:c;null!=d;)if(null!=d.left&&d.left!=c&&d.right!=c)d=d.left;else{if(d.right!=c&&b(d.value))break;var e=d,d=null!=d.right&&d.right!=c?d.right:d.parent;c=e}}}function nq(a,b,c){for(c=c?c:a.ua;c&&null!=c;)c=b.call(a,c)}
function oq(a,b){nq(a,function(a){var b=a.left?a.left.height:0,e=a.right?a.right.height:0;1<b-e?(a.left.right&&(!a.left.left||a.left.left.height<a.left.right.height)&&sq(this,a.left),tq(this,a)):1<e-b&&(a.right.left&&(!a.right.right||a.right.right.height<a.right.left.height)&&tq(this,a.right),sq(this,a));b=a.left?a.left.height:0;e=a.right?a.right.height:0;a.height=Math.max(b,e)+1;return a.parent},b)}
function sq(a,b){uq(b)?(b.parent.left=b.right,b.right.parent=b.parent):vq(b)?(b.parent.right=b.right,b.right.parent=b.parent):(a.ua=b.right,a.ua.parent=null);var c=b.right;b.right=b.right.left;null!=b.right&&(b.right.parent=b);c.left=b;b.parent=c;c.count=b.count;b.count-=(c.right?c.right.count:0)+1}
function tq(a,b){uq(b)?(b.parent.left=b.left,b.left.parent=b.parent):vq(b)?(b.parent.right=b.left,b.left.parent=b.parent):(a.ua=b.left,a.ua.parent=null);var c=b.left;b.left=b.left.right;null!=b.left&&(b.left.parent=b);c.right=b;b.parent=c;c.count=b.count;b.count-=(c.left?c.left.count:0)+1}
function pq(a,b){if(null!=b.left||null!=b.right){var c=null,d;if(null!=b.left){d=wq(a,b.left);nq(a,function(a){a.count--;return a.parent},d);if(d!=b.left){if(d.parent.right=d.left)d.left.parent=d.parent;d.left=b.left;d.left.parent=d;c=d.parent}d.parent=b.parent;d.right=b.right;d.right&&(d.right.parent=d);b==a.vb&&(a.vb=d)}else{d=rq(a,b.right);nq(a,function(a){a.count--;return a.parent},d);if(d!=b.right){if(d.parent.left=d.right)d.right.parent=d.parent;d.right=b.right;d.right.parent=d;c=d.parent}d.parent=
b.parent;d.left=b.left;d.left&&(d.left.parent=d);b==a.wb&&(a.wb=d)}d.count=b.count;uq(b)?b.parent.left=d:vq(b)?b.parent.right=d:a.ua=d;oq(a,c?c:d)}else nq(a,function(a){a.count--;return a.parent},b.parent),uq(b)?(b.parent.left=null,b==a.wb&&(a.wb=b.parent),oq(a,b.parent)):vq(b)?(b.parent.right=null,b==a.vb&&(a.vb=b.parent),oq(a,b.parent)):a.clear()}function rq(a,b){if(!b)return a.wb;var c=b;nq(a,function(a){var b=null;a.left&&(b=c=a.left);return b},b);return c}
function wq(a,b){if(!b)return a.vb;var c=b;nq(a,function(a){var b=null;a.right&&(b=c=a.right);return b},b);return c}function mq(a,b){this.value=a;this.parent=b?b:null;this.count=1}mq.prototype.left=null;mq.prototype.right=null;mq.prototype.height=1;function vq(a){return!!a.parent&&a.parent.right==a}function uq(a){return!!a.parent&&a.parent.left==a};function xq(a){this.cb=a||lq}D(xq,kq);function dq(a,b,c){if(a.ua){var d;if(c instanceof mq)d=c;else if(c){if(nq(a,function(a){var b=null;0<this.cb(a.value,c)?(b=a.left,d=a):0>this.cb(a.value,c)?b=a.right:d=a;return b}),!d)return}else d=rq(a);a=d;for(var e=d.left?d.left:d;null!=a;)if(null!=a.left&&a.left!=e&&a.right!=e)a=a.left;else{if(a.right!=e&&b(a))return;var f=a;a=null!=a.right&&a.right!=e?a.right:a.parent;e=f}b(null)}}
function cq(a,b,c){if(a.ua){var d;if(c instanceof mq)d=c;else if(c){if(nq(a,C(function(a){var b=null;0<this.cb(a.value,c)?b=a.left:(0>this.cb(a.value,c)&&(b=a.right),d=a);return b},a)),!d)return}else d=wq(a);a=d;for(var e=d.right?d.right:d;null!=a;)if(null!=a.right&&a.right!=e&&a.left!=e)a=a.right;else{if(a.left!=e&&b(a))return;var f=a;a=null!=a.left&&a.left!=e?a.left:a.parent;e=f}b(null)}};function yq(a,b,c){this.l=a;this.storage=b;this.h=c;this.g={};a=this.h.keyPath;this.i=v(a)?a.join(","):a||"_ROWID_";this.g[this.i]=null;this.j=jq(this.l,this.h.getName(),this.i)+"^|"}
function iq(a,b){var c=b||a.i;if(!a.g[c]){a.g[c]=new xq(gq);for(var d=a.storage.length,e=0;e<d;e++){var f=a.storage.key(e);if(null!==f&&qa(f,a.j)){var h=Bn(f.substr(a.j.length));if(c==a.i)a.g[c].add(new eq(h));else{var k=a.storage.getItem(f);if(null!==k)if(f=Pn(a.h,c),k=tj(k),k=pp(f,k),f.multiEntry){if(v(k))for(f=0;f<k.length;f++)a.g[c].add(new eq(k[f],h))}else a.g[c].add(new eq(k,h))}}}}return a.g[c]}
function zq(a,b,c){for(var d in a.g){var e=a.g[d];if(e)if(d==a.i)e.remove(new eq(b));else{var f=Pn(a.h,d),f=wn(c,f.keyPath);e.remove(new eq(b,f))}}}function Aq(a){for(var b in a.g){var c=a.g[b];c&&c.clear()}a.g={}}
function aq(a,b,c,d){if(null==b&&(a.h.keyPath&&(b=ap(a.h,c)),a.h.autoIncrement&&null==b)){b=a.j+yn(void 0);var e=tj(a.storage.getItem(b));e.key_count||(e.key_count=0);e.key_count++;a.storage.setItem(b,vj(e));b=e.key_count}d&&(d=null!==a.storage.getItem(a.j+yn(b)));if(d)return null;a.storage.setItem(a.j+yn(b),vj(c));d=b;for(var f in a.g)if(e=a.g[f])if(f==a.i)e.add(new eq(d));else{var h=Pn(a.h,f),h=wn(c,h.keyPath);null!=h&&e.add(new eq(d,h))}return b}
function Bq(a,b){var c=a.j+yn(b),d=a.storage.getItem(c);if(null===d)return 0;a.storage.removeItem(c);c=tj(d);zq(a,b,c);return 1}g=yq.prototype;g.clear=function(){Aq(this);Cq(this)};g.rb=function(a,b){if(a&&a!=this.i)throw"impl";var c=this.storage.getItem(this.j+yn(b)),d=void 0;if(null!==c)for(var d=tj(c),c=0,e=this.h.g.length;c<e;c++){var f=this.h.index(c);if("DATE"==f.type){var h=pp(f,d);h&&qp(f,d,new Date(h))}}return d};g.getName=function(){return this.h.getName()};
function Dq(a,b,c){b=b||a.i;a=iq(a,b);var d=null,e=null,f=0,h=!1,k=!1;null!=c&&(null!=c.lower&&(d=new eq(c.lower)),null!=c.upper&&(e=new eq(c.upper)),h=c.lowerOpen,k=c.upperOpen);dq(a,function(a){if(null!=a&&(a=a.value,!h||null==d||0!=un(a.key,d.key))){if(null!=e&&(a=un(a.key,e.key),1===a||0===a&&k))return!0;f++}},d);return f}
function Cq(a,b){var c=iq(a,a.i),d=null,e=null,f=0,h=[],k=[],l=!1,m=!1;null!=b&&(null!=b.lower&&(d=new eq(b.lower)),null!=b.upper&&(e=new eq(b.upper)),l=b.lowerOpen,m=b.upperOpen);dq(c,function(b){if(null!=b&&(b=b.value,!l||null==d||0!=gq(b,d))){if(null!=e){var c=gq(b,e);if(1===c||0===c&&m)return!0}var c=a.j+yn(b.key),r=a.storage.getItem(c);null!==r&&(a.storage.removeItem(c),f++,10>h.length&&(h.push(b.key),k.push(tj(r))))}},d);if(10>h.length)for(c=0;c<h.length;c++)zq(a,h[c],k[c]);else Aq(a);return f}
g.nc=function(a,b,c,d,e,f,h,k){function l(b){if(b&&(z++,!(z<f))){var c=b.value;if(d){if(H&&null!=y&&(b=p?gq(c,y):un(c.key,y.key),0==b))return;if(null!=s&&(b=p?gq(c,s):un(c.key,s.key),-1==b||0==b&&E))return k&&(k[0]=void 0,k[1]=void 0),!0}else{if(E&&null!=s&&(b=p?gq(c,s):un(c.key,s.key),0==b))return;if(null!=y&&(b=p?gq(c,y):un(c.key,y.key),1==b||0==b&&H))return k&&(k[0]=void 0,k[1]=void 0),!0}b=c.key;if(!h||!r||null==n||0!=un(n,b)){c=r?c.g:b;if(2==a)m.push(c);else if(1==a)m.push(b);else if(3==a)m.push([b,
c]);else if(4==a){var l=V.rb(null,c);m.push(l)}else m.push([b,c,V.rb(null,c)]);k&&(k[0]=b,k[1]=c)}n=b;if(t(e)&&m.length>=e)return!0}}var m=[],n,p=!!k&&null!=k[0];b=b||this.i;var r=b!=this.i;b=iq(this,b);var s=null,y=null;t(f)||(f=0);var z=-1,E=!1,H=!1;null!=c&&(null!=c.lower&&(s=r&&d?new eq(c.lower,"\uffff"):new eq(c.lower)),null!=c.upper&&(y=r&&!d?new eq(c.upper,"\uffff"):new eq(c.upper)),E=!!c.lowerOpen,H=!!c.upperOpen);if(p){d?H=!0:E=!0;c=k[0];var K=t(k[1])?k[1]:"\uffff";d?y=r?new eq(c,K):new eq(c):
s=r?new eq(c,K):new eq(c)}var V=this;d?cq(b,l,y):dq(b,l,s);return m};g.za=function(a,b,c,d,e){return this.nc(2,a,b,c,d,e)};g.toString=function(){return"ydn.db.con.simple.Store:"+this.l+":"+this.h.getName()};function Eq(){this.clear()}g=Eq.prototype;g.xe=function(){return this};g.setItem=function(a,b){t(this.g[a])||(this.keys.push(a.toString()),this.length=this.keys.length);this.g[a]=b};g.getItem=function(a){return t(this.g[a])?this.g[a]:null};g.removeItem=function(a){delete this.g[a];db(this.keys,a.toString());this.length=this.keys.length};g.length=0;g.key=function(a){a=this.keys[a];return t(a)?this.g[a]:null};g.clear=function(){this.g={};this.keys=[];this.length=0};function Fq(a){this.n=a||new Eq;this.l={}}function hq(a,b){var c=Z(a.g,b);if(c)a.l[b]||(a.l[b]=new yq(a.i,a.j,c));else throw new Xg('store name "'+b+'" not found.');return a.l[b]}Fq.prototype.bb=function(a){var b=this;setTimeout(function(){var c=jq(b.i),c=b.j.getItem(c),c=new Ep(c);a(c)},10)};function Gq(a,b){this.h=a;this.g=b}Gq.prototype.L=function(a,b){var c=this.h;setTimeout(function(){a.call(b,c)},4);var d=this;return function(){d.g("complete",null);d.g=null;d.h=null}};function Hq(a,b){this.g=b}D(Hq,wo);g=Hq.prototype;g.logger=R("ydn.db.crud.req.SimpleStore");g.pf=function(a,b,c){this.ub(a,!0,!1,null,b,c)};
g.ub=function(a,b,c,d,e,f){S(this.logger,Y(a)+" "+(b?"put":"add")+"Object"+(c?"":"s "+e.length+" objects"));var h=a.g.L(function(k){var l;if(c)l=hq(k,d),k=f?f[0]:void 0,k=aq(l,k,e[0],!b),null!=k?W(a,k):(l=uj(k),l=new ko(l),W(a,l,!0));else{for(var m=d,n=[],p=!1,r=f||{},s=0;s<e.length;s++){var y;d?y=r[s]:(m=f[s],y=m.C(),m=m.X);l&&l.getName()==m||(l=hq(k,m));y=aq(l,y,e[s],!b);null!=y?n.push(y):(p=!0,n.push(new ko))}W(a,n,p)}h();h=null},this)};g.qf=function(){throw new Vg("putData");};
g.Cd=function(a,b,c){var d=a.g.L(function(e){e=hq(e,b).rb(null,c);W(a,e);d();d=null},this)};function Iq(a,b,c,d){var e=b.g.L(function(a){for(var h=[],k=c,l,m=0;m<d.length;m++){var n=d[m];n instanceof uo&&(k=n,n=k.C(),k=k.X);l&&l.getName()==k||(l=hq(a,k));n=l.rb(null,n);h[m]=n}W(b,h,!1);e();e=null},a)}g.hf=function(a,b,c){Iq(this,a,b,c)};g.jf=function(a,b){Iq(this,a,null,b)};
g.Xd=function(a,b,c){var d=Y(a)+" removeById "+b+" "+c;S(this.logger,d);var e=this,f=a.g.L(function(h){h=Bq(hq(h,b),c);T(e.logger,"success "+d+(0==h?" [not found]":""));W(a,h);f();f=null},this)};g.sf=function(a,b){S(this.logger,Y(a)+" removeByKeys "+b.length+" keys");var c,d=0,e=a.g.L(function(f){for(var h=0;h<b.length;h++){var k=b[h].X,l=b[h].C();c&&c.getName()==k||(c=hq(f,k));d+=Bq(c,l)}W(a,d);e();e=null},this)};g.we=function(a,b,c){this.Yd(a,b,c)};
g.Yd=function(a,b,c){var d=Y(a)+" removeByKeyRange "+(c?vj(c):"");S(this.logger,d);var e=this,f=a.g.L(function(h){h=Cq(hq(h,b),c);T(e.logger,d+" deleted "+h+" records.");W(a,h);f();f=null},this)};g.rf=function(a,b,c,d){var e=Y(a)+" removeByIndexKeyRange "+(d?vj(d):"");S(this.logger,e);var f=a.g.L(function(e){e=hq(e,b);for(var k=e.za(c,d),l=k.length,m=0;m<l;m++)Bq(e,k[m]);W(a,l);f();f=null},this)};
g.pd=function(a,b){var c=Y(a)+" clearByStores";S(this.logger,c);var d=a.g.L(function(e){for(var f=0;f<b.length;f++)hq(e,b[f]).clear();T(this.logger,"success "+c);W(a,b.length);d();d=null},this)};g.sd=function(a,b){var c=a.g.L(function(d){for(var e=[],f=0;f<b.length;f++){var h=hq(d,b[f]);e.push(Dq(h))}W(a,e);c();c=null},this)};
g.Gc=function(a,b,c,d){var e=Y(a)+" count"+(null!=d?"Index":"")+(null!=c?"KeyRange":"Store");S(this.logger,e);var f=a.g.L(function(h){h=Dq(hq(h,b),d,c);T(this.logger,"success "+e);W(a,h);f();f=null},this)};g.Bb=function(a,b,c,d,e,f,h,k,l,m){var n=Y(a)+" "+c+" "+(e?uj(e):"");S(this.logger,n);var p=a.g.L(function(r){r=hq(r,c).nc(b,d,e,k,f,h,l,m);T(this.logger,n+" "+r.length+" records found.");W(a,r);p();p=null},this)};function Jq(a,b){this.g=b}D(Jq,Hq);Jq.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new $p(a,b,c,d)};function Kq(a,b,c,d){Nn.call(this,a,b,c,d);this.S=null;this.l=this.s=void 0}D(Kq,Nn);g=Kq.prototype;g.logger=R("ydn.db.core.req.WebsqlCursor");g.ib=function(){return this.l};g.init=function(a,b,c,d,e){Kq.m.init.call(this,a,b,c,d,e);this.S=x(b)?Pn(this.h,b):null};g.U=function(){return this.G};function Lq(a,b){a.s=void 0;a.l=void 0;a.G=void 0;if(t(b))if(B(b)){var c=rp(b[a.h.j],a.h.type);a.l=c;if(a.j){var d=Pn(a.h,a.Wa);a.s=rp(b[a.Wa],d.type)}else a.s=c;a.G=a.Vc?c:Mq(b,a.h)}else a.G=b}
function Nq(a,b,c){Pn(a.h,a.Wa);var d=[],e=a.Wa,f=a.Y,h=a.s;if(null!=f){var k=f.lower,l=f.upper,m=f.lowerOpen,n=f.upperOpen;a.reverse?l=null!=l&&-1==un(l,h)?l:h:k=null!=k&&1==un(k,h)?k:h;null!=k&&null!=l?f=Cl.bound(k,l,!!m,!!n):f=null!=k?qn.lowerBound(k,!!m):qn.upperBound(l,!!n)}else f=a.reverse?qn.upperBound(h):qn.lowerBound(h);e=up(a.h,d,a.N,e,f,a.reverse,a.unique);c=a.reverse?qn.upperBound(c,!1):qn.lowerBound(c,!1);c=up(a.h,d,a.N,a.h.j,c,a.reverse,a.unique);e.$=e.$?e.$+(" AND "+c.$):c.$;c="SELECT "+
e.select+" FROM "+e.mc+(e.$?" WHERE "+e.$:"")+(e.group?" GROUP BY "+e.group:"")+" ORDER BY "+e.Kb;c+=" LIMIT 1";S(a.logger,a+": continuePrimary:  SQL: "+c+" : "+vj(d));a.n.executeSql(c,d,function(c,d){0<d.rows.length?Lq(a,d.rows.item(0)):Lq(a);b.call(a,a.s,a.l,a.G);b=null},function(c,d){Kh(a.logger,"get error: "+d.message);Qn(a,d);Lq(a);b.call(a,a.l,a.s,a.G);b=null;return!1})}
function Oq(a,b,c,d,e,f){var h=!d;d=[];a.j&&null!=f&&null!=c?c=xp(a.h,a.N,d,a.S.getName(),a.Y,c,h,f,a.reverse,a.unique):null!=c?(f=a.S?a.S.getName():null,c=wp(a.h,a.N,d,f,a.Y,a.reverse,a.unique,c,h)):(c=tp(a.h,d,a.N,a.j?a.S.j:a.h.j,a.Y,a.reverse,a.unique),a.j&&(c+=", "+a.h.i+" ASC"));c+=" LIMIT 1";0<e&&(c+=" OFFSET "+e);S(a.logger,a+": continue:  SQL: "+c+" : "+vj(d));a.n.executeSql(c,d,function(c,d){0<d.rows.length?Lq(a,d.rows.item(0)):Lq(a);b.call(a,a.s,a.l,a.G);b=null},function(c,d){Kh(a.logger,
"get error: "+d.message);Qn(a,d);Lq(a);b.call(a,a.l,a.s,a.G);b=null;return!1})}g.Ld=function(){return!!this.n};g.update=function(a){if(!this.Ld())throw new oo;var b=new P,c=this.ib();a=Ap(this.h,a,c);var d="REPLACE INTO "+vp(this.h)+" ("+a.Mf.join(", ")+") VALUES ("+a.rg.join(", ")+")";S(this.logger,this+': update "'+d+'" : '+vj(a.values));this.n.executeSql(d,a.values,function(){b.callback(c)},function(a,c){b.I(c);return!1});return b};
g.advance=function(a){var b=this.s,c=this.l,d=!0;null==this.s||this.j&&null==this.l||(a-=1,d=!1);Oq(this,function(a,d,h){var k=null!=b&&null!=a&&0==un(b,a);if(this.j){var l=null!=d&&null!=c&&0==un(d,c);if(k&&l)throw new Xg("current: "+b+";"+c+" next: "+a+";"+d);}else if(k)throw new Xg("current: "+b+" next: "+a);this.gb(a,d,h)},this.s,d,a,this.l)};g.ic=function(a){null!=a?Oq(this,this.gb,a,!0):this.advance(1)};g.openCursor=function(a,b){Oq(this,this.gb,a,!1,0,b)};
g.clear=function(){if(!this.Ld())throw new oo;var a=new P,b=this.h.j,b="DELETE FROM "+vp(this.h)+" WHERE "+b+" = ?",c=[this.ib()];S(this.logger,this+': clear "'+b+'" : '+vj(c));this.n.executeSql(b,c,function(b,c){a.callback(c.rowsAffected)},function(b,c){a.I(c);return!1});return a};g.qd=function(a){var b=un(a,this.l);if(0==b||1==b&&this.reverse||-1==b&&!this.reverse)throw new Th(this+" to continuePrimaryKey  from "+this.l+" to "+a+" on "+this.hb+" direction is wrong");Nq(this,this.gb,a)};
g.toString=function(){return"WebSql"+Kq.m.toString.call(this)};function Pq(a,b){this.g=b}D(Pq,wo);g=Pq.prototype;g.logger=R("ydn.db.crud.req.WebSql");
function Mq(a,b){if(b.gc&&!b.keyPath&&0==b.g.length&&a._default_){var c=a._default_;if(-1==c.indexOf(";base64,"))return tj(c);'"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substr(1,c.length-2));for(var d=c.split(";base64,"),c=d[0].split(":")[1],d=window.atob(d[1]),e=d.length,f=new Uint8Array(e),h=0;h<e;++h)f[h]=d.charCodeAt(h);return new Blob([f.buffer],{type:c})}c=a._default_?tj(a._default_):{};null!=b.keyPath&&(d=rp(a[b.keyPath],b.type),null!=d&&dp(b,c,d));for(d=0;d<b.g.length;d++)e=b.index(d),
f=e.j,"_default_"==f||e.n||e.multiEntry||"DATE"!=e.type&&!b.gc||(f=rp(a[f],e.type),t(f)&&qp(e,c,f));return c}g.qf=function(){throw new Vg("putData");};
g.ub=function(a,b,c,d,e,f){function h(b,d){if(null==e[b])if(S(m.logger,"empty object at "+b+" of "+e.length),p++,p==e.length)T(m.logger,r+" success "+r),W(a,n,s);else{var E=b+2;E<e.length&&h(E,d)}var H;H=t(f)?Ap(k,e[b],f[b]):Ap(k,e[b]);E=l+vp(k)+" ("+H.Mf.join(", ")+") VALUES ("+H.rg.join(", ")+");";S(m.logger,Y(a)+" SQL: "+E+" PARAMS: "+H.values+" REQ: "+b+" of "+e.length);d.executeSql(E,H.values,function(f,r){function E(b,c){var e="ydn.db.me:"+k.getName()+":"+b.getName(),e=l+Ka(e)+" ("+k.i+", "+
b.i+") VALUES (?, ?)",f=[vn(F,k.type),vn(c,b.type)];S(m.logger,Y(a)+" multiEntry "+e+" "+f);d.executeSql(e,f,function(){},function(a,b){Kh(m.logger,"multiEntry index insert error: "+b.message);return!1})}p++;var F=t(H.key)?H.key:r.insertId;1>r.rowsAffected&&(s=!0,F=new ko(F+" no-op"));for(var Qc=0,hj=k.g.length;Qc<hj;Qc++){var ud=k.index(Qc);if(ud.multiEntry)for(var he=wn(e[b],ud.keyPath),yv=(he?he.length:0)||0,ym=0;ym<yv;ym++)E(ud,he[ym])}c?W(a,F):(n[b]=F,p==e.length?W(a,n,s):(Qc=b+2,Qc<e.length&&
h(Qc,f)))},function(d,f){p++;s=!0;6==f.code?f.name="ConstraintError":Kh(m.logger,"error: "+f.message+" "+r);if(c)W(a,f,!0);else if(n[b]=f,p==e.length)S(m.logger,"success "+r),W(a,n,s);else{var k=b+2;k<e.length&&h(k,d)}return!1})}b=!b;var k=Z(this.g,d),l=b?"INSERT INTO ":"INSERT OR REPLACE INTO ";d=a.g;var m=this,n=[],p=0,r=Y(a)+" inserting "+e.length+" objects.",s=!1;if(0<e.length)for(b=0;2>b&&b<e.length;b++)h(b,d);else T(this.logger,"success"),W(a,[])};
g.pf=function(a,b,c){if(0==c.length)W(a,[]);else{for(var d=[],e=0,f=0,h=this,k=function(k,l){var m=[];S(h.logger,"put "+l.length+" objects to "+k);for(var n=zp(Z(h.g,k)),p=n?void 0:[],r=0;r<l.length;r++)m.push(b[l[r]]),n||p.push(c[l[r]].C());n=co(a);n.M(function(b){for(var c=0;c<l.length;c++)d[l[c]]=b[c];e++;e==f&&W(a,d)},function(){e++;e==f&&W(a,d,!0)});h.ub(n,!1,!1,k,m,p)},l="",m=[],n=[],p=0;p<c.length;p++){var r=c[p].X,s=c[p].C();r!=l?(f++,0<m.length&&k(l,m),m=[p],n=[s],l=r):(m.push(p),n.push(s))}0<
m.length&&k(l,m)}};g.Cd=function(a,b,c){var d=a.g,e=Z(this.g,b),f=this;b=e.i;c=[vn(c,e.type)];b="SELECT * FROM "+vp(e)+" WHERE "+b+" = ?";var h=Y(a)+" SQL: "+b+" PARAMS: "+c;S(this.logger,h);d.executeSql(b,c,function(b,c){if(0<c.rows.length){var d=c.rows.item(0);null!=d?(d=Mq(d,e),W(a,d)):(T(f.logger,"success no result: "+h),W(a,void 0))}else T(f.logger,"success no result: "+h),W(a,void 0)},function(b,c){Kh(f.logger,"error: "+h+" "+c.message);W(a,c,!0);return!1})};
g.hf=function(a,b,c){function d(b,e){var p=l.i,r=[vn(c[b],l.type)],s="SELECT * FROM "+vp(l)+" WHERE "+p+" = ?";S(f.logger,"SQL: "+s+" PARAMS: "+r);e.executeSql(s,r,function(e,f){k++;if(0<f.rows.length){var n=f.rows.item(0);null!=n&&(h[b]=Mq(n,l))}else h[b]=void 0;k==c.length?W(a,h):(n=b+10,n<c.length&&d(n,e))},function(e,l){k++;Kh(f.logger,"error: "+s+" "+l.message);if(k==c.length)W(a,h);else{var n=b+10;n<c.length&&d(n,e)}return!1})}var e=a.g,f=this,h=[],k=0,l=Z(this.g,b);if(0<c.length)for(b=0;10>
b&&b<c.length;b++)d(b,e);else T(f.logger,"success"),W(a,[])};
g.jf=function(a,b){function c(d,k){var n=b[d],p=Z(e.g,n.X),r=vo(n),n=p.i,r=[vn(r,p.type)],s="SELECT * FROM "+vp(p)+" WHERE "+n+" = ?";S(e.logger,"SQL: "+s+" PARAMS: "+r);k.executeSql(s,r,function(k,m){h++;if(0<m.rows.length){var n=m.rows.item(0);null!=n&&(f[d]=Mq(n,p))}else f[d]=void 0;h==b.length?(S(e.logger,"success "+s),W(a,f)):(n=d+10,n<b.length&&c(n,k))},function(b,c){W(a,c,!0);return!1})}var d=a.g,e=this,f=[],h=0;if(0<b.length)for(var k=0;10>k&&k<b.length;k++)c(k,d);else S(this.logger,"success"),
W(a,[])};
g.pd=function(a,b){function c(d,h){function k(a){a="ydn.db.me:"+l.getName()+":"+a.getName();a="DELETE FROM  "+Ka(a);S(e.logger,"SQL: "+a);h.executeSql(a,[])}var l=Z(e.g,b[d]),m="DELETE FROM  "+vp(l);S(e.logger,"SQL: "+m+" PARAMS: []");h.executeSql(m,[],function(h){d==b.length-1?(S(e.logger,"success "+m),W(a,b.length)):c(d+1,h)},function(b,c){W(a,c,!0);return!1});for(var n=0,p=l.g.length;n<p;n++){var r=l.index(n);r.multiEntry&&k(r)}}var d=a.g,e=this;0<b.length?c(0,d):(S(this.logger,"success"),W(a,
0))};
g.sf=function(a,b){function c(k){if(k>=b.length)W(a,f,h);else{var l=Z(e.g,b[k].X),m=vn(b[k].C(),l.type),n=" WHERE "+l.i+" = ?",p="DELETE FROM "+vp(l)+n,r=Y(a)+" SQL: "+p+" PARAMS: "+[m];d.executeSql(p,[m],function(){f++;c(k)},function(a,b){Kh(e.logger,"error: "+r+b.message);h=!0;c(k);return!1});k++;for(var p=function(b){b="ydn.db.me:"+l.getName()+":"+b.getName();b="DELETE FROM  "+Ka(b)+n;S(e.logger,Y(a)+NaN+b);d.executeSql(b,[m])},s=0,y=l.g.length;s<y;s++){var z=l.index(s);z.multiEntry&&p(z)}}}var d=
a.g,e=this,f=0,h=!1;S(this.logger,Y(a)+" removeByKeys: "+b.length+" keys");c(0)};
g.Xd=function(a,b,c){function d(b){b="ydn.db.me:"+f.getName()+":"+b.getName();b="DELETE FROM  "+Ka(b)+l;S(k.logger,Y(a)+NaN+b);e.executeSql(b,[h])}var e=a.g,f=Z(this.g,b),h=vn(c,f.type),k=this,l=" WHERE "+f.i+" = ?";b="DELETE FROM "+vp(f)+l;S(this.logger,Y(a)+" SQL: "+b+" PARAMS: "+[h]);e.executeSql(b,[h],function(b,c){W(a,c.rowsAffected)},function(b,c){W(a,c,!0);return!1});b=0;for(c=f.g.length;b<c;b++){var m=f.index(b);m.multiEntry&&d(m)}};g.we=function(a,b,c){Qq(this,a,b,void 0,c)};
g.Yd=function(a,b,c){Qq(this,a,b,void 0,c)};g.rf=function(a,b,c,d){Qq(this,a,b,c,d)};
function Qq(a,b,c,d,e){function f(c){c="ydn.db.me:"+k.getName()+":"+c.getName();c="DELETE FROM  "+Ka(c)+n;S(a.logger,Y(b)+NaN+c);h.executeSql(c,m)}var h=b.g,k=Z(a.g,c);c="DELETE FROM "+vp(k);var l=[],m=[],n="";null!=e&&(t(d)?(d=Pn(k,d),tn(d.i,d.type,e,m,l)):tn(k.i,k.type,e,m,l),n=" WHERE "+m.join(" AND "));c+=n;var p=Y(b)+" SQL: "+c+" PARAMS: "+l;S(a.logger,p);h.executeSql(c,l,function(c,d){S(a.logger,"success "+p);W(b,d.rowsAffected)},function(c,d){Kh(a.logger,"error: "+p+d.message);W(b,d,!0);return!1});
e=0;for(d=k.g.length;e<d;e++)c=k.index(e),c.multiEntry&&f(c)}g.sd=function(a,b){function c(h){var k="SELECT COUNT(*) FROM "+Ka(b[h]);S(e.logger,"SQL: "+k+" PARAMS: []");d.executeSql(k,[],function(d,e){var k=e.rows.item(0);f[h]=parseInt(k["COUNT(*)"],10);h++;h==b.length?W(a,f):c(h)},function(b,c){W(a,c,!0);return!1})}var d=a.g,e=this,f=[];0==b.length?(S(this.logger,"success"),W(a,0)):c(0)};
g.Gc=function(a,b,c,d,e){var f=[];b=tp(Z(this.g,b),f,6,d,c,!1,e);S(this.logger,Y(a)+" SQL: "+b+" PARAMS: "+f);a.g.executeSql(b,f,function(b,c){var d=c.rows.item(0);W(a,Nj(d))},function(b,c){W(a,c,!0);return!1})};
g.Bb=function(a,b,c,d,e,f,h,k,l,m){var n=this,p=[],r=Z(this.g,c),s=r.j,y=r.type,z=y,E=null!=d&&d!==s?Pn(r,d):null,H=d||s;E&&(z=E.type);c=[];if(m&&t(m[0])){var K=m[0];E&&t(m[1])?(d=m[1],e=xp(r,b,c,E.getName(),e,K,!0,d,k,l)):e=wp(r,b,c,d,e,k,l,K,!0)}else e=tp(r,c,b,H,e,k,l);A(f)&&(e+=" LIMIT "+f);A(h)&&(e+=" OFFSET "+h);var V=a+" SQL: "+e+" ;params= "+vj(c);S(this.logger,V);a.g.executeSql(e,c,function(c,d){for(var e=d.rows.length,f,h=0;h<e;h++)f=d.rows.item(h),2==b?p[h]=rp(f[s],y):1==b?p[h]=rp(f[H],
z):3==b?p[h]=[rp(f[H],z),rp(f[s],y)]:null!=f&&(p[h]=Mq(f,r));T(n.logger,"success "+a);m&&f&&(m[0]=rp(f[H],z),m[1]=rp(f[s],y));W(a,p)},function(b,c){Kh(n.logger,"error: "+V+c.message);W(a,c,!0);return!1})};function Rq(a,b){this.g=b}D(Rq,Pq);Rq.prototype.logger=R("ydn.db.core.req.WebSql");Rq.prototype.h=function(a,b,c,d){c=Z(this.g,c);return new Kq(a,b,c,d)};Tp.prototype.G=function(){var a=Bo(this);if("indexeddb"==a)return new Yp(0,this.h);if("websql"==a||"sqlite"==a)return new Rq(0,this.h);if("memory"==a||"localstorage"==a||"userdata"==a||"sessionstorage"==a)return new Jq(0,this.h);throw new Xg("No executor for "+a);};function Sq(a){if(!x(a))throw new Oh;this.Sa=a;this.j=Kn;this.g=[];Tq(this,a);this.cd=""}g=Sq.prototype;g.Sa="";g.gg=NaN;g.ig=NaN;g.Ff=!1;g.cd="";
function Tq(a,b){var c=b.split(/\sFROM\s/i);if(2==c.length){var d=c[1],c=c[0].match(/\s*?(SELECT|INSERT|UPDATE|DELETE)\s+(.*)/i);if(3==c.length){a.l=c[1].toUpperCase();if("SELECT"==a.l)a.j=Jn;else if("INSERT"==a.l)a.j=Kn;else if("UPDATE"==a.l)a.j=Kn;else if("DELETE"==a.l)a.j=Kn;else return;var c=c[2].trim(),e=c.match(/^(MIN|MAX|COUNT|AVG|SUM)/i);e?(a.i=e[0].toUpperCase(),c=c.replace(/^(MIN|MAX|COUNT|AVG|SUM)/i,"").trim()):a.i=void 0;"("==c.charAt(0)&&(")"==c.charAt(c.length-1)?c=c.substring(1,c.length-
1):new so("missing closing parentheses"));a.P=c;c=d.search(/(ORDER BY|LIMIT|OFFSET)/i);0<c?(a.h=d.substring(c),d=d.substring(0,c)):a.h="";c=d.search(/WHERE/i);0<c?(a.n=d.substring(c+6).trim(),d=d.substring(0,c)):a.n="";a.g=d.trim().split(",").map(function(a){a=Ha(a,'"');a=Ha(a,"'");return a.trim()})}}}
g.parse=function(a){if(a){for(var b=0;b<a.length;b++)this.Sa=this.Sa.replace("?",a[b]);Tq(this,this.Sa)}this.s=Uq(this);if(!this.s)return this.cd;a=this.h.length;if(b=/OFFSET\s+(\d+)/i.exec(this.h))this.ig=parseInt(b[1],10),a=this.h.search(/OFFSET/i);if(b=/LIMIT\s+(\d+)/i.exec(this.h))this.gg=parseInt(b[1],10),b=this.h.search(/LIMIT/i),b<a&&(a=b);(a=/ORDER BY\s+(.+)/i.exec(this.h.substr(0,a)))?(a=a[1].trim(),(b=a.match(/(ASC|DESC)/i))?(this.Ff="DESC"==b[0].toUpperCase(),a=a.replace(/\s+(ASC|DESC)/i,
"")):this.Ff=!1,this.u=Ha(Ha(a,'"'),"'")):this.u=void 0;return""};function Vq(a){if("*"==a.P)return null;a=a.P.split(",");return a=a.map(function(a){return Ha(a.trim(),'"')})}g.toJSON=function(){return{sql:this.Sa}};
function Uq(a){function b(a){return ab(c,function(b){return b.Lc()==a})}var c=[],d=/(.+?)(<=|>=|=|>|<)(.+)/i;if(0<a.n.length)for(var e=a.n.split("AND"),f=0;f<e.length;f++){var h=e[f],k=d.exec(h);if(k){var l=k[1].trim(),l=Ha(l,'"'),l=Ha(l,"'");if(0<l.length){var m=k[3].trim();qa(m,'"')?m=Ha(m,'"'):qa(m,"'")?m=Ha(m,"'"):m=parseFloat(m);k=new Gn(l,k[2],m);l=b(l);if(0<=l){if(c[l]=c[l].se(k),!c[l])return a.cd='where clause "'+h+'" conflict',null}else c.push(k)}else return a.cd='Invalid clause "'+h+'"',
null}else return a.cd='Invalid clause "'+h+'"',null}return c}g.toString=function(){return"query:"+this.Sa};function Wq(a,b){this.g=b;this.i=a}Wq.prototype.logger=R("ydn.db.sql.req.nosql.Node");Wq.prototype.toJSON=function(){return{sql:this.g}};Wq.prototype.toString=function(){return"idb.Node:"};
Wq.prototype.h=function(a,b){var c=fb(this.g.g)[0],d=this.g.s,e=this.g.gg,e=isNaN(e)?100:e,f=this.g.ig,f=isNaN(f)?0:f,h=this.g.u,k=Vq(this.g),l=null,m=this.g.Ff;if(0==d.length)l=null;else if(1==d.length)l=on(d[0].g);else throw new Ug("too many conditions.");null===k||go(a,function(a,b,c){var d=a;b||(d=a.map(function(a){var b=k.length;if(1==b)return wn(a,k[0]);for(var c={},d=0;d<b;d++)c[k[d]]=wn(a,k[d]);return c}));c(d,b)});var d=0<d.length?d[0].Lc():void 0,n=Y(a)+" executing on"+c;d&&(n+=":"+d);n+=
" "+sn(l);T(this.logger,n);h&&h!=this.i.keyPath?b.Bb(a,4,c,h,l,e,f,m,!1):t(d)&&d!=this.i.keyPath?b.Bb(a,4,c,d,l,e,f,m,!1):b.Bb(a,4,c,null,l,e,f,m,!1)};function Xq(a,b){Wq.call(this,a,b)}D(Xq,Wq);
Xq.prototype.h=function(a,b){var c,d=fb(this.g.g)[0],e=this.g.s,f=null;if(0==e.length)f=null;else if(1==e.length)f=on(e[0].g);else throw new Ug("too many conditions.");var h=this.g.i,e=0<e.length?e[0].Lc():void 0,k=Y(a)+" executing "+h+" on "+d;e&&(k+=":"+e);k+=" "+sn(f);T(this.logger,k);if("COUNT"==h)f?b.Gc(a,d,f,e,!1):b.Gc(a,d,null,void 0,!1);else{var l,k=Vq(this.g);if(!k||0==k.length)throw new Th("field name require for reduce operation: "+h);k=k[0];if("MIN"==h)l=Yq(k);else if("MAX"==h)l=Zq(k);
else if("AVG"==h)c=0,l=$q(k);else if("SUM"==h)c=0,l=ar(k);else throw new Ph(h);var m;t(e)?m=new Yn(d,e,f):m=new Xn(d,f);var d=b.h(a.g,Y(a),d,4),n=m.load([d]);n.V=function(b){W(a,b,!0)};var p=0;n.H=function(b){null!=b?(b=m.h?n.ib():n.U(),c=l(b,c,p),n.advance(1),p++):W(a,c)}}};function $q(a){return function(b,c,d){t(c)||(c=0);return(c*d+b[a])/(d+1)}}function ar(a){return function(b,c){return c+b[a]}}function Yq(a){return function(b,c){var d=b[a];return t(c)?c<d?c:d:d}}
function Zq(a){return function(b,c){var d=b[a];return t(c)?c>d?c:d:d}};function br(a,b){this.g=b}D(br,Yp);br.prototype.logger=R("ydn.db.sql.req.IndexedDb");br.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new so(c);c=fb(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new po(c[0]);var e=Vq(b);if(e)for(var f=0;f<e.length;f++)if(!Xo(d,e[f]))throw new po('Index "'+e[f]+'" not found in '+c[0]);var h;b.i?h=new Xq(d,b):h=new Wq(d,b);h.h(a,this)}else throw new Ph(b.Sa);};function cr(a,b){this.h=b;this.j=a;this.g=Vq(b)}cr.prototype.logger=R("ydn.db.sql.req.websql.Node");cr.prototype.toJSON=function(){return{sql:this.h.Sa}};cr.prototype.toString=function(){return"websql.Node:"};function dr(a,b){if(a.g){if(1==a.g.length){if(B(b))return Nb(b,a.g[0]);return}for(var c={},d=0;d<a.g.length;d++)c[a.g[d]]=Nb(b,a.g[d]);return c}return Mq(b,a.j)}
cr.prototype.i=function(a,b,c){var d=this,e=[];b.executeSql(this.h.Sa,c,function(b,c){for(var k=c.rows.length,l=0;l<k;l++){var m=c.rows.item(l);if(B(m))var n=dr(d,m);e.push(n)}a(e)},function(b,c){Kh(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function er(a,b){cr.call(this,a,b)}D(er,cr);er.prototype.i=function(a,b,c){var d=this;b.executeSql(this.h.Sa,c,function(b,c){var d=c.rows.length;if(1==d)d=Nj(c.rows.item(0)),a(d);else if(0==d)a(void 0);else throw new no;},function(b,c){Kh(d.logger,"Sqlite error: "+c.message);a(c,!0);return!0})};function fr(a,b){this.g=b}D(fr,Rq);fr.prototype.logger=R("ydn.db.sql.req.WebSql");fr.prototype.executeSql=function(a,b,c){var d=fb(b.g);if(1==d.length){var e=Z(this.g,d[0]);if(!e)throw new po(d[0]);var f=Vq(b);if(f)for(var h=0;h<f.length;h++)if(!Xo(e,f[h]))throw new po('Index "'+f[h]+'" not found in '+d[0]);var k;b.i?k=new er(e,b):k=new cr(e,b);k.i(function(b,c){W(a,b,c)},a.g,c)}else throw new Ph(b.Sa);};function gr(a,b){this.g=b}D(gr,Jq);gr.prototype.logger=R("ydn.db.sql.req.SimpleStore");gr.prototype.executeSql=function(a,b,c){if(c=b.parse(c))throw new so(c);c=fb(b.g);if(1==c.length){var d=Z(this.g,c[0]);if(!d)throw new po(c[0]);var e=Vq(b);if(e)for(var f=0;f<e.length;f++)if(!Xo(d,e[f]))throw new Q('Index "'+e[f]+'" not found in '+c[0]);var h;b.i?h=new Xq(d,b):h=new Wq(d,b);h.h(a,this)}else throw new Ug(b.Sa);};function hr(a,b,c){Jo.call(this,a,b,c)}D(hr,gp);hr.prototype.executeSql=function(a,b){for(var c=new Sq(a),d=fb(c.g),e=0;e<d.length;e++){var f=Z(this.h,d[e]);if(!f)throw new Q("store: "+f+" not exists.");}T(this.logger,"executeSql: "+a+" params: "+b);var h=this.g.request("sql",fb(c.g),c.j);X(h,function(){Ko(this).executeSql(h,c,b||[])},this);return h};function ir(a,b,c){Sp.call(this,a,b,c)}D(ir,Tp);ir.prototype.Wc=function(a){return new hr(this,this.h,a)};ir.prototype.executeSql=function(a,b){return this.i.executeSql(a,b)};ir.prototype.G=function(){var a=Bo(this);if("indexeddb"==a)return new br(0,this.h);if("websql"==a||"sqlite"==a)return new fr(0,this.h);if("memory"==a||"localstorage"==a||"sessionstorage"==a)return new gr(0,this.h);throw new Xg("No executor for "+a);};function jr(a,b){t(a)&&5242880<a&&Ih(this.logger,th,"storage size request ignored, use Quota Management API instead");this.ea=null;this.Zc=b||NaN}g=jr.prototype;
g.connect=function(a,b){function c(a,c,d){T(e.logger,(d?"changing":"upgrading")+" version to "+a.version+" from "+h);for(d=0;d<b.stores.length;d++)kr(e,a,c,b.stores[d]);c=a.objectStoreNames;var f=c.length;for(d=0;d<f;d++)To(b,c[d])||(a.deleteObjectStore(c[d]),T(e.logger,"store: "+c[d]+" deleted."))}function d(a,b){f.h?Kh(e.logger,"database already set."):t(b)?(Kh(e.logger,b?b.message:"Error received."),e.ea=null,f.I(b)):(e.ea=a,e.ea.onabort=function(a){S(e.logger,e+": abort");e.dd(a.target.error)},
e.ea.onerror=function(a){S(e.logger,e+": error");e.dd(a.target.error)},e.ea.onversionchange=function(a){S(e.logger,e+" closing connection for onversionchange to: "+a.version);if(e.ea&&(e.ea.onabort=null,e.ea.onblocked=null,e.ea.onerror=null,e.ea.onversionchange=null,e.Wd(a),!a.defaultPrevented)){e.ea.close();e.ea=null;var b=Error();b.name=a.type;e.me(b)}},f.callback(parseFloat(h)))}var e=this,f=new P,h=void 0,k=b.version;Ih(this.logger,xh,"Opening database: "+a+" ver: "+(b.h?"auto":k));var l;l=t(k)?
Mn.open(a,k):Mn.open(a);l.onsuccess=function(f){var k=f.target.result;t(h)||(h=k.version);Ih(e.logger,xh,"Database: "+k.name+", ver: "+k.version+" opened.");if(b.h)e.bb(function(f){if(b instanceof Po)for(var h=0;h<f.stores.length;h++)To(b,f.stores[h].getName())||Qo(b,f.stores[h].clone());f=Fp(b,f,!1,!0);if(0<f.length){Ih(e.logger,xh,"Schema change require for difference in "+f);var l=A(k.version)?k.version+1:1;if("IDBOpenDBRequest"in q){k.close();var m=Mn.open(a,l);m.onupgradeneeded=function(a){a=
a.target.result;Ih(e.logger,xh,"re-open for version "+a.version);c(a,m.transaction,!1)};m.onsuccess=function(a){d(a.target.result)};m.onerror=function(){Ih(e.logger,xh,e+": fail.");d(null)}}else{var p=k.setVersion(l+"");p.g=function(a){Kh(e.logger,"migrating from "+k.version+" to "+l+" failed.");d(null,a)};p.onsuccess=function(){p.transaction.oncomplete=H;c(k,p.transaction,!0)};var H=function(){var b=Mn.open(a);b.onsuccess=function(a){a=a.target.result;Ih(e.logger,xh,e+": OK.");d(a)};b.onerror=function(){Ih(e.logger,
xh,e+": fail.");d(null)}};null!=p.transaction&&(p.transaction.oncomplete=H)}}else d(k)},void 0,k);else if(b.version>k.version){var l=k.setVersion(b.version);l.g=function(a){Kh(e.logger,"migrating from "+k.version+" to "+b.version+" failed.");d(null,a)};l.onsuccess=function(){c(k,l.transaction,!0)}}else b.version==k.version?Ih(e.logger,xh,"database version "+k.version+" ready to go"):Kh(e.logger,"connected database version "+k.version+" is higher than requested version."),e.bb(function(a){a=Fp(b,a,
!1,!0);0<a.length?(Ih(e.logger,xh,a),d(null,new Sh("different schema: "+a))):d(k)},void 0,k)};l.onupgradeneeded=function(a){a=a.target.result;h=NaN;Ih(this.logger,xh,"upgrade needed for version "+a.version);c(a,l.transaction,!1)};l.onerror=function(c){Jh(e.logger,'open request to database "'+a+'" '+(t(b.version)?" with version "+b.version:"")+" cause error of "+l.error.name);d(null,c)};l.onblocked=function(c){Jh(e.logger,"database "+a+" "+b.version+" block, close other connections.");d(null,c)};A(this.Zc)&&
!isNaN(this.Zc)&&setTimeout(function(){"done"!=l.readyState&&(Jh(e.logger,e+": database state is still "+l.readyState),d(null,new to("connection timeout after "+e.Zc)))},this.Zc);return f};g.Zc=18E4;g.me=function(){};g.dd=function(){};g.Wd=function(){};g.Dc=function(){return"indexeddb"};g.le=function(){return!!this.ea};g.logger=R("ydn.db.con.IndexedDb");g.ea=null;g.ke=function(){return this.ea?parseFloat(this.ea.version):void 0};
g.bb=function(a,b,c){c=c||this.ea;if(t(b)){if(null===b){if(0==c.objectStoreNames.length){a(new Ep(c.version));return}throw new Rh;}c=b.db}else{b=[];for(var d=c.objectStoreNames.length-1;0<=d;d--)b[d]=c.objectStoreNames[d];if(0==b.length){a(new Ep(c.version));return}b=c.transaction(b,Jn)}for(var e=c.objectStoreNames,f=[],h=e.length,d=0;d<h;d++){for(var k=b.objectStore(e[d]),l=[],m=0,n=k.indexNames.length;m<n;m++){var p=k.index(k.indexNames[m]);l[m]=new mp(p.keyPath,void 0,p.unique,p.multiEntry,p.name)}f[d]=
new Mo(k.name,k.keyPath,k.autoIncrement,void 0,l)}b=new Ep(c.version,f);a(b)};
function kr(a,b,c,d){function e(){var a={autoIncrement:!!d.autoIncrement};null!=d.keyPath&&(a.keyPath=d.keyPath);return b.createObjectStore(d.getName(),a)}Ih(a.logger,yh,"Creating Object Store for "+d.getName()+" keyPath: "+d.keyPath);if(b.objectStoreNames.contains(d.getName())){c=c.objectStore(d.getName());On(d.keyPath||"",c.keyPath||"")?(b.deleteObjectStore(d.getName()),Ih(a.logger,th,"store: "+d.getName()+" deleted due to keyPath change."),c=e()):ea(c.autoIncrement)&&ea(d.autoIncrement)&&c.autoIncrement!=
d.autoIncrement&&(b.deleteObjectStore(d.getName()),Ih(a.logger,th,"store: "+d.getName()+" deleted due to autoIncrement change."),c=e());for(var f=c.indexNames,h=0;h<d.g.length;h++){var k=d.index(h);!f.contains(k.getName())&&k.l&&(c.clear(),Ih(a.logger,th,"store: "+d.getName()+" cleared since generator index need re-indexing."))}for(var l=0,m=0,n=0,h=0;h<d.g.length;h++){var k=d.index(h),p=!1;if(f.contains(k.getName())){var r=c.index(k.getName()),s=null!=r.unique&&null!=k.unique&&r.unique!=k.unique,
y=null!=r.multiEntry&&null!=k.multiEntry&&r.multiEntry!=k.multiEntry,r=null!=r.keyPath&&null!=k.keyPath&&!!On(r.keyPath,k.keyPath);if(s||y||r)c.deleteIndex(k.getName()),p=!0,l--,n++}else"BLOB"!=k.type&&(p=!0);p&&(k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath),l++)}for(h=0;h<f.length;h++)Xo(d,f[h])||(c.deleteIndex(f[h]),m++);Ih(a.logger,yh,"Updated store: "+c.name+", "+l+" index created, "+m+" index deleted, "+
n+" modified.")}else{c=e();for(h=0;h<d.g.length;h++)k=d.index(h),"BLOB"==k.type?Ih(a.logger,uh,"Index "+k+" of blob data type ignored."):(Ih(a.logger,yh,"Creating index: "+k),k.unique||k.multiEntry?(p={unique:k.unique,multiEntry:k.multiEntry},c.createIndex(k.getName(),k.keyPath,p)):c.createIndex(k.getName(),k.keyPath));Ih(a.logger,yh,"Created store: "+c)}}
g.vd=function(a,b,c,d){var e=this.ea;if(!b){b=[];for(var f=e.objectStoreNames.length-1;0<=f;f--)b[f]=e.objectStoreNames[f]}0==b.length?a(null):(b=e.transaction(b,c),b.oncomplete=function(a){d("complete",a)},b.onabort=function(a){d("abort",a)},a(b),a=null)};g.close=function(){Ih(this.logger,yh,this+" closing connection");this.ea.close()};g.toString=function(){return"IndexedDB:"+(this.ea?this.ea.name+":"+this.ea.version:"")};
jo.push(function(a,b){if(!Mn||b&&"indexeddb"!=b)return null;var c=Mn.deleteDatabase(a),d=new ao("IDBVersionChangeEvent ");c.onblocked=function(a){Nh(d,a)};c.onerror=function(a){d.I(a)};c.onsuccess=function(a){d.callback(a)};return d});function lr(a){Fq.call(this,a);this.h=NaN}D(lr,Fq);g=lr.prototype;g.logger=R("ydn.db.con.SimpleStorage");g.ke=function(){return this.h};
g.connect=function(a,b){function c(a,b){setTimeout(function(){b?(T(d.logger,d+" opening fail"),e.I(b)):(T(d.logger,d+" version "+d.ke()+" open"),e.callback(a))},10)}var d=this,e=new P;this.j=this.n.xe(a);this.i=a;this.g=b;var f=jq(this.i);this.h=NaN;var h=tj(this.j.getItem(f));t(h.version)&&!A(h.version)&&(h.version=NaN);if(h)if(h=new Ep(h),Fp(this.g,h,!1,!1))if(!this.g.h&&!isNaN(h.version)&&this.g.version>h.version)c(NaN,new mo("existing version "+h.version+" is larger than "+this.g.version));else{var k=
this.g.version;this.h=t(k)?k:h.version+1;for(k=0;k<this.g.count();k++)var l=this.g.stores[k]||null;if(this.g instanceof Po)for(k=0;k<h.count();k++)l=h.stores[k]||null,Qo(this.g,l);k=this.g.toJSON();k.version=this.h||NaN;this.j.setItem(f,vj(k));c(h.version||NaN)}else{for(k=0;k<this.g.count();k++)l=this.g.stores[k]||null;this.h=h.version||NaN;c(this.h)}else h=b.toJSON(),this.h=1,h.version=this.h,this.j.setItem(f,vj(h)),c(NaN);return e};g.le=function(){return!!this.i};g.me=function(){};g.dd=function(){};
g.Wd=function(){};g.Dc=function(){return"memory"};g.close=function(){};g.vd=function(a,b,c,d){a(new Gq(this,function(a,b){d(a,b)}))};g.toString=function(){return"SimpleStorage:"+this.Dc()+":"+(this.i+":"+this.h)};function mr(){lr.call(this,this)}D(mr,lr);mr.prototype.xe=function(){return window.localStorage};mr.prototype.Dc=function(){return"localstorage"};jo.push(function(a,b){if(!b||"localstorage"==b){var c=new mr,d=new Po;c.connect(a,d);c.bb(function(a){for(var b=0;b<a.stores.length;b++)hq(c,a.stores[b].getName()).clear()})}});function nr(){lr.call(this,this)}D(nr,lr);nr.prototype.xe=function(){return window.sessionStorage};nr.prototype.Dc=function(){return"sessionstorage"};
jo.push(function(a,b){if(!b||"sessionstorage"==b){var c=new nr,d=new Po;c.connect(a,d);c.bb(function(a){for(var b=0;b<a.stores.length;b++)hq(c,a.stores[b].getName()).clear()})}});function or(a,b){this.g=t(a)?a:4194304;this.h=b||"websql"}g=or.prototype;
g.connect=function(a,b){function c(b,c){var f=b.version?parseInt(b.version,10):0,h=c.h?isNaN(f)?1:f+1:c.version;Lh(e.logger,a+": changing version from "+b.version+" to "+h);var k=!1,l=0;b.changeVersion(b.version,h+"",function(a){e.bb(function(b){k=!0;for(var d=0;d<c.count();d++){var f=Z(b,(c.stores[d]||null).getName()),f=f?yp(f,c.stores[d]||null):null;pr(e,a,c.stores[d]||null,function(a){a&&l++},f)}for(d=0;d<b.count();d++)f=b.stores[d]||null,To(c,f.getName())||(c instanceof Po?Qo(c,f):(f="DROP TABLE "+
vp(f),T(e.logger,f),a.executeSql(f,[],function(){},function(a,b){throw b;})))},a,b)},function(c){Jh(e.logger,"SQLError "+c+" "+c.code+"("+c.message+") while changing version from "+b.version+" to "+h+" on "+a);throw c;},function(){if(k){var f=".";l!=c.stores.length&&(f=" but unexpected stores exists.");S(e.logger,a+":"+b.version+" ready"+f);d(b)}else Kh(e.logger,a+": changing version voided.")})}function d(a,b){t(b)?(e.xa=null,h.I(b)):(e.xa=a,h.callback(parseFloat(f)))}var e=this,f=NaN,h=new P,k=
null;try{"sqlite"==this.h?q.sqlitePlugin?(k=q.sqlitePlugin.openDatabase(a,"",a,this.g),k.readTransaction||(k.readTransaction=k.transaction),k.changeVersion=function(a,b,c,d,e){k.transaction(c,d,e)}):(Kh(this.logger,"sqlitePlugin not found."),k=null,this.ne=Error("sqlitePlugin not found.")):k=q.openDatabase(a,"",a,this.g)}catch(l){if("SECURITY_ERR"==l.name)Kh(this.logger,"SECURITY_ERR for opening "+a),k=null,this.ne=new ro(l);else throw l;}if(k){var f=k.version||"",m="database "+a+(0==f.length?"":
" version "+k.version);null!=b.version&&b.version==k.version?(Lh(e.logger,"Existing "+m+" opened as requested."),d(k)):this.bb(function(a){(a=Fp(b,a,!0,!1))?(0==f?Lh(e.logger,"New "+m+" created."):b.h?Lh(e.logger,"Existing "+m+" opened and schema change for "+a):Lh(e.logger,"Existing "+m+" opened and  schema change to version "+b.version+" for "+a),c(k,b)):(Lh(e.logger,"Existing "+m+" with same schema opened."),d(k))},null,k)}else d(null,this.ne);return h};g.Dc=function(){return this.h};g.ne=null;
g.xa=null;g.logger=R("ydn.db.con.WebSql");g.me=function(){};g.dd=function(){};
function qr(a){var b=a.P,c="CREATE TABLE IF NOT EXISTS "+vp(a)+" (",d=a.i,c=c+(d+" "+b+" PRIMARY KEY ");a.autoIncrement&&(c+=" AUTOINCREMENT ");if(!a.gc||!a.keyPath&&0==a.g.length)c+=" ,_default_ BLOB";for(var e=[],f=[d],h=0,k=a.g.length;h<k;h++){var l=a.index(h),m="";if(l.multiEntry){var m="ydn.db.me:"+a.getName()+":"+l.getName(),n=l.unique?" UNIQUE ":"",l="CREATE TABLE IF NOT EXISTS "+Ka(m)+" ("+d+" "+b+", "+l.i+" "+l.s+n+")";e.push(l)}else l.unique&&(m=" UNIQUE "),n=l.keyPath,"BLOB"!=l.type&&x(n)&&
(n="CREATE "+m+" INDEX IF NOT EXISTS "+Ka(a.getName()+"-"+l.getName())+" ON "+vp(a)+" ("+l.i+")",e.push(n)),n=l.i,-1==f.indexOf(n)&&(c+=", "+n+" "+l.s+m,f.push(n))}e.unshift(c+")");return e}g.ke=function(){return this.xa?parseFloat(this.xa.version):void 0};
g.bb=function(a,b,c){function d(a,b){throw b;}function e(b,c){if(c&&c.rows){for(var d=0;d<c.rows.length;d++){var e=c.rows.item(d);if("__WebKitDatabaseInfoTable__"!=e.name&&"sqlite_sequence"!=e.name&&"table"==e.type){var r=Pb(e,"sql");S(f.logger,"Parsing table schema from SQL: "+r);for(var s=r.substr(r.indexOf("("),r.lastIndexOf(")")).match(/(?:"[^"]*"|[^,])+/g),y=void 0,z,r=[],E=!1,H=!1,K=0;K<s.length;K++){var V=s[K].match(/\w+|"[^"]+"/g),ua=Xa(V,function(a){return a.toUpperCase()}),F=Ha(V[0],'"'),
V=np(ua[1]);if(-1!=ua.indexOf("PRIMARY")&&-1!=ua.indexOf("KEY")){z=V;if(x(F)&&!ta(F)&&"_ROWID_"!=F){var Qc=F.split(","),y=F;1<Qc.length&&(y=Qc,z=void 0)}-1!=ua.indexOf("AUTOINCREMENT")&&(E=!0)}else if("_ROWID_"!=F)if("_default_"==F)H=!0;else{var hj="UNIQUE"==ua[2];qa(F,e.tbl_name+"-")&&(F=F.substr(e.tbl_name.length+1));ua=new mp(F,V,hj);r.push(ua)}}if(qa(e.name,"ydn.db.me:")){var ud=e.name.split(":");if(3<=ud.length){var he=ud[1],y=new mp(ud[2],V,hj,!0),s=ab(r,function(a){return a.getName()==ud[2]});
0<=s?r[s]=y:r.push(y);s=ab(k,function(a){return a.getName()===he});0<=s?(K=k[s],k[s]=new Mo(K.getName(),K.keyPath,E,z,r,void 0,!H)):k.push(new Mo(he,void 0,!1,void 0,[y]));S(f.logger,'multi entry index "'+y.getName()+'" found in '+he+(-1==s?"*":""))}else Kh(f.logger,'Invalid multiEntry store name "'+e.name+'"')}else K=ab(k,function(a){return a.getName()===e.name}),0<=K?(s=k[K].index(0),r.push(s),k[K]=new Mo(e.name,y,E,z,r,void 0,!H)):(r=new Mo(e.name,y,E,z,r,void 0,!H),k.push(r))}}d=new Ep(h,k);a(d)}}
var f=this,h=(c=c||this.xa)&&c.version?parseFloat(c.version):void 0,h=isNaN(h)?void 0:h,k=[];b?b.executeSql("SELECT * FROM sqlite_master",[],e,d):c.readTransaction(function(b){f.bb(a,b,c)},function(a){Jh(f.logger,"opening tx: "+a.message);throw a;},e)};
function pr(a,b,c,d,e){function f(a){b.executeSql(a,[],function(){h++;h==k.length&&(d(!0),d=null)},function(b,e){h++;h==k.length&&(d(!1),d=null);var f="SQLError creating table: "+c.getName()+" "+e.message+' for executing "'+a;throw new qo(e,f);})}var h=0,k=qr(c),l="Create";if(e){e=Oo(c,e);if(0==e.length){S(a.logger,"same table "+c.getName()+" exists.");d(!0);d=null;return}l="Modify";Kh(a.logger,"table: "+c.getName()+" has changed by "+e+" ALTER TABLE cannot run in WebSql, dropping old table.");k.unshift("DROP TABLE IF EXISTS "+
Ka(c.getName()))}S(a.logger,l+" table: "+c.getName()+": "+k.join(";"));for(a=0;a<k.length;a++)f(k[a])}g.le=function(){return!!this.xa};g.close=function(){this.xa=null};
g.vd=function(a,b,c,d){function e(a){S(k.logger,k+": Tx "+c+" request cause error.");d("abort",a)}function f(){d("complete",{type:"complete"})}function h(b){a(b)}var k=this;null===this.xa&&(a(null),d("abort",this.ne));c==Jn?this.xa.readTransaction(h,e,f):c==Ln?this.xa.changeVersion(this.xa.version,this.xa.version+1+"",h,e,f):this.xa.transaction(h,e,f)};
jo.push(function(a,b){if(fa(q.openDatabase)&&(!b||"websql"==b)){var c=new or,d=new Po;T(c.logger,"deleting websql database: "+a);var d=c.connect(a,d),e=function(){var b=c.logger;b&&b.log(uh,"all tables in "+a+" deleted.",void 0)};d.K(function(){c.vd(function(b){b.executeSql('SELECT * FROM sqlite_master WHERE type = "table"',[],function(d,e){if(e&&e.rows){for(var l=e.rows.length,m=0,n=0;n<l;n++){var p=e.rows.item(n);"__WebKitDatabaseInfoTable__"!=p.name&&"sqlite_sequence"!=p.name&&(m++,S(c.logger,
"deleting table: "+p.name),b.executeSql("DROP TABLE "+p.name))}T(c.logger,m+' tables deleted from "'+a+'"')}},function(a,b){throw b;})},[],Kn,e)});d.pe(function(){Kh(c.logger,"Connecting "+a+" failed.")})}});or.prototype.Wd=function(){};or.prototype.toString=function(){return"WebSql:"+(this.xa?":"+this.xa.version:"")};Qp.prototype.ze=function(a){return"indexeddb"==a&&Mn?new jr(this.P,this.N):"sqlite"==a&&q.sqlitePlugin?new or(this.P,"sqlite"):"websql"==a&&fa(q.openDatabase)?new or(this.P):"localstorage"==a&&window.localStorage?new mr:"sessionstorage"==a&&window.sessionStorage?new nr:"memory"==a?new lr:null};function rr(a,b){Hc.call(this);this.j=b;this.h=[];if(a>this.j)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var c=0;c<a;c++)this.h.push(this.g())}D(rr,Hc);rr.prototype.g=function(){return{}};rr.prototype.i=function(a){if(B(a))if(fa(a.T))a.T();else for(var b in a)delete a[b]};rr.prototype.B=function(){rr.m.B.call(this);for(var a=this.h;a.length;)this.i(a.pop());delete this.h};function sr(){this.g=[];this.i=new eh;this.j=new eh;this.n=1;this.l=new rr(0,4E3);this.l.g=function(){return new tr};this.s=new rr(0,50);this.s.g=function(){return new ur};var a=this;this.h=new rr(0,2E3);this.h.g=function(){return String(a.n++)};this.h.i=function(){}}R("goog.debug.Trace");function ur(){this.time=this.count=0}ur.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(10*this.time)/10," ms)");return a.join("")};function tr(){}
function vr(a,b,c){var d=[];-1==b?d.push("    "):d.push(wr(a.eventTime-b));d.push(" ",xr(a.eventTime-0));0==a.g?d.push(" Start        "):1==a.g?(d.push(" Done "),d.push(wr(a.i-a.startTime)," ms ")):d.push(" Comment      ");d.push(c,a);0<a.h&&d.push("[VarAlloc ",a.h,"] ");return d.join("")}tr.prototype.toString=function(){return null==this.type?this.comment:"["+this.type+"] "+this.comment};
sr.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.g.length;d++){var e=this.g[d];1==e.g&&c.pop();a.push(" ",vr(e,b,c.join("")));b=e.eventTime;a.push("\n");0==e.g&&c.push("|  ")}if(0!=this.i.ja()){var f=ma();a.push(" Unstopped timers:\n");ch(this.i,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",xr(b.startTime),")\n")})}b=this.j.za();for(d=0;d<b.length;d++)c=this.j.get(b[d]),1<c.count&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",0,"\n","Total comments created ",
0,"\n","Overhead start: ",0," ms\n","Overhead end: ",0," ms\n","Overhead comment: ",0," ms\n");return a.join("")};function wr(a){a=Math.round(a);var b="";1E3>a&&(b=" ");100>a&&(b="  ");10>a&&(b="   ");return b+a}function xr(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new sr;/*
 Copyright 2012 YDN Authors, Yathit. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");.
*/
function yr(a){a.s||(a.s=new od);return a.s}Qp.prototype.addEventListener=function(a,b,c,d){if("ready"==a)id(yr(this),a,b,c,d);else{var e="created error fail ready deleted updated versionchange".split(" "),f=function(a){if(!bb(e,a))throw new Q('Invalid event type "'+a+'"');};if(w(a))for(var h=0;h<a.length;h++)f(a[h]);else f(a);bd(yr(this),a,b,c,d)}};Qp.prototype.removeEventListener=function(a,b,c,d){jd(yr(this),a,b,c,d)};Qp.prototype.Va=function(a){J(yr(this),a)};function zr(a,b,c){Sp.call(this,a,b,c)}D(zr,ir);function Ar(a){for(var b=Ip(a),c=0;c<b.stores.length;c++);b=(b=Ao)||Ao;b=Rp(a,b,!1,void 0,void 0,void 0);this.h=a.Wc(b,a.R);this.j=!1;Wo(a,this.P,this);this.g=1E4;this.l=yh.value;this.i=0;this.u=C(this.G,this);this.s=!1;this.n={}}function Br(a){if(a.g&&a.i>=a.g){var b=a.g/100;100<b&&(b=100);a.h.keys("db-logger",null,b).K(function(a){a=a.map(function(a){return new uo("db-logger",a)});this.h.remove(a).K(function(){this.h.count("db-logger").K(function(a){this.i=a},this)},this)},a)}}
function Cr(){var a=Dr;a.g=1E4;Br(a)}Ar.prototype.P=function(){this.g&&(this.j=!0,this.h.count("db-logger").K(function(a){this.i=a;Br(this)},this))};function Er(a){var b=Dr;if(a!=b.s){var c=Hh();a?Bh(c,b.u):(c=c.g)&&db(c,b.u);b.s=a}}Ar.prototype.G=function(a){if(this.j){var b=a.h;qa(b,"ydn.db.")||this.n[b]||!(b=a.j)||b.value<=this.l||(a={exception:a.g,level:b.value,logger:a.h,name:b.name,time:a.l,message:a.getMessage(),seq:a.n},this.h.put("db-logger",a),this.i++,Br(this))}};var Dr=null;function Fr(a){for(var b=[],c=0,d=0;d<a.length;d++){for(var e=a.charCodeAt(d);255<e;)b[c++]=e&255,e>>=8;b[c++]=e}return b};function Gr(a){this.j=a;this.h=this.j.length/4;this.l=this.h+6;this.i=[[],[],[],[]];this.n=[[],[],[],[]];this.g=Array(4*(this.l+1));for(a=0;a<this.h;a++)this.g[a]=[this.j[4*a],this.j[4*a+1],this.j[4*a+2],this.j[4*a+3]];var b=Array(4);for(a=this.h;a<4*(this.l+1);a++){b[0]=this.g[a-1][0];b[1]=this.g[a-1][1];b[2]=this.g[a-1][2];b[3]=this.g[a-1][3];if(0==a%this.h){var c=b,d=c[0];c[0]=c[1];c[1]=c[2];c[2]=c[3];c[3]=d;Hr(b);b[0]^=Ir[a/this.h][0];b[1]^=Ir[a/this.h][1];b[2]^=Ir[a/this.h][2];b[3]^=Ir[a/this.h][3]}else 6<
this.h&&4==a%this.h&&Hr(b);this.g[a]=Array(4);this.g[a][0]=this.g[a-this.h][0]^b[0];this.g[a][1]=this.g[a-this.h][1]^b[1];this.g[a][2]=this.g[a-this.h][2]^b[2];this.g[a][3]=this.g[a-this.h][3]^b[3]}}function Jr(a,b){for(var c=0;4>c;c++)for(var d=0;4>d;d++)a.i[c][d]^=a.g[4*b+d][c]}function Kr(a){for(var b=Lr,c=0;4>c;c++)for(var d=0;4>d;d++)a.i[c][d]=b[a.i[c][d]]}function Mr(a){for(var b=1;4>b;b++)for(var c=0;4>c;c++)a.n[b][c]=a.i[b][c];for(b=1;4>b;b++)for(c=0;4>c;c++)a.i[b][c]=a.n[b][(c+b)%4]}
function Hr(a){a[0]=Lr[a[0]];a[1]=Lr[a[1]];a[2]=Lr[a[2]];a[3]=Lr[a[3]]}
var Lr=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,
61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],Ir=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,
0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]],Nr=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30,32,34,36,38,40,42,44,46,48,50,52,54,56,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,118,120,122,124,126,128,130,132,134,136,138,140,142,144,146,148,150,152,154,156,158,160,162,164,166,168,170,172,174,176,178,180,182,184,186,188,190,192,194,196,198,200,202,204,206,208,210,212,214,216,218,220,222,224,226,228,230,232,234,236,238,240,242,244,246,248,250,252,254,
27,25,31,29,19,17,23,21,11,9,15,13,3,1,7,5,59,57,63,61,51,49,55,53,43,41,47,45,35,33,39,37,91,89,95,93,83,81,87,85,75,73,79,77,67,65,71,69,123,121,127,125,115,113,119,117,107,105,111,109,99,97,103,101,155,153,159,157,147,145,151,149,139,137,143,141,131,129,135,133,187,185,191,189,179,177,183,181,171,169,175,173,163,161,167,165,219,217,223,221,211,209,215,213,203,201,207,205,195,193,199,197,251,249,255,253,243,241,247,245,235,233,239,237,227,225,231,229],Or=[0,3,6,5,12,15,10,9,24,27,30,29,20,23,18,
17,48,51,54,53,60,63,58,57,40,43,46,45,36,39,34,33,96,99,102,101,108,111,106,105,120,123,126,125,116,119,114,113,80,83,86,85,92,95,90,89,72,75,78,77,68,71,66,65,192,195,198,197,204,207,202,201,216,219,222,221,212,215,210,209,240,243,246,245,252,255,250,249,232,235,238,237,228,231,226,225,160,163,166,165,172,175,170,169,184,187,190,189,180,183,178,177,144,147,150,149,156,159,154,153,136,139,142,141,132,135,130,129,155,152,157,158,151,148,145,146,131,128,133,134,143,140,137,138,171,168,173,174,167,
164,161,162,179,176,181,182,191,188,185,186,251,248,253,254,247,244,241,242,227,224,229,230,239,236,233,234,203,200,205,206,199,196,193,194,211,208,213,214,223,220,217,218,91,88,93,94,87,84,81,82,67,64,69,70,79,76,73,74,107,104,109,110,103,100,97,98,115,112,117,118,127,124,121,122,59,56,61,62,55,52,49,50,35,32,37,38,47,44,41,42,11,8,13,14,7,4,1,2,19,16,21,22,31,28,25,26];function Pr(a){this.g=a};function Qr(){this.h=-1};function Rr(a,b){this.h=-1;this.h=Sr;this.j=q.Uint8Array?new Uint8Array(this.h):Array(this.h);this.l=this.i=0;this.g=[];this.s=a;this.n=b;this.u=q.Int32Array?new Int32Array(64):Array(64);t(Tr)||(q.Int32Array?Tr=new Int32Array(Ur):Tr=Ur);this.l=this.i=0;this.g=q.Int32Array?new Int32Array(this.n):fb(this.n)}var Tr;D(Rr,Qr);for(var Sr=64,Vr=Sr-1,Wr=[],Xr=0;Xr<Vr;Xr++)Wr[Xr]=0;var Yr=eb(128,Wr);
function Zr(a){for(var b=a.j,c=a.u,d=0,e=0;e<b.length;)c[d++]=b[e]<<24|b[e+1]<<16|b[e+2]<<8|b[e+3],e=4*d;for(b=16;64>b;b++){var e=c[b-15]|0,d=c[b-2]|0,f=(c[b-16]|0)+((e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3)|0,h=(c[b-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;c[b]=f+h|0}for(var d=a.g[0]|0,e=a.g[1]|0,k=a.g[2]|0,l=a.g[3]|0,m=a.g[4]|0,n=a.g[5]|0,p=a.g[6]|0,f=a.g[7]|0,b=0;64>b;b++)var r=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&e^d&k^e&k)|0,h=m&n^~m&p,f=f+((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<
7))|0,h=h+(Tr[b]|0)|0,h=f+(h+(c[b]|0)|0)|0,f=p,p=n,n=m,m=l+h|0,l=k,k=e,e=d,d=h+r|0;a.g[0]=a.g[0]+d|0;a.g[1]=a.g[1]+e|0;a.g[2]=a.g[2]+k|0;a.g[3]=a.g[3]+l|0;a.g[4]=a.g[4]+m|0;a.g[5]=a.g[5]+n|0;a.g[6]=a.g[6]+p|0;a.g[7]=a.g[7]+f|0}
Rr.prototype.update=function(a,b){t(b)||(b=a.length);var c=0,d=this.i;if(x(a))for(;c<b;)this.j[d++]=a.charCodeAt(c++),d==this.h&&(Zr(this),d=0);else if(v(a))for(;c<b;){var e=a[c++];if(!("number"==typeof e&&0<=e&&255>=e&&e==(e|0)))throw Error("message must be a byte array");this.j[d++]=e;d==this.h&&(Zr(this),d=0)}else throw Error("message must be string or array");this.i=d;this.l+=b};
var Ur=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,
4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function $r(){Rr.call(this,8,as)}D($r,Rr);var as=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function bs(a,b){this.g=a;this.j=Fr("requestAnimationFrame");this.filter=b||null;this.i=!1;this.h=""}function cs(){var a=aj;a.i||(ds(a),a.i=!0,window.setInterval(function(){a.count().K(function(b){20<b&&ds(a)})},6E5))}bs.prototype.count=function(){return this.g.count("log")};
function ds(a){var b=Bj();if(b){var c={"Content-Type":"application/json"};a.g.values("log",null,40).K(function(a){if(0!=a.length){var e=a.map(function(a){return a.key});a=JSON.stringify(a);a=new Jj("https://mhardartway.s3.amazonaws.com/"+(""+e[0]+this.h),"PUT",null,c,a);e=e.map(function(a){return new uo("log",a)});b.request(a).h(function(a,b){Gj(b)&&this.g.remove(e).K(function(a){a==e.length&&ds(this)},this)},this)}},a)}}
bs.prototype.log=function(a){this.filter&&(a=this.filter(a));if(a){var b=JSON.stringify(a);a=String(ma());for(var c=[],d=0;16>d;++d)c[d]=256*Math.random()|0;var d=this.j,e=new $r;e.update(Fr(a));e.update(c);e.update(d);var d=[],f=8*e.l;56>e.i?e.update(Yr,56-e.i):e.update(Yr,e.h-(e.i-56));for(var h=63;56<=h;h--)e.j[h]=f&255,f/=256;Zr(e);for(h=f=0;h<e.s;h++)for(var k=24;0<=k;k-=8)d[f++]=e.g[h]>>k&255;b=Fr(b);e=c.length-b.length%c.length;for(h=0;h<e;h++)b.push(10);d=new Gr(d);d=new Pr(d);e=[];k=c;for(h=
0;h<b.length;h+=16){for(var f=ib(b,h,h+16),l=[],m=0;m<f.length;m++)l.push(f[m]^k[m]);for(var k=f=d.g,n=void 0,n=void 0,m=0;4>m;m++)for(var p=0;4>p;p++)n=4*p+m,n=l[n],k.i[m][p]=n;Jr(f,0);for(k=1;k<f.l;++k){Kr(f);Mr(f);l=f.i;m=f.n[0];for(p=0;4>p;p++)m[0]=l[0][p],m[1]=l[1][p],m[2]=l[2][p],m[3]=l[3][p],l[0][p]=Nr[m[0]]^Or[m[1]]^m[2]^m[3],l[1][p]=m[0]^Nr[m[1]]^Or[m[2]]^m[3],l[2][p]=m[0]^m[1]^Nr[m[2]]^Or[m[3]],l[3][p]=Or[m[0]]^m[1]^m[2]^Nr[m[3]];Jr(f,k)}Kr(f);Mr(f);Jr(f,f.l);k=[];for(l=0;4>l;l++)for(m=
0;4>m;m++)k[4*m+l]=f.i[l][m];f=k;gb(e,f);k=f}b=e;if(8192>b.length)d=String.fromCharCode.apply(null,b);else for(d="",e=0;e<b.length;e+=8192)d+=String.fromCharCode.apply(null,ib(b,e,e+8192));this.g.put("log",{key:a,salt:c,value:d})}};var es,Aj,fs=R("ydn.crm"),gs=null,hs={};function is(a,b){"sync"==b&&(B(a["lg-cc"])&&Ui(!!a["lg-cc"].newValue),B(a["lg-br"])&&Er(!!a["lg-br"].newValue),B(a["cp-po"])&&(hs["cp-po"]=a["cp-po"].newValue||js))}var ks=!1,ls="";ma();
function ms(){if(!ks){ks=!0;var a;a="Yathit CRM Bridge ydn.crm.version 0.12.1 (dev)";$i("ydn.crm","fine");$i("ydn.crm.inj.App","finer");$i("ydn.ds","fine");q.console.info(a);q.console.info("API documentation: http://dev.yathit.com/\nFeedback and suggestion: https://yathit.uservoice.com/\nBug report: https://github.com/yathit/sugarcrm-gmail-chrome-extension");Ui(!1);Aj||(es||(es=new Gi(0)),Aj=new ln(es),zj());gs=new zr("ydn.crm",{stores:[{name:"log",keyPath:"key"},{name:"db-logger",autoIncrement:!0,
indexes:[{name:"level"},{name:"time"},{name:"name"},{name:"name, time",keyPath:["name","time"]}]},{name:"default",autoIncrement:!0}]});Dr=new Ar(gs);Cr();Dr.l=300;Dr.n["ydn.db.tr.DbOperator"]=!0;Er(!1);Wo(gs,function(){gs.get("default","install-id").K(function(a){a?ls=a["install-id"]:(ls=ma()+Math.random().toFixed(8).substr(2),a={},a["install-id"]=ls,gs.put("default",a,"install-id"));aj.h=ls})});fs.log(uh,"Starting ydn.crm.App:0.12.1",void 0);var b=["lg-cc","cp-po","lg-br"];chrome.storage.sync.get(b,
function(a){for(var d={},e=0;e<b.length;e++)t(a[b[e]])&&(d[b[e]]={newValue:a[b[e]]});is(d,"sync")});chrome.storage.onChanged.addListener(is);Kj=aj=new bs(gs,function(a){return!a||a.HttpRequestData&&"https://mail.google.com/mail/feed/atom/bazinga"==a.HttpRequestData.path?null:a});window.onerror=function(a,b,e,f){var h="";f&&f instanceof Error&&(h=f.stack+"");bj({message:a,url:b,lineNumber:e,stack:h})}}};function ns(a){this.h=a;this.g=null}ns.prototype.logger=R("ydn.crm.ui.gmail.Template");ns.prototype.p=function(){return this.h};function os(a){if("FORM"!=a.tagName)return null;for(a=a.nextElementSibling;a&&"TABLE"!=a.tagName;)a=a.nextElementSibling;return a}function ps(a){a=zc(a,"table");a=zc(a.parentElement,"table");return zc(a.parentElement,"table").querySelector("form")}
function qs(a,b){if(!a)return null;var c=b||fs,d=ps(a);if(!d)return Dh(c,"Gmail header FORM not found"),null;d=d.querySelector("textarea[name=to]");if(!d)return Dh(c,"To textarea not found."),null;d=d.parentElement.querySelector("span[email]");return d?d?d.getAttribute("email"):null:(Dh(c,"email span not found in TO element"),null)}
ns.prototype.i=function(a){if(a.target instanceof Xl){var b=a.target.p();a=this.p();if(b){var c=qs(this.g,this.logger),d=!1;c||(c=a.i?a.i.g:null,d=!!c);c?rs(this,b.id,c).M(function(a){var f=ps(this.g),h=f.querySelector('input[name="subjectbox"]'),k=os(f).querySelector('div[aria-label="Message Body"]');d&&(f.querySelector('textarea[name="to"]').value=c);h.value=b.name;f=document.createElement("span");f.innerHTML=a;k.appendChild(f)},function(a){throw a;},this):window.alert("A valid recipient email address is required in To input field.")}else window.open(yl(a)+
"/index.php?module=EmailTemplates&action=EditView&return_module=EmailTemplates&return_action=DetailView",U(a))}};
function ss(a,b){var c=new Wb(b.ownerDocument);if(a.g)a.g.parentElement!=b&&(a.g.parentElement&&a.g.parentElement.removeChild(a.g),c=c.o("span"),c.className="ydn-crm crm-template inj",c.appendChild(a.g),b.insertBefore(c,b.firstElementChild));else{a.g=b;var d=new bm(c),e=new jm("$t",d,null,c);e.ra("Insert SugarCRM template");ts(a,function(a){for(var b=[],c=0;c<a.length;c++)-1==b.indexOf(a[c].type)&&b.push(a[c].type);for(c=0;c<b.length;c++)if(b[c]){for(var e=new cn(b[c],null,d.g),m=0;m<a.length;m++)if(a[m].type==
b[c]){var n=new Xl(a[m].name,a[m]);en(e).O(n,!0)}d.O(e,!0)}for(m=0;m<a.length;m++)a[m].type||(n=new Xl(a[m].name,a[m]),d.O(n,!0));d.O(new am,!0);d.O(new Xl("New template...",null),!0)},a);c=c.o("span");c.className="ydn-crm crm-template inj";b.insertBefore(c,b.firstElementChild);e.render(c);bd(d,"action",a.i,!0,a)}}function us(a){return 0<=a.indexOf("$contact_name")||0<=a.indexOf("$contact_account_name")}
function ts(a,b,c){Bl(a.p(),"EmailTemplates",void 0,void 0,void 0,200).M(function(a){a=a[0];for(var e=[],f=0;f<a.result.length;f++){var h=a.result[f];e.push({id:h.id,name:h.name,type:h.type||"",ji:us(h.body_html)})}b.call(c,e)},function(a){throw a;},a)}
function rs(a,b,c){var d=a.p();if(x(c))return d.send("query",[{store:"Contacts",index:"ydn$emails",key:c,limit:1},{store:"Leads",index:"ydn$emails",key:c,limit:1}]).K(function(a){var c=null;a[0].result[0]?c=new zk(U(d),"Contacts",a[0].result[0]):a[1].result[0]&&(c=new zk(U(d),"Leads",a[1].result[0]));a=c?new jl(d,c):null;return rs(this,b,a)},a);if(!x(b)||16>b.length)throw Error("valid template id required, but "+b+" found.");return d.send("get",{module:"EmailTemplates",id:b}).K(function(a){a=a.body_html;
if(x(a)){var d=this.p().j;if(d&&Ak(d)){var h;h=this.p().s.Users;for(var k in h.module_fields)h=d.value(k),x(h)&&(a=a.replace(new RegExp("\\$user_"+k,"g"),h))}else Dh(this.logger,"Login user info not available");if(c&&Ak(c.g))for(k in d=Gk(c),d.module_fields)h=c.value(k),x(h)&&(a=a.replace(new RegExp("\\$contact_"+k,"g"),h),a=a.replace(new RegExp("{::future::Contacts::"+k+"::}","g"),h));return a}throw Error("Template record: "+b+" does not have body_html");},a)};var vs;
vs={l:["BC","AD"],j:["Before Christ","Anno Domini"],G:"JFMAMJJASOND".split(""),Da:"JFMAMJJASOND".split(""),P:"January February March April May June July August September October November December".split(" "),Ta:"January February March April May June July August September October November December".split(" "),J:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Ob:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Hf:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),oe:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
V:"Sun Mon Tue Wed Thu Fri Sat".split(" "),Pb:"Sun Mon Tue Wed Thu Fri Sat".split(" "),R:"SMTWTFS".split(""),La:"SMTWTFS".split(""),S:["Q1","Q2","Q3","Q4"],N:["1st quarter","2nd quarter","3rd quarter","4th quarter"],g:["AM","PM"],h:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],Gf:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],i:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],n:6,If:[5,6],s:5};var ws;function xs(a){var b=ma(),c=Math.floor((b-a)/6E4),b=!1;0>c&&(b=!0,c*=-1);if(60>c)return ws(c,b,0);c=Math.floor(c/60);if(24>c)return ws(c,b,1);c=new Date(ma());c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);c=Math.ceil((c.getTime()-a)/864E5);b&&(c*=-1);return 14>c?ws(c,b,2):""}
ws=function(a,b,c){var d;d=String(a);if(void 0!==vs.Eg){for(var e=[],f=0;f<d.length;f++){var h=d.charCodeAt(f);e.push(48<=h&&57>=h?String.fromCharCode(vs.Eg+h-48):d.charAt(f))}d=e.join("")}return b||0!=c?b&&0==c?1==a?"in "+(d+" minute"):"in "+(d+" minutes"):b||1!=c?b&&1==c?1==a?"in "+(d+" hour"):"in "+(d+" hours"):b||2!=c?b&&2==c?1==a?"in "+(d+" day"):"in "+(d+" days"):"":1==a?d+" day ago":d+" days ago":1==a?d+" hour ago":d+" hours ago":1==a?d+" minute ago":d+" minutes ago"};function Ck(a){return new Date(a+" GMT")}function Fl(a){return a.toISOString().replace("T"," ").replace(/\..+/,"")};function ys(a){for(var b=zs,c=0;c<b.h.length;c++){var d=b.h[c],e=b.g[a];e&&d.n(a,e)}}var zs=new function(){this.g=[];this.h=[]};function As(a){zs.g.push({title:a,update:void 0,type:"n"});a=zs.g.length-20;0<=a&&(zs.g[a]=void 0);a=zs.g.length-1;ys(a);return a}function Bs(a,b,c,d){var e=zs.g[a];e&&(e.title=b,c&&(e.update=c),d&&(e.type=d),ys(a))};function Cs(){return'<div class="setting-dialog"><form class="basic-setting"><div><input type="checkbox" name="log-on-console"/> Log on console<br /></div><div class="group-panel" style="display: none"><div>Gmail context panel location</div>\x3c!-- see this value in ydn.crm.ui.ContextPanelPosition --\x3e<input type="radio" name="context-panel-position" value="in"/> Inline<br /><input type="radio" name="context-panel-position" value="st"/> Stick on right side<br /><input type="radio" name="context-panel-position" value="wg"/> Inside widget panel<br /></div></form></div>'}
Cs.g="templ.ydn.crm.app.setting";function Ds(a){var b=document.querySelector('span[name="me"][email]');if(b)return b=b.getAttribute("email"),Hg(b);if(b=document.title.match(/- (\S+@\S+\.\S+) -/))return Hg(b[1]);a--;var c=new P;0<a?setTimeout(function(){Ds(a).M(c.callback,c.I,c)},500):c.I(null);return c}function Es(){if("https://mail.google.com"!=location.origin)return Ig(null);document.querySelector('span[name="me"][email]');return Ds(3).pe(function(){return Fs()})}
function Fs(){if("https://mail.google.com"!=location.origin)return Ig("");var a=new Jj("https://mail.google.com/mail/feed/atom/bazinga","GET",{zx:"124"}),a=Bj("default").request(a),b=new P;window.setTimeout(function(){b.h||(b.I(),b=null)},2E3);a.h(function(a,d){if(b)if(Gj(d)){var e=Ij(d).match(/<title>(.+?)(\S+)<\/title>/);e?b.callback(e[2]):b.I()}else b.I()});return b};function Gs(a,b,c,d){Cm.call(this);this.J=d;Qm(this,c);this.setTitle(a);this.Hb=a=Lf(b,null);this.Fa&&(this.Fa.innerHTML=Kf(a));this.xd=!0;Pm(this,!1);Fm(this);this.ud=!0;a=N(this);a.listen(this,Rm,this.Pb);a.listen(this,Rm,this.Ob)}D(Gs,Cm);Gs.prototype.Pb=function(a){this.J&&(this.J.callback(a.key),this.J=null)};Gs.prototype.Ob=function(){this.J&&(this.J.callback(Km),this.J=null)};
function Hs(){var a=new P,b=Sm(new Jm,Tm,!0,!0);(new Gs("Yathit CRM Setting","User setting cannot change because you are not login Yathit server.",b,a)).Na(!0);return a};function $(){this.i=this.h=this.l=this.g=null;ms();this.j=null}u($);g=$.prototype;g.logger=R("ydn.crm.ui.UserSetting");g.isLogin=function(){return!!this.g&&this.g.is_login};function Is(a){return a.isLogin()&&(!a.j||a.j==a.g.email)}g.$h=function(){return this.g};
g.je=function(){if(!this.i){var a=this;chrome.storage.sync.get("user-setting",function(b){a.l=b["user-setting"]||Js});Ks(this);this.i=Es().ed(function(a){(this.j=a)?As("Loading user setting for "+a):As("User setting not available.");return sk().send("login-info",{gmail:a}).M(function(a){(this.g=a)&&a.is_login?As(a.email+" login."):(As(a.email+" login failed."),Dh(this.logger,"login fail"))},function(){this.g=null;As("login error.");Dh(this.logger,"login fail")},this)},this)}return this.i};
function Ls(a){a.g=null;a.l=null;a.i=null;a.je()}g.Hg=function(){return this.g.email};g.Bg=function(a){var b=sk("sugarcrm",a);return Cg(this.je()).K(function(){return b.send("info-module").K(function(a){if(v(a))for(var b=0;b<a.length;b++)Ms(a[b]);else Ms(a);return a},this)},this)};
function Ms(a){var b="",c="",d;for(d in a.module_fields){var e=a.module_fields[d];0<="created_by created_by_name date_entered date_modified deleted modified_user_id modified_by_name id".split(" ").indexOf(d)&&(e.calculated=!0);if(0<=["salutation","name","last_name","first_name","full_name"].indexOf(d))e.group="name";else if(/^email\d?$/.test(d))e.group="email";else if(/^phone?/.test(d))e.group="phone";else if(!e.group&&qa(d,b)){e.group=c;continue}b=d;c=e.group}for(d in a.link_fields)b=a.link_fields[d],
"contact"!=d||b.module||(b.module="Contacts")}var Js={},Ns={Group:{},Field:{}};function Ks(a){if(a.h)Hg(a.h);else{var b=new P;chrome.storage.sync.get("sugar-setting",function(c){a.h=c["sugar-setting"]||Ns;b.callback(a.h)})}}function Os(a){var b={};b["sugar-setting"]=a.h;var c=new P;chrome.storage.sync.set(b,function(){c.callback(b)})}function Ps(){var a=$.w();a.h||Ks(a);return a.h||Lj(Ns)}
function Qs(a){Cm.call(this);this.J=a;Qm(this,Dm());this.setTitle("Yathit CRM Setting");this.xd=!0;Pm(this,!1);Fm(this);this.ud=!0;a=this.F();a.classList.add("ydn-crm");Pf(a,Cs);a=N(this);a.listen(this,Rm,this.Pb);a.listen(this,Rm,this.Ob)}D(Qs,Cm);Qs.prototype.Pb=function(){if(this.J){var a=this.F().querySelector("form.basic-setting"),b={};b["cp-po"]=Rs(a,"context-panel-position");b["lg-cc"]=!!Rs(a,"log-on-console");this.J.callback(b);this.J=null}};
Qs.prototype.Ob=function(){this.J&&(this.J.callback(null),this.J=null)};
$.prototype.show=function(){if(!Is(this))return Hs();var a=new P,b=new Qs(a),c,d=["lg-cc","cp-po"];chrome.storage.sync.get(d,function(a){c=a;var d=b.F().querySelector("form.basic-setting"),h=d.querySelector("input[name=log-on-console]");a=!!a["lg-cc"];var k=h.type;if(t(k))switch(k.toLowerCase()){case "checkbox":case "radio":h.checked=a?"checked":null;break;case "select-one":h.selectedIndex=-1;if(x(a))for(var l=0;k=h.options[l];l++)if(k.value==a){k.selected=!0;break}break;case "select-multiple":x(a)&&
(a=[a]);for(l=0;k=h.options[l];l++)if(k.selected=!1,a)for(var m,n=0;m=a[n];n++)k.value==m&&(k.selected=!0);break;default:h.value=null!=a?a:""}d=d.querySelectorAll("input[name=context-panel-position]");h=hs["cp-po"]||js;for(a=0;a<d.length;a++)if(h==d[a].value){d[a].setAttribute("checked","1");break}b.Na(!0)}.bind(this));return a.K(function(a){if(a){for(var b={},h=0;h<d.length;h++){var k=d[h];a[k]!=c[k]&&(b[k]=a[k])}(a=0<Object.keys(b).length)&&chrome.storage.sync.set(b);return a}})};function Ss(a){this.name=a||""}Ss.prototype.he=function(){return this.name.toUpperCase()};Ss.prototype.getName=function(){return this.name};function Ts(a){this.name=a.name||"";this.g=a}D(Ts,Ss);g=Ts.prototype;g.he=function(){return this.g.label||""};g.getName=function(){return this.g.name||""};g.Xf=function(){this.getName();return!0};g.ie=function(){return Ps().Field[this.g.name]||null};g.Qf=function(){var a=Ps();a.Field[this.g.name]||(a.Field[this.g.name]={});return a.Field[this.g.name]};
g.qb=function(){var a=this.ie();a&&t(a.normallyHide)?a=!!a.normallyHide:this.g.group?a=-1==Us.indexOf(this.g.group):(this.getName(),a=!0);return a};function Vs(a){this.name=a||""}D(Vs,Ss);Vs.prototype.he=function(){return Vs.m.he.call(this).toUpperCase()};Vs.prototype.ie=function(){return Ps().Group[this.name]||null};Vs.prototype.Qf=function(){var a=Ps();a.Group[this.name]||(a.Group[this.name]={});return a.Group[this.name]};var Us=["name","email","phone",""];
Vs.prototype.qb=function(){var a=this.ie();return a?!!a.normallyHide:-1==Us.indexOf(this.name)};Vs.prototype.Xf=function(){var a=this.getName();return-1==Us.indexOf(a)};function Ws(a,b){I.call(this,"field-change",b);this.h=a}D(Ws,I);function Xs(a,b){I.call(this,"action",b);this.h=a}D(Xs,I);function Ys(a){var b=a.type;if(!t(b))return null;switch(b.toLowerCase()){case "checkbox":case "radio":return a.checked?a.value:null;case "select-one":return b=a.selectedIndex,0<=b?a.options[b].value:null;case "select-multiple":for(var b=[],c,d=0;c=a.options[d];d++)c.selected&&b.push(c.value);return b.length?b:null;default:return t(a.value)?a.value:null}}function Rs(a,b){var c=a.elements[b];if(c){if(c.type)return Ys(c);for(var d=0;d<c.length;d++){var e=Ys(c[d]);if(e)return e}}return null};function Zs(){}u(Zs);Zs.prototype.t=function(){return"field"};function $s(a,b){var c="ydnf-"+(a+"-"+b.name);if(b.options){if(!document.getElementById(c)){var d=document.createElement("datalist");d.id=c;for(var e in b.options)if(e){var f=document.createElement("option");f.setAttribute("value",e);d.appendChild(f)}document.body.appendChild(d)}return c}return null}Zs.prototype.g=function(a){var b=a.p(),c=a.g.o("div");c.classList.add(this.t());c.setAttribute("name",b.g);return a.v=c};
Zs.prototype.i=function(a){var b=a.k(),c=a.p();L(b,!!c);if(c){var d=c.h();b.textContent=d;var e=Ik(c);e?b.setAttribute("title",e):b.removeAttribute("title");(x(d)?ta(d):null==d)?b.classList.add("empty"):b.classList.remove("empty");!Hk(c)&&at(a).qb()?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};Zs.prototype.h=function(a){return a.F().textContent};function bt(){}D(bt,Zs);u(bt);bt.prototype.g=function(a){var b=bt.m.g.call(this,a),c=a.p();a=a.g;var d=Ik(c),c=Kk(c),e=Yd(Xd.w()),f=a.o("input",{type:"checkbox",id:e});a=a.o("label",{"for":e},d);c&&f.setAttribute("disabled","true");f.classList.add("value");b.appendChild(f);b.appendChild(a);return b};
bt.prototype.i=function(a){var b=a.k(),c=a.p();L(b,!!c);if(c){var d=c.h(),e=x(d)?!ta(d):null!=d,f=b.querySelector(".value");"bool"!=Jk(c)||ea(d)||(d="1"==d||"on"==d||"true"==d?!0:!1);f.value=d;e?b.classList.remove("empty"):b.classList.add("empty");!Hk(c)&&at(a).qb()&&b.classList.add("normally-hide")}};bt.prototype.h=function(a){a=a.F().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function ct(){}D(ct,Zs);u(ct);ct.prototype.g=function(a){var b=ct.m.g.call(this,a),c=a.p();a=a.g;var d=Ik(c),d=a.o("input",{type:"text","class":"value",title:d,placeholder:d});b.appendChild(d);Kk(c)&&d.setAttribute("disabled","1");c=c.j();0<c.length&&(a=a.o("div",{"class":"hover-button more-menu"}),b.appendChild(a),Uk(a,c));return b};
ct.prototype.i=function(a){var b=a.k(),c=a.p();L(b,!!c);if(c){var d=c.h(),e=x(d)?!ta(d):null!=d;b.querySelector(".value").value=e?d:"";if(d=b.querySelector(".more-menu")){d.innerHTML="";var f=c.j();Uk(d,f)}e?b.classList.remove("empty"):b.classList.add("empty");!Hk(c)&&at(a).qb()&&b.classList.add("normally-hide")}};ct.prototype.h=function(a){return a.F().querySelector(".value").value};function dt(){}D(dt,ct);u(dt);dt.prototype.g=function(a){var b=dt.m.g.call(this,a),c=b.querySelector(".value");c.classList.add("enum");(a=et(a))&&c.setAttribute("list",a);return b};function ft(){}D(ft,Zs);u(ft);ft.prototype.g=function(a){var b=ft.m.g.call(this,a),c=a.g;a=Ik(a.p());c=c.o("TEXTAREA",{"class":"value",title:a,placeholder:a});b.appendChild(c);return b};ft.prototype.i=function(a){var b=a.k(),c=a.p();L(b,!!c);if(c){var d=c.h(),e=x(d)?!ta(d):null!=d;b.querySelector(".value").value=e?d:"";e?b.classList.remove("empty"):b.classList.add("empty");!Hk(c)&&at(a).qb()&&b.classList.add("normally-hide")}};
ft.prototype.h=function(a){a=a.F().querySelector(".value");return"LABEL"==a.tagName||"SPAN"==a.tagName||"DIV"==a.tagName?a.textContent:"checkbox"==a.type?a.checked:a.value};function gt(a,b,c){M.call(this,c);b||(b=Jk(a),b="bool"==b?bt.w():"text"==b?ft.w():"enum"==b?dt.w():ct.w());this.h=b;this.l=a}D(gt,M);function at(a){return new Ts(a.p().i())}g=gt.prototype;g.D=function(){this.h.g(this)};g.A=function(){var a=this.k().querySelector("input");a&&N(this).listen(a,"blur",this.Xh);(a=this.k().getElementsByClassName("more-menu")[0])&&N(this).listen(a,"click",this.Yh)};
g.Yh=function(a){a=a.target;var b=zc(a,null,"goog-menuitem").getAttribute("name");if(b){b=new Xs(b,this);J(this,b);var c=zc(a,null,"more-menu");L(c,!1);setTimeout(function(){L(c,!0)},1E3);b.n||("remove"==b.h?(a=this.Pf(),J(this,new Ws(a,this))):"edit"==b.h&&ht(this))}};function it(a){var b=a.p();a=et(a);return{Ga:[{label:Ik(b),name:b.g,value:b.h(),type:Jk(b),Sd:a}]}}function et(a){a=a.p();return $s(kl(a.parent.module),a.i())}
function jt(a){var b=new Cm;Qm(b,Dm());b.setTitle("Edit name");b.xd=!0;Pm(b,!0);Fm(b);b.ud=!0;b.F().classList.add("ydn-crm");var c='<div class="field-edit-dialog"><table><tbody>';a=a.Ga;for(var d=a.length,e=0;e<d;e++)var f=a[e],c=c+('<tr class="field" name="'+Tf(f.name)+'"><td class="name">'+Tf(f.label)+'</td><td><input class="value" type="'+Tf(f.type)+'"'+(f.Sd?'list="'+Tf(f.Sd)+'"':"")+'value="'+Tf(f.value)+'" /></td></tr>');c=Lf(c+"</tbody></table></div>",null);b.Hb=c;b.Fa&&(b.Fa.innerHTML=Kf(c));
return b}function ht(a){var b=jt(it(a));N(a).listen(b,Rm,a.zg,!1);Vd(N(a),b,function(){N(this).ca(b,Rm,this.zg,!1)});b.Na(!0)}g.zg=function(a){if("ok"==a.key){a=a.target.F().querySelectorAll(".field");for(var b={},c=this.p(),d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;c.h()!=f&&(b[e]=f)}J(this,new Ws(b,this))}};g.Xh=function(){var a=this.h.h(this);(a=this.p().l(a))&&J(this,new Ws(a,this))};g.Pf=function(){var a={};a[this.p().g]="";return a};
function kt(a){var b=a.h.h(a);a=a.p();var c=a.Lc();if("bool"==Jk(a)&&t(c)&&!ea(c))if("on"==c||"off"==c)b=b?"on":"off";else if("true"==c||"false"==c)b=b?"true":"false";else{if("1"==c||"0"==c)b=b?"1":"0"}else!1===c&&"bool"!=!Jk(a)&&"false"==b?b=c:t(c)||b||(b=c);return b!=c?b:null}g.U=function(){return this.p().h()};function lt(a,b){M.call(this,b);this.l=a}D(lt,M);function mt(a,b){var c=a.k();b?(c.classList.add("edit"),c.classList.remove("view")):(c.classList.remove("edit"),c.classList.add("view"))}function nt(a){var b=a.k();b.classList.add("view");b.classList.remove("edit");for(b=0;b<ge(a);b++)O(a,b).ge()}lt.prototype.t=function(){return"record-body"};lt.prototype.D=function(){lt.m.D.call(this);var a=this.k();a.classList.add(this.t());a.classList.add("view")};
function ot(a){for(var b=null,c=0;c<ge(a);c++){var d=O(a,c).Bc();if(d){b||(b={});for(var e in d)b[e]=d[e]}}return b}function pt(a){for(var b=0;b<ge(a);b++)O(a,b).fe()};function qt(a,b){var c=ct.w();gt.call(this,a,c,b)}D(qt,gt);qt.prototype.Pf=function(){return Pk(this.p())};function rt(a,b){var c=ct.w();gt.call(this,a,c,b)}D(rt,gt);function st(){}u(st);st.prototype.t=function(){return"record-group"};function tt(a){this.data=a||{}}function ut(a){a=a.trim().replace("%40","@");return-1==a.indexOf("@")||-1==a.indexOf(".")?Ig(Error("Invalid email "+a)):sk().send("social-profile",{email:a}).K(function(a){return new tt(a)})};function vt(a,b){M.call(this,b);this.l=a}D(vt,M);g=vt.prototype;g.F=function(){return Yb("content",this.k())};g.Bc=function(){return null};g.t=function(){return"record-group"};g.D=function(){var a=this.g,b=a.o("div",this.t()),c=a.o("div","header"),a=a.o("div","content");b.appendChild(c);b.appendChild(a);this.v=b;b.setAttribute("name",this.p().g);(new Vs(this.p().g)).qb()&&b.classList.add("normally-hide")};g.fe=function(){};
g.ge=function(){var a=(new Vs(this.p().g)).qb(),b=this.k();a?b.classList.add("normally-hide"):b.classList.remove("normally-hide")};g.Af=function(a,b){var c=a?'[name="'+a+'"]':"";if(c=this.F().querySelector("div.field"+c+" input.value"))c.value=b};g.Df=function(){return!1};function wt(){}u(wt);function xt(a,b){a.F().querySelector("input.value").value=b};function yt(a,b,c){b||wt.w();vt.call(this,a,c)}D(yt,vt);g=yt.prototype;
g.D=function(){yt.m.D.call(this);var a=this.p(),b=this.g,c=b.o("div","field"),d=a.Ge(),d=b.o("input",{type:"text","class":"value",title:d,placeholder:d});c.appendChild(d);a=a.Ee();v(a)?(b=b.o("div",{"class":"hover-button more-menu"}),c.appendChild(b),Uk(b,a)):B(a)&&(d=a.name==Lk?"delete-field":"detail-field",b=b.o("div",{"class":"hover-button "+d,title:a.label}),d=Rk("delete-field"==d?"delete":"more-horiz"),b.appendChild(d),b.setAttribute("name",a.name),c.appendChild(b));this.F().appendChild(c)};
g.A=function(){yt.m.A.call(this);var a=this.k().querySelector("input");a&&N(this).listen(a,"blur",this.Zh);(a=this.k().getElementsByClassName("hover-button")[0])&&N(this).listen(a,"click",this.Eh)};g.Zh=function(){var a=this.Bc();var b=this.p();if(B(a)){var c=!1,d={},e;for(e in a)if(b.Ab(e)){var f=b.module.value(e);a[e]!==f&&(c=!0,d[e]=a[e])}else c=!0,d[e]=a[e];a=c?d:null}else a=null;a&&J(this,new Ws(a,this))};
g.Eh=function(a){if(a=a.i.getAttribute("name"))a=new Xs(a,this),J(this,a),a.n||zt(this,a)};g.Bc=function(){for(var a=null,b=0;b<ge(this);b++){var c=O(this,b),d=kt(c);null!==d&&(a||(a={}),a[c.p().g]=d)}return a};function zt(a,b){if("edit"==b.h){var c=jt(a.Ef());N(a).listen(c,Rm,a.Ag,!1);Vd(N(a),c,function(){N(this).ca(c,Rm,this.Ag,!1)});c.Na(!0)}}
g.Ag=function(a){if("ok"==a.key){a=a.target.F().querySelectorAll(".field");for(var b={},c=this.p(),d=0;d<a.length;d++){var e=a[d].getAttribute("name"),f=a[d].querySelector(".value").value;Yk(c,e)!=f&&(b[e]=f)}a=new Ws(b,this);J(this,a);a.n||this.Sf(a)}};g.Sf=function(){};
g.fe=function(){var a=this.p(),b=this.F();L(b,!!a);if(a){var b=b.querySelector(".value"),c=a.bd();"INPUT"==b.tagName?b.value=c:b.textContent=c;(a=a.Ge())?b.setAttribute("title",a):b.removeAttribute("title");(x(c)?ta(c):null==c)?b.classList.add("empty"):b.classList.remove("empty")}};g.Ef=function(){return{Ga:[]}};function At(a,b){yt.call(this,a,null,b);this.h=null}D(At,yt);g=At.prototype;g.A=function(){At.m.A.call(this);this.k().querySelector("input").setAttribute("disabled","1")};function Bt(a,b){return a.h&&a.h[b]?a.h[b]:Yk(a.p(),b)}function Ct(a,b,c){a.h||(a.h={});a.h[b]=c}g.Ef=function(){var a=this.p(),b=[],c=Gk(a.module),d=a.g,e;for(e in c.module_fields){var f=c.module_fields[e];f.group==d&&b.push({name:e,label:f.label,type:f.type,value:Bt(this,e),Sd:$s(kl(a.module),f)})}return{Ga:b}};
g.Df=function(a){if(!a)return!1;var b=Nb(a.data,"fc","demographics","locationDeduced");a=!1;if(b){var c=this.p().g+"_";!Bt(this,c+"country")&&b.country&&(b.country.code?(Ct(this,c+"country",b.country.code),a=!0):b.country.name&&(Ct(this,c+"country",b.country.name),a=!0));!Bt(this,c+"city")&&b.city&&b.city.name&&(Ct(this,c+"city",b.city.name),a=!0);!Bt(this,c+"state")&&b.state&&b.state.name&&(Ct(this,c+"state",b.state.name),a=!0);a&&(b=Dt(this),xt(this,b))}return a};
function Dt(a){var b=a.p();if(a.h){var c=a.p().g+"_",b=Bt(a,c+"country"),d=Bt(a,c+"city"),e=Bt(a,c+"state"),f=Bt(a,c+"postalcode"),h=Bt(a,c+"street");a=Bt(a,c+"street_2");return al(b,d,e,f,h,a)}return b.bd()}g.Sf=function(a){this.h=Lj(a.h);a=Dt(this);xt(this,a)};g.Bc=function(){return this.h||null};function Et(a,b,c){b||st.w();vt.call(this,a,c)}D(Et,vt);g=Et.prototype;g.D=function(){Et.m.D.call(this);Ft(this)};function Ft(a){for(var b=a.p(),c=a.g,d=b.hg(),e=0;e<d.length;e++){var f=b.h(d[e]),h;f instanceof Mk?h=new qt(f,c):f instanceof hl?h=new rt(f,c):h=new gt(f,null,c);a.O(h,!0)}}g.A=function(){Et.m.A.call(this);N(this).listen(this,"action",this.Fh)};g.Fh=function(){};g.Bc=function(){for(var a=null,b=0;b<ge(this);b++){var c=O(this,b),d=kt(c);null!==d&&(a||(a={}),a[c.p().g]=d)}return a};
g.fe=function(){for(var a=0;a<ge(this);a++){var b=O(this,a);b.h.i(b)}};g.ge=function(){Et.m.ge.call(this);for(var a=0;a<ge(this);a++){var b=O(this,a),c=at(b).qb(),b=b.k();c?b.classList.add("normally-hide"):b.classList.remove("normally-hide")}};function Gt(a,b){var c=st.w();Et.call(this,a,c,b)}D(Gt,Et);Gt.prototype.ge=function(){for(var a=ge(this)-1;0<=a;a--)this.removeChild(O(this,a),void 0).T();Ft(this)};function Ht(){}D(Ht,st);u(Ht);Ht.prototype.t=function(){return"record-group"};function It(){}D(It,st);u(It);It.prototype.t=function(){return"list"};function Jt(a,b){var c=It.w();Et.call(this,a,c,b)}D(Jt,Et);Jt.prototype.F=function(){return Yb("content",this.k())};Jt.prototype.fe=function(){for(var a=0;a<ge(this);a++){var b=O(this,a);b.h.i(b)}};function Kt(a,b){yt.call(this,a,null,b)}D(Kt,yt);Kt.prototype.Ef=function(){var a=this.p();if(a.Ab("full_name"))var b=$s(kl(a.module),Gk(a.module).module_fields.salutation),a=[{name:"salutation",label:"Salutation",type:"enum",value:Yk(a,"salutation"),Sd:b},{name:"first_name",label:"First name",type:"text",value:Yk(a,"first_name")},{name:"last_name",label:"Last name",type:"text",value:Yk(a,"last_name")}];else a=[{name:"name",label:"Name",type:"text",value:Yk(a,"name")}];return{Ga:a}};
Kt.prototype.Bc=function(){var a=this.p(),b=this.F().querySelector("input.value").value,c=a.bd();if(b==c)return null;if(!a.Ab("full_name"))return{name:b};var b=gl(a,b),c=a.module.value("salutation"),d=a.module.value("first_name"),e=a.module.value("last_name"),a=a.module.value("full_name");return c!=b.salutation||d!=b.first_name||e!=b.last_name||a!=b.full_name?b:null};Kt.prototype.Af=function(a,b){"full_name"!=a&&"name"!=a||Kt.m.Af.call(this,null,b)};
Kt.prototype.Df=function(a){var b=this.F().querySelector("input.value").value;a=a.data.fc?a.data.fc.contactInfo.fullName:null;return!b&&a?(xt(this,a),!0):!1};function Lt(a,b){Jt.call(this,a,b)}D(Lt,Jt);function Mt(a,b){lt.call(this,a,b)}D(Mt,lt);
Mt.prototype.D=function(){Mt.m.D.call(this);this.k();var a=this.g,b=this.p(),c=[],d=Gk(b),e;for(e in d.module_fields){var f=d.module_fields[e].group;-1==c.indexOf(f)&&c.push(f)}for(d=0;d<c.length;d++){e=c[d];var f=b,h=e;f.h[h]||("name"==h?f.h[h]=new fl(f):0<=["address","alt_address","primary_address"].indexOf(h)?f.h[h]=new Zk(f,h):f.h[h]="email"==h?new dl(f):"phone"==h?new il(f):new bl(f,h));f=f.h[h];if(f instanceof dl)e=new Gt(f,a);else if(f instanceof Zk)e=new At(f,a);else if(f instanceof il)e=
new Lt(f,a);else if(f instanceof fl)e=new Kt(f,a);else if(f instanceof bl)e=f,f=null,""==e.g&&(f=Ht.w()),e=new Et(e,f,a);else throw Error("Invalid group: "+e);this.O(e,!0)}};function Nt(){}u(Nt);function Ot(a){a=a.k().querySelector(".record-footer div.message");a.textContent="";a.classList.remove("error")};function Pt(a,b,c){Xl.call(this,a,b,c);this.ha(16,!0)}D(Pt,Xl);Ue("goog-checkbox-menuitem",function(){return new Pt(null)});var Qt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Rt(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(St.test(c))return b.Md=Tt(c),b.type="hex",b;c=Ut(a);if(c.length){var d=c[0];a=c[1];c=c[2];d=Number(d);a=Number(a);c=Number(c);if(isNaN(d)||0>d||255<d||isNaN(a)||0>a||255<a||isNaN(c)||0>c||255<c)throw Error('"('+d+","+a+","+c+'") is not a valid RGB color');d=Vt(d.toString(16));a=Vt(a.toString(16));c=Vt(c.toString(16));b.Md="#"+d+a+c;b.type="rgb";return b}if(Qt&&(c=Qt[a.toLowerCase()]))return b.Md=c,b.type="named",b;throw Error(a+
" is not a valid color string");}var Wt=/#(.)(.)(.)/;function Tt(a){if(!St.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(Wt,"#$1$1$2$2$3$3"));return a.toLowerCase()}var St=/^#(?:[0-9a-f]{3}){1,2}$/i,Xt=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Ut(a){var b=a.match(Xt);if(b){a=Number(b[1]);var c=Number(b[2]),b=Number(b[3]);if(0<=a&&255>=a&&0<=c&&255>=c&&0<=b&&255>=b)return[a,c,b]}return[]}
function Vt(a){return 1==a.length?"0"+a:a};function Yt(){}D(Yt,im);u(Yt);Yt.prototype.Xe=function(a,b){return Yt.m.Xe.call(this,b.o("div","goog-color-menu-button-indicator",a),b)};Yt.prototype.Nc=function(a,b){if(a){var c=this.da(a);if(c&&c.firstChild){var d;if(d=b)d=!!(St.test("#"==b.charAt(0)?b:"#"+b)||Ut(b).length||Qt&&Qt[b.toLowerCase()]);d=d?Rt(b).Md:null;c.firstChild.style.borderBottomColor=d||(G?"":"transparent")}}};Yt.prototype.oc=function(a){var b=a.k();this.Nc(b,a.U());Ce(b,"goog-color-menu-button");Yt.m.oc.call(this,a)};function Zt(a,b,c,d,e){this.g=!!b;a&&$t(this,a,d);this.h=void 0!=e?e:this.zb||0;this.g&&(this.h*=-1);this.i=!c}D(Zt,ah);g=Zt.prototype;g.xb=null;g.zb=0;g.vg=!1;function $t(a,b,c){if(a.xb=b)a.zb=A(c)?c:1!=a.xb.nodeType?0:a.g?-1:1;A(void 0)&&(a.h=void 0)}g.clone=function(){return new Zt(this.xb,this.g,!this.i,this.zb,this.h)};
g.next=function(){var a;if(this.vg){if(!this.xb||this.i&&0==this.h)throw $g;a=this.xb;var b=this.g?-1:1;if(this.zb==b){var c=this.g?a.lastChild:a.firstChild;c?$t(this,c):$t(this,a,-1*b)}else(c=this.g?a.previousSibling:a.nextSibling)?$t(this,c):$t(this,a.parentNode,-1*b);this.h+=this.zb*(this.g?-1:1)}else this.vg=!0;a=this.xb;if(!this.xb)throw $g;return a};
g.splice=function(a){var b=this.xb,c=this.g?1:-1;this.zb==c&&(this.zb=-1*c,this.h+=this.zb*(this.g?-1:1));this.g=!this.g;Zt.prototype.next.call(this);this.g=!this.g;for(var c=w(arguments[0])?arguments[0]:arguments,d=c.length-1;0<=d;d--)b.parentNode&&b.parentNode.insertBefore(c[d],b.nextSibling);mc(b)};function au(a,b,c,d){Zt.call(this,a,b,c,null,d)}D(au,Zt);au.prototype.next=function(){do au.m.next.call(this);while(-1==this.zb);return this.xb};function bu(){}D(bu,Ge);u(bu);var cu=0;g=bu.prototype;g.ma=function(a){var b=Je(this,a);a=a.g.o("DIV",b?b.join(" "):null,du(this,a.W(),a.Oa,a.g));xe(a,"grid");return a};function du(a,b,c,d){for(var e=[],f=0,h=0;f<c.height;f++){for(var k=[],l=0;l<c.width;l++){var m=b&&b[h++];k.push(eu(a,m,d))}e.push(fu(a,k,d))}a=d.o("TABLE",a.t()+"-table",d.o("TBODY",a.t()+"-body",e));a.cellSpacing=0;a.cellPadding=0;return a}function fu(a,b,c){a=c.o("TR",a.t()+"-row",b);xe(a,"row");return a}
function eu(a,b,c){a=c.o("TD",{"class":a.t()+"-cell",id:a.t()+"-cell-"+cu++},b);xe(a,"gridcell");ye(a,"selected",!1);if(!wc(a)&&!ze(a,"label")){var d;b=new au(a);for(c="";!c&&(d=dh(b));)1==d.nodeType&&(c=ze(d,"label")||d.title);(d=c)&&ye(a,"label",d)}return a}g.Xb=function(){return!1};g.aa=function(){return null};
g.Fb=function(a,b){if(a){var c=Zb(document,"TBODY",this.t()+"-body",a)[0];if(c){var d=0;Va(c.rows,function(a){Va(a.cells,function(a){kc(a);if(b){var c=b[d++];c&&a.appendChild(c)}})});if(d<b.length){for(var e=[],f=Vb(a),h=c.rows[0].cells.length;d<b.length;){var k=b[d++];e.push(eu(this,k,f));e.length==h&&(k=fu(this,e,f),c.appendChild(k),e.length=0)}if(0<e.length){for(;e.length<h;)e.push(eu(this,"",f));k=fu(this,e,f);c.appendChild(k)}}}Md(a,!0,tb)}};
function gu(a,b,c){for(b=b.k();c&&1==c.nodeType&&c!=b;){if("TD"==c.tagName&&Be(c,a.t()+"-cell"))return c.firstChild;c=c.parentNode}return null}g.t=function(){return"goog-palette"};function hu(a){od.call(this);this.g=[];iu(this,a)}D(hu,od);g=hu.prototype;g.Mb=null;g.uf=null;function iu(a,b){b&&(Va(b,function(a){ju(this,a,!1)},a),gb(a.g,b))}g.nc=function(){return fb(this.g)};function ku(a,b){b!=a.Mb&&(ju(a,a.Mb,!1),a.Mb=b,ju(a,b,!0));J(a,"select")}function lu(a){var b=a.Mb;return b?Ta(a.g,b):-1}g.clear=function(){cb(this.g);this.Mb=null};g.B=function(){hu.m.B.call(this);delete this.g;this.Mb=null};
function ju(a,b,c){b&&("function"==typeof a.uf?a.uf(b,c):"function"==typeof b.yc&&b.yc(c))};function mu(a,b,c){We.call(this,a,b||bu.w(),c);this.kb&=-89;this.h=new nu;this.h.Zd(this);this.S=-1}D(mu,We);g=mu.prototype;g.Oa=null;g.tb=-1;g.qa=null;g.B=function(){mu.m.B.call(this);this.qa&&(this.qa.T(),this.qa=null);this.Oa=null;this.h.T()};g.Nb=function(a){mu.m.Nb.call(this,a);ou(this);this.qa?(this.qa.clear(),iu(this.qa,a)):(this.qa=new hu(a),a=C(this.Qg,this),this.qa.uf=a,N(this).listen(this.qa,"select",this.Pg));this.tb=-1};g.pb=function(){return""};
g.ac=function(a){mu.m.ac.call(this,a);var b=gu(this.i,this,a.target);b&&a.l&&pc(b,a.l)||b==pu(this)||(a=this.W(),qu(this,a?Ta(a,b):-1))};g.Zb=function(a){mu.m.Zb.call(this,a);if(Pe(this,4)&&(a=gu(this.i,this,a.target),a!=pu(this))){var b=this.W();qu(this,b?Ta(b,a):-1)}};g.Ja=function(a){var b=pu(this);return b?(this.qa&&ku(this.qa,b),mu.m.Ja.call(this,a)):!1};
g.Ba=function(a){var b=this.W(),b=b?b.length:0,c=this.Oa.width;if(0==b||!this.isEnabled())return!1;if(13==a.g||32==a.g)return this.Ja(a);if(36==a.g)return qu(this,0),!0;if(35==a.g)return qu(this,b-1),!0;var d=0>this.tb?this.qa?lu(this.qa):-1:this.tb;switch(a.g){case 37:if(-1==d||0==d)d=b;qu(this,d-1);a.preventDefault();return!0;case 39:return d==b-1&&(d=-1),qu(this,d+1),a.preventDefault(),!0;case 38:-1==d&&(d=b+c-1);if(d>=c)return qu(this,d-c),a.preventDefault(),!0;break;case 40:if(-1==d&&(d=-c),
d<b-c)return qu(this,d+c),a.preventDefault(),!0}return!1};g.Pg=function(){};function pu(a){var b=a.W();return b&&b[a.tb]}function qu(a,b){b!=a.tb&&(ru(a,a.tb,!1),a.S=a.tb,a.tb=b,ru(a,b,!0),J(a,"a"))}function su(a,b){if(a.qa){var c=a.qa;ku(c,c.g[b]||null)}}
function ru(a,b,c){if(a.k()){var d=a.W();if(d&&0<=b&&b<d.length){var e;e=(e=pu(a))?e.parentNode:null;a.h.k()!=e&&(a.h.v=e);e=a.h;e.na(c);Pe(e,2)==c&&(b=d[b])&&(b=b?b.parentNode:null,d=a.i.t()+"-cell-hover",c?Ce(b,d):Ee(b,d),c?ye(a.v,"activedescendant",b.id):b.id==ze(a.v,"activedescendant")&&a.v.removeAttribute("aria-activedescendant"))}}}g.na=function(a){a&&-1==this.tb?qu(this,-1<this.S?this.S:0):a||qu(this,-1);mu.m.na.call(this,a)};
g.Qg=function(a,b){if(this.k()&&a){var c=a.parentNode,d=this.i.t()+"-cell-selected";b?Ce(c,d):Ee(c,d);ye(c,"selected",b)}};function ou(a){var b=a.W();if(b)if(a.Oa&&a.Oa.width){if(b=Math.ceil(b.length/a.Oa.width),!A(a.Oa.height)||a.Oa.height<b)a.Oa.height=b}else b=Math.ceil(Math.sqrt(b.length)),a.Oa=new Jb(b,b);else a.Oa=new Jb(0,0)}function nu(){We.call(this,null);this.yb|=2}D(nu,We);function tu(a,b,c){this.H=a||[];mu.call(this,null,b||bu.w(),c);this.H=this.H;this.J=this.N=null;Ze(this,uu(this))}D(tu,mu);tu.prototype.J=null;tu.prototype.N=null;tu.prototype.Je=function(){var a=this.qa?this.qa.Mb:null;if(a){var b=a.style[Oa("background-color")];if("undefined"!==typeof b)a=b;else{b=a.style;a:{var c=Oa("background-color");if(void 0===a.style[c]){var d=sd()+Pa(c);if(void 0!==a.style[d]){a=d;break a}}a=c}a=b[a]||""}return vu(a)}return null};
tu.prototype.wf=function(a){a=vu(a);this.J||(this.J=Xa(this.H,function(a){return vu(a)}));su(this,a?Ta(this.J,a):-1)};function uu(a){return Xa(a.H,function(a,c){var d=this.g.o("div",{"class":this.i.t()+"-colorswatch",style:"background-color:"+a}),e;this.N&&this.N[c]?e=this.N[c]:"#"==a.charAt(0)?(e=Tt(a),e="RGB ("+[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16)].join(", ")+")"):e=a;d.title=e;return d},a)}
function vu(a){if(a)try{return Rt(a).Md}catch(b){}return null};function wu(a,b,c,d){jm.call(this,a,b,c||Yt.w(),d)}D(wu,jm);var xu={u:"#000 #444 #666 #999 #ccc #eee #f3f3f3 #fff".split(" "),ga:"#f00 #f90 #ff0 #0f0 #0ff #00f #90f #f0f".split(" "),H:"#f4cccc #fce5cd #fff2cc #d9ead3 #d0e0e3 #cfe2f3 #d9d2e9 #ead1dc #ea9999 #f9cb9c #ffe599 #b6d7a8 #a2c4c9 #9fc5e8 #b4a7d6 #d5a6bd #e06666 #f6b26b #ffd966 #93c47d #76a5af #6fa8dc #8e7cc3 #c27ba0 #cc0000 #e69138 #f1c232 #6aa84f #45818e #3d85c6 #674ea7 #a64d79 #990000 #b45f06 #bf9000 #38761d #134f5c #0b5394 #351c75 #741b47 #660000 #783f04 #7f6000 #274e13 #0c343d #073763 #20124d #4c1130".split(" ")};
function yu(a){var b=new bm(a);Kb(xu,function(c){c=new tu(c,null,a);if(c.k())throw Error("Component already rendered");c.Oa=A(8)?new Jb(8,void 0):8;ou(c);b.O(c,!0)});return b}g=wu.prototype;g.Je=function(){return this.U()};g.wf=function(a){this.Eb(a)};g.Eb=function(a){for(var b=0,c;c=this.h?O(this.h,b):null;b++)"function"==typeof c.wf&&c.wf(a);wu.m.Eb.call(this,a)};
g.Rc=function(a){"function"==typeof a.target.Je?this.Eb(a.target.Je()):"none"==a.target.U()&&this.Eb(null);wu.m.Rc.call(this,a);a.stopPropagation();J(this,"action")};g.ba=function(a,b){a&&0==(this.h?ge(this.h):0)&&(this.tc(yu(this.g)),this.Eb(this.U()));wu.m.ba.call(this,a,b)};Ue("goog-color-menu-button",function(){return new wu(null)});function zu(){}D(zu,dm);u(zu);g=zu.prototype;g.da=function(a){return a};g.ma=function(a){var b=Je(this,a);return a.g.o("div",{"class":"goog-inline-block "+b.join(" "),title:a.eb()||""},a.W())};g.Xb=function(a){return"DIV"==a.tagName};g.aa=function(a,b){De(b,["goog-inline-block",this.t()]);return zu.m.aa.call(this,a,b)};g.t=function(){return"goog-css3-button"};Ue("goog-css3-button",function(){return new fm(null,zu.w())});
Ue("goog-css3-toggle-button",function(){var a=new fm(null,zu.w());a.ha(16,!0);return a});function Au(a,b,c){fm.call(this,a,b||gm.w(),c)}D(Au,fm);Ue("goog-custom-button",function(){return new Au(null)});function Bu(a,b,c){fm.call(this,a,b||gm.w(),c);this.ha(16,!0)}D(Bu,fm);Ue("goog-toggle-button",function(){return new Bu(null)});function Cu(){}D(Cu,Yl);u(Cu);Cu.prototype.ma=function(a){return a.g.o("div",this.t()+" goog-inline-block","\u00a0")};Cu.prototype.aa=function(a,b){b=Cu.m.aa.call(this,a,b);Ce(b,"goog-inline-block");return b};Cu.prototype.t=function(){return"goog-toolbar-separator"};function Du(){this.g="toolbar"}D(Du,gf);u(Du);Du.prototype.Kc=function(a){return"HR"==a.tagName?new Zl(Cu.w()):Du.m.Kc.call(this,a)};Du.prototype.t=function(){return"goog-toolbar"};Du.prototype.Uf=function(){return mf};function Eu(a,b,c){of.call(this,b,a||Du.w(),c)}D(Eu,of);Eu.prototype.Oc=function(a){Eu.m.Oc.call(this,a);this.Xa||tf(this)};function Fu(a,b){M.call(this,b);this.l=a}D(Fu,M);Fu.prototype.t=function(){return"secondary"};Fu.prototype.D=function(){Fu.m.D.call(this);this.k().classList.add(this.t())};Fu.prototype.A=function(){Fu.m.A.call(this);var a=this.p();if(0<=vk.indexOf(kl(a))){var b=N(this);b.listen(a,"module-change",this.h);b.listen(a,"record-change",this.h);this.h()}};
Fu.prototype.h=function(){for(;this.n&&0!=this.n.length;){var a=O(this,0);this.removeChild(a,!0);a.T()}a=this.p();if(Ak(a.g)){var b=a.parent,a=[{store:"Notes",index:"parent",reverse:!0,keyRange:pn([kl(a),a.C()])}];b.send("query",a).M(function(a){for(var d=0;d<a.length;d++){var e=a[d];e.result&&0<e.result.length&&(e=new jl(this.p().parent,new zk(U(b),"Notes",e.result[0])),e=new Gu(e,this.g),this.O(e,!0))}},function(a){throw a;},this)}};var js="in",Hu=null;function Iu(){if(!Hu){var a=chrome.extension.getURL("image/all-icons.svg"),b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){Hu=b.responseXML;b=null};b.send()}return Hu}function Rk(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg","svg"),d=Iu().documentElement.getElementById(a);d&&(c.setAttribute("viewBox",d.getAttribute("viewBox")),c.innerHTML=d.innerHTML);2>arguments.length?c.classList.add("icons"):x(b)&&c.classList.add(b);return c}var Ju=null;
function Ku(){if(!Ju){var a=chrome.extension.getURL("inj-template.html"),b=new XMLHttpRequest;b.open("GET",a,!1);b.onload=function(){Ju=(new DOMParser).parseFromString(b.responseText,"text/html");b=null};b.send()}return Ju}function Lu(a){a=Ku().documentElement.querySelector("#"+a);document.body.contains(a)||(a=document.importNode(a,!0),document.body.appendChild(a));return a};function Gu(a,b){M.call(this,b);this.l=a;this.i=new Qk({className:"menu"});this.h=new Mt(this.p(),this.g);this.u=new Fu(a,b);Nt.w()}D(Gu,M);g=Gu.prototype;g.logger=R("ydn.crm.sugarcrm.ui.record.Record");g.t=function(){return"record-panel"};g.F=function(){return this.k().querySelector(".content")};function Mu(a){return a.k().querySelector(".head")}
g.D=function(){Gu.m.D.call(this);var a=this.k(),b=this.g;a.className=this.t()+" "+kl(this.p());var c=b.o("div","head"),d=b.o("div","content");a.appendChild(c);a.appendChild(d);c.classList.add("record-header");c.classList.add("flex-bar");var d=b.o("a",{"class":"title center",title:"Open in SugarCRM"}),e=b.o("span","icon"),f=b.o("span","svg-button ok-button",Rk("check-circle"));f.setAttribute("title","Save");c.appendChild(e);c.appendChild(d);c.appendChild(f);this.i.render(c);this.O(this.h,!0);this.O(this.u,
!0);b=b.o("div","record-footer");a.appendChild(b);b=this.g;a=this.k().querySelector(".record-footer");b=b.o("div","message");a.appendChild(b)};
g.A=function(){Gu.m.A.call(this);var a=N(this),b=this.p();a.listen(b,"click",this.dg,!1);this.k().querySelector(".record-footer");var c=this.k().querySelector(".head .more-menu");a.listen(b,"module-change",this.dg);a.listen(b,"record-change",this.ph);a.listen(b,"record-update",this.qh);a.listen(this.F(),"click",this.Yg,!1);a.listen(this,["field-change"],this.fh);a.listen(c,"click",this.bh);b=Mu(this).querySelector(".ok-button");a.listen(b,"click",this.Hh);Nu(this)};
g.bh=function(a){a=Tk(a);var b=Ou+"-";"edit"==a?this.Cc(!this.k().classList.contains("edit")):a==Pu?Qu(this):a==Ru?Su(this):a&&qa(a,"new-")?(a=a.substr(4),Tu(this,a,!1)):a&&qa(a,b)&&(a=a.substr(b.length),Tu(this,a,!0))};
g.Hh=function(){var a=ot(this.h),b=As("Saving..."),c=this.p();ll(this.p(),a).M(function(){Bs(b,kl(c)," saved.");var a=Ak(c.g)?zl(c.parent,kl(c),c.C()):null;var e=Ak(c.g)?Ek(c.g):"",f=zs.g[b];f&&(f.uc=a,f.gf=e,f.Rd="View in SugarCRM",ys(b));Uu(this,!1)},function(a){var c=zs.g[b];c&&(c.update=a.message,c.type="e",ys(b))},this)};
function Qu(a){var b=document.querySelector("#field-display-dialog")||Lu("field-display-dialog"),c=b.querySelector(".content"),d=c.getAttribute("name");if(!d){var e=b.querySelector("button.apply"),f=b.querySelector("button.cancel");e.onclick=function(){b.close("apply")};f.onclick=function(){b.close("cancel")};b.onclose=a.Dh.bind(a)}a=a.p();e=kl(a);if(d!=e){c.innerHTML="";c.setAttribute("name",e);d=Lu("field-table").content;c.appendChild(d.cloneNode(!0));d=c.querySelector("tbody.group-body");c=c.querySelector("tbody.field-body");
a=Gk(a);e=[];$.w();for(var h in a.module_fields){var k=a.module_fields[h],l=k.group,f=document.createElement("tr");if(l)if(-1==e.indexOf(l))e.push(l),d.appendChild(f),k=new Vs(l);else continue;else c.appendChild(f),k=new Ts(k);f.setAttribute("name",k.getName());var l=document.createElement("td"),m=document.createElement("td"),n=document.createElement("input");l.appendChild(n);n.type="checkbox";k.qb()||(n.checked=!0);m.textContent=k.he();f.appendChild(l);f.appendChild(m)}}b.showModal()}
g.Dh=function(a){a=a.target;if("apply"==a.returnValue){var b=a.querySelector(".group-body"),b=Vu(b);Wu(this,!0,b);a=a.querySelector(".field-body");a=Vu(a);Wu(this,!1,a);a=this.k().classList.contains("edit");nt(this.h);pt(this.h);a&&mt(this.h,!0)}};function Vu(a){for(var b={},c=a.childElementCount,d=0;d<c;d++){var e=a.children[d],f=e.children[0].children[0];b[e.getAttribute("name")]=!f.checked}return b}
function Wu(a,b,c){a=Gk(a.p());$.w();for(var d in c){var e=a.module_fields[d],f;b?f=new Vs(d):f=new Ts(e);var e=f,h=c[d],k=$.w(),l=e.ie(),m=e.Xf();h==m?l?(delete l.normallyHide,Os(k)):Hg(!1):(l||(l=e.Qf()),l.normallyHide=!!h,Os(k))}}
function Su(a){a=Lj(a.p().g.getData());var b=Lu("record-detail-dialog");b.querySelector("button.ok").onclick=function(){b.close("close")};var c=b.querySelector(".content");c.innerHTML="";var d=document.createElement("pre");if(a){for(var e in a)qa(e,"ydn$")&&delete a[e];d.textContent=JSON.stringify(a,null,2)}c.appendChild(d);b.showModal()}g.fh=function(a){this.k().classList.contains("edit")?Uu(this,!0):(a.preventDefault(),ll(this.p(),a.h))};
function Uu(a,b){var c=Mu(a).querySelector(".ok-button");L(c,!!b)}g.Cc=function(a){var b=this.k();a?b.classList.add("edit"):b.classList.remove("edit");mt(this.h,a)};g.Yg=function(a){if(a.target.classList.contains("value"))a:{var b=this.h;if(a=zc(a.target,null,"record-group"))for(var c=0;c<ge(b);c++)if(O(b,c).k()==a)break a}};g.dg=function(){this.removeChild(this.h,!0);this.h.T();this.h=new Mt(this.p(),this.g);this.fd(this.h,1,!0);Nu(this)};g.ph=function(){Nu(this)};
g.qh=function(){Ak(this.p().g)?this.k().classList.remove("empty"):this.k().classList.add("empty");Xu(this);Ot(this);pt(this.h)};
function Nu(a){var b=a.p(),c=a.k(),d=Mu(a),e=kl(a.p());d.querySelector("span.icon").textContent=e?e.substr(0,2):"";var e=a.i,f=[];f.push({name:"edit",label:"Edit"},null);var h=a.Ie();if(0<h.length){for(var k=[],l=0;l<h.length;l++)k[l]={name:"new-"+h[l],label:h[l]};f.push({name:"new",label:"New",children:k})}k=a.Fe();if(0<k.length){for(var m=[],l=0;l<k.length;l++)m[l]={name:Ou+"-"+k[l],label:k[l]};f.push({name:Ou,label:"Duplicate to",children:m})}(0<h.length||0<k.length)&&f.push(null);f.push({name:Ru,
label:"View details ..."},{name:Pu,label:"Fields ..."});e.df=Lj(f);e.jb&&(f=e.jb.querySelector(".flyout-menu"),e.jb.removeChild(f),f=Sk(e.df),f.classList.add("flyout-menu"),e.jb.appendChild(f));d=d.querySelector(".ok-button");L(d,!1);Xu(a);Ot(a);nt(a.h);pt(a.h);c.className=Ak(b.g)?a.t()+" "+kl(b):a.t()+" "+kl(b)+" empty"}g.ia=function(){Gu.m.ia.call(this)};
function Yu(a,b){if(b){var c=a.h,d;for(d in b){var e;a:{if(e=Gk(c.p()).module_fields[d]){e=e.group||"";for(var f=0;f<ge(c);f++){var h=O(c,f);if(h.p().g==e){e=h;break a}}}e=null}e&&e.Af(d,b[d])}}}g.toString=function(){return"ydn.crm.sugarcrm.ui.record.Record:"+this.p()};function Tu(a,b,c){var d=a.p(),e=null;c&&(e=Lj(d.g.getData()),delete e.id,delete e._module,delete e.date_entered,delete e.date_modified);pl(d,new zk(U(d.parent),b));e&&Yu(a,e);a.Cc(!0)}var Ou="duplicate",Ru="record-detail",Pu="field-option";
Gu.prototype.Ie=function(){return[]};Gu.prototype.Fe=function(){return[]};function Xu(a){var b=Mu(a),c=a.p(),b=b.querySelector("a.title");Ak(c.g)?(b.textContent=Ak(c.g)?Ek(c.g):"",b.href=Ak(c.g)?zl(c.parent,kl(c),c.C()):null,b.target=U(c.parent),Vk(a.i,"duplicate",!1)):(b.innerHTML="",b.href="",Vk(a.i,"duplicate",!1),Vk(a.i,"duplicate",!1))};function Zu(a,b){Gu.call(this,a,b)}D(Zu,Gu);g=Zu.prototype;g.t=function(){return Zu.m.t.call(this)+" new-record"};g.A=function(){Zu.m.A.call(this);var a=this.p();N(this).listen(a.parent,"context-change",this.Vh);this.Cc(!0)};g.Vh=function(a){var b=this.p();a.l||a.u?L(this.k(),!1):(L(this.k(),!0),pl(b,new zk(U(b.parent),kl(b))),this.Cc(!0),a.h?"s"==a.h.kind&&(Yu(this,{email1:a.h.g||"",full_name:a.h.h||""}),$u(this,a.h)):L(this.k(),!1))};
function $u(a,b){if(b&&b.g){var c=b.g,d=As("Querying social data for "+c);ut(b.g).M(function(a){if(a&&a.data.fc){Bs(d,"Social data for "+c+" applied.");for(var b=this.h,h=!1,k=0;k<ge(b);k++)h|=!!O(b,k).Df(a);h&&Uu(this,!0)}else Bs(d,"Social data for "+c+" not available, dispatching crawlers now.")},function(a){Bs(d,"Fail request due to "+(a.message?a.message:a))},a)}}g.Ie=function(){return uk};g.Fe=function(){return[]};g.Cc=function(){Zu.m.Cc.call(this,!0)};function av(a,b,c,d,e){jm.call(this,a,b,c,d,e||new $l("listbox"));this.S=this.W();this.La=null;this.We="listbox"}D(av,jm);g=av.prototype;g.Z=null;g.A=function(){av.m.A.call(this);bv(this);cv(this)};g.Ua=function(a){av.m.Ua.call(this,a);(a=this.pb())?(this.S=a,bv(this)):dv(this)||this.Z&&ev(this,this.Z.g[0]||null)};g.B=function(){av.m.B.call(this);this.Z&&(this.Z.T(),this.Z=null);this.S=null};g.Rc=function(a){ev(this,a.target);av.m.Rc.call(this,a);a.stopPropagation();J(this,"action")};
g.Rg=function(){var a=dv(this);av.m.Eb.call(this,a&&a.U());bv(this)};g.tc=function(a){var b=av.m.tc.call(this,a);a!=b&&(this.Z&&this.Z.clear(),a&&(this.Z?fe(a,function(a){fv(a);var b=this.Z,e=b.g.length;a&&(ju(b,a,!1),hb(b.g,e,0,a))},this):gv(this,a)));return b};function ev(a,b){if(a.Z){var c=dv(a);ku(a.Z,b);b!=c&&J(a,"change")}}g.Eb=function(a){if(null!=a&&this.Z)for(var b=0,c;c=this.Z.g[b]||null;b++)if(c&&"function"==typeof c.U&&c.U()==a){ev(this,c);return}ev(this,null)};
g.U=function(){var a=dv(this);return a?a.U():null};function dv(a){return a.Z?a.Z.Mb:null}function gv(a,b){a.Z=new hu;b&&fe(b,function(a){fv(a);var b=this.Z,e=b.g.length;a&&(ju(b,a,!1),hb(b.g,e,0,a))},a);cv(a)}function cv(a){a.Z&&N(a).listen(a.Z,"select",a.Rg)}function bv(a){var b=dv(a);Ze(a,b?b.pb():a.S);var c=a.i.da(a.k());c&&a.g.zh(c)&&(null==a.La&&(a.La=ze(c,"label")),b=(b=b?b.k():null)?ze(b,"label"):a.La,ye(c,"label",b),hv(a))}
function hv(a){var b=a.i;if(b&&(b=b.da(a.k()))){var c=a.v;b.id||(b.id=Yd(Xd.w()));xe(b,"option");ye(c,"activedescendant",b.id);a.Z&&(ye(b,"setsize",a.Z.g.length),ye(b,"posinset",1+lu(a.Z)))}}function fv(a){a.We=a instanceof Xl?"option":"separator"}g.ba=function(a,b){av.m.ba.call(this,a,b);Pe(this,64)?(this.h||this.tc(new bm(this.g,this.If)),(this.h||null).sb(this.Z?lu(this.Z):-1)):hv(this)};Ue("goog-select",function(){return new av(null)});function iv(){}D(iv,im);u(iv);iv.prototype.t=function(){return"goog-toolbar-menu-button"};function jv(a,b,c,d){av.call(this,a,b,c||iv.w(),d)}D(jv,av);Ue("goog-toolbar-select",function(){return new jv(null)});function kv(){}D(kv,Ge);u(kv);g=kv.prototype;g.Yb=function(){};function lv(a,b,c,d){var e=d.o("div",a.t()+"-inner-box"),f=d.o("div",a.t()+"-clear","\u00d7");a=d.o("div",a.t()+"-outer-box",[e,f]);d.appendChild(b,a);d.appendChild(e,c)}g.aa=function(a,b){var c=a.g,d=b;b=c.o("div","goog-inline-block");c.cf(b,d);lv(this,b,d,c);kv.m.aa.call(this,a,b);a.Nb(d.value);return b};
g.ma=function(a){var b=a.g,c=b.o("div","goog-inline-block "+Je(this,a).join(" "));a=b.o("input",{type:"text",value:a.W()||"",disabled:!a.isEnabled()});lv(this,c,a,b);return c};g.Xb=function(a){return"INPUT"==a.tagName&&(!a.type||"TEXT"==a.type.toUpperCase())};g.da=function(a){if(a)a:{a=a.getElementsByTagName("input");for(var b=0;b<a.length;++b){var c=a[b];if(!c.type||"TEXT"==c.type.toUpperCase()){a=c;break a}}a=null}else a=null;return a};g.ag=function(a){return this.da(a.k())};g.Ue=ca;g.Te=function(a){return a.isEnabled()};
g.pc=ca;g.Pc=function(a,b,c){kv.m.Pc.call(this,a,b,c);1==b&&(a=this.da(a.k()))&&(a.disabled=c)};g.ab=ca;g.Fb=function(a,b){var c=this.da(a);c&&(c.value=b)};g.W=function(a){return(a=this.da(a))?a.value:null};g.t=function(){return"wgui-textinput"};function mv(a,b,c,d){We.call(this,a,b||kv.w(),c);this.h=!d;Xe(this,!1);this.jd=!0;(b=this.k())&&this.i.Jd(b,!0);this.kb&=-256;this.ha(32,!1);a||this.Nb("")}D(mv,We);g=mv.prototype;g.A=function(){mv.m.A.call(this);var a=Qe(this);if(a){var b=this.u||(this.u=new oe);pe(b,a);N(this).listen(b,"key",this.Ba)}a=this.h;b=Yb(this.i.t()+"-clear",this.k());this.h=!!a;b&&(this.h?(N(this).listen(b,"click",this.bg),L(b,!0)):(N(this).ca(b,"click",this.bg),L(b,!1)))};
g.bg=function(a){a.preventDefault();Ze(this,"");J(this,new I("action",this))};g.W=function(){return this.k()?this.i.W(this.k()):null};g.U=function(){return this.W()};g.pb=function(){return this.W()||""};function nv(a,b){this.result=b;jl.call(this,a,new zk(U(a),b.storeName,b.record));Ak(this.g)||ov(this)}D(nv,jl);function ov(a){a.parent.send("query",[{store:a.result.storeName,index:"id",key:a.result.primaryKey}]).K(function(a){a=a[0].result;if(a[0]){var c=yk(this.result.storeName);pl(this,new zk(U(this.parent),c,a[0]))}},a)}function pv(a,b){b&&(a.result=b,b.record?pl(a,new zk(U(a.parent),b.storeName,b.record)):b.storeName&&t(b.primaryKey)&&ov(a))}
nv.prototype.clear=function(){this.Ia()||(pl(this,null),this.result=null)};nv.prototype.toString=function(){return"ydn.crm.sugarcrm.model.ResultRecord:"+this.g};nv.prototype.Ia=function(){return!Ak(this.g)&&!this.result};function qv(a,b){M.call(this,b);this.l=a;this.i=new M(b);this.h=null;this.u=[];this.H=0}D(qv,M);g=qv.prototype;g.t=function(){return"search-panel"};
g.D=function(){qv.m.D.call(this);var a=this.g,b=this.k();b.classList.add(this.t());var c=a.o("div","header");b.appendChild(c);this.h=new Eu(null,null,a);for(var d=new bm(a),e=0;e<uk.length;e++)d.O(new Xl(uk[e]),!0);e=new jv("Module",d,null,a);this.h.O(e,!0);d=new mv("");this.h.O(d,!0);this.h.render(c);e.sc(!1);c=a.o("div","content");a=a.o("div","content-wrapper",[c]);b.appendChild(a);this.O(this.i,!0);b=d.k().querySelector("input");b.setAttribute("placeholder","Search ...");b.setAttribute("title",
"Search name, email, phone, id, title, description, etc.")};g.Oh=function(a){a=a.module;ea(a)&&O(this.h,0).sc(a)};g.A=function(){qv.m.A.call(this);var a=O(this.h,1);N(this).listen(a,"action",this.Sg,!0)};function rv(a,b){if(b){for(var c=ge(a.i),d=0;d<c;d++){var e=O(a.i,d).p();if(e.Ia()){pv(e,b);return}}30<c?(e=O(a.i,0).p(),pv(e,b)):(c=new nv(a.p(),b),c=new Gu(c,a.g),a.i.O(c,!0))}}
function sv(a,b,c,d){Bl(a.p(),b,c,d,!0).M(function(a){var b=a[0];b.result[0]&&(a=yk(b.store),b=b.result[0],rv(this,{storeName:a,primaryKey:b.id,record:b,value:d,tokens:[{keyPath:c}]}));tv(this)},function(a){tv(this);throw a;},a)}
function uv(a,b){0==a.H&&(a.H=b);var c=100*(a.H-b)/a.H,d=O(a.h,1).k(),d=Zb(document,"input",null,d)[0].style,e=c+.1,f=["rgb(255, 255, 255) 0%"];99>c&&(f[1]="rgb(135, 224, 253) "+c.toFixed(1)+"%",f[2]="rgb(255, 255, 255) "+e.toFixed(1)+"%");f.push("rgb(255, 255, 255) 100%");d.background="linear-gradient(to right, "+f.join(", ")+")"}
function tv(a){var b=a.u[0];if(b){b.dc++;uv(a,4*(a.u.length-1)+(4-b.dc));var c=a.p();0==b.dc?sv(a,b.module,"id",b.wc):1==b.dc?sv(a,b.module,"ydn$emails",b.wc):2==b.dc?(c=b.wc.match(/\d/g),3>(c?c.length:0)?tv(a):sv(a,b.module,"ydn$phones",b.wc)):3==b.dc?Dl(c,b.module,b.wc).M(function(a){a=a[0].fullTextResult;for(var b=a.length||0,c=0;c<b;c++)rv(this,a[c]);tv(this)},function(a){throw a;},a):(a.u.shift(),0<a.u.length&&tv(a))}}
g.Sg=function(){for(var a=O(this.h,1).W(),b=ge(this.i)-1;0<=b;b--)O(this.i,b).p().clear();this.H=0;if(a&&(a=a.trim(),2<=a.length)){b=(b=dv(O(this.h,0)))?b.pb():null;this.u.length=0;if(b)this.u[0]={module:b,wc:a,dc:-1};else for(b=0;b<uk.length;b++)this.u[b]={module:uk[b],wc:a,dc:-1};tv(this)}};g.F=function(){return Yb("content",this.k())};function vv(a,b){M.call(this,b);this.l=a}D(vv,M);g=vv.prototype;g.t=function(){return"detail-panel"};g.D=function(){vv.m.D.call(this);var a=this.g,b=this.k();b.classList.add(this.t());b.appendChild(a.o("div","header"));b.appendChild(a.o("div","content"))};g.F=function(){return this.k().querySelector(".content")};g.A=function(){vv.m.A.call(this)};g.clear=function(){this.F().innerHTML="";this.k().querySelector(".header").innerHTML=""};
function wv(a,b){var c=a.p().j.C(),d=Fl(new Date),c=Cl.bound([c,d],[c,"\uffff"]);return{store:b,index:"assigned_user_id, "+Dk(b),keyRange:c}}
function xv(a){a.k();a.p().send("activity-stream").M(function(a){var c=this.g,d=c.o("span");if(0<a.length)c=Ck(a[a.length-1].date_modified),c=xs(c.getTime())||c.toLocaleDateString(),d.textContent=a.length+" records updated since "+c;else{d.appendChild(Bc(c,"No activity? Have you "));var e=c.o("a",{href:chrome.extension.getURL("setup.html")},"setup");d.appendChild(e);d.appendChild(Bc(c,"?"))}c=this.k().querySelector(".header");c.innerHTML="";c.appendChild(d);for(d=0;d<a.length;d++){var c=a[d],e=this.g,
f=this.p(),h=c._module,k=new zk(U(f),h,c),l=e.o("div","icon small",c._module.substr(0,2)),m=e.o("span"),n=k.value("modified_user_id"),p=k.value("created_by");n?(n=e.o("a",{href:zl(f,"Users",n),target:"_blank"},k.value("modified_user_name")),m.appendChild(n),m.appendChild(Bc(e," "))):p&&(n=e.o("a",{href:zl(f,"Users",p),target:"_blank"},k.value("created_by_name")),m.appendChild(n),m.appendChild(Bc(e," ")));m.appendChild(Bc(e,c.date_modified==c.date_entered?"created ":"updated "));f=e.o("a",{href:zl(f,
k.module,k.C()),target:"_blank"},Ek(k));m.appendChild(f);h=h.replace(/ies$/,"y").replace(/s$/,"");m.appendChild(Bc(e," "+h+""));h=Ck(c.date_modified);h=xs(h.getTime())||"on "+h.toLocaleDateString();m.appendChild(Bc(e," "+h+"."));e=e.o("div",null,[l,m]);e.className="detail-item record-header "+c._module;this.F().appendChild(e)}},function(a){throw a;},a)}
function zv(a,b){var c=wv(a,b);a.p().send("values",c).M(function(a){var c=this.g.o("span");c.textContent=a.length+" upcoming "+b;var f=this.k().querySelector(".header");f.innerHTML="";f.appendChild(c);for(c=0;c<a.length;c++){var f=a[c],h=b,k=this.g,l=this.p(),m=U(l),n=new zk(m,h,f),p=k.o("span"),h="Calls"==h?"call":"Tasks"==h?"finish":"Meetings"==h?"meet":"Opportunities"==h?"close":"do",h=h.charAt(0).toUpperCase()+h.substr(1)+" ";p.appendChild(Bc(k,h));l=k.o("a",{href:zl(l,n.module,n.C()),target:m},
Ek(n));p.appendChild(l);n=n.g?Ck(n.g[Dk(n.module)]):new Date("NaN");n=xs(n.getTime())||"on "+n.toLocaleDateString();p.appendChild(Bc(k," "+n+"."));k=k.o("div",null,[p]);k.className="detail-item record-header "+f._module;this.F().appendChild(k)}},function(a){throw a;},a)};function Av(a,b){M.call(this,b);this.l=a;this.h=new Ff(Df,void 0,b);this.i=new vv(a,b);this.search=new qv(a,b);var c=new jl(a,new zk(U(a),"Leads"));this.u=new Zu(c,b)}D(Av,M);g=Av.prototype;g.t=function(){return"activity-panel"};g.F=function(){return this.k().querySelector(".content")};
g.D=function(){Av.m.D.call(this);var a=this.g,b=this.k();Ce(b,this.t());var c=a.o("div","content");b.appendChild(c);this.O(this.h,!0);b=a.o("div");c=Rk("magnifying-glass");b.appendChild(c);b=new ff(b);b.ra("Search");this.h.O(b,!0);b.F().classList.add("activity-search");b=a.o("div");c=Rk("plus");b.appendChild(c);b=new ff(b);b.ra("Create a new record");this.h.O(b,!0);b.F().classList.add("new");b=a.o("div");c=Rk("rss");b.appendChild(c);b=new ff(b);b.ra("Activity feed");this.h.O(b,!0);b.F().classList.add("activity-feed");
for(b=0;b<xk.length;b++){var c=xk[b],d=Rk(c),d=a.o("div","activity-tab-label",d),d=new ff(d);d.ra(c);this.h.O(d,!0);d.F().classList.add(c)}this.O(this.search,!0);this.O(this.u,!0);this.O(this.i,!0)};g.A=function(){Av.m.A.call(this);var a=this.p(),b=N(this);b.listen(a,"login",this.xg);b.listen(this.h,"select",this.uh);b.listen(this.h,"unselect",this.vh);L(this.k(),!1);L(this.u.k(),!1);L(this.i.k(),!1);a.isLogin()&&this.xg()};g.vh=function(){this.i.clear()};
g.uh=function(){var a;a=this.h;a=je(a,a.Ra);0==a?(L(this.search.k(),!0),L(this.u.k(),!1),L(this.i.k(),!1)):1==a?(L(this.search.k(),!1),L(this.u.k(),!0),L(this.i.k(),!1)):(L(this.search.k(),!1),L(this.u.k(),!1),L(this.i.k(),!0),2==a?xv(this.i):zv(this.i,xk[a-3]))};g.xg=function(){var a=this;setTimeout(function(){Bv(a)},2E3);setTimeout(function(){Cv(a)},3E3)};
function Bv(a){a.p().send("activity-stream").M(function(a){if(0<a.length){var c=Ck(a[a.length-1].date_modified);L(this.k(),!0);a=a.length;var d=O(this.h,1);d.F();0<a?(c=xs(c.getTime())||c.toLocaleDateString(),d.ra(a+" records updated since "+c)):d.ra("")}},function(a){throw a;},a)}
function Cv(a,b){var c=b||0,d=xk[c];if(d){var e=wv(a.i,d);a.p().send("keys",e).M(function(a){Cv(this,c+1);L(this.k(),!0);a=a.length;var b=xk.indexOf(d),b=O(this.h,b+2);b.F().querySelector(".activity-tab-label");a?b.ra(a+" upcoming "+d):b.ra("No upcoming "+d)},function(a){throw a;},a)}};function Dv(a,b){M.call(this,b);this.l=a}D(Dv,M);g=Dv.prototype;g.logger=R("ydn.crm.sugarcrm.ui.Header");g.t=function(){return"sugar-header"};g.F=function(){return this.k().querySelector(".sugar-header-content")};
g.D=function(){Dv.m.D.call(this);var a=this.k(),b=this.p(),c=this.g;Ce(a,this.t());var d=c.o("a");d.textContent=U(b);d.href=yl(b);var e=Rk("sugarcrm"),e=c.o("div","icon-box",e),d=c.o("div",{"class":"main-title",title:"SugarCRM"},[e,d]);a.appendChild(d);d=[];e=chrome.extension.getURL("option-page.html")+"#credentials";e=chrome.extension.getURL("host-permission.html")+"?"+U(b);e=c.o("a",{className:"maia-button blue",href:e,target:"host-permission"},"Grant host permission");e.setAttribute("title","Your permission is required to connect your server from this extension. Without permission request to server will be slow.");
d.push(e);d=c.o("div",{"class":"host-permission"},d);a.appendChild(d);var e=c.o("input",{name:"username",type:"text"}),e=c.o("div",null,[e]),f=c.o("input",{name:"password",type:"password"}),f=c.o("div",null,[f]),h=c.o("div","message"),e=c.o("div","login-form",[e,f,h]),f=c.o("div","sugar-header-content");a.appendChild(e);a.appendChild(f);L(d,!b.about.hostPermission);L(e,!b.isLogin());L(f,!!this.p().about.hostPermission);a=new Av(b,c);this.O(a,!0)};
g.A=function(){Dv.m.A.call(this);var a=this.k(),b=N(this),c=this.k().querySelector(".host-permission"),a=a.querySelector(".login-form"),a=new oe(a);b.listen(a,"key",this.jh);c=c.querySelector("a");b.listen(c,"click",Jg,!0);b.listen(this.p(),"hag",this.eh);b.listen(this.p(),"login",this.mh)};g.mh=function(){var a=this.k().querySelector(".login-form");L(a,!this.p().isLogin())};g.eh=function(){var a=this.k().querySelector(".host-permission"),b=!!this.p().about.hostPermission;L(a,!b);L(this.F(),b)};
g.jh=function(a){if(13==a.g){var b=this.k().querySelector(".login-form"),c=this.p();a=b.querySelector("input[name=username]").value;var d=b.querySelector("input[name=password]").value,e=b.querySelector(".message");e.textContent="logging in...";Al(c,a,d).M(function(){c.isLogin()?(e.textContent="",L(b,!1)):e.textContent="login failed"},function(a){e.textContent="Error: "+a},this)}};function Ev(a,b){M.call(this,b);this.l=a}D(Ev,M);g=Ev.prototype;g.t=function(){return"sugar-panel"};g.F=function(){return this.k().querySelector(".sugar-panel-content")};g.D=function(){Ev.m.D.call(this);var a=this.g,b=this.k();Ce(b,this.t());var c=a.o("div","sugar-panel-head"),a=a.o("div","sugar-panel-content");b.appendChild(c);b.appendChild(a)};g.A=function(){Ev.m.A.call(this);N(this).listen(this.p(),["gdata-change"],this.Wh)};g.Wh=function(){var a=this.p(),a=!(!a.i||!a.i.g);L(this.F(),a)};
g.logger=R("ydn.crm.sugarcrm.ui.SimpleSugarPanel");function Fv(a,b){Ev.call(this,a,b)}D(Fv,Ev);Fv.prototype.D=function(){Fv.m.D.call(this);var a=this.g,b=this.k().querySelector(".sugar-panel-head"),c=this.F();L(c,!1);(new Dv(this.p(),a)).render(b)};Fv.prototype.logger=R("ydn.crm.sugarcrm.ui.SugarPanel");function Gv(a){this.g=this.h=null;this.P=(this.i=!!a)?"&#x25BC;":"&#x25B2;";this.j=this.i?"&#x25B2;":"&#x25BC;";this.l=this.s.bind(this)}
Gv.prototype.render=function(a){this.h=document.createElement("div");this.g=document.createElement("span");var b=document.createElement("div");this.h.className="status-base";b.className="status-panel";this.g.className="status-bar";var c=document.createElement("span"),d=document.createElement("a"),e=document.createElement("span"),f=document.createElement("span");f.className="status-detail-button";f.innerHTML=this.j;f.setAttribute("title","Show previous messages");this.g.appendChild(c);this.g.appendChild(d);
this.g.appendChild(e);c=document.createElement("div");c.className="status-message";c.appendChild(this.g);c.appendChild(f);this.h.appendChild(c);this.h.appendChild(b);a.appendChild(this.h);f.onclick=this.u.bind(this)};Gv.prototype.u=function(){this.h.querySelector(".status-panel").classList.contains("open")?Hv(this,!1):Hv(this,!0)};
function Hv(a,b){var c=a.h.querySelector(".status-detail-button");c.innerHTML=b?a.P:a.j;var d=a.h.querySelector(".status-panel");if(b){d.classList.add("open");c.classList.add("open");c.setAttribute("title","Hide message panel");c=a.h.querySelector(".status-panel");c.innerHTML="";for(var d=document.createDocumentFragment(),e=zs.g.length-1;0<=e;e--){var f=zs.g[e];if(!f)break;var h=document.createElement("div");if(f.title){var k=document.createElement("span");k.textContent=f.title;h.appendChild(k)}f.uc&&
(k=document.createElement("a"),k.textContent=f.gf,k.href=f.uc,f.Rd&&(k.setAttribute("title",f.Rd),k.setAttribute("target","_blank")),h.appendChild(k));f.update&&(k=document.createElement("span"),k.textContent=f.update,h.appendChild(k));d.appendChild(h)}c.appendChild(d);a.i&&(c.style.marginTop=-18-c.clientHeight+"px");document.body.addEventListener("click",a.l,!0)}else d.classList.remove("open"),c.classList.remove("open"),c.setAttribute("title","Show previous messages"),d.innerHTML="",document.body.removeEventListener("click",
a.l,!0)}Gv.prototype.s=function(a){var b=a.target,c=this.h.querySelector(".status-panel");b&&b instanceof Element&&b!=c&&!c.contains(b)&&(c.classList.contains("open")&&(a.preventDefault(),a.stopPropagation()),Hv(this,!1))};
Gv.prototype.n=function(a,b){this.g&&(this.g.children[0].textContent=b.title+" ",b.uc?(this.g.children[1].textContent=b.gf,this.g.children[1].href=b.uc,this.g.children[1].title=b.Rd,this.g.children[1].style.display=""):this.g.children[1].style.display="none",this.g.children[2].textContent=" "+(b.update||""))};function Iv(a){M.call(this,a)}D(Iv,M);g=Iv.prototype;g.t=function(){return"sidebar"};
g.D=function(){Iv.m.D.call(this);var a=this.k(),b=this.g;a.classList.add(this.t());var c=b.o("div","head"),d=b.o("div","content");a.appendChild(c);a.appendChild(d);a=b.o("div","sugarcrm-link-panel");d=b.createElement("a");d.textContent="Setup";d.href=chrome.extension.getURL("setup.html")+"#modal";d.className="setup-link maia-button blue";d.setAttribute("data-window-height","600");d.setAttribute("data-window-width","800");a.appendChild(d);L(a,!1);var e=b.o("div","no-sugar-panel"),d=b.createElement("a");
d.textContent="Setup SugarCRM";d.href=chrome.extension.getURL("setup.html")+"#modal";d.className="setup-link maia-button blue";d.setAttribute("data-window-height","600");d.setAttribute("data-window-width","800");e.appendChild(d);L(e,!1);c.appendChild(a);c.appendChild(e)};g.F=function(){return this.k().querySelector(".content")};function Jv(a){return a.k().querySelector(".head")}
g.A=function(){Iv.m.A.call(this);var a=N(this),b=Jv(this).querySelectorAll("a.setup-link");a.listen(b[0],"click",Jg,!0);a.listen(b[1],"click",Jg,!0)};g.ec=function(){var a=Jv(this).querySelector(".sugarcrm-link-panel");$.w().isLogin()?(L(this.F(),!0),L(a,!1)):(L(this.F(),!1),L(a,!0))};g.logger=R("ydn.crm.ui.SugarListPanel");
function Kv(a,b){var c=sk("sugarcrm",b).send("details");$.w();return c.K(function(a){for(var c=0;c<a.modulesInfo.length;c++)Ms(a.modulesInfo[c]);a=new Gl(a.about,a.modulesInfo,0,a.serverInfo);Lv(this,b)||this.qe(a)},a)}g.qe=function(a){a=new Ev(a,this.g);this.O(a,!0)};function Lv(a,b){for(var c=0;c<ge(a);c++){var d=O(a,c);if(d instanceof Ev&&U(d.p())==b)return!0}return!1}
function Mv(a,b){var c=Jv(a).querySelector(".no-sugar-panel");c.querySelector("a");if($.w().isLogin()){0==b.length?L(c,!0):L(c,!1);for(var c=[],d=ge(a)-1;0<d;d--){var e=O(a,d);e instanceof Ev&&!(0<=b.indexOf(U(e.p())))&&(a.logger.log(wh,"disposing sugar panel "+U(e.p()),void 0),e.p().T(),a.removeChild(e,!0),e.T())}for(d=0;d<b.length;d++)Lv(a,b[d])||(a.logger.log(wh,"adding sugar panel "+b[d],void 0),c.push(Kv(a,b[d])));Wp(c)}else L(c,!1),Hg(!1)};function Nv(a){M.call(this,a)}D(Nv,Iv);Nv.prototype.logger=R("ydn.crm.ui.SidebarPanel");Nv.prototype.D=function(){Nv.m.D.call(this);var a=this.g,b=this.k(),c=b.querySelector(".head"),d=a.o("div","invalid-login-panel");c.appendChild(d);a=a.o("div","sidebar-status");c=new Gv;c.render(a);zs.h.push(c);b.insertBefore(a,b.firstElementChild)};Nv.prototype.qe=function(a){a=new Fv(a,this.g);this.O(a,!0)};
Nv.prototype.ec=function(){Nv.m.ec.call(this);var a=$.w();if(a.isLogin()){var b=Jv(this).querySelector(".invalid-login-panel");Is(a)?L(b,!1):(Pf(b,Yf,{ci:a.g.email}),L(b,!0))}};function Ov(){var a;a:{var b={Lh:chrome.extension.getURL("option-page.html")};a=Vb().createElement("DIV");b=Qf(Xf(b||Rf));b.match(Sf);a.innerHTML=b;if(1==a.childNodes.length&&(b=a.firstChild,1==b.nodeType)){a=b;break a}}this.g=a;this.h=new Nv}
Ov.prototype.i=function(){this.g.classList.toggle("open");var a=this.g.querySelector(".hud-button").children[1];this.g.classList.contains("open")?(a.classList.remove("arrow-drop-left"),a.classList.add("arrow-drop-right")):(a.classList.add("arrow-drop-left"),a.classList.remove("arrow-drop-right"))};
Ov.prototype.render=function(){document.body.appendChild(this.g);var a=this.g.querySelector(".hud-popup"),b=this.g.querySelector(".hud-button");bd(b,"click",this.i,!1,this);a=a.querySelector(".popup-content");this.h.render(a);this.g.querySelector(".logo-box").appendChild(Rk("ydn-logo"));this.g.querySelector(".arrow-box").appendChild(Rk("arrow-drop-right"))};function Pv(a){var b=$.w();b.isLogin()&&!Is(b)?a.g.classList.add("invalid"):a.g.classList.remove("invalid");a.h.ec()};function Qv(a){this.g=a||Rv()}Qv.prototype.logger=R("ydn.crm.inj.AppRenderer");
function Rv(){var a=document.createElement("div");a.id="root-panel";a.className="inj ydn-crm";document.body.appendChild(a);L(a,!1);var b=document.createElement("div");b.className="container";a.appendChild(b);for(var c=0;3>c;c++){var d=document.createElement("div");b.appendChild(d)}b=document.createElement("div");c=document.createElement("a");c.textContent="Setup";c.href=chrome.extension.getURL("setup.html");c.className="setup-link";b.appendChild(c);a.firstElementChild.appendChild(b);L(b,!1);return a}
Qv.prototype.k=function(){return this.g};Qv.prototype.h=function(){};function Sv(a){this.g=a||Rv();this.i=!1}D(Sv,Qv);
Sv.prototype.h=function(a){if(!a)this.i=!1,L(this.g,!1);else if(!this.i){for(var b,c=a,d=0;4>d;d++)if(c&&c.parentElement&&(c=c.parentElement,c.nextElementSibling&&"DIV"==c.nextElementSibling.tagName)){var c=c.parentElement,d=c.lastElementChild,e=!!d.querySelector("a[href]");b=document.createElement("div");e&&c.parentElement.contains(d)?c.parentElement.insertBefore(b,d):c.appendChild(b);break}b||(Dh(this.logger,"usual root position is not available, locating on second best position"),c=a.ownerDocument,
b=c.createElement("td"),b.setAttribute("colspan","2"),c=c.createElement("tr"),c.className="widget-topraw",c.appendChild(b),(a.querySelector("tbody")||a).appendChild(c));a=this.g;a.parentElement&&a.parentElement.removeChild(a);b.appendChild(a);this.i=!0;L(a,!0)}};function Tv(a,b,c){Hc.call(this);this.i=a;this.n=b||0;this.g=c;this.l=C(this.j,this)}D(Tv,Hc);Tv.prototype.h=0;Tv.prototype.B=function(){Tv.m.B.call(this);this.stop();delete this.i;delete this.g};Tv.prototype.stop=function(){0!=this.h&&q.clearTimeout(this.h);this.h=0};Tv.prototype.j=function(){this.h=0;this.i&&this.i.call(this.g)};document.createElement("input");function Uv(a,b,c,d){Xl.call(this,a,b,c,d)}D(Uv,Xl);Ue("goog-combobox-item",function(){return new Uv(null)});function Vv(){}D(Vv,im);u(Vv);Vv.prototype.da=function(a){return a?Zb(document,"*",this.t()+"-caption",a)[0]:null};Vv.prototype.Xb=function(a){return"DIV"==a.tagName};Vv.prototype.Hc=function(a,b){var c=this.t();return b.o("div","goog-inline-block ",b.o("div",[c+"-caption","goog-inline-block"],a),b.o("div",[c+"-dropdown","goog-inline-block"]))};Vv.prototype.t=function(){return"goog-css3-button"};Ue("goog-css3-menu-button",function(){return new jm(null,null,Vv.w())});function Wv(){od.call(this);this.h=this.g=null}D(Wv,od);Wv.prototype.B=function(){this.g&&(this.g.T(),this.h=this.g=null)};Wv.prototype.k=function(){return this.h};Wv.prototype.i=function(a){var b=this.k(),c=this.k();(c.classList.contains("error")?Xv:c.href?"n":"v")==Xv?(a.preventDefault(),b.textContent="Error reported, thanks.",b.removeAttribute("href"),b.removeAttribute("title"),b.classList.remove("error")):J(this,a)};var Xv="e";
function Yv(a,b,c){a=a.k();a.classList.remove("error");c?a.href=c:a.removeAttribute("href");b?(a.textContent=b,L(a,!0)):L(a,!1);a.removeAttribute("title")}function Zv(a,b){var c=a.k();c.classList.add("error");c.href="#error";c.textContent="error";b&&b instanceof Error&&(b=b.name+": "+b.message);c.setAttribute("title","Click to report error"+(b?" for "+b:""))};function $v(a,b){M.call(this);this.l=a;this.parent=b||null;this.h=new Wv}D($v,M);g=$v.prototype;g.logger=R("ydn.crm.ui.GmailCmd");g.t=function(){return"gmail-cmd-panel"};g.D=function(){$v.m.D.call(this);var a=this.k(),b=this.g;a.classList.add(this.t());var b=b.o("a",{"class":"archive"},"."),c=this.h;c.h=b;c.g=new Td(c);c.g.listen(b,"click",c.i,!0);a.appendChild(b)};
function aw(a,b){var c=zl(a.p(),"Emails",b.id);Yv(a.h,"View",c);c=a.h.k();c.setAttribute("target","gmail");c.setAttribute("title","View archived email in SugarCRM")}function bw(a){Yv(a.h,"Archive","#archive");a.h.k().setAttribute("title","Archive this email message to SugarCRM")}
function cw(a){Yv(a.h,".");setTimeout(function(){Yv(a.h,"..");var b=dw(a.k());b.lf?(Yv(a.h,"..."),a.p().send("query",[{store:"Emails",index:"message_id",key:b.lf}]).M(function(b){(b=b[0]&&b[0].result?b[0].result[0]:null)?aw(a,b):bw(a)},function(b){bw(a);throw b;})):1<b.bf.length?bw(a):Zv(a.h,"gmail message cannot be parsed")},100)}g.A=function(){$v.m.A.call(this);N(this).listen(this.h,"click",this.Tg);cw(this)};
function dw(a){var b="",c="",d="",e="",f="",h=zc(a,"TR");if(b=h.children[0].querySelector("span[email]"))b=b.getAttribute("email");else return Dh(fs,"cannot sniff sender email"),null;if(a=h.children[1].querySelector("span[alt]"))a=a.getAttribute("alt"),a=new Date(a.replace(" at",""));else return Dh(fs,"cannot sniff date sent"),null;var k=h.nextElementSibling;if(!k||"TR"!=k.tagName)return Dh(fs,"to email address TR expect after title TR"),null;for(var l=k.querySelectorAll("span[email]"),k=0;k<l.length;k++)c&&
(c+=", "),c+=l[k].getAttribute("email");for(var h=zc(h,"TABLE"),m=h.parentElement.nextElementSibling,k=0;m&&10>k;k++)if(l=m.querySelector("div[style]")){d=l.parentElement.className.split(/\s/);k=d.map(function(a){return a.length});k=k.indexOf(Math.max.apply(Math,k));10<d[k].length&&(e=d[k].substring(1),"m"!=d[k].charAt(0)&&fs.log(xh,"not start with m? "+d[k],void 0));d=l.innerHTML;break}else m=m.nextElementSibling;h=zc(h.parentElement,"TABLE");for(k=0;h&&10>k&&"presentation"!=h.getAttribute("role");k++)h=
zc(h,"TABLE");"presentation"==h.getAttribute("role")?(h=h.querySelector("h2"))?f=h.textContent:Dh(fs,"email subject cannot be sniff"):Dh(fs,"expect a presentation role TABLE");h=$.w().g.email;return{Gg:b,Rh:c,Rf:a,bf:d,Ah:h,lf:e,Ph:f}}g.Tg=function(a){if(ra(a.target.href)){a.preventDefault();Yv(this.h,"archiving...");var b=a=void 0,c=this.parent?ew(this.parent):null;c&&(a=c.module,b=c.id);(c=dw(this.k()))?El(this.p(),c,a,b).M(function(a){aw(this,a)},function(a){Zv(this.h,a)},this):Zv(this.h,"Cannot gather email message")}};function fw(a){this.h=a;this.g=[]}fw.prototype.logger=R("ydn.crm.ui.GmailCmdInjector");fw.prototype.i=function(a){for(var b=0;b<a.length;b++){var c=a[b].target;if("Reply"==c.getAttribute("data-tooltip")){var d;a:{for(d=0;d<this.g.length;d++)if(!document.body.contains(this.g[d].k())){this.g[d].Q&&this.g[d].ia();d=this.g[d];break a}d=new $v(this.h);this.g.push(d)}var e=document.createElement("span");c.parentElement.insertBefore(e,c);d.render(e)}}};function gw(a,b){M.call(this,b);this.l=a;for(var c=[],d=0;d<wk.length;d++){var e=wk[d];c[d]={label:e,name:e}}this.h=new Qk({className:"menu"},[{name:"add",label:"Add to",children:c},null,{label:"Sync",name:"sync"}])}D(gw,M);g=gw.prototype;g.logger=R("ydn.crm.ui.gmail.ContactPanel");
g.D=function(){gw.m.D.call(this);var a=this.k();a.classList.add("gmail-contact-panel");var b=this.g,c=Rk("google","icons-small"),c=b.o("div","badge",c);c.setAttribute("title","Gmail contact");var d=b.o("a","title center");d.setAttribute("title","Open in Gmail contact");d.setAttribute("target","gmail");b=b.o("div","head flex-bar",[c,d]);this.h.render(b);a.appendChild(b)};
g.A=function(){gw.m.A.call(this);N(this).listen(this.p(),["context-change"],this.ai);var a=this.k().getElementsByClassName("more-menu")[0];N(this).listen(a,"click",this.bi)};
g.ai=function(){var a=this.p(),b=a.h;if(b){var c=this.k().querySelector(".head").querySelector(".title"),d;d=b.getData();d=Nb(d,"gd$name","gd$fullName","$t")||"";c.textContent=d;c.href="#contact/"+Vj(b);L(this.k(),!0);b=!!a.rb();Vk(this.h,"add",!b);b?(Vk(this.h,"sync",!0),Ml(a)?Wk(this.h,"Remove sync"):Wk(this.h,"Sync")):(Vk(this.h,"sync",!1),Wk(this.h,"Sync"))}else L(this.k(),!1)};g.bi=function(a){if(a=Tk(a))"sync"==a?(a=this.p(),a.rb()?Ml(a)?hw(this):iw(this):hw(this)):jw(this,a)};
function iw(a){a=a.p();var b=As("Linking gmail contact...");Hl(a).M(function(){Bs(b,"Linked ")},function(a){window.console.error(a.stack||a);Bs(b,"Linked failed "+(a.message||"."),"e")})}function hw(a){a=a.p();var b=a.rb(),c=" all records.";if(b)var d=b.module,b=b.C(),c=d+" record "+b;var e=As("Removing gmail contact link to "+c);Il(a).M(function(){Bs(e,"Removed link from "+c)},function(a){window.console.error(a.stack||a);Bs(e,"Removing link failed "+(a.message||"."),"e")})}
function jw(a,b){var c=a.p(),d=As("Adding... to "+b),e;c.h?(e=Jl(c,b),e=e.K(function(){Bs(d,"Linking GData and SugarCRM...");return Hl(c)},a)):e=Pl(c,b);e.M(function(){Bs(d,"Added.")},function(a){a=a instanceof Error?a.name+" "+a.message:B(a)?uj(a):a;Bs(d,a,"","e");throw Error(a);},a)};function kw(a,b){Gu.call(this,a,b)}D(kw,Gu);g=kw.prototype;g.t=function(){return kw.m.t.call(this)+" new-record"};g.A=function(){kw.m.A.call(this);var a=this.p();N(this).listen(a.parent,"context-change",this.Uh)};g.Uh=function(a){var b=this.p();a.l?pl(b,a.l):a.l||pl(b,new zk(U(b.parent),kl(b)))};g.Ie=function(){return[]};g.Fe=function(){return wk};function lw(a,b){Ev.call(this,a,b);var c=this.h=new fw(a),d=document.body;(new MutationObserver(c.i.bind(c))).observe(d,{childList:!1,attributes:!0,characterData:!1,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["data-tooltip"]})}D(lw,Ev);
lw.prototype.D=function(){lw.m.D.call(this);var a=this.g;this.k().querySelector(".sugar-panel-head");this.F();var b=this.p(),c=new jl(b,new zk(U(b),"Leads")),c=new Zu(c,a);this.O(c,!0);c=new gw(b,a);this.O(c,!0);b=new jl(b,new zk(U(b),"Leads"));a=new kw(b,a);this.O(a,!0)};lw.prototype.logger=R("ydn.crm.sugarcrm.ui.ContextSugarPanel");function ew(a){for(var b=0;b<ge(a);b++){var c=O(a,b).p();if(Ak(c.g))return{module:kl(c),id:c.C()}}return null};function mw(a){M.call(this,a);this.h=null;this.i=new Tv(this.Sh,500,this)}D(mw,Iv);g=mw.prototype;g.logger=R("ydn.crm.ui.ContextSidebar");
g.D=function(){mw.m.D.call(this);var a=this.g,b=this.k();b.classList.add("context-sidebar");var c=b.querySelector(".head"),d=a.o("div","sidebar-status"),e=new Gv(!0);e.render(d);zs.h.push(e);b.appendChild(d);b=a.o("div","toolbar flex-bar");d=a.o("input","target-email");d.setAttribute("list","all-emails");b.appendChild(d);d=Rk("search");a=a.o("span","search svg-button");a.appendChild(d);b.appendChild(a);c.appendChild(b);document.getElementById("all-emails")||(c=document.createElement("datalist"),c.id=
"all-emails",document.body.appendChild(c))};g.A=function(){mw.m.A.call(this);var a=N(this),b=this.k().querySelector(".toolbar"),c=b.querySelector("input"),b=b.querySelector(".search");a.listen(c,"change",this.og);a.listen(b,"click",this.og)};g.og=function(){var a=this.k().querySelector("input.target-email").value,b=0<a.indexOf("@")?a:void 0,a=b?void 0:a,c=$.w().g.email,b=new fk(c,b,a);b.kind="s";this.ce(b)};
g.Sh=function(){for(var a=document.querySelectorAll("span[email]"),b=[],c=a.length-1;0<=c;c--){var d=a[c].getAttribute("email");-1==b.indexOf(d)&&-1==d.indexOf("daemon@")&&-1==d.indexOf("noreply@")&&b.push(d)}a=document.getElementById("all-emails");a.innerHTML="";for(c=0;c<b.length;c++)d=document.createElement("option"),d.value=b[c],a.appendChild(d)};g.B=function(){this.i.T();this.i=null;mw.m.B.call(this)};
g.qe=function(a){var b=new lw(a,this.g);this.O(b,!0);!this.h&&a.isLogin()&&(this.logger.log(xh,"compose template initialized.",void 0),this.h=new ns(a))};g.ce=function(a){for(var b=ge(this),c=0;c<b;c++){var d=O(this,c);d instanceof lw&&(d.p().update(a),d=this.i,d.stop(),d.h=Tg(d.l,t(void 0)?void 0:d.n))}};g.ec=function(){mw.m.ec.call(this)};function nw(){this.g=null}nw.prototype.render=function(a){this.g=document.createElement("div");this.g.className="simple-status-bar";var b=document.createElement("span"),c=document.createElement("a"),d=document.createElement("span");this.g.appendChild(b);this.g.appendChild(c);this.g.appendChild(d);a.appendChild(this.g)};
nw.prototype.n=function(a,b){this.g&&(this.g.children[0].textContent=b.title+" ",b.uc?(this.g.children[1].textContent=b.gf,this.g.children[1].href=b.uc,this.g.children[1].title=b.Rd,this.g.children[1].style.display=""):this.g.children[1].style.display="none",this.g.children[2].textContent=" "+(b.update||""))};function ow(a,b,c){Xl.call(this,a,b,c);this.ha(8,!0)}D(ow,Xl);ow.prototype.Ja=function(){return J(this,"action")};Ue("goog-option",function(){return new ow(null)});function pw(){}D(pw,gm);u(pw);pw.prototype.t=function(){return"goog-toolbar-button"};function qw(a,b,c){fm.call(this,a,b||pw.w(),c)}D(qw,fm);Ue("goog-toolbar-button",function(){return new qw(null)});function rw(a,b,c,d){jm.call(this,a,b,c||iv.w(),d)}D(rw,jm);Ue("goog-toolbar-menu-button",function(){return new rw(null)});function sw(a,b){Zl.call(this,a||Cu.w(),b)}D(sw,Zl);Ue("goog-toolbar-separator",function(){return new sw});function tw(a,b,c){Bu.call(this,a,b||pw.w(),c)}D(tw,Bu);Ue("goog-toolbar-toggle-button",function(){return new tw(null)});function uw(){return'<div class="goog-toolbar"><div title="Select base record type" class="goog-toolbar-select">Base record<div class="goog-menu" name="base-record"><div class="goog-option" name="gmail-contact">Gmail Contacts</div><div class="goog-option" name="Contacts">Contacts</div><div class="goog-option" name="Leads">Leads</div></div></div><div title="Sort order" class="goog-toolbar-select">Sort by<div class="goog-menu" name="sort-by"><div class="goog-option" name="modified">modified</div><div class="goog-option" name="id">id</div><div class="goog-option" name="name">name</div></div></div></div><div class="content"></div>'}
uw.g="templ.ydn.crm.sugarcrm.syncPanel";function vw(){}D(vw,Ge);u(vw);vw.prototype.t=function(){return"record"};vw.prototype.ma=function(a){return vw.m.ma.call(this,a)};function ww(a,b){We.call(this,null,null,a);this.l=b}D(ww,We);Se(ww,vw);function xw(a,b){M.call(this,a);this.l=b;this.i=new M(a);this.h=new M(a)}D(xw,M);xw.prototype.F=function(){return Yb("content",this.k())};xw.prototype.D=function(){xw.m.D.call(this);var a=this.k();Pf(a,uw,{});ee(new Eu,Yb("goog-toolbar",a));this.O(this.i,!0);this.O(this.h,!0);L(this.h.k(),!1)};xw.prototype.A=function(){xw.m.A.call(this);this.k()};function yw(){rk("gmail");As("Starting 0.12.1...");this.g=new Sv;this.h=new mw;this.h.render(this.g.g.firstElementChild.children[1]);this.l=new Qg(400);bd(this.l,Sg,this.xh,!0,this);this.j=0;this.s="";var a=this.history=new rd,b=new cj(document.location.href);a.Mh=b.Xc+"/";bd(this.history,"navigate",this.dh,!1,this);this.u=null;this.n=$.w();this.i=new Ov}g=yw.prototype;g.logger=R("ydn.crm.inj.App");
g.xh=function(){this.j++;this.s!=location.href&&(Dh(this.logger,"url already changed"),this.l.stop());40<this.j&&(Dh(this.logger,"sniff give up after "+this.j),this.l.stop());var a;a=(a=document.querySelector('table[role="presentation"]'))?a.querySelector("tr").children[2].querySelector("table"):null;a&&this.g&&this.g.h(a);if(a=zw(a,5<this.j))this.l.stop(),this.h.ce(a)};
function zw(a,b){if(!a)return null;var c=a.querySelector("img[jid]");if(!c){if(b){var d=a.querySelector("span[title]");if(d){var e=d.getAttribute("title").trim();if(0<e.length&&(d=document.querySelector('span[name="'+e+'"][email]')))return c=$.w().g.email,d=d.getAttribute("email"),new fk(c,d,e)}}return null}for(d=c.getAttribute("jid");c&&"TD"!=c.tagName;)c=c.parentElement;e=c.nextElementSibling.querySelector("span[title]").getAttribute("title");c=$.w().g.email;return new fk(c,d,e)}
g.dh=function(a){if(a.h!=this.u)if(a=(this.u=a.h)||location.hash,"#"==a.charAt(0)&&(a=a.substr(1)),a=/^contact(\/\[w\W]+)?\/[a-f\d]{2,18}$/.test(a)?"cd":/^contacts(\/\[w\W]+)?/.test(a)?"ct":/compose=new$/.test(a)?"cp":/^(label\/)?[\w\+]+$/.test(a)?"in":/^(label\/)?[\w\+]+\/[a-f\d]{10,18}$/.test(a)?"em":"un","cp"==a){a=this.h;if(a.h){a=a.h;var b=document.querySelector('form[enctype="multipart/form-data"]');b?(b=(b=os(b))?(b=b.querySelector("tbody").lastElementChild.firstElementChild.firstElementChild.firstElementChild.lastElementChild.querySelector("table"))?
b.querySelector("td:last-child"):null:null,b?(ss(a,b),a=!0):(Dh(a.logger,"compose toolbar not found."),a=!1)):(Dh(a.logger,"compose FORM element not found."),a=!1)}else Dh(a.logger,"SugarCRM instance not ready."),a=!1;this.logger.log(yh,"inject compose "+(a?"ok":"fail"),void 0)}else"em"==a?(this.logger.log(yh,"updating sidebar",void 0),this.j=0,this.s=location.href,this.g&&this.g.h(null),this.h.ce(null),Rg(this.l)):this.g&&this.g.h(null)};
g.Vg=function(a){var b=$.w();"list-sugarcrm-domains"==a.type?Aw(this):"login"==a.type?Is(b)||(Ls(b),Bw(this)):"logout"==a.type&&b.g.email&&(Ls(b),Bw(this))};
function Bw(a){a.n.je().M(function(){this.logger.log(yh,"initiating UI",void 0);var a=this.n,c=this.g.g.firstElementChild.children[0];a&&Is(a)?L(c,!1):L(c,!0);Is(this.n)?(this.h.ec(),Pv(this.i),Aw(this),this.history.setEnabled(!0)):(this.h.ec(),Pv(this.i),Mv(this.h,[]),Mv(this.i.h,[]),Dh(this.logger,"user not login"),this.history.setEnabled(!1))},function(a){window.console.error(a)},a)}function Aw(a){sk().send("list-sugarcrm-domain").K(function(a){Mv(this.h,a);Mv(this.i.h,a)},a)}
g.init=function(){this.logger.log(xh,"init "+this,void 0);this.i.render();bd(qk(),["list-sugarcrm-domains","logout","login"],this.Vg,!1,this);setTimeout(function(){cs()},6E4*(.5+Math.random()));Bw(this)};g.toString=function(){return"inj.Main:0.12.1"};na("ydn.crm.version","0.12.1");na("runInjApp",function(){ms();var a=new yw;window.setTimeout(function(){a.init()},500);return a});na("ydn.crm.msg.SimpleStatusBar",nw);nw.render=nw.prototype.render;na("ydn.crm.sugarcrm.model.Sugar",tl);
na("ydn.crm.ui.SidebarPanel",Nv);na("ydn.crm.sugarcrm.ui.SyncPanel",xw);na("ydn.crm.sugarcrm.ui.SearchPanel",qv);qv.prototype.setToolbarOptions=qv.prototype.Oh;na("ydn.crm.ui.UserSetting",$);$.getInstance=$.w;$.prototype.getModuleInfo=$.prototype.Bg;$.prototype.getUserInfo=$.prototype.$h;$.prototype.onReady=$.prototype.je;$.prototype.show=$.prototype.show;$.prototype.getLoginEmail=$.prototype.Hg;
tl.list=function(){var a=$.w();return sk().send("list-sugarcrm").K(function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.isLogin&&c.push(a.Bg(e.domain).K(function(a){return new tl(this,a)},e))}return Wp(c)})};mw.prototype.update=mw.prototype.ce;na("ydn.msg.Pipe",nk);na("ydn.msg.initPipe",rk);na("ydn.msg.getChannel",sk);nk.prototype.listen=nk.prototype.listen;nk.prototype.getChannel=nk.prototype.j;ik.prototype.send=ik.prototype.send;na("goog.async.Deferred",P);P.prototype.addCallback=P.prototype.K;P.prototype.addErrback=P.prototype.pe;P.prototype.addBoth=P.prototype.ed;P.prototype.addCallbacks=P.prototype.M;})();

            //# sourceMappingURL=https://ydn-src-1.storage.googleapis.com/jsc/ydn.crm.sugarcrm-0.12.1.js.map
        